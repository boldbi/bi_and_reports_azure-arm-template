@using Syncfusion.Server.Base.Helpers

@model Samples
@{
    /**/

    Layout = null;
    var globalAppSettings = _globalAppSettings;
    var reportServerResourceUrl = globalAppSettings.SystemSettings.CDNLink.TrimEnd('/');
}

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0">
    <title>[[[Sample Reports]]]</title>
    <script nonce="@Context.Items["ScriptNonce"]">
        var addSampleDashboardUrl = "@Url.Action("AddSampleItem", "Items")";
        var dashboardServerResourceUrl = "@globalAppSettings.SystemSettings.CDNLink";
        window.samplesList = @Json.Serialize(Model.Categories);
    </script>

    <environment include="Development,CloudDevelopment">
        <link rel="stylesheet" asp-append-version="true" href="@reportServerResourceUrl/cdn/css/theme/light.css" integrity="@IntegrityTagHelper.GetIntegrity("wwwroot/cdn/css/theme/light.css")" crossorigin="anonymous" />
        <link rel="stylesheet" asp-append-version="true" href="@reportServerResourceUrl/cdn/css/addsampleitem.css" integrity="@IntegrityTagHelper.GetIntegrity("wwwroot/cdn/css/addsampleitem.css")" crossorigin="anonymous" />
        <link rel="stylesheet" asp-append-version="true" href="@ServerAppConfig.CustomFontUrl(globalAppSettings?.SystemSettings?.FontPreference, reportServerResourceUrl)" />
        <script nonce="@Context.Items["ScriptNonce"]" asp-append-version="true" src="@reportServerResourceUrl/cdn/scripts/addsampleitem.js" integrity="@IntegrityTagHelper.GetIntegrity("wwwroot/cdn/scripts/addsampleitem.js")" crossorigin="anonymous"></script>
    </environment>
    <environment exclude="Development,CloudDevelopment">
        <link rel="stylesheet" asp-append-version="true" href="@reportServerResourceUrl/cdn/css/theme/light.min.css" integrity="@IntegrityTagHelper.GetIntegrity("wwwroot/cdn/css/theme/light.min.css")" crossorigin="anonymous" />
        <link rel="stylesheet" asp-append-version="true" href="@reportServerResourceUrl/cdn/css/addsampleitem.min.css" integrity="@IntegrityTagHelper.GetIntegrity("wwwroot/cdn/css/addsampleitem.min.css")" crossorigin="anonymous" />
        <link rel="stylesheet" asp-append-version="true" href="@ServerAppConfig.CustomFontUrl(globalAppSettings?.SystemSettings?.FontPreference, reportServerResourceUrl)" />
        <script nonce="@Context.Items["ScriptNonce"]" asp-append-version="true" src="@reportServerResourceUrl/cdn/scripts/addsampleitem.min.js" integrity="@IntegrityTagHelper.GetIntegrity("wwwroot/cdn/scripts/addsampleitem.min.js")" crossorigin="anonymous"></script>
    </environment>

    @await Html.PartialAsync("~/Views/Shared/_LoaderIcon.cshtml")

</head>

<body class="overflow-none sample-item-popup" id="sample-item-container">
    <div class="modal no-padding" tabindex="-1" role="dialog">
        <div class="modal-dialog col-lg-12 popup-header no-padding" id="samples" ng-app="samples" ng-controller="SampleListCtrl" role="document">

            <div class="modal-content col-lg-12" id="popup-container" data-spy="scroll">

                <div class="col-12 modal-header">
                    <div class="col-lg-11 col-11 col-sm-11 col-md-11 no-padding">
                        <span class="modal-title popup-title schedule-popup-title ellipsis no-padding" title="[[[Sample Reports]]]">[[[Sample Reports]]]</span>
                        <span id="info-category" role="button" tabindex="0" class="su su-info d-none" data-bs-toggle="popover" data-trigger="focus" data-bs-placement="right" data-content="[[[Adding reports from this section will put them under the Sample Reports category.]]]"></span>
                    </div>
                    <div class="col-lg-1 col-1 col-sm-1 col-md-1  no-padding float-end">
                        <a href="#" title="[[[Close]]]" class="sample-item-popup-close float-end popup-close prevent-default-action"><span class="su su-close"></span></a>
                    </div>
                </div>
                <div class="modal-body col-12 no-padding">
                    <div id="sample-item-container" class="col-12 sample-item-container-padding no-padding">
                        <div class="col-12 sample-item">
                            <div class="col-3 sample-category">
                                <h5>[[[Categories]]]</h5>
                                <div class="col-12 search-found ng-hide" ng-repeat="(key,value) in samples|filter:query| groupBy:'Name' as result">
                                    <span class="badge badge-primary badge-pill">{{createDummyArray(result)}}</span>
                                </div>
                                <ul class="list-group">
                                    <li class="list-group-item d-flex justify-content-between align-items-center highlight-list-item" ng-click="setFilterCategory()">
                                        [[[All]]]
                                        <span class="badge badge-primary badge-pill all-dashboard-count">0</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center" ng-repeat="item in dummies | filter:query" ng-click="setFilterCategory(item.category)">
                                        {{item.category}}
                                        <span class="badge badge-primary badge-pill">{{getCategoryItemsCount(result,item.category)}}</span>
                                    </li>
                                </ul>
                            </div>
                            <div id="search-area" class="float-end">
                                <input type="text" id="search-items" class="float-start no-margin" ng-model="query" placeholder="[[[Search]]]" />
                                <span class="su close-icon su-inner-close float-end no-margin clear-search" ng-click="query = ''" id="clear-search" title="[[[Clear search]]]"></span>
                                <span class="su su-search search-item float-end no-margin" title="[[[Search]]]"></span>
                            </div>
                            <div class="col-9 sample-dashboard">
                                <div class="col-12 search-found ng-hide" id="serch-count" ng-show="countFilterObjects(result, query) >= 1">
                                    <span class="dashboard-count">{{countFilterObjects(result, query)}} {{"[[[Result(s) found for]]]"}} "{{query}}"</span>
                                </div>
                                <div class="col-12 no-padding" ng-repeat="category in filteredSamples =(samples | filter:query | filter: filterByCategory )">
                                    <div class="col-12 no-padding" ng-repeat="dashboard in category.Reports ">
                                        <div class="col-3 sample-image">
                                            <img ng-src="@reportServerResourceUrl/cdn/css/sample_items/{{dashboard.ImageName | lowercase}}" />
                                        </div>
                                        <div class="col-9 sample-content">
                                            <div class="sample-name">{{dashboard.Name}}</div>
                                            <div class="sample-description">{{dashboard.Description}}</div>
                                            <input type="button" class="sample-add-button primary-button app-btn-primary" data-category-name="{{category.Name}}" data-sample-filename="{{dashboard.FileName}}" data-sample-description="{{dashboard.Description}}" data-sample-name="{{dashboard.Name}}" value="[[[Add Report]]]" />
                                        </div>
                                        <hr class="col-12 sample-separator" />
                                    </div>
                                </div>
                                <div class="dashboard-empty-message-div col-12 ng-hide" ng-show="countFilterObjects(result, query) == 0">
                                    <div class="empty-dashboard-image-div">
                                        <img class="empty-dashboard-image" src="@reportServerResourceUrl/cdn/css/images/dashboard-empty-state-60x60.svg" style="margin: 0 auto;/*! width: 100%; */">
                                    </div>
                                    <div>
                                        <span class="dashboard-empty-message">[[[No reports were found that match your search.]]] <br /> [[[Try modifying your search or filters.]]]</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer col-12">
                    <div class="col-lg-12 margin-top no-padding">
                        <input type="button" id="close-button" title="[[[Close]]]" class="secondary-button app-btn-secondary float-end itempermission-popup-close" value="[[[Close]]]" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>