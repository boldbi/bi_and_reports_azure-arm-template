var timeOut,searchId,userAgent=navigator.userAgent,regexIe8=new RegExp("Trident(/4.0)|(Trident/5.0)"),isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),clearSearch=!1,sessionData=!1,isSession=!1,isEtlstatusChecked=!1,keyCode={Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Pause:19,CapsLock:20,Esc:27,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,LeftWindow:91,RightWindow:92},ItemType={None:0,Category:1,Dashboard:2,Report:3,Datasource:4,Dataset:5,File:6,Schedule:7,Widget:8,ItemView:9,Slideshow:10,Settings:11,UserManagement:12,Permissions:13,ReportPart:14},excludedSearchKeys=[keyCode.Tab,keyCode.Shift,keyCode.Ctrl,keyCode.Alt,keyCode.Pause,keyCode.CapsLock,keyCode.PageUp,keyCode.PageDown,keyCode.End,keyCode.Home,keyCode.LeftArrow,keyCode.UpArrow,keyCode.RightArrow,keyCode.DownArrow,keyCode.Insert,keyCode.LeftWindow,keyCode.RightWindow];function isEmptyOrWhitespace(e){return""==$.trim(e)}function convertToBoolean(e){switch("string"==typeof e&&(e=e.toLowerCase()),e){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}}function handleAjaxError(){}function refreshScroller(){var e="block"==$(".collapseIcon").css("display")?$(".collapseIcon").height():0;if($(window).height()-($("#CatergoryHeading").outerHeight()+$("#base_menu_container_Div").outerHeight()+$("#listing").outerHeight()+e)<0){var t=$(window).height()-($("#CatergoryHeading").outerHeight()+$("#base_menu_container_Div").outerHeight()+e),a=$("#CatergoryHeading").outerWidth();$("#ScrollElement").ejScroller({height:window.innerWidth<1041&&t<200?200:t,width:a,buttonSize:0,scrollerSize:9})}else null!=$("#ScrollElement").data("ejScroller")&&$("#ScrollElement").data("ejScroller").destroy()}function refreshScrollerForCategory(){for(var e=0,t=0;t<$("#scroll-content #listing>li").length;t++)e+=$($("#scroll-content #listing>li")[t]).outerHeight();if($(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight()+e+$("#create-new-category").outerHeight())<0){var a=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight()+$("#create-new-category").outerHeight());$(".item-navigation").outerWidth();if($(".all-items").hasClass("active")&&$("#category-list").is(":visible")){$("#scroll-content").ejScroller({height:a,buttonSize:0,scrollerSize:9,autoHide:!0});var n=$("#scroll-content").data("ejScroller");null!=n&&null!=n&&n.refresh()}}else null!=$("#scroll-content").data("ejScroller")&&$("#scroll-content").data("ejScroller").destroy()}function addPlacehoder(e){regexIe8.test(userAgent)&&$(e).find("input[type=text],input[type=password],textarea").each(function(){""===$(this).val()?$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).show():$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).hide()})}function doAjaxPost(e,t,a,n,o,i,s,r,l,c){s&&(s.is(":input:button")||s.is("button")?s.prop({disabled:!0}):showWaitingPopup(s)),null==r&&(r=!0),null==l&&(l="application/x-www-form-urlencoded; charset=UTF-8"),$.ajax({type:e,url:t,context:this,processData:r,contentType:l,data:a,success:!0===c?$.proxy(getFnObj(n),window,a):$.proxy(getFnObj(n),window),error:$.proxy(function(e,t,a){e.statusText,o&&getFnObj(o).call(window,e,t,a)},this),complete:$.proxy(function(e){try{var t=JSON.parse(e.responseText);null!=t.data&&null!=t.data&&null!=t.data.Message&&null!=t.data.Message&&"unauthorized"==t.data.Message.toLowerCase()&&window.location.replace(window.location.href)}catch(e){}s&&(s.is(":input:button")||s.is("button")?s.prop({disabled:!1}):hideWaitingPopup(s)),i&&getFnObj(i).call(window,e)},this)})}function ShowWaitingProgress(e,t){if("show"==t){var a=createLoader(e);$(e).ejWaitingPopup({template:$("#"+a)}),$(e).ejWaitingPopup("show")}else $(e).ejWaitingPopup("hide")}function getFnObj(e){return"function"==typeof e||"string"==typeof e&&window[e]?e:void 0}function showWaitingPopup(e){if("string"==typeof e){var t=0===e.indexOf(".")?".":"#";0===e.indexOf(".")||0===e.indexOf("#")?t=e:t+=e,e=$(0===e.indexOf(".")?e:"#"+e)}else{if(e.first().attr("id"))t="#"+(e=e.first().attr("id"));else t=e="."+(e=e.first().attr("class"));e=$(0===e.indexOf(".")?e:"#"+e)}var a=createLoader(e,t);e.ejWaitingPopup({template:$("#"+a)}),e.ejWaitingPopup("show")}function hideWaitingPopup(e){"string"==typeof e&&(e=$(0===e.indexOf(".")?e:"#"+e)),e.ejWaitingPopup("hide")}function redirect(e,t){t?setTimeout(function(){window.location.assign(e)},t):window.location.assign(e)}function DateCustomFormat(e,t,a){var n,o,i,s,r,l,c,d,u,p,h,g,f,m,$,v,w,y,b,C,x,S,k=new Date(t),A=e;return o=((n=k.getFullYear())+"").slice(-2),r=(l=k.getMonth()+1)<10?"0"+l:l,s=(i=["January","February","March","April","May","June","July","August","September","October","November","December"][l-1]).substring(0,3),u=(p=k.getDate())<10?"0"+p:p,d=(c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][k.getDay()]).substring(0,3),x=p>=10&&p<=20?"th":1==(C=p%10)?"st":2==C?"nd":3==C?"rd":"th",e=e.replace("yyyy",n).replace("yy",o).replace("MMMM",i).replace("MMM",s).replace("MM",r).replace("dddd",c).replace("ddd",d).replace("dd",u).replace("d",p).replace("th",x),"True"==a?(S=(f=h=k.getHours())<10?"0"+f:f,m=($=k.getMinutes())<10?"0"+$:$,v=(w=k.getSeconds())<10?"0"+w:w,A=e.replace("HH",S).replace("mm",m).replace("ss",v)):(0==(f=h=k.getHours())&&(f=24),f>12&&(f-=12),g=f<10?"0"+f:f,b=(y=h<12?"am":"pm").toUpperCase(),m=($=k.getMinutes())<10?"0"+$:$,v=(w=k.getSeconds())<10?"0"+w:w,A=e.replace("hhh",h).replace("hh",g).replace("h",f).replace("mm",m).replace("m",$).replace("ss",v).replace("s",w).replace("ampm",y).replace("AMPM",b)),A}function isNumberKey(e){var t=e.which?e.which:e.keyCode;return!(46!=t&&t>31&&(t<48||t>57))}function validateUserName(e){return/\s/g.test(e)?{isValid:!1,message:window.Server.App.LocalizationContent.HasWhiteSpace}:/[^a-zA-Z0-9]/.test(e)?{isValid:!1,message:window.Server.App.LocalizationContent.UserNameSpecialCharacterValicator}:{isValid:!0,message:"valid"}}function isValidUrl(e){return!!/^(?!(ftp|https?):\/\/)([a-zA-Z0-9-_]+\.)*[a-zA-Z0-9][a-zA-Z0-9-]+(\.[a-z]{2,6})?(:\d{1,5})?(\/[a-zA-Z0-9-]+[a-zA-Z0-9-]*(\.[a-z]{2,8})?)*?$/gm.test(e)}function getMaxZIndex(){var e=0;return $("div").each(function(){var t=parseInt($(this).css("zIndex"),10);t>e&&(e=t)}),e}function IsEmail(e){return!!/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,63}|[0-9]{1,3})(\]?)$/.test(e)}function IsValidContactNumber(e){return!!/^(?:|[0-9\-\+]{9,15})$/.test(e)}function onCloseMessageBox(){$("#messageBox").ejDialog("close")}function onMessageDialogClose(){$("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html("")}function messageBox(e,t,a,n,o,i,s,r,l,c){var d,u,p;($("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html(""),$("#messageBox").find(".message-header").html("<span class='su "+e+"'></span> <span class='modal-title'  data-bs-toggle='tooltip' data-bs-placement='bottom' data-container='body' title='"+t+"'  >"+t+"</h2>"),$("#messageBox").find(".message-content").html(a),$("#messageBox").find(".message-content").removeClass("text-left"),"error"==n)?(null!=o&&(u=$("<input type='button' class='app-button app-critical-action-button app-btn-danger float-end' value='"+window.Server.App.LocalizationContent.YesButton+"'></input>")).bind("click",$.proxy(getFnObj(o),window)),null!=i?((d=$("<input type='button' class='app-button app-secondary-button app-btn-secondary float-end' tabindex='-1' value='"+window.Server.App.LocalizationContent.NoButton+"'></input>")).bind("click",$.proxy(getFnObj(i),window)),(p=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(i),window))):(d=$("<input type='button' class='app-button app-secondary-button app-btn-secondary float-end' tabindex='-1' value='"+window.Server.App.LocalizationContent.NoButton+"'></input>"),p=$('<span class="su su-close"></span>'),d.click(function(){onCloseMessageBox()}),p.click(function(){onCloseMessageBox()})),$(".message-box-close").html(p),$(".message-box-btn-holder").append(d,u),$("#messageBox").unbind("keydown")):(null!=o?((u=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'></input>")).bind("click",$.proxy(getFnObj(o),window)),(p=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(o),window))):(u=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'></input>"),p=$('<span class="su su-close"></span>'),u.click(function(){onCloseMessageBox()}),p.click(function(){onCloseMessageBox()})),$(".message-box-close").html(p),$(".message-box-btn-holder").append(u),$("#messageBox").on("keydown",function(e){switch(e.keyCode){case 13:case 27:u.click()}}));$('[data-bs-toggle="tooltip"]').tooltip(),$("#messageBox").ejDialog("open"),$("#messageBox").focus();var h=$("#messageBox").data("ejDialog");setTimeout(function(){null!=s&&h.option("width",s),window.innerWidth>1040&&null==r&&(r="135px"),h.option("height",r),null!=l&&h.option("maxHeight",l)},50),null!=c&&null!=c&&h.option("cssClass",c)}function deleteUserAvatar(){ShowWaitingProgress("#user-profile-master","show"),doAjaxPost("POST",deleteavatarUrl,{email:$("#user-email").val()},function(e){ShowWaitingProgress("#user-profile-master","hide"),e.status?messageBox("su-delete",window.Server.App.LocalizationContent.DeleteAvatar,window.Server.App.LocalizationContent.DeleteAvatarSuccess,"success",function(){var e=$("#logged-user").html().toLowerCase();$("#user-profile-picture").attr("src",getdefaultavatarUrl),$("#user-profile-picture").siblings("#avatar-delete-click").remove(),$("#user-name").val()==e&&$(".profile-picture,#profile-picture-menu").find("img").attr("src",getdefaultavatarUrl),onCloseMessageBox()}):messageBox("su-delete",window.Server.App.LocalizationContent.DeleteAvatarTitle,window.Server.App.LocalizationContent.DeleteAvatarError,"success",function(){onCloseMessageBox()})})}function IsValidName(e,t){return!("username"===e.toLowerCase()?new RegExp(/[*\[\\\]\|\/\:\<\>\%\+\#\&\?\'\"\@\;\,]/):"datasetname"===e.toLowerCase()||"report-part"===e.toLowerCase()?new RegExp(/[!"#$%&'()*+,\s./:;<=>?@[\\\]^`{|}~-]/g):new RegExp(/[*\[\\\]\|\/\:\<\>\%\+\&\#\?\'\"\;\,]/)).test(t)}function IsValidNumber(e){return/^\d+$/.test(e)}function UsernameValidation(e){return!!/^[a-zA-Z0-9]([._-](?![._-])|[a-zA-Z0-9]){1,252}[a-zA-Z0-9]$/.test(e)}function IsValidUsername(e){return UsernameValidation(e)||IsEmail(e)}function IsValidUsernameLength(e){return!!/^.{3,254}$/.test(e)}function GridLocalization(){ej.Grid.Locale["en-US"]={EmptyRecord:window.Server.App.LocalizationContent.NoRecords,StringMenuOptions:[{text:window.Server.App.LocalizationContent.SearchKeyStart,value:"StartsWith"},{text:window.Server.App.LocalizationContent.SearchKeyEnd,value:"EndsWith"},{text:window.Server.App.LocalizationContent.SearchKeyContanins,value:"Contains"},{text:window.Server.App.LocalizationContent.SearchKeyEqual,value:"Equal"},{text:window.Server.App.LocalizationContent.SearchKeyNotEqual,value:"NotEqual"}],FilterMenuCaption:window.Server.App.LocalizationContent.SearchValue,Filter:window.Server.App.LocalizationContent.Search,Clear:window.Server.App.LocalizationContent.ClearSearch},ej.Pager.Locale["en-US"]={pagerInfo:window.Server.App.LocalizationContent.pageCount,firstPageTooltip:window.Server.App.LocalizationContent.FirstPage,lastPageTooltip:window.Server.App.LocalizationContent.LastPage,nextPageTooltip:window.Server.App.LocalizationContent.NextPage,previousPageTooltip:window.Server.App.LocalizationContent.PreviousPage}}function PerformSearch(e){var t;if("#search-schedules"==e){t=$("#scheduleGrid").data("ejGrid");var a=$("#search-schedules").val();if(a.indexOf(":")>-1){var n=a.split(":")[0].toLowerCase(),o=a.split(":")[1].trim();switch(a.match(/:/g).length>1&&(firstKey=a.split(":")[1],secondKey=a.split(":")[2],o=(firstKey+":"+secondKey).trim()),n.replace(/ /g,"").toLowerCase()){case"name":n="Name";break;case"report":n="ItemName";break;case"lastrun":n="LastRunString";break;case"nextscheduledrun":n="NextScheduleString";break;case"exportpath":n="ExportPath";break;case"scheduleparameter":n="ScheduleParameter";break;case"status":n="Status"}t.model.searchSettings.fields=n,t.model.searchSettings.key=o,t.refreshContent(),t.model.searchSettings.fields=""}else t.search($("#search-schedules").val())}else"#search-slideshows"==e?((t=$("#slideshowGrid").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-users"==e?((t=$("#user_grid").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-ad-users"==e?($("#checkbox-header").prop("checked",!1),$(".checkbox-row").prop("checked",!1),(t=$("#user_grid").data("ejGrid")).search($("#search-ad-users").val())):"#search-items"==e?((t=$("#items").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-home-page"==e?((t=$("#items").data("ejGrid")).model.filterSettings.filteredColumns=[],(!$("#category-list").is(":visible")||$("#category-list").length<=0)&&($(".all-items").hasClass("active")&&(t.model.filterSettings.filteredColumns=[{field:"CategoryName",operator:"equal",value:$("#category-section-name").html()}]),t.model.pageSettings.currentPage=1,t.refreshContent())):"#search-published-items"==e?((t=$("#PublishItemGrid").data("ejGrid")).model.pageSettings.currentPage=1,t.search($("#search-published-items").val()),t.refreshContent()):"#search-group-users"==e||"#search-groups"==e?((t=$("#Grid").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-ad-groups"==e?(t=$("#Grid").data("ejGrid")).search($("#search-ad-groups").val()):"#ad-user-import"==e?($(".grid-error-validation").css("display","none"),$(".empty-validation").css("display","none"),$(".grid-validation").css("display","none"),searchADUsers($("#ad-user-import").val())):"#ad-group-import"==e?($(".grid_error_validation").css("display","none"),$(".empty_validation").css("display","none"),$(".grid_validation").css("display","none"),searchADGroups($("#ad-group-import").val())):"#search-user-permission"==e?(t=$("#itempermissiongrid").data("ejGrid")).search($("#search-user-permission").val()):"#search-group-permission"==e?(t=$("#itemgrouppermissiongrid").data("ejGrid")).search($("#search-group-permission").val()):"#userSearchKey"==e?(t=$("#UserGrid").data("ejGrid")).refreshContent():"#groupSearchKey"==e?(t=$("#GroupGrid").data("ejGrid")).refreshContent():"#search-linked-accounts"==e?(t=$("#ConnectedAccountGrid").data("ejGrid")).search($("#search-linked-accounts").val()):"#search-datasource-grid"==e&&((t=$("#add_datasource_grid").data("ejGrid")).model.selectedRecords=[],t.model.pageSettings.currentPage=1,t.refreshContent())}function SuccessAlert(e,t,a){window.top.$("#success-alert").css("display","table"),window.top.$("#message-header").html(e),window.top.$("#message-content").html(t),setTimeout(function(){window.top.$("#success-alert").fadeOut()},a)}function SuccessAlertFromPopup(e,t,a){window.top&&"function"==typeof window.top.SuccessAlert&&window.top.SuccessAlert(e,t,a)}function WarningAlert(e,t,a){parent.$("#warning-alert").css("display","table"),parent.$("#warning-alert #message-header").html(e),parent.$(" #warning-alert #message-content").html(t),null!=a&&""!=a&&setTimeout(function(){parent.$("#warning-alert").fadeOut()},a),$(document).on("click",".close-div",function(){parent.$("#warning-alert").fadeOut()})}function MobileAlert(e,t){parent.$("#mobile-alert").fadeIn(),parent.$("#mobile-alert #message").html(e),null!=t&&""!=t&&setTimeout(function(){parent.$("#mobile-alert").fadeOut(1e3)},t)}function ProgressAlert(e,t,a,n,o){var i="progress-alert_"+e;if(!parent.$("#progress-alert-container").find("#"+i).length){var s='<div id="'+i+'" class="progress-alert"><div id="image-container"><div class="image-holder"><span id="progress-notify-success" class="su su-tick display-none" alt="'+window.Server.App.LocalizationContent.SucessIcon+'"></span><div id="progress-notify-loader"><svg x="0px" y="0px" width="24px" height="30px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve"><rect x="0" y="10" width="4" height="10" fill="#0565FF" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.8s" repeatCount="indefinite" /></rect><rect x="8" y="10" width="4" height="10" fill="#0565FF" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.8s" repeatCount="indefinite" /></rect><rect x="16" y="10" width="4" height="10" fill="#0565FF" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.8s" repeatCount="indefinite" /></rect></svg></div></div></div><div id="message" class="div-close"><h1 id="message-header"></h1><span id="message-content"></span></div><div class="close-div"><span id="close-content">"'+window.Server.App.LocalizationContent.CloseIcon+'"</span></div></div>';$("#progress-alert-container").append(s)}parent.$("#"+i).css("display","table"),parent.$("#"+i+" #message-header").html(t),parent.$("#"+i+" #message-content").html(a),o?(parent.$("#"+i+" #progress-notify-loader").addClass("display-none"),parent.$("#"+i+" #progress-notify-success").removeClass("display-none")):(parent.$("#"+i+" #progress-notify-loader").removeClass("display-none"),parent.$("#"+i+" #progress-notify-success").addClass("display-none")),null!=n&&""!=n&&setTimeout(function(){parent.$("#"+i).fadeOut()},n),$(document).on("click",".close-div",function(){var e=$(this);parent.$(e).parent().remove()})}function getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]==e)return n[1]}return null}function getUrlQueryVariable(e,t){for(var a=e.substring(e.indexOf("?")+1).split("&"),n=0;n<a.length;n++){var o=a[n].split("=");if(o[0]==t)return o[1]}return null}function createLoader(e,t){var a="";if("string"==typeof e){t=0===e.indexOf(".")?".":"#";if(a=(e=0===e.indexOf(".")||0===e.indexOf("#")?e.slice(1,e.length):e)+"-loader-icon",0==$("#"+a).length&&0!=$(t+e).length){var n=$("<div class='loader-blue loader-icon' id='"+a+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div>");$("body").append(n)}return a}t=0===(e=t).indexOf(".")?".":"#";if(a=(e=e.slice(1,e.length))+"-loader-icon",0==$("#"+a).length&&0!=$(t+e).length){n=$("<div class='loader-blue loader-icon' id='"+a+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div>");$("body").append(n)}return a}function ajaxPostCall(e,t,a,n,o,i,s){if(embedConfig.IsEmbedCode){if("GET"==e){var r=jQuery.param(a);t.api=t.api+"?"+r,a=null}return $.ajax({type:e,url:reportServerApiUrl+t.api,headers:{"Content-type":"application/json",Authorization:"bearer "+designerToken},data:JSON.stringify(a),beforeSend:function(e){isNullOrWhitespace(n)||n(e)},success:function(e,t){isNullOrWhitespace(o)||o(e)},error:function(e){isNullOrWhitespace(i)||i()},complete:function(e){isNullOrWhitespace(s)||s(e)}})}return $.ajax({type:e,url:t.web,data:a,beforeSend:function(e){isNullOrWhitespace(n)||n(e)},success:function(e,t){isNullOrWhitespace(o)||o(e)},error:function(e){isNullOrWhitespace(i)||i()},complete:function(e){isNullOrWhitespace(s)||s(e)}})}function isNullOrWhitespace(e){return null==e||null==e||""==$.trim(e)}function getCurrentPageNumber(e,t,a,n){var o=a-t;if(o>e){var i=o%e===0?o/e:Math.floor(o/e+1);return n>i?i:n}return 1}function isValidGuid(e){return/^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$/gi.test(e)}function showOrHideGridPager(e){var t=$(e).ejGrid("option","pageSettings");t.totalRecordsCount<=t.pageSize?$(e+" .e-pager").css("display","none"):$(e+" .e-pager").css("display","block")}function blurServerAppContainer(e){null!=e&&""!=e||(e="5px"),$("#header-area, #menu-area, #content-area, footer, .cookie-notification").css("filter","blur("+e+")"),$("#server-app-container").css("overflow","hidden"),$("#unlock-enterprise-features-container").length>0&&$("#unlock-enterprise-features-container").addClass("blur-content")}function unblurServerAppContainer(){$("#header-area, #menu-area, #content-area, footer, .cookie-notification").css("filter",""),$("#server-app-container").css("overflow",""),$("#unlock-enterprise-features-container").length>0&&$("#unlock-enterprise-features-container").removeClass("blur-content")}function generateUUID(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)})}function PreloadResources(e,t){setTimeout(function(){for(var a=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")||-1!=navigator.userAgent.indexOf("Edge"),n=0;n<e.length;n++){var o=document.createElement("link");o.href=e[n],o.rel=a?"preload":"prefetch",o.as=t,document.head.appendChild(o)}})}function refreshToolTip(e){null==e&&(e="tooltip"),$('[data-bs-toggle="'+e+'"]').tooltip({animation:!0,delay:{show:500},html:!0})}function extractXSRFTokenFromCookie(){var e=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function isValidOrigin(e){return new RegExp(/^https?:\/\/(?:w{1,3}\.)?[^\s.]+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))/).test(e)}function createWaitingPopup(e){ejs.popups.createSpinner({target:document.getElementById(e)})}$(document).ready(function(e){$("body, .login-main, #server-app-container").removeAttr("style"),$("#layout-body-loader-icon").css("display","none"),$(document).on("click",".close-warning-icons",function(e){$("#content-area").removeClass("suspension-warning-space"),$(".suspension-warning").css("display","none")}),$(document).on("click",".close-user-warning-icons",function(e){$("#content-area").removeClass("user-warning-space"),$(".user-warning").css("display","none")}),$("form").attr("autocomplete","off"),$("input[type=text], input[type=password]").attr("autocomplete","off"),$.fn.tooltip=function(e){return this.each(function(){new bootstrap.Tooltip(this,e)})},$('[data-bs-toggle="tooltip"]').tooltip(),$('.help-option [second-toggle="tooltip"]').each(function(){var e=bootstrap.Tooltip.getInstance(this);e&&e.dispose()}),$('.help-option [second-toggle="tooltip"]').tooltip({animation:!0,delay:{show:500,hide:100}}),$('#app-navigation [data-bs-toggle="tooltip"]').each(function(){var e=bootstrap.Tooltip.getInstance(this);e&&e.dispose()}),$('#app-navigation [data-bs-toggle="tooltip"]').tooltip({animation:!0,delay:{show:500,hide:100}}),document.querySelectorAll('[data-bs-toggle="profile-tag-tooltip"]').forEach(e=>{new bootstrap.Tooltip(e,{animation:!0,html:!0,placement:"top"})}),$(".dropdown-menu #notify_header").click(function(e){e.stopPropagation()}),$(document).on("click","#notification-content-area.dropdown-menu",function(e){e.stopPropagation()}),$("#notification-icon").click(function(){if(!$("#notification-link").hasClass("open")){var e=angular.element($("#notification-content")).scope();e.$apply(function(){e.notifications=[],e.isFinal=!0,e.skip=0});var t=createLoader("notification-content-area");$("#notification-content-area").ejWaitingPopup({template:$("#"+t)}),$("#notification-content-area").addClass("show"),$("#notification-content-area").ejWaitingPopup("show"),$("#notification-content-area").removeClass("show"),$.ajax({type:"GET",url:getUserNotificationsPartialViewResultUrl,success:function(e){null!==e&&(angular.element($("#notification-content")).scope(),function(e){var t=angular.element($("#notification-content")).scope();parent.$("#notification-content-area").ejWaitingPopup("show"),t.$apply(function(){for(var a=t.skip,n=0;n<e.LogList.length;n++)t.notifications.push(e.LogList[n]);e.LogList.length>0?parent.$("#view-all-notification").removeClass("not-active"):parent.$("#view-all-notification").addClass("not-active"),t.totalNotifications=e.LogCount,t.skip=t.skip+e.LogList.length,t.isFinal=t.skip==t.totalNotifications,parent.$("#notification-content-area").ejWaitingPopup("hide"),setTimeout(function(){for(var e=document.getElementsByTagName("img"),t=a;t<e.length;t++)e[t].getAttribute("data-actual-image")&&e[t].setAttribute("src",e[t].getAttribute("data-actual-image"))},700)})}(e.Data))}}),$("#notification-indicator").remove()}}),$("#bold-etl").click(function(e){canCheckSession&&(isEtlstatusChecked?(document.getElementById("bold-etl-href").click(),isEtlstatusChecked=!1):(e.preventDefault(),$.ajax({type:"Post",url:etlHealthyStatusUrl,success:function(e){e.isEtlServiceHealthy?(isEtlstatusChecked=!0,$("#bold-etl").click()):WarningAlert("",window.Server.App.LocalizationContent.ETLLogoDisabled.format("<a target='_blank' href='"+etlHelpLink+"'>","</a>"),7e3)}})))}),$(function(){$(document).click(function(e){$("#menu-area").hasClass("in")&&$("#menu-area").collapse("hide")})}),$(document).on("touchend",function(e){$("#menu-area").hasClass("in")&&$("#menu-area").collapse("hide")});var t=$('<div id="nav-backdrop" class="modal-backdrop" style="z-index: 50; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; color: #fff; opacity: 0; position: absolute"></div>');$("#upload-item-section, #notification-link, #account-profile").on("hidden.bs.dropdown",function(){parent.$("#nav-backdrop").hide()}),$("#notification-link, #account-profile, #upload-item-section").click(function(e){0===$(".dropdown-backdrop").length&&$("body").append(t),$("#notification-link").hasClass("open")?($("#account-profile").hasClass("open"),t.show()):t.show()}),$(document).on("click","#account-profile .profile-info",function(e){e.stopPropagation()}),t.click(function(){t.hide()}),$(document).on("click",".dropdown-backdrop",function(){parent.$("#nav-backdrop").hide()}),"ad-user-import"==(searchId=$("#search-area").children("input").attr("id"))||"AD-group-import"==searchId||"search-ad-users"==searchId||"search-ad-groups"==searchId?($.xhrPool=[],$.xhrPool.abortAll=function(){$(this).each(function(e,t){t.abort()}),$.xhrPool.length=0},$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie()),$.xhrPool.push(e)},complete:function(e){var t=$.xhrPool.indexOf(e);t>-1&&$.xhrPool.splice(t,1)}})):($.xhrPool=[],$.xhrPool.abortAll=function(){$(this).each(function(e,t){t.abort()}),$.xhrPool.length=0},"undefined"!=typeof ej&&void 0!==ej.UrlAdaptor?(ej.UrlAdaptor.prototype.beforeSend=function(e,t){t.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie()),$.xhrPool.push(t)},$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())},complete:function(e){var t=$.xhrPool.indexOf(e);t>-1&&$.xhrPool.splice(t,1)}})):$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}})),$(".lazyload").each(function(){if("footerlogo"==$(this).attr("data-id"))$(this).parent().find("p#poweredbysyncfusion").append($("<img>").attr({src:$(this).attr("data-src"),alt:$(this).attr("data-alt"),id:$(this).attr("data-id"),onerror:$(this).attr("data-default")}));else if("profilelogo"===$(this).attr("data-id")||"user-profile-picture"===$(this).attr("data-id"))$(this).parent().append($("<img>").attr({src:$(this).attr("data-src-value"),alt:$(this).attr("data-alt"),id:$(this).attr("data-id"),onerror:$(this).attr("data-default")}));else if($(this).parent().append($("<img>").attr({src:$(this).attr("data-src"),alt:$(this).attr("data-alt"),id:$(this).attr("data-id"),onerror:$(this).attr("data-default")})),"application-logo"===$(this).attr("data-id")){var e=$(this).attr("data-src");if(void 0!==e&&""!==e&&e.length>3)"svg"===e.substr(e.length-3,e.length).toLowerCase()&&$("#application-logo").addClass("application-logo-svg")}$(this).remove()}),window.isSiteLoaded=!1,$("#top-menu-dropdown-profile").off("show.bs.dropdown").on("show.bs.dropdown",function(){"true"==isUmsAdmin.toLowerCase()&&$("#top-menu-dropdown-profile .dropdown-menu.sub-menu .admin-privilege").show(),window.isSiteLoaded||$.ajax({type:"POST",url:window.userTenantsUrl,success:function(e){$("#user-sites .loader-sites-gif").remove();for(var t=e.Sites,a=t.length>2?2:t.length,n=0;n<a;n++){var o=t[n].DNS;null!=t[n].TenantIdentifier&&(o+="/"+window.tenantIdentifierPrefix+"/"+t[n].TenantIdentifier),$("#user-sites").append($("<a href='"+o+"' target='_blank'> <div class='site-logo-container'> <img src='"+o+"/get-client-logo?logotype=headerlogo' alt='boldreports-header' class='site-logo'/><span class='site-name'>"+t[n].TenantName+"</span></div></a>"))}t.length>=3?$("#more-sites-id").append("<div class='float-start more-sites'><a href='"+window.idpUrl+"' target='_blank'>more sites...</a></div>"):$("#more-sites-id").remove(),window.isSiteLoaded=!0}})}),$(".hide-display").each(function(){$(this).removeClass("hide-display")}),"undefined"!=typeof showFeedbackDialog&&"true"==showFeedbackDialog.toLowerCase()&&($("#do-not-show-button").removeClass("display-none"),$("#show-later-button").removeClass("display-none"),$("#cancel-button").addClass("display-none"),$("#close-general-feedback").attr("data-feedback-close",!1),openFeedbackWindow());var n=createLoader("#body");if($("#body").ejWaitingPopup({template:$("#"+n)}),"undefined"!=typeof canCheckSession&&(isSession=Boolean(canCheckSession)),isSession){function o(){$.ajax({type:"GET",url:isSessionActiveUrl,success:function(e){e.isactive?setTimeout(function(){o()},18e4):(function(){if($(".e-btn-icon.e-icon-dlg-close.e-icons").is(":visible")){var e=$(".e-btn-icon.e-icon-dlg-close.e-icons:visible");$.each(e,function(e,t){var a=$(t).parents(".e-dialog").attr("id");null==a&&null==a||document.getElementById(a).ej2_instances[0].hide()})}if($(".popup-close").is(":visible")){var t=$(".popup-close:visible");$.each(t,function(e,t){var a=$(t).parents(".e-dialog").attr("id");null==a&&null==a||(eDialog=$("#"+a).data("ejDialog"),eDialog.close())})}}(),function(){if("undefined"!=typeof isViewerV2Enabled&&!isViewerV2Enabled||"undefined"!=typeof isDesignerV2Enabled&&!isDesignerV2Enabled){var e=$("#messageBox").data("ejDialog");null==e&&($("#messageBox").ejDialog({width:parent.window.innerWidth>460?"450px":parent.window.innerWidth-10,height:"150px",showOnInit:!1,allowDraggable:!0,enableResize:!1,showHeader:!1,enableModal:!0,close:"onMessageDialogClose"}),e=$("#messageBox").data("ejDialog")),messageBox("",window.Server.App.LocalizationContent.SessionHeader,window.Server.App.LocalizationContent.SessionContent,"success",i)}else{var t="",a='<span class ="dialog-header-title">'+window.Server.App.LocalizationContent.SessionHeader+"</span>";if(!sessionData){var n=document.createElement("div");n.setAttribute("id","session-time-dialog");var o=document.getElementById("content-area");if(null==o){var r=document.createElement("div");r.setAttribute("id","content-area"),document.body.appendChild(r),o=document.getElementById("content-area")}t=ejs.popups,o.appendChild(n);var l=window.Server.App.LocalizationContent.SessionContent;new t.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>500?"470px":window.innerWidth-10,height:"auto",showHeader:!1,isModal:!0,enableModal:!0,closeOnEscape:!0,header:a,close:"closeDialog",showCloseIcon:!0,content:l,buttons:[{click:function(e){i()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.OKButton}}],close:s}).appendTo(n),sessionData=!0}}}())}})}setTimeout(function(){o()},18e4)}function i(){location.reload()}function s(){location.reload()}String.prototype.format=function(){for(k in a=this,arguments)a=a.replace("{"+k+"}",arguments[k]);return a}}),$(document).on("keyup","textarea",function(e){if(8!=e.keyCode&&46!=e.keyCode){var t=$(this).attr("maxlength");null!=t&&$(this).val().length>=t&&$(this).val($(this).val().substring(0,t))}}),$("textarea").keyup(function(e){if(8!=e.keyCode&&46!=e.keyCode){var t=255;null!=$(this).attr("maxlength")&&(t=$(this).attr("maxlength")),$(this).val().length>=t&&$(this).val($(this).val().substring(0,t))}}),$(document).on("focus","input[type=text],input[type=password],textarea",function(){regexIe8.test(userAgent)&&$(this).next(".placeholder").removeClass("show").addClass("hide")}),$(document).on("focusout","input[type=text],input[type=password],textarea",function(){regexIe8.test(userAgent)&&""===$(this).val()&&$(this).next(".placeholder").removeClass("hide").addClass("show")}),$(document).on("focus",".placeholder",function(){$(this).prev("input").focus()}),$(document).on("keyup","#SearchCategory, #search-groups, #search-group-users, #search-published-items, #ad-user-import, #userSearchKey,#groupSearchKey, #ad-group-import, #searchItems, #search-slideshows, #search-schedules, #search-users, #search-ad-users, #search-ad-groups, #search-user-permission, #search-group-permission, #search-database-users,#search-tree, #search-home-page, #search-items, .search-user-holder, .tree-view-search-holder, #search-linked-accounts, #template-datasource-search-items,#search-datasource-grid",function(e){var t="#"+this.id;""!=$(t).val()?"#search-home-page"==t?$(t).parent().siblings("span.close-icon").css("display","block"):($(t).siblings("span.close-icon").css("display","block"),$(t).siblings("span.search-user").css("display","none"),$(t).siblings("span.search-accounts").css("display","none"),$(t).siblings("span.search-group").css("display","none"),$(t).siblings("span.search-group-users").css("display","none"),$(t).siblings("span.search-icon").css("display","none"),$(t).siblings("span.search-item").css("display","none"),$(t).siblings("span.search-schedule").css("display","none"),$(t).siblings("span.search-slideshows").css("display","none"),$(t).siblings("span.search").css("display","none")):"#search-home-page"==t?$(t).parent().siblings("span.su-search").css("display","block"):($(t).siblings("span.close-icon").css("display","none"),$(t).siblings("span.su-search").css("display","block"))}),$(document).on("click","#clear-search,.clear-search",function(){var e=$(this).prevAll("input");(""==e||null==e||null==e||e.length<=0)&&(e=$(this).prev("div").find("input"));var t="#"+e.attr("id");if(e.val(""),clearSearch||$("#clear-search").css("display","none"),""==e.val()){if("#search-home-page"!=t||clearSearch?$("#clear-search").siblings("span.su-search").css("display","block"):($("#clear-search").parent().siblings("span.su-search").css("display","block"),$(".search-area").removeClass("add-background"),$(".placeholder, #clear-search").hide(),$(".all-items").hasClass("active")&&!$("#category-list").is(":visible")?setTimeout(function(){$(".search-area").prevAll().show().parent().removeClass("float-end"),$("#category-section-name").show()},300):setTimeout(function(){$(".search-area").prevAll(":not(#back-icon)").show().parent().removeClass("float-end"),$("#category-section-name").show()},300),setTimeout(function(){$(".search-home-section:visible").removeClass("show")},300)),"#ad-user-import"==t||"#ad-group-import"==t||"#search-database-users"==t)if("#search-database-users"==t){var a=jQuery.Event("keypress",{keyCode:13});$("#search-database-users").trigger(a)}else{(n=$("#Grid").data("ejGrid")).option("dataSource","")}else PerformSearch(t);if("#search-ad-users"==t||"#search-ad-groups"==t)if("#search-ad-groups"==t){var n=$("#Grid").data("ejGrid");$("#checkbox-header").prop("checked",!1),$(".checkbox-row").prop("checked",!1),n.clearSelection()}else{n=$("#user_grid").data("ejGrid");$("#checkbox-header").prop("checked",!1),$(".checkbox-row").prop("checked",!1),n.clearSelection()}}else e.val("")}),$(document).on("keydown","#search-groups, #search-group-users, #searchItems, #search-published-items, #search-schedules,#search-slideshows,#userSearchKey,#groupSearchKey, #search-users, #search-user-permission, #search-group-permission, #search-home-page, #search-items, #search-linked-accounts",function(e){$.xhrPool.abortAll();var t=parseInt(e.which),a="#"+this.id;null!=timeOut&&(clearTimeout(timeOut),timeOut=null),t===keyCode.Enter?PerformSearch(a):-1===excludedSearchKeys.indexOf(t)&&(timeOut=setTimeout(function(){PerformSearch(a)},900))}),window.onpopstate=function(e){var t=window.location.search,a=window.location.pathname.split("/");e.preventDefault();var n=void 0!==a[2]?a[2]:null,o=null!=(void 0!==a[3]&&"dashboards"==a[3]?a[3]:null)&&void 0!==a[4]&&isValidGuid(a[4])?a[4]:null,i=null!=o&&void 0!==a[5]?a[5]:null,s=null!=o&&void 0!==a[6]?a[6]:null,r=getQueryVariable("view"),l=getQueryVariable("tab");if(null!=n&&null!=r&&null!=i&&null!=s&&null!=o){var c=$("#current-url").attr("data-url").split("/");if(o!==(null!=(void 0!==c[3]&&"dashboards"==c[3]?c[3]:null)&&void 0!==c[4]&&isValidGuid(c[4])?c[4]:null)){var d=rootUrlAction+"/dashboards";DashboardRender(d,o,i,s,r,l)}else $("#current-url").attr("data-url",rootUrlAction+"/dashboards/"+o+"/"+decodeURI(i)+"/"+decodeURI(s)+"?view="+decodeURI(r))}else if(null!=r&&null==i&&null==s){0==$(".item-navigation li[data-value='"+r+"']").hasClass("active")&&($(".item-navigation li").removeClass("active"),$(".item-navigation li[data-value='"+r+"']").addClass("active")),$(".item-navigation li[data-value='"+r+"']").trigger("click"),document.getElementById("dashboard_render_iframe").contentWindow.location.href="about:blank",$("#item-viewer #initial-item-message").css("display","block"),$("#dashboard_render_iframe").css("display","none")}else if(""==t&&null==i&&null==r&&a.length<5){0==$(".item-navigation li[data-value='categories']").hasClass("active")&&($(".item-navigation li").removeClass("active"),$(".item-navigation li[data-value='categories']").addClass("active")),$(".item-navigation li[data-value='categories']").trigger("click");var u=decodeURI(a[a.length-1]);$(".category-link[data-category='"+u+"']").trigger("click")}null===e.state||JSON.stringify(e.state)===JSON.stringify({})&&null===l||document.getElementById("dashboard_render_iframe").contentWindow.postMessage("filter","*")},$(window).on("load",function(){"undefined"!=typeof getTenantStatusUrl&&$.ajax({type:"Post",url:getTenantStatusUrl,success:function(e){if(void 0!==e&&e.IsAdmin&&!e.IsTenantStatusActive){$(".warning-content").text("");var t=window.location.pathname.indexOf("administration/payments")>-1,a="";"MarkedForSuspension"!==e.TenantStatus||t?"Suspended"===e.TenantStatus&&(a=window.Server.App.LocalizationContent.SuspendedWarning+" <span class='close-warning-icons su-close'></span>",$(".warning-content").append(a),$(".suspension-warning").css("display","block"),$("#content-area").addClass("suspension-warning-space")):(a=window.Server.App.LocalizationContent.SuspensionWarning+e.TenantStatusUpdateDate+". "+window.Server.App.LocalizationContent.Click+" <a href='"+paymentPageUrl+"'>"+window.Server.App.LocalizationContent.Here+"</a>"+window.Server.App.LocalizationContent.NavigatePaymentPage+"<span class='close-warning-icons su-close'></span>",$(".warning-content").append(a),$(".suspension-warning").css("display","block"),$("#content-area").addClass("suspension-warning-space"))}}}),"undefined"!=typeof getNotificationCountUrl&&$.ajax({type:"Post",url:getNotificationCountUrl,success:function(e){null!=e&&null!=e&&(e.notificationCount>0?$("#user-system-notification").append($("<span>").attr({id:"notification-indicator"})):$("#user-system-notification").find("#notification-indicator").remove())}})}),$(document).ready(function(e){$("#cookiesubs,#cookiesubs-dashboards").on("click",function(){$(".cookie-notification").remove(),$(".cookie-notification-dashboards").remove(),$.ajax({type:"POST",url:window.setPermissionUrl})})}),$(document).on("show.bs.collapse","#menu-area",function(){$("#collapse-menu-backdrop").show(),$(".mobile-menu-icon span i").removeClass("su-mobile-menu-icon"),$(".mobile-menu-icon span i").addClass("su-close")}),$(document).on("hide.bs.collapse","#menu-area",function(){$("#collapse-menu-backdrop").hide(),$(".mobile-menu-icon span i").removeClass("su-close"),$(".mobile-menu-icon span i").addClass("su-mobile-menu-icon")}),$(document).on("hidden.bs.collapse","#menu-area",function(){$("#menu-area").css("width","175px")}),$(document).on("click","#deploy-error-copy",function(e){var t=$("#deploy-error-copy"),a=$("#deploy-error-box");a.prop("disabled",!1),a.select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?(t.removeClass("su su-copy"),t.attr("data-original-title","")):(document.execCommand("copy"),t.attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess),t.tooltip("hide").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess).tooltip("fixTitle").tooltip("show"),a.prop("disabled",!0),setTimeout(function(){t.attr("data-original-title",window.Server.App.LocalizationContent.LinkCopy),t.tooltip()},3e3))}),$(document).on("focusin","#deploy-error-box",function(){$("#deploy-error-copy").addClass("focusdiv")}),$(document).on("focusout","#deploy-error-box",function(){$("#deploy-error-copy").removeClass("focusdiv")});
