var itemUrl,browser=ej.browserInfo(),isFirstRequest=!1,isAjaxRequested=!0;function onSuccessDeleteItem(){var e=$("#items").data("ejGrid");e.model.sortSettings.sortedColumns=[],e.model.filterSettings.filteredColumns=[],$("#search-items").find("input[type=text]").val("");var t=e.model.pageSettings.currentPage,a=(e.model.pageSettings.pageSize,e.model.pageSettings.totalRecordsCount,e.model.pageSettings.totalRecordsCount%e.model.pageSettings.pageSize);if(0!=a&&a<=1&&(e.model.pageSettings.currentPage=t-1),"dashboards"===$("#item-grid-container").attr("data-grid-name").toLowerCase()){var i=parent.angular.element(parent.document.getElementById("server-items-container")).scope();e.model.query._params.push({key:"displayCategory",value:i.itemRequestType})}e.refreshContent(),$("#dashboard_render_iframe").attr("src",""),$("#initial-item-message").css("display","block"),$("#dashboard_render_iframe").css("display","none")}function onNewFileDialogOpen(){$("#file-popup-iframe").attr("src",addFileIframeUrl)}function onSchedulerDialogClose(){$("#popup-container").find("iframe").contents().find("html").html("")}function onSchedulerDialogOpen(){$("#scheduler-popup-iframe").attr("src",schedulerIframeUrl+"?itemName="+ItemName+"&&itemId="+ItemId+"&&categoryName="+CategoryName+"&&categoryId="+CategoryId+"&&scheduleId="+ScheduleId+"&&multiDashboardName="+MultiDashboardName+"&&actionType=Create"),$("#popup-container_wrapper").ejWaitingPopup("show")}function onNewFileDialogClose(){$("#file-popup").find("iframe").contents().find("html").html(""),$("#file-popup").ejDialog("close")}function openNewDataSourcePopup(){$("#datasource-popup-iframe").addClass("add-datasource-frame"),$("#datasource-popup").ejDialog("open"),$("#datasource-popup_wrapper").ejWaitingPopup("show")}function openNewFilePopup(){$("#file-popup").ejDialog("open"),$("#file-popup_wrapper").ejWaitingPopup("show")}function onDataSourceDialogOpen(){$("#datasource-popup-iframe").attr("src",addDatasourceIframeUrl).addClass("add-datasource-frame")}function onDataSourceDialogClose(){$("#datasource-popup").find("iframe").contents().find("html").html(""),$("#datasource-popup").ejDialog("close")}function onWidgetDialogOpen(){$("#widget_popup_iframe").attr("src",addWidgetUrl)}function onWidgetDialogClose(){$("#widget_popup").find("iframe").contents().find("html").html(""),$("#widget_popup").ejDialog("close")}function onDeleteItemDialogClose(){$("#item-delete-confirmation").ejDialog("close")}function onDeleteItemDialogOpen(){$("#item-delete-confirmation").ejDialog("open"),$("#item-delete-confirmation").focus()}function onReportDialogOpen(){}function openNewWidgetPopup(){$("#widget_popup").ejDialog("open"),$("#widget_popup_wrapper").ejWaitingPopup("show")}function openNewCreateDataSourcePopup(){$("#create-datasource-popup").ejDialog("open"),$("#create-datasource-popup_wrapper").ejWaitingPopup("show")}function onCreateDataSourceDialogOpen(){$("#create-datasource-iframe").attr("src",createDatasourceUrl)}function onCreateDataSourceDialogClose(){$("#create-datasource-popup").ejDialog("close")}function fnActionBegin(e){var t=createLoader("items");this.element.ejWaitingPopup({template:$("#"+t)}),"refresh"!=e.requestType||this.initialRender||$("#items").find(".e-gridcontent").css("visibility","hidden");var a=$("#item-grid-container").data("gridName");"dashboards"!==a.toLowerCase()&&"widgets"!==a.toLowerCase()||"none"==$("#server-items-container .category-collapse").css("display")&&$("#item-grid-container").ejWaitingPopup("show");var i="";"Search"!==(i=$("#search-home-page").is(":visible")?$("#search-home-page").val():$("#search-items").val())&&this.model.query._params.push({key:"searchKey",value:i});var o,r=[];if(e.model.filterSettings.filteredColumns.length>0)for(o=0;o<e.model.filterSettings.filteredColumns.length;o++){var n=e.model.filterSettings.filteredColumns[o];r.push({PropertyName:n.field,FilterType:n.operator,FilterKey:n.value}),this.model.query._params.push({key:"filterCollection",value:r})}if("dashboards"===a||"widgets"===a){var s=angular.element(document.getElementById("server-items-container")).scope();e.model.query._params.push({key:"displayCategory",value:s.itemRequestType})}}function fnActionFailure(e){setTimeout(function(){$("#item-grid-container").ejWaitingPopup("show"),$("#item-list-panel > .item-navigation, #item-list-panel > #category-listing").css("visibility","visible")},500)}function fnActionComplete(e){$("#item-list-panel > .item-navigation, #item-list-panel > #category-listing").css("visibility","visible"),$("[ data-bs-toggle='tooltip']").tooltip();var t=$("#items").data("ejGrid");if(0==t._gridRecordsCount){if(i="datasources"==$("#item-grid-container").attr("data-grid-name")){var a="";a=window.Server.App.LocalizationContent.NoDataSources}else if(i="datasets"==$("#item-grid-container").attr("data-grid-name")){a="";a=window.Server.App.LocalizationContent.NoDatasets}else if(i="files"==$("#item-grid-container").attr("data-grid-name")){a="";a=window.Server.App.LocalizationContent.NoFilesToDisplay}else{a="";"favorite dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?a=window.Server.App.LocalizationContent.NoFavoriteDashboards:"recent dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?a=window.Server.App.LocalizationContent.NoRecentDashboards:"public dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?a=window.Server.App.LocalizationContent.NoPublicDashboards:"all dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?a=window.Server.App.LocalizationContent.NoDashboards:"all widgets"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?a=window.Server.App.LocalizationContent.NoWidgets:"public widgets"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?a=window.Server.App.LocalizationContent.NoPublicWidgets:"all categories"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?a=window.Server.App.LocalizationContent.NoDashboards:"draft dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()&&(a=window.Server.App.LocalizationContent.NoDrafts)}this.getContentTable().find("tbody .emptyrecord").html(a)}var i=$("#item-grid-container").attr("data-grid-name"),o=$("ul.item-navigation li.public-widgets").hasClass("active"),r=$("ul.item-navigation li.public-items").hasClass("active"),n=$("#isMarkItemspublic").val();if("dashboards"==i.toLowerCase()||"widgets"==i.toLowerCase()){navigator.userAgent.match(/Windows Phone/i)||$("[ data-bs-toggle='tooltip']").tooltip(),$(".e-content").height()!=$(".e-scrollbar").height()&&$(".e-scrollbar .e-vscroll").css("height",$(".e-content").height()),$("#items .e-gridcontent").data("ejScroller")&&$("#items .e-gridcontent").ejScroller("refresh"),$("ul.item-navigation li.active").length>0&&"draft dashboards"==$("ul.item-navigation li.active").attr("data-section").toLowerCase()?$(".item-link").each(function(){$(this).attr("href",rootUrlAction+"/dashboard-designer/"+$(this).attr("data-itemid")+"/draft/"+$(this).attr("data-name"))}):"dashboards"==i.toLowerCase()&&window.innerWidth>=1041&&$(".item-link").each(function(){$(this).attr("href",rootUrlAction+"/dashboards/"+$(this).attr("data-itemid")+"/"+$(this).attr("data-category-name")+"/"+$(this).attr("data-name"))});var s=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight());t.option({scrollSettings:{height:s}}),1==o&&t._gridRecordsCount>0&&"False"==n||1==r&&t._gridRecordsCount>0&&"False"==n?$(".tool-tip").show():$(".tool-tip").hide(),setTimeout(function(){$("#item-grid-container").ejWaitingPopup("hide")},500),$(".tooltip").hide()}"refresh"!=e.requestType||this.initialRender||$("#items").find(".e-gridcontent").css("visibility","visible"),showOrHideGridPager("#items")}function rowBound(){isFirstRequest&&(isFirstRequest=!1,"/"!==location.pathname.toLowerCase()&&"dashboards"!=location.pathname.split("/")[location.pathname.split("/").length-1].toLowerCase()||refreshScroller())}function ResetGrid(){var e=$("#items").data("ejGrid");e.model.sortSettings.sortedColumns=[],e.model.filterSettings.filteredColumns=[],$("#search-items").find("input[type=text]").val(""),e.refreshContent(),$(".e-filtericon").removeClass("e-filteredicon e-filternone")}function onMakePublicDialogClose(){$("#make_item_public").ejDialog("close")}function onMakePublicDialogOpen(){load(),$("#make_item_public").ejDialog("open"),$("#make_item_public").focus()}function onRemovePublicDialogClose(){$("#remove_item_public").ejDialog("close")}function onRemovePublicDialogOpen(){load(),$("#remove_item_public").ejDialog("open"),$("#remove_item_public").focus()}function onGetLinkDialogClose(){$("#get_item_link").ejDialog("close")}function onGetLinkDialogOpen(){$("#get_item_link").ejDialog("open"),$("#get_item_link").show(),$("#get_item_link").focus(),$("#item-link").select(),$(".get_link").show(),"msie"==browser.name.toLowerCase()?$("#item-link").val(window.location.href.replace(window.location.pathname+window.location.search,"")+itemUrl.trim()):$("#item-link").val(window.location.origin+itemUrl.trim()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link-copy").attr("data-bs-original-title",""))}function fnAdjustRowHeight(e){"dashboards"==$("#item-grid-container").attr("data-grid-name")&&0==e.model.currentViewData.length&&rowBound()}function DashboardRender(e,t,a,i,o,r){e=decodeURI(e),a=decodeURI(a),i=decodeURI(i),r=decodeURI(r);for(var n=window.location.search.substring(1).split("&"),s="?",d=0;d<n.length;d++){var l=n[d].split("=");"category"!==l[0]&&"dashboard"!==l[0]&&"view"!==l[0]&&(d!==n.length-1?s+=l[0]+"="+l[1]+"&":s+=l[0]+"="+l[1])}var c=document.getElementById("dashboard_render_iframe");(r=""!=r&&null!=r&&"null"!=r?"?tab="+r:"",$("#current-url").attr("data-url",e+"/"+t+"/"+a+"/"+i+"?view="+o),0==$(".item-navigation li[data-value='"+o+"']").hasClass("active"))&&($(".item-navigation li").removeClass("active"),$(".item-navigation li[data-value='"+o+"']").addClass("active"),parent.angular.element(parent.document.getElementById("server-items-container")).scope().onClickDisplayCategory("",o));($(".item-navigation li[data-value='"+o+"']").hasClass("all-items")?$("#category-listing").addClass("category-section"):$("#category-listing").removeClass("category-section"),"categories"==o)?(parent.angular.element(parent.document.getElementById("server-items-container")).scope().getItemsInCategory("",a),$("#search-home-page").focus(),setTimeout(function(){$(".search-home-section:visible").addClass("show")},300),c.contentWindow.location.replace(e+"/"+t+"/"+a+"/"+i+s),$("#item-viewer").ejWaitingPopup("show"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#initial-item-message").css("display","none"),$("#dashboard_render_iframe").css("display","block")):""!=i&&($("#search-home-page").focus(),setTimeout(function(){$(".search-home-section:visible").addClass("show")},300),c.contentWindow.location.replace(e+"/"+t+"/"+a+"/"+i+s),$("#item-viewer").ejWaitingPopup("show"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#initial-item-message").css("display","none"),$("#dashboard_render_iframe").css("display","block"));$(".item-navigation li").hasClass("all-items")?$("#category-listing").addClass("category-section"):$("#category-listing").removeClass("category-section");var p=$(".item-link[data-name='"+i+"']");if(0==p.parents("td").hasClass("active")?($(".item-link").parents("td").removeClass("active"),p.parents("td").addClass("active")):window.innerWidth<1041&&($(".item-link").parents("td").removeClass("active"),$(".tooltip").hide()),"block"==$("#server-items-container .category-collapse").css("display")){$("#item-viewer").css("width","100%"),$("#item-viewer").addClass("expanded"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".su-sidebar-expand.category-collapse").width(),top:$("#header-area").height()});var m=$("#dashboard_render_iframe").width();$("#dashboard_render_iframe").contents().find("#dashboard").css("width",m-30)}return!1}function openNewCategoryPopup(){$("#AddCategoryPopup").ejDialog("open")}function openNewDashboardPopup(){$("#report_popup").ejDialog("open"),$("#report_popup_wrapper").ejWaitingPopup("show")}function onDashboardDialogOpen(){$("#report_iframe").attr("src",addDashboardIframeUrl)}function onDashboardDialogClose(){$("#report_popup").find("iframe").contents().find("html").html(""),window.IsAddDashboard=!1,window.CategoryName=""}function getSubCategoryInfo(e){var t=$("#create-subcategory-section");$.ajax({type:"POST",url:getCategories,data:"",success:function(a){if(a.length<1?$('.select-create-type input[name=categoryType][value="1"]').prop("disabled",!0):$('.select-create-type input[name=categoryType][value="1"]').prop("disabled",!1),null!=e){var i=document.querySelector("#SubCategoryList");i?.ej2_instances&&i.ej2_instances[0].destroy(),new ejs.dropdowns.DropDownTree({fields:{dataSource:e,value:"Id",text:"Name",child:"SubCategory"},value:[e[0].Id.toString()],destroyPopupOnHide:!1,placeholder:"Select category",allowFiltering:!0,showClearButton:!1}).appendTo("#SubCategoryList")}else{null!=(i=document.querySelector("#SubCategoryList"))&&null!=i&&null!=i.ej2_instances&&i.ej2_instances[0].destroy(),new ejs.dropdowns.DropDownTree({fields:{dataSource:a,value:"Id",text:"Name",child:"SubCategory"},change:function(){categoryValueChange(t)},value:[a[0].Id.toString()],destroyPopupOnHide:!1,allowFiltering:!0,showClearButton:!1}).appendTo("#SubCategoryList")}}})}$(function(){addPlacehoder("#input-div"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#item-viewer #initial-item-message").css("display","block"),$("#dashboard_render_iframe").css("display","none"),$("#create-new-category").css("width",$(".item-list-panel").outerWidth()),$("#input-div").find(".placeholder").hide();var e=createLoader("item-grid-container");$("#item-grid-container").ejWaitingPopup({template:$("#"+e)});var t=createLoader("item-list-panel");$("#item-list-panel").ejWaitingPopup({template:$("#"+t)});var a=createLoader("item-viewer");$("#item-viewer").ejWaitingPopup({template:$("#"+a)}),$(".search-area").removeClass("focusdiv"),$(".item-list-panel").css("height",window.innerHeight-$("#header-area").outerHeight()),$("#datasource-popup").ejDialog({width:"650px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,close:"onDataSourceDialogClose",open:"onDataSourceDialogOpen"}),$("#widget_popup").ejDialog({width:"651px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,close:"onWidgetDialogClose",open:"onWidgetDialogOpen"}),$("#popup-container").ejDialog({allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,showOnInit:!1,close:"onSchedulerDialogClose",open:"onSchedulerDialogOpen",width:"1000px"});var i=createLoader("popup-container_wrapper");$("#popup-container_wrapper").ejWaitingPopup({template:$("#"+i)}),$("#select_datasource_popup").ejDialog({width:"800px",showOnInit:!1,allowDraggable:!0,enableResize:!1,height:"530px",showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"closeNewDataSourcePopup"}),$("#file-popup").ejDialog({width:"650px",showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"382px",title:window.Server.App.LocalizationContent.AddFile,enableModal:!0,showHeader:!1,open:"onNewFileDialogOpen",close:"onNewFileDialogClose"}),$("#item-delete-confirmation").ejDialog({width:"450px",showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:window.Server.App.LocalizationContent.DeleteItem,showHeader:!1,enableModal:!0,close:"onDeleteItemDialogClose",open:"onDeleteItemDialogOpen"}),$("#ItemAction").ejDialog({showOnInit:!1,allowDraggable:!0,enableResize:!1,width:"525px",title:"",showHeader:!1,enableModal:!0,close:"itemActionEmpty",closeOnEscape:!0}),$("#permission-popup").ejDialog({showOnInit:!1,allowDraggable:!0,enableResize:!1,width:"900px",title:"",showHeader:!1,enableModal:!0,close:"DialogBoxClose",closeOnEscape:!0}),$("#make_item_public").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:window.Server.App.LocalizationContent.MakePublic,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onMakePublicDialogClose",open:"onMakePublicDialogOpen"}),$("#remove_item_public").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:window.Server.App.LocalizationContent.RemovePublic,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onRemovePublicDialogClose",open:"onRemovePublicDialogOpen"}),$("#create-datasource-popup").ejDialog({width:"650px",height:"auto",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,close:"onCreateDataSourceDialogClose",open:"onCreateDataSourceDialogOpen"});var o=createLoader("create-datasource-popup_wrapper");$("#create-datasource-popup_wrapper").ejWaitingPopup({template:$("#"+o)});var r=createLoader("widget_popup_wrapper");$("#widget_popup_wrapper").ejWaitingPopup({template:$("#"+r)});var n=createLoader("select_datasource_popup_wrapper");$("#select_datasource_popup_wrapper").ejWaitingPopup({template:$("#"+n)});var s=createLoader("file-popup_wrapper");$("#file-popup_wrapper").ejWaitingPopup({template:$("#"+s)});var d=createLoader("item-delete-confirmation_wrapper");$("#item-delete-confirmation_wrapper").ejWaitingPopup({template:$("#"+d)});var l=createLoader("datasource-popup_wrapper");$("#datasource-popup_wrapper").ejWaitingPopup({template:$("#"+l)});var c=createLoader("ItemAction_wrapper");$("#ItemAction_wrapper").ejWaitingPopup({template:$("#"+c)});var p=createLoader("permission-popup_wrapper");$("#permission-popup_wrapper").ejWaitingPopup({template:$("#"+p)});var m=createLoader("make_item_public_wrapper");$("#make_item_public_wrapper").ejWaitingPopup({template:$("#"+m)});var u=createLoader("remove_item_public_wrapper");$("#remove_item_public_wrapper").ejWaitingPopup({template:$("#"+u)}),$(document).on("click","#context-menu",function(e){refreshScrollerForCategory()}),$(document).on("click",".options-area",function(e){setTimeout(function(){$(".tooltip").hide()},50)}),$("#search-home-page").on("focusin",function(){$(".search-area").addClass("focusdiv")}),$("#search-home-page").on("focusout",function(){$(".search-area").removeClass("focusdiv")}),$(document).on("click",".item-delete",function(e){$("#delete-item-name").html($(this).attr("data-name")),$("#delete-item").attr("data-item-id",$(this).attr("data-item-id"));var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype"),o="";"4"==i&&(o=$(this).attr("data-datasource-type")),$("#item-delete-confirmation").ejDialog("open"),$("#item-delete-confirmation_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:deleteConfirmationUrl,data:{itemId:t,itemTypeId:i,itemName:a,datasourceType:o},success:function(e){$("#item-delete-confirmation").html(e),$("#item-delete-confirmation_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click","#delete-item",function(e){$("#item-delete-confirmation_wrapper").ejWaitingPopup("show");var t=$(this).attr("data-item-id"),a=$(this).attr("data-itemtype"),i="";"Datasource"==a&&(i=$(this).attr("data-datasource-type"));var o="Category"==a?window.Server.App.LocalizationContent.Categoy:"Dashboard"==a?window.Server.App.LocalizationContent.Dashboard:a;$.ajax({type:"POST",url:deleteItemUrl,data:{itemId:t,datasourceType:i},success:function(e){e.Success?($("#item-delete-confirmation_wrapper").ejWaitingPopup("hide"),SuccessAlert(o+window.Server.App.LocalizationContent.Deleted,$("#delete-item-name").html()+window.Server.App.LocalizationContent.DeleteSuccess,7e3),"Category"==a||$(".all-items").hasClass("active")?$(".all-items").hasClass("active")?$(".all-items").trigger("click"):parent.angular.element(parent.document.getElementById("server-items-container")).scope().refreshCategorySection():"Dashboard"==a?(onSuccessDeleteItem(),$("#favoriteitemCount").text(e.Value)):"Datasource"==a?e.DatasourceCount>0&&null!=e.DatasourceCount?onSuccessDeleteItem():(parent.$("#body").ejWaitingPopup("show"),location.reload()):null!=a&&"dataset"==a.toLowerCase()?null!=e.DatasetCount&&e.DatasetCount>0?onSuccessDeleteItem():(parent.$("#body").ejWaitingPopup("show"),location.reload()):onSuccessDeleteItem()):0==e.Permission?($("#item-delete-confirmation_wrapper").ejWaitingPopup("hide"),WarningAlert(window.Server.App.LocalizationContent.DeleteFail,window.Server.App.LocalizationContent.DeletePermissionMessage+$("#delete-item-name").html(),7e3)):($("#item-delete-confirmation_wrapper").ejWaitingPopup("hide"),WarningAlert(window.Server.App.LocalizationContent.DeleteFail,$("#delete-item-name").html()+window.Server.App.LocalizationContent.DeleteFailMessage,7e3));$("#item-delete-confirmation").ejDialog("close")}})}),addPlacehoder("#search-area"),$(document).on("click",".version-button",function(){var e=$(this).attr("data-item-id"),t=$(this).attr("data-itemname"),a=$("#grid").data("ejGrid"),i=$("#loggrid").data("ejGrid");null!=$("#version-window-container").data("ejDialog")?$("#version-window-container").ejDialog("open"):$("#version-window-container").ejDialog({showOnInit:!0,allowDraggable:!0,enableResize:!1,width:"900px",title:"",showHeader:!1,enableModal:!0,close:"DialogBoxClose",closeOnEscape:!0}),$(".modal-header .modal-title").html(t),$("#version-tab").parent("li").addClass("active"),$("#item-log-tab").parent("li").removeClass("active"),$("#item-version-container").removeClass("d-none").addClass("d-block"),$("#item-log-container").removeClass("d-block").addClass("d-none");var o=ej.DataManager({url:itemVersionUrl+"?ItemId="+e,adaptor:new ej.UrlAdaptor});a.dataSource(o);var r=ej.DataManager({url:itemLogsUrl+"?ItemId="+e,adaptor:new ej.UrlAdaptor});i.dataSource(r)}),$(document).on("click",".layout",function(){$("#container iframe").attr("src",window.location.href+"?itemId="+$(this).attr("data-item-id")+"&itemAction="+$(this).attr("data-action"))}),$(document).on("click",".moveItem",function(){var e=$(this).attr("data-itemId"),t=$(this).attr("data-action");$("#ItemAction").ejDialog("open"),$("#ItemAction_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:moveIframeUrl,data:{itemId:e,itemAction:t},success:function(e){$("#ItemAction").html(e),$("#ItemAction_wrapper .e-dialog-scroller").attr("style","overflow:inherit; border:none"),$("#ItemAction_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".change-datasource",function(){var e=$(this).attr("data-item-id"),t=$(this).attr("data-action");$("#ItemAction").ejDialog("open"),$("#ItemAction_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:changeDataSourceUrl,data:{itemId:e,itemAction:t,nonce:itemGridPageNonce},success:function(e){$("#ItemAction").html(e),$("#ItemAction_wrapper .e-dialog-scroller").attr("style","overflow:inherit;border:none"),$("#ItemAction_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".copyItem",function(){var e=$(this).attr("data-itemId"),t=$(this).attr("data-action");$("#ItemAction").ejDialog("open"),$("#ItemAction_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:copyIframeUrl,data:{itemId:e,itemAction:t},success:function(e){$("#ItemAction").html(e),$("#ItemAction_wrapper .e-dialog-scroller").attr("style","overflow:inherit;border:none"),$("#ItemAction_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".favorite-item",function(e){$("#items").ejWaitingPopup("show");var t=$("#items").data("ejGrid"),a=$(this).attr("data-itemid"),i=$(this).attr("data-value");$.ajax({type:"POST",url:favoriteItemUrl,data:{itemId:a,favoriteValue:i},success:function(e){if(e.Success){var o=$(".favorite-item").filter("[data-itemid='"+a+"']");if("True"==i?($(o[0]).addClass("favorite"),$(o[0]).attr("data-value","False"),$(o[0]).attr("data-bs-original-title",window.Server.App.LocalizationContent.RemoveFavorite)):($(o[0]).removeClass("favorite"),$(o[0]).attr("data-value","True"),$(o[0]).attr("data-bs-original-title",window.Server.App.LocalizationContent.MarkFavorite)),"dashboards"===$("#item-grid-container").data("gridName")){var r=angular.element(document.getElementById("server-items-container")).scope();t.model.query._params.push({key:"displayCategory",value:r.itemRequestType})}"100"==r.itemRequestType&&(t.model.filterSettings.filteredColumns=[{field:"CategoryName",operator:"equal",value:r.category}]),t.refreshContent()}else messageBox("",window.Server.App.LocalizationContent.MarkFavoriteError,window.Server.App.LocalizationContent.InternalServerError,"success",function(){onCloseMessageBox()})}})}),$(window).resize(function(){var e=$("#version-window-container").data("ejDialog");null!=e&&e.isOpened()&&e._dialogPosition();var t=$("#items").data("ejGrid");if(null!=t){window.innerWidth<1041?(t.hideColumns("Description"),t.hideColumns("Last Modified")):(t.showColumns("Description"),t.showColumns("Last Modified")),"block"!=$("#clear-search").css("display")&&"inline-block"!=$("#clear-search").css("display")||$("#search-items").css("display","block"),$(".item-list-panel").css("height",window.innerHeight-$("#header-area").outerHeight()),$("#create-new-category").css("width",$(".item-list-panel").outerWidth());var a=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight());return t.option({scrollSettings:{height:a}}),$(".su-sidebar-collapse").is(":visible")?($("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),!1):($("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".su-sidebar-expand.category-collapse").width(),top:$("#header-area").height()}),!1)}}),$(window).on("load",function(){refreshScrollerForCategory()}),$(document).on("click",".make-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype");load(),$("#make_item_public").ejDialog("open"),$("#make_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:makePublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){$("#make_item_public").html(e),$("#make_item_public_wrapper").ejWaitingPopup("hide"),$("#make-public").attr("data-itemtype",i),$("#make-public").attr("data-url",itemUrl)}})}),$(document).on("click","#make-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype"),o=$(this).attr("data-item-type").trim();$("#make_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:makeItemPublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){e.validation&&e.result?(onMakePublicDialogClose(),onGetLinkDialogOpen(),$(".report-name").html(a),$(".report-name").attr("title",a),$("."+o.toLowerCase()+"-link").show(),$(".private-note").hide(),$(".public-note").show(),ResetGrid()):($("#makepublicitem").hide(),$("#select-area").hide(),$("#close").show(),$(".error-msg").show(),ResetGrid()),$("#make_item_public_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".remove-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype");load(),$("#remove_item_public").ejDialog("open"),$("#remove_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:removePublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){$("#remove_item_public").html(e),$("#remove_item_public_wrapper").ejWaitingPopup("hide"),$("#remove-public").attr("data-itemtype",i),$("#remove-public").attr("data-url",itemUrl)}})}),$(document).on("click","#remove-public",function(e){$("#item_name").html($(this).attr("data-name")),itemUrl=$(this).attr("data-url");var t=$(this).attr("data-item-id"),a=$(this).attr("data-name"),i=$(this).attr("data-itemtype");$("#remove_item_public_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:removeItemPublicUrl,data:{itemId:t,itemTypeId:i,itemName:a},success:function(e){e.validation&&e.result?($("#removepublicitem").hide(),$("#remove-select-area").hide(),$("#remove-close").show(),$("#success-msg").show(),ResetGrid()):($("#removepublicitem").hide(),$("#remove-select-area").hide(),$("#success-msg").hide(),$("#remove-close").show(),$("#error-msg").show(),ResetGrid()),$("#remove_item_public_wrapper").ejWaitingPopup("hide")}})}),$(document).on("click",".get-link",function(e){itemUrl=$(this).attr("data-url").trim();var t=$(this).attr("data-itemtype").trim();"2"==t.toLowerCase()?$(".dashboard-link").show():"6"==t.toLowerCase()?($(".file-link").show(),$("#compressed-link").prop("checked",!0)):"8"==t.toLowerCase()?$(".widget-link").show():$(".link").show();var a="",i=$(this).attr("data-name"),o=$(this).attr("ispublic"),r=$(this).attr("data-item-id"),n=document.getElementById("dashboard_render_iframe");if(null!=n){var s=n.contentDocument||n.contentWindow.document,d=$(s).find("#favorite_Item").attr("data-item-id"),l=$(s).find("#favorite_Item").attr("data-parent-id"),c="";""!==l&&void 0!==l&&(c="tab="+document.getElementById("dashboard_render_iframe").contentWindow.$("#dashboard").data("ejDashboardViewer").getCurrentTab().tabName.trim()),$(s).find("#favorite_Item").length>0&&null!==document.getElementById("dashboard_render_iframe").contentWindow.getcurrentfilters()&&(c+=(""===c?"":"&")+document.getElementById("dashboard_render_iframe").contentWindow.getcurrentfilters().encryptedData),a=d!==r&&l!==r||""===c?"msie"===browser.name.toLowerCase()?window.location.href.replace(window.location.pathname+window.location.search,"")+itemUrl.trim():window.location.origin+itemUrl:"msie"===browser.name.toLowerCase()?window.location.href.replace(window.location.pathname+window.location.search,"")+itemUrl.trim()+"?"+c:window.location.origin+itemUrl+"?"+c}else a="msie"===browser.name.toLowerCase()?window.location.href.replace(window.location.pathname+window.location.search,"")+itemUrl.trim():window.location.origin+itemUrl;$("#get_item_link").ejDialog("open"),$("#get_item_link").show(),$("#get_item_link_wrapper").ejWaitingPopup("show"),$(".get_link").show(),"true"==o?($(".private-note").hide(),$(".public-note").show()):($(".private-note").show(),$(".public-note").hide()),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-bs-original-title","")):$("#item-link-copy").tooltip({animation:!1}),$(".report-name").html(i),$(".report-name").attr("title",i),$("#item-link").val(a),$("#item-link").select(),$(".modal-footer .validation-area").css("display","block"),$("#get_item_link_wrapper").ejWaitingPopup("hide")}),$(document).on("click","#compressed-link",function(){var e=$("#item-link").val().split("?")[0];1==$(this).prop("checked")&&(e+="?compress=true"),$("#item-link").val(e),$(".update-link").css("visibility","visible"),0!=timer&&clearTimeout(timer),timer=setTimeout(function(){$(".update-link").css("visibility","hidden"),timer=0},7e3)})}),$(document).ready(function(){var e=createLoader("item-info-popup");$("#item-info-popup").ejWaitingPopup({template:$("#"+e)})}),$(document).on("click",".category-link",function(e){$(".e-filtericon").removeClass("e-filteredicon e-filternone"),e.preventDefault()}),$(document).on("click",".item-navigation li:not(:last)",function(e){e.preventDefault();$("#items").data("ejGrid");0==$(this).hasClass("active")&&($(".item-navigation li").removeClass("active"),$(this).addClass("active")),$(this).hasClass("all-items")?$("#category-listing").addClass("category-section"):$("#category-listing").removeClass("category-section");var t=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight());$("#items").data("ejGrid").option({scrollSettings:{height:t}});var a=$(this).attr("href");window.location.pathname+window.location.search!=a&&window.innerWidth>=1041&&null!=history.pushState&&"dashboards"===$("#item-grid-container").data("gridName")&&history.pushState({},"",a)}),$(document).on("click",".popup-close",function(){window.parent.$("#item-delete-confirmation").ejDialog("close")}),$(document).on("click","#open-dashboard, #open-widget",function(e){"open-dashboard"==$(this).attr("id")?-1==$(this).attr("data-href").indexOf("?")?ReportRenderingTargetType($(this).attr("data-href")+"?showmyreports=1"):ReportRenderingTargetType($(this).attr("data-href")+"&showmyreports=1"):ReportRenderingTargetType($(this).attr("data-href"))}),$(document).on("click",".search-item",function(e){if(e.stopPropagation(),$(".search-area").hasClass("add-background"))""!==$(".search-home-section").val()&&($(".search-home-section").val(""),!$("#category-list").is(":visible")||$("#category-list").length<=0?(gridObj=$("#items").data("ejGrid"),gridObj.model.pageSettings.currentPage=1,gridObj.refreshContent()):$(".category").trigger("click")),$(".search-area").removeClass("add-background"),$(".placeholder, .close-icon").hide(),$(".all-items").hasClass("active")&&!$("#category-list").is(":visible")?setTimeout(function(){$(".search-area").prevAll().show().parent().removeClass("float-end"),$("#category-section-name").show();var e=$("#isMarkItemspublic").val();($("ul.item-navigation li.public-items").hasClass("active")||$("ul.item-navigation li.public-widgets").hasClass("active"))&&$("#items").data("ejGrid")._gridRecordsCount>0&&"False"==e?$(".tool-tip").show():$(".tool-tip").hide()},300):setTimeout(function(){$(".search-area").prevAll(":not(#back-icon)").show().parent().removeClass("float-end"),$("#category-section-name").show();var e=$("#isMarkItemspublic").val();($("ul.item-navigation li.public-items").hasClass("active")||$("ul.item-navigation li.public-widgets").hasClass("active"))&&$("#items").data("ejGrid")._gridRecordsCount>0&&"False"==e?$(".tool-tip").show():$(".tool-tip").hide()},300),setTimeout(function(){$(".search-home-section:visible").removeClass("show")},300);else{if($(".search-area").addClass("add-background"),$(".placeholder").show(),setTimeout(function(){$(".close-icon").show()},300),$(".all-items").hasClass("active")&&!$("#category-list").is(":visible")){$(".search-area").prevAll().hide().parent().addClass("float-end"),$("#category-section-name").hide();var t=$("#isMarkItemspublic").val();($("ul.item-navigation li.public-items").hasClass("active")||$("ul.item-navigation li.public-widgets").hasClass("active"))&&$("#items").data("ejGrid")._gridRecordsCount>0&&"False"==t?$(".tool-tip").show():$(".tool-tip").hide()}else{$(".search-area").prevAll(":not(#back-icon)").hide().parent().addClass("float-end"),$("#category-section-name").hide();t=$("#isMarkItemspublic").val();($("ul.item-navigation li.public-items").hasClass("active")||$("ul.item-navigation li.public-widgets").hasClass("active"))&&$("#items").data("ejGrid")._gridRecordsCount>0&&"False"==t?$(".tool-tip").show():$(".tool-tip").hide()}$("#search-home-page").focus(),setTimeout(function(){$(".search-home-section:visible").addClass("show")},300)}return setTimeout(function(){$(".clear-search").hide()},300),!1}),$(document).on("click",".schedule-dashboards",function(){isSandbox?$.ajax({type:"POST",url:resourceCreateLimitUrl,data:{itemType:ItemType.Schedule},success:function(e){e?WarningAlert("",window.Server.App.LocalizationContent.ScheduleLimitExceeded,7e3):(ItemId=$(this).attr("data-item-id"),ItemName=$(this).attr("data-itemname"),CategoryName=$(this).attr("data-category-name"),CategoryId=$(this).attr("data-category-id"),ScheduleId="",MultiDashboardName=$(this).attr("data-multidashboard-name"),$("#popup-container").ejDialog("open"))}}):(ItemId=$(this).attr("data-item-id"),ItemName=$(this).attr("data-itemname"),CategoryName=$(this).attr("data-category-name"),CategoryId=$(this).attr("data-category-id"),ScheduleId="",MultiDashboardName=$(this).attr("data-multidashboard-name"),$("#popup-container").ejDialog("open"))}),$(document).on("click","#create_schedule, .create-schedule",function(){isSandbox?$.ajax({type:"POST",url:resourceCreateLimitUrl,data:{itemType:ItemType.Schedule},success:function(e){e?WarningAlert("",window.Server.App.LocalizationContent.ScheduleLimitExceeded,7e3):(ItemId="",ItemName="",CategoryName="",ScheduleId="",CategoryId="",MultiDashboardName=$(this).attr("data-multidashboard-name"),$("#popup-container").ejDialog("open"))}}):(ItemId="",ItemName="",CategoryName="",ScheduleId="",CategoryId="",MultiDashboardName=$(this).attr("data-multidashboard-name"),$("#popup-container").ejDialog("open"))}),$(document).on("click","#item-link-copy",function(e){if($("#item-link").select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor))$("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-bs-original-title","");else{document.execCommand("copy");var t=document.querySelector("#item-link-copy"),a=bootstrap.Tooltip.getInstance(t);a&&a.dispose(),(a=new bootstrap.Tooltip(t,{title:window.Server.App.LocalizationContent.Copysuccess,trigger:"hover",placement:"top"})).show(),setTimeout(()=>{a.dispose(),a=new bootstrap.Tooltip(t,{title:window.Server.App.LocalizationContent.LinkCopy,trigger:"hover",placement:"top"})},3e3)}}),$(document).on("click",".item-link",function(e){if(e.preventDefault(),"true"==$(this).attr("data-isdraft").toLowerCase())window.open($(this).attr("href"),"_self");else{var t=document.getElementById("dashboard_render_iframe");if(window.innerWidth<1041||"open-dashboard"==e.target.id||"open-widget"==e.target.id||"context-menu"==e.target.id||$(e.target).hasClass("favorite-item"))e.stopPropagation();else{t.contentWindow.location.replace(decodeURI($(this).find("span").attr("data-href"))),$("#item-viewer").ejWaitingPopup("show"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()}),$("#initial-item-message").css("display","none"),$("#dashboard_render_iframe").css("display","block");var a=$(this).attr("href");if(window.location.pathname+window.location.search!=a){var i=window.location.search.indexOf("?category=")>-1?"?view=categories":"?view="+$(".item-navigation li.active").attr("data-value"),o=a+(a.indexOf("?")>-1?i.replace("?","&"):i);$("#current-url").attr("data-url",o),null!=history.pushState&&"dashboards"===$("#item-grid-container").data("gridName")&&history.pushState({},"",o)}}0==$(this).parents("td").hasClass("active")?($(".item-link").parents("td").removeClass("active"),$(this).parents("td").addClass("active")):window.innerWidth<1041&&$(".item-link").parents("td").removeClass("active")}}),$(document).on("click",".category-collapse",function(e){if($(".su-sidebar-collapse").is(":visible")){$("#item-viewer").css("width","100%"),$(".item-list-panel, .su-sidebar-collapse").css({display:"none"}),$(".su-sidebar-expand").css({display:"block"}),$("#item-viewer").addClass("expanded"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".su-sidebar-expand.category-collapse").width(),top:$("#header-area").height()});var t=$("#dashboard_render_iframe").width();return $("#dashboard_render_iframe").contents().find("#dashboard").css("width",t-30),$("#item-viewer").ejWaitingPopup("refresh").css("width",t),!1}$("#dashboard_render_iframe").contents().find("#dashboard-view-toogle").hasClass("dashboard-view-toogle")&&CloseDashboardView(),$("#dashboard_render_iframe").contents().find("#filter-view").hide(),$("#dashboard_render_iframe").contents().find("#commentModuleContainer").addClass("displayNone"),$("#dashboard_render_iframe").contents().find("ul.options").css("right","0px"),$("#item-viewer").css({left:"initial"}),$("#dashboard_render_iframe").contents().find("ul.options li").removeClass("active"),$("#item-viewer").css({width:"70%"}),$(".item-list-panel, .su-sidebar-collapse").css({display:"block"}),$(".su-sidebar-expand").css({display:"none"}),$("#item-viewer").removeClass("expanded"),$("#item-viewer").css({height:$(window).height()-$("#header-area").outerHeight()-$("#base-footer-div").outerHeight(),width:$(window).width()-$("#main-nav").width()-$(".item-list-panel").width()});t=$("#dashboard_render_iframe").width();return $("#dashboard_render_iframe").contents().find("#dashboard").css("width",t-30),$("#item-viewer").ejWaitingPopup("refresh").css("width",t),!1}),$(document).on("show.bs.dropdown","#listing, #items .e-row",function(){if($(this).find("#context-menu").length>0){var e=$(this).offset().top+$(this).outerHeight(!0)/2-$("#header-area").outerHeight(!0)-$(".item-navigation").outerHeight(!0)-$("#category-listing").outerHeight(!0),t=$(window).height()-$(this).offset().top-$(this).outerHeight(!0)/2,a=$(this).find(".dashboard-options").outerHeight(!0);t<=a&&e>=a&&$(this).find("#context-menu").removeClass("dropdown").addClass("dropup")}$(this).hasClass("e-row")?$(".item-link").each(function(){$(this).removeClass("active-category-setting"),$(this).find(".open").length>0&&$(this).addClass("active-category-setting")}):$(".category-section").each(function(){$(this).removeClass("active-category-setting"),$(this).find(".open").length>0&&$(this).addClass("active-category-setting")}),refreshScrollerForCategory()}),$(document).on("hide.bs.dropdown","#listing, #items .e-row",function(){$(this).find("#context-menu").length>0&&$(this).find("#context-menu").removeClass("dropup").addClass("dropdown"),$(this).hasClass("e-row")?$(".item-link").removeClass("active-category-setting"):$(".category-section").removeClass("active-category-setting"),refreshScrollerForCategory()}),$(document).on("shown.bs.dropdown","#scroll-content li, #items .e-row",function(){var e=$("#item-grid-container").attr("data-grid-name");if($("#category-list").is(":visible"))return refreshScrollerForCategory(),!1;"dashboards"!=e.toLowerCase()&&"widgets"!=e.toLowerCase()||($(".e-gridcontent").ejScroller(),$(".e-gridcontent").ejScroller("refresh"))}),$(document).on("hidden.bs.dropdown","#scroll-content li, #items .e-row",function(){var e=$("#item-grid-container").attr("data-grid-name");if($("#category-list").is(":visible"))return refreshScrollerForCategory(),!1;"dashboards"!=e.toLowerCase()&&"widgets"!=e.toLowerCase()||($(".e-gridcontent").ejScroller(),$(".e-gridcontent").ejScroller("refresh"))}),$(document).on("mouseenter",".category-section, #items .e-row",function(){$(this).hasClass("e-row")?$(".item-link").each(function(){$(this).removeClass("active-category-setting"),$(this).find(".open").length>0&&$(this).addClass("active-category-setting")}):$(".category-section").each(function(){$(this).removeClass("active-category-setting"),$(this).find(".open").length>0&&$(this).addClass("active-category-setting")})}),$(document).on("mouseleave",".category-section, #items .e-row",function(){$(this).hasClass("e-row")?$(".item-link").each(function(){$(this).removeClass("active-category-setting"),$(this).find(".open").length>0&&$(this).addClass("active-category-setting")}):$(".category-section").each(function(){$(this).removeClass("active-category-setting"),$(this).find(".open").length>0&&$(this).addClass("active-category-setting")})}),$(document).on("mouseenter","#open-dashboard, #open-widget",function(){$(this).parents("a").tooltip("hide")}),$(document).on("mouseleave","#open-dashboard, #open-widget",function(){$(this).parents("a").tooltip("show")}),$(document).on("mouseenter",".dashboard-views",function(e){if("view-name"!=e.target.className){var t=$(this).find(".views").attr("data-item-id"),a=$(this).find("ul"),o="",r=$(this).find(".views").attr("data-is-childdashboard"),n=$(this).find(".views").attr("data-parent-category-name"),s=$(this).find(".views").attr("data-parent-itemname"),d=$(this).find(".views").attr("data-parent-item-id"),l=null!=r&&"true"==r.toLowerCase()?$(this).find(".views").attr("data-child-dashboard-name"):"";1==isAjaxRequested&&($(".dashboard-views").addClass("views-loader"),isAjaxRequested=!1,$.ajax({type:"POST",url:getViewsByItemIdUrl,data:{itemId:t},success:function(e){if(null!=e&&null!=e.result&&e.result.length>0)if(null!=r&&null!=r&&"true"==r.toLowerCase())for(i=0;i<e.result.length;i++)o+="<li><a class='view-name' href='"+dashboards+"/"+d+"/"+n+"/"+s+"?tab="+l+"&viewid="+e.result[i].ViewId+"' target='_blank'  data-bs-toggle='tooltip' data-bs-placement='top' data-bs-original-title='"+e.result[i].ViewName+"' data-itemid='"+e.result[i].ItemId+"'>"+e.result[i].ViewName+"</a></li>";else for(i=0;i<e.result.length;i++)o+="<li><a class='view-name' href='"+dashboards+"/"+t+"/"+e.result[i].CategoryName+"/"+e.result[i].ItemName+"?viewid="+e.result[i].ViewId+"' target='_blank'  data-bs-toggle='tooltip' data-bs-placement='top' data-bs-original-title='"+e.result[i].ViewName+"' data-itemid='"+e.result[i].ItemId+"'>"+e.result[i].ViewName+"</a></li>";else o="<li><span class='view-name' href='javascript:void(0);'><span>"+window.Server.App.LocalizationContent.NoViews+"</span></span></li>";a.html(o),$(".dashboard-views").removeClass("views-loader"),$(".dashboard-views").addClass("no-loader"),$('[data-bs-toggle="tooltip"]').tooltip()}}).always(function(){isAjaxRequested=!0}))}}),$(document).on("click",".dashboard-options li > span",function(e){return e.stopPropagation(),!1}),$(document).on("click",".download-item",function(e){window.location=$(this).attr("href")}),$(document).on("click",".open-item",function(e){var t=$(this).attr("href")+"?showmyreports=1";ReportRenderingTargetType(t)}),$(document).on("click",".option-click",function(){$(this).closest(".dropdown-menu").prev().dropdown("toggle")}),$(document).on("click",".dropdown-backdrop",function(e){return e.stopPropagation(),!1}),$(document).on("show.bs.tooltip",function(){$(".tooltip").not(this).hide()}),$(document).on("click",".web-designer",function(e){window.location.href=$(this).attr("href")}),$(document).on("click",".view-schedule",function(e){var t=$(this).attr("href");ReportRenderingTargetType(t)}),$(document).on("mousedown","#items .e-gridcontent .e-vscrollbar",function(){$("#item-viewer iframe").addClass("pointer-event"),-1!=navigator.userAgent.indexOf("Edge")&&$("#item-viewer iframe").addClass("display")}),$(document).on("mouseup",function(){$("#item-viewer iframe").hasClass("pointer-event")&&($("#item-viewer iframe").removeClass("pointer-event"),-1!=navigator.userAgent.indexOf("Edge")&&$("#item-viewer iframe").removeClass("display"))}),$(document).on("click",".blank-dashboard-link-box, #start-from-templates",function(){$("#CreateDashboard").trigger("click")}),serverApp.controller("itemsCtrl",["$scope","$http","$timeout","$window","ajaxService",function(e,t,a,i,o){itemsGrid=angular.element("[ng-controller=itemsCtrl]").scope(),e.openInfo=function(e){var t,a=angular.element("[ng-controller=ItemInfoCtrl]").scope(),i=e.getAttribute("data-item-name"),o=e.getAttribute("data-description"),r=e.getAttribute("data-item-id"),n=e.getAttribute("data-createdByDisplayName"),s=e.getAttribute("data-createdDate"),d=e.getAttribute("data-modifiedByFullName"),l=e.getAttribute("data-modifiedDate"),c=e.getAttribute("data-categoryName"),p="true"===e.getAttribute("data-isDraft"),m=e.getAttribute("data-itemType");t={Name:i,Description:decodeHtmlAsString(o),Id:r,CreatedByDisplayName:n,CreatedDate:s,ModifiedByFullName:d,ModifiedDate:l,CategoryName:c,IsDraft:p,ItemType:m},a.openInfoDialog(t,!0)}}]),$(document).on("click","#item-info-option",function(e){e.preventDefault(),itemsGrid.openInfo(this)}),$(function(){$("#report_popup").ejDialog({width:"760px",showOnInit:!1,allowDraggable:!1,enableResize:!1,title:window.Server.App.LocalizationContent.AddDashboard,enableModal:!0,showHeader:!1,open:"onDashboardDialogOpen"}),$("#sample-item-popup").ejDialog({showOnInit:!1,allowDraggable:!0,enableResize:!1,width:"900px",title:"",beforeOpen:function(e){$("#sample-item-popup_wrapper").css("z-index","2147483647")},showHeader:!1,enableModal:!0,beforeClose:function(e){$("#itemsstring_ddinput_popup_list_wrapper, #items_acString_suggestion, #items_WaitingPopup, #item-grid-container_WaitingPopup, #sample-item-popup_wrapper, #sample-item-popup_wrapper_WaitingPopup").css("z-index","9999")},close:"DialogBoxClose",closeOnEscape:!0}),$("#sample-report-part-popup").ejDialog({showOnInit:!1,allowDraggable:!0,enableResize:!1,width:"750px",title:"",beforeOpen:function(e){$("#sample-report-part-popup_wrapper").css("z-index","22222222")},showHeader:!1,enableModal:!0,beforeClose:function(e){$("#itemsstring_ddinput_popup_list_wrapper, #items_acString_suggestion, #items_WaitingPopup, #item-grid-container_WaitingPopup, #sample-report-part-popup_wrapper, #sample-report-part-popup_wrapper_WaitingPopup").css("z-index","9999")},close:"DialogBoxClose",closeOnEscape:!0});var e=createLoader("AddCategoryPopup_wrapper");$("#AddCategoryPopup_wrapper").ejWaitingPopup({template:$("#"+e)});var t=createLoader("report_popup_wrapper");$("#report_popup_wrapper").ejWaitingPopup({template:$("#"+t)});var a=createLoader("sample-item-popup_wrapper");$("#sample-item-popup_wrapper").ejWaitingPopup({template:$("#"+a)}),$(document).on("click",".prevent-default-action",function(e){e.preventDefault()})}),$(document).on("click",".add-sample-button",function(){$("#sample-item-popup iframe").attr("src",addSampleItemsUrl),$("#sample-item-popup").ejDialog("open"),ShowWaitingProgress("#sample-item-popup_wrapper","show")}),$(document).on("click",".add-sample-report-part-button",function(){$("#sample-report-part-popup iframe").attr("src",addSampleReportPartsUrl),$("#sample-report-part-popup").ejDialog("open"),ShowWaitingProgress("#sample-report-part-popup_wrapper","show")}),$(document).on("click",".explore",function(){$("#sample-item-popup iframe").attr("src",addSampleItemsUrl),$("#sample-item-popup").ejDialog("open"),ShowWaitingProgress("#sample-item-popup_wrapper","show")}),$(document).on("click",".dashboard-notification .su-close",function(){$(".dashboard-notification").remove()});var isSubCategoryDialogBinded=!1,isSubCategoryAddDialogBinded=!1;function deleteCategory(e){$(this).parents(".dropdown").removeClass("open"),$(this).parents(".dropdown").find(".dropdown-backdrop").remove(),$("#delete-item-name").html(e.Name),$("#delete-item").attr("data-item-id",e.Id),$("#item-delete-confirmation").ejDialog("open"),$("#item-delete-confirmation-wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:deleteConfirmationUrl,data:{itemId:e.Id,itemTypeId:e.ItemType,itemName:e.Name},async:!1,success:function(e){$("#item-delete-confirmation-wrapper").ejWaitingPopup("hide"),$("#item-delete-confirmation").html(e)}})}function EditCategory(e,t,a,i){t=decodeHtmlAsString(t),a=decodeHtmlAsString(a),$("#EditCategoryPopup #category_name").val(t),$("#EditCategoryPopup #category_description").val(a),$("#EditCategoryPopup").ejDialog("open"),window.isEdited=!1,window.editData={ItemId:e,Name:t,Description:a,ParentId:i}}function AddSubCategory(e,t,a){document.getElementById("AddSubCategoryPopup").style.display="block";var i='<span class="dialog-header-with-subtitle"><span class ="dialog-header-title">'+window.Server.App.LocalizationContent.AddSubCategory+'</span><span class="item-name">'+t+"</span></span>";if(isSubCategoryAddDialogBinded){(o=document.getElementById("add-sub-category-dialog").ej2_instances)[0].header=i,o[0].show()}else{var o,r=document.createElement("div");r.setAttribute("id","add-sub-category-dialog"),document.getElementById("dashboard-page-container").appendChild(r),(o=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>460?"430px":window.innerWidth-10,showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,showCloseIcon:!0,content:document.getElementById("AddSubCategoryPopup"),close:function(e){clearSubCategoryValues(e)},buttons:[{click:function(e){addSubCategory()},buttonModel:{isPrimary:!0,cssClass:"app-btn-primary",content:window.Server.App.LocalizationContent.AddButton}},{click:function(){closeaddSubCategoryPopup()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.CancelButton}}]})).appendTo(r),isSubCategoryAddDialogBinded=!0}ejs.popups.createSpinner({target:document.getElementById("add-sub-category-dialog")}),ejs.popups.setSpinner({type:"Material"}),ejs.popups.showSpinner(document.getElementById("add-sub-category-dialog")),window.editData={ItemId:e,Name:t,Description:a},ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog"))}function addSubCategory(){if(!$("#addSubCategoryForm").valid())return!1;document.getElementById("add-sub-category-dialog").ej2_instances;ejs.popups.showSpinner(document.getElementById("add-sub-category-dialog"));var e=$("#add-sub-category-dialog #sub-category_name").val().trim(),t=$("#add-sub-category-dialog #category_description").val().trim();$.ajax({type:"POST",url:addSubCategoryUrl,data:{CategoryName:e,Description:t,ParentId:window.editData.ItemId},async:!1,success:function(t){if(t.IsSuccess){var a=createLoader("item-list-panel");$("#item-list-panel").ejWaitingPopup({template:$("#"+a)}),void 0!==window.IsAddDashboard&&!0===window.IsAddDashboard||void 0!==window.IsCopyOrMoveDashboard&&!0===window.IsCopyOrMoveDashboard?(window.IsCategoryAdded=!0,isMultiTab?updateMultiTabCategory(window.CategoryName,t.ItemId):updateContents(window.CategoryName,t.ItemId,window.IsCopyOrMoveDashboard)):null!=window.UploadDashboard&&window.UploadDashboard?(ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog")),closeaddSubCategoryPopup(),onUploadDialogOpen()):(SuccessAlert(window.Server.App.LocalizationContent.Categoy,window.Server.App.LocalizationContent.AddSuccessMessage.format(e),7e3),"function"==typeof ResetItemList&&dashboardItemCount>0&&ResetItemList(1),setTimeout(function(){$("li[data-dashboard-id='"+t.ItemId+"']").parents("li.category-list-item").each(function(){$(this).find(".arrow-icon").hasClass("su-angle-right")&&($(this).children(".nested-li").removeClass("show-sub-category"),$(this).find(".arrow-icon").eq(0).removeClass("su-angle-right").addClass("su-vertical-expand"))})},1e3)),closeaddSubCategoryPopup()}else t.IsCategoryExist?($("#AddSubCategoryPopup #validate-name").parent("span").addClass("has-error"),$("#AddSubCategoryPopup #validate-name").html(window.Server.App.LocalizationContent.IsCategoryExist)):t.HasPermission||(ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog")),closeaddSubCategoryPopup(),WarningAlert(window.Server.App.LocalizationContent.Categoy,window.Server.App.LocalizationContent.AddCategoryPermissionWarningAlert,7e3))},complete:function(){ejs.popups.hideSpinner(document.getElementById("add-sub-category-dialog"))}})}function closeaddSubCategoryPopup(){$("#AddSubCategoryPopup #validate-name").parent("span").parent("td").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name").parent("span").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name").text(""),$("#AddSubCategoryPopup #plugin_validation").html(""),document.getElementById("add-sub-category-dialog").ej2_instances[0].hide(),$("#add-sub-category-dialog #sub-category_name").val(""),$("#add-sub-category-dialog #category_description").val("")}function clearSubCategoryValues(e){(e?.event?.target?.closest(".e-dlg-closeicon-btn")||e?.event?.target?.classList?.contains("e-icon-dlg-close"))&&($("#AddSubCategoryPopup #validate-name").parent("span").parent("td").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name").parent("span").removeClass("has-error"),$("#AddSubCategoryPopup #validate-name").text(""),$("#AddSubCategoryPopup #plugin_validation").html(""),$("#add-sub-category-dialog #sub-category_name").val(""),$("#add-sub-category-dialog #category_description").val(""))}function extractXSRFTokenFromCookie(){var e=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}$(function(){var e=null!=$("#sub-category_name").attr("data-maxlength")?$("#sub-category_name").attr("data-maxlength"):255;$.validator.addMethod("isLengthExceeded",function(t,a){return t.length<=e},function(){return window.Server.App.LocalizationContent.CharacterExceedMessage.replace("{0}",e)}),$("#addSubCategoryForm").validate({errorElement:"div",onkeyup:function(e,t){9!=t.keyCode&&$(e).valid(),$("#sub-category_name").next("#validate-name").parent("span").removeClass("has-error"),$("#sub-category_name").next("#validate-name").html("")},onfocusout:function(e){$(e).valid()},rules:{categoryName:{isRequired:!0,isValidName:!0,isLengthExceeded:!0}},messages:{categoryName:{isRequired:window.Server.App.LocalizationContent.Categoryvalidator}},highlight:function(e){$(e).closest("td").addClass("has-error")},unhighlight:function(e){"sub-category_name"==$(e).attr("id")&&($(e).closest("td").removeClass("has-error"),$(e).closest("td").find("div").html(""))},errorPlacement:function(e,t){$(t).closest("td").find("div").html(e.html())}}),$(document).keyup(function(e){27==e.keyCode&&window.parent.$("#createButton").focus()}),$("#sub-category_name").bind("keypress",function(e){if(13==e.keyCode)return e.preventDefault(),addItemValidate(),!1})}),$(function(){$("#EditCategoryPopup").ejDialog({width:"600px",height:"250px",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!0});var e=createLoader("EditCategoryPopup_wrapper");$("#EditCategoryPopup_wrapper").ejWaitingPopup({template:$("#"+e)})}),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
