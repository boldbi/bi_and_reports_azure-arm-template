var sessionData=!1,isSession=!1;function SuccessAlert(e,t,n){window.top.$("#success-alert").css("display","table"),window.top.$("#message-header").html(e),window.top.$("#message-content").html(t),setTimeout(function(){window.top.$("#success-alert").fadeOut()},n)}function WarningAlert(e,t,n){parent.$("#warning-alert").css("display","table"),parent.$("#warning-alert #message-header").html(e),parent.$(" #warning-alert #message-content").html(t),null!=n&&""!=n&&setTimeout(function(){parent.$("#warning-alert").fadeOut()},n),$(document).on("click",".close-div",function(){parent.$("#warning-alert").fadeOut()})}function isUrlHasView(){const e=new URLSearchParams(window.location.search);return!(!e.has("viewname")&&!e.has("viewid"))}function getUrlVars(e){var t={};e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,o){t[n]=o});return t}$(document).ready(function(){if("undefined"==typeof canCheckSession||isPublic||(isSession=Boolean(canCheckSession)),isSession){function e(){$.ajax({type:"GET",url:isSessionActiveUrl,success:function(o){o.isactive?setTimeout(function(){e()},18e4):(function(){if($(".e-btn-icon.e-icon-dlg-close.e-icons").is(":visible")){var e=$(".e-btn-icon.e-icon-dlg-close.e-icons:visible");$.each(e,function(e,t){var n=$(t).parents(".e-dialog").attr("id");null==n&&null==n||document.getElementById(n).ej2_instances[0].hide()})}if($(".popup-close").is(":visible")){var t=$(".popup-close:visible");$.each(t,function(e,t){var n=$(t).parents(".e-dialog").attr("id");null==n&&null==n||(eDialog=$("#"+n).data("ejDialog"),eDialog.close())})}}(),function(){if("undefined"!=typeof isViewerV2Enabled&&!isViewerV2Enabled||"undefined"!=typeof isDesignerV2Enabled&&!isDesignerV2Enabled){var e=$("#messageBox").data("ejDialog");null==e&&($("#messageBox").ejDialog({width:parent.window.innerWidth>460?"450px":parent.window.innerWidth-10,height:"150px",showOnInit:!1,allowDraggable:!0,enableResize:!1,showHeader:!1,enableModal:!0,close:"onMessageDialogClose"}),e=$("#messageBox").data("ejDialog")),messageBox("",window.Server.App.LocalizationContent.SessionHeader,window.Server.App.LocalizationContent.SessionContent,"success",t)}else{var o="",i='<span class ="dialog-header-title">'+window.Server.App.LocalizationContent.SessionHeader+"</span>";if(!sessionData){var a=document.createElement("div");a.setAttribute("id","session-time-dialog");var r=document.getElementById("content-area");if(null==r){var s=document.createElement("div");s.setAttribute("id","content-area"),document.body.appendChild(s),r=document.getElementById("content-area")}o=ejs.popups,r.appendChild(a);var l=window.Server.App.LocalizationContent.SessionContent;new o.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>500?"470px":window.innerWidth-10,height:"auto",showHeader:!1,isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,close:"closeDialog",showCloseIcon:!0,content:l,buttons:[{click:function(e){t()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.OKButton}}],close:n}).appendTo(a),sessionData=!0}}}())}})}setTimeout(function(){e()},18e4)}function t(){location.reload()}function n(){location.reload()}});var initialQueryString="",deletedViewId="";function canOpenComments(){void 0!==getUrlVars(window.location.href.split("#")[0]).comment&&"report"===$("#comment_Type").attr("data-item-type").toLowerCase()&&("true"===$("#is_mobile").val()?window.innerWidth<410&&$("#sync_report_viewer").hide():$("#sync_report_viewer_toolbar_comments").trigger("click"))}function onRenderingAction(e){if((isUserAuthenticatedInCurrentTenant||embedConfig.HasViews&&!reportItemDetail.IsPublic)&&e.parameterBlock&&e.reportParameters&&ej.isNullOrUndefined($("#"+this._id+"_viewReportSaveAs").data("ejButton"))){var t=ej.buildTag("input.e-reportviewer-viewreportbutton e-btn e-rptviewer-viewreport-btn","",{},{type:"button",value:window.Server.App.LocalizationContent.SaveAs,id:this._id+"_viewReportSaveAs","data-role":"none","aria-label":"Save As",title:window.Server.App.LocalizationContent.SaveViewAs}),n=ej.buildTag("input.e-reportviewer-viewreportbutton e-btn e-rptviewer-viewreport-btn","",{},{type:"button",value:window.Server.App.LocalizationContent.SaveButton,id:this._id+"_viewReportSave","data-role":"none","aria-label":"Save"});t.ejButton({click:function(e){var t=$("#sync_report_viewer").data("boldReportViewer"),n=t._getParameterJsonEJ2(t._reportParametersModel,!0);n&&saveView(QueryStringFormation(n,!0),e.target.value)},cssClass:"e-accent",height:32,htmlAttributes:isUrlHasView()?{style:"display : inline-block"}:{style:"display : none"},showRoundedCorner:!0}),n.ejButton({click:function(e){var t=$("#sync_report_viewer").data("boldReportViewer"),n=t._getParameterJsonEJ2(t._reportParametersModel,!0);n&&saveView(QueryStringFormation(n,!0),e.target.value)},cssClass:canHideSaveViewBtn?"e-accent displayNone":"e-accent",enabled:!isUrlHasView(),height:32,htmlAttributes:isUrlHasView()?{style:"color: var(--grey-600) !important",title:window.Server.App.LocalizationContent.UpdateView}:{title:window.Server.App.LocalizationContent.SaveView},showRoundedCorner:!0}),$("#sync_report_viewer_viewReportBlock").append(t).append(n)}}function onParameterValueChange(e){var t=$("#sync_report_viewer").data("boldReportViewer"),n=t._getParameterJsonEJ2(t._reportParametersModel,!1),o=$("#"+this._id+"_viewReportSave"),i=$("#"+this._id+"_viewReportSaveAs"),a=o.data("ejButton");if(n){var r=QueryStringFormation(n,!0)!=initialQueryString;isUrlHasView()?(i.css({display:"inline-block"}),r?(a.enable(),o.attr({style:"color: var(--lighten-blue-grey) !important"})):(a.disable(),o.attr({style:"color: var(--grey-600) !important"}))):(i.css({display:"none"}),o.attr({style:"color: var(--lighten-blue-grey) !important"}))}else o.attr({style:"color: var(--lighten-blue-grey) !important"}),a.enable(),i.css({display:isUrlHasView()?"inline-block":"none"})}function filterViews(e){var t=$("#sync_report_viewer").data("boldReportViewer").getParameters();null!=t[0]&&"undefined"!=t[0].Name?((isUserAuthenticatedInCurrentTenant||embedConfig.HasViews&&!reportItemDetail.IsPublic)&&setTimeout(function(){document.getElementById("viewModuleContainer_iframe").contentWindow.filterView(e)},800),null!=e.reportParameters&&(initialQueryString=QueryStringFormation(e.reportParameters,!1))):$("#sync_report_viewer_toolbar_views_div").hide(),canOpenComments()}function deleteViewResult(e){const t=$(this).attr("viewId");onDeleteItemDialogClose(),(embedConfig.IsEmbedCode?e.Status:e.Result.Status)?(SuccessAlert(window.Server.App.LocalizationContent.DeleteView,window.Server.App.LocalizationContent.ViewDeleteSuccess,7e3),t==deletedViewId?window.location.href=window.location.origin+window.location.pathname:document.getElementById("viewModuleContainer_iframe").contentWindow.GetSavedFilter()):WarningAlert(window.Server.App.LocalizationContent.DeleteView,window.Server.App.LocalizationContent.TryAgain,7e3),$("#delete-div_wrapper").ejWaitingPopup("hide")}function deleteViewErrorResult(){$("#delete-div_wrapper").ejWaitingPopup("hide"),onDeleteItemDialogClose(),WarningAlert(window.Server.App.LocalizationContent.DeleteView,window.Server.App.LocalizationContent.InternalServerError,7e3)}function initializeDeleteDialog(){$("#delete-div").ejDialog({width:window.innerWidth>460?"450":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:"Delete View",showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onDeleteItemDialogClose",open:"onDeleteItemDialogOpen"});var e=createLoader("delete-div_wrapper");$("#delete-div_wrapper").ejWaitingPopup({template:$("#"+e)})}function createViewsIframeForViewerV2(){var e=$("<iframe id='viewModuleContainer_iframe' src='"+viewsPageUrl+"'></iframe>");$("#viewModuleContainer").append(e)}function saveView(e,t){saveQueryString=e;const n=new URLSearchParams(window.location.search);if((n.has("viewname")||n.has("viewid"))&&"Save"===t)updateView(viewId);else{customMessageBox("su su-filter",window.Server.App.LocalizationContent.AddView,"<span>"+window.Server.App.LocalizationContent.ViewName+'</span><input placeholder="'+window.Server.App.LocalizationContent.ViewPlaceHolder+'" id="view-name-filter-pane" class="view-name-filter-pane"><span id="validate-view-name" class="validation-message text"></span>',"error",function(e){var t=$("#view-name-filter-pane").val();""!=t&&(SaveFilterName=t,$("#messageBox_wrapper").ejWaitingPopup("show"),AddView())});var o=createLoader("messageBox_wrapper");$("#messageBox_wrapper").ejWaitingPopup({template:$("#"+o)})}}function AddView(){$("#sync_report_viewer").data("boldReportViewer");var e=""!=saveQueryString?saveQueryString:QueryStringFormation([],!1),t=document.getElementById("messageBox_wrapper");"block"!=t.style.display&&""!=t.style.display||$("#messageBox_wrapper").ejWaitingPopup("show");var n={name:"Datas",ItemViewName:SaveFilterName,QueryString:e,itemId:reportId,UserId:userId,UserName:userName,itemType:reportItemDetail.ItemType};ajaxPostCall("POST",addViewUrl,n,null,saveViewResult,errorSaveView,null)}function saveViewResult(e){var t=""!=saveQueryString?saveQueryString:QueryStringFormation([],!1);if(initialQueryString=t,$("#messageBox_wrapper").ejWaitingPopup("hide"),e.Status){onCloseMessageBox(),SuccessAlert(window.Server.App.LocalizationContent.AddView,window.Server.App.LocalizationContent.AddViewSuccess,7e3);var n=e.ItemsView[0].ViewId;if(viewId=n,updateViewNameInUrl(),updateParameterPanelBtn(),$("#update-view").attr("viewid",n),$("#save-section").hide(),$("#save-lable-section label").html(""),link='<a class="saved-view-link txt-overflow" href="'+pageurl+"?viewname="+SaveFilterName+'" target="_blank" data-bs-toggle="tooltip" data-original-title="'+SaveFilterName+'">'+SaveFilterName+"</a>",$("#save-lable-section label").append(link),$("#save-lable-section").show(),$("#new-save").hide(),$("#saved-filter-update").show(),$("#update-view").addClass("pointer-events"),$("#update-view").css("opacity",.5),$("#saved-filter-Saveas").hide(),canHideSaveViewBtn)$("#sync_report_viewer_viewReportSave").removeClass("displayNone"),$("#sync_report_viewer").data("boldReportViewer")._setParameterPanelHeight(),canHideSaveViewBtn=!1}else $(".app-critical-action-button ").prop("disabled",!0),$("#validate-view-name").html(window.Server.App.LocalizationContent.ViewAlreadyExists),$("#validate-view-name").css("display","block"),$("#view-name-filter-pane").addClass("has-error")}function errorSaveView(){$("#messageBox_wrapper").ejWaitingPopup("hide"),onCloseMessageBox(),WarningAlert(window.Server.App.LocalizationContent.AddView,window.Server.App.LocalizationContent.InternalServerError,7e3)}function updateParameterPanelBtn(){var e=$("#sync_report_viewer_viewReportSave"),t=$("#sync_report_viewer_viewReportSaveAs");isUrlHasView()?(e.attr({style:"color: var(--grey-600) !important",title:"Update View"}),e.data("ejButton").model.enabled=!1,t.css({display:"inline-block"})):(t.css({display:"none"}),e.css({display:"inline-block"}),e.attr({style:"color: var(--lighten-blue-grey) !important",title:"Save View"})),$("#sync_report_viewer").data("boldReportViewer")._setParameterPanelHeight()}function updateView(e){var t=""!=saveQueryString?saveQueryString:QueryStringFormation([],!1),n={itemId:reportId,QueryString:t,itemViewId:e,UserId:userId,UserName:userName,itemType:reportItemDetail.ItemType};ajaxPostCall("POST",updateViewUrl,n,null,saveUpdateView,errorSaveUpdateView,null)}function saveUpdateView(e){var t=""!=saveQueryString?saveQueryString:QueryStringFormation([],!1);onCloseMessageBox(),(embedConfig.IsEmbedCode?e.Status:e.Result.Status)?(initialQueryString=t,$("#update-view").addClass("pointer-events"),$("#update-view").css("opacity",.5),SuccessAlert(window.Server.App.LocalizationContent.UpdateView,window.Server.App.LocalizationContent.UpdateViewSuccess,7e3)):($("#save-section").hide(),WarningAlert(window.Server.App.LocalizationContent.UpdateView,window.Server.App.LocalizationContent.InternalServerError,7e3)),updateParameterPanelBtn()}function errorSaveUpdateView(){onCloseMessageBox(),WarningAlert(window.Server.App.LocalizationContent.UpdateView,window.Server.App.LocalizationContent.InternalServerError,7e3)}function updateViewNameInUrl(){var e=new URLSearchParams(window.location.search);e.set("viewname",SaveFilterName),history.pushState({},"","?"+e.toString())}function QueryStringFormation(e,t){return reportviewerObj=$("#sync_report_viewer").data("boldReportViewer"),parameterArray=[],valueArray=[],jQuery.each(e,function(n,o){if($.isNumeric(n)){if(null==e[n].IsMultiValue)var i=e[n].values;else i=e[n].IsMultiValue?e[n].Values:null!=e[n].Value?e[n].Value:e[n].Values;var a=null==e[n].name?e[n].Name:e[n].name;t&&(parameterArray.push(a),valueArray.push(i))}}),t&&($("#report-filter-query-name").val(JSON.stringify(parameterArray)),$("#report-filter-query-value").val(JSON.stringify(valueArray))),e.map(e=>JSON.stringify(e,(e,t)=>{if("dateTimeInfo"!==e&&"labels"!==e)return t})).join(",")}function customMessageBox(e,t,n,o,i,a,r,s,l,c){var p,d,u;($("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html(""),$("#messageBox").find(".message-header").html("<span class='su "+e+"'></span> <span class='modal-title'  data-bs-toggle='tooltip' data-bs-placement='bottom' data-container='body' title='"+t+"'  >"+t+"</h2>"),$("#messageBox").find(".message-content").html(n),$("#messageBox").find(".message-content").removeClass("text-left"),"error"==o)?(null!=i&&(d=$("<input type='button' class='app-button app-critical-action-button app-btn-primary float-end' value='"+window.Server.App.LocalizationContent.SaveButton+"'></input>")).bind("click",$.proxy(getFnObj(i),window)),null!=a?((p=$("<input type='button' class='app-button app-secondary-button app-btn-secondary float-end' tabindex='-1' value='"+window.Server.App.LocalizationContent.CancelButton+"'></input>")).bind("click",$.proxy(getFnObj(a),window)),(u=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(a),window))):(p=$("<input type='button' class='app-button app-secondary-button app-btn-secondary float-end' tabindex='-1' value='"+window.Server.App.LocalizationContent.CancelButton+"'></input>"),u=$('<span class="su su-close"></span>'),p.click(function(){onCloseMessageBox()}),u.click(function(){onCloseMessageBox()})),$(".message-box-close").html(u),$(".message-box-btn-holder").append(p,d),$("#messageBox").unbind("keydown")):(null!=i?((d=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'></input>")).bind("click",$.proxy(getFnObj(i),window)),(u=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(i),window))):(d=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'></input>"),u=$('<span class="su su-close"></span>'),d.click(function(){onCloseMessageBox()}),u.click(function(){onCloseMessageBox()})),$(".message-box-close").html(u),$(".message-box-btn-holder").append(d),$("#messageBox").on("keydown",function(e){switch(e.keyCode){case 13:case 27:d.click()}}));$("#messageBox").ejDialog("open"),$("#messageBox").focus();var m=$("#messageBox").data("ejDialog");setTimeout(function(){null!=r&&m.option("width",r),window.innerWidth>1040&&null==s&&(s=$("#messageBox").find(".modal-content").height()+135+"px"),m.option("height",s),null!=l&&m.option("maxHeight",l)},50),null!=c&&null!=c&&m.option("cssClass",c)}function getFnObj(e){return"function"==typeof e||"string"==typeof e&&window[e]?e:void 0}function onCloseMessageBox(){$("#messageBox").ejDialog("close")}function onDeleteViewDialogOpen(){$("#delete-div").ejDialog("open"),$("#delete-msg").show(),$("#delete-div").focus()}function onDeleteViewClicked(e,t){$("#delete_item").attr("viewid",e),$("#delete_item_name").html(t),$("#delete-content").show(),$(".validationArea").show(),$(".deleteItem").removeClass("centerAlign"),$("#delete-confirmation").hide(),$("#delete-error").hide(),$(".successArea").hide()}function onDeleteItemDialogClose(){$("#delete-div").ejDialog("close")}function messageBox(e,t,n,o,i,a,r,s,l){var c,p,d;($("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html(""),$("#messageBox").find(".message-header").html("<span class='su "+e+"'></span> <span class='modal-title'  data-bs-toggle='tooltip' data-bs-placement='bottom' data-container='body' title='"+t+"'  >"+t+"</h2>"),$("#messageBox").find(".message-content").html(n),"error"==o)?(null!=i&&(p=$("<input type='button' class='critical-action-button app-btn-danger float-end' value='"+window.Server.App.LocalizationContent.Yes+"'></input>")).bind("click",$.proxy(getFnObj(i),window)),null!=a?((c=$("<input type='button' class='secondary-button app-btn-secondary float-end' value='"+window.Server.App.LocalizationContent.No+"'></input>")).bind("click",$.proxy(getFnObj(a),window)),(d=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(a),window))):(c=$("<input type='button' class='secondary-button app-btn-secondary float-end' value='"+window.Server.App.LocalizationContent.No+"'></input>"),d=$('<span class="su su-close"></span>'),c.click(function(){onCloseMessageBox()}),d.click(function(){onCloseMessageBox()})),$(".message-box-close").html(d),$(".message-box-btn-holder").append(c,p),$("#messageBox").unbind("keydown")):(null!=i?((p=$("<input type='button' class='secondary-button app-btn-secondary' value='"+window.Server.App.LocalizationContent.Ok+"'></input>")).bind("click",$.proxy(getFnObj(i),window)),(d=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(i),window))):(p=$("<input type='button' class='secondary-button app-btn-secondary' value='"+window.Server.App.LocalizationContent.Ok+"'></input>"),d=$('<span class="su su-close"></span>'),p.click(function(){onCloseMessageBox()}),d.click(function(){onCloseMessageBox()})),$(".message-box-close").html(d),$(".message-box-btn-holder").append(p),$("#messageBox").on("keydown",function(e){switch(e.keyCode){case 13:case 27:p.click()}}));$("#messageBox").ejDialog("open"),$("#messageBox").focus(),setTimeout(function(){var e=$("#messageBox").data("ejDialog");null!=r&&e.option("width",r),window.innerWidth>1040&&null==s&&(s=$("#messageBox").find(".modal-content").height()+135+"px"),e.option("height",s),null!=l&&e.option("maxHeight",l)},50)}function ShareView(e){var t=$(window).width(),n=$(window).height(),o=$("#viewShare_popup").width(),i=$("#viewShare_popup").height(),a=(parseInt(t)-parseInt(o))/2,r=(parseInt(n)-parseInt(i))/2;r<0&&(r=0),$("#viewShare_popup").css({left:a,top:r}),$("#viewShare_popup,.ViewShare_popup_shadow").css("display","block"),$("#sharepopup_wrapper_WaitingPopup").css("display","block"),$("#viewShare_popup_iframe").attr("src",itemViewShareIframeUrl+"?itemId="+e.viewId)}function ResizePopup(){var e=$(window).width(),t=$(window).height(),n=$("#viewShare_popup").width(),o=$("#viewShare_popup").height(),i=(parseInt(e)-parseInt(n))/2,a=(parseInt(t)-parseInt(o))/2;a<0&&(a=0),$("#viewShare_popup").css({left:i,top:a})}function openDashboardComment(e){var t=$("#dashboard_Comment").attr("data-item-id");if($("#commentModuleContainer").toggleClass("displayNone"),$("#commentModuleContainer").hasClass("displayNone"))closeDashboardComment();else{var n=document.getElementById("commentModuleContainer_iframe").contentWindow;"function"==typeof n.GetAllComments?n.GetAllComments(t,"report",t,"1"):$("#commentModuleContainer_iframe").on("load",function(){n.GetAllComments(t,"report",t,"1")})}}function closeDashboardComment(){void 0!==$("#commentImage_popup").data("ejDialog")&&$("#commentImage_popup").ejDialog("close"),$("#commentModuleContainer").addClass("displayNone"),$("#delete_popup_iframe").addClass("displayNone"),"true"===$("#is_mobile").val()&&($("#sync_report_viewer").show(),$("#server-mobile-navbar .server-comment").hasClass("active")&&($("#server-mobile-navbar a.active").removeClass("active"),$("#server-mobile-navbar .su-nav-dashboard").addClass("active")))}function openComments(){isViewerV2Enabled?("undefined"!=typeof canCreateComments&&canCreateComments&&0==$("#commentModuleContainer_iframe").length&&createCommentsIframeForViewerV2(),"true"==enableViews&&(0==$("#viewModuleContainer_iframe").length&&createViewsIframeForViewerV2(),embedConfig.IsEmbedCode||appendSharePermissionDialog())):void 0!==getUrlVars(window.location.href.split("#")[0]).comment&&"report"===$("#comment_Type").attr("data-item-type").toLowerCase()?"true"===$("#is_mobile").val()?window.innerWidth<410&&$("#sync_report_viewer").hide():$("#sync_report_viewer_toolbar_com").trigger("click"):$("#commentModuleContainer iframe").attr("src",commentPageUrl+"?itemId="+$("#commentModuleContainer_iframe").attr("data-item-id")+"&userId="+userId)}function updatefavorite(){var e=$("#favorite_Item").attr("data-item-id"),t=$("#favorite_Item").attr("data-parent-id"),n="true"!==$("#favorite_Item").attr("data-favorite-value").toLowerCase();$.ajax({type:"POST",url:favoriteItemUrl,data:{itemId:e,favoriteValue:n,parentId:t},success:function(e){e.Success?($("#favorite_Item").attr("data-favorite-value",n),$("#sync_report_viewer").data("boldReportViewer").toggleFavoriteIcon()):($("#delete_popup_iframe").removeClass("displayNone"),frames[1].messageBox("",window.Server.App.LocalizationContent.MarkFavoriteError,window.Server.App.LocalizationContent.InternalServerError,"success",function(){$("#delete_popup_iframe").addClass("displayNone")}))}})}function createCommentsIframeForViewerV2(){var e=commentPageUrl+"?itemId="+reportId+"&userId="+userId,t=$("<iframe id='commentModuleContainer_iframe' data-item-id='"+reportId+"' src='"+e+"'></iframe>                       <div class='loader-blue loader-icon' id='comment-module-container-loader-icon'>                       <svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg>                       </div>");$("#commentModuleContainer").append(t),$("#commentModuleContainer").toggleClass("displayNone")}function appendSharePermissionDialog(){$("#sharePermissionPopup_iframe").attr("src",sharePermissionDialogUrl)}$(document).on("click",function(e){if("true"!=$("#is_mobile").val()){var t=document.getElementById("viewModuleContainer");if(null!==t&&("block"==t.style.display||""==t.style.display)&&"sync_report_viewer_toolbar_views_div"!=e.target.id&&"sync_report_viewer_toolbar_views"!=e.target.id){var n=$(e.target);n.parents().andSelf().is("#report-view-toogle")||n.parents().andSelf().is("#PopupContainerDelete")||n.parents().andSelf().is("#messageBox")||n.parents().andSelf().is("#savedViews")||$("#sync_report_viewer_toolbar_views").trigger("click")}}}),$(document).on("click","#delete_item",function(e){var t=document.getElementById("viewModuleContainer_iframe").contentWindow.document.getElementById("report-views");"block"!=t.style.display&&""!=t.style.display||$("#delete-div_wrapper").ejWaitingPopup("show"),deletedViewId=e.currentTarget.attributes.viewid.value;var n={ItemViewName:$("#delete_item_name").text(),itemId:reportId,itemViewId:e.currentTarget.attributes.viewid.value,UserId:userId,UserName:userName,itemType:reportItemDetail.ItemType};ajaxPostCall("POST",deleteViewUrl,n,null,deleteViewResult,deleteViewErrorResult,null)}),$(document).on("keyup focusout","#view-name-filter-pane",function(e){/^[a-zA-Z0-9_-]+$/.test(e.currentTarget.value)?($(".app-critical-action-button ").prop("disabled",!1),$("#validate-view-name").html(""),$("#validate-view-name").css("display","none"),$("#view-name-filter-pane").removeClass("has-error")):($(".app-critical-action-button ").prop("disabled",!0),""!=e.currentTarget.value?$("#validate-view-name").html(window.Server.App.LocalizationContent.AvoidSpecialCharactors):$("#validate-view-name").html(window.Server.App.LocalizationContent.ViewNameValidator),$("#validate-view-name").css("display","block"),$("#view-name-filter-pane").addClass("has-error"))}),$(document).ready(function(){var e=$("#viewShare_popup").height();if($("#sharepopup_wrapper_WaitingPopup .loader-icon").css("top",parseInt(parseInt(e)/2)-30),"true"===$("#is_mobile").val()){var t=$(window).height()-50;$("#sync_report_viewer").css("height",t),$(".server-dashboard-view").css("height",t)}}),$(window).on("orientationchange",function(){if("true"===$("#is_mobile").val()){var e=$(window).height()-50;$("#sync_report_viewer").css("height",e),$(".server-dashboard-view").css("height",e)}}),$(window).on("orientationchange",function(){closeDashboardComment()});var SettingsScopes={All:0,SiteSettings:1,ReportSettings:2,EmbedSettings:3,Connector:4,Email:5,Accounts:6,UserDirectorySettings:7,AuthenticationSettings:8,NotificationSettings:9,ManageLicense:10,SupportSettings:11,Subscription:12,Payments:13,CORSPolicySettings:14,Security:15},PermissionEntities={None:0,AllReports:1,ReportsInCategory:2,SpecificReports:3,AllCategories:4,SpecificCategory:5,AllDataSources:6,SpecificDataSource:7,AllFiles:8,SpecificFile:9,AllSchedules:10,SpecificSchedule:11,AllDashboards:12,DashboardsInCategory:13,SpecificDashboard:14,AllWidgets:15,SpecificWidget:16,AllDatasets:17,SpecificDataset:18,SpecificItemView:19,AllItemViews:20,SpecificSlideshow:21,AllSlideshow:22,SpecificSettings:23,AllSettings:24,SpecificGroup:25,UsersandGroups:26,SpecificPermissions:27,AllPermissions:28,AllGroups:29},ReportLayoutView={Card:1,Grid:2};function ajaxPostCall(e,t,n,o,i,a,r){if(embedConfig.IsEmbedCode){if("GET"==e){var s=jQuery.param(n);t.api=t.api+"?"+s,n=null}return $.ajax({type:e,url:reportServerApiUrlForServerEmbed+t.api,headers:{"Content-type":"application/json",Authorization:token},data:JSON.stringify(n),beforeSend:function(e){isNullOrWhitespace(o)||o(e)},success:function(e,t){isNullOrWhitespace(i)||i(e)},error:function(e){isNullOrWhitespace(a)||a()},complete:function(e){isNullOrWhitespace(r)||r(e)}})}return $.ajax({type:e,url:t.web,data:n,beforeSend:function(e){embedConfig.IsEmbedReport||e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie()),isNullOrWhitespace(o)||o(e)},success:function(e,t){isNullOrWhitespace(i)||i(e)},error:function(e){isNullOrWhitespace(a)||a()},complete:function(e){isNullOrWhitespace(r)||r(e)}})}function isNullOrWhitespace(e){return null==e||null==e||""==$.trim(e)}function generateProfileAvatar(){$(".profile-pic-tag").each(function(){var e=$(this).attr("data-id"),t=$(this).attr("data-image-size"),n=t/3,o=$(this).attr("data-display-name"),i=$(this).attr("data-type");if($(this).html(""),0!=e){var a=["#b7fbff","#a9eec2","#ffe0a3","#ffa1ac","#8ed6ff","#bf9fee","#ffa0d2","#32dbc6","#d2c8c8","#e3e7f1"];if("user"==i){var r=e.match(/(\d+)/g),s=0;for(s=0;s<r.length;s++)var l=r[0][0];$(this).css("background-color",a[l]);var c=idpUrl+"/User/Avatar?id="+e,p=$('<img id="default-profile-image">');p.attr("src",c),p.attr("width",t),p.attr("height",t),p.css("position","absolute"),p.css("top","0px"),p.css("left","0px"),p.css("border-radius","50%"),p.appendTo($(this))}else{var d=e%10;$(this).css("background-color",a[d])}$(this).css("width",t),$(this).css("height",t),$(this).css("line-height",t+"px");var u=o.trim().toUpperCase().split(/ /),m=$('<span id="first-letter">');null==u[1]?m.text(u[0][0]):m.text(u[0][0]+u[u.length-1][0]),m.css("font-size",n+"px"),m.css("margin-left","2px"),m.appendTo($(this))}})}function extractXSRFTokenFromCookie(){var e=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function fnOnUserGridActionBegin(e){isFirstRequest=!0;var t=$("#userSearchKey").val();this.model.query._params.push({key:"searchKey",value:t});var n,o=[],i=createLoader("UserGrid");if(this.element.ejWaitingPopup({template:$("#"+i)}),e.model.filterSettings.filteredColumns.length>0){for(n=0;n<e.model.filterSettings.filteredColumns.length;n++){var a=e.model.filterSettings.filteredColumns[n];o.push({PropertyName:a.field,FilterType:a.operator,FilterKey:a.value})}this.model.query._params.push({key:"filterCollection",value:o})}}function createLoader(e,t){var n="";if("string"==typeof e){t=0===e.indexOf(".")?".":"#";if(n=(e=0===e.indexOf(".")||0===e.indexOf("#")?e.slice(1,e.length):e)+"-loader-icon",0==$("#"+n).length&&0!=$(t+e).length){var o=$("<div class='loader-blue loader-icon' id='"+n+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div>");$("body").append(o)}return n}t=0===(e=t).indexOf(".")?".":"#";if(n=(e=e.slice(1,e.length))+"-loader-icon",0==$("#"+n).length&&0!=$("#"+e).length){o=$("<div class='loader-blue loader-icon' id='"+n+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div>");$("body").append(o)}return n}function fnOnGroupGridActionBegin(e){isFirstRequest=!0;var t=$("#groupSearchKey").val();this.model.query._params.push({key:"searchKey",value:t});var n,o=[],i=createLoader("GroupGrid");if(this.element.ejWaitingPopup({template:$("#"+i)}),e.model.filterSettings.filteredColumns.length>0){for(n=0;n<e.model.filterSettings.filteredColumns.length;n++){var a=e.model.filterSettings.filteredColumns[n];o.push({PropertyName:a.field,FilterType:a.operator,FilterKey:a.value})}this.model.query._params.push({key:"filterCollection",value:o})}}function onPermissionDeleteDialogClose(){$("#permission_delete_confirmation").ejDialog("close")}function onPermissionDeleteDialogOpen(){$("#permission_delete_confirmation").ejDialog("open"),$("#permission_delete_confirmation").focus()}function OpenDeleteDialog(e){$("#permission_delete_confirmation").ejDialog("open");var t=$(e).attr("data-itemviewid"),n=$(e).attr("data-item"),o=$(e).attr("data-id");$("#deletedItem").html(n),$("#delete_item_type").val(n),$("#delete_permission_id").val(t),$("#hiddendata-id").val(o)}function DeletePermission(){var e=$("#delete_permission_id").val(),t=$("#delete_item_type").val(),n=$("#hiddendata-id").val();$.ajax({type:"POST",url:DeleteItemViewPermissionUrl,data:{permission:e,deleteItem:t},beforeSend:function(){$("#permission_delete_confirmation_wrapper").ejWaitingPopup("show")},success:function(e){$("#permission_delete_confirmation_wrapper").ejWaitingPopup("hide"),onPermissionDeleteDialogClose(),messageBox("su-delete",window.Server.App.LocalizationContent.RemoveAccess,window.Server.App.LocalizationContent.RemoveAccessSuccess,"success",function(){"group"==t.toLowerCase()?($("#GroupSearch option[value='"+n+"']").attr("selected",!1),$("#GroupSearch").selectpicker("destroy"),$("#GroupSearch").selectpicker()):($("#UserSearch option[value='"+n+"']").attr("selected",!1),$("#UserSearch").selectpicker("destroy"),$("#UserSearch").selectpicker()),refreshUserGroupList();var e=$("#UserGrid").data("ejGrid"),o=$("#GroupGrid").data("ejGrid"),i=$(".ListItems.selected").attr("data-grid");e.refreshContent(),o.refreshContent(),"usergrid"==i.toLowerCase()?$("#GroupGrid_WaitingPopup").hide():$("#UserGrid_WaitingPopup").hide(),onCloseMessageBox()})}})}function InitializeShareView(){$("#UserSearch").selectpicker("destroy"),$("#UserSearch").selectpicker();for(var e=0;e<$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").length;e++){var t=$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#userSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#GroupSearch").selectpicker("destroy"),$("#GroupSearch").selectpicker();for(e=0;e<$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").length;e++){t=$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").eq(e).find("a .text").text();$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(e).find("a").attr("title",t)}$("#userSearch_container").on("click",".bs-select-all-custom",function(e){$("#userSearch_container").addClass("valueChanged"),$("#UserSearch").data("selectpicker").selectAll(),$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear),e.stopPropagation()}),$("#groupSearch_container").on("click",".bs-select-all-custom",function(e){$("#groupSearch_container").addClass("valueChanged"),$("#GroupSearch").data("selectpicker").selectAll(),$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear),e.stopPropagation()}),$("#userSearch_container").on("click",".bs-deselect-all-custom",function(e){$("#userSearch_container").addClass("valueChanged"),$("#UserSearch").data("selectpicker").deselectAll(),$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select),$(".SelectedShareItems[data-searchtype='userSearch']").remove(),e.stopPropagation()}),$("#groupSearch_container").on("click",".bs-deselect-all-custom",function(e){$("#groupSearch_container").addClass("valueChanged"),$("#GroupSearch").data("selectpicker").deselectAll(),$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select),$(".SelectedShareItems[data-searchtype='groupSearch']").remove(),e.stopPropagation()}),$("#userSearch_container").on("click",".bootstrap-select li a",function(e){if($("#userSearch_container").addClass("valueChanged"),$("#userSearch_container .bootstrap-select li.selected").length==$("#userSearch_container .bootstrap-select li").length&&($($("#userSearch_container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#userSearch_container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom")),$(this).parent().hasClass("selected"))var t=$("#UserSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))];else{t=$("#UserSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))];$(".SelectedShareItems[id='"+$(t).val()+"']").remove(),$($("#userSearch_container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#userSearch_container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom")}e.stopPropagation()}),$("#groupSearch_container").on("click",".bootstrap-select .dropdown-menu .selectpicker li a",function(e){if($("#groupSearch_container").addClass("valueChanged"),$("#groupSearch_container .bootstrap-select li.selected").length==$("#groupSearch_container .bootstrap-select li").length&&($($("#groupSearch_container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#groupSearch_container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom")),$(this).parent().hasClass("selected"))var t=$("#GroupSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))];else{t=$("#GroupSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))];$(".SelectedShareItems").filter("[data-searchtype='groupSearch']").filter("#"+$(t).val()).remove(),$($("#groupSearch_container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#groupSearch_container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom")}e.stopPropagation()}),$("#groupSearch_container").click(function(){$("#groupSearch_container").addClass("valueChanged"),$("#groupSearch_container .bootstrap-select li.selected").length==$("#groupSearch_container .bootstrap-select li").length&&$($("#groupSearch_container div.bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear)}),$("#userSearch_container").click(function(){$("#userSearch_container").addClass("valueChanged"),$("#userSearch_container .bootstrap-select li.selected").length==$("#userSearch_container .bootstrap-select li").length&&$($("#userSearch_container div.bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear)}),$("#UserSearch option").length>0?$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"</span>"),$("#GroupSearch option").length>0?$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"</span>"),parent.$("#sharepopup_wrapper_WaitingPopup").css("display","none")}function refreshUserGroupList(){var e=parent.document.getElementById("viewShare_popup_iframe"),t=e.contentDocument||e.contentWindow.document;$(t).find(".share-popup #userSearch_container .bs-deselect-all-custom,.share-popup #userSearch_container .bs-select-all-custom,.share-popup #userSearch_container .noResult").remove(),$(t).find(".share-popup #groupSearch_container .bs-deselect-all-custom,.share-popup #groupSearch_container .bs-select-all-custom,.share-popup #groupSearch_container .noResult").remove();for(var n=0;n<$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++){var o=$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text();$("#userSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",o)}for(n=0;n<$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++){o=$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text();$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",o)}$("#UserSearch option").length>0?$("#UserSearch option").length==$("#UserSearch option:selected").length?$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-deselect-all-custom'><span>"+window.Server.App.LocalizationContent.Clear+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"</span>"),$("#GroupSearch option").length>0?$("#GroupSearch option").length==$("#GroupSearch option:selected").length?$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-deselect-all-custom'><span>"+window.Server.App.LocalizationContent.Clear+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"</span>")}function onviewShareDialogClose(){var e=parent.document.getElementById("viewShare_popup_iframe");(e.contentDocument||e.contentWindow.document).documentElement.innerHTML="",parent.$("#viewShare_popup").ejDialog("close")}function ShareView(e){var t=$(window).width(),n=$(window).height(),o=$("#viewShare_popup").width(),i=$("#viewShare_popup").height(),a=(parseInt(t)-parseInt(o))/2,r=(parseInt(n)-parseInt(i))/2;$("#viewShare_popup").css({left:a,top:r}),$("#viewShare_popup,.ViewShare_popup_shadow").css("display","block"),$("#sharepopup_wrapper_WaitingPopup").css("display","block"),$("#viewShare_popup_iframe").attr("src",itemViewShareIframeUrl+"?itemId="+e)}function ShareviewSubmitCancel(){var e=parent.document.getElementById("viewShare_popup_iframe");(e.contentDocument||e.contentWindow.document).documentElement.innerHTML="",parent.$("#viewShare_popup,.ViewShare_popup_shadow").css("display","none")}$(document).on("click","#license-warning-designer",function(){var e=window.Server.App.LocalizationContent.LicenseWarningContent1+"<div class='license-warning-content'>"+window.Server.App.LocalizationContent.LicenseWarningContent2+"<a class='text-decoration-none' href='"+idpUrl+"/ums/administration/license-settings?product=enterprise-reporting'>"+window.Server.App.LocalizationContent.LicenseWarningContent3+"</a>"+window.Server.App.LocalizationContent.LicenseWarningContent4,t=document.createElement("style");t.innerHTML="\n        #license-warning-designer-item-dialog .e-icon-btn {\n            top: -3px;\n            left: -3px;\n            position: relative;\n        }\n\n        #license-warning-designer-item-dialog .e-icon-btn .e-icons {\n            height: 14px;\n            left: -2px;\n            top: 4px;\n            position: absolute;\n            width: 21px;\n        }\n    ",document.head.appendChild(t);var n=document.createElement("div");n.setAttribute("id","license-warning-designer-item-dialog");var o=document.createElement("div");o.setAttribute("id","content-area"),document.body.appendChild(o),document.getElementById("content-area").appendChild(n);var i=new ejs.popups.Dialog({header:window.Server.App.LocalizationContent.LicenseWarningHeader,showCloseIcon:!0,content:e,buttons:[{click:function(){i.hide()},buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}}],width:"400px",isModal:!0});i.appendTo(n)}),$(document).on("click","#license-warning",function(){var e=window.Server.App.LocalizationContent.LicenseWarningContent1+"<div class='license-warning-content'>"+window.Server.App.LocalizationContent.LicenseWarningContent2+"<a class='text-decoration-none' href='"+idpUrl+"/ums/administration/license-settings?product=enterprise-reporting'>"+window.Server.App.LocalizationContent.LicenseWarningContent3+"</a>"+window.Server.App.LocalizationContent.LicenseWarningContent4,t=document.createElement("style");t.innerHTML="\n        #license-warning-item-dialog .e-icon-btn {\n            top: -3px;\n            left: -3px;\n            position: relative;\n        }\n\n        #license-warning-item-dialog .e-icon-btn .e-icons {\n            height: 14px;\n            left: -2px;\n            top: 4px;\n            position: absolute;\n            width: 21px;\n        }\n    ",document.head.appendChild(t);var n=document.createElement("div");n.setAttribute("id","license-warning-item-dialog");var o=document.createElement("div");o.setAttribute("id","content-area"),document.body.appendChild(o),document.getElementById("content-area").appendChild(n);var i=new ejs.popups.Dialog({header:window.Server.App.LocalizationContent.LicenseWarningHeader,showCloseIcon:!0,content:e,buttons:[{click:function(){i.hide()},buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}}],width:"400px",isModal:!0});i.appendTo(n)}),$(document).on("click",".listing-dropdown .dropdown-toggle",function(e){$(".listing-dropdown .dropdown-menu").not($(this).next()).removeClass("show")}),$(document).on("click",function(e){let t=$(".listing-dropdown .dropdown-menu.show");$(e.target).closest(".listing-dropdown").length||t.length&&t.removeClass("show")}),$(document).ready(function(){$("#permission_delete_confirmation").ejDialog({width:window.innerWidth>410?"400px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"187px",showHeader:!1,title:window.Server.App.LocalizationContent.Deleteuser,enableModal:!0,close:"onPermissionDeleteDialogClose",closeOnEscape:!0,open:"onPermissionDeleteDialogOpen"}),$("#messageBox").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!0,enableResize:!1,height:"auto",showHeader:!1,enableModal:!0,close:"onMessageDialogClose"});var e=createLoader("permission_delete_confirmation_wrapper");$("#permission_delete_confirmation_wrapper").ejWaitingPopup({template:$("#"+e)});var t=createLoader("MasterContainer");$("#MasterContainer").ejWaitingPopup({template:$("#"+t)}),$(document).on("click","#SubscribersPanel .i-selected-cancel",function(e){var t=$(this).parents(".SelectedShareItems").attr("id"),n=$(this).parents(".SelectedShareItems").attr("data-searchtype");"userSearch"==n?(currentElementIndex=$("#UserSearch").find("[value='"+t+"']").index(),$("#userSearch_container .bootstrap-select li").filter("[data-original-index='"+currentElementIndex+"']").find("a").click()):"groupSearch"==n&&(currentElementIndex=$("#GroupSearch").find("[value='"+t+"']").index(),$("#groupSearch_container .bootstrap-select li").filter("[data-original-index='"+currentElementIndex+"']").find("a").click())}),$("#schedule_Submit").on("click",function(){var e=$("#UserSearch").val(),t=$("#GroupSearch").val(),n=$("#hiddenItemId").val(),o=$("#IsPublic").data("ejCheckBox").model.checked;$("#isPublicHiddenValue").val().toLowerCase();null!=e||null!=t||1==o?($("#validationMessage").css("display","none"),$.ajax({type:"POST",url:addItemViewPermissionUrl,data:{shareList:JSON.stringify({UserList:e,GroupList:t,itemViewId:n,IsPublic:o})},beforeSend:function(){$("#MasterContainer").ejWaitingPopup("show")},success:function(e){$("#MasterContainer").ejWaitingPopup("hide"),messageBox("su-share",window.Server.App.LocalizationContent.ShareView,window.Server.App.LocalizationContent.ShareViewSuccess,"success",function(){$("#isPublicHiddenValue").val(o),refreshUserGroupList();var e=$("#UserGrid").data("ejGrid"),t=$("#GroupGrid").data("ejGrid"),n=$(".ListItems.selected").attr("data-grid");e.refreshContent(),t.refreshContent(),"usergrid"==n.toLowerCase()?$("#GroupGrid_WaitingPopup").hide():$("#UserGrid_WaitingPopup").hide(),onCloseMessageBox()})}})):$("#validationMessage").css("display","block")}),$(".ListItems").click(function(){var e=$(this).attr("data-grid");$(".ListItems").removeClass("selected"),$(".ListItems[data-grid='"+e+"']").addClass("selected"),$(".itemGrid").removeClass("active"),$("#"+e).parent(".itemGrid").addClass("active"),$(".ListItems").parent("li").removeClass("active"),$(".selected").parent("li").addClass("active")}),$(".scheduleEditPopup").on("click",function(){var e=parent.document.getElementById("viewShare_popup_iframe");(e.contentDocument||e.contentWindow.document).documentElement.innerHTML="",parent.$("#viewShare_popup,.ViewShare_popup_shadow").css("display","none")})});var customToolbarItems=[];function reportViewer(){$(document.body).bind("submit",$.proxy(this.formSubmit,this)),$(window).bind("beforeunload",$.proxy(this.windowUnload,this)),filterParameters=removeLabels(filterParameters),null!=viewId&&""!=viewId?initializeViewerForViews():initializeViewer(filterParameters)}function initializeViewer(e){$("#sync_report_viewer").boldReportViewer({reportServiceUrl:viewerUrl,processingMode:ej.ReportViewer.ProcessingMode.Remote,reportPath:reportPath,reportServerUrl:viewerUrl,ajaxBeforeLoad:"onAjaxRequest",reportExport:"onExportClick",renderingBegin:"onRenderingAction",renderClassicUI:!1,exportSettings:{wordFormat:ej.ReportViewer.WordFormats.Word2013,pptFormat:ej.ReportViewer.PPTFormats.PowerPoint2013,excelFormat:ej.ReportViewer.ExcelFormats.Excel2013},isResponsive:!0,reportLoaded:"openComments",viewReportClick:"viewReportClick",renderingComplete:"renderingComplete",parameterChange:"onParameterValueChange",parameters:e,locale:language,fontNames:customFontsName,parameterSettings:{position:"right"},toolbarSettings:{items:ej.ReportViewer.ToolbarItems.All&~ej.ReportViewer.ToolbarItems.Find&~ej.ReportViewer.ToolbarItems.Analytics,customItems:customToolbarItems},localeSettings:{dateFormat:dateFormat,timeFormat:timeFormat,timeZone:timeZone},cacheSettings:{mode:isCommonCacheEnabled?ej.ReportViewer.ReportCacheMode.Cache:ej.ReportViewer.ReportCacheMode.Live,expiredAfter:commonCacheExpirationTime},toolBarItemClick:"onToolbarItemClick"}),"false"==enableExport&&$("#sync_report_viewer_e_export").remove()}function formSubmit(e){isSubmit=!1}function windowUnload(e){var t=$("#sync_report_viewer").data("boldReportViewer");t&&isSubmit&&t.clearReportCache(),isSubmit=!0}function renderingComplete(e){enableCacheRefreshOption(),filterViews(e)}function enableCacheRefreshOption(){var e=$("#sync_report_viewer").data("boldReportViewer");if(null!=e&&null!=e.model.cacheSettings&&e.model.cacheSettings.mode==ej.ReportViewer.ReportCacheMode.Cache&&($(".report_viewer_v2_cache_options_div").css("display","inline-flex"),new ejs.popups.Tooltip({content:window.Server.App.LocalizationContent.CacheRefresh}).appendTo("#report_viewer_v2_cache_refresh"),null!=$("#report_viewer_v2_cache_reresh_time_div")&&$("#report_viewer_v2_show_time").length>0)){var t=e._getDataRefreshTime();null!=t&&($("#report_viewer_v2_show_time")[0].innerHTML=window.Server.App.LocalizationContent.DisplayDataRefreshInfo+" "+t)}}function onAjaxRequest(e){isUserAuthenticatedInCurrentTenant||"true"!==isPublic?e.headers.push({Key:"Authorization",Value:token},{Key:"ReportId",Value:reportId}):e.headers.push({Key:"X-Server-Token",Value:xServerToken},{Key:"ReportId",Value:reportId})}function onExportClick(e){if($("#reportserverapireportid").length)$("#reportserverapitoken").val(token),$("#reportserverapireportid").val(reportId);else{var t=document.createElement("input");$(t).attr({type:"hidden",id:"reportserverapitoken",name:"Authorization",value:token}),$(e.exportAction).append(t);var n=document.createElement("input");$(n).attr({type:"hidden",id:"reportserverapireportid",name:"ReportId",value:reportId}),$(e.exportAction).append(n)}}function removeLabels(e){if(null!=e&&e.length>0)for(i=0;i<e.length;i++)delete e[i].labels;return e}function backToServer(){window.location.href=reportServerHomeUrl}function editReport(){window.open(editReportUrl,"_blank")}function onToolbarItemClick(e){"comments"===e.value&&(e.target.classList.contains("e-rv-button-active")?(0==$("#commentModuleContainer_iframe").length&&createCommentsIframeForViewerV2(),$("#comment-module-container-loader-icon").show(),openDashboardComment(null)):document.getElementById("commentModuleContainer_iframe").contentWindow.closeComments()),"views"===e.value&&(e.target.classList.contains("e-rv-button-active")?(0==$("#viewModuleContainer_iframe").length&&createViewsIframeForViewerV2(),document.getElementById("viewModuleContainer_iframe").contentWindow.openViews()):document.getElementById("viewModuleContainer_iframe").contentWindow.CloseReportView())}function commentImageDialogClose(){$("#commentImage_popup").ejDialog("close"),$("#commentImage_popup_image").attr("src","")}function setMaxWidthForReportName(){var e=$("#report_viewer_v2_header").width()-($("#ReportViewToggle_div").outerWidth(!0)+$("#report_viewer_v2_toolbar").outerWidth(!0)+$("#report_viewer_v2_backarrow_div").outerWidth(!0)+($("#report_viewer_v2_report_name_div").outerWidth(!0)-$("#report_viewer_v2_report_name").width()));$("#report_viewer_v2_report_name_div").css("max-width",e+"px")}function initializeViewerForViews(){var e="";$.ajax({type:"POST",url:getViewParameterUrl,data:{ViewId:viewId,UserId:userId,UserName:userName,itemid:reportId},success:function(t){var n;if(null!=t.viewDetails&&""!=t.viewDetails?(n=t.viewDetails,e=n.QueryString,canHideSaveViewBtn=!n.CanEdit):window.location.href=window.location.origin+window.location.pathname,null!=e&&""!=e){var o=encodeURIComponent(e);e=removeLabels(e=JSON.parse("["+decodeURIComponent(o)+"]"))}else window.location.href=window.location.origin+window.location.pathname;initializeViewer(e)},error:function(){window.location.href=window.location.origin+window.location.pathname}})}function setHeightForReportViewer(){var e=$(window).innerHeight()-$("#report_viewer_v2_header").outerHeight();$("#sync_report_viewer").height(e)}function isFontFaceExist(){try{return!!FontFace}catch(e){return!1}}function addCustomFonts(e,t){var n=encodeURI(baseUrl+"/content/custom-fonts/"+t);if(isFontFaceExist())try{new FontFace(e,"url("+n+")").load().then(function(e){document.fonts.add(e)}).catch(function(t){console.log("Failed to load font: "+e+"; Error: "+t)})}catch(t){console.log("Failed to load font: "+e+"; Error: "+t)}else try{const i=document.createElement("style");i.innerHTML="@@font-face { font-family:"+e+"; src: url("+n+");}",document.head.appendChild(i);var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",n+t),document.head.appendChild(o)}catch(t){console.log("Failed to register stylesheet for the font: "+e+"; Error: "+t)}}function refreshCommonCache(){$("#sync_report_viewer").data("boldReportViewer")._refreshReportCache()}function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}"true"!=enableComment||isMobile||hideComments||customToolbarItems.push({type:"button",prefixIcon:"comment",id:"comments",class:"e-comments",tooltip:{header:window.Server.App.LocalizationContent.CommentTitle},appendTo:"VerticalToolbar",sidePanel:{isEnabled:!0,id:"commentModuleContainer"}}),"true"!=enableViews||isMobile||hideViews||customToolbarItems.push({type:"button",prefixIcon:"su-view",id:"views",class:"su-view",tooltip:{header:window.Server.App.LocalizationContent.ViewTitle},appendTo:"VerticalToolbar",sidePanel:{isEnabled:!0,id:"viewModuleContainer"}}),$(document).ready(function(){try{sameOrigin=window.parent.location.host==window.location.host}catch(e){sameOrigin=!1}(setHeightForReportViewer(),reportViewer(),reportviewerObj=$("#sync_report_viewer").data("boldReportViewer"),canEdit)&&new ejs.popups.Tooltip({content:window.Server.App.LocalizationContent.Editdashboard}).appendTo("#report_viewer_v2_edit");setMaxWidthForReportName(),loadCustomFonts()}),$(window).resize(function(){setHeightForReportViewer(),setMaxWidthForReportName()}),$(document).on("click","#report_viewer_v2_backarrow",backToServer),$(document).on("click","#report_viewer_v2_edit",editReport),$(document).on("click","#report_viewer_v2_cache_refresh",refreshCommonCache),$(document).on("click","#comment_image_dialog_close_link",function(e){e.preventDefault(),commentImageDialogClose()}),$(document).on("click","#delete-item-dialog-close-link",function(e){e.preventDefault(),onDeleteItemDialogClose()}),$(document).on("click","#CancelDelete, #ok-button",onDeleteItemDialogClose),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
