function showRenderTab(){$("a.active").removeClass("active"),$(".su-report").addClass("active"),$("#report-view-toogle").removeClass("report-view-toogle"),$("#sync_report_viewer").show(),"report"==$("#comment_Type").attr("data-item-type")&&closeDashboardComment()}$(document).on("click","#server-mobile-navbar .server-comment",function(){if($(this).hasClass("active"))showRenderTab();else{$("a.active").removeClass("active"),$(this).addClass("active");var e=$("#commentModuleContainer iframe").attr("src");void 0!==e&&""!==e||$("#commentModuleContainer iframe").attr("src",commentPageUrl+"?itemId="+$("#commentModuleContainer_iframe").attr("data-item-id")+"&userId="+userId+"&viewer=v2"),$("#commentModuleContainer").hasClass("displayNone")?($("#close-view").trigger("click"),$("#comment-module-container-loader-icon").show(),openDashboardComment(null)):closeDashboardComment(),"true"==$("#is_mobile").val()&&window.innerWidth<410&&$("#sync_report_viewer").hide(),$("#report-view-toogle").removeClass("report-view-toogle")}}),$(document).on("click","#server-mobile-navbar .su-report",function(){showRenderTab()}),$(document).on("click","#server-mobile-navbar .su-view",function(e){$(this).addClass("active"),$("#sync_report_viewer").show(),"report"==$("#comment_Type").attr("data-item-type")&&closeDashboardComment(),$(this).addClass("active"),openViews()}),$(document).on("click","#server-mobile-navbar .su-nav-home",function(e){$(this).hasClass("active")||($("a.active").removeClass("active"),$(this).addClass("active"))}),$(document).on("touchend","[ data-bs-toggle='tooltip']",function(e){(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))&&$(this).click()}),$(document).on("click","#close-view",function(){CloseReportView(),"true"==$("#is_mobile").val()&&($("#sync_report_viewer").show(),$("#server-mobile-navbar .su-view").hasClass("active")&&($("#server-mobile-navbar a.active").removeClass("active"),$("#server-mobile-navbar .su-nav-dashboard").addClass("active"))),$(".options").css("right","0px"),$(".options li").removeClass("active")});var itemUrl,browser=ej.browserInfo();function onGetLinkDialogClose(){$("#get_item_link").ejDialog("close")}function onDashboardGetLinkDialogOpen(){var e=$("#get_item_link");e.ejDialog("open"),e.show(),e.focus(),$(".get_link").show();var t=$("#item-link"),o=window.location.href.replace(window.location.search,""),a="?";"true"===isMultiDashboard.toLocaleLowerCase()&&(a+="tab="+$("#dashboard").data("ejDashboardViewer").getCurrentTab().tabName.trim()+"&");var i=location.search.substring(1);if(""!=i){var n=getQueryVariable(i);$.each(n,function(e,t){"filterQuery"!==e&&"tab"!==e&&"viewid"!==e&&"isembed"!==e&&"dashboard_comments"!==e&&"widget_comments"!==e&&"views"!==e&&"export"!==e&&(a+=e+"="+t+"&")})}o+=a;var r=getcurrentfilters();null==r||null==r.isInitialFilter||r.isInitialFilter?o=o.slice(0,-1):o+=r.encryptedData,o=removeURLParameter(o,"externallogin"),t.val(o),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy").attr("data-original-title","").hide(),t.css({width:"100%",borderRadius:"4px"})):$("#item-link-copy").tooltip({animation:!1}),document.getElementById("item-link").setSelectionRange(0,itemUrl.length)}function getQueryVariable(e){var t,o,a,i,n={};for(a=0,i=(t=e.split("&")).length;a<i;a++)n[(o=t[a].split("="))[0]]=o[1];return n}function fnOnDashboardBegin(e){if("getLinkDialogOpen"===e.eventType){var t=$("#get_item_link");$(".dashboard-link, .private-note").show(),e.source.data.handled=!0,itemUrl=e.source.data.url,t.find(".report-name").html(e.model.reportName).attr("title",e.model.reportName),t.ejDialog("open")}}function removeURLParameter(e,t){var o=e.split("?");if(o.length>=2){for(var a=encodeURIComponent(t)+"=",i=o[1].split(/[&;]/g),n=i.length;n-- >0;)-1!==i[n].lastIndexOf(a,0)&&i.splice(n,1);return o[0]+(i.length>0?"?"+i.join("&"):"")}return e}function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}$(document).ready(function(){$("#get_item_link").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:window.Server.App.LocalizationContent.GetLink,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onGetLinkDialogClose",open:"onDashboardGetLinkDialogOpen"})}),$(document).on("click","#item-link-copy",function(){$("#item-link").select();var e=$("#item-link-copy");if(/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor))e.removeClass("su su-copy").attr("data-original-title","");else{document.execCommand("copy");var t=document.querySelector("#item-link-copy"),o=bootstrap.Tooltip.getInstance(t);o&&o.dispose(),(o=new bootstrap.Tooltip(t,{title:window.Server.App.LocalizationContent.Copysuccess,trigger:"hover",placement:"top"})).show(),setTimeout(()=>{o.dispose(),o=new bootstrap.Tooltip(t,{title:window.Server.App.LocalizationContent.LinkCopy,trigger:"hover",placement:"top"})},3e3)}}),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
