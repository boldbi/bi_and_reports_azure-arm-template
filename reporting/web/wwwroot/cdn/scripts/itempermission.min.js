/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var i=[],s=Object.getPrototypeOf,n=i.slice,l=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},o=i.push,r=i.indexOf,a={},d=a.toString,h=a.hasOwnProperty,c=h.toString,u=c.call(Object),m={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},g=function(e){return null!=e&&e===e.window},f=e.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,i){var s,n,l=(i=i||f).createElement("script");if(l.text=e,t)for(s in _)(n=t[s]||t.getAttribute&&t.getAttribute(s))&&l.setAttribute(s,n);i.head.appendChild(l).parentNode.removeChild(l)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?a[d.call(e)]||"object":typeof e}var C="3.5.1",w=function(e,t){return new w.fn.init(e,t)};function y(e){var t=!!e&&"length"in e&&e.length,i=b(e);return!p(e)&&!g(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}w.fn=w.prototype={jquery:C,constructor:w,length:0,toArray:function(){return n.call(this)},get:function(e){return null==e?n.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},w.extend=w.fn.extend=function(){var e,t,i,s,n,l,o=arguments[0]||{},r=1,a=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[r]||{},r++),"object"==typeof o||p(o)||(o={}),r===a&&(o=this,r--);r<a;r++)if(null!=(e=arguments[r]))for(t in e)s=e[t],"__proto__"!==t&&o!==s&&(d&&s&&(w.isPlainObject(s)||(n=Array.isArray(s)))?(i=o[t],l=n&&!Array.isArray(i)?[]:n||w.isPlainObject(i)?i:{},n=!1,o[t]=w.extend(d,l,s)):void 0!==s&&(o[t]=s));return o},w.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==d.call(e)||(t=s(e))&&("function"!=typeof(i=h.call(t,"constructor")&&t.constructor)||c.call(i)!==u))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){v(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,s=0;if(y(e))for(i=e.length;s<i&&!1!==t.call(e[s],s,e[s]);s++);else for(s in e)if(!1===t.call(e[s],s,e[s]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(y(Object(e))?w.merge(i,"string"==typeof e?[e]:e):o.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:r.call(t,e,i)},merge:function(e,t){for(var i=+t.length,s=0,n=e.length;s<i;s++)e[n++]=t[s];return e.length=n,e},grep:function(e,t,i){for(var s=[],n=0,l=e.length,o=!i;n<l;n++)!t(e[n],n)!==o&&s.push(e[n]);return s},map:function(e,t,i){var s,n,o=0,r=[];if(y(e))for(s=e.length;o<s;o++)null!=(n=t(e[o],o,i))&&r.push(n);else for(o in e)null!=(n=t(e[o],o,i))&&r.push(n);return l(r)},guid:1,support:m}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=i[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,i,s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C="sizzle"+1*new Date,w=e.document,y=0,S=0,x=ae(),T=ae(),k=ae(),D=ae(),I=function(e,t){return e===t&&(c=!0),0},O={}.hasOwnProperty,R=[],A=R.pop,M=R.push,F=R.push,P=R.slice,E=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\["+N+"*("+j+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+N+"*\\]",V=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",H=new RegExp(N+"+","g"),$=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),B=new RegExp("^"+N+"*,"+N+"*"),U=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp(N+"|>"),q=new RegExp(V),G=new RegExp("^"+j+"$"),K={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},le=function(){u()},oe=Ce(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{F.apply(R=P.call(w.childNodes),w.childNodes),R[w.childNodes.length].nodeType}catch(t){F={apply:R.length?function(e,t){M.apply(e,P.call(t))}:function(e,t){for(var i=e.length,s=0;e[i++]=t[s++];);e.length=i-1}}}function re(e,t,s,n){var l,r,d,h,c,p,_,v=t&&t.ownerDocument,w=t?t.nodeType:9;if(s=s||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return s;if(!n&&(u(t),t=t||m,g)){if(11!==w&&(c=Z.exec(e)))if(l=c[1]){if(9===w){if(!(d=t.getElementById(l)))return s;if(d.id===l)return s.push(d),s}else if(v&&(d=v.getElementById(l))&&b(t,d)&&d.id===l)return s.push(d),s}else{if(c[2])return F.apply(s,t.getElementsByTagName(e)),s;if((l=c[3])&&i.getElementsByClassName&&t.getElementsByClassName)return F.apply(s,t.getElementsByClassName(l)),s}if(i.qsa&&!D[e+" "]&&(!f||!f.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(_=e,v=t,1===w&&(W.test(e)||U.test(e))){for((v=ee.test(e)&&_e(t.parentNode)||t)===t&&i.scope||((h=t.getAttribute("id"))?h=h.replace(se,ne):t.setAttribute("id",h=C)),r=(p=o(e)).length;r--;)p[r]=(h?"#"+h:":scope")+" "+be(p[r]);_=p.join(",")}try{return F.apply(s,v.querySelectorAll(_)),s}catch(t){D(e,!0)}finally{h===C&&t.removeAttribute("id")}}}return a(e.replace($,"$1"),t,s,n)}function ae(){var e=[];return function t(i,n){return e.push(i+" ")>s.cacheLength&&delete t[e.shift()],t[i+" "]=n}}function de(e){return e[C]=!0,e}function he(e){var t=m.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var i=e.split("|"),n=i.length;n--;)s.attrHandle[i[n]]=t}function ue(e,t){var i=t&&e,s=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(s)return s;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function me(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return de(function(t){return t=+t,de(function(i,s){for(var n,l=e([],i.length,t),o=l.length;o--;)i[n=l[o]]&&(i[n]=!(s[n]=i[n]))})})}function _e(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=re.support={},l=re.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!Y.test(t||i&&i.nodeName||"HTML")},u=re.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:w;return o!=m&&9===o.nodeType&&o.documentElement&&(p=(m=o).documentElement,g=!l(m),w!=m&&(n=m.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",le,!1):n.attachEvent&&n.attachEvent("onunload",le)),i.scope=he(function(e){return p.appendChild(e).appendChild(m.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),i.attributes=he(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=he(function(e){return e.appendChild(m.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=J.test(m.getElementsByClassName),i.getById=he(function(e){return p.appendChild(e).id=C,!m.getElementsByName||!m.getElementsByName(C).length}),i.getById?(s.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},s.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i=t.getElementById(e);return i?[i]:[]}}):(s.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},s.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i,s,n,l=t.getElementById(e);if(l){if((i=l.getAttributeNode("id"))&&i.value===e)return[l];for(n=t.getElementsByName(e),s=0;l=n[s++];)if((i=l.getAttributeNode("id"))&&i.value===e)return[l]}return[]}}),s.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,s=[],n=0,l=t.getElementsByTagName(e);if("*"===e){for(;i=l[n++];)1===i.nodeType&&s.push(i);return s}return l},s.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},_=[],f=[],(i.qsa=J.test(m.querySelectorAll))&&(he(function(e){var t;p.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+N+"*(?:value|"+L+")"),e.querySelectorAll("[id~="+C+"-]").length||f.push("~="),(t=m.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),he(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=m.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(i.matchesSelector=J.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&he(function(e){i.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),_.push("!=",V)}),f=f.length&&new RegExp(f.join("|")),_=_.length&&new RegExp(_.join("|")),t=J.test(p.compareDocumentPosition),b=t||J.test(p.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,s=t&&t.parentNode;return e===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):e.compareDocumentPosition&&16&e.compareDocumentPosition(s)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){if(e===t)return c=!0,0;var s=!e.compareDocumentPosition-!t.compareDocumentPosition;return s||(1&(s=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===s?e==m||e.ownerDocument==w&&b(w,e)?-1:t==m||t.ownerDocument==w&&b(w,t)?1:h?E(h,e)-E(h,t):0:4&s?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,s=0,n=e.parentNode,l=t.parentNode,o=[e],r=[t];if(!n||!l)return e==m?-1:t==m?1:n?-1:l?1:h?E(h,e)-E(h,t):0;if(n===l)return ue(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)r.unshift(i);for(;o[s]===r[s];)s++;return s?ue(o[s],r[s]):o[s]==w?-1:r[s]==w?1:0}),m},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if(u(e),i.matchesSelector&&g&&!D[t+" "]&&(!_||!_.test(t))&&(!f||!f.test(t)))try{var s=v.call(e,t);if(s||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return s}catch(e){D(t,!0)}return 0<re(t,m,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!=m&&u(e),b(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!=m&&u(e);var n=s.attrHandle[t.toLowerCase()],l=n&&O.call(s.attrHandle,t.toLowerCase())?n(e,t,!g):void 0;return void 0!==l?l:i.attributes||!g?e.getAttribute(t):(l=e.getAttributeNode(t))&&l.specified?l.value:null},re.escape=function(e){return(e+"").replace(se,ne)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,s=[],n=0,l=0;if(c=!i.detectDuplicates,h=!i.sortStable&&e.slice(0),e.sort(I),c){for(;t=e[l++];)t===e[l]&&(n=s.push(l));for(;n--;)e.splice(s[n],1)}return h=null,e},n=re.getText=function(e){var t,i="",s=0,l=e.nodeType;if(l){if(1===l||9===l||11===l){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=n(e)}else if(3===l||4===l)return e.nodeValue}else for(;t=e[s++];)i+=n(t);return i},(s=re.selectors={cacheLength:50,createPseudo:de,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&q.test(i)&&(t=o(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(s){var n=re.attr(s,e);return null==n?"!="===t:!t||(n+="","="===t?n===i:"!="===t?n!==i:"^="===t?i&&0===n.indexOf(i):"*="===t?i&&-1<n.indexOf(i):"$="===t?i&&n.slice(-i.length)===i:"~="===t?-1<(" "+n.replace(H," ")+" ").indexOf(i):"|="===t&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,s,n){var l="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===s&&0===n?function(e){return!!e.parentNode}:function(t,i,a){var d,h,c,u,m,p,g=l!==o?"nextSibling":"previousSibling",f=t.parentNode,_=r&&t.nodeName.toLowerCase(),v=!a&&!r,b=!1;if(f){if(l){for(;g;){for(u=t;u=u[g];)if(r?u.nodeName.toLowerCase()===_:1===u.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?f.firstChild:f.lastChild],o&&v){for(b=(m=(d=(h=(c=(u=f)[C]||(u[C]={}))[u.uniqueID]||(c[u.uniqueID]={}))[e]||[])[0]===y&&d[1])&&d[2],u=m&&f.childNodes[m];u=++m&&u&&u[g]||(b=m=0)||p.pop();)if(1===u.nodeType&&++b&&u===t){h[e]=[y,m,b];break}}else if(v&&(b=m=(d=(h=(c=(u=t)[C]||(u[C]={}))[u.uniqueID]||(c[u.uniqueID]={}))[e]||[])[0]===y&&d[1]),!1===b)for(;(u=++m&&u&&u[g]||(b=m=0)||p.pop())&&((r?u.nodeName.toLowerCase()!==_:1!==u.nodeType)||!++b||(v&&((h=(c=u[C]||(u[C]={}))[u.uniqueID]||(c[u.uniqueID]={}))[e]=[y,b]),u!==t)););return(b-=n)===s||b%s==0&&0<=b/s}}},PSEUDO:function(e,t){var i,n=s.pseudos[e]||s.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return n[C]?n(t):1<n.length?(i=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?de(function(e,i){for(var s,l=n(e,t),o=l.length;o--;)e[s=E(e,l[o])]=!(i[s]=l[o])}):function(e){return n(e,0,i)}):n}},pseudos:{not:de(function(e){var t=[],i=[],s=r(e.replace($,"$1"));return s[C]?de(function(e,t,i,n){for(var l,o=s(e,null,n,[]),r=e.length;r--;)(l=o[r])&&(e[r]=!(t[r]=l))}):function(e,n,l){return t[0]=e,s(t,null,l,i),t[0]=null,!i.pop()}}),has:de(function(e){return function(t){return 0<re(e,t).length}}),contains:de(function(e){return e=e.replace(te,ie),function(t){return-1<(t.textContent||n(t)).indexOf(e)}}),lang:de(function(e){return G.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,i){return[i<0?i+t:i]}),even:fe(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:fe(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:fe(function(e,t,i){for(var s=i<0?i+t:t<i?t:i;0<=--s;)e.push(s);return e}),gt:fe(function(e,t,i){for(var s=i<0?i+t:i;++s<t;)e.push(s);return e})}}).pseudos.nth=s.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[t]=me(t);for(t in{submit:!0,reset:!0})s.pseudos[t]=pe(t);function ve(){}function be(e){for(var t=0,i=e.length,s="";t<i;t++)s+=e[t].value;return s}function Ce(e,t,i){var s=t.dir,n=t.next,l=n||s,o=i&&"parentNode"===l,r=S++;return t.first?function(t,i,n){for(;t=t[s];)if(1===t.nodeType||o)return e(t,i,n);return!1}:function(t,i,a){var d,h,c,u=[y,r];if(a){for(;t=t[s];)if((1===t.nodeType||o)&&e(t,i,a))return!0}else for(;t=t[s];)if(1===t.nodeType||o)if(h=(c=t[C]||(t[C]={}))[t.uniqueID]||(c[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[s]||t;else{if((d=h[l])&&d[0]===y&&d[1]===r)return u[2]=d[2];if((h[l]=u)[2]=e(t,i,a))return!0}return!1}}function we(e){return 1<e.length?function(t,i,s){for(var n=e.length;n--;)if(!e[n](t,i,s))return!1;return!0}:e[0]}function ye(e,t,i,s,n){for(var l,o=[],r=0,a=e.length,d=null!=t;r<a;r++)(l=e[r])&&(i&&!i(l,s,n)||(o.push(l),d&&t.push(r)));return o}function Se(e,t,i,s,n,l){return s&&!s[C]&&(s=Se(s)),n&&!n[C]&&(n=Se(n,l)),de(function(l,o,r,a){var d,h,c,u=[],m=[],p=o.length,g=l||function(e,t,i){for(var s=0,n=t.length;s<n;s++)re(e,t[s],i);return i}(t||"*",r.nodeType?[r]:r,[]),f=!e||!l&&t?g:ye(g,u,e,r,a),_=i?n||(l?e:p||s)?[]:o:f;if(i&&i(f,_,r,a),s)for(d=ye(_,m),s(d,[],r,a),h=d.length;h--;)(c=d[h])&&(_[m[h]]=!(f[m[h]]=c));if(l){if(n||e){if(n){for(d=[],h=_.length;h--;)(c=_[h])&&d.push(f[h]=c);n(null,_=[],d,a)}for(h=_.length;h--;)(c=_[h])&&-1<(d=n?E(l,c):u[h])&&(l[d]=!(o[d]=c))}}else _=ye(_===o?_.splice(p,_.length):_),n?n(null,o,_,a):F.apply(o,_)})}function xe(e){for(var t,i,n,l=e.length,o=s.relative[e[0].type],r=o||s.relative[" "],a=o?1:0,h=Ce(function(e){return e===t},r,!0),c=Ce(function(e){return-1<E(t,e)},r,!0),u=[function(e,i,s){var n=!o&&(s||i!==d)||((t=i).nodeType?h(e,i,s):c(e,i,s));return t=null,n}];a<l;a++)if(i=s.relative[e[a].type])u=[Ce(we(u),i)];else{if((i=s.filter[e[a].type].apply(null,e[a].matches))[C]){for(n=++a;n<l&&!s.relative[e[n].type];n++);return Se(1<a&&we(u),1<a&&be(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace($,"$1"),i,a<n&&xe(e.slice(a,n)),n<l&&xe(e=e.slice(n)),n<l&&be(e))}u.push(i)}return we(u)}return ve.prototype=s.filters=s.pseudos,s.setFilters=new ve,o=re.tokenize=function(e,t){var i,n,l,o,r,a,d,h=T[e+" "];if(h)return t?0:h.slice(0);for(r=e,a=[],d=s.preFilter;r;){for(o in i&&!(n=B.exec(r))||(n&&(r=r.slice(n[0].length)||r),a.push(l=[])),i=!1,(n=U.exec(r))&&(i=n.shift(),l.push({value:i,type:n[0].replace($," ")}),r=r.slice(i.length)),s.filter)!(n=K[o].exec(r))||d[o]&&!(n=d[o](n))||(i=n.shift(),l.push({value:i,type:o,matches:n}),r=r.slice(i.length));if(!i)break}return t?r.length:r?re.error(e):T(e,a).slice(0)},r=re.compile=function(e,t){var i,n,l,r,a,h,c=[],p=[],f=k[e+" "];if(!f){for(t||(t=o(e)),i=t.length;i--;)(f=xe(t[i]))[C]?c.push(f):p.push(f);(f=k(e,(n=p,r=0<(l=c).length,a=0<n.length,h=function(e,t,i,o,h){var c,p,f,_=0,v="0",b=e&&[],C=[],w=d,S=e||a&&s.find.TAG("*",h),x=y+=null==w?1:Math.random()||.1,T=S.length;for(h&&(d=t==m||t||h);v!==T&&null!=(c=S[v]);v++){if(a&&c){for(p=0,t||c.ownerDocument==m||(u(c),i=!g);f=n[p++];)if(f(c,t||m,i)){o.push(c);break}h&&(y=x)}r&&((c=!f&&c)&&_--,e&&b.push(c))}if(_+=v,r&&v!==_){for(p=0;f=l[p++];)f(b,C,t,i);if(e){if(0<_)for(;v--;)b[v]||C[v]||(C[v]=A.call(o));C=ye(C)}F.apply(o,C),h&&!e&&0<C.length&&1<_+l.length&&re.uniqueSort(o)}return h&&(y=x,d=w),b},r?de(h):h))).selector=e}return f},a=re.select=function(e,t,i,n){var l,a,d,h,c,u="function"==typeof e&&e,m=!n&&o(e=u.selector||e);if(i=i||[],1===m.length){if(2<(a=m[0]=m[0].slice(0)).length&&"ID"===(d=a[0]).type&&9===t.nodeType&&g&&s.relative[a[1].type]){if(!(t=(s.find.ID(d.matches[0].replace(te,ie),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(l=K.needsContext.test(e)?0:a.length;l--&&(d=a[l],!s.relative[h=d.type]);)if((c=s.find[h])&&(n=c(d.matches[0].replace(te,ie),ee.test(a[0].type)&&_e(t.parentNode)||t))){if(a.splice(l,1),!(e=n.length&&be(a)))return F.apply(i,n),i;break}}return(u||r(e,m))(n,t,!g,i,!t||ee.test(e)&&_e(t.parentNode)||t),i},i.sortStable=C.split("").sort(I).join("")===C,i.detectDuplicates=!!c,u(),i.sortDetached=he(function(e){return 1&e.compareDocumentPosition(m.createElement("fieldset"))}),he(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&he(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),he(function(e){return null==e.getAttribute("disabled")})||ce(L,function(e,t,i){var s;if(!i)return!0===e[t]?t.toLowerCase():(s=e.getAttributeNode(t))&&s.specified?s.value:null}),re}(e);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var x=function(e,t,i){for(var s=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&w(e).is(i))break;s.push(e)}return s},T=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},k=w.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,i){return p(t)?w.grep(e,function(e,s){return!!t.call(e,s,e)!==i}):t.nodeType?w.grep(e,function(e){return e===t!==i}):"string"!=typeof t?w.grep(e,function(e){return-1<r.call(t,e)!==i}):w.filter(t,e,i)}w.filter=function(e,t,i){var s=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===s.nodeType?w.find.matchesSelector(s,e)?[s]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,i,s=this.length,n=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<s;t++)if(w.contains(n[t],this))return!0}));for(i=this.pushStack([]),t=0;t<s;t++)w.find(e,n[t],i);return 1<s?w.uniqueSort(i):i},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"==typeof e&&k.test(e)?w(e):e||[],!1).length}});var R,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,i){var s,n;if(!e)return this;if(i=i||R,"string"==typeof e){if(!(s="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:A.exec(e))||!s[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),I.test(s[1])&&w.isPlainObject(t))for(s in t)p(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return(n=f.getElementById(s[2]))&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==i.ready?i.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,R=w(f);var M=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var i,s=0,n=this.length,l=[],o="string"!=typeof e&&w(e);if(!k.test(e))for(;s<n;s++)for(i=this[s];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&w.find.matchesSelector(i,e))){l.push(i);break}return this.pushStack(1<l.length?w.uniqueSort(l):l)},index:function(e){return e?"string"==typeof e?r.call(w(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,i){return x(e,"parentNode",i)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,i){return x(e,"nextSibling",i)},prevUntil:function(e,t,i){return x(e,"previousSibling",i)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(D(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(i,s){var n=w.map(this,t,i);return"Until"!==e.slice(-5)&&(s=i),s&&"string"==typeof s&&(n=w.filter(s,n)),1<this.length&&(F[e]||w.uniqueSort(n),M.test(e)&&n.reverse()),this.pushStack(n)}});var E=/[^\x20\t\r\n\f]+/g;function L(e){return e}function N(e){throw e}function j(e,t,i,s){var n;try{e&&p(n=e.promise)?n.call(e).done(t).fail(i):e&&p(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(s))}catch(e){i.apply(void 0,[e])}}w.Callbacks=function(e){var t,i;e="string"==typeof e?(t=e,i={},w.each(t.match(E)||[],function(e,t){i[t]=!0}),i):w.extend({},e);var s,n,l,o,r=[],a=[],d=-1,h=function(){for(o=o||e.once,l=s=!0;a.length;d=-1)for(n=a.shift();++d<r.length;)!1===r[d].apply(n[0],n[1])&&e.stopOnFalse&&(d=r.length,n=!1);e.memory||(n=!1),s=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!s&&(d=r.length-1,a.push(n)),function t(i){w.each(i,function(i,s){p(s)?e.unique&&c.has(s)||r.push(s):s&&s.length&&"string"!==b(s)&&t(s)})}(arguments),n&&!s&&h()),this},remove:function(){return w.each(arguments,function(e,t){for(var i;-1<(i=w.inArray(t,r,i));)r.splice(i,1),i<=d&&d--}),this},has:function(e){return e?-1<w.inArray(e,r):0<r.length},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=a=[],n||s||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],a.push(t),s||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!l}};return c},w.extend({Deferred:function(t){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],s="pending",n={state:function(){return s},always:function(){return l.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(i,function(i,s){var n=p(e[s[4]])&&e[s[4]];l[s[1]](function(){var e=n&&n.apply(this,arguments);e&&p(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[s[0]+"With"](this,n?[e]:arguments)})}),e=null}).promise()},then:function(t,s,n){var l=0;function o(t,i,s,n){return function(){var r=this,a=arguments,d=function(){var e,d;if(!(t<l)){if((e=s.apply(r,a))===i.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==typeof e||"function"==typeof e)&&e.then,p(d)?n?d.call(e,o(l,i,L,n),o(l,i,N,n)):(l++,d.call(e,o(l,i,L,n),o(l,i,N,n),o(l,i,L,i.notifyWith))):(s!==L&&(r=void 0,a=[e]),(n||i.resolveWith)(r,a))}},h=n?d:function(){try{d()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,h.stackTrace),l<=t+1&&(s!==N&&(r=void 0,a=[e]),i.rejectWith(r,a))}};t?h():(w.Deferred.getStackHook&&(h.stackTrace=w.Deferred.getStackHook()),e.setTimeout(h))}}return w.Deferred(function(e){i[0][3].add(o(0,e,p(n)?n:L,e.notifyWith)),i[1][3].add(o(0,e,p(t)?t:L)),i[2][3].add(o(0,e,p(s)?s:N))}).promise()},promise:function(e){return null!=e?w.extend(e,n):n}},l={};return w.each(i,function(e,t){var o=t[2],r=t[5];n[t[1]]=o.add,r&&o.add(function(){s=r},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),o.add(t[3].fire),l[t[0]]=function(){return l[t[0]+"With"](this===l?void 0:this,arguments),this},l[t[0]+"With"]=o.fireWith}),n.promise(l),t&&t.call(l,l),l},when:function(e){var t=arguments.length,i=t,s=Array(i),l=n.call(arguments),o=w.Deferred(),r=function(e){return function(i){s[e]=this,l[e]=1<arguments.length?n.call(arguments):i,--t||o.resolveWith(s,l)}};if(t<=1&&(j(e,o.done(r(i)).resolve,o.reject,!t),"pending"===o.state()||p(l[i]&&l[i].then)))return o.then();for(;i--;)j(l[i],r(i),o.reject);return o.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&z.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},w.readyException=function(t){e.setTimeout(function(){throw t})};var V=w.Deferred();function H(){f.removeEventListener("DOMContentLoaded",H),e.removeEventListener("load",H),w.ready()}w.fn.ready=function(e){return V.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0)!==e&&0<--w.readyWait||V.resolveWith(f,[w])}}),w.ready.then=V.then,"complete"===f.readyState||"loading"!==f.readyState&&!f.documentElement.doScroll?e.setTimeout(w.ready):(f.addEventListener("DOMContentLoaded",H),e.addEventListener("load",H));var $=function(e,t,i,s,n,l,o){var r=0,a=e.length,d=null==i;if("object"===b(i))for(r in n=!0,i)$(e,t,r,i[r],!0,l,o);else if(void 0!==s&&(n=!0,p(s)||(o=!0),d&&(o?(t.call(e,s),t=null):(d=t,t=function(e,t,i){return d.call(w(e),i)})),t))for(;r<a;r++)t(e[r],i,o?s:s.call(e[r],r,t(e[r],i)));return n?e:d?t.call(e):a?t(e[0],i):l},B=/^-ms-/,U=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function q(e){return e.replace(B,"ms-").replace(U,W)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=w.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var s,n=this.cache(e);if("string"==typeof t)n[q(t)]=i;else for(s in t)n[q(s)]=t[s];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][q(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,s=e[this.expando];if(void 0!==s){if(void 0!==t){i=(t=Array.isArray(t)?t.map(q):(t=q(t))in s?[t]:t.match(E)||[]).length;for(;i--;)delete s[t[i]]}(void 0===t||w.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var Y=new K,Q=new K,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(e,t,i){var s,n;if(void 0===i&&1===e.nodeType)if(s="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(s))){try{i="true"===(n=i)||"false"!==n&&("null"===n?null:n===+n+""?+n:X.test(n)?JSON.parse(n):n)}catch(e){}Q.set(e,t,i)}else i=void 0;return i}w.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,i){return Q.access(e,t,i)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,i){return Y.access(e,t,i)},_removeData:function(e,t){Y.remove(e,t)}}),w.fn.extend({data:function(e,t){var i,s,n,l=this[0],o=l&&l.attributes;if(void 0===e){if(this.length&&(n=Q.get(l),1===l.nodeType&&!Y.get(l,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(s=o[i].name).indexOf("data-")&&(s=q(s.slice(5)),Z(l,s,n[s]));Y.set(l,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each(function(){Q.set(this,e)}):$(this,function(t){var i;if(l&&void 0===t)return void 0!==(i=Q.get(l,e))||void 0!==(i=Z(l,e))?i:void 0;this.each(function(){Q.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),w.extend({queue:function(e,t,i){var s;if(e)return t=(t||"fx")+"queue",s=Y.get(e,t),i&&(!s||Array.isArray(i)?s=Y.access(e,t,w.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,t){t=t||"fx";var i=w.queue(e,t),s=i.length,n=i.shift(),l=w._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===t&&i.unshift("inprogress"),delete l.stop,n.call(e,function(){w.dequeue(e,t)},l)),!s&&l&&l.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Y.get(e,i)||Y.access(e,i,{empty:w.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",i])})})}}),w.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?w.queue(this[0],e):void 0===t?this:this.each(function(){var i=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,s=1,n=w.Deferred(),l=this,o=this.length,r=function(){--s||n.resolveWith(l,[l])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=Y.get(l[o],e+"queueHooks"))&&i.empty&&(s++,i.empty.add(r));return r(),n.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],se=f.documentElement,ne=function(e){return w.contains(e.ownerDocument,e)},le={composed:!0};se.getRootNode&&(ne=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var oe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ne(e)&&"none"===w.css(e,"display")};function re(e,t,i,s){var n,l,o=20,r=s?function(){return s.cur()}:function(){return w.css(e,t,"")},a=r(),d=i&&i[3]||(w.cssNumber[t]?"":"px"),h=e.nodeType&&(w.cssNumber[t]||"px"!==d&&+a)&&te.exec(w.css(e,t));if(h&&h[3]!==d){for(a/=2,d=d||h[3],h=+a||1;o--;)w.style(e,t,h+d),(1-l)*(1-(l=r()/a||.5))<=0&&(o=0),h/=l;h*=2,w.style(e,t,h+d),i=i||[]}return i&&(h=+h||+a||0,n=i[1]?h+(i[1]+1)*i[2]:+i[2],s&&(s.unit=d,s.start=h,s.end=n)),n}var ae={};function de(e,t){for(var i,s,n,l,o,r,a,d=[],h=0,c=e.length;h<c;h++)(s=e[h]).style&&(i=s.style.display,t?("none"===i&&(d[h]=Y.get(s,"display")||null,d[h]||(s.style.display="")),""===s.style.display&&oe(s)&&(d[h]=(a=o=l=void 0,o=(n=s).ownerDocument,r=n.nodeName,(a=ae[r])||(l=o.body.appendChild(o.createElement(r)),a=w.css(l,"display"),l.parentNode.removeChild(l),"none"===a&&(a="block"),ae[r]=a)))):"none"!==i&&(d[h]="none",Y.set(s,"display",i)));for(h=0;h<c;h++)null!=d[h]&&(e[h].style.display=d[h]);return e}w.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){oe(this)?w(this).show():w(this).hide()})}});var he,ce,ue=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pe=/^$|^module$|\/(?:java|ecma)script/i;he=f.createDocumentFragment().appendChild(f.createElement("div")),(ce=f.createElement("input")).setAttribute("type","radio"),ce.setAttribute("checked","checked"),ce.setAttribute("name","t"),he.appendChild(ce),m.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",m.option=!!he.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&D(e,t)?w.merge([e],i):i}function _e(e,t){for(var i=0,s=e.length;i<s;i++)Y.set(e[i],"globalEval",!t||Y.get(t[i],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,m.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,t,i,s,n){for(var l,o,r,a,d,h,c=t.createDocumentFragment(),u=[],m=0,p=e.length;m<p;m++)if((l=e[m])||0===l)if("object"===b(l))w.merge(u,l.nodeType?[l]:l);else if(ve.test(l)){for(o=o||c.appendChild(t.createElement("div")),r=(me.exec(l)||["",""])[1].toLowerCase(),a=ge[r]||ge._default,o.innerHTML=a[1]+w.htmlPrefilter(l)+a[2],h=a[0];h--;)o=o.lastChild;w.merge(u,o.childNodes),(o=c.firstChild).textContent=""}else u.push(t.createTextNode(l));for(c.textContent="",m=0;l=u[m++];)if(s&&-1<w.inArray(l,s))n&&n.push(l);else if(d=ne(l),o=fe(c.appendChild(l),"script"),d&&_e(o),i)for(h=0;l=o[h++];)pe.test(l.type||"")&&i.push(l);return c}var Ce=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ye=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function xe(){return!1}function Te(e,t){return e===function(){try{return f.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,i,s,n,l){var o,r;if("object"==typeof t){for(r in"string"!=typeof i&&(s=s||i,i=void 0),t)ke(e,r,i,s,t[r],l);return e}if(null==s&&null==n?(n=i,s=i=void 0):null==n&&("string"==typeof i?(n=s,s=void 0):(n=s,s=i,i=void 0)),!1===n)n=xe;else if(!n)return e;return 1===l&&(o=n,(n=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,n,s,i)})}function De(e,t,i){i?(Y.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var s,l,o=Y.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=n.call(arguments),Y.set(this,t,o),s=i(this,t),this[t](),o!==(l=Y.get(this,t))||s?Y.set(this,t,!1):l={},o!==l)return e.stopImmediatePropagation(),e.preventDefault(),l.value}else o.length&&(Y.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,t)&&w.event.add(e,t,Se)}w.event={global:{},add:function(e,t,i,s,n){var l,o,r,a,d,h,c,u,m,p,g,f=Y.get(e);if(G(e))for(i.handler&&(i=(l=i).handler,n=l.selector),n&&w.find.matchesSelector(se,n),i.guid||(i.guid=w.guid++),(a=f.events)||(a=f.events=Object.create(null)),(o=f.handle)||(o=f.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match(E)||[""]).length;d--;)m=g=(r=ye.exec(t[d])||[])[1],p=(r[2]||"").split(".").sort(),m&&(c=w.event.special[m]||{},m=(n?c.delegateType:c.bindType)||m,c=w.event.special[m]||{},h=w.extend({type:m,origType:g,data:s,handler:i,guid:i.guid,selector:n,needsContext:n&&w.expr.match.needsContext.test(n),namespace:p.join(".")},l),(u=a[m])||((u=a[m]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,s,p,o)||e.addEventListener&&e.addEventListener(m,o)),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),n?u.splice(u.delegateCount++,0,h):u.push(h),w.event.global[m]=!0)},remove:function(e,t,i,s,n){var l,o,r,a,d,h,c,u,m,p,g,f=Y.hasData(e)&&Y.get(e);if(f&&(a=f.events)){for(d=(t=(t||"").match(E)||[""]).length;d--;)if(m=g=(r=ye.exec(t[d])||[])[1],p=(r[2]||"").split(".").sort(),m){for(c=w.event.special[m]||{},u=a[m=(s?c.delegateType:c.bindType)||m]||[],r=r[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=l=u.length;l--;)h=u[l],!n&&g!==h.origType||i&&i.guid!==h.guid||r&&!r.test(h.namespace)||s&&s!==h.selector&&("**"!==s||!h.selector)||(u.splice(l,1),h.selector&&u.delegateCount--,c.remove&&c.remove.call(e,h));o&&!u.length&&(c.teardown&&!1!==c.teardown.call(e,p,f.handle)||w.removeEvent(e,m,f.handle),delete a[m])}else for(m in a)w.event.remove(e,m+t[d],i,s,!0);w.isEmptyObject(a)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,i,s,n,l,o,r=new Array(arguments.length),a=w.event.fix(e),d=(Y.get(this,"events")||Object.create(null))[a.type]||[],h=w.event.special[a.type]||{};for(r[0]=a,t=1;t<arguments.length;t++)r[t]=arguments[t];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(o=w.event.handlers.call(this,a,d),t=0;(n=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,i=0;(l=n.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==l.namespace&&!a.rnamespace.test(l.namespace)||(a.handleObj=l,a.data=l.data,void 0!==(s=((w.event.special[l.origType]||{}).handle||l.handler).apply(n.elem,r))&&!1===(a.result=s)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,s,n,l,o,r=[],a=t.delegateCount,d=e.target;if(a&&d.nodeType&&!("click"===e.type&&1<=e.button))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(l=[],o={},i=0;i<a;i++)void 0===o[n=(s=t[i]).selector+" "]&&(o[n]=s.needsContext?-1<w(n,this).index(d):w.find(n,this,null,[d]).length),o[n]&&l.push(s);l.length&&r.push({elem:d,handlers:l})}return d=this,a<t.length&&r.push({elem:d,handlers:t.slice(a)}),r},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ue.test(t.type)&&t.click&&D(t,"input")&&De(t,"click",Se),!1},trigger:function(e){var t=this||e;return ue.test(t.type)&&t.click&&D(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return ue.test(t.type)&&t.click&&D(t,"input")&&Y.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ce.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return De(this,e,Te),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,s=e.relatedTarget,n=e.handleObj;return s&&(s===this||w.contains(this,s))||(e.type=n.origType,i=n.handler.apply(this,arguments),e.type=t),i}}}),w.fn.extend({on:function(e,t,i,s){return ke(this,e,t,i,s)},one:function(e,t,i,s){return ke(this,e,t,i,s,1)},off:function(e,t,i){var s,n;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,w(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=xe),this.each(function(){w.event.remove(this,e,i,t)})}});var Ie=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return D(e,"table")&&D(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var i,s,n,l,o,r;if(1===t.nodeType){if(Y.hasData(e)&&(r=Y.get(e).events))for(n in Y.remove(t,"handle events"),r)for(i=0,s=r[n].length;i<s;i++)w.event.add(t,n,r[n][i]);Q.hasData(e)&&(l=Q.access(e),o=w.extend({},l),Q.set(t,o))}}function Ee(e,t,i,s){t=l(t);var n,o,r,a,d,h,c=0,u=e.length,g=u-1,f=t[0],_=p(f);if(_||1<u&&"string"==typeof f&&!m.checkClone&&Oe.test(f))return e.each(function(n){var l=e.eq(n);_&&(t[0]=f.call(this,n,l.html())),Ee(l,t,i,s)});if(u&&(o=(n=be(t,e[0].ownerDocument,!1,e,s)).firstChild,1===n.childNodes.length&&(n=o),o||s)){for(a=(r=w.map(fe(n,"script"),Me)).length;c<u;c++)d=n,c!==g&&(d=w.clone(d,!0,!0),a&&w.merge(r,fe(d,"script"))),i.call(e[c],d,c);if(a)for(h=r[r.length-1].ownerDocument,w.map(r,Fe),c=0;c<a;c++)d=r[c],pe.test(d.type||"")&&!Y.access(d,"globalEval")&&w.contains(h,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?w._evalUrl&&!d.noModule&&w._evalUrl(d.src,{nonce:d.nonce||d.getAttribute("nonce")},h):v(d.textContent.replace(Re,""),d,h))}return e}function Le(e,t,i){for(var s,n=t?w.filter(t,e):e,l=0;null!=(s=n[l]);l++)i||1!==s.nodeType||w.cleanData(fe(s)),s.parentNode&&(i&&ne(s)&&_e(fe(s,"script")),s.parentNode.removeChild(s));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var s,n,l,o,r,a,d,h=e.cloneNode(!0),c=ne(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=fe(h),s=0,n=(l=fe(e)).length;s<n;s++)r=l[s],"input"===(d=(a=o[s]).nodeName.toLowerCase())&&ue.test(r.type)?a.checked=r.checked:"input"!==d&&"textarea"!==d||(a.defaultValue=r.defaultValue);if(t)if(i)for(l=l||fe(e),o=o||fe(h),s=0,n=l.length;s<n;s++)Pe(l[s],o[s]);else Pe(e,h);return 0<(o=fe(h,"script")).length&&_e(o,!c&&fe(e,"script")),h},cleanData:function(e){for(var t,i,s,n=w.event.special,l=0;void 0!==(i=e[l]);l++)if(G(i)){if(t=i[Y.expando]){if(t.events)for(s in t.events)n[s]?w.event.remove(i,s):w.removeEvent(i,s,t.handle);i[Y.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return $(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ee(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return Ee(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},i=0,s=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!ge[(me.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;i<s;i++)1===(t=this[i]||{}).nodeType&&(w.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ee(this,arguments,function(t){var i=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(fe(this)),i&&i.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var i,s=[],n=w(e),l=n.length-1,r=0;r<=l;r++)i=r===l?this:this.clone(!0),w(n[r])[t](i),o.apply(s,i.get());return this.pushStack(s)}});var Ne=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),je=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},ze=function(e,t,i){var s,n,l={};for(n in t)l[n]=e.style[n],e.style[n]=t[n];for(n in s=i.call(e),t)e.style[n]=l[n];return s},Ve=new RegExp(ie.join("|"),"i");function He(e,t,i){var s,n,l,o,r=e.style;return(i=i||je(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||ne(e)||(o=w.style(e,t)),!m.pixelBoxStyles()&&Ne.test(o)&&Ve.test(t)&&(s=r.width,n=r.minWidth,l=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=s,r.minWidth=n,r.maxWidth=l)),void 0!==o?o+"":o}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(d).appendChild(h);var t=e.getComputedStyle(h);s="1%"!==t.top,a=12===i(t.marginLeft),h.style.right="60%",o=36===i(t.right),n=36===i(t.width),h.style.position="absolute",l=12===i(h.offsetWidth/3),se.removeChild(d),h=null}}function i(e){return Math.round(parseFloat(e))}var s,n,l,o,r,a,d=f.createElement("div"),h=f.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===h.style.backgroundClip,w.extend(m,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),s},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),l},reliableTrDimensions:function(){var t,i,s,n;return null==r&&(t=f.createElement("table"),i=f.createElement("tr"),s=f.createElement("div"),t.style.cssText="position:absolute;left:-11111px",i.style.height="1px",s.style.height="9px",se.appendChild(t).appendChild(i).appendChild(s),n=e.getComputedStyle(i),r=3<parseInt(n.height),se.removeChild(t)),r}}))}();var Be=["Webkit","Moz","ms"],Ue=f.createElement("div").style,We={};function qe(e){return w.cssProps[e]||We[e]||(e in Ue?e:We[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Be.length;i--;)if((e=Be[i]+t)in Ue)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Xe(e,t,i){var s=te.exec(t);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):t}function Je(e,t,i,s,n,l){var o="width"===t?1:0,r=0,a=0;if(i===(s?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(a+=w.css(e,i+ie[o],!0,n)),s?("content"===i&&(a-=w.css(e,"padding"+ie[o],!0,n)),"margin"!==i&&(a-=w.css(e,"border"+ie[o]+"Width",!0,n))):(a+=w.css(e,"padding"+ie[o],!0,n),"padding"!==i?a+=w.css(e,"border"+ie[o]+"Width",!0,n):r+=w.css(e,"border"+ie[o]+"Width",!0,n));return!s&&0<=l&&(a+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-l-a-r-.5))||0),a}function Ze(e,t,i){var s=je(e),n=(!m.boxSizingReliable()||i)&&"border-box"===w.css(e,"boxSizing",!1,s),l=n,o=He(e,t,s),r="offset"+t[0].toUpperCase()+t.slice(1);if(Ne.test(o)){if(!i)return o;o="auto"}return(!m.boxSizingReliable()&&n||!m.reliableTrDimensions()&&D(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,s))&&e.getClientRects().length&&(n="border-box"===w.css(e,"boxSizing",!1,s),(l=r in e)&&(o=e[r])),(o=parseFloat(o)||0)+Je(e,t,i||(n?"border":"content"),l,s,o)+"px"}function et(e,t,i,s,n){return new et.prototype.init(e,t,i,s,n)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=He(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,l,o,r=q(t),a=Ke.test(t),d=e.style;if(a||(t=qe(r)),o=w.cssHooks[t]||w.cssHooks[r],void 0===i)return o&&"get"in o&&void 0!==(n=o.get(e,!1,s))?n:d[t];"string"==(l=typeof i)&&(n=te.exec(i))&&n[1]&&(i=re(e,t,n),l="number"),null!=i&&i==i&&("number"!==l||a||(i+=n&&n[3]||(w.cssNumber[r]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,s))||(a?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,s){var n,l,o,r=q(t);return Ke.test(t)||(t=qe(r)),(o=w.cssHooks[t]||w.cssHooks[r])&&"get"in o&&(n=o.get(e,!0,i)),void 0===n&&(n=He(e,t,s)),"normal"===n&&t in Qe&&(n=Qe[t]),""===i||i?(l=parseFloat(n),!0===i||isFinite(l)?l||0:n):n}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,i,s){if(i)return!Ge.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,t,s):ze(e,Ye,function(){return Ze(e,t,s)})},set:function(e,i,s){var n,l=je(e),o=!m.scrollboxSize()&&"absolute"===l.position,r=(o||s)&&"border-box"===w.css(e,"boxSizing",!1,l),a=s?Je(e,t,s,r,l):0;return r&&o&&(a-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(l[t])-Je(e,t,"border",!1,l)-.5)),a&&(n=te.exec(i))&&"px"!==(n[3]||"px")&&(e.style[t]=i,i=w.css(e,t)),Xe(0,i,a)}}}),w.cssHooks.marginLeft=$e(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(i){for(var s=0,n={},l="string"==typeof i?i.split(" "):[i];s<4;s++)n[e+ie[s]+t]=l[s]||l[s-2]||l[0];return n}},"margin"!==e&&(w.cssHooks[e+t].set=Xe)}),w.fn.extend({css:function(e,t){return $(this,function(e,t,i){var s,n,l={},o=0;if(Array.isArray(t)){for(s=je(e),n=t.length;o<n;o++)l[t[o]]=w.css(e,t[o],!1,s);return l}return void 0!==i?w.style(e,t,i):w.css(e,t)},e,t,1<arguments.length)}}),((w.Tween=et).prototype={constructor:et,init:function(e,t,i,s,n,l){this.elem=e,this.prop=i,this.easing=n||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=l||(w.cssNumber[i]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,i=et.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[qe(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=et.prototype.init,w.fx.step={};var tt,it,st,nt,lt=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function rt(){it&&(!1===f.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(rt):e.setTimeout(rt,w.fx.interval),w.fx.tick())}function at(){return e.setTimeout(function(){tt=void 0}),tt=Date.now()}function dt(e,t){var i,s=0,n={height:e};for(t=t?1:0;s<4;s+=2-t)n["margin"+(i=ie[s])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function ht(e,t,i){for(var s,n=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),l=0,o=n.length;l<o;l++)if(s=n[l].call(i,t,e))return s}function ct(e,t,i){var s,n,l=0,o=ct.prefilters.length,r=w.Deferred().always(function(){delete a.elem}),a=function(){if(n)return!1;for(var t=tt||at(),i=Math.max(0,d.startTime+d.duration-t),s=1-(i/d.duration||0),l=0,o=d.tweens.length;l<o;l++)d.tweens[l].run(s);return r.notifyWith(e,[d,s,i]),s<1&&o?i:(o||r.notifyWith(e,[d,1,0]),r.resolveWith(e,[d]),!1)},d=r.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:t,originalOptions:i,startTime:tt||at(),duration:i.duration,tweens:[],createTween:function(t,i){var s=w.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(s),s},stop:function(t){var i=0,s=t?d.tweens.length:0;if(n)return this;for(n=!0;i<s;i++)d.tweens[i].run(1);return t?(r.notifyWith(e,[d,1,0]),r.resolveWith(e,[d,t])):r.rejectWith(e,[d,t]),this}}),h=d.props;for(function(e,t){var i,s,n,l,o;for(i in e)if(n=t[s=q(i)],l=e[i],Array.isArray(l)&&(n=l[1],l=e[i]=l[0]),i!==s&&(e[s]=l,delete e[i]),(o=w.cssHooks[s])&&"expand"in o)for(i in l=o.expand(l),delete e[s],l)i in e||(e[i]=l[i],t[i]=n);else t[s]=n}(h,d.opts.specialEasing);l<o;l++)if(s=ct.prefilters[l].call(d,e,h,d.opts))return p(s.stop)&&(w._queueHooks(d.elem,d.opts.queue).stop=s.stop.bind(s)),s;return w.map(h,ht,d),p(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),w.fx.timer(w.extend(a,{elem:e,anim:d,queue:d.opts.queue})),d}w.Animation=w.extend(ct,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return re(i.elem,e,te.exec(t),i),i}]},tweener:function(e,t){p(e)?(t=e,e=["*"]):e=e.match(E);for(var i,s=0,n=e.length;s<n;s++)i=e[s],ct.tweeners[i]=ct.tweeners[i]||[],ct.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var s,n,l,o,r,a,d,h,c="width"in t||"height"in t,u=this,m={},p=e.style,g=e.nodeType&&oe(e),f=Y.get(e,"fxshow");for(s in i.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,r=o.empty.fire,o.empty.fire=function(){o.unqueued||r()}),o.unqueued++,u.always(function(){u.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(n=t[s],lt.test(n)){if(delete t[s],l=l||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!f||void 0===f[s])continue;g=!0}m[s]=f&&f[s]||w.style(e,s)}if((a=!w.isEmptyObject(t))||!w.isEmptyObject(m))for(s in c&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(d=f&&f.display)&&(d=Y.get(e,"display")),"none"===(h=w.css(e,"display"))&&(d?h=d:(de([e],!0),d=e.style.display||d,h=w.css(e,"display"),de([e]))),("inline"===h||"inline-block"===h&&null!=d)&&"none"===w.css(e,"float")&&(a||(u.done(function(){p.display=d}),null==d&&(h=p.display,d="none"===h?"":h)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),a=!1,m)a||(f?"hidden"in f&&(g=f.hidden):f=Y.access(e,"fxshow",{display:d}),l&&(f.hidden=!g),g&&de([e],!0),u.done(function(){for(s in g||de([e]),Y.remove(e,"fxshow"),m)w.style(e,s,m[s])})),a=ht(g?f[s]:0,s,u),s in f||(f[s]=a.start,g&&(a.end=a.start,a.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),w.speed=function(e,t,i){var s=e&&"object"==typeof e?w.extend({},e):{complete:i||!i&&t||p(e)&&e,duration:e,easing:i&&t||t&&!p(t)&&t};return w.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in w.fx.speeds?s.duration=w.fx.speeds[s.duration]:s.duration=w.fx.speeds._default),null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){p(s.old)&&s.old.call(this),s.queue&&w.dequeue(this,s.queue)},s},w.fn.extend({fadeTo:function(e,t,i,s){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(e,t,i,s){var n=w.isEmptyObject(e),l=w.speed(t,i,s),o=function(){var t=ct(this,w.extend({},e),l);(n||Y.get(this,"finish"))&&t.stop(!0)};return o.finish=o,n||!1===l.queue?this.each(o):this.queue(l.queue,o)},stop:function(e,t,i){var s=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",l=w.timers,o=Y.get(this);if(n)o[n]&&o[n].stop&&s(o[n]);else for(n in o)o[n]&&o[n].stop&&ot.test(n)&&s(o[n]);for(n=l.length;n--;)l[n].elem!==this||null!=e&&l[n].queue!==e||(l[n].anim.stop(i),t=!1,l.splice(n,1));!t&&i||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Y.get(this),s=i[e+"queue"],n=i[e+"queueHooks"],l=w.timers,o=s?s.length:0;for(i.finish=!0,w.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=l.length;t--;)l[t].elem===this&&l[t].queue===e&&(l[t].anim.stop(!0),l.splice(t,1));for(t=0;t<o;t++)s[t]&&s[t].finish&&s[t].finish.call(this);delete i.finish})}}),w.each(["toggle","show","hide"],function(e,t){var i=w.fn[t];w.fn[t]=function(e,s,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(dt(t,!0),e,s,n)}}),w.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,i,s){return this.animate(t,e,i,s)}}),w.timers=[],w.fx.tick=function(){var e,t=0,i=w.timers;for(tt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||w.fx.stop(),tt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){it||(it=!0,rt())},w.fx.stop=function(){it=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,i){return t=w.fx&&w.fx.speeds[t]||t,i=i||"fx",this.queue(i,function(i,s){var n=e.setTimeout(i,t);s.stop=function(){e.clearTimeout(n)}})},st=f.createElement("input"),nt=f.createElement("select").appendChild(f.createElement("option")),st.type="checkbox",m.checkOn=""!==st.value,m.optSelected=nt.selected,(st=f.createElement("input")).value="t",st.type="radio",m.radioValue="t"===st.value;var ut,mt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return $(this,w.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,i){var s,n,l=e.nodeType;if(3!==l&&8!==l&&2!==l)return void 0===e.getAttribute?w.prop(e,t,i):(1===l&&w.isXMLDoc(e)||(n=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?ut:void 0)),void 0!==i?null===i?void w.removeAttr(e,t):n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:(e.setAttribute(t,i+""),i):n&&"get"in n&&null!==(s=n.get(e,t))?s:null==(s=w.find.attr(e,t))?void 0:s)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&D(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,s=0,n=t&&t.match(E);if(n&&1===e.nodeType)for(;i=n[s++];)e.removeAttribute(i)}}),ut={set:function(e,t,i){return!1===t?w.removeAttr(e,i):e.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var i=mt[t]||w.find.attr;mt[t]=function(e,t,s){var n,l,o=t.toLowerCase();return s||(l=mt[o],mt[o]=n,n=null!=i(e,t,s)?o:null,mt[o]=l),n}});var pt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function ft(e){return(e.match(E)||[]).join(" ")}function _t(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(E)||[]}w.fn.extend({prop:function(e,t){return $(this,w.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,i){var s,n,l=e.nodeType;if(3!==l&&8!==l&&2!==l)return 1===l&&w.isXMLDoc(e)||(t=w.propFix[t]||t,n=w.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:e[t]=i:n&&"get"in n&&null!==(s=n.get(e,t))?s:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,i,s,n,l,o,r,a=0;if(p(e))return this.each(function(t){w(this).addClass(e.call(this,t,_t(this)))});if((t=vt(e)).length)for(;i=this[a++];)if(n=_t(i),s=1===i.nodeType&&" "+ft(n)+" "){for(o=0;l=t[o++];)s.indexOf(" "+l+" ")<0&&(s+=l+" ");n!==(r=ft(s))&&i.setAttribute("class",r)}return this},removeClass:function(e){var t,i,s,n,l,o,r,a=0;if(p(e))return this.each(function(t){w(this).removeClass(e.call(this,t,_t(this)))});if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;i=this[a++];)if(n=_t(i),s=1===i.nodeType&&" "+ft(n)+" "){for(o=0;l=t[o++];)for(;-1<s.indexOf(" "+l+" ");)s=s.replace(" "+l+" "," ");n!==(r=ft(s))&&i.setAttribute("class",r)}return this},toggleClass:function(e,t){var i=typeof e,s="string"===i||Array.isArray(e);return"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):p(e)?this.each(function(i){w(this).toggleClass(e.call(this,i,_t(this),t),t)}):this.each(function(){var t,n,l,o;if(s)for(n=0,l=w(this),o=vt(e);t=o[n++];)l.hasClass(t)?l.removeClass(t):l.addClass(t);else void 0!==e&&"boolean"!==i||((t=_t(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,i,s=0;for(t=" "+e+" ";i=this[s++];)if(1===i.nodeType&&-1<(" "+ft(_t(i))+" ").indexOf(t))return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,i,s,n=this[0];return arguments.length?(s=p(e),this.each(function(i){var n;1===this.nodeType&&(null==(n=s?e.call(this,i,w(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=w.map(n,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))})):n?(t=w.valHooks[n.type]||w.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(n,"value"))?i:"string"==typeof(i=n.value)?i.replace(bt,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ft(w.text(e))}},select:{get:function(e){var t,i,s,n=e.options,l=e.selectedIndex,o="select-one"===e.type,r=o?null:[],a=o?l+1:n.length;for(s=l<0?a:o?l:0;s<a;s++)if(((i=n[s]).selected||s===l)&&!i.disabled&&(!i.parentNode.disabled||!D(i.parentNode,"optgroup"))){if(t=w(i).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var i,s,n=e.options,l=w.makeArray(t),o=n.length;o--;)((s=n[o]).selected=-1<w.inArray(w.valHooks.option.get(s),l))&&(i=!0);return i||(e.selectedIndex=-1),l}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<w.inArray(w(e).val(),t)}},m.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in e;var Ct=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,i,s,n){var l,o,r,a,d,c,u,m,_=[s||f],v=h.call(t,"type")?t.type:t,b=h.call(t,"namespace")?t.namespace.split("."):[];if(o=m=r=s=s||f,3!==s.nodeType&&8!==s.nodeType&&!Ct.test(v+w.event.triggered)&&(-1<v.indexOf(".")&&(v=(b=v.split(".")).shift(),b.sort()),d=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),i=null==i?[t]:w.makeArray(i,[t]),u=w.event.special[v]||{},n||!u.trigger||!1!==u.trigger.apply(s,i))){if(!n&&!u.noBubble&&!g(s)){for(a=u.delegateType||v,Ct.test(a+v)||(o=o.parentNode);o;o=o.parentNode)_.push(o),r=o;r===(s.ownerDocument||f)&&_.push(r.defaultView||r.parentWindow||e)}for(l=0;(o=_[l++])&&!t.isPropagationStopped();)m=o,t.type=1<l?a:u.bindType||v,(c=(Y.get(o,"events")||Object.create(null))[t.type]&&Y.get(o,"handle"))&&c.apply(o,i),(c=d&&o[d])&&c.apply&&G(o)&&(t.result=c.apply(o,i),!1===t.result&&t.preventDefault());return t.type=v,n||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(_.pop(),i)||!G(s)||d&&p(s[v])&&!g(s)&&((r=s[d])&&(s[d]=null),w.event.triggered=v,t.isPropagationStopped()&&m.addEventListener(v,wt),s[v](),t.isPropagationStopped()&&m.removeEventListener(v,wt),w.event.triggered=void 0,r&&(s[d]=r)),t.result}},simulate:function(e,t,i){var s=w.extend(new w.Event,i,{type:e,isSimulated:!0});w.event.trigger(s,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return w.event.trigger(e,t,i,!0)}}),m.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var s=this.ownerDocument||this.document||this,n=Y.access(s,t);n||s.addEventListener(e,i,!0),Y.access(s,t,(n||0)+1)},teardown:function(){var s=this.ownerDocument||this.document||this,n=Y.access(s,t)-1;n?Y.access(s,t,n):(s.removeEventListener(e,i,!0),Y.remove(s,t))}}});var yt=e.location,St={guid:Date.now()},xt=/\?/;w.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),i};var Tt=/\[\]$/,kt=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,s){var n;if(Array.isArray(t))w.each(t,function(t,n){i||Tt.test(e)?s(e,n):Ot(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,i,s)});else if(i||"object"!==b(t))s(e,t);else for(n in t)Ot(e+"["+n+"]",t[n],i,s)}w.param=function(e,t){var i,s=[],n=function(e,t){var i=p(t)?t():t;s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){n(this.name,this.value)});else for(i in e)Ot(i,e[i],t,n);return s.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&It.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!ue.test(e))}).map(function(e,t){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:i.replace(kt,"\r\n")}}).get()}});var Rt=/%20/g,At=/#.*$/,Mt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Et=/^\/\//,Lt={},Nt={},jt="*/".concat("*"),zt=f.createElement("a");function Vt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var s,n=0,l=t.toLowerCase().match(E)||[];if(p(i))for(;s=l[n++];)"+"===s[0]?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(i)):(e[s]=e[s]||[]).push(i)}}function Ht(e,t,i,s){var n={},l=e===Nt;function o(r){var a;return n[r]=!0,w.each(e[r]||[],function(e,r){var d=r(t,i,s);return"string"!=typeof d||l||n[d]?l?!(a=d):void 0:(t.dataTypes.unshift(d),o(d),!1)}),a}return o(t.dataTypes[0])||!n["*"]&&o("*")}function $t(e,t){var i,s,n=w.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:s||(s={}))[i]=t[i]);return s&&w.extend(!0,e,s),e}zt.href=yt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(yt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,w.ajaxSettings),t):$t(w.ajaxSettings,e)},ajaxPrefilter:Vt(Lt),ajaxTransport:Vt(Nt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var s,n,l,o,r,a,d,h,c,u,m=w.ajaxSetup({},i),p=m.context||m,g=m.context&&(p.nodeType||p.jquery)?w(p):w.event,_=w.Deferred(),v=w.Callbacks("once memory"),b=m.statusCode||{},C={},y={},S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(d){if(!o)for(o={};t=Ft.exec(l);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?l:null},setRequestHeader:function(e,t){return null==d&&(e=y[e.toLowerCase()]=y[e.toLowerCase()]||e,C[e]=t),this},overrideMimeType:function(e){return null==d&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)x.always(e[x.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||S;return s&&s.abort(t),T(0,t),this}};if(_.promise(x),m.url=((t||m.url||yt.href)+"").replace(Et,yt.protocol+"//"),m.type=i.method||i.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(E)||[""],null==m.crossDomain){a=f.createElement("a");try{a.href=m.url,a.href=a.href,m.crossDomain=zt.protocol+"//"+zt.host!=a.protocol+"//"+a.host}catch(t){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=w.param(m.data,m.traditional)),Ht(Lt,m,i,x),d)return x;for(c in(h=w.event&&m.global)&&0==w.active++&&w.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Pt.test(m.type),n=m.url.replace(At,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Rt,"+")):(u=m.url.slice(n.length),m.data&&(m.processData||"string"==typeof m.data)&&(n+=(xt.test(n)?"&":"?")+m.data,delete m.data),!1===m.cache&&(n=n.replace(Mt,"$1"),u=(xt.test(n)?"&":"?")+"_="+St.guid+++u),m.url=n+u),m.ifModified&&(w.lastModified[n]&&x.setRequestHeader("If-Modified-Since",w.lastModified[n]),w.etag[n]&&x.setRequestHeader("If-None-Match",w.etag[n])),(m.data&&m.hasContent&&!1!==m.contentType||i.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+jt+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(c,m.headers[c]);if(m.beforeSend&&(!1===m.beforeSend.call(p,x,m)||d))return x.abort();if(S="abort",v.add(m.complete),x.done(m.success),x.fail(m.error),s=Ht(Nt,m,i,x)){if(x.readyState=1,h&&g.trigger("ajaxSend",[x,m]),d)return x;m.async&&0<m.timeout&&(r=e.setTimeout(function(){x.abort("timeout")},m.timeout));try{d=!1,s.send(C,T)}catch(t){if(d)throw t;T(-1,t)}}else T(-1,"No Transport");function T(t,i,o,a){var c,u,f,C,y,S=i;d||(d=!0,r&&e.clearTimeout(r),s=void 0,l=a||"",x.readyState=0<t?4:0,c=200<=t&&t<300||304===t,o&&(C=function(e,t,i){for(var s,n,l,o,r=e.contents,a=e.dataTypes;"*"===a[0];)a.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"));if(s)for(n in r)if(r[n]&&r[n].test(s)){a.unshift(n);break}if(a[0]in i)l=a[0];else{for(n in i){if(!a[0]||e.converters[n+" "+a[0]]){l=n;break}o||(o=n)}l=l||o}if(l)return l!==a[0]&&a.unshift(l),i[l]}(m,x,o)),!c&&-1<w.inArray("script",m.dataTypes)&&(m.converters["text script"]=function(){}),C=function(e,t,i,s){var n,l,o,r,a,d={},h=e.dataTypes.slice();if(h[1])for(o in e.converters)d[o.toLowerCase()]=e.converters[o];for(l=h.shift();l;)if(e.responseFields[l]&&(i[e.responseFields[l]]=t),!a&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=l,l=h.shift())if("*"===l)l=a;else if("*"!==a&&a!==l){if(!(o=d[a+" "+l]||d["* "+l]))for(n in d)if((r=n.split(" "))[1]===l&&(o=d[a+" "+r[0]]||d["* "+r[0]])){!0===o?o=d[n]:!0!==d[n]&&(l=r[0],h.unshift(r[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+a+" to "+l}}}return{state:"success",data:t}}(m,C,x,c),c?(m.ifModified&&((y=x.getResponseHeader("Last-Modified"))&&(w.lastModified[n]=y),(y=x.getResponseHeader("etag"))&&(w.etag[n]=y)),204===t||"HEAD"===m.type?S="nocontent":304===t?S="notmodified":(S=C.state,u=C.data,c=!(f=C.error))):(f=S,!t&&S||(S="error",t<0&&(t=0))),x.status=t,x.statusText=(i||S)+"",c?_.resolveWith(p,[u,S,x]):_.rejectWith(p,[x,S,f]),x.statusCode(b),b=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[x,m,c?u:f]),v.fireWith(p,[x,S]),h&&(g.trigger("ajaxComplete",[x,m]),--w.active||w.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,i){return w.get(e,t,i,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,i,s,n){return p(i)&&(n=n||s,s=i,i=void 0),w.ajax(w.extend({url:e,type:t,dataType:n,data:i,success:s},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,i){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,i)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return p(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=p(e);return this.each(function(i){w(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},Ut=w.ajaxSettings.xhr();m.cors=!!Ut&&"withCredentials"in Ut,m.ajax=Ut=!!Ut,w.ajaxTransport(function(t){var i,s;if(m.cors||Ut&&!t.crossDomain)return{send:function(n,l){var o,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];for(o in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)r.setRequestHeader(o,n[o]);i=function(e){return function(){i&&(i=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?l(0,"error"):l(r.status,r.statusText):l(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),s=r.onerror=r.ontimeout=i("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout(function(){i&&s()})},i=i("abort");try{r.send(t.hasContent&&t.data||null)}catch(n){if(i)throw n}},abort:function(){i&&i()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(s,n){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&n("error"===e.type?404:200,e.type)}),f.head.appendChild(t[0])},abort:function(){i&&i()}}});var Wt,qt=[],Gt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||w.expando+"_"+St.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,i,s){var n,l,o,r=!1!==t.jsonp&&(Gt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=p(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(Gt,"$1"+n):!1!==t.jsonp&&(t.url+=(xt.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||w.error(n+" was not called"),o[0]},t.dataTypes[0]="json",l=e[n],e[n]=function(){o=arguments},s.always(function(){void 0===l?w(e).removeProp(n):e[n]=l,t[n]&&(t.jsonpCallback=i.jsonpCallback,qt.push(n)),o&&p(l)&&l(o[0]),o=l=void 0}),"script"}),m.createHTMLDocument=((Wt=f.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),w.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((s=(t=f.implementation.createHTMLDocument("")).createElement("base")).href=f.location.href,t.head.appendChild(s)):t=f),l=!i&&[],(n=I.exec(e))?[t.createElement(n[1])]:(n=be([e],t,l),l&&l.length&&w(l).remove(),w.merge([],n.childNodes)));var s,n,l},w.fn.load=function(e,t,i){var s,n,l,o=this,r=e.indexOf(" ");return-1<r&&(s=ft(e.slice(r)),e=e.slice(0,r)),p(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),0<o.length&&w.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){l=arguments,o.html(s?w("<div>").append(w.parseHTML(e)).find(s):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,l||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,i){var s,n,l,o,r,a,d=w.css(e,"position"),h=w(e),c={};"static"===d&&(e.style.position="relative"),r=h.offset(),l=w.css(e,"top"),a=w.css(e,"left"),("absolute"===d||"fixed"===d)&&-1<(l+a).indexOf("auto")?(o=(s=h.position()).top,n=s.left):(o=parseFloat(l)||0,n=parseFloat(a)||0),p(t)&&(t=t.call(e,i,w.extend({},r))),null!=t.top&&(c.top=t.top-r.top+o),null!=t.left&&(c.left=t.left-r.left+n),"using"in t?t.using.call(e,c):("number"==typeof c.top&&(c.top+="px"),"number"==typeof c.left&&(c.left+="px"),h.css(c))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,i,s=this[0];return s?s.getClientRects().length?(t=s.getBoundingClientRect(),i=s.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,s=this[0],n={top:0,left:0};if("fixed"===w.css(s,"position"))t=s.getBoundingClientRect();else{for(t=this.offset(),i=s.ownerDocument,e=s.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==s&&1===e.nodeType&&((n=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),n.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-w.css(s,"marginTop",!0),left:t.left-n.left-w.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||se})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;w.fn[e]=function(s){return $(this,function(e,s,n){var l;if(g(e)?l=e:9===e.nodeType&&(l=e.defaultView),void 0===n)return l?l[t]:e[s];l?l.scrollTo(i?l.pageXOffset:n,i?n:l.pageYOffset):e[s]=n},e,s,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=$e(m.pixelPosition,function(e,i){if(i)return i=He(e,t),Ne.test(i)?w(e).position()[t]+"px":i})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,s){w.fn[s]=function(n,l){var o=arguments.length&&(i||"boolean"!=typeof n),r=i||(!0===n||!0===l?"margin":"border");return $(this,function(t,i,n){var l;return g(t)?0===s.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(l=t.documentElement,Math.max(t.body["scroll"+e],l["scroll"+e],t.body["offset"+e],l["offset"+e],l["client"+e])):void 0===n?w.css(t,i,r):w.style(t,i,n,r)},t,o?n:void 0,o)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,i){return 0<arguments.length?this.on(t,null,e,i):this.trigger(t)}});var Kt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var i,s,l;if("string"==typeof t&&(i=e[t],t=e,e=i),p(e))return s=n.call(arguments,2),(l=function(){return e.apply(t||this,s.concat(n.call(arguments)))}).guid=e.guid=e.guid||w.guid++,l},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=D,w.isFunction=p,w.isWindow=g,w.camelCase=q,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Kt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Yt=e.jQuery,Qt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Qt),t&&e.jQuery===w&&(e.jQuery=Yt),w},void 0===t&&(e.jQuery=e.$=w),w}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,s,n){return jQuery.easing[jQuery.easing.def](e,t,i,s,n)},easeInQuad:function(e,t,i,s,n){return s*(t/=n)*t+i},easeOutQuad:function(e,t,i,s,n){return-s*(t/=n)*(t-2)+i},easeInOutQuad:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t+i:-s/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,s,n){return s*(t/=n)*t*t+i},easeOutCubic:function(e,t,i,s,n){return s*((t=t/n-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t*t+i:s/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,s,n){return s*(t/=n)*t*t*t+i},easeOutQuart:function(e,t,i,s,n){return-s*((t=t/n-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t*t*t+i:-s/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,s,n){return s*(t/=n)*t*t*t*t+i},easeOutQuint:function(e,t,i,s,n){return s*((t=t/n-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t*t*t*t+i:s/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,s,n){return-s*Math.cos(t/n*(Math.PI/2))+s+i},easeOutSine:function(e,t,i,s,n){return s*Math.sin(t/n*(Math.PI/2))+i},easeInOutSine:function(e,t,i,s,n){return-s/2*(Math.cos(Math.PI*t/n)-1)+i},easeInExpo:function(e,t,i,s,n){return 0==t?i:s*Math.pow(2,10*(t/n-1))+i},easeOutExpo:function(e,t,i,s,n){return t==n?i+s:s*(1-Math.pow(2,-10*t/n))+i},easeInOutExpo:function(e,t,i,s,n){return 0==t?i:t==n?i+s:(t/=n/2)<1?s/2*Math.pow(2,10*(t-1))+i:s/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,s,n){return-s*(Math.sqrt(1-(t/=n)*t)-1)+i},easeOutCirc:function(e,t,i,s,n){return s*Math.sqrt(1-(t=t/n-1)*t)+i},easeInOutCirc:function(e,t,i,s,n){return(t/=n/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+i:s/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,s,n){e=1.70158;var l=0,o=s;return 0==t?i:1==(t/=n)?i+s:(l||(l=.3*n),o<Math.abs(s)?(o=s,e=l/4):e=l/(2*Math.PI)*Math.asin(s/o),-o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-e)*Math.PI/l)+i)},easeOutElastic:function(e,t,i,s,n){e=1.70158;var l=0,o=s;return 0==t?i:1==(t/=n)?i+s:(l||(l=.3*n),o<Math.abs(s)?(o=s,e=l/4):e=l/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*n-e)*Math.PI/l)+s+i)},easeInOutElastic:function(e,t,i,s,n){e=1.70158;var l=0,o=s;return 0==t?i:2==(t/=n/2)?i+s:(l||(l=.3*n*1.5),o<Math.abs(s)?(o=s,e=l/4):e=l/(2*Math.PI)*Math.asin(s/o),t<1?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-e)*Math.PI/l)+i:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-e)*Math.PI/l)*.5+s+i)},easeInBack:function(e,t,i,s,n,l){return null==l&&(l=1.70158),s*(t/=n)*t*((l+1)*t-l)+i},easeOutBack:function(e,t,i,s,n,l){return null==l&&(l=1.70158),s*((t=t/n-1)*t*((l+1)*t+l)+1)+i},easeInOutBack:function(e,t,i,s,n,l){return null==l&&(l=1.70158),(t/=n/2)<1?s/2*t*t*((1+(l*=1.525))*t-l)+i:s/2*((t-=2)*t*((1+(l*=1.525))*t+l)+2)+i},easeInBounce:function(e,t,i,s,n){return s-jQuery.easing.easeOutBounce(e,n-t,0,s,n)+i},easeOutBounce:function(e,t,i,s,n){return(t/=n)<1/2.75?7.5625*s*t*t+i:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+i:s*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,s,n){return t<n/2?.5*jQuery.easing.easeInBounce(e,2*t,0,s,n)+i:.5*jQuery.easing.easeOutBounce(e,2*t-n,0,s,n)+.5*s+i}}),
/*!
* Globalize
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*/
function(e,t){var i,s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S,x,T;i=function(e){return new i.prototype.init(e)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=i:e.Globalize=i,i.cultures={},i.prototype={constructor:i,init:function(e){return this.cultures=i.cultures,this.cultureSelector=e,this}},i.prototype.init.prototype=i.prototype,i.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},i.cultures.default.calendar=i.cultures.default.calendars.standard,i.cultures.en=i.cultures.default,i.cultureSelector="en",s=/^0x[a-f0-9]+$/i,n=/^[+\-]?infinity$/i,l=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,o=/^\s+|\s+$/g,r=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},d=function(){var e,t,i,s,n,l,o=arguments[0]||{},r=1,a=arguments.length,m=!1;for("boolean"==typeof o&&(m=o,o=arguments[1]||{},r=2),"object"==typeof o||c(o)||(o={});r<a;r++)if(null!=(e=arguments[r]))for(t in e)i=o[t],o!==(s=e[t])&&(m&&s&&(u(s)||(n=h(s)))?(n?(n=!1,l=i&&h(i)?i:[]):l=i&&u(i)?i:{},o[t]=d(m,l,s)):undefined!==s&&(o[t]=s));return o},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"[object Function]"===Object.prototype.toString.call(e)},u=function(e){return"[object Object]"===Object.prototype.toString.call(e)},m=function(e,t){return 0===e.indexOf(t)},p=function(e){return(e+"").replace(o,"")},g=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},f=function(e,t,i){for(var s=e.length;s<t;s+=1)e=i?"0"+e:e+"0";return e},_=function(e,t){for(var i,s=0,n=!1,l=0,o=e.length;l<o;l++)switch(i=e.charAt(l)){case"'":n?t.push("'"):s++,n=!1;break;case"\\":n&&t.push("\\"),n=!n;break;default:t.push(i),n=!1}return s},v=function(e,t){t=t||"F";var i,s=e.patterns,n=t.length;if(1===n){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},b=function(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=D[t-2]+s).substr(i.length-t,t):i=s}function n(){return x||T||(x=I.test(t),T=!0),x}function l(e,t){if(k)return k[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var o,r,a,d,h,c,u,m,p,g=i.calendar,f=g.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?f?o=b(e,g.patterns.F,i):(r=new Date(e.getTime()),a=y(e,g.eras),r.setFullYear(S(e,g,a)),o=r.toLocaleString()):o=e.toString(),o;d=g.eras,h="s"===t,t=v(g,t),o=[];var C,x,T,k,D=["0","00","000"],I=/([^d]|^)(d|dd)([^d]|$)/g,O=0,R=w();for(!h&&f&&(k=f.fromGregorian(e));;){var A=R.lastIndex,M=R.exec(t),F=t.slice(A,M?M.index:t.length);if(O+=_(F,o),!M)break;if(O%2)o.push(M[0]);else switch(u=(c=M[0]).length,c){case"ddd":case"dddd":m=3===u?g.days.namesAbbr:g.days.names,o.push(m[e.getDay()]);break;case"d":case"dd":x=!0,o.push(s(l(e,2),u));break;case"MMM":case"MMMM":p=l(e,1),o.push(g.monthsGenitive&&n()?g.monthsGenitive[3===u?"namesAbbr":"names"][p]:g.months[3===u?"namesAbbr":"names"][p]);break;case"M":case"MM":o.push(s(l(e,1)+1,u));break;case"y":case"yy":case"yyyy":p=k?k[0]:S(e,g,y(e,d),h),u<4&&(p%=100),o.push(s(p,u));break;case"h":case"hh":0===(C=e.getHours()%12)&&(C=12),o.push(s(C,u));break;case"H":case"HH":o.push(s(e.getHours(),u));break;case"m":case"mm":o.push(s(e.getMinutes(),u));break;case"s":case"ss":o.push(s(e.getSeconds(),u));break;case"t":case"tt":p=e.getHours()<12?g.AM?g.AM[0]:" ":g.PM?g.PM[0]:" ",o.push(1===u?p.charAt(0):p);break;case"f":case"ff":case"fff":o.push(s(e.getMilliseconds(),3).substr(0,u));break;case"z":case"zz":C=e.getTimezoneOffset()/60,o.push((C<=0?"+":"-")+s(Math.floor(Math.abs(C)),u));break;case"zzz":C=e.getTimezoneOffset()/60,o.push((C<=0?"+":"-")+s(Math.floor(Math.abs(C)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":g.eras&&o.push(g.eras[y(e,d)].name);break;case"/":o.push(g["/"]);break;default:throw"Invalid date format pattern '"+c+"'."}}return o.join("")},function(){var e;e=function(e,t,i){var s=i.groupSizes,n=s[0],l=1,o=Math.pow(10,t),r=Math.round(e*o)/o;isFinite(r)||(r=e);var a=(e=r)+"",d="",h=a.split(/e/i),c=h.length>1?parseInt(h[1],10):0;h=(a=h[0]).split("."),a=h[0],d=h.length>1?h[1]:"",c>0?(a+=(d=f(d,c,!1)).slice(0,c),d=d.substr(c)):c<0&&(d=(a=f(a,(c=-c)+1,!0)).slice(-c,a.length)+d,a=a.slice(0,-c)),d=t>0?i["."]+(d.length>t?d.slice(0,t):f(d,t)):"";for(var u=a.length-1,m=i[","],p="";u>=0;){if(0===n||n>u)return a.slice(0,u+1)+(p.length?m+p+d:d);p=a.slice(u-n+1,u+1)+(p.length?m+p:""),u-=n,l<s.length&&(n=s[l],l++)}return a.slice(0,u+1)+m+p+d},C=function(t,i,s){var n,l,o,r,a,d;if(!isFinite(t))return t===1/0?s.numberFormat.positiveInfinity:t===-1/0?s.numberFormat.negativeInfinity:s.numberFormat.NaN;if(!i||"i"===i)return s.name.length?t.toLocaleString():t.toString();i=i||"D";var h,c=s.numberFormat,u=Math.abs(t),m=-1;switch(i.length>1&&(m=parseInt(i.slice(1),10)),n=i.charAt(0).toUpperCase()){case"D":h="n",u=g(u),-1!==m&&(u=f(""+u,m,!0)),t<0&&(u="-"+u);break;case"N":l=c;case"C":l=l||c.currency;case"P":l=l||c.percent,h=t<0?l.pattern[0]:l.pattern[1]||"n",-1===m&&(m=l.decimals),u=e(u*("P"===n?100:1),m,l);break;default:throw"Bad number format specifier: "+n}for(o=/n|\$|-|%/g,r="";a=o.lastIndex,d=o.exec(h),r+=h.slice(a,d?d.index:h.length),d;)switch(d[0]){case"n":r+=u;break;case"$":r+=c.currency.symbol;break;case"-":/[1-9]/.test(u)&&(r+=c["-"]);break;case"%":r+=c.percent.symbol}return r}}(),w=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},y=function(e,t){var i,s,n,l;if(!t)return 0;for(s=e.getTime(),n=0,l=t.length;n<l;n++)if(null===(i=t[n].start)||s>=i)return n;return 0},S=function(e,t,i,s){var n=e.getFullYear();return!s&&t.eras&&(n-=t.eras[i].offset),n},function(){var e,t,i,s,n,l,o;e=function(e,t){if(t<100){var i=new Date,s=y(i),n=S(i,e,s),l=e.twoDigitYearMax;(t+=n-n%100)>(l="string"==typeof l?(new Date).getFullYear()%100+parseInt(l,10):l)&&(t-=100)}return t},t=function(e,t,i){var s,n=e.days,a=e._upperDays;return a||(e._upperDays=a=[o(n.names),o(n.namesAbbr),o(n.namesShort)]),t=l(t),i?-1===(s=r(a[1],t))&&(s=r(a[2],t)):s=r(a[0],t),s},i=function(e,t,i){var s,n=e.months,a=e.monthsGenitive||e.months,d=e._upperMonths,h=e._upperMonthsGen;return d||(e._upperMonths=d=[o(n.names),o(n.namesAbbr)],e._upperMonthsGen=h=[o(a.names),o(a.namesAbbr)]),t=l(t),(s=r(i?d[1]:d[0],t))<0&&(s=r(i?h[1]:h[0],t)),s},s=function(e,t){var i,s,n,l,o,r,a=e._parseRegExp;if(a){if(i=a[t])return i}else e._parseRegExp=a={};for(var d,h=v(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],m=0,p=0,g=w();null!==(d=g.exec(h));)if(s=h.slice(m,d.index),m=g.lastIndex,(p+=_(s,c))%2)c.push(d[0]);else{switch(l=(n=d[0]).length,n){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":o="(\\D+)";break;case"tt":case"t":o="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":o="(\\d{"+l+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":o="(\\d\\d?)";break;case"zzz":o="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":o="([+-]?\\d\\d?)";break;case"/":o="(\\/)";break;default:throw"Invalid date format pattern '"+n+"'."}o&&c.push(o),u.push(d[0])}return _(h.slice(m),c),c.push("$"),r={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:u},a[t]=r},n=function(e,t,i){return e<t||e>i},l=function(e){return e.split("Â ").join(" ").toUpperCase()},o=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=l(e[i]);return t},x=function(l,o,r){var a,d,h,c,u,g,f,_,v,b,C,w;l=p(l);var y=r.calendar,S=s(y,o),x=new RegExp(S.regExp).exec(l);if(null===x)return null;var T,k=S.groups,D=null,I=null,O=null,R=null,A=null,M=0,F=0,P=0,E=0,L=null,N=!1;for(a=0,d=k.length;a<d;a++)if(h=x[a+1]){var j=k[a],z=j.length,V=parseInt(h,10);switch(j){case"dd":case"d":if(n(R=V,1,31))return null;break;case"MMM":case"MMMM":if(O=i(y,h,3===z),n(O,0,11))return null;break;case"M":case"MM":if(n(O=V-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(I=z<4?e(y,V):V,n(I,0,9999))return null;break;case"h":case"hh":if(12===(M=V)&&(M=0),n(M,0,11))return null;break;case"H":case"HH":if(n(M=V,0,23))return null;break;case"m":case"mm":if(n(F=V,0,59))return null;break;case"s":case"ss":if(n(P=V,0,59))return null;break;case"tt":case"t":if(!(N=y.PM&&(h===y.PM[0]||h===y.PM[1]||h===y.PM[2]))&&(!y.AM||h!==y.AM[0]&&h!==y.AM[1]&&h!==y.AM[2]))return null;break;case"f":case"ff":case"fff":if(E=V*Math.pow(10,3-z),n(E,0,999))return null;break;case"ddd":case"dddd":if(A=t(y,h,3===z),n(A,0,6))return null;break;case"zzz":if(2!==(c=h.split(/:/)).length||(T=parseInt(c[0],10),n(T,-12,13))||(u=parseInt(c[1],10),n(u,0,59)))return null;L=60*T+(m(h,"-")?-u:u);break;case"z":case"zz":if(n(T=V,-12,13))return null;L=60*T;break;case"g":case"gg":if(!(g=h)||!y.eras)return null;for(g=p(g.toLowerCase()),f=0,_=y.eras.length;f<_;f++)if(g===y.eras[f].name.toLowerCase()){D=f;break}if(null===D)return null}}if(v=new Date,b=(C=y.convert)?C.fromGregorian(v)[0]:v.getFullYear(),null===I?I=b:y.eras&&(I+=y.eras[D||0].offset),null===O&&(O=0),null===R&&(R=1),C){if(null===(v=C.toGregorian(I,O,R)))return null}else if(v.setFullYear(I,O,R),v.getDate()!==R||null!==A&&v.getDay()!==A)return null;return N&&M<12&&(M+=12),v.setHours(M,F,P,E),null!==L&&(w=v.getMinutes()-(L+v.getTimezoneOffset()),v.setHours(v.getHours()+parseInt(w/60,10),w%60)),v}}(),T=function(e,t,i){var s,n=t["-"],l=t["+"];switch(i){case"n -":n=" "+n,l=" "+l;case"n-":a(e,n)?s=["-",e.substr(0,e.length-n.length)]:a(e,l)&&(s=["+",e.substr(0,e.length-l.length)]);break;case"- n":n+=" ",l+=" ";case"-n":m(e,n)?s=["-",e.substr(n.length)]:m(e,l)&&(s=["+",e.substr(l.length)]);break;case"(n)":m(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},i.prototype.findClosestCulture=function(e){return i.findClosestCulture.call(this,e)},i.prototype.format=function(e,t,s){return i.format.call(this,e,t,s)},i.prototype.localize=function(e,t){return i.localize.call(this,e,t)},i.prototype.parseInt=function(e,t,s){return i.parseInt.call(this,e,t,s)},i.prototype.parseFloat=function(e,t,s){return i.parseFloat.call(this,e,t,s)},i.prototype.culture=function(e){return i.culture.call(this,e)},i.addCultureInfo=function(e,t,i){var s={},n=!1;"string"!=typeof e?(i=e,e=this.culture().name,s=this.cultures[e]):"string"!=typeof t?(i=t,n=null==this.cultures[e],s=this.cultures[e]||this.cultures.default):(n=!0,s=this.cultures[t]),this.cultures[e]=d(!0,{},s,i),n&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},i.findClosestCulture=function(e){var t,i,s,n,l,o;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),h(e)){for(var r,a=this.cultures,d=e,c=d.length,u=[],m=0;m<c;m++)s=(e=p(d[m])).split(";"),r=p(s[0]),1===s.length?i=1:0===(e=p(s[1])).indexOf("q=")?(e=e.substr(2),i=parseFloat(e),i=isNaN(i)?0:i):i=1,u.push({lang:r,pri:i});for(u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),m=0;m<c;m++)if(t=a[r=u[m].lang])return t;for(m=0;m<c;m++)for(r=u[m].lang;;){if(-1===(n=r.lastIndexOf("-")))break;if(t=a[r=r.substr(0,n)])return t}for(m=0;m<c;m++)for(l in r=u[m].lang,a)if((o=a[l]).language==r)return o}else if("object"==typeof e)return e;return t||null},i.format=function(e,t,i){var s=this.findClosestCulture(i);return e instanceof Date?e=b(e,t,s):"number"==typeof e&&(e=C(e,t,s)),e},i.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},i.parseDate=function(e,t,i){var s,n,l,o,r,a;if(i=this.findClosestCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(o=0,r=t.length;o<r&&(!(a=t[o])||!(s=x(e,a,i)));o++);}else for(n in l=i.calendar.patterns)if(s=x(e,l[n],i))break;return s||null},i.parseInt=function(e,t,s){return g(i.parseFloat(e,t,s))},i.parseFloat=function(e,t,i){var o,r,a,d,h,c,u,m,g,f,_;"number"!=typeof t&&(i=t,t=10);var v=this.findClosestCulture(i),b=NaN,C=v.numberFormat;if(e.indexOf(v.numberFormat.currency.symbol)>-1&&(e=(e=e.replace(v.numberFormat.currency.symbol,"")).replace(v.numberFormat.currency["."],v.numberFormat["."])),e=p(e),n.test(e))b=parseFloat(e);else if(!t&&s.test(e))b=parseInt(e,16);else{var w=T(e,C,C.pattern[0]),y=w[0],S=w[1];""===y&&"(n)"!==C.pattern[0]&&(y=(w=T(e,C,"(n)"))[0],S=w[1]),""===y&&"-n"!==C.pattern[0]&&(y=(w=T(e,C,"-n"))[0],S=w[1]),y=y||"+",(a=S.indexOf("e"))<0&&(a=S.indexOf("E")),a<0?(r=S,o=null):(r=S.substr(0,a),o=S.substr(a+1)),c=C["."],(u=r.indexOf(c))<0?(d=r,h=null):(d=r.substr(0,u),h=r.substr(u+c.length)),m=C[","],d=d.split(m).join(""),g=m.replace(/\u00A0/g," "),m!==g&&(d=d.split(g).join("")),f=y+d,null!==h&&(f+="."+h),null!==o&&(f+="e"+((_=T(o,C,"-n"))[0]||"+")+_[1]),l.test(f)&&(b=parseFloat(f))}return b},i.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this),function(e){"use strict";e.matchMedia=e.matchMedia||function(e){var t,i=e.documentElement,s=i.firstElementChild||i.firstChild,n=e.createElement("body"),l=e.createElement("div");return l.id="mq-test-1",l.style.cssText="position:absolute;top:-100em",n.style.background="none",n.appendChild(l),function(e){return l.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(n,s),t=42===l.offsetWidth,i.removeChild(n),{matches:t,media:e}}}(e.document)}(this),function(e){"use strict";function t(){b(!0)}var i={};e.respond=i,i.update=function(){};var s=[],n=function(){var t=!1;try{t=new e.XMLHttpRequest}catch(i){t=new e.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}(),l=function(e,t){var i=n();i&&(i.open("GET",e,!0),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||t(i.responseText)},4!==i.readyState&&i.send(null))};if(i.ajax=l,i.queue=s,i.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\([\s]*min\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/,maxw:/\([\s]*max\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/},i.mediaQueriesSupported=e.matchMedia&&null!==e.matchMedia("only all")&&e.matchMedia("only all").matches,!i.mediaQueriesSupported){var o,r,a,d=e.document,h=d.documentElement,c=[],u=[],m=[],p={},g=d.getElementsByTagName("head")[0]||h,f=d.getElementsByTagName("base")[0],_=g.getElementsByTagName("link"),v=function(){var e,t=d.createElement("div"),i=d.body,s=h.style.fontSize,n=i&&i.style.fontSize,l=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",i||((i=l=d.createElement("body")).style.background="none"),h.style.fontSize="100%",i.style.fontSize="100%",i.appendChild(t),l&&h.insertBefore(i,h.firstChild),e=t.offsetWidth,l?h.removeChild(i):i.removeChild(t),h.style.fontSize=s,n&&(i.style.fontSize=n),a=parseFloat(e)},b=function(t){var i="clientWidth",s=h[i],n="CSS1Compat"===d.compatMode&&s||d.body[i]||s,l={},p=_[_.length-1],f=(new Date).getTime();if(t&&o&&30>f-o)return e.clearTimeout(r),void(r=e.setTimeout(b,30));for(var C in o=f,c)if(c.hasOwnProperty(C)){var w=c[C],y=w.minw,S=w.maxw,x=null===y,T=null===S;y&&(y=parseFloat(y)*(y.indexOf("em")>-1?a||v():1)),S&&(S=parseFloat(S)*(S.indexOf("em")>-1?a||v():1)),w.hasquery&&(x&&T||!(x||n>=y)||!(T||S>=n))||(l[w.media]||(l[w.media]=[]),l[w.media].push(u[w.rules]))}for(var k in m)m.hasOwnProperty(k)&&m[k]&&m[k].parentNode===g&&g.removeChild(m[k]);for(var D in m.length=0,l)if(l.hasOwnProperty(D)){var I=d.createElement("style"),O=l[D].join("\n");I.type="text/css",I.media=D,g.insertBefore(I,p.nextSibling),I.styleSheet?I.styleSheet.cssText=O:I.appendChild(d.createTextNode(O)),m.push(I)}},C=function(e,t,s){var n=e.replace(i.regex.keyframes,"").match(i.regex.media),l=n&&n.length||0,o=function(e){return e.replace(i.regex.urls,"$1"+t+"$2$3")},r=!l&&s;(t=t.substring(0,t.lastIndexOf("/"))).length&&(t+="/"),r&&(l=1);for(var a=0;l>a;a++){var d,h,m,p;r?(d=s,u.push(o(e))):(d=n[a].match(i.regex.findStyles)&&RegExp.$1,u.push(RegExp.$2&&o(RegExp.$2))),p=(m=d.split(",")).length;for(var g=0;p>g;g++)h=m[g],c.push({media:h.split("(")[0].match(i.regex.only)&&RegExp.$2||"all",rules:u.length-1,hasquery:h.indexOf("(")>-1,minw:h.match(i.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:h.match(i.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}b()},w=function(){if(s.length){var t=s.shift();l(t.href,function(i){C(i,t.href,t.media),p[t.href]=!0,e.setTimeout(function(){w()},0)})}},y=function(){for(var t=0;t<_.length;t++){var i=_[t],n=i.href,l=i.media,o=i.rel&&"stylesheet"===i.rel.toLowerCase();n&&o&&!p[n]&&(i.styleSheet&&i.styleSheet.rawCssText?(C(i.styleSheet.rawCssText,n,l),p[n]=!0):(!/^([a-zA-Z:]*\/\/)/.test(n)&&!f||n.replace(RegExp.$1,"").split("/")[0]===e.location.host)&&("//"===n.substring(0,2)&&(n=e.location.protocol+n),s.push({href:n,media:l})))}w()};y(),i.update=y,i.getEmValue=v,e.addEventListener?e.addEventListener("resize",t,!1):e.attachEvent&&e.attachEvent("onresize",t)}}(this),
/*! JsRender v1.0pre: http://github.com/BorisMoore/jsrender */
function(e,t,i){"use strict";function s(e,t){t&&t.onError&&!1===t.onError(e)||(this.name="JsRender Error",this.message=e||"JsRender error")}function n(e,t){var i;for(i in e=e||{},t)e[i]=t[i];return e}function l(e,t,i){return(!X.rTag||arguments.length)&&(k=e?e.charAt(0):k,D=e?e.charAt(1):D,I=t?t.charAt(0):I,O=t?t.charAt(1):O,e="\\"+k+"(\\"+(R=i||R)+")?\\"+D,t="\\"+I+"\\"+O,x="(?:(?:(\\w+(?=[\\/\\s\\"+I+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+I+"]|\\"+I+"(?!\\"+O+"))*?)",X.rTag=x+")",x=new RegExp(e+x+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),T=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[k,D,I,O,R]}function o(e,t){t||(t=e,e=i);var s,n,l,o,r=this,a=!t||"root"===t;if(e){if(!(o=r.type===t?r:i))if(s=r.views,r._.useKey){for(n in s)if(o=s[n].get(e,t))break}else for(n=0,l=s.length;!o&&n<l;n++)o=s[n].get(e,t)}else if(a)for(;r.parent.parent;)o=r=r.parent;else for(;r&&!o;)o=r.type===t?r:i,r=r.parent;return o}function r(){var e=this.get("item");return e?e.index:i}function a(e){var t,s=this,l=(s.ctx||{})[e];return(l=l===i?s.getRsc("helpers",e):l)&&"function"==typeof l&&(t=function(){return l.apply(s,arguments)},n(t,l)),t||l}function d(e,t){for(var s=this,n=G[e],l=n&&n[t];l===i&&s;)l=(n=s.tmpl[e])&&n[t],s=s.parent;return l}function h(e,t,s,n,l,h,c,u){var m,p,g,f="array"===t,_={key:0,useKey:f?0:1,id:""+$++,onRender:u,bnds:{}},v={data:n,tmpl:l,content:c,views:f?[]:{},parent:s,ctx:e,type:t,get:o,getIndex:r,getRsc:d,hlp:a,_:_,_is:"view"};return s&&(m=s.views,(p=s._).useKey?(m[_.key="_"+p.useKey++]=v,g=p.tag,_.bnd=f&&(!g||!!g._.bnd&&g)):m.splice(_.key=v.index=h!==i?h:m.length,0,v),v.ctx=e||s.ctx),v}function c(e){var t,i,s,n,l;for(t in q)if((l=(n=q[t]).compile)&&(i=e[t+"s"]))for(s in i)i[s]=l(s,i[s],e,t,n)}function u(e,t){var i,s=J.wrapMap||{},l=n({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:p},t);return t.htmlTag||(i=j.exec(e),l.htmlTag=i?i[1].toLowerCase():""),(i=s[l.htmlTag])&&i!==s.div&&(l.markup=y.trim(l.markup),l._elCnt=!0),l}function m(e,t){var s=e+"s";G[s]=function n(l,o,r){var a,d,h,c;if(l&&""+l!==l&&!l.nodeType&&!l.markup){for(h in l)n(h,l[h],o);return G}return c=r?r[s]=r[s]||{}:n,o===i&&(o=l,l=i),d=t.compile,(a=X.onBeforeStoreItem)&&(d=a(c,l,o,d)||d),l?""+l===l&&(null===o?delete c[l]:c[l]=d?o=d(l,o,r,e,t):o):o=d(i,o),o&&(o._is=e),(a=X.onStoreItem)&&a(c,l,o,d),o},q[e]=t}function p(e,t,s,n,l,o){var r,a,d,c,u,m,p,f,_,v,b,w,S,x=this,T=!x.attr||"html"===x.attr,k="";if(!0===n&&(p=!0,n=0),x.tag?(f=x,v=(x=x.tag)._,w=x.tagName,S=f.tmpl,t=C(t,x.ctx),_=f.content,!1===f.props.link&&((t=t||{}).link=!1),s=s||f.view,e=e===i?s:e):S=x.jquery&&(x[0]||g('Unknown template: "'+x.selector+'"'))||x,S&&(!s&&e&&"view"===e._is&&(s=e),s&&(_=_||s.content,o=o||s._.onRender,e===s&&(e=s.data,l=!0),t=C(t,s.ctx)),s&&s.data!==i||((t=t||{}).root=e),S.fn||(S=K[S]||K(S)),S)){if(b=o=!1!==(t&&t.link)&&T&&o,!0===o&&(b=i,o=s._.onRender),y.isArray(e)&&!l)for(c=p?s:n!==i&&s||h(t,"array",s,e,S,n,_,o),r=0,a=e.length;r<a;r++)u=h(t,"item",c,d=e[r],S,(n||0)+r,_,o),m=S.fn(d,u,G),k+=c._.onRender?c._.onRender(m,u):m;else c=p?s:h(t,w||"data",s,e,S,n,_,o),v&&!x.flow&&(c.tag=x),k+=S.fn(e,c,G);return b?b(k,c):k}return""}function g(e){if(J.debugMode)throw new G.sub.Error(e)}function f(e){g("Syntax error\n"+e)}function _(e,t,i,s){function n(t){(t-=d)&&c.push(e.substr(d,t).replace(F,"\\n"))}function l(t){t&&f('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}var o,r=t&&t.allowCode,a=[],d=0,h=[],c=a,u=[,,,a];return e=e.replace(E,"\\$1"),l(h[0]&&h[0][3].pop()[0]),e.replace(x,function(t,a,m,p,g,_,v,C,w,y,S,x){_&&(g=":",p="html");var T,k,D=a&&[],I="",O="",R="",A=!(y=y||i)&&!g&&!v;m=m||g,n(x),d=x+t.length,C?r&&c.push(["*","\n"+w.replace(P,"$1")+"\n"]):m?("else"===m&&(N.test(w)&&f('for "{{else if expr}}" use "{{else expr}}"'),D=u[6],u[7]=e.substring(u[7],x),u=h.pop(),c=u[3],A=!0),w&&(I=b(w=w.replace(F," "),D).replace(L,function(e,t,i){return t?R+=i+",":O+=i+",",""})),O=O.slice(0,-1),I=I.slice(0,-1),T=O&&O.indexOf("noerror:true")+1&&O||"",o=[m,p||!!s||"",I,A&&[],'params:"'+w+'",props:{'+O+"}"+(R?",ctx:{"+R.slice(0,-1)+"}":""),T,D||0],c.push(o),A&&(h.push(u),(u=o)[7]=d)):S&&(l(S!==(k=u[0])&&"else"!==k&&S),u[7]=e.substring(u[7],x),u=h.pop()),l(!u&&S),c=u[3]}),n(e.length),(d=a[a.length-1])&&l(""+d!==d&&+d[7]===d[7]&&d[0]),v(a,t||e,i)}function v(e,i,s){var n,l,o,r,a,d,h,c,m,p,g,_,b,C,w,y,S,x,T,k,D,I,O,R,A=0,M="",P="",E={},L=e.length;for(""+i===i?(C=s?'data-link="'+i.replace(F," ").slice(1,-1)+'"':i,i=0):(C=i.tmplName||"unnamed",i.allowCode&&(E.allowCode=!0),i.debug&&(E.debug=!0),g=i.bnds,b=i.tmpls),n=0;n<L;n++)if(""+(l=e[n])===l)M+='\nret+="'+l+'";';else if("*"===(o=l[0]))M+=""+l[1];else{if(r=l[1],a=l[2],S=l[3],d=l[4],P=l[5],x=l[7],(D="else"===o)||(A=0,g&&(_=l[6])&&(A=g.push(_))),(I=":"===o)?(r&&(o="html"===r?">":r+o),P&&(P="try{var "+(O="prm"+n)+"=["+a+"][0];}catch(e){"+O+'="";}\n',a=O)):(S&&((w=u(x,E)).tmplName=C+"/"+o,v(S,w),b.push(w)),D||(y=o,k=M,M="",n),T=(T=e[n+1])&&"else"===T[0]),d+=",args:["+a+"]}",I&&_||r&&">"!==o){if((R=new Function("data,view,j,u"," // "+C+" "+A+" "+o+"\n"+P+"return {"+d+";")).paths=_,R._ctxs=o,s)return R;p=!0}if(M+=I?"\n"+(_?"":P)+(s?"return ":"ret+=")+(p?(p=!0,'c("'+r+'",view,'+(_?(g[A-1]=R,A):"{"+d)+");"):">"===o?(c=!0,"h("+a+");"):(m=!0,"(v="+a+")!="+(s?"=":"")+'u?v:"";')):(h=!0,"{tmpl:"+(S?b.length:"0")+","+d+","),y&&!T){if(M="["+M.slice(0,-1)+"]",(s||_)&&(M=new Function("data,view,j,u"," // "+C+" "+A+" "+y+"\nreturn "+M+";"),_&&((g[A-1]=M).paths=_),M._ctxs=o,s))return M;M=k+'\nret+=t("'+y+'",view,this,'+(A||M)+");",_=0,y=0}}M="// "+C+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(m?",v":"")+(h?",t=j._tag":"")+(p?",c=j._cnvt":"")+(c?",h=j.converters.html":"")+(s?";\n":',ret="";\n')+(J.tryCatch?"try{\n":"")+(E.debug?"debugger;":"")+M+(s?"\n":"\nreturn ret;\n")+(J.tryCatch?"\n}catch(e){return j._err(e);}":"");try{M=new Function("data,view,j,u",M)}catch(e){f("Compiled template code:\n\n"+M)}return i&&(i.fn=M),M}function b(e,t){var i,s,n={},l={0:-1},o=0,r=!1,a=!1;return(e+" ").replace(M,function(d,h,c,u,m,p,g,_,v,b,C,w,y,S,x,T,k,D,I){if(m=m||"",c=c||h||C,u=u||_,t&&x&&t.push({_jsvOb:I.slice(l[o-1]+1,D+1)}),v=v||T||"",!p)return a?(a=!w)?d:'"':r?(r=!y)?d:'"':(c?(o++,l[o]=D,c):"")+(k?o?"":i?(i=s=!1,"\b"):",":g?(o&&f(e),i=u,s="~"===u.charAt(0),"\b"+u+":"):u?u.split("^").join(".").replace(A,function(e,i,n,l,o,r,a){if(i&&(t&&!s&&t.push(u),"."!==i)){var d=(n?'view.hlp("'+n+'")':l?"view":"data")+(a?(o?"."+o:n||l?"":"."+i)+(r||""):(a=n?"":l?o||"":i,""));return"view.data"===(d+=a?"."+a:"").slice(0,9)?d.slice(5):d}return e})+(v?(n[++o]=!0,v):m):m||(S?(n[o--]=!1,S+(v?(n[++o]=!0,v):"")):b?(n[o]||f(e),","):h?"":(a=w,r=y,'"')));f(e)})}function C(e,t){return e&&e!==t?t?n(n({},t),e):e:t&&n({},t)}function w(e){return B[e]}if(!(t&&t.views||e.jsviews)){var y,S,x,T,k="{",D="{",I="}",O="}",R="^",A=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,M=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*((\))(?=\s*\.|\s*\^)|\)|\])([([]?))|(\s+)/g,F=/\s*\n/g,P=/\\(['"])/g,E=/([\\'"])/g,L=/\x08(~)?([^\x08]+)\x08/g,N=/^if\s/,j=/<(\w+)[>\s]/,z=/[<"'&]/g,V=/[><"'&]/g,H=0,$=0,B={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;"},U="data-jsv-tmpl",W={},q={template:{compile:function s(n,l,o,r,a,d){function h(i){if(""+i===i||i.nodeType>0){try{p=i.nodeType>0?i:!T.test(i)&&t&&t(e.document).find(i)[0]}catch(e){}return p&&(i=p.getAttribute(U),n=n||i,(i=K[i])||(n=n||"_"+H++,p.setAttribute(U,n),i=K[n]=s(n,p.innerHTML,o,r,a,d))),i}}var m,p;return m=h(l=l||""),(d=d||(l.markup?l:{})).tmplName=n,o&&(d._parentTmpl=o),!m&&l.markup&&(m=h(l.markup))&&m.fn&&(m.debug!==l.debug||m.allowCode!==l.allowCode)&&(m=m.markup),m!==i?(n&&!o&&(W[n]=function(){return l.render.apply(l,arguments)}),m.fn||l.fn?m.fn&&(l=n&&n!==m.tmplName?C(d,m):m):_(m,l=u(m,d)),c(d),l):void 0}},tag:{compile:function(e,t,i){var s,n;return"function"==typeof t?t={depends:t.depends,render:t}:((n=t.template)&&(t.template=""+n===n?K[n]||K(n):n),!1!==t.init&&((s=t.init=t.init||function(){}).prototype=t,(s.prototype=t).constructor=s)),i&&(t._parentTmpl=i),t}},helper:{},converter:{}},G={jsviews:"v1.0pre",render:W,View:h,settings:{delimiters:l,debugMode:!0,tryCatch:!0},sub:{Error:s,tmplFn:_,parse:b,extend:n,error:g,syntaxError:f},_cnvt:function(e,t,i){var s,n,l,o=+i===i&&i,r=t.linkCtx;return o&&(i=(o=t.tmpl.bnds[o-1])(t.data,t,G)),l=i.args[0],(e||o)&&((n=r&&r.tag||{_:{inline:!r},tagName:e+":",flow:!0,_is:"tag"})._.bnd=o,r&&(r.tag=n,n.linkCtx=r,i.ctx=C(i.ctx,r.view.ctx)),n.tagCtx=i,i.view=t,n.ctx=i.ctx||{},delete i.ctx,t._.tag=n,(e="true"!==e&&e)&&((s=t.getRsc("converters",e))||g("Unknown converter: {{"+e+":"))&&(n.depends=s.depends,l=s.apply(n,i.args)),l=o&&t._.onRender?t._.onRender(l,t,o):l),l},_tag:function(e,t,s,l){var o,r,a,d,h,c,u,m,f,_,v,b,w,y="",S=+l===l&&l,x=t.linkCtx||0,T=t.ctx,k=s||t.tmpl,D=t._;for("tag"===e._is&&(e=(r=e).tagName),S&&(l=(b=k.bnds[S-1])(t.data,t,G)),u=l.length,r=r||x.tag,c=0;c<u;c++)v=(f=l[c]).tmpl,v=f.content=v&&k.tmpls[v-1],s=f.props.tmpl,c||s&&r||(w=t.getRsc("tags",e)||g("Unknown tag: {{"+e+"}}")),n(f,{tmpl:s=""+(s=s||!c&&w.template||v)===s?t.getRsc("templates",s)||K(s):s,render:p,index:c,view:t,ctx:C(f.ctx,T)}),r||(w.init?(r=new w.init(f,x,T)).attr=r.attr||w.attr||i:r={render:w.render},r._={inline:!x},x&&(x.attr=r.attr=x.attr||r.attr,x.tag=r,r.linkCtx=x),(r._.bnd=b||x)&&(r._.arrVws={}),r.tagName=e,r.parent=h=T&&T.tag,r._is="tag"),D.tag=r,f.tag=r,r.tagCtxs=l,r.rendering={},r.flow||(a=(_=f.ctx=f.ctx||{}).parentTags=T&&C(_.parentTags,T.parentTags)||{},h&&(a[h.tagName]=h),_.tag=r);for(c=0;c<u;c++)f=r.tagCtx=l[c],r.ctx=f.ctx,(o=r.render)&&(m=o.apply(r,f.args)),y+=m!==i?m:f.tmpl?f.render():"";return delete r.rendering,r.tagCtx=r.tagCtxs[0],r.ctx=r.tagCtx.ctx,r._.inline&&(d=r.attr)&&"html"!==d&&(y="text"===d?Y.html(y):""),S&&t._.onRender?t._.onRender(y,t,S):y},_err:function(e){return J.debugMode?"Error: "+(e.message||e)+". ":""}};for(S in(s.prototype=new Error).constructor=s,r.depends=function(){return[this.get("item"),"index"]},q)m(S,q[S]);var K=G.templates,Y=G.converters,Q=(G.helpers,G.tags),X=G.sub,J=G.settings;t?(y=t).fn.render=p:(y=e.jsviews={}).isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},y.render=W,y.views=G,y.templates=K=G.templates,Q({else:function(){},if:{render:function(e){var t=this;return t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(e,t,i){for(var s,n,l=0;(s=this.tagCtxs[l])&&s.args.length;l++)if(n=!(s=s.args[0])!=!i[l].args[0],s||n)return n;return!1},flow:!0},for:{render:function(e){var t=this,s=t.tagCtx,n=!arguments.length,l="",o=n||0;return t.rendering.done||(n?l=i:e!==i&&(l+=s.render(e),o+=y.isArray(e)?e.length:1),(t.rendering.done=o)&&(t.selected=s.index)),l},onUpdate:function(){},onArrayChange:function(e,t){var i,s=t.change;if(this.tagCtxs[1]&&("insert"===s&&e.target.length===t.items.length||"remove"===s&&!e.target.length||"refresh"===s&&!t.oldItems.length!=!e.target.length))this.refresh();else for(i in this._.arrVws)(i=this._.arrVws[i]).data===e.target&&i._.onArrayChange.apply(i,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),Y({html:function(e){return e!=i?String(e).replace(V,w):""},attr:function(e){return e!=i?String(e).replace(z,w):null===e?null:""},url:function(e){return e!=i?encodeURI(String(e)):null===e?null:""}}),l()}}(this,this.jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t()}(this,function(){"use strict";const e=new Map,t={set(t,i,s){e.has(t)||e.set(t,new Map);const n=e.get(t);n.has(i)||0===n.size?n.set(i,s):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(t,i)=>e.has(t)&&e.get(t).get(i)||null,remove(t,i){if(!e.has(t))return;const s=e.get(t);s.delete(i),0===s.size&&e.delete(t)}},i="transitionend",s=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),n=e=>{e.dispatchEvent(new Event(i))},l=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),o=e=>l(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(s(e)):null,r=e=>{if(!l(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i)return!1;if(null===t)return!1}return t},a=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),d=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?d(e.parentNode):null},h=()=>{},c=e=>{e.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,m=[],p=()=>"rtl"===document.documentElement.dir,g=e=>{var t;t=()=>{const t=u();if(t){const i=e.NAME,s=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=s,e.jQueryInterface)}},"loading"===document.readyState?(m.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of m)e()}),m.push(t)):t()},f=(e,t=[],i=e)=>"function"==typeof e?e(...t):i,_=(e,t,s=!0)=>{if(!s)return void f(e);const l=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const s=Number.parseFloat(t),n=Number.parseFloat(i);return s||n?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0})(t)+5;let o=!1;const r=({target:s})=>{s===t&&(o=!0,t.removeEventListener(i,r),f(e))};t.addEventListener(i,r),setTimeout(()=>{o||n(t)},l)},v=(e,t,i,s)=>{const n=e.length;let l=e.indexOf(t);return-1===l?!i&&s?e[n-1]:e[0]:(l+=i?1:-1,s&&(l=(l+n)%n),e[Math.max(0,Math.min(l,n-1))])},b=/[^.]*(?=\..*)\.|.*/,C=/\..*/,w=/::\d+$/,y={};let S=1;const x={mouseenter:"mouseover",mouseleave:"mouseout"},T=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function k(e,t){return t&&`${t}::${S++}`||e.uidEvent||S++}function D(e){const t=k(e);return e.uidEvent=t,y[t]=y[t]||{},y[t]}function I(e,t,i=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===i)}function O(e,t,i){const s="string"==typeof t,n=s?i:t||i;let l=F(e);return T.has(l)||(l=e),[s,n,l]}function R(e,t,i,s,n){if("string"!=typeof t||!e)return;let[l,o,r]=O(t,i,s);if(t in x){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o=e(o)}const a=D(e),d=a[r]||(a[r]={}),h=I(d,o,l?i:null);if(h)return void(h.oneOff=h.oneOff&&n);const c=k(o,t.replace(b,"")),u=l?function(e,t,i){return function s(n){const l=e.querySelectorAll(t);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(const r of l)if(r===o)return E(n,{delegateTarget:o}),s.oneOff&&P.off(e,n.type,t,i),i.apply(o,[n])}}(e,i,o):function(e,t){return function i(s){return E(s,{delegateTarget:e}),i.oneOff&&P.off(e,s.type,t),t.apply(e,[s])}}(e,o);u.delegationSelector=l?i:null,u.callable=o,u.oneOff=n,u.uidEvent=c,d[c]=u,e.addEventListener(r,u,l)}function A(e,t,i,s,n){const l=I(t[i],s,n);l&&(e.removeEventListener(i,l,Boolean(n)),delete t[i][l.uidEvent])}function M(e,t,i,s){const n=t[i]||{};for(const[l,o]of Object.entries(n))l.includes(s)&&A(e,t,i,o.callable,o.delegationSelector)}function F(e){return e=e.replace(C,""),x[e]||e}const P={on(e,t,i,s){R(e,t,i,s,!1)},one(e,t,i,s){R(e,t,i,s,!0)},off(e,t,i,s){if("string"!=typeof t||!e)return;const[n,l,o]=O(t,i,s),r=o!==t,a=D(e),d=a[o]||{},h=t.startsWith(".");if(void 0===l){if(h)for(const i of Object.keys(a))M(e,a,i,t.slice(1));for(const[i,s]of Object.entries(d)){const n=i.replace(w,"");r&&!t.includes(n)||A(e,a,o,s.callable,s.delegationSelector)}}else{if(!Object.keys(d).length)return;A(e,a,o,l,n?i:null)}},trigger(e,t,i){if("string"!=typeof t||!e)return null;const s=u();let n=null,l=!0,o=!0,r=!1;t!==F(t)&&s&&(n=s.Event(t,i),s(e).trigger(n),l=!n.isPropagationStopped(),o=!n.isImmediatePropagationStopped(),r=n.isDefaultPrevented());const a=E(new Event(t,{bubbles:l,cancelable:!0}),i);return r&&a.preventDefault(),o&&e.dispatchEvent(a),a.defaultPrevented&&n&&n.preventDefault(),a}};function E(e,t={}){for(const[i,s]of Object.entries(t))try{e[i]=s}catch(t){Object.defineProperty(e,i,{configurable:!0,get:()=>s})}return e}function L(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function N(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const j={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${N(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${N(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const s of i){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=L(e.dataset[s])}return t},getDataAttribute:(e,t)=>L(e.getAttribute(`data-bs-${N(t)}`))};class z{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=l(t)?j.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...l(t)?j.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,n]of Object.entries(t)){const t=e[s],o=l(t)?"element":null==(i=t)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${n}".`)}var i}}class V extends z{constructor(e,i){super(),(e=o(e))&&(this._element=e,this._config=this._getConfig(i),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){_(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(o(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const H=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t?t.split(",").map(e=>s(e)).join(","):null},$={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const i=[];let s=e.parentNode.closest(t);for(;s;)i.push(s),s=s.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!a(e)&&r(e))},getSelectorFromElement(e){const t=H(e);return t&&$.findOne(t)?t:null},getElementFromSelector(e){const t=H(e);return t?$.findOne(t):null},getMultipleElementsFromSelector(e){const t=H(e);return t?$.find(t):[]}},B=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;P.on(document,i,`[data-bs-dismiss="${s}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),a(this))return;const n=$.getElementFromSelector(this)||this.closest(`.${s}`);e.getOrCreateInstance(n)[t]()})},U=".bs.alert",W=`close${U}`,q=`closed${U}`;class G extends V{static get NAME(){return"alert"}close(){if(P.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),P.trigger(this._element,q),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=G.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}B(G,"close"),g(G);const K='[data-bs-toggle="button"]';class Y extends V{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=Y.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}P.on(document,"click.bs.button.data-api",K,e=>{e.preventDefault();const t=e.target.closest(K);Y.getOrCreateInstance(t).toggle()}),g(Y);const Q=".bs.swipe",X=`touchstart${Q}`,J=`touchmove${Q}`,Z=`touchend${Q}`,ee=`pointerdown${Q}`,te=`pointerup${Q}`,ie={endCallback:null,leftCallback:null,rightCallback:null},se={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ne extends z{constructor(e,t){super(),this._element=e,e&&ne.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ie}static get DefaultType(){return se}static get NAME(){return"swipe"}dispose(){P.off(this._element,Q)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),f(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&f(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,ee,e=>this._start(e)),P.on(this._element,te,e=>this._end(e)),this._element.classList.add("pointer-event")):(P.on(this._element,X,e=>this._start(e)),P.on(this._element,J,e=>this._move(e)),P.on(this._element,Z,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const le=".bs.carousel",oe=".data-api",re="next",ae="prev",de="left",he="right",ce=`slide${le}`,ue=`slid${le}`,me=`keydown${le}`,pe=`mouseenter${le}`,ge=`mouseleave${le}`,fe=`dragstart${le}`,_e=`load${le}${oe}`,ve=`click${le}${oe}`,be="carousel",Ce="active",we=".active",ye=".carousel-item",Se=we+ye,xe={ArrowLeft:he,ArrowRight:de},Te={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ke={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class De extends V{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=$.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===be&&this.cycle()}static get Default(){return Te}static get DefaultType(){return ke}static get NAME(){return"carousel"}next(){this._slide(re)}nextWhenVisible(){!document.hidden&&r(this._element)&&this.next()}prev(){this._slide(ae)}pause(){this._isSliding&&n(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,ue,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void P.one(this._element,ue,()=>this.to(e));const i=this._getItemIndex(this._getActive());if(i===e)return;const s=e>i?re:ae;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&P.on(this._element,me,e=>this._keydown(e)),"hover"===this._config.pause&&(P.on(this._element,pe,()=>this.pause()),P.on(this._element,ge,()=>this._maybeEnableCycle())),this._config.touch&&ne.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of $.find(".carousel-item img",this._element))P.on(e,fe,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(de)),rightCallback:()=>this._slide(this._directionToOrder(he)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ne(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=xe[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=$.findOne(we,this._indicatorsElement);t.classList.remove(Ce),t.removeAttribute("aria-current");const i=$.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Ce),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),s=e===re,n=t||v(this._getItems(),i,s,this._config.wrap);if(n===i)return;const l=this._getItemIndex(n),o=t=>P.trigger(this._element,t,{relatedTarget:n,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:l});if(o(ce).defaultPrevented)return;if(!i||!n)return;const r=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(l),this._activeElement=n;const a=s?"carousel-item-start":"carousel-item-end",d=s?"carousel-item-next":"carousel-item-prev";n.classList.add(d),c(n),i.classList.add(a),n.classList.add(a),this._queueCallback(()=>{n.classList.remove(a,d),n.classList.add(Ce),i.classList.remove(Ce,d,a),this._isSliding=!1,o(ue)},i,this._isAnimated()),r&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return $.findOne(Se,this._element)}_getItems(){return $.find(ye,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return p()?e===de?ae:re:e===de?re:ae}_orderToDirection(e){return p()?e===ae?de:he:e===ae?he:de}static jQueryInterface(e){return this.each(function(){const t=De.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}P.on(document,ve,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=$.getElementFromSelector(this);if(!t||!t.classList.contains(be))return;e.preventDefault();const i=De.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");return s?(i.to(s),void i._maybeEnableCycle()):"next"===j.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())}),P.on(window,_e,()=>{const e=$.find('[data-bs-ride="carousel"]');for(const t of e)De.getOrCreateInstance(t)}),g(De);const Ie=".bs.collapse",Oe=`show${Ie}`,Re=`shown${Ie}`,Ae=`hide${Ie}`,Me=`hidden${Ie}`,Fe=`click${Ie}.data-api`,Pe="show",Ee="collapse",Le="collapsing",Ne=`:scope .${Ee} .${Ee}`,je='[data-bs-toggle="collapse"]',ze={parent:null,toggle:!0},Ve={parent:"(null|element)",toggle:"boolean"};class He extends V{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=$.find(je);for(const e of i){const t=$.getSelectorFromElement(e),i=$.find(t).filter(e=>e===this._element);null!==t&&i.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ze}static get DefaultType(){return Ve}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>He.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if(P.trigger(this._element,Oe).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove(Ee),this._element.classList.add(Le),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Le),this._element.classList.add(Ee,Pe),this._element.style[t]="",P.trigger(this._element,Re)},this._element,!0),this._element.style[t]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,Ae).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,c(this._element),this._element.classList.add(Le),this._element.classList.remove(Ee,Pe);for(const e of this._triggerArray){const t=$.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Le),this._element.classList.add(Ee),P.trigger(this._element,Me)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(Pe)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=o(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(je);for(const t of e){const e=$.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=$.find(Ne,this._config.parent);return $.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const i=He.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}})}}P.on(document,Fe,je,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const e of $.getMultipleElementsFromSelector(this))He.getOrCreateInstance(e,{toggle:!1}).toggle()}),g(He);var $e="top",Be="bottom",Ue="right",We="left",qe="auto",Ge=[$e,Be,Ue,We],Ke="start",Ye="end",Qe="clippingParents",Xe="viewport",Je="popper",Ze="reference",et=Ge.reduce(function(e,t){return e.concat([t+"-"+Ke,t+"-"+Ye])},[]),tt=[].concat(Ge,[qe]).reduce(function(e,t){return e.concat([t,t+"-"+Ke,t+"-"+Ye])},[]),it="beforeRead",st="read",nt="afterRead",lt="beforeMain",ot="main",rt="afterMain",at="beforeWrite",dt="write",ht="afterWrite",ct=[it,st,nt,lt,ot,rt,at,dt,ht];function ut(e){return e?(e.nodeName||"").toLowerCase():null}function mt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pt(e){return e instanceof mt(e).Element||e instanceof Element}function gt(e){return e instanceof mt(e).HTMLElement||e instanceof HTMLElement}function ft(e){return"undefined"!=typeof ShadowRoot&&(e instanceof mt(e).ShadowRoot||e instanceof ShadowRoot)}const _t={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},n=t.elements[e];gt(n)&&ut(n)&&(Object.assign(n.style,i),Object.keys(s).forEach(function(e){var t=s[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(e){var s=t.elements[e],n=t.attributes[e]||{},l=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce(function(e,t){return e[t]="",e},{});gt(s)&&ut(s)&&(Object.assign(s.style,l),Object.keys(n).forEach(function(e){s.removeAttribute(e)}))})}},requires:["computeStyles"]};function vt(e){return e.split("-")[0]}var bt=Math.max,Ct=Math.min,wt=Math.round;function yt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function St(){return!/^((?!chrome|android).)*safari/i.test(yt())}function xt(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var s=e.getBoundingClientRect(),n=1,l=1;t&&gt(e)&&(n=e.offsetWidth>0&&wt(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&wt(s.height)/e.offsetHeight||1);var o=(pt(e)?mt(e):window).visualViewport,r=!St()&&i,a=(s.left+(r&&o?o.offsetLeft:0))/n,d=(s.top+(r&&o?o.offsetTop:0))/l,h=s.width/n,c=s.height/l;return{width:h,height:c,top:d,right:a+h,bottom:d+c,left:a,x:a,y:d}}function Tt(e){var t=xt(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function kt(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&ft(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Dt(e){return mt(e).getComputedStyle(e)}function It(e){return["table","td","th"].indexOf(ut(e))>=0}function Ot(e){return((pt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rt(e){return"html"===ut(e)?e:e.assignedSlot||e.parentNode||(ft(e)?e.host:null)||Ot(e)}function At(e){return gt(e)&&"fixed"!==Dt(e).position?e.offsetParent:null}function Mt(e){for(var t=mt(e),i=At(e);i&&It(i)&&"static"===Dt(i).position;)i=At(i);return i&&("html"===ut(i)||"body"===ut(i)&&"static"===Dt(i).position)?t:i||function(e){var t=/firefox/i.test(yt());if(/Trident/i.test(yt())&&gt(e)&&"fixed"===Dt(e).position)return null;var i=Rt(e);for(ft(i)&&(i=i.host);gt(i)&&["html","body"].indexOf(ut(i))<0;){var s=Dt(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(e)||t}function Ft(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Pt(e,t,i){return bt(e,Ct(t,i))}function Et(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Lt(e,t){return t.reduce(function(t,i){return t[i]=e,t},{})}const Nt={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,s=e.name,n=e.options,l=i.elements.arrow,o=i.modifiersData.popperOffsets,r=vt(i.placement),a=Ft(r),d=[We,Ue].indexOf(r)>=0?"height":"width";if(l&&o){var h=function(e,t){return Et("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Lt(e,Ge))}(n.padding,i),c=Tt(l),u="y"===a?$e:We,m="y"===a?Be:Ue,p=i.rects.reference[d]+i.rects.reference[a]-o[a]-i.rects.popper[d],g=o[a]-i.rects.reference[a],f=Mt(l),_=f?"y"===a?f.clientHeight||0:f.clientWidth||0:0,v=p/2-g/2,b=h[u],C=_-c[d]-h[m],w=_/2-c[d]/2+v,y=Pt(b,w,C),S=a;i.modifiersData[s]=((t={})[S]=y,t.centerOffset=y-w,t)}},effect:function(e){var t=e.state,i=e.options.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&kt(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jt(e){return e.split("-")[1]}var zt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(e){var t,i=e.popper,s=e.popperRect,n=e.placement,l=e.variation,o=e.offsets,r=e.position,a=e.gpuAcceleration,d=e.adaptive,h=e.roundOffsets,c=e.isFixed,u=o.x,m=void 0===u?0:u,p=o.y,g=void 0===p?0:p,f="function"==typeof h?h({x:m,y:g}):{x:m,y:g};m=f.x,g=f.y;var _=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),b=We,C=$e,w=window;if(d){var y=Mt(i),S="clientHeight",x="clientWidth";y===mt(i)&&"static"!==Dt(y=Ot(i)).position&&"absolute"===r&&(S="scrollHeight",x="scrollWidth"),(n===$e||(n===We||n===Ue)&&l===Ye)&&(C=Be,g-=(c&&y===w&&w.visualViewport?w.visualViewport.height:y[S])-s.height,g*=a?1:-1),n!==We&&(n!==$e&&n!==Be||l!==Ye)||(b=Ue,m-=(c&&y===w&&w.visualViewport?w.visualViewport.width:y[x])-s.width,m*=a?1:-1)}var T,k=Object.assign({position:r},d&&zt),D=!0===h?function(e,t){var i=e.x,s=e.y,n=t.devicePixelRatio||1;return{x:wt(i*n)/n||0,y:wt(s*n)/n||0}}({x:m,y:g},mt(i)):{x:m,y:g};return m=D.x,g=D.y,a?Object.assign({},k,((T={})[C]=v?"0":"",T[b]=_?"0":"",T.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",T)):Object.assign({},k,((t={})[C]=v?g+"px":"",t[b]=_?m+"px":"",t.transform="",t))}const Ht={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,s=i.gpuAcceleration,n=void 0===s||s,l=i.adaptive,o=void 0===l||l,r=i.roundOffsets,a=void 0===r||r,d={placement:vt(t.placement),variation:jt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Vt(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vt(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var $t={passive:!0};const Bt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,s=e.options,n=s.scroll,l=void 0===n||n,o=s.resize,r=void 0===o||o,a=mt(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return l&&d.forEach(function(e){e.addEventListener("scroll",i.update,$t)}),r&&a.addEventListener("resize",i.update,$t),function(){l&&d.forEach(function(e){e.removeEventListener("scroll",i.update,$t)}),r&&a.removeEventListener("resize",i.update,$t)}},data:{}};var Ut={left:"right",right:"left",bottom:"top",top:"bottom"};function Wt(e){return e.replace(/left|right|bottom|top/g,function(e){return Ut[e]})}var qt={start:"end",end:"start"};function Gt(e){return e.replace(/start|end/g,function(e){return qt[e]})}function Kt(e){var t=mt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Yt(e){return xt(Ot(e)).left+Kt(e).scrollLeft}function Qt(e){var t=Dt(e),i=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+s)}function Xt(e){return["html","body","#document"].indexOf(ut(e))>=0?e.ownerDocument.body:gt(e)&&Qt(e)?e:Xt(Rt(e))}function Jt(e,t){var i;void 0===t&&(t=[]);var s=Xt(e),n=s===(null==(i=e.ownerDocument)?void 0:i.body),l=mt(s),o=n?[l].concat(l.visualViewport||[],Qt(s)?s:[]):s,r=t.concat(o);return n?r:r.concat(Jt(Rt(o)))}function Zt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ei(e,t,i){return t===Xe?Zt(function(e,t){var i=mt(e),s=Ot(e),n=i.visualViewport,l=s.clientWidth,o=s.clientHeight,r=0,a=0;if(n){l=n.width,o=n.height;var d=St();(d||!d&&"fixed"===t)&&(r=n.offsetLeft,a=n.offsetTop)}return{width:l,height:o,x:r+Yt(e),y:a}}(e,i)):pt(t)?function(e,t){var i=xt(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):Zt(function(e){var t,i=Ot(e),s=Kt(e),n=null==(t=e.ownerDocument)?void 0:t.body,l=bt(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=bt(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),r=-s.scrollLeft+Yt(e),a=-s.scrollTop;return"rtl"===Dt(n||i).direction&&(r+=bt(i.clientWidth,n?n.clientWidth:0)-l),{width:l,height:o,x:r,y:a}}(Ot(e)))}function ti(e){var t,i=e.reference,s=e.element,n=e.placement,l=n?vt(n):null,o=n?jt(n):null,r=i.x+i.width/2-s.width/2,a=i.y+i.height/2-s.height/2;switch(l){case $e:t={x:r,y:i.y-s.height};break;case Be:t={x:r,y:i.y+i.height};break;case Ue:t={x:i.x+i.width,y:a};break;case We:t={x:i.x-s.width,y:a};break;default:t={x:i.x,y:i.y}}var d=l?Ft(l):null;if(null!=d){var h="y"===d?"height":"width";switch(o){case Ke:t[d]=t[d]-(i[h]/2-s[h]/2);break;case Ye:t[d]=t[d]+(i[h]/2-s[h]/2)}}return t}function ii(e,t){void 0===t&&(t={});var i=t,s=i.placement,n=void 0===s?e.placement:s,l=i.strategy,o=void 0===l?e.strategy:l,r=i.boundary,a=void 0===r?Qe:r,d=i.rootBoundary,h=void 0===d?Xe:d,c=i.elementContext,u=void 0===c?Je:c,m=i.altBoundary,p=void 0!==m&&m,g=i.padding,f=void 0===g?0:g,_=Et("number"!=typeof f?f:Lt(f,Ge)),v=u===Je?Ze:Je,b=e.rects.popper,C=e.elements[p?v:u],w=function(e,t,i,s){var n="clippingParents"===t?function(e){var t=Jt(Rt(e)),i=["absolute","fixed"].indexOf(Dt(e).position)>=0&&gt(e)?Mt(e):e;return pt(i)?t.filter(function(e){return pt(e)&&kt(e,i)&&"body"!==ut(e)}):[]}(e):[].concat(t),l=[].concat(n,[i]),o=l[0],r=l.reduce(function(t,i){var n=ei(e,i,s);return t.top=bt(n.top,t.top),t.right=Ct(n.right,t.right),t.bottom=Ct(n.bottom,t.bottom),t.left=bt(n.left,t.left),t},ei(e,o,s));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}(pt(C)?C:C.contextElement||Ot(e.elements.popper),a,h,o),y=xt(e.elements.reference),S=ti({reference:y,element:b,strategy:"absolute",placement:n}),x=Zt(Object.assign({},b,S)),T=u===Je?x:y,k={top:w.top-T.top+_.top,bottom:T.bottom-w.bottom+_.bottom,left:w.left-T.left+_.left,right:T.right-w.right+_.right},D=e.modifiersData.offset;if(u===Je&&D){var I=D[n];Object.keys(k).forEach(function(e){var t=[Ue,Be].indexOf(e)>=0?1:-1,i=[$e,Be].indexOf(e)>=0?"y":"x";k[e]+=I[i]*t})}return k}const si={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var n=i.mainAxis,l=void 0===n||n,o=i.altAxis,r=void 0===o||o,a=i.fallbackPlacements,d=i.padding,h=i.boundary,c=i.rootBoundary,u=i.altBoundary,m=i.flipVariations,p=void 0===m||m,g=i.allowedAutoPlacements,f=t.options.placement,_=vt(f),v=a||(_!==f&&p?function(e){if(vt(e)===qe)return[];var t=Wt(e);return[Gt(e),t,Gt(t)]}(f):[Wt(f)]),b=[f].concat(v).reduce(function(e,i){return e.concat(vt(i)===qe?function(e,t){void 0===t&&(t={});var i=t,s=i.placement,n=i.boundary,l=i.rootBoundary,o=i.padding,r=i.flipVariations,a=i.allowedAutoPlacements,d=void 0===a?tt:a,h=jt(s),c=h?r?et:et.filter(function(e){return jt(e)===h}):Ge,u=c.filter(function(e){return d.indexOf(e)>=0});0===u.length&&(u=c);var m=u.reduce(function(t,i){return t[i]=ii(e,{placement:i,boundary:n,rootBoundary:l,padding:o})[vt(i)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}(t,{placement:i,boundary:h,rootBoundary:c,padding:d,flipVariations:p,allowedAutoPlacements:g}):i)},[]),C=t.rects.reference,w=t.rects.popper,y=new Map,S=!0,x=b[0],T=0;T<b.length;T++){var k=b[T],D=vt(k),I=jt(k)===Ke,O=[$e,Be].indexOf(D)>=0,R=O?"width":"height",A=ii(t,{placement:k,boundary:h,rootBoundary:c,altBoundary:u,padding:d}),M=O?I?Ue:We:I?Be:$e;C[R]>w[R]&&(M=Wt(M));var F=Wt(M),P=[];if(l&&P.push(A[D]<=0),r&&P.push(A[M]<=0,A[F]<=0),P.every(function(e){return e})){x=k,S=!1;break}y.set(k,P)}if(S)for(var E=function(e){var t=b.find(function(t){var i=y.get(t);if(i)return i.slice(0,e).every(function(e){return e})});if(t)return x=t,"break"},L=p?3:1;L>0&&"break"!==E(L);L--);t.placement!==x&&(t.modifiersData[s]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ni(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function li(e){return[$e,Ue,Be,We].some(function(t){return e[t]>=0})}const oi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,s=t.rects.reference,n=t.rects.popper,l=t.modifiersData.preventOverflow,o=ii(t,{elementContext:"reference"}),r=ii(t,{altBoundary:!0}),a=ni(o,s),d=ni(r,n,l),h=li(a),c=li(d);t.modifiersData[i]={referenceClippingOffsets:a,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":c})}},ri={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,s=e.name,n=i.offset,l=void 0===n?[0,0]:n,o=tt.reduce(function(e,i){return e[i]=function(e,t,i){var s=vt(e),n=[We,$e].indexOf(s)>=0?-1:1,l="function"==typeof i?i(Object.assign({},t,{placement:e})):i,o=l[0],r=l[1];return o=o||0,r=(r||0)*n,[We,Ue].indexOf(s)>=0?{x:r,y:o}:{x:o,y:r}}(i,t.rects,l),e},{}),r=o[t.placement],a=r.x,d=r.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=a,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}},ai={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=ti({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},di={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name,n=i.mainAxis,l=void 0===n||n,o=i.altAxis,r=void 0!==o&&o,a=i.boundary,d=i.rootBoundary,h=i.altBoundary,c=i.padding,u=i.tether,m=void 0===u||u,p=i.tetherOffset,g=void 0===p?0:p,f=ii(t,{boundary:a,rootBoundary:d,padding:c,altBoundary:h}),_=vt(t.placement),v=jt(t.placement),b=!v,C=Ft(_),w="x"===C?"y":"x",y=t.modifiersData.popperOffsets,S=t.rects.reference,x=t.rects.popper,T="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,k="number"==typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(y){if(l){var O,R="y"===C?$e:We,A="y"===C?Be:Ue,M="y"===C?"height":"width",F=y[C],P=F+f[R],E=F-f[A],L=m?-x[M]/2:0,N=v===Ke?S[M]:x[M],j=v===Ke?-x[M]:-S[M],z=t.elements.arrow,V=m&&z?Tt(z):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},$=H[R],B=H[A],U=Pt(0,S[M],V[M]),W=b?S[M]/2-L-U-$-k.mainAxis:N-U-$-k.mainAxis,q=b?-S[M]/2+L+U+B+k.mainAxis:j+U+B+k.mainAxis,G=t.elements.arrow&&Mt(t.elements.arrow),K=G?"y"===C?G.clientTop||0:G.clientLeft||0:0,Y=null!=(O=null==D?void 0:D[C])?O:0,Q=F+q-Y,X=Pt(m?Ct(P,F+W-Y-K):P,F,m?bt(E,Q):E);y[C]=X,I[C]=X-F}if(r){var J,Z="x"===C?$e:We,ee="x"===C?Be:Ue,te=y[w],ie="y"===w?"height":"width",se=te+f[Z],ne=te-f[ee],le=-1!==[$e,We].indexOf(_),oe=null!=(J=null==D?void 0:D[w])?J:0,re=le?se:te-S[ie]-x[ie]-oe+k.altAxis,ae=le?te+S[ie]+x[ie]-oe-k.altAxis:ne,de=m&&le?function(e,t,i){var s=Pt(e,t,i);return s>i?i:s}(re,te,ae):Pt(m?re:se,te,m?ae:ne);y[w]=de,I[w]=de-te}t.modifiersData[s]=I}},requiresIfExists:["offset"]};function hi(e,t,i){void 0===i&&(i=!1);var s,n,l=gt(t),o=gt(t)&&function(e){var t=e.getBoundingClientRect(),i=wt(t.width)/e.offsetWidth||1,s=wt(t.height)/e.offsetHeight||1;return 1!==i||1!==s}(t),r=Ot(t),a=xt(e,o,i),d={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(l||!l&&!i)&&(("body"!==ut(t)||Qt(r))&&(d=(s=t)!==mt(s)&&gt(s)?{scrollLeft:(n=s).scrollLeft,scrollTop:n.scrollTop}:Kt(s)),gt(t)?((h=xt(t,!0)).x+=t.clientLeft,h.y+=t.clientTop):r&&(h.x=Yt(r))),{x:a.left+d.scrollLeft-h.x,y:a.top+d.scrollTop-h.y,width:a.width,height:a.height}}function ci(e){var t=new Map,i=new Set,s=[];function n(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!i.has(e)){var s=t.get(e);s&&n(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){i.has(e.name)||n(e)}),s}var ui={placement:"bottom",modifiers:[],strategy:"absolute"};function mi(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function pi(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,s=void 0===i?[]:i,n=t.defaultOptions,l=void 0===n?ui:n;return function(e,t,i){void 0===i&&(i=l);var n,o,r={placement:"bottom",orderedModifiers:[],options:Object.assign({},ui,l),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],d=!1,h={state:r,setOptions:function(i){var n="function"==typeof i?i(r.options):i;c(),r.options=Object.assign({},l,r.options,n),r.scrollParents={reference:pt(e)?Jt(e):e.contextElement?Jt(e.contextElement):[],popper:Jt(t)};var o,d,u=function(e){var t=ci(e);return ct.reduce(function(e,i){return e.concat(t.filter(function(e){return e.phase===i}))},[])}((o=[].concat(s,r.options.modifiers),d=o.reduce(function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e},{}),Object.keys(d).map(function(e){return d[e]})));return r.orderedModifiers=u.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.name,i=e.options,s=void 0===i?{}:i,n=e.effect;if("function"==typeof n){var l=n({state:r,name:t,instance:h,options:s});a.push(l||function(){})}}),h.update()},forceUpdate:function(){if(!d){var e=r.elements,t=e.reference,i=e.popper;if(mi(t,i)){r.rects={reference:hi(t,Mt(i),"fixed"===r.options.strategy),popper:Tt(i)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<r.orderedModifiers.length;s++)if(!0!==r.reset){var n=r.orderedModifiers[s],l=n.fn,o=n.options,a=void 0===o?{}:o,c=n.name;"function"==typeof l&&(r=l({state:r,options:a,name:c,instance:h})||r)}else r.reset=!1,s=-1}}},update:(n=function(){return new Promise(function(e){h.forceUpdate(),e(r)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=void 0,e(n())})})),o}),destroy:function(){c(),d=!0}};if(!mi(e,t))return h;function c(){a.forEach(function(e){return e()}),a=[]}return h.setOptions(i).then(function(e){!d&&i.onFirstUpdate&&i.onFirstUpdate(e)}),h}}var gi=pi(),fi=pi({defaultModifiers:[Bt,ai,Ht,_t]}),_i=pi({defaultModifiers:[Bt,ai,Ht,_t,ri,si,di,Nt,oi]});const vi=Object.freeze(Object.defineProperty({__proto__:null,afterMain:rt,afterRead:nt,afterWrite:ht,applyStyles:_t,arrow:Nt,auto:qe,basePlacements:Ge,beforeMain:lt,beforeRead:it,beforeWrite:at,bottom:Be,clippingParents:Qe,computeStyles:Ht,createPopper:_i,createPopperBase:gi,createPopperLite:fi,detectOverflow:ii,end:Ye,eventListeners:Bt,flip:si,hide:oi,left:We,main:ot,modifierPhases:ct,offset:ri,placements:tt,popper:Je,popperGenerator:pi,popperOffsets:ai,preventOverflow:di,read:st,reference:Ze,right:Ue,start:Ke,top:$e,variationPlacements:et,viewport:Xe,write:dt},Symbol.toStringTag,{value:"Module"})),bi="dropdown",Ci=".bs.dropdown",wi=".data-api",yi="ArrowUp",Si="ArrowDown",xi=`hide${Ci}`,Ti=`hidden${Ci}`,ki=`show${Ci}`,Di=`shown${Ci}`,Ii=`click${Ci}${wi}`,Oi=`keydown${Ci}${wi}`,Ri=`keyup${Ci}${wi}`,Ai="show",Mi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Fi=`${Mi}.${Ai}`,Pi=".dropdown-menu",Ei=p()?"top-end":"top-start",Li=p()?"top-start":"top-end",Ni=p()?"bottom-end":"bottom-start",ji=p()?"bottom-start":"bottom-end",zi=p()?"left-start":"right-start",Vi=p()?"right-start":"left-start",Hi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},$i={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Bi extends V{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=$.next(this._element,Pi)[0]||$.prev(this._element,Pi)[0]||$.findOne(Pi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hi}static get DefaultType(){return $i}static get NAME(){return bi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(a(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!P.trigger(this._element,ki,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))P.on(e,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ai),this._element.classList.add(Ai),P.trigger(this._element,Di,e)}}hide(){if(a(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!P.trigger(this._element,xi,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))P.off(e,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ai),this._element.classList.remove(Ai),this._element.setAttribute("aria-expanded","false"),j.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,Ti,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!l(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${bi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===vi)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:l(this._config.reference)?e=o(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=_i(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Ai)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return zi;if(e.classList.contains("dropstart"))return Vi;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Li:Ei:t?ji:Ni}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(j.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...f(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=$.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>r(e));i.length&&v(i,t,e===Si,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=Bi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=$.find(Fi);for(const i of t){const t=Bi.getInstance(i);if(!t||!1===t._config.autoClose)continue;const s=e.composedPath(),n=s.includes(t._menu);if(s.includes(t._element)||"inside"===t._config.autoClose&&!n||"outside"===t._config.autoClose&&n)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:t._element};"click"===e.type&&(l.clickEvent=e),t._completeHide(l)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,s=[yi,Si].includes(e.key);if(!s&&!i)return;if(t&&!i)return;e.preventDefault();const n=this.matches(Mi)?this:$.prev(this,Mi)[0]||$.next(this,Mi)[0]||$.findOne(Mi,e.delegateTarget.parentNode),l=Bi.getOrCreateInstance(n);if(s)return e.stopPropagation(),l.show(),void l._selectMenuItem(e);l._isShown()&&(e.stopPropagation(),l.hide(),n.focus())}}P.on(document,Oi,Mi,Bi.dataApiKeydownHandler),P.on(document,Oi,Pi,Bi.dataApiKeydownHandler),P.on(document,Ii,Bi.clearMenus),P.on(document,Ri,Bi.clearMenus),P.on(document,Ii,Mi,function(e){e.preventDefault(),Bi.getOrCreateInstance(this).toggle()}),g(Bi);const Ui="backdrop",Wi="show",qi=`mousedown.bs.${Ui}`,Gi={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ki={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Yi extends z{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Gi}static get DefaultType(){return Ki}static get NAME(){return Ui}show(e){if(!this._config.isVisible)return void f(e);this._append();const t=this._getElement();this._config.isAnimated&&c(t),t.classList.add(Wi),this._emulateAnimation(()=>{f(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Wi),this._emulateAnimation(()=>{this.dispose(),f(e)})):f(e)}dispose(){this._isAppended&&(P.off(this._element,qi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=o(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),P.on(e,qi,()=>{f(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){_(e,this._getElement(),this._config.isAnimated)}}const Qi=".bs.focustrap",Xi=`focusin${Qi}`,Ji=`keydown.tab${Qi}`,Zi="backward",es={autofocus:!0,trapElement:null},ts={autofocus:"boolean",trapElement:"element"};class is extends z{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return es}static get DefaultType(){return ts}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,Qi),P.on(document,Xi,e=>this._handleFocusin(e)),P.on(document,Ji,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,Qi))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=$.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===Zi?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?Zi:"forward")}}const ss=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ns=".sticky-top",ls="padding-right",os="margin-right";class rs{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ls,t=>t+e),this._setElementAttributes(ss,ls,t=>t+e),this._setElementAttributes(ns,os,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ls),this._resetElementAttributes(ss,ls),this._resetElementAttributes(ns,os)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const s=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const n=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(n))}px`)})}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&j.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const i=j.getDataAttribute(e,t);null!==i?(j.removeDataAttribute(e,t),e.style.setProperty(t,i)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(l(e))t(e);else for(const i of $.find(e,this._element))t(i)}}const as=".bs.modal",ds=`hide${as}`,hs=`hidePrevented${as}`,cs=`hidden${as}`,us=`show${as}`,ms=`shown${as}`,ps=`resize${as}`,gs=`click.dismiss${as}`,fs=`mousedown.dismiss${as}`,_s=`keydown.dismiss${as}`,vs=`click${as}.data-api`,bs="modal-open",Cs="show",ws="modal-static",ys={backdrop:!0,focus:!0,keyboard:!0},Ss={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class xs extends V{constructor(e,t){super(e,t),this._dialog=$.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rs,this._addEventListeners()}static get Default(){return ys}static get DefaultType(){return Ss}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||P.trigger(this._element,us,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,ds).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){P.off(window,as),P.off(this._dialog,as),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Yi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new is({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=$.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),c(this._element),this._element.classList.add(Cs),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,ms,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,_s,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),P.on(window,ps,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),P.on(this._element,fs,e=>{P.one(this._element,gs,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(bs),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,cs)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,hs).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(ws)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(ws),this._queueCallback(()=>{this._element.classList.remove(ws),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=p()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=p()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const i=xs.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}})}}P.on(document,vs,'[data-bs-toggle="modal"]',function(e){const t=$.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),P.one(t,us,e=>{e.defaultPrevented||P.one(t,cs,()=>{r(this)&&this.focus()})});const i=$.findOne(".modal.show");i&&xs.getInstance(i).hide(),xs.getOrCreateInstance(t).toggle(this)}),B(xs),g(xs);const Ts=".bs.offcanvas",ks=".data-api",Ds=`load${Ts}${ks}`,Is="show",Os="showing",Rs="hiding",As=".offcanvas.show",Ms=`show${Ts}`,Fs=`shown${Ts}`,Ps=`hide${Ts}`,Es=`hidePrevented${Ts}`,Ls=`hidden${Ts}`,Ns=`resize${Ts}`,js=`click${Ts}${ks}`,zs=`keydown.dismiss${Ts}`,Vs={backdrop:!0,keyboard:!0,scroll:!1},Hs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class $s extends V{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Vs}static get DefaultType(){return Hs}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||P.trigger(this._element,Ms,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new rs).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Os),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Is),this._element.classList.remove(Os),P.trigger(this._element,Fs,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,Ps).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Rs),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Is,Rs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new rs).reset(),P.trigger(this._element,Ls)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Yi({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():P.trigger(this._element,Es)}:null})}_initializeFocusTrap(){return new is({trapElement:this._element})}_addEventListeners(){P.on(this._element,zs,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():P.trigger(this._element,Es))})}static jQueryInterface(e){return this.each(function(){const t=$s.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}P.on(document,js,'[data-bs-toggle="offcanvas"]',function(e){const t=$.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),a(this))return;P.one(t,Ls,()=>{r(this)&&this.focus()});const i=$.findOne(As);i&&i!==t&&$s.getInstance(i).hide(),$s.getOrCreateInstance(t).toggle(this)}),P.on(window,Ds,()=>{for(const e of $.find(As))$s.getOrCreateInstance(e).show()}),P.on(window,Ns,()=>{for(const e of $.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&$s.getOrCreateInstance(e).hide()}),B($s),g($s);const Bs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Us=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ws=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,qs=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?!Us.has(i)||Boolean(Ws.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(i))},Gs={allowList:Bs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ks={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ys={entry:"(string|element|function|null)",selector:"(string|element)"};class Qs extends z{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Gs}static get DefaultType(){return Ks}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,i]of Object.entries(this._config.content))this._setContent(e,i,t);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},Ys)}_setContent(e,t,i){const s=$.findOne(i,e);s&&((t=this._resolvePossibleFunction(t))?l(t)?this._putElementInTemplate(o(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,i){if(!e.length)return e;if(i&&"function"==typeof i)return i(e);const s=(new window.DOMParser).parseFromString(e,"text/html"),n=[].concat(...s.body.querySelectorAll("*"));for(const e of n){const i=e.nodeName.toLowerCase();if(!Object.keys(t).includes(i)){e.remove();continue}const s=[].concat(...e.attributes),n=[].concat(t["*"]||[],t[i]||[]);for(const t of s)qs(t,n)||e.removeAttribute(t.nodeName)}return s.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return f(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const Xs=new Set(["sanitize","allowList","sanitizeFn"]),Js="fade",Zs="show",en=".modal",tn="hide.bs.modal",sn="hover",nn="focus",ln={AUTO:"auto",TOP:"top",RIGHT:p()?"left":"right",BOTTOM:"bottom",LEFT:p()?"right":"left"},on={allowList:Bs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},rn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class an extends V{constructor(e,t){if(void 0===vi)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return on}static get DefaultType(){return rn}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(en),tn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=P.trigger(this._element,this.constructor.eventName("show")),t=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(Zs),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))P.on(e,"mouseover",h);this._queueCallback(()=>{P.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Zs),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))P.off(e,"mouseover",h);this._activeTrigger.click=!1,this._activeTrigger[nn]=!1,this._activeTrigger[sn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Js,Zs),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(Js),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Qs({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Js)}_isShown(){return this.tip&&this.tip.classList.contains(Zs)}_createPopper(e){const t=f(this._config.placement,[this,e,this._element]),i=ln[t.toUpperCase()];return _i(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return f(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...f(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)P.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{this._initializeOnDelegatedTarget(e).toggle()});else if("manual"!==t){const e=t===sn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=t===sn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?nn:sn]=!0,t._enter()}),P.on(this._element,i,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?nn:sn]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(en),tn,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=j.getDataAttributes(this._element);for(const e of Object.keys(t))Xs.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:o(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=an.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}g(an);const dn={...an.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},hn={...an.DefaultType,content:"(null|string|element|function)"};class cn extends an{static get Default(){return dn}static get DefaultType(){return hn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=cn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}g(cn);const un=".bs.scrollspy",mn=`activate${un}`,pn=`click${un}`,gn=`load${un}.data-api`,fn="active",_n="[href]",vn=".nav-link",bn=`${vn}, .nav-item > ${vn}, .list-group-item`,Cn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},wn={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class yn extends V{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Cn}static get DefaultType(){return wn}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=o(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,pn),P.on(this._config.target,pn,_n,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:s,behavior:"smooth"});i.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},s=(this._rootElement||document.documentElement).scrollTop,n=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const l of e){if(!l.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(l));continue}const e=l.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&e){if(i(l),!s)return}else n||e||i(l)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=$.find(_n,this._config.target);for(const t of e){if(!t.hash||a(t))continue;const e=$.findOne(decodeURI(t.hash),this._element);r(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(fn),this._activateParents(e),P.trigger(this._element,mn,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))$.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(fn);else for(const t of $.parents(e,".nav, .list-group"))for(const e of $.prev(t,bn))e.classList.add(fn)}_clearActiveClass(e){e.classList.remove(fn);const t=$.find(`${_n}.${fn}`,e);for(const e of t)e.classList.remove(fn)}static jQueryInterface(e){return this.each(function(){const t=yn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}P.on(window,gn,()=>{for(const e of $.find('[data-bs-spy="scroll"]'))yn.getOrCreateInstance(e)}),g(yn);const Sn=".bs.tab",xn=`hide${Sn}`,Tn=`hidden${Sn}`,kn=`show${Sn}`,Dn=`shown${Sn}`,In=`click${Sn}`,On=`keydown${Sn}`,Rn=`load${Sn}`,An="ArrowLeft",Mn="ArrowRight",Fn="ArrowUp",Pn="ArrowDown",En="Home",Ln="End",Nn="active",jn="fade",zn="show",Vn=".dropdown-toggle",Hn=`:not(${Vn})`,$n='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Bn=`.nav-link${Hn}, .list-group-item${Hn}, [role="tab"]${Hn}, ${$n}`,Un=`.${Nn}[data-bs-toggle="tab"], .${Nn}[data-bs-toggle="pill"], .${Nn}[data-bs-toggle="list"]`;class Wn extends V{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,On,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?P.trigger(t,xn,{relatedTarget:e}):null;P.trigger(e,kn,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Nn),this._activate($.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),P.trigger(e,Dn,{relatedTarget:t})):e.classList.add(zn)},e,e.classList.contains(jn)))}_deactivate(e,t){e&&(e.classList.remove(Nn),e.blur(),this._deactivate($.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),P.trigger(e,Tn,{relatedTarget:t})):e.classList.remove(zn)},e,e.classList.contains(jn)))}_keydown(e){if(![An,Mn,Fn,Pn,En,Ln].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!a(e));let i;if([En,Ln].includes(e.key))i=t[e.key===En?0:t.length-1];else{const s=[Mn,Pn].includes(e.key);i=v(t,e.target,s,!0)}i&&(i.focus({preventScroll:!0}),Wn.getOrCreateInstance(i).show())}_getChildren(){return $.find(Bn,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=$.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const s=(e,s)=>{const n=$.findOne(e,i);n&&n.classList.toggle(s,t)};s(Vn,Nn),s(".dropdown-menu",zn),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Nn)}_getInnerElement(e){return e.matches(Bn)?e:$.findOne(Bn,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=Wn.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}P.on(document,In,$n,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),a(this)||Wn.getOrCreateInstance(this).show()}),P.on(window,Rn,()=>{for(const e of $.find(Un))Wn.getOrCreateInstance(e)}),g(Wn);const qn=".bs.toast",Gn=`mouseover${qn}`,Kn=`mouseout${qn}`,Yn=`focusin${qn}`,Qn=`focusout${qn}`,Xn=`hide${qn}`,Jn=`hidden${qn}`,Zn=`show${qn}`,el=`shown${qn}`,tl="hide",il="show",sl="showing",nl={animation:"boolean",autohide:"boolean",delay:"number"},ll={animation:!0,autohide:!0,delay:5e3};class ol extends V{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ll}static get DefaultType(){return nl}static get NAME(){return"toast"}show(){P.trigger(this._element,Zn).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(tl),c(this._element),this._element.classList.add(il,sl),this._queueCallback(()=>{this._element.classList.remove(sl),P.trigger(this._element,el),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,Xn).defaultPrevented||(this._element.classList.add(sl),this._queueCallback(()=>{this._element.classList.add(tl),this._element.classList.remove(sl,il),P.trigger(this._element,Jn)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(il),super.dispose()}isShown(){return this._element.classList.contains(il)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,Gn,e=>this._onInteraction(e,!0)),P.on(this._element,Kn,e=>this._onInteraction(e,!1)),P.on(this._element,Yn,e=>this._onInteraction(e,!0)),P.on(this._element,Qn,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=ol.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}return B(ol),g(ol),{Alert:G,Button:Y,Carousel:De,Collapse:He,Dropdown:Bi,Modal:xs,Offcanvas:$s,Popover:cn,ScrollSpy:yn,Tab:Wn,Toast:ol,Tooltip:an}}),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(e){"use strict";var t,i,s,n,l=["sanitize","whiteList","sanitizeFn"],o=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,a=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,d=["title","placeholder"];function h(t,i,s){if(s&&"function"==typeof s)return s(t);for(var n=Object.keys(i),l=0,d=t.length;l<d;l++)for(var h=t[l].querySelectorAll("*"),c=0,u=h.length;c<u;c++){var m=h[c],p=m.nodeName.toLowerCase();if(-1===n.indexOf(p))m.parentNode.removeChild(m);else for(var g=[].slice.call(m.attributes),f=[].concat(i["*"]||[],i[p]||[]),_=0,v=g.length;_<v;_++){var b=g[_];!function(t,i){var s=t.nodeName.toLowerCase();if(-1!==e.inArray(s,i))return-1===e.inArray(s,o)||Boolean(t.nodeValue.match(r)||t.nodeValue.match(a));for(var n=e(i).filter(function(e,t){return t instanceof RegExp}),l=0,d=n.length;l<d;l++)if(s.match(n[l]))return 1}(b,f)&&m.removeAttribute(b.nodeName)}}}function c(e){var t,i={};return d.forEach(function(s){(t=e.attr(s))&&(i[s]=t)}),!i.placeholder&&i.title&&(i.placeholder=i.title),i}if(!("classList"in document.createElement("_"))&&"Element"in(p=window)){var u="classList",m="prototype",p=p.Element[m],g=Object,f=function(){var t=e(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(g.defineProperty){var _={get:f,enumerable:!0,configurable:!0};try{g.defineProperty(p,u,_)}catch(m){void 0!==m.number&&-2146823252!==m.number||(_.enumerable=!1,g.defineProperty(p,u,_))}}else g[m].__defineGetter__&&p.__defineGetter__(u,f)}function v(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==n.call(e))throw new TypeError;var i=t.length,s=String(e),l=s.length,o=((e=(e=1<arguments.length?arguments[1]:void 0)?Number(e):0)!=e&&(e=0),Math.min(Math.max(e,0),i));if(i<l+o)return!1;for(var r=-1;++r<l;)if(t.charCodeAt(o+r)!=s.charCodeAt(r))return!1;return!0}function b(){var e=this.selectpicker.main.data,t=(e=this.options.source.data||this.options.source.search?Object.values(this.selectpicker.optionValuesDataMap):e).filter(function(e){return!(!e.selected||this.options.hideDisabled&&e.disabled)},this);if(this.options.source.data&&!this.multiple&&1<t.length){for(var i=0;i<t.length-1;i++)t[i].selected=!1;t=[t[t.length-1]]}return t}function C(e){for(var t,i=[],s=e||b.call(this),n=0,l=s.length;n<l;n++)(t=s[n]).disabled||i.push(void 0===t.value?t.text:t.value);return this.multiple?i:i.length?i[0]:null}(_=document.createElement("_")).classList.add("c1","c2"),_.classList.contains("c2")||(t=DOMTokenList.prototype.add,i=DOMTokenList.prototype.remove,DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,t.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,i.bind(this))}),_.classList.toggle("c3",!1),_.classList.contains("c3")&&(s=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:s.call(this,e)}),_=null,Object.values="function"==typeof Object.values?Object.values:function(e){return Object.keys(e).map(function(t){return e[t]})},String.prototype.startsWith||(n={}.toString,Object.defineProperty?Object.defineProperty(String.prototype,"startsWith",{value:v,configurable:!0,writable:!0}):String.prototype.startsWith=v);var w={useDefault:!1,_set:e.valHooks.select.set},y=(e.valHooks.select.set=function(t,i){return i&&!w.useDefault&&e(t).data("selected",!0),w._set.apply(this,arguments)},null),S=function(){try{return new Event("change"),!0}catch(e){return!1}}();function x(e,t,i,s){for(var n=["display","subtext","tokens"],l=!1,o=0;o<n.length;o++){var r=n[o],a=e[r];if(a&&(a=a.toString(),"display"===r&&(a=a.replace(/<[^>]+>/g,"")),a=(a=s?R(a):a).toUpperCase(),l="function"==typeof i?i(a,t):"contains"===i?0<=a.indexOf(t):a.startsWith(t)))break}return l}function T(e){return parseInt(e,10)||0}e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent&&(S?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t))};var k={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"},D=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,I=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function O(e){return k[e]}function R(e){return(e=e.toString())&&e.replace(D,O).replace(I,"")}A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g="(?:"+Object.keys(A).join("|")+")",M=RegExp(g),F=RegExp(g,"g");var A,M,F,P=function(e){return M.test(e=null==e?"":""+e)?e.replace(F,E):e};function E(e){return A[e]}var L={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},N=window.Dropdown||bootstrap.Dropdown;function j(){var t;try{t=e.fn.dropdown.Constructor.VERSION}catch(e){t=N.VERSION}return t}var z={success:!1,major:"3"};try{z.full=(j()||"").split(" ")[0].split("."),z.major=z.full[0],z.success=!0}catch(m){}var V=0,H=".bs.select",$={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},B={MENU:"."+$.MENU,DATA_TOGGLE:'data-toggle="dropdown"'},U={div:document.createElement("div"),span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode("Â "),fragment:document.createDocumentFragment(),option:document.createElement("option")},W=(U.selectedOption=U.option.cloneNode(!1),U.selectedOption.setAttribute("selected",!0),U.noResults=U.li.cloneNode(!1),U.noResults.className="no-results",U.a.setAttribute("role","option"),U.a.className="dropdown-item",U.subtext.className="text-muted",U.text=U.span.cloneNode(!1),U.text.className="text",U.checkMark=U.span.cloneNode(!1),new RegExp("38|40")),q=new RegExp("^9$|27"),G={li:function(e,t,i){var s=U.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?s.appendChild(e):s.innerHTML=e),void 0!==t&&""!==t&&(s.className=t),null!=i&&s.classList.add("optgroup-"+i),s},a:function(e,t,i){var s=U.a.cloneNode(!0);return e&&(11===e.nodeType?s.appendChild(e):s.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&s.classList.add.apply(s.classList,t.split(/\s+/)),i&&s.setAttribute("style",i),s},text:function(e,t){var i,s,n=U.text.cloneNode(!1);if(e.content?n.innerHTML=e.content:(n.textContent=e.text,e.icon&&(i=U.whitespace.cloneNode(!1),(s=(!0===t?U.i:U.span).cloneNode(!1)).className=this.options.iconBase+" "+e.icon,U.fragment.appendChild(s),U.fragment.appendChild(i)),e.subtext&&((s=U.subtext.cloneNode(!1)).textContent=e.subtext,n.appendChild(s))),!0===t)for(;0<n.childNodes.length;)U.fragment.appendChild(n.childNodes[0]);else U.fragment.appendChild(n);return U.fragment},label:function(e){var t,i,s=U.text.cloneNode(!1);return s.innerHTML=e.display,e.icon&&(t=U.whitespace.cloneNode(!1),(i=U.span.cloneNode(!1)).className=this.options.iconBase+" "+e.icon,U.fragment.appendChild(i),U.fragment.appendChild(t)),e.subtext&&((i=U.subtext.cloneNode(!1)).textContent=e.subtext,s.appendChild(i)),U.fragment.appendChild(s),U.fragment}},K={fromOption:function(e,t){var i;switch(t){case"divider":i="true"===e.getAttribute("data-divider");break;case"text":i=e.textContent;break;case"label":i=e.label;break;case"style":i=e.style.cssText;break;case"title":i=e.title;break;default:i=e.getAttribute("data-"+t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()}))}return i},fromDataSource:function(e,t){var i;switch(t){case"text":case"label":i=e.text||e.value||"";break;default:i=e[t]}return i}};function Y(e,t){e.length||(U.noResults.innerHTML=this.options.noneResultsText.replace("{0}",'"'+P(t)+'"'),this.$menuInner[0].firstChild.appendChild(U.noResults))}function Q(e){return!(e.hidden||this.options.hideDisabled&&e.disabled)}function X(t,i){var s=this;w.useDefault||(e.valHooks.select.set=w._set,w.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{data:[],optionQueue:U.fragment.cloneNode(!1),hasMore:!1},search:{data:[],hasMore:!1},current:{},view:{},optionValuesDataMap:{},isSearching:!1,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){s.selectpicker.keydown.keyHistory=""},800)}}}},this.sizeInfo={},"number"==typeof(t=this.options.windowPadding)&&(this.options.windowPadding=[t,t,t,t]),this.val=X.prototype.val,this.render=X.prototype.render,this.refresh=X.prototype.refresh,this.setStyle=X.prototype.setStyle,this.selectAll=X.prototype.selectAll,this.deselectAll=X.prototype.deselectAll,this.destroy=X.prototype.destroy,this.remove=X.prototype.remove,this.show=X.prototype.show,this.hide=X.prototype.hide,this.init()}function J(t){var i,s=arguments,n=t;if([].shift.apply(s),!z.success){try{z.full=(j()||"").split(" ")[0].split(".")}catch(t){X.BootstrapVersion?z.full=X.BootstrapVersion.split(" ")[0].split("."):(z.full=[z.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",t))}z.major=z.full[0],z.success=!0}if("4"<=z.major){var o=[];X.DEFAULTS.style===$.BUTTONCLASS&&o.push({name:"style",className:"BUTTONCLASS"}),X.DEFAULTS.iconBase===$.ICONBASE&&o.push({name:"iconBase",className:"ICONBASE"}),X.DEFAULTS.tickIcon===$.TICKICON&&o.push({name:"tickIcon",className:"TICKICON"}),$.DIVIDER="dropdown-divider",$.SHOW="show",$.BUTTONCLASS="btn-light",$.POPOVERHEADER="popover-header",$.ICONBASE="",$.TICKICON="bs-ok-default";for(var r=0;r<o.length;r++)t=o[r],X.DEFAULTS[t.name]=$[t.className]}"4"<z.major&&(B.DATA_TOGGLE='data-bs-toggle="dropdown"');var a=this.each(function(){var t=e(this);if(t.is("select")){var o=t.data("selectpicker"),r="object"==typeof n&&n;if(r.title&&(r.placeholder=r.title),o){if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(o.options[a]=r[a])}else{var d,h=t.data();for(d in h)Object.prototype.hasOwnProperty.call(h,d)&&-1!==e.inArray(d,l)&&delete h[d];var u=e.extend({},X.DEFAULTS,e.fn.selectpicker.defaults||{},c(t),h,r);u.template=e.extend({},X.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},h.template,r.template),u.source=e.extend({},X.DEFAULTS.source,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.source:{},r.source),t.data("selectpicker",o=new X(this,u))}"string"==typeof n&&(i=o[n]instanceof Function?o[n].apply(o,s):o.options[n])}});return void 0!==i?i:a}X.VERSION="1.14.0-beta3",X.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",source:{pageSize:40},chunkSize:40,doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:$.BUTTONCLASS,size:"auto",title:null,placeholder:null,allowClear:!1,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:$.ICONBASE,tickIcon:$.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!0,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},X.prototype={constructor:X,init:function(){var t=this,i=this.$element.attr("id"),s=this.$element[0],n=s.form;V++,this.selectId="bs-select-"+V,s.classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),s.classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),n&&null===s.form&&(n.id||(n.id="form-"+this.selectId),s.setAttribute("form",n.id)),this.$button=this.$newElement.children("button"),this.options.allowClear&&(this.$clearButton=this.$button.children(".bs-select-clear-selected")),this.$menu=this.$newElement.children(B.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),s.classList.remove("bs-select-hidden"),this.fetchData(function(){t.render(!0),t.buildList(),requestAnimationFrame(function(){t.$element.trigger("loaded"+H)})}),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add($.MENURIGHT),void 0!==i&&this.$button.attr("data-id",i),this.checkDisabled(),this.clickListener(),4<z.major&&(this.dropdown=new N(this.$button[0])),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+H,function(){var e,i;t.isVirtual()&&(i=(e=t.$menuInner[0]).firstChild.cloneNode(!1),e.replaceChild(i,e.firstChild),e.scrollTop=0)}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$element.trigger("hide"+H,e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden"+H,e)},"show.bs.dropdown":function(e){t.$element.trigger("show"+H,e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown"+H,e)}}),s.hasAttribute("required")&&this.$element.on("invalid"+H,function(){t.$button[0].classList.add("bs-invalid"),t.$element.on("shown"+H+".invalid",function(){t.$element.val(t.$element.val()).off("shown"+H+".invalid")}).on("rendered"+H,function(){this.validity.valid&&t.$button[0].classList.remove("bs-invalid"),t.$element.off("rendered"+H)}),t.$button.on("blur"+H,function(){t.$element.trigger("focus").trigger("blur"),t.$button.off("blur"+H)})}),n&&e(n).on("reset"+H,function(){requestAnimationFrame(function(){t.render()})})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.multiple?' aria-multiselectable="true"':"",s="",n=this.autofocus?" autofocus":"";z.major<4&&this.$element.parent().hasClass("input-group")&&(s=" input-group-btn");var l="",o="",r="",a="",d="";return this.options.header&&(l='<div class="'+$.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(o='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+P(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(r='<div class="bs-actionsbox"><div class="btn-group btn-group-sm"><button type="button" class="actions-btn bs-select-all btn '+$.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+$.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(a='<div class="bs-donebutton"><div class="btn-group"><button type="button" class="btn btn-sm '+$.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),this.options.allowClear&&(d='<span class="close bs-select-clear-selected" title="'+this.options.deselectAllText+'"><span>&times;</span>'),t='<div class="dropdown bootstrap-select'+t+s+'"><button type="button" tabindex="-1" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+B.DATA_TOGGLE+n+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner">&nbsp;</div></div> </div>'+d+"</span>"+("4"<=z.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+$.MENU+" "+("4"<=z.major?"":$.SHOW)+'">'+l+o+r+'<div class="inner '+$.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+i+'><ul class="'+$.MENU+" inner "+("4"<=z.major?$.SHOW:"")+'" role="presentation"></ul></div>'+a+"</div></div>",e(t)},setPositionData:function(){this.selectpicker.view.canHighlight=[],this.selectpicker.view.size=0,this.selectpicker.view.firstHighlightIndex=!1;for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),i&&(this.selectpicker.view.size++,t.posinset=this.selectpicker.view.size,!1===this.selectpicker.view.firstHighlightIndex&&(this.selectpicker.view.firstHighlightIndex=e)),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.data.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(t,i,s){var n=this,l=0;function o(e,i){var s,l=n.selectpicker.current.data.length,r=[],a=!0,d=n.isVirtual();n.selectpicker.view.scrollTop=e;for(var c,u=n.options.chunkSize,m=Math.ceil(l/u)||1,p=0;p<m;p++){var g=p===m-1?l:(p+1)*u;if(r[p]=[p*u+(p?1:0),g],!l)break;void 0===s&&e-1<=n.selectpicker.current.data[g-1].position-n.sizeInfo.menuInnerHeight&&(s=p)}if(void 0===s&&(s=0),w=[n.selectpicker.view.position0,n.selectpicker.view.position1],f=Math.max(0,s-1),v=Math.min(m-1,s+1),n.selectpicker.view.position0=!1!==d&&Math.max(0,r[f][0])||0,n.selectpicker.view.position1=!1===d?l:Math.min(l,r[v][1])||0,f=w[0]!==n.selectpicker.view.position0||w[1]!==n.selectpicker.view.position1,void 0!==n.activeElement&&(i&&(n.activeElement!==n.selectedElement&&n.defocusItem(n.activeElement),n.activeElement=void 0),n.activeElement!==n.selectedElement&&n.defocusItem(n.selectedElement)),void 0!==n.prevActiveElement&&n.prevActiveElement!==n.activeElement&&n.prevActiveElement!==n.selectedElement&&n.defocusItem(n.prevActiveElement),i||f||n.selectpicker.current.hasMore){if(v=n.selectpicker.view.visibleElements?n.selectpicker.view.visibleElements.slice():[],n.selectpicker.view.visibleElements=!1===d?n.selectpicker.current.elements:n.selectpicker.current.elements.slice(n.selectpicker.view.position0,n.selectpicker.view.position1),n.setOptionStatus(),(t||!1===d&&i)&&(w=v,c=n.selectpicker.view.visibleElements,a=!(w.length===c.length&&w.every(function(e,t){return e===c[t]}))),(i||!0===d)&&a){var f=n.$menuInner[0],_=document.createDocumentFragment(),v=f.firstChild.cloneNode(!1),b=n.selectpicker.view.visibleElements,C=[];f.replaceChild(v,f.firstChild);p=0;for(var w,y=b.length;p<y;p++){var S,x,T=b[p];n.options.sanitize&&(S=T.lastChild)&&(x=n.selectpicker.current.data[p+n.selectpicker.view.position0])&&x.content&&!x.sanitized&&(C.push(S),x.sanitized=!0),_.appendChild(T)}n.options.sanitize&&C.length&&h(C,n.options.whiteList,n.options.sanitizeFn),!0===d?(w=0===n.selectpicker.view.position0?0:n.selectpicker.current.data[n.selectpicker.view.position0-1].position,a=n.selectpicker.view.position1>l-1?0:n.selectpicker.current.data[l-1].position-n.selectpicker.current.data[n.selectpicker.view.position1-1].position,f.firstChild.style.marginTop=w+"px",f.firstChild.style.marginBottom=a+"px"):(f.firstChild.style.marginTop=0,f.firstChild.style.marginBottom=0),f.firstChild.appendChild(_),!0===d&&n.sizeInfo.hasScrollBar&&(v=f.firstChild.offsetWidth,i&&v<n.sizeInfo.menuInnerInnerWidth&&n.sizeInfo.totalMenuWidth>n.sizeInfo.selectWidth?f.firstChild.style.minWidth=n.sizeInfo.menuInnerInnerWidth+"px":v>n.sizeInfo.menuInnerInnerWidth&&(n.$menu[0].style.minWidth=0,(w=f.firstChild.offsetWidth)>n.sizeInfo.menuInnerInnerWidth&&(n.sizeInfo.menuInnerInnerWidth=w,f.firstChild.style.minWidth=n.sizeInfo.menuInnerInnerWidth+"px"),n.$menu[0].style.minWidth=""))}(!t&&n.options.source.data||t&&n.options.source.search)&&n.selectpicker.current.hasMore&&s===m-1&&0<e&&(a=Math.floor(s*n.options.chunkSize/n.options.source.pageSize)+2,n.fetchData(function(){n.render(),n.buildList(l,t),n.setPositionData(),o(e)},t?"search":"data",a,t?n.selectpicker.search.previousValue:void 0))}n.prevActiveElement=n.activeElement,n.options.liveSearch?t&&i&&(n.selectpicker.view.canHighlight[d=0]||(d=1+n.selectpicker.view.canHighlight.slice(1).indexOf(!0)),v=n.selectpicker.view.visibleElements[d],n.defocusItem(n.selectpicker.view.currentActive),n.activeElement=(n.selectpicker.current.data[d]||{}).element,n.focusItem(v)):n.$menuInner.trigger("focus")}this.selectpicker.isSearching=t,this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),i&&(s?l=this.$menuInner[0].scrollTop:n.multiple||"number"==typeof(s=((i=n.$element[0]).options[i.selectedIndex]||{}).liIndex)&&!1!==n.options.size&&(s=(i=n.selectpicker.main.data[s])&&i.position)&&(l=s-(n.sizeInfo.menuInnerHeight+n.sizeInfo.liHeight)/2)),o(l,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){n.noScroll||o(this.scrollTop,t),n.noScroll=!1}),e(window).off("resize"+H+"."+this.selectId+".createView").on("resize"+H+"."+this.selectId+".createView",function(){n.$newElement.hasClass($.SHOW)&&o(n.$menuInner[0].scrollTop)})},focusItem:function(e,t,i){var s;e&&(t=t||this.selectpicker.current.data[this.selectpicker.current.elements.indexOf(this.activeElement)],(s=e.firstChild)&&(s.setAttribute("aria-setsize",this.selectpicker.view.size),s.setAttribute("aria-posinset",t.posinset),!0!==i&&(this.focusedParent.setAttribute("aria-activedescendant",s.id),e.classList.add("active"),s.classList.add("active"))))},defocusItem:function(e){e&&(e.classList.remove("active"),e.firstChild&&e.firstChild.classList.remove("active"))},setPlaceholder:function(){var e,t,i,s,n,l,o,r=this,a=!1;return!this.options.placeholder&&!this.options.allowClear||this.multiple||(this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),e=this.$element[0],t=!(a=!0),i=!this.selectpicker.view.titleOption.parentNode,s=e.selectedIndex,n=e.options[s],l=(l=e.querySelector("select > *:not(:disabled)"))?l.index:0,o=(o=window.performance&&window.performance.getEntriesByType("navigation"))&&o.length?"back_forward"!==o[0].type:2!==window.performance.navigation.type,i&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",t=!n||s===l&&!1===n.defaultSelected&&void 0===this.$element.data("selected")),!i&&0===this.selectpicker.view.titleOption.index||e.insertBefore(this.selectpicker.view.titleOption,e.firstChild),t&&o?e.selectedIndex=0:"complete"!==document.readyState&&window.addEventListener("pageshow",function(){r.selectpicker.view.displayedValue!==e.value&&r.render()})),a},fetchData:function(e,t,i,s){i=i||1,t=t||"data";var n,l=this,o=this.options.source[t];o?(this.options.virtualScroll=!0,"function"==typeof o?o.call(this,function(i,s,o){var r=l.selectpicker["search"===t?"search":"main"];r.hasMore=s,r.totalItems=o,n=l.buildData(i,t),e.call(l,n),l.$element.trigger("fetched"+H)},i,s):Array.isArray(o)&&(n=l.buildData(o,t),e.call(l,n))):(n=this.buildData(!1,t),e.call(l,n))},buildData:function(t,i){var s=this,n=!1===t?K.fromOption:K.fromDataSource,l=':not([hidden]):not([data-hidden="true"]):not([style*="display: none"])',o=[],r=this.selectpicker.main.data?this.selectpicker.main.data.length:0,a=0,d=this.setPlaceholder()&&!t?1:0,h=("search"===i&&(r=this.selectpicker.search.data.length),this.options.hideDisabled&&(l+=":not(:disabled)"),t?t.filter(Q,this):this.$element[0].querySelectorAll("select > *"+l));function c(e){var t=o[o.length-1];t&&"divider"===t.type&&(t.optID||e.optID)||((e=e||{}).type="divider",o.push(e))}function u(i,l){var a,d,h;(l=l||{}).divider=n(i,"divider"),!0===l.divider?c({optID:l.optID}):(a=o.length+r,d=(d=n(i,"style"))?P(d):"",h=(i.className||"")+(l.optgroupClass||""),l.optID&&(h="opt "+h),l.optionClass=h.trim(),l.inlineStyle=d,l.text=n(i,"text"),l.title=n(i,"title"),l.content=n(i,"content"),l.tokens=n(i,"tokens"),l.subtext=n(i,"subtext"),l.icon=n(i,"icon"),l.display=l.content||l.text,l.value=void 0===i.value?i.text:i.value,l.type="option",l.index=a,l.option=i.option||i,l.option.liIndex=a,l.selected=!!i.selected,l.disabled=l.disabled||!!i.disabled,!1!==t&&(s.selectpicker.optionValuesDataMap[l.value]?l=e.extend(s.selectpicker.optionValuesDataMap[l.value],l):s.selectpicker.optionValuesDataMap[l.value]=l),o.push(l))}function m(e,i){var s=i[e],r=!(e-1<d)&&i[e-1],h=(i=i[e+1],t?s.children.filter(Q,this):s.querySelectorAll("option"+l));if(h.length){var m,p,g={display:P(n(f,"label")),subtext:n(s,"subtext"),icon:n(s,"icon"),type:"optgroup-label",optgroupClass:" "+(s.className||""),optgroup:s};a++,r&&c({optID:a}),g.optID=a,o.push(g);for(var _=0,v=h.length;_<v;_++){var b=h[_];0===_&&(p=(m=o.length-1)+v),u(b,{headerIndex:m,lastIndex:p,optID:g.optID,optgroupClass:g.optgroupClass,disabled:s.disabled})}i&&c({optID:a})}}for(var p=h.length,g=d;g<p;g++){var f=h[g],_=f.children;_&&_.length?m.call(this,g,h):u.call(this,f,{})}switch(i){case"data":this.selectpicker.main.data||(this.selectpicker.main.data=[]),Array.prototype.push.apply(this.selectpicker.main.data,o),this.selectpicker.current.data=this.selectpicker.main.data;break;case"search":Array.prototype.push.apply(this.selectpicker.search.data,o)}return o},buildList:function(e,t){var i=this,s=(t?this.selectpicker.search:this.selectpicker.main).data,n=[],l=0;!i.options.showTick&&!i.multiple||U.checkMark.parentNode||(U.checkMark.className=this.options.iconBase+" "+i.options.tickIcon+" check-mark",U.a.appendChild(U.checkMark));for(var o=s.length,r=e||0;r<o;r++){var a,d=(c=a=h=d=void 0,n),h=s[r],c=0;switch(h.type){case"divider":a=G.li(!1,$.DIVIDER,h.optID?h.optID+"div":void 0);break;case"option":(a=G.li(G.a(G.text.call(i,h),h.optionClass,h.inlineStyle),"",h.optID)).firstChild&&(a.firstChild.id=i.selectId+"-"+h.index);break;case"optgroup-label":a=G.li(G.label.call(i,h),"dropdown-header"+h.optgroupClass,h.optID)}h.element?h.element.innerHTML=a.innerHTML:h.element=a,d.push(h.element),h.display&&(c+=h.display.length),h.subtext&&(c+=h.subtext.length),h.icon&&(c+=1),l<c&&(l=c,i.selectpicker.view.widestOption=d[d.length-1])}e?t?Array.prototype.push.apply(this.selectpicker.search.elements,n):(Array.prototype.push.apply(this.selectpicker.main.elements,n),this.selectpicker.current.elements=this.selectpicker.main.elements):t?this.selectpicker.search.elements=n:this.selectpicker.main.elements=this.selectpicker.current.elements=n},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(e){var t=this,i=this.$element[0],s=this.setPlaceholder()&&0===i.selectedIndex,n=b.call(this),l=n.length,o=C.call(this,n),r=this.$button[0],a=r.querySelector(".filter-option-inner-inner"),d=document.createTextNode(this.options.multipleSeparator),c=U.fragment.cloneNode(!1),u=!1;if(this.options.source.data&&e&&(n.map(function e(i){i.selected?t.createOption(i,!0):i.children&&i.children.length&&i.children.map(e)}),i.appendChild(this.selectpicker.main.optionQueue),s=s&&0===i.selectedIndex),r.classList.toggle("bs-placeholder",t.multiple?!l:!o&&0!==o),t.multiple||1!==n.length||(t.selectpicker.view.displayedValue=o),"static"===this.options.selectedTextFormat)c=G.text.call(this,{text:this.options.placeholder},!0);else if(!1===(this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&0<l&&(1<(e=this.options.selectedTextFormat.split(">")).length&&l>e[1]||1===e.length&&2<=l))){if(!s){for(var m=0;m<l&&m<50;m++){var p=n[m],g={};p&&(this.multiple&&0<m&&c.appendChild(d.cloneNode(!1)),p.title?g.text=p.title:p.content&&t.options.showContent?(g.content=p.content.toString(),u=!0):(t.options.showIcon&&(g.icon=p.icon),t.options.showSubtext&&!t.multiple&&p.subtext&&(g.subtext=" "+p.subtext),g.text=p.text.trim()),c.appendChild(G.text.call(this,g,!0)))}49<l&&c.appendChild(document.createTextNode("..."))}}else i=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"]):not([style*="display: none"])',o=(this.options.hideDisabled&&(i+=":not(:disabled)"),this.$element[0].querySelectorAll("select > option"+i+", optgroup"+i+" option"+i).length),e="function"==typeof this.options.countSelectedText?this.options.countSelectedText(l,o):this.options.countSelectedText,c=G.text.call(this,{text:e.replace("{0}",l.toString()).replace("{1}",o.toString())},!0);c.childNodes.length||(c=G.text.call(this,{text:this.options.placeholder||this.options.noneSelectedText},!0)),r.title=c.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&u&&h([c],t.options.whiteList,t.options.sanitizeFn),a.innerHTML="",a.appendChild(c),z.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")&&(s=r.querySelector(".filter-expand"),(i=a.cloneNode(!0)).className="filter-expand",s?r.replaceChild(i,s):r.appendChild(i)),this.$element.trigger("rendered"+H)},setStyle:function(e,t){var i=this.$button[0],s=this.$newElement[0],n=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),z.major<4&&(s.classList.add("bs3"),s.parentNode.classList&&s.parentNode.classList.contains("input-group")&&(s.previousElementSibling||s.nextElementSibling)&&(s.previousElementSibling||s.nextElementSibling).classList.contains("input-group-addon")&&s.classList.add("bs3-has-addon")),s=e?e.trim():n,"add"==t?s&&i.classList.add.apply(i.classList,s.split(" ")):"remove"==t?s&&i.classList.remove.apply(i.classList,s.split(" ")):(n&&i.classList.remove.apply(i.classList,n.split(" ")),s&&i.classList.add.apply(i.classList,s.split(" ")))},liHeight:function(t){if(t||!1!==this.options.size&&!Object.keys(this.sizeInfo).length){t=U.div.cloneNode(!1);var i,s=U.div.cloneNode(!1),n=U.div.cloneNode(!1),l=document.createElement("ul"),o=U.li.cloneNode(!1),r=U.li.cloneNode(!1),a=U.a.cloneNode(!1),d=U.span.cloneNode(!1),h=this.options.header&&0<this.$menu.find("."+$.POPOVERHEADER).length?this.$menu.find("."+$.POPOVERHEADER)[0].cloneNode(!0):null,c=this.options.liveSearch?U.div.cloneNode(!1):null,u=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,p=this.$element[0].options[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,d.className="text",a.className="dropdown-item "+(p?p.className:""),t.className=this.$menu[0].parentNode.className+" "+$.SHOW,t.style.width=0,"auto"===this.options.width&&(s.style.minWidth=0),s.className=$.MENU+" "+$.SHOW,n.className="inner "+$.SHOW,l.className=$.MENU+" inner "+("4"<=z.major?$.SHOW:""),o.className=$.DIVIDER,r.className="dropdown-header",d.appendChild(document.createTextNode("â")),this.selectpicker.current.data.length)for(var g=0;g<this.selectpicker.current.data.length;g++){var f=this.selectpicker.current.data[g];if("option"===f.type&&"none"!==e(f.element.firstChild).css("display")){i=f.element;break}}else i=U.li.cloneNode(!1),a.appendChild(d),i.appendChild(a);r.appendChild(d.cloneNode(!0)),this.selectpicker.view.widestOption&&l.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),l.appendChild(i),l.appendChild(o),l.appendChild(r),h&&s.appendChild(h),c&&(p=document.createElement("input"),c.className="bs-searchbox",p.className="form-control",c.appendChild(p),s.appendChild(c)),u&&s.appendChild(u),n.appendChild(l),s.appendChild(n),m&&s.appendChild(m),t.appendChild(s),document.body.appendChild(t),a=i.offsetHeight,d=r?r.offsetHeight:0,p=h?h.offsetHeight:0,l=c?c.offsetHeight:0,r=u?u.offsetHeight:0,h=m?m.offsetHeight:0,c=e(o).outerHeight(!0),u=window.getComputedStyle(s),m=s.offsetWidth,u={vert:(o={vert:T(u.paddingTop)+T(u.paddingBottom)+T(u.borderTopWidth)+T(u.borderBottomWidth),horiz:T(u.paddingLeft)+T(u.paddingRight)+T(u.borderLeftWidth)+T(u.borderRightWidth)}).vert+T(u.marginTop)+T(u.marginBottom)+2,horiz:o.horiz+T(u.marginLeft)+T(u.marginRight)+2},n.style.overflowY="scroll",n=s.offsetWidth-m,document.body.removeChild(t),this.sizeInfo.liHeight=a,this.sizeInfo.dropdownHeaderHeight=d,this.sizeInfo.headerHeight=p,this.sizeInfo.searchHeight=l,this.sizeInfo.actionsHeight=r,this.sizeInfo.doneButtonHeight=h,this.sizeInfo.dividerHeight=c,this.sizeInfo.menuPadding=o,this.sizeInfo.menuExtras=u,this.sizeInfo.menuWidth=m,this.sizeInfo.menuInnerInnerWidth=m-o.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=n,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=e(window),s=this.$newElement.offset(),n=e(this.options.container);this.options.container&&n.length&&!n.is("body")?((t=n.offset()).top+=parseInt(n.css("borderTopWidth")),t.left+=parseInt(n.css("borderLeftWidth"))):t={top:0,left:0},n=this.options.windowPadding;this.sizeInfo.selectOffsetTop=s.top-t.top-i.scrollTop(),this.sizeInfo.selectOffsetBot=i.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-n[2],this.sizeInfo.selectOffsetLeft=s.left-t.left-i.scrollLeft(),this.sizeInfo.selectOffsetRight=i.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-n[1],this.sizeInfo.selectOffsetTop-=n[0],this.sizeInfo.selectOffsetLeft-=n[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,s,n,l,o,r=this.sizeInfo.selectWidth,a=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,h=this.sizeInfo.searchHeight,c=this.sizeInfo.actionsHeight,u=this.sizeInfo.doneButtonHeight,m=this.sizeInfo.dividerHeight,p=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(o=a*this.selectpicker.current.data.length+p.vert,o=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&o+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot,!0===this.selectpicker.isSearching&&(o=this.selectpicker.dropup),this.$newElement.toggleClass($.DROPUP,o),this.selectpicker.dropup=o),"auto"===this.options.size)o=3<this.selectpicker.current.data.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,s=o+d+h+c+u,l=Math.max(o-p.vert,0),t=(n=i=this.$newElement.hasClass($.DROPUP)?this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert:i)-d-h-c-u-p.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var f=0;f<this.options.size;f++)"divider"===this.selectpicker.current.data[f].type&&g++;t=(i=a*this.options.size+g*m+p.vert)-p.vert,n=i+d+h+c+u,s=l=""}this.$menu.css({"max-height":n+"px",overflow:"hidden","min-height":s+"px"}),this.$menuInner.css({"max-height":t+"px",overflow:"hidden auto","min-height":l+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass($.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-r),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){var i,s;this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size&&(i=this,s=e(window),this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return i.setMenuSize()}),"auto"===this.options.size?s.off("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize").on("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize",function(){return i.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&s.off("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize")),this.createView(!1,!0,t)},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame(function(){e.$menu.css("min-width","0"),e.$element.on("loaded"+H,function(){e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")})}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){function t(t){var r={},a=l.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;l.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass($.DROPUP,t.hasClass($.DROPUP)),i=t.offset(),o.is("body")?s={top:0,left:0}:((s=o.offset()).top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),s.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),n=t.hasClass($.DROPUP)?0:t[0].offsetHeight,(z.major<4||"static"===a)&&(r.top=i.top-s.top+n,r.left=i.left-s.left),r.width=t[0].offsetWidth,l.$bsContainer.css(r)}this.$bsContainer=e('<div class="bs-container" />');var i,s,n,l=this,o=e(this.options.container);this.$button.on("click.bs.dropdown.data-api",function(){l.isDisabled()||(t(l.$newElement),l.$bsContainer.appendTo(l.options.container).toggleClass($.SHOW,!l.$button.hasClass($.SHOW)).append(l.$menu))}),e(window).off("resize"+H+"."+this.selectId+" scroll"+H+"."+this.selectId).on("resize"+H+"."+this.selectId+" scroll"+H+"."+this.selectId,function(){l.$newElement.hasClass($.SHOW)&&t(l.$newElement)}),this.$element.on("hide"+H,function(){l.$menu.data("height",l.$menu.height()),l.$bsContainer.detach()})},createOption:function(e,t){var i,s=e.option||e;s&&1!==s.nodeType&&(i=(t?U.selectedOption:U.option).cloneNode(!0),void 0!==s.value&&(i.value=s.value),i.textContent=s.text,i.selected=!0,void 0!==s.liIndex?i.liIndex=s.liIndex:t||(i.liIndex=e.index),e.option=i,this.selectpicker.main.optionQueue.appendChild(i))},setOptionStatus:function(e){var t=this;if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length){for(var i=0;i<t.selectpicker.view.visibleElements.length;i++){var s=t.selectpicker.current.data[i+t.selectpicker.view.position0];s.option&&(!0!==e&&t.setDisabled(s),t.setSelected(s))}this.options.source.data&&this.$element[0].appendChild(this.selectpicker.main.optionQueue)}},setSelected:function(e,t){t=void 0===t?e.selected:t;var i,s=e.element,n=void 0!==this.activeElement,l=this.activeElement===s||t&&!this.multiple&&!n;s&&(void 0!==t&&(e.selected=t,e.option&&(e.option.selected=t)),t&&this.options.source.data&&this.createOption(e,!1),i=s.firstChild,t&&(this.selectedElement=s),s.classList.toggle("selected",t),l?(this.focusItem(s,e),this.selectpicker.view.currentActive=s,this.activeElement=s):this.defocusItem(s),i&&(i.classList.toggle("selected",t),t?i.setAttribute("aria-selected",!0):this.multiple?i.setAttribute("aria-selected",!1):i.removeAttribute("aria-selected")),l||n||!t||void 0===this.prevActiveElement||(e=this.prevActiveElement,this.defocusItem(e)))},setDisabled:function(e){var t,i=e.disabled;(e=e.element)&&(t=e.firstChild,e.classList.toggle($.DISABLED,i),t&&("4"<=z.major&&t.classList.toggle($.DISABLED,i),i?(t.setAttribute("aria-disabled",i),t.setAttribute("tabindex",-1)):(t.removeAttribute("aria-disabled"),t.setAttribute("tabindex",0))))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add($.DISABLED),this.$button.addClass($.DISABLED).attr("aria-disabled",!0)):this.$button[0].classList.contains($.DISABLED)&&(this.$newElement[0].classList.remove($.DISABLED),this.$button.removeClass($.DISABLED).attr("aria-disabled",!1))},clickListener:function(){var t=this,i=e(document);function s(){(t.options.liveSearch?t.$searchbox:t.$menuInner).trigger("focus")}function n(){t.dropdown&&t.dropdown._popper&&t.dropdown._popper.state?s():requestAnimationFrame(n)}i.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){t.dropdown||"4"!==z.major||(t.dropdown=t.$button.data("bs.dropdown"),t.dropdown._menu=t.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(e){var i,s,n;t.options.allowClear&&(i=e.target,s=t.$clearButton[0],(i=/MSIE|Trident/.test(window.navigator.userAgent)?document.elementFromPoint(e.clientX,e.clientY):i)!==s&&i.parentElement!==s||(e.stopImmediatePropagation(),t.multiple?t.deselectAll():(s=(i=t.$element[0]).value,e=i.selectedIndex,(n=!!(n=i.options[e])&&t.selectpicker.main.data[n.liIndex])&&t.setSelected(n,!1),i.selectedIndex=0,y=[e,!1,s],t.$element.triggerNative("change")),t.$newElement.hasClass($.SHOW)&&(t.options.liveSearch&&t.$searchbox.trigger("focus"),t.createView(!1)))),t.$newElement.hasClass($.SHOW)||t.setSize()}),this.$element.on("shown"+H,function(){t.$menuInner[0].scrollTop!==t.selectpicker.view.scrollTop&&(t.$menuInner[0].scrollTop=t.selectpicker.view.scrollTop),3<z.major?requestAnimationFrame(n):s()}),this.$menuInner.on("mouseenter","li a",function(e){var i=this.parentElement,s=t.isVirtual()?t.selectpicker.view.position0:0,n=Array.prototype.indexOf.call(i.parentElement.children,i);n=t.selectpicker.current.data[n+s];t.focusItem(i,n,!0)}),this.$menuInner.on("click","li a",function(i,s){var n=e(this),l=t.$element[0],o=t.isVirtual()?t.selectpicker.view.position0:0,r=t.selectpicker.current.data[n.parent().index()+o],a=(o=r.element,C.call(t)),d=l.selectedIndex,h=!!(h=l.options[d])&&t.selectpicker.main.data[h.liIndex],c=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!n.parent().hasClass($.DISABLED)){i=r.option,n=e(i);var u=i.selected,m=t.selectpicker.current.data.find(function(e){return e.optID===r.optID&&"optgroup-label"===e.type}),p=m?m.optgroup:void 0,g=(m=p instanceof Element?K.fromOption:K.fromDataSource,p&&p.children),f=parseInt(t.options.maxOptions);m=p&&parseInt(m(p,"maxOptions"))||!1;if((s=o===t.activeElement||s)||(t.prevActiveElement=t.activeElement,t.activeElement=void 0),t.multiple&&1!==f){if(t.setSelected(r,!u),t.focusedParent.focus(),!1!==f||!1!==m){o=f<b.call(t).length;var _=0;if(p&&p.children)for(var v=0;v<p.children.length;v++)p.children[v].selected&&_++;if(s=m<_,f&&o||m&&s)if(f&&1===f)l.selectedIndex=-1,t.setOptionStatus(!0);else if(m&&1===m){for(v=0;v<g.length;v++){var w=g[v];t.setSelected(t.selectpicker.current.data[w.liIndex],!1)}t.setSelected(r,!0)}else{var S=(u="function"==typeof(u="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText)?u(f,m):u)[0].replace("{n}",f),x=u[1].replace("{n}",m),T=e('<div class="notify"></div>');u[2]&&(S=S.replace("{var}",u[2][1<f?0:1]),x=x.replace("{var}",u[2][1<m?0:1])),t.$menu.append(T),f&&o&&(T.append(e("<div>"+S+"</div>")),c=!1,t.$element.trigger("maxReached"+H)),m&&s&&(T.append(e("<div>"+x+"</div>")),c=!1,t.$element.trigger("maxReachedGrp"+H)),setTimeout(function(){t.setSelected(r,!1)},10),T[0].classList.add("fadeOut"),setTimeout(function(){T.remove()},1050)}}}else h&&t.setSelected(h,!1),t.setSelected(r,!0);t.options.source.data&&t.$element[0].appendChild(t.selectpicker.main.optionQueue),!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.trigger("focus"):t.options.liveSearch&&t.$searchbox.trigger("focus"),!c||!t.multiple&&d===l.selectedIndex||(y=[i.index,n.prop("selected"),a],t.$element.triggerNative("change"))}}),this.$menu.on("click","li."+$.DISABLED+" a, ."+$.POPOVERHEADER+", ."+$.POPOVERHEADER+" :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),(t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox:t.$button).trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),(t.options.liveSearch?t.$searchbox:t.$button).trigger("focus")}),this.$menu.on("click","."+$.POPOVERHEADER+" .close",function(){t.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){(t.options.liveSearch?t.$searchbox:t.$button).trigger("focus"),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()}),this.$button.on("focus"+H,function(e){var i=t.$element[0].getAttribute("tabindex");void 0!==i&&e.originalEvent&&e.originalEvent.isTrusted&&(this.setAttribute("tabindex",i),t.$element[0].setAttribute("tabindex",-1),t.selectpicker.view.tabindex=i)}).on("blur"+H,function(e){void 0!==t.selectpicker.view.tabindex&&e.originalEvent&&e.originalEvent.isTrusted&&(t.$element[0].setAttribute("tabindex",t.selectpicker.view.tabindex),this.setAttribute("tabindex",-1),t.selectpicker.view.tabindex=void 0)}),this.$element.on("change"+H,function(){t.render(),t.$element.trigger("changed"+H,y),y=null}).on("focus"+H,function(){t.options.mobile||t.$button[0].focus()})},liveSearchListener:function(){var e=this;this.$button.on("click.bs.dropdown.data-api",function(){e.$searchbox.val()&&(e.$searchbox.val(""),e.selectpicker.search.previousValue=void 0)}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var t=e.$searchbox[0].value;if(e.selectpicker.search.elements=[],e.selectpicker.search.data=[],t)if(e.selectpicker.search.previousValue=t,e.options.source.search)e.fetchData(function(i){e.render(),e.buildList(void 0,!0),e.noScroll=!0,e.$menuInner.scrollTop(0),e.createView(!0),Y.call(e,i,t)},"search",0,t);else{var i=[],s=t.toUpperCase(),n={},l=[],o=e._searchStyle(),r=e.options.liveSearchNormalize;r&&(s=R(s));for(var a=0;a<e.selectpicker.main.data.length;a++){var d=e.selectpicker.main.data[a];n[a]||(n[a]=x(d,s,o,r)),n[a]&&void 0!==d.headerIndex&&-1===l.indexOf(d.headerIndex)&&(0<d.headerIndex&&(n[d.headerIndex-1]=!0,l.push(d.headerIndex-1)),n[d.headerIndex]=!0,l.push(d.headerIndex),n[d.lastIndex+1]=!0),n[a]&&"optgroup-label"!==d.type&&l.push(a)}a=0;for(var h=l.length;a<h;a++){var c=l[a],u=l[a-1];d=e.selectpicker.main.data[c],u=e.selectpicker.main.data[u];("divider"!==d.type||"divider"===d.type&&u&&"divider"!==u.type&&h-1!==a)&&(e.selectpicker.search.data.push(d),i.push(e.selectpicker.main.elements[c]))}e.activeElement=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=i,e.createView(!0),Y.call(e,i,t)}else e.selectpicker.search.previousValue&&(e.$menuInner.scrollTop(0),e.createView(!1))})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){var t=this.$element[0];if(void 0===e)return this.$element.val();var i=b.call(this),s=C.call(this,i);y=[null,null,s],(e=Array.isArray(e)?e:[e]).map(String);for(var n=0;n<i.length;n++){var l=i[n];l&&-1===e.indexOf(String(l.value))&&this.setSelected(l,!1)}return this.selectpicker.main.data.filter(function(t){return-1!==e.indexOf(String(t.value))&&(this.setSelected(t,!0),!0)},this),this.options.source.data&&t.appendChild(this.selectpicker.main.optionQueue),this.$element.trigger("changed"+H,y),this.$newElement.hasClass($.SHOW)&&(this.multiple?this.setOptionStatus(!0):"number"==typeof(s=(t.options[t.selectedIndex]||{}).liIndex)&&this.setSelected(this.selectpicker.current.data[s],!0)),this.render(),y=null,this.$element},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=0,s=0,n=C.call(this);t.classList.add("bs-select-hidden");for(var l=0,o=this.selectpicker.current.data,r=o.length;l<r;l++){var a=o[l],d=a.option;d&&!a.disabled&&"divider"!==a.type&&(a.selected&&i++,d.selected=e,!0===(a.selected=e)&&s++)}t.classList.remove("bs-select-hidden"),i!==s&&(this.setOptionStatus(),y=[null,null,n],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e,t){var i=void 0===t;(e=e||window.event)&&e.stopPropagation(),!1===i&&(e=this.$newElement[0].classList.contains($.SHOW),i=!0===t&&!1===e||!1===t&&!0===e),i&&this.$button.trigger("click.bs.dropdown.data-api")},open:function(e){this.toggle(e,!0)},close:function(e){this.toggle(e,!1)},keydown:function(t){var i,s,n,l,o=e(this),r=((h=o.hasClass("dropdown-toggle"))?o.closest(".dropdown"):o.closest(B.MENU)).data("this"),a=r.findLis(),d=!1,h=9===t.which&&!h&&!r.options.selectOnTab,c=W.test(t.which)||h,u=r.$menuInner[0].scrollTop,m=!0===r.isVirtual()?r.selectpicker.view.position0:0;if(!(112<=t.which&&t.which<=123))if(!(i=r.$menu.hasClass($.SHOW))&&(c||48<=t.which&&t.which<=57||96<=t.which&&t.which<=105||65<=t.which&&t.which<=90)&&(r.$button.trigger("click.bs.dropdown.data-api"),r.options.liveSearch))r.$searchbox.trigger("focus");else{if(27===t.which&&i&&(t.preventDefault(),r.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),c){if(!a.length)return;-1!==(c=(s=r.activeElement)?Array.prototype.indexOf.call(s.parentElement.children,s):-1)&&r.defocusItem(s),38===t.which?(-1!==c&&c--,c+m<0&&(c+=a.length),r.selectpicker.view.canHighlight[c+m]||-1===(c=r.selectpicker.view.canHighlight.slice(0,c+m).lastIndexOf(!0)-m)&&(c=a.length-1)):40!==t.which&&!h||(++c+m>=r.selectpicker.view.canHighlight.length&&(c=r.selectpicker.view.firstHighlightIndex),r.selectpicker.view.canHighlight[c+m]||(c=c+1+r.selectpicker.view.canHighlight.slice(c+m+1).indexOf(!0))),t.preventDefault();var p=m+c;38===t.which?0===m&&c===a.length-1?(r.$menuInner[0].scrollTop=r.$menuInner[0].scrollHeight,p=r.selectpicker.current.elements.length-1):(n=r.selectpicker.current.data[p])&&(d=(l=n.position-n.height)<u):40!==t.which&&!h||(c===r.selectpicker.view.firstHighlightIndex?(r.$menuInner[0].scrollTop=0,p=r.selectpicker.view.firstHighlightIndex):(n=r.selectpicker.current.data[p])&&(d=u<(l=n.position-r.sizeInfo.menuInnerHeight))),s=r.selectpicker.current.elements[p],r.activeElement=(r.selectpicker.current.data[p]||{}).element,r.focusItem(s),r.selectpicker.view.currentActive=s,d&&(r.$menuInner[0].scrollTop=l),(r.options.liveSearch?r.$searchbox:o).trigger("focus")}else if(!o.is("input")&&!q.test(t.which)||32===t.which&&r.selectpicker.keydown.keyHistory){var g,f=[];t.preventDefault(),r.selectpicker.keydown.keyHistory+=L[t.which],r.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(r.selectpicker.keydown.resetKeyHistory.cancel),r.selectpicker.keydown.resetKeyHistory.cancel=r.selectpicker.keydown.resetKeyHistory.start(),g=r.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(g)&&(g=g.charAt(0));for(var _=0;_<r.selectpicker.current.data.length;_++){var v=r.selectpicker.current.data[_];x(v,g,"startsWith",!0)&&r.selectpicker.view.canHighlight[_]&&f.push(v.element)}f.length&&(m=0,a.removeClass("active").find("a").removeClass("active"),1===g.length&&(-1===(m=f.indexOf(r.activeElement))||m===f.length-1?m=0:m++),h=f[m],d=0<u-(n=r.selectpicker.main.data[h]).position?(l=n.position-n.height,!0):(l=n.position-r.sizeInfo.menuInnerHeight,n.position>u+r.sizeInfo.menuInnerHeight),s=r.selectpicker.main.elements[h],r.activeElement=s,r.focusItem(s),s&&s.firstChild.focus(),d&&(r.$menuInner[0].scrollTop=l),o.trigger("focus"))}i&&(32===t.which&&!r.selectpicker.keydown.keyHistory||13===t.which||9===t.which&&r.options.selectOnTab)&&(32!==t.which&&t.preventDefault(),r.options.liveSearch&&32===t.which||(r.$menuInner.find(".active a").trigger("click",!0),o.trigger("focus"),r.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.options.mobile=!0,this.$element[0].classList.add("mobile-device")},refresh:function(){var t=this,i=e.extend({},this.options,c(this.$element),this.$element.data());this.options=i,this.options.source.data?(this.render(),this.buildList()):this.fetchData(function(){t.render(),t.buildList()}),this.checkDisabled(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+H)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),(this.$bsContainer||this.$menu).remove(),this.selectpicker.view.titleOption&&this.selectpicker.view.titleOption.parentNode&&this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption),this.$element.off(H).removeData("selectpicker").removeClass("bs-select-hidden selectpicker mobile-device"),e(window).off(H+"."+this.selectId)}};var Z=e.fn.selectpicker;function ee(){return z.major<5?e.fn.dropdown?(e.fn.dropdown.Constructor._dataApiKeydownHandler||e.fn.dropdown.Constructor.prototype.keydown).apply(this,arguments):void 0:N.dataApiKeydownHandler}e.fn.selectpicker=J,e.fn.selectpicker.Constructor=X,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=Z,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > ["+B.DATA_TOGGLE+"]",ee).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",ee).on("keydown"+H,".bootstrap-select ["+B.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',X.prototype.keydown).on("focusin.modal",".bootstrap-select ["+B.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),document.addEventListener("DOMContentLoaded",function(){e(".selectpicker").each(function(){var t=e(this);J.call(t,t.data())})})}(e)}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function s(){var s,n;return!i.settings.submitHandler||(i.submitButton&&(s=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),n=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&s.remove(),void 0!==n&&n)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,i,s;return e(this[0]).is("form")?t=this.validate().form():(s=[],t=!0,i=e(this[0].form).validate(),this.each(function(){t=i.element(this)&&t,s=s.concat(i.errorList)}),i.errorList=s),t},rules:function(t,i){var s,n,l,o,r,a,d=this[0];if(t)switch(s=e.data(d.form,"validator").settings,n=s.rules,l=e.validator.staticRules(d),t){case"add":e.extend(l,e.validator.normalizeRule(i)),delete l.messages,n[d.name]=l,i.messages&&(s.messages[d.name]=e.extend(s.messages[d.name],i.messages));break;case"remove":return i?(a={},e.each(i.split(/\s/),function(t,i){a[i]=l[i],delete l[i],"required"===i&&e(d).removeAttr("aria-required")}),a):(delete n[d.name],l)}return(o=e.validator.normalizeRules(e.extend({},e.validator.classRules(d),e.validator.attributeRules(d),e.validator.dataRules(d),e.validator.staticRules(d)),d)).required&&(r=o.required,delete o.required,o=e.extend({required:r},o),e(d).attr("aria-required","true")),o.remote&&(r=o.remote,delete o.remote,o=e.extend(o,{remote:r})),o}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(s):e(t).addClass(i).removeClass(s)},unhighlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(s):e(t).removeClass(i).addClass(s)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this.form,"validator"),s="on"+t.type.replace(/^validate/,""),n=i.settings;n[s]&&!e(this).is(n.ignore)&&n[s].call(i,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){s[i]=t})}),i=this.settings.rules,e.each(i,function(t,s){i[t]=e.validator.normalizeRule(s)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i=this.clean(t),s=this.validationTargetFor(i),n=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=e(s),(n=!1!==this.check(s))?delete this.invalid[s.name]:this.invalid[s.name]=!0),e(t).attr("aria-invalid",!n),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){for(var i in e.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var t,i=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(t=0;i[t];t++)this.settings.unhighlight.call(this,i[t],this.settings.errorClass,"");else i.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,s=e(t),n=t.type;return"radio"===n||"checkbox"===n?this.findByName(t.name).filter(":checked").val():"number"===n&&void 0!==t.validity?!t.validity.badInput&&s.val():"string"==typeof(i=s.val())?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var i,s,n,l=e(t).rules(),o=e.map(l,function(e,t){return t}).length,r=!1,a=this.elementValue(t);for(s in l){n={method:s,parameters:l[s]};try{if("dependency-mismatch"===(i=e.validator.methods[s].call(this,a,t,n.parameters))&&1===o){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,n),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+n.method+"' method."),e}}if(!r)return this.objectLength(l)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var s=this.defaultMessage(t,i.method),n=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,t):n.test(s)&&(s=e.validator.format(s.replace(n,"{$1}"),i.parameters)),this.errorList.push({message:s,element:t,method:i.method}),this.errorMap[t.name]=s,this.submitted[t.name]=s},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var s,n,l,o=this.errorsFor(t),r=this.idOrName(t),a=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(i)):(s=o=e("<"+this.settings.errorElement+">").attr("id",r+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,e(t)):s.insertAfter(t),o.is("label")?o.attr("for",r):0===o.parents("label[for='"+r+"']").length&&(l=o.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),a?a.match(new RegExp("\\b"+l+"\\b"))||(a+=" "+l):a=l,e(t).attr("aria-describedby",a),(n=this.groups[t.name])&&e.each(this.groups,function(t,i){i===n&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!i&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var i=this.idOrName(t),s=e(t).attr("aria-describedby"),n="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(n=n+", #"+s.replace(/\s+/g,", #")),this.errors().filter(n)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},s=e(t).attr("class");return s&&e.each(s.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(e,t,i,s){/min|max/.test(i)&&(null===t||/number|range|text/.test(t))&&(s=Number(s),isNaN(s)&&(s=void 0)),s||0===s?e[i]=s:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,s,n={},l=e(t),o=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(""===(s=t.getAttribute(i))&&(s=!0),s=!!s):s=l.attr(i),this.normalizeAttributeRule(n,o,i,s);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var i,s,n={},l=e(t),o=t.getAttribute("type");for(i in e.validator.methods)s=l.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(n,o,i,s);return n},staticRules:function(t){var i={},s=e.data(t.form,"validator");return s.settings.rules&&(i=e.validator.normalizeRule(s.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(s,n){if(!1!==n){if(n.param||n.depends){var l=!0;switch(typeof n.depends){case"string":l=!!e(n.depends,i.form).length;break;case"function":l=n.depends.call(i,i)}l?t[s]=void 0===n.param||n.param:delete t[s]}}else delete t[s]}),e.each(t,function(s,n){t[s]=e.isFunction(n)?n(i):n}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,s){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==s?s:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var n=e(i).val();return n&&n.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i,s,n=0,l=0,o=!1;if((e=e.replace(/\D/g,"")).length<13||e.length>19)return!1;for(i=e.length-1;i>=0;i--)s=e.charAt(i),l=parseInt(s,10),o&&(l*=2)>9&&(l-=9),n+=l,o=!o;return n%10==0},minlength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=s},maxlength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=n},rangelength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=s[0]&&n<=s[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,s){var n=e(s);return this.settings.onfocusout&&n.off(".validate-equalTo").on("blur.validate-equalTo",function(){e(i).valid()}),t===n.val()},remote:function(t,i,s){if(this.optional(i))return"dependency-mismatch";var n,l,o=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=o.message,s="string"==typeof s&&{url:s}||s,o.old===t?o.valid:(o.old=t,n=this,this.startRequest(i),(l={})[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:l,context:n.currentForm,success:function(s){var l,r,a,d=!0===s||"true"===s;n.settings.messages[i.name].remote=o.originalMessage,d?(a=n.formSubmitted,n.prepareElement(i),n.formSubmitted=a,n.successList.push(i),delete n.invalid[i.name],n.showErrors()):(l={},r=s||n.defaultMessage(i,"remote"),l[i.name]=o.message=e.isFunction(r)?r(t):r,n.invalid[i.name]=!0,n.showErrors(l)),o.valid=d,n.stopRequest(i,d)}},s)),"pending")}}});var t,i={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,s){var n=e.port;"abort"===e.mode&&(i[n]&&i[n].abort(),i[n]=s)}):(t=e.ajax,e.ajax=function(s){var n=("mode"in s?s:e.ajaxSettings).mode,l=("port"in s?s:e.ajaxSettings).port;return"abort"===n?(i[l]&&i[l].abort(),i[l]=t.apply(this,arguments),i[l]):t.apply(this,arguments)})});var userAgent=navigator.userAgent,regexIe8=new RegExp("Trident(/4.0)|(Trident/5.0)"),timeOut,searchId,isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),clearSearch=!1,sessionData=!1,isSession=!1,isEtlstatusChecked=!1,keyCode={Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Pause:19,CapsLock:20,Esc:27,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,LeftWindow:91,RightWindow:92},ItemType={None:0,Category:1,Dashboard:2,Report:3,Datasource:4,Dataset:5,File:6,Schedule:7,Widget:8,ItemView:9,Slideshow:10,Settings:11,UserManagement:12,Permissions:13,ReportPart:14},excludedSearchKeys=[keyCode.Tab,keyCode.Shift,keyCode.Ctrl,keyCode.Alt,keyCode.Pause,keyCode.CapsLock,keyCode.PageUp,keyCode.PageDown,keyCode.End,keyCode.Home,keyCode.LeftArrow,keyCode.UpArrow,keyCode.RightArrow,keyCode.DownArrow,keyCode.Insert,keyCode.LeftWindow,keyCode.RightWindow],firstName,emailid,lastName,password,addUserDialogPosition;function isEmptyOrWhitespace(e){return""==$.trim(e)}function convertToBoolean(e){switch("string"==typeof e&&(e=e.toLowerCase()),e){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}}function handleAjaxError(){}function refreshScroller(){var e="block"==$(".collapseIcon").css("display")?$(".collapseIcon").height():0;if($(window).height()-($("#CatergoryHeading").outerHeight()+$("#base_menu_container_Div").outerHeight()+$("#listing").outerHeight()+e)<0){var t=$(window).height()-($("#CatergoryHeading").outerHeight()+$("#base_menu_container_Div").outerHeight()+e),i=$("#CatergoryHeading").outerWidth();$("#ScrollElement").ejScroller({height:window.innerWidth<1041&&t<200?200:t,width:i,buttonSize:0,scrollerSize:9})}else null!=$("#ScrollElement").data("ejScroller")&&$("#ScrollElement").data("ejScroller").destroy()}function refreshScrollerForCategory(){for(var e=0,t=0;t<$("#scroll-content #listing>li").length;t++)e+=$($("#scroll-content #listing>li")[t]).outerHeight();if($(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight()+e+$("#create-new-category").outerHeight())<0){var i=$(window).height()-($(".item-navigation").outerHeight()+$("#header-area").outerHeight()+$("#category-listing").outerHeight()+$("#create-new-category").outerHeight());$(".item-navigation").outerWidth();if($(".all-items").hasClass("active")&&$("#category-list").is(":visible")){$("#scroll-content").ejScroller({height:i,buttonSize:0,scrollerSize:9,autoHide:!0});var s=$("#scroll-content").data("ejScroller");null!=s&&null!=s&&s.refresh()}}else null!=$("#scroll-content").data("ejScroller")&&$("#scroll-content").data("ejScroller").destroy()}function addPlacehoder(e){regexIe8.test(userAgent)&&$(e).find("input[type=text],input[type=password],textarea").each(function(){""===$(this).val()?$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).show():$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).hide()})}function doAjaxPost(e,t,i,s,n,l,o,r,a,d){o&&(o.is(":input:button")||o.is("button")?o.prop({disabled:!0}):showWaitingPopup(o)),null==r&&(r=!0),null==a&&(a="application/x-www-form-urlencoded; charset=UTF-8"),$.ajax({type:e,url:t,context:this,processData:r,contentType:a,data:i,success:!0===d?$.proxy(getFnObj(s),window,i):$.proxy(getFnObj(s),window),error:$.proxy(function(e,t,i){e.statusText,n&&getFnObj(n).call(window,e,t,i)},this),complete:$.proxy(function(e){try{var t=JSON.parse(e.responseText);null!=t.data&&null!=t.data&&null!=t.data.Message&&null!=t.data.Message&&"unauthorized"==t.data.Message.toLowerCase()&&window.location.replace(window.location.href)}catch(e){}o&&(o.is(":input:button")||o.is("button")?o.prop({disabled:!1}):hideWaitingPopup(o)),l&&getFnObj(l).call(window,e)},this)})}function ShowWaitingProgress(e,t){if("show"==t){var i=createLoader(e);$(e).ejWaitingPopup({template:$("#"+i)}),$(e).ejWaitingPopup("show")}else $(e).ejWaitingPopup("hide")}function getFnObj(e){return"function"==typeof e||"string"==typeof e&&window[e]?e:void 0}function showWaitingPopup(e){if("string"==typeof e){var t=0===e.indexOf(".")?".":"#";0===e.indexOf(".")||0===e.indexOf("#")?t=e:t+=e,e=$(0===e.indexOf(".")?e:"#"+e)}else{if(e.first().attr("id"))t="#"+(e=e.first().attr("id"));else t=e="."+(e=e.first().attr("class"));e=$(0===e.indexOf(".")?e:"#"+e)}var i=createLoader(e,t);e.ejWaitingPopup({template:$("#"+i)}),e.ejWaitingPopup("show")}function hideWaitingPopup(e){"string"==typeof e&&(e=$(0===e.indexOf(".")?e:"#"+e)),e.ejWaitingPopup("hide")}function redirect(e,t){t?setTimeout(function(){window.location.assign(e)},t):window.location.assign(e)}function DateCustomFormat(e,t,i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S,x,T=new Date(t),k=e;return n=((s=T.getFullYear())+"").slice(-2),r=(a=T.getMonth()+1)<10?"0"+a:a,o=(l=["January","February","March","April","May","June","July","August","September","October","November","December"][a-1]).substring(0,3),c=(u=T.getDate())<10?"0"+u:u,h=(d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][T.getDay()]).substring(0,3),S=u>=10&&u<=20?"th":1==(y=u%10)?"st":2==y?"nd":3==y?"rd":"th",e=e.replace("yyyy",s).replace("yy",n).replace("MMMM",l).replace("MMM",o).replace("MM",r).replace("dddd",d).replace("ddd",h).replace("dd",c).replace("d",u).replace("th",S),"True"==i?(x=(g=m=T.getHours())<10?"0"+g:g,f=(_=T.getMinutes())<10?"0"+_:_,v=(b=T.getSeconds())<10?"0"+b:b,k=e.replace("HH",x).replace("mm",f).replace("ss",v)):(0==(g=m=T.getHours())&&(g=24),g>12&&(g-=12),p=g<10?"0"+g:g,w=(C=m<12?"am":"pm").toUpperCase(),f=(_=T.getMinutes())<10?"0"+_:_,v=(b=T.getSeconds())<10?"0"+b:b,k=e.replace("hhh",m).replace("hh",p).replace("h",g).replace("mm",f).replace("m",_).replace("ss",v).replace("s",b).replace("ampm",C).replace("AMPM",w)),k}function isNumberKey(e){var t=e.which?e.which:e.keyCode;return!(46!=t&&t>31&&(t<48||t>57))}function validateUserName(e){return/\s/g.test(e)?{isValid:!1,message:window.Server.App.LocalizationContent.HasWhiteSpace}:/[^a-zA-Z0-9]/.test(e)?{isValid:!1,message:window.Server.App.LocalizationContent.UserNameSpecialCharacterValicator}:{isValid:!0,message:"valid"}}function isValidUrl(e){return!!/^(?!(ftp|https?):\/\/)([a-zA-Z0-9-_]+\.)*[a-zA-Z0-9][a-zA-Z0-9-]+(\.[a-z]{2,6})?(:\d{1,5})?(\/[a-zA-Z0-9-]+[a-zA-Z0-9-]*(\.[a-z]{2,8})?)*?$/gm.test(e)}function getMaxZIndex(){var e=0;return $("div").each(function(){var t=parseInt($(this).css("zIndex"),10);t>e&&(e=t)}),e}function IsEmail(e){return!!/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,63}|[0-9]{1,3})(\]?)$/.test(e)}function IsValidContactNumber(e){return!!/^(?:|[0-9\-\+]{9,15})$/.test(e)}function onCloseMessageBox(){$("#messageBox").ejDialog("close")}function onMessageDialogClose(){$("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html("")}function messageBox(e,t,i,s,n,l,o,r,a,d){var h,c,u;($("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html(""),$("#messageBox").find(".message-header").html("<span class='su "+e+"'></span> <span class='modal-title'  data-bs-toggle='tooltip' data-bs-placement='bottom' data-container='body' title='"+t+"'  >"+t+"</h2>"),$("#messageBox").find(".message-content").html(i),$("#messageBox").find(".message-content").removeClass("text-left"),"error"==s)?(null!=n&&(c=$("<input type='button' class='app-button app-critical-action-button app-btn-danger float-end' value='"+window.Server.App.LocalizationContent.YesButton+"'></input>")).bind("click",$.proxy(getFnObj(n),window)),null!=l?((h=$("<input type='button' class='app-button app-secondary-button app-btn-secondary float-end' tabindex='-1' value='"+window.Server.App.LocalizationContent.NoButton+"'></input>")).bind("click",$.proxy(getFnObj(l),window)),(u=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(l),window))):(h=$("<input type='button' class='app-button app-secondary-button app-btn-secondary float-end' tabindex='-1' value='"+window.Server.App.LocalizationContent.NoButton+"'></input>"),u=$('<span class="su su-close"></span>'),h.click(function(){onCloseMessageBox()}),u.click(function(){onCloseMessageBox()})),$(".message-box-close").html(u),$(".message-box-btn-holder").append(h,c),$("#messageBox").unbind("keydown")):(null!=n?((c=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'></input>")).bind("click",$.proxy(getFnObj(n),window)),(u=$('<span class="su su-close"></span>')).bind("click",$.proxy(getFnObj(n),window))):(c=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'></input>"),u=$('<span class="su su-close"></span>'),c.click(function(){onCloseMessageBox()}),u.click(function(){onCloseMessageBox()})),$(".message-box-close").html(u),$(".message-box-btn-holder").append(c),$("#messageBox").on("keydown",function(e){switch(e.keyCode){case 13:case 27:c.click()}}));$('[data-bs-toggle="tooltip"]').tooltip(),$("#messageBox").ejDialog("open"),$("#messageBox").focus();var m=$("#messageBox").data("ejDialog");setTimeout(function(){null!=o&&m.option("width",o),window.innerWidth>1040&&null==r&&(r="135px"),m.option("height",r),null!=a&&m.option("maxHeight",a)},50),null!=d&&null!=d&&m.option("cssClass",d)}function deleteUserAvatar(){ShowWaitingProgress("#user-profile-master","show"),doAjaxPost("POST",deleteavatarUrl,{email:$("#user-email").val()},function(e){ShowWaitingProgress("#user-profile-master","hide"),e.status?messageBox("su-delete",window.Server.App.LocalizationContent.DeleteAvatar,window.Server.App.LocalizationContent.DeleteAvatarSuccess,"success",function(){var e=$("#logged-user").html().toLowerCase();$("#user-profile-picture").attr("src",getdefaultavatarUrl),$("#user-profile-picture").siblings("#avatar-delete-click").remove(),$("#user-name").val()==e&&$(".profile-picture,#profile-picture-menu").find("img").attr("src",getdefaultavatarUrl),onCloseMessageBox()}):messageBox("su-delete",window.Server.App.LocalizationContent.DeleteAvatarTitle,window.Server.App.LocalizationContent.DeleteAvatarError,"success",function(){onCloseMessageBox()})})}function IsValidName(e,t){return!("username"===e.toLowerCase()?new RegExp(/[*\[\\\]\|\/\:\<\>\%\+\#\&\?\'\"\@\;\,]/):"datasetname"===e.toLowerCase()||"report-part"===e.toLowerCase()?new RegExp(/[!"#$%&'()*+,\s./:;<=>?@[\\\]^`{|}~-]/g):new RegExp(/[*\[\\\]\|\/\:\<\>\%\+\&\#\?\'\"\;\,]/)).test(t)}function IsValidNumber(e){return/^\d+$/.test(e)}function UsernameValidation(e){return!!/^[a-zA-Z0-9]([._-](?![._-])|[a-zA-Z0-9]){1,252}[a-zA-Z0-9]$/.test(e)}function IsValidUsername(e){return UsernameValidation(e)||IsEmail(e)}function IsValidUsernameLength(e){return!!/^.{3,254}$/.test(e)}function GridLocalization(){ej.Grid.Locale["en-US"]={EmptyRecord:window.Server.App.LocalizationContent.NoRecords,StringMenuOptions:[{text:window.Server.App.LocalizationContent.SearchKeyStart,value:"StartsWith"},{text:window.Server.App.LocalizationContent.SearchKeyEnd,value:"EndsWith"},{text:window.Server.App.LocalizationContent.SearchKeyContanins,value:"Contains"},{text:window.Server.App.LocalizationContent.SearchKeyEqual,value:"Equal"},{text:window.Server.App.LocalizationContent.SearchKeyNotEqual,value:"NotEqual"}],FilterMenuCaption:window.Server.App.LocalizationContent.SearchValue,Filter:window.Server.App.LocalizationContent.Search,Clear:window.Server.App.LocalizationContent.ClearSearch},ej.Pager.Locale["en-US"]={pagerInfo:window.Server.App.LocalizationContent.pageCount,firstPageTooltip:window.Server.App.LocalizationContent.FirstPage,lastPageTooltip:window.Server.App.LocalizationContent.LastPage,nextPageTooltip:window.Server.App.LocalizationContent.NextPage,previousPageTooltip:window.Server.App.LocalizationContent.PreviousPage}}function PerformSearch(e){var t;if("#search-schedules"==e){t=$("#scheduleGrid").data("ejGrid");var i=$("#search-schedules").val();if(i.indexOf(":")>-1){var s=i.split(":")[0].toLowerCase(),n=i.split(":")[1].trim();switch(i.match(/:/g).length>1&&(firstKey=i.split(":")[1],secondKey=i.split(":")[2],n=(firstKey+":"+secondKey).trim()),s.replace(/ /g,"").toLowerCase()){case"name":s="Name";break;case"report":s="ItemName";break;case"lastrun":s="LastRunString";break;case"nextscheduledrun":s="NextScheduleString";break;case"exportpath":s="ExportPath";break;case"scheduleparameter":s="ScheduleParameter";break;case"status":s="Status"}t.model.searchSettings.fields=s,t.model.searchSettings.key=n,t.refreshContent(),t.model.searchSettings.fields=""}else t.search($("#search-schedules").val())}else"#search-slideshows"==e?((t=$("#slideshowGrid").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-users"==e?((t=$("#user_grid").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-ad-users"==e?($("#checkbox-header").prop("checked",!1),$(".checkbox-row").prop("checked",!1),(t=$("#user_grid").data("ejGrid")).search($("#search-ad-users").val())):"#search-items"==e?((t=$("#items").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-home-page"==e?((t=$("#items").data("ejGrid")).model.filterSettings.filteredColumns=[],(!$("#category-list").is(":visible")||$("#category-list").length<=0)&&($(".all-items").hasClass("active")&&(t.model.filterSettings.filteredColumns=[{field:"CategoryName",operator:"equal",value:$("#category-section-name").html()}]),t.model.pageSettings.currentPage=1,t.refreshContent())):"#search-published-items"==e?((t=$("#PublishItemGrid").data("ejGrid")).model.pageSettings.currentPage=1,t.search($("#search-published-items").val()),t.refreshContent()):"#search-group-users"==e||"#search-groups"==e?((t=$("#Grid").data("ejGrid")).model.pageSettings.currentPage=1,t.refreshContent()):"#search-ad-groups"==e?(t=$("#Grid").data("ejGrid")).search($("#search-ad-groups").val()):"#ad-user-import"==e?($(".grid-error-validation").css("display","none"),$(".empty-validation").css("display","none"),$(".grid-validation").css("display","none"),searchADUsers($("#ad-user-import").val())):"#ad-group-import"==e?($(".grid_error_validation").css("display","none"),$(".empty_validation").css("display","none"),$(".grid_validation").css("display","none"),searchADGroups($("#ad-group-import").val())):"#search-user-permission"==e?(t=$("#itempermissiongrid").data("ejGrid")).search($("#search-user-permission").val()):"#search-group-permission"==e?(t=$("#itemgrouppermissiongrid").data("ejGrid")).search($("#search-group-permission").val()):"#userSearchKey"==e?(t=$("#UserGrid").data("ejGrid")).refreshContent():"#groupSearchKey"==e?(t=$("#GroupGrid").data("ejGrid")).refreshContent():"#search-linked-accounts"==e?(t=$("#ConnectedAccountGrid").data("ejGrid")).search($("#search-linked-accounts").val()):"#search-datasource-grid"==e&&((t=$("#add_datasource_grid").data("ejGrid")).model.selectedRecords=[],t.model.pageSettings.currentPage=1,t.refreshContent())}function SuccessAlert(e,t,i){window.top.$("#success-alert").css("display","table"),window.top.$("#message-header").html(e),window.top.$("#message-content").html(t),setTimeout(function(){window.top.$("#success-alert").fadeOut()},i)}function SuccessAlertFromPopup(e,t,i){window.top&&"function"==typeof window.top.SuccessAlert&&window.top.SuccessAlert(e,t,i)}function WarningAlert(e,t,i){parent.$("#warning-alert").css("display","table"),parent.$("#warning-alert #message-header").html(e),parent.$(" #warning-alert #message-content").html(t),null!=i&&""!=i&&setTimeout(function(){parent.$("#warning-alert").fadeOut()},i),$(document).on("click",".close-div",function(){parent.$("#warning-alert").fadeOut()})}function MobileAlert(e,t){parent.$("#mobile-alert").fadeIn(),parent.$("#mobile-alert #message").html(e),null!=t&&""!=t&&setTimeout(function(){parent.$("#mobile-alert").fadeOut(1e3)},t)}function ProgressAlert(e,t,i,s,n){var l="progress-alert_"+e;if(!parent.$("#progress-alert-container").find("#"+l).length){var o='<div id="'+l+'" class="progress-alert"><div id="image-container"><div class="image-holder"><span id="progress-notify-success" class="su su-tick display-none" alt="'+window.Server.App.LocalizationContent.SucessIcon+'"></span><div id="progress-notify-loader"><svg x="0px" y="0px" width="24px" height="30px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve"><rect x="0" y="10" width="4" height="10" fill="#0565FF" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.8s" repeatCount="indefinite" /></rect><rect x="8" y="10" width="4" height="10" fill="#0565FF" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.8s" repeatCount="indefinite" /></rect><rect x="16" y="10" width="4" height="10" fill="#0565FF" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.8s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.8s" repeatCount="indefinite" /></rect></svg></div></div></div><div id="message" class="div-close"><h1 id="message-header"></h1><span id="message-content"></span></div><div class="close-div"><span id="close-content">"'+window.Server.App.LocalizationContent.CloseIcon+'"</span></div></div>';$("#progress-alert-container").append(o)}parent.$("#"+l).css("display","table"),parent.$("#"+l+" #message-header").html(t),parent.$("#"+l+" #message-content").html(i),n?(parent.$("#"+l+" #progress-notify-loader").addClass("display-none"),parent.$("#"+l+" #progress-notify-success").removeClass("display-none")):(parent.$("#"+l+" #progress-notify-loader").removeClass("display-none"),parent.$("#"+l+" #progress-notify-success").addClass("display-none")),null!=s&&""!=s&&setTimeout(function(){parent.$("#"+l).fadeOut()},s),$(document).on("click",".close-div",function(){var e=$(this);parent.$(e).parent().remove()})}function getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var s=t[i].split("=");if(s[0]==e)return s[1]}return null}function getUrlQueryVariable(e,t){for(var i=e.substring(e.indexOf("?")+1).split("&"),s=0;s<i.length;s++){var n=i[s].split("=");if(n[0]==t)return n[1]}return null}function createLoader(e,t){var i="";if("string"==typeof e){t=0===e.indexOf(".")?".":"#";if(i=(e=0===e.indexOf(".")||0===e.indexOf("#")?e.slice(1,e.length):e)+"-loader-icon",0==$("#"+i).length&&0!=$(t+e).length){var s=$("<div class='loader-blue loader-icon' id='"+i+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div>");$("body").append(s)}return i}t=0===(e=t).indexOf(".")?".":"#";if(i=(e=e.slice(1,e.length))+"-loader-icon",0==$("#"+i).length&&0!=$(t+e).length){s=$("<div class='loader-blue loader-icon' id='"+i+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'></circle></svg></div>");$("body").append(s)}return i}function ajaxPostCall(e,t,i,s,n,l,o){if(embedConfig.IsEmbedCode){if("GET"==e){var r=jQuery.param(i);t.api=t.api+"?"+r,i=null}return $.ajax({type:e,url:reportServerApiUrl+t.api,headers:{"Content-type":"application/json",Authorization:"bearer "+designerToken},data:JSON.stringify(i),beforeSend:function(e){isNullOrWhitespace(s)||s(e)},success:function(e,t){isNullOrWhitespace(n)||n(e)},error:function(e){isNullOrWhitespace(l)||l()},complete:function(e){isNullOrWhitespace(o)||o(e)}})}return $.ajax({type:e,url:t.web,data:i,beforeSend:function(e){isNullOrWhitespace(s)||s(e)},success:function(e,t){isNullOrWhitespace(n)||n(e)},error:function(e){isNullOrWhitespace(l)||l()},complete:function(e){isNullOrWhitespace(o)||o(e)}})}function isNullOrWhitespace(e){return null==e||null==e||""==$.trim(e)}function getCurrentPageNumber(e,t,i,s){var n=i-t;if(n>e){var l=n%e===0?n/e:Math.floor(n/e+1);return s>l?l:s}return 1}function isValidGuid(e){return/^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$/gi.test(e)}function showOrHideGridPager(e){var t=$(e).ejGrid("option","pageSettings");t.totalRecordsCount<=t.pageSize?$(e+" .e-pager").css("display","none"):$(e+" .e-pager").css("display","block")}function blurServerAppContainer(e){null!=e&&""!=e||(e="5px"),$("#header-area, #menu-area, #content-area, footer, .cookie-notification").css("filter","blur("+e+")"),$("#server-app-container").css("overflow","hidden"),$("#unlock-enterprise-features-container").length>0&&$("#unlock-enterprise-features-container").addClass("blur-content")}function unblurServerAppContainer(){$("#header-area, #menu-area, #content-area, footer, .cookie-notification").css("filter",""),$("#server-app-container").css("overflow",""),$("#unlock-enterprise-features-container").length>0&&$("#unlock-enterprise-features-container").removeClass("blur-content")}function generateUUID(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)})}function PreloadResources(e,t){setTimeout(function(){for(var i=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")||-1!=navigator.userAgent.indexOf("Edge"),s=0;s<e.length;s++){var n=document.createElement("link");n.href=e[s],n.rel=i?"preload":"prefetch",n.as=t,document.head.appendChild(n)}})}function refreshToolTip(e){null==e&&(e="tooltip"),$('[data-bs-toggle="'+e+'"]').tooltip({animation:!0,delay:{show:500},html:!0})}function extractXSRFTokenFromCookie(){var e=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function isValidOrigin(e){return new RegExp(/^https?:\/\/(?:w{1,3}\.)?[^\s.]+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))/).test(e)}function createWaitingPopup(e){ejs.popups.createSpinner({target:document.getElementById(e)})}$(document).ready(function(e){$("body, .login-main, #server-app-container").removeAttr("style"),$("#layout-body-loader-icon").css("display","none"),$(document).on("click",".close-warning-icons",function(e){$("#content-area").removeClass("suspension-warning-space"),$(".suspension-warning").css("display","none")}),$(document).on("click",".close-user-warning-icons",function(e){$("#content-area").removeClass("user-warning-space"),$(".user-warning").css("display","none")}),$("form").attr("autocomplete","off"),$("input[type=text], input[type=password]").attr("autocomplete","off"),$.fn.tooltip=function(e){return this.each(function(){new bootstrap.Tooltip(this,e)})},$('[data-bs-toggle="tooltip"]').tooltip(),$('.help-option [second-toggle="tooltip"]').each(function(){var e=bootstrap.Tooltip.getInstance(this);e&&e.dispose()}),$('.help-option [second-toggle="tooltip"]').tooltip({animation:!0,delay:{show:500,hide:100}}),$('#app-navigation [data-bs-toggle="tooltip"]').each(function(){var e=bootstrap.Tooltip.getInstance(this);e&&e.dispose()}),$('#app-navigation [data-bs-toggle="tooltip"]').tooltip({animation:!0,delay:{show:500,hide:100}}),document.querySelectorAll('[data-bs-toggle="profile-tag-tooltip"]').forEach(e=>{new bootstrap.Tooltip(e,{animation:!0,html:!0,placement:"top"})}),$(".dropdown-menu #notify_header").click(function(e){e.stopPropagation()}),$(document).on("click","#notification-content-area.dropdown-menu",function(e){e.stopPropagation()}),$("#notification-icon").click(function(){if(!$("#notification-link").hasClass("open")){var e=angular.element($("#notification-content")).scope();e.$apply(function(){e.notifications=[],e.isFinal=!0,e.skip=0});var t=createLoader("notification-content-area");$("#notification-content-area").ejWaitingPopup({template:$("#"+t)}),$("#notification-content-area").addClass("show"),$("#notification-content-area").ejWaitingPopup("show"),$("#notification-content-area").removeClass("show"),$.ajax({type:"GET",url:getUserNotificationsPartialViewResultUrl,success:function(e){null!==e&&(angular.element($("#notification-content")).scope(),function(e){var t=angular.element($("#notification-content")).scope();parent.$("#notification-content-area").ejWaitingPopup("show"),t.$apply(function(){for(var i=t.skip,s=0;s<e.LogList.length;s++)t.notifications.push(e.LogList[s]);e.LogList.length>0?parent.$("#view-all-notification").removeClass("not-active"):parent.$("#view-all-notification").addClass("not-active"),t.totalNotifications=e.LogCount,t.skip=t.skip+e.LogList.length,t.isFinal=t.skip==t.totalNotifications,parent.$("#notification-content-area").ejWaitingPopup("hide"),setTimeout(function(){for(var e=document.getElementsByTagName("img"),t=i;t<e.length;t++)e[t].getAttribute("data-actual-image")&&e[t].setAttribute("src",e[t].getAttribute("data-actual-image"))},700)})}(e.Data))}}),$("#notification-indicator").remove()}}),$("#bold-etl").click(function(e){canCheckSession&&(isEtlstatusChecked?(document.getElementById("bold-etl-href").click(),isEtlstatusChecked=!1):(e.preventDefault(),$.ajax({type:"Post",url:etlHealthyStatusUrl,success:function(e){e.isEtlServiceHealthy?(isEtlstatusChecked=!0,$("#bold-etl").click()):WarningAlert("",window.Server.App.LocalizationContent.ETLLogoDisabled.format("<a target='_blank' href='"+etlHelpLink+"'>","</a>"),7e3)}})))}),$(function(){$(document).click(function(e){$("#menu-area").hasClass("in")&&$("#menu-area").collapse("hide")})}),$(document).on("touchend",function(e){$("#menu-area").hasClass("in")&&$("#menu-area").collapse("hide")});var t=$('<div id="nav-backdrop" class="modal-backdrop" style="z-index: 50; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; color: #fff; opacity: 0; position: absolute"></div>');$("#upload-item-section, #notification-link, #account-profile").on("hidden.bs.dropdown",function(){parent.$("#nav-backdrop").hide()}),$("#notification-link, #account-profile, #upload-item-section").click(function(e){0===$(".dropdown-backdrop").length&&$("body").append(t),$("#notification-link").hasClass("open")?($("#account-profile").hasClass("open"),t.show()):t.show()}),$(document).on("click","#account-profile .profile-info",function(e){e.stopPropagation()}),t.click(function(){t.hide()}),$(document).on("click",".dropdown-backdrop",function(){parent.$("#nav-backdrop").hide()}),"ad-user-import"==(searchId=$("#search-area").children("input").attr("id"))||"AD-group-import"==searchId||"search-ad-users"==searchId||"search-ad-groups"==searchId?($.xhrPool=[],$.xhrPool.abortAll=function(){$(this).each(function(e,t){t.abort()}),$.xhrPool.length=0},$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie()),$.xhrPool.push(e)},complete:function(e){var t=$.xhrPool.indexOf(e);t>-1&&$.xhrPool.splice(t,1)}})):($.xhrPool=[],$.xhrPool.abortAll=function(){$(this).each(function(e,t){t.abort()}),$.xhrPool.length=0},"undefined"!=typeof ej&&void 0!==ej.UrlAdaptor?(ej.UrlAdaptor.prototype.beforeSend=function(e,t){t.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie()),$.xhrPool.push(t)},$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())},complete:function(e){var t=$.xhrPool.indexOf(e);t>-1&&$.xhrPool.splice(t,1)}})):$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}})),$(".lazyload").each(function(){if("footerlogo"==$(this).attr("data-id"))$(this).parent().find("p#poweredbysyncfusion").append($("<img>").attr({src:$(this).attr("data-src"),alt:$(this).attr("data-alt"),id:$(this).attr("data-id"),onerror:$(this).attr("data-default")}));else if("profilelogo"===$(this).attr("data-id")||"user-profile-picture"===$(this).attr("data-id"))$(this).parent().append($("<img>").attr({src:$(this).attr("data-src-value"),alt:$(this).attr("data-alt"),id:$(this).attr("data-id"),onerror:$(this).attr("data-default")}));else if($(this).parent().append($("<img>").attr({src:$(this).attr("data-src"),alt:$(this).attr("data-alt"),id:$(this).attr("data-id"),onerror:$(this).attr("data-default")})),"application-logo"===$(this).attr("data-id")){var e=$(this).attr("data-src");if(void 0!==e&&""!==e&&e.length>3)"svg"===e.substr(e.length-3,e.length).toLowerCase()&&$("#application-logo").addClass("application-logo-svg")}$(this).remove()}),window.isSiteLoaded=!1,$("#top-menu-dropdown-profile").off("show.bs.dropdown").on("show.bs.dropdown",function(){"true"==isUmsAdmin.toLowerCase()&&$("#top-menu-dropdown-profile .dropdown-menu.sub-menu .admin-privilege").show(),window.isSiteLoaded||$.ajax({type:"POST",url:window.userTenantsUrl,success:function(e){$("#user-sites .loader-sites-gif").remove();for(var t=e.Sites,i=t.length>2?2:t.length,s=0;s<i;s++){var n=t[s].DNS;null!=t[s].TenantIdentifier&&(n+="/"+window.tenantIdentifierPrefix+"/"+t[s].TenantIdentifier),$("#user-sites").append($("<a href='"+n+"' target='_blank'> <div class='site-logo-container'> <img src='"+n+"/get-client-logo?logotype=headerlogo' alt='boldreports-header' class='site-logo'/><span class='site-name'>"+t[s].TenantName+"</span></div></a>"))}t.length>=3?$("#more-sites-id").append("<div class='float-start more-sites'><a href='"+window.idpUrl+"' target='_blank'>more sites...</a></div>"):$("#more-sites-id").remove(),window.isSiteLoaded=!0}})}),$(".hide-display").each(function(){$(this).removeClass("hide-display")}),"undefined"!=typeof showFeedbackDialog&&"true"==showFeedbackDialog.toLowerCase()&&($("#do-not-show-button").removeClass("display-none"),$("#show-later-button").removeClass("display-none"),$("#cancel-button").addClass("display-none"),$("#close-general-feedback").attr("data-feedback-close",!1),openFeedbackWindow());var i=createLoader("#body");if($("#body").ejWaitingPopup({template:$("#"+i)}),"undefined"!=typeof canCheckSession&&(isSession=Boolean(canCheckSession)),isSession){function s(){$.ajax({type:"GET",url:isSessionActiveUrl,success:function(e){e.isactive?setTimeout(function(){s()},18e4):(function(){if($(".e-btn-icon.e-icon-dlg-close.e-icons").is(":visible")){var e=$(".e-btn-icon.e-icon-dlg-close.e-icons:visible");$.each(e,function(e,t){var i=$(t).parents(".e-dialog").attr("id");null==i&&null==i||document.getElementById(i).ej2_instances[0].hide()})}if($(".popup-close").is(":visible")){var t=$(".popup-close:visible");$.each(t,function(e,t){var i=$(t).parents(".e-dialog").attr("id");null==i&&null==i||(eDialog=$("#"+i).data("ejDialog"),eDialog.close())})}}(),function(){if("undefined"!=typeof isViewerV2Enabled&&!isViewerV2Enabled||"undefined"!=typeof isDesignerV2Enabled&&!isDesignerV2Enabled){var e=$("#messageBox").data("ejDialog");null==e&&($("#messageBox").ejDialog({width:parent.window.innerWidth>460?"450px":parent.window.innerWidth-10,height:"150px",showOnInit:!1,allowDraggable:!0,enableResize:!1,showHeader:!1,enableModal:!0,close:"onMessageDialogClose"}),e=$("#messageBox").data("ejDialog")),messageBox("",window.Server.App.LocalizationContent.SessionHeader,window.Server.App.LocalizationContent.SessionContent,"success",n)}else{var t="",i='<span class ="dialog-header-title">'+window.Server.App.LocalizationContent.SessionHeader+"</span>";if(!sessionData){var s=document.createElement("div");s.setAttribute("id","session-time-dialog");var o=document.getElementById("content-area");if(null==o){var r=document.createElement("div");r.setAttribute("id","content-area"),document.body.appendChild(r),o=document.getElementById("content-area")}t=ejs.popups,o.appendChild(s);var a=window.Server.App.LocalizationContent.SessionContent;new t.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>500?"470px":window.innerWidth-10,height:"auto",showHeader:!1,isModal:!0,enableModal:!0,closeOnEscape:!0,header:i,close:"closeDialog",showCloseIcon:!0,content:a,buttons:[{click:function(e){n()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.OKButton}}],close:l}).appendTo(s),sessionData=!0}}}())}})}setTimeout(function(){s()},18e4)}function n(){location.reload()}function l(){location.reload()}String.prototype.format=function(){for(k in a=this,arguments)a=a.replace("{"+k+"}",arguments[k]);return a}}),$(document).on("keyup","textarea",function(e){if(8!=e.keyCode&&46!=e.keyCode){var t=$(this).attr("maxlength");null!=t&&$(this).val().length>=t&&$(this).val($(this).val().substring(0,t))}}),$("textarea").keyup(function(e){if(8!=e.keyCode&&46!=e.keyCode){var t=255;null!=$(this).attr("maxlength")&&(t=$(this).attr("maxlength")),$(this).val().length>=t&&$(this).val($(this).val().substring(0,t))}}),$(document).on("focus","input[type=text],input[type=password],textarea",function(){regexIe8.test(userAgent)&&$(this).next(".placeholder").removeClass("show").addClass("hide")}),$(document).on("focusout","input[type=text],input[type=password],textarea",function(){regexIe8.test(userAgent)&&""===$(this).val()&&$(this).next(".placeholder").removeClass("hide").addClass("show")}),$(document).on("focus",".placeholder",function(){$(this).prev("input").focus()}),$(document).on("keyup","#SearchCategory, #search-groups, #search-group-users, #search-published-items, #ad-user-import, #userSearchKey,#groupSearchKey, #ad-group-import, #searchItems, #search-slideshows, #search-schedules, #search-users, #search-ad-users, #search-ad-groups, #search-user-permission, #search-group-permission, #search-database-users,#search-tree, #search-home-page, #search-items, .search-user-holder, .tree-view-search-holder, #search-linked-accounts, #template-datasource-search-items,#search-datasource-grid",function(e){var t="#"+this.id;""!=$(t).val()?"#search-home-page"==t?$(t).parent().siblings("span.close-icon").css("display","block"):($(t).siblings("span.close-icon").css("display","block"),$(t).siblings("span.search-user").css("display","none"),$(t).siblings("span.search-accounts").css("display","none"),$(t).siblings("span.search-group").css("display","none"),$(t).siblings("span.search-group-users").css("display","none"),$(t).siblings("span.search-icon").css("display","none"),$(t).siblings("span.search-item").css("display","none"),$(t).siblings("span.search-schedule").css("display","none"),$(t).siblings("span.search-slideshows").css("display","none"),$(t).siblings("span.search").css("display","none")):"#search-home-page"==t?$(t).parent().siblings("span.su-search").css("display","block"):($(t).siblings("span.close-icon").css("display","none"),$(t).siblings("span.su-search").css("display","block"))}),$(document).on("click","#clear-search,.clear-search",function(){var e=$(this).prevAll("input");(""==e||null==e||null==e||e.length<=0)&&(e=$(this).prev("div").find("input"));var t="#"+e.attr("id");if(e.val(""),clearSearch||$("#clear-search").css("display","none"),""==e.val()){if("#search-home-page"!=t||clearSearch?$("#clear-search").siblings("span.su-search").css("display","block"):($("#clear-search").parent().siblings("span.su-search").css("display","block"),$(".search-area").removeClass("add-background"),$(".placeholder, #clear-search").hide(),$(".all-items").hasClass("active")&&!$("#category-list").is(":visible")?setTimeout(function(){$(".search-area").prevAll().show().parent().removeClass("float-end"),$("#category-section-name").show()},300):setTimeout(function(){$(".search-area").prevAll(":not(#back-icon)").show().parent().removeClass("float-end"),$("#category-section-name").show()},300),setTimeout(function(){$(".search-home-section:visible").removeClass("show")},300)),"#ad-user-import"==t||"#ad-group-import"==t||"#search-database-users"==t)if("#search-database-users"==t){var i=jQuery.Event("keypress",{keyCode:13});$("#search-database-users").trigger(i)}else{(s=$("#Grid").data("ejGrid")).option("dataSource","")}else PerformSearch(t);if("#search-ad-users"==t||"#search-ad-groups"==t)if("#search-ad-groups"==t){var s=$("#Grid").data("ejGrid");$("#checkbox-header").prop("checked",!1),$(".checkbox-row").prop("checked",!1),s.clearSelection()}else{s=$("#user_grid").data("ejGrid");$("#checkbox-header").prop("checked",!1),$(".checkbox-row").prop("checked",!1),s.clearSelection()}}else e.val("")}),$(document).on("keydown","#search-groups, #search-group-users, #searchItems, #search-published-items, #search-schedules,#search-slideshows,#userSearchKey,#groupSearchKey, #search-users, #search-user-permission, #search-group-permission, #search-home-page, #search-items, #search-linked-accounts",function(e){$.xhrPool.abortAll();var t=parseInt(e.which),i="#"+this.id;null!=timeOut&&(clearTimeout(timeOut),timeOut=null),t===keyCode.Enter?PerformSearch(i):-1===excludedSearchKeys.indexOf(t)&&(timeOut=setTimeout(function(){PerformSearch(i)},900))}),window.onpopstate=function(e){var t=window.location.search,i=window.location.pathname.split("/");e.preventDefault();var s=void 0!==i[2]?i[2]:null,n=null!=(void 0!==i[3]&&"dashboards"==i[3]?i[3]:null)&&void 0!==i[4]&&isValidGuid(i[4])?i[4]:null,l=null!=n&&void 0!==i[5]?i[5]:null,o=null!=n&&void 0!==i[6]?i[6]:null,r=getQueryVariable("view"),a=getQueryVariable("tab");if(null!=s&&null!=r&&null!=l&&null!=o&&null!=n){var d=$("#current-url").attr("data-url").split("/");if(n!==(null!=(void 0!==d[3]&&"dashboards"==d[3]?d[3]:null)&&void 0!==d[4]&&isValidGuid(d[4])?d[4]:null)){var h=rootUrlAction+"/dashboards";DashboardRender(h,n,l,o,r,a)}else $("#current-url").attr("data-url",rootUrlAction+"/dashboards/"+n+"/"+decodeURI(l)+"/"+decodeURI(o)+"?view="+decodeURI(r))}else if(null!=r&&null==l&&null==o){0==$(".item-navigation li[data-value='"+r+"']").hasClass("active")&&($(".item-navigation li").removeClass("active"),$(".item-navigation li[data-value='"+r+"']").addClass("active")),$(".item-navigation li[data-value='"+r+"']").trigger("click"),document.getElementById("dashboard_render_iframe").contentWindow.location.href="about:blank",$("#item-viewer #initial-item-message").css("display","block"),$("#dashboard_render_iframe").css("display","none")}else if(""==t&&null==l&&null==r&&i.length<5){0==$(".item-navigation li[data-value='categories']").hasClass("active")&&($(".item-navigation li").removeClass("active"),$(".item-navigation li[data-value='categories']").addClass("active")),$(".item-navigation li[data-value='categories']").trigger("click");var c=decodeURI(i[i.length-1]);$(".category-link[data-category='"+c+"']").trigger("click")}null===e.state||JSON.stringify(e.state)===JSON.stringify({})&&null===a||document.getElementById("dashboard_render_iframe").contentWindow.postMessage("filter","*")},$(window).on("load",function(){"undefined"!=typeof getTenantStatusUrl&&$.ajax({type:"Post",url:getTenantStatusUrl,success:function(e){if(void 0!==e&&e.IsAdmin&&!e.IsTenantStatusActive){$(".warning-content").text("");var t=window.location.pathname.indexOf("administration/payments")>-1,i="";"MarkedForSuspension"!==e.TenantStatus||t?"Suspended"===e.TenantStatus&&(i=window.Server.App.LocalizationContent.SuspendedWarning+" <span class='close-warning-icons su-close'></span>",$(".warning-content").append(i),$(".suspension-warning").css("display","block"),$("#content-area").addClass("suspension-warning-space")):(i=window.Server.App.LocalizationContent.SuspensionWarning+e.TenantStatusUpdateDate+". "+window.Server.App.LocalizationContent.Click+" <a href='"+paymentPageUrl+"'>"+window.Server.App.LocalizationContent.Here+"</a>"+window.Server.App.LocalizationContent.NavigatePaymentPage+"<span class='close-warning-icons su-close'></span>",$(".warning-content").append(i),$(".suspension-warning").css("display","block"),$("#content-area").addClass("suspension-warning-space"))}}}),"undefined"!=typeof getNotificationCountUrl&&$.ajax({type:"Post",url:getNotificationCountUrl,success:function(e){null!=e&&null!=e&&(e.notificationCount>0?$("#user-system-notification").append($("<span>").attr({id:"notification-indicator"})):$("#user-system-notification").find("#notification-indicator").remove())}})}),$(document).ready(function(e){$("#cookiesubs,#cookiesubs-dashboards").on("click",function(){$(".cookie-notification").remove(),$(".cookie-notification-dashboards").remove(),$.ajax({type:"POST",url:window.setPermissionUrl})})}),$(document).on("show.bs.collapse","#menu-area",function(){$("#collapse-menu-backdrop").show(),$(".mobile-menu-icon span i").removeClass("su-mobile-menu-icon"),$(".mobile-menu-icon span i").addClass("su-close")}),$(document).on("hide.bs.collapse","#menu-area",function(){$("#collapse-menu-backdrop").hide(),$(".mobile-menu-icon span i").removeClass("su-close"),$(".mobile-menu-icon span i").addClass("su-mobile-menu-icon")}),$(document).on("hidden.bs.collapse","#menu-area",function(){$("#menu-area").css("width","175px")}),$(document).on("click","#deploy-error-copy",function(e){var t=$("#deploy-error-copy"),i=$("#deploy-error-box");i.prop("disabled",!1),i.select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?(t.removeClass("su su-copy"),t.attr("data-original-title","")):(document.execCommand("copy"),t.attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess),t.tooltip("hide").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess).tooltip("fixTitle").tooltip("show"),i.prop("disabled",!0),setTimeout(function(){t.attr("data-original-title",window.Server.App.LocalizationContent.LinkCopy),t.tooltip()},3e3))}),$(document).on("focusin","#deploy-error-box",function(){$("#deploy-error-copy").addClass("focusdiv")}),$(document).on("focusout","#deploy-error-box",function(){$("#deploy-error-copy").removeClass("focusdiv")});var isUserNameExist=!1,isAddUserUserNameValidated=!1;function userNameVaidation(){var e=$("#username").val().trim();isEmptyOrWhitespace(e)||$.ajax({type:"POST",url:isUsernameExistsUrl,data:{username:e.toLowerCase()},success:function(e){if(isAddUserUserNameValidated=!0,isUserNameExist=e.IsUserNameExist,""!=e.Username||e.IsUserNameExist)return isUserNameExist=!0,$("#username").closest("div").addClass("has-error"),void $("#invalid-username").html(window.Server.App.LocalizationContent.IsUserNameExist).show()}})}function ValidateFields(){null==$("#user-search").val()&&null==$("#group-search").val()||null==$("#access-selection").val()?$("#save-permission").attr("disabled",!0):$("#save-permission").attr("disabled",!1)}function refreshItemUserPermissionGrid(){window.parent.$("#permission-popup_wrapper").ejWaitingPopup("show");var e=$("#itempermissiongrid").data("ejGrid"),t=e.model.pageSettings.currentPage,i=e.model.sortSettings.sortedColumns,s=$("#item-id-hidden").val();$.ajax({type:"POST",url:getItemUserPermissionUrl,data:{itemId:s},success:function(e){$("#itempermissiongrid").ejGrid("option","model.dataSource",e);var s=$("#itempermissiongrid").data("ejGrid");s.gotoPage(t),null!=i&&null!=i[0]&&s.sortColumn(i[0].field,i[0].direction)}})}function refreshItemGroupPermissionGrid(){window.parent.$("#permission-popup_wrapper").ejWaitingPopup("show");var e=$("#itemgrouppermissiongrid").data("ejGrid"),t=e.model.pageSettings.currentPage,i=e.model.sortSettings.sortedColumns,s=$("#item-id-hidden").val();$.ajax({type:"POST",url:getItemGroupPermissionUrl,data:{itemId:s},success:function(e){$("#itemgrouppermissiongrid").ejGrid("option","model.dataSource",e);var s=$("#itemgrouppermissiongrid").data("ejGrid");s.gotoPage(t),null!=i&&null!=i[0]&&s.sortColumn(i[0].field,i[0].direction)}})}function bindAllUsersandGroups(){window.parent.$("#permission-popup_wrapper").ejWaitingPopup("show"),$("#access-selection").append(window.accessList),$("#user-search").append(window.userList),$("#group-search").append(window.groupList),$("#user-search").selectpicker("destroy"),$("#user-search").selectpicker(),$("#group-search").selectpicker("destroy"),$("#group-search").selectpicker(),window.parent.$("#permission-popup_wrapper").ejWaitingPopup("hide")}function onUserAddDialogClose(){$("#username, #firstname, #lastname, #user-password").prop("disabled",!1),$("#disable-info").html(""),$("#password_policy_rules").remove(),isEmailExist=!1,isUserNameExist=!1,$("#user-add-dialog").ejDialog("close"),$(".no-results-create-user").css("display","none")}function onUserDialogOpen(){if($(".dropdown").removeClass("open"),$(".form input[type='text']").val(""),$(".form input[type='password']").val(""),$(".input-block-level").val().match(/([a-zA-Z0-9._+-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi))$("#mailid").val($(".input-block-level").val());else{var e=$(".input-block-level").val().trim().split(" ");$("#firstname").val(e[0]),$("#lastname").val(e[1])}$("#user-add-dialog").ejDialog("open"),$(".e-dialog-icon").attr("title",window.Server.App.LocalizationContent.Close),addUserDialogPosition=$("#user-add-dialog_wrapper").offset()}function createPasswordPolicyRules(){""!=$("#user-password").val()&&0==$("#user-password").next("ul").length&&($("#user-password").after("<ul id='password_policy_rules' style='padding-bottom: 0px!important'></ul>"),$("#password_policy_rules").append("<li id='p_policy_heading'><p>"+window.Server.App.LocalizationContent.PasswordRule1+"</p></li>"),$("#password_policy_rules").append("<li id='p_policy_length'><span class='su su-close'></span>"+window.Server.App.LocalizationContent.PasswordRule2+"</li>"),$("#password_policy_rules").append("<li id='p_policy_uppercase'><span class='su su-close'></span>"+window.Server.App.LocalizationContent.PasswordRule3+"</li>"),$("#password_policy_rules").append("<li id='p_policy_lowercase'><span class='su su-close'></span>"+window.Server.App.LocalizationContent.PasswordRule4+"</li>"),$("#password_policy_rules").append("<li id='p_policy_number'><span class='su su-close'></span>"+window.Server.App.LocalizationContent.PasswordRule5+"</li>"),$("#password_policy_rules").append("<li id='p_policy_specialcharacter'><span class='su su-close'></span>"+window.Server.App.LocalizationContent.PasswordRule6+"</li>"),$("#confirm-password-section").css("margin-top","-53px"),$(".button-section").css("margin-top","-20px"),$(".button-section").addClass("top-margin"),$("#user-add-dialog_wrapper").css("top",addUserDialogPosition.top/2+"px")),""==$("#user-password").val()&&0!=$("#user-password").next("ul").length&&($("#user-password").next("ul").remove(),$("#confirm-password-section").css("margin-top","25px"),$(".button-section").css("margin-top","20px"),$("#user-add-dialog_wrapper").css("top","2px"),$("#user-add-dialog_wrapper").css("top",addUserDialogPosition.top+"px"))}$(document).ready(function(){addPlacehoder("#user-add-dialog"),addPlacehoder("#search-area"),$("#user-add-dialog").ejDialog({width:"500px",height:"auto",showOnInit:!1,allowDraggable:!0,enableResize:!1,title:window.Server.App.LocalizationContent.AddUser,showHeader:!1,enableModal:!0,close:"onUserAddDialogClose",closeOnEscape:!0}),$("#messageBox").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!0,enableResize:!1,height:"auto",showHeader:!1,enableModal:!0,close:"onMessageDialogClose"}),$(parent.window).width()>1400&&$("#permission-container").addClass("permissions"),$(parent.window).width()<1400&&$("#permission-container").removeClass("permissions"),addPlacehoder("body"),bindAllUsersandGroups(),$("#user-search option").length>0?$(".share-popup #user-search-container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #user-search-container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"</span>"),$("#group-search option").length>0?$(".share-popup #group-search-container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"</span><span class='bs-select-custom-tick glyphicon glyphicon-ok'></span></div>"):$(".share-popup #group-search-container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"</span>"),"true"==$("#is-owner").val().toLowerCase()?$("#permission-container").addClass("is-item-owner"):$("#permission-container").addClass("is-item-viewer"),$("#user-search-container").on("click",".bs-select-all-custom",function(e){$("#user-search-container").addClass("value-changed"),$("#user-search").data("selectpicker").selectAll(),$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom").css("display","inline"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear),e.stopPropagation()}),$("#group-search-container").on("click",".bs-select-all-custom",function(e){$("#group-search-container").addClass("value-changed"),$("#group-search").data("selectpicker").selectAll(),$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear),e.stopPropagation()}),$("#user-search-container").on("click",".bs-deselect-all-custom",function(e){$("#user-search-container").addClass("value-changed"),$("#user-search").data("selectpicker").deselectAll(),$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select),e.stopPropagation()}),$("#group-search-container").on("click",".bs-deselect-all-custom",function(e){$("#group-search-container").addClass("value-changed"),$("#group-search").data("selectpicker").deselectAll(),$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"),$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select),e.stopPropagation()}),$("#user-search-container").on("click",".bootstrap-select li a",function(e){if($("#user-search-container").addClass("value-changed"),$("#user-search-container .bootstrap-select li.selected").length==$("#user-search-container .bootstrap-select li").length&&($($("#user-search-container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#user-search-container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom")),$(this).parent().hasClass("selected")){var t=$("#user-search").find("option")[parseInt($(this).parent().attr("data-original-index"))],i=$("<div>").attr("id",$(t).val()).attr("data-searchtype","userSearch").addClass("selected-share-items");i.html("<div class='instant-search'><span class='details' title='"+$(t).text()+"'>"+$(t).text()+"</span><div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div></div>"),$("#selected-users").append(i)}else{t=$("#user-search").find("option")[parseInt($(this).parent().attr("data-original-index"))];$(".selected-share-items[id='"+$(t).val()+"']").remove(),$($("#user-search-container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#user-search-container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom")}$(this).parent().addClass("active"),e.stopPropagation()}),$("#group-search-container").on("click",".bootstrap-select .dropdown-menu .selectpicker li a",function(e){if($("#group-search-container").addClass("value-changed"),$("#group-search-container .bootstrap-select li.selected").length==$("#group-search-container .bootstrap-select li").length&&($($("#group-search-container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#group-search-container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom")),$(this).parent().hasClass("selected")){var t=$("#group-search").find("option")[parseInt($(this).parent().attr("data-original-index"))],i=$("<div>").attr("id",$(t).val()).attr("data-searchtype","groupSearch").addClass("selected-share-items");i.html("<div class='instant-search'><span class='details' title='"+$(t).text()+"'>"+$(t).text()+"</span><div style='width:auto' class='instant-cancel'><span class='su su-close i-selected-cancel'/></div></div>"),$("#selected-users").append(i)}else{t=$("#group-search").find("option")[parseInt($(this).parent().attr("data-original-index"))];$(".selected-share-items").filter("[data-searchtype='groupSearch']").filter("#"+$(t).val()).remove(),$($("#group-search-container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#group-search-container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom")}$(this).parent().addClass("active"),e.stopPropagation()}),$("#user-search-container").on("click",".bootstrap-select li a",function(e){ValidateFields()}),$("#group-search-container").on("click",".bootstrap-select .dropdown-menu .selectpicker li a",function(e){ValidateFields()}),$("#access-selection-container").on("click",".bootstrap-select .dropdown-menu .selectpicker li a",function(e){ValidateFields()}),$(document).on("click","#users-tab",function(e){$("#groups-tab").parent().removeClass("active"),$("#item-user-permission-container").removeClass("hidden").addClass("show"),$("#item-group-permission-container").removeClass("show").addClass("hidden"),$("#group-search-area").removeClass("show").addClass("hidden"),$("#user-search-area").removeClass("hidden").addClass("show"),$("#clear-search").click()}),$(document).on("click","#groups-tab",function(e){$("#users-tab").parent().removeClass("active"),$("#groups-tab").parent().addClass("active"),$("#item-user-permission-container").removeClass("show").addClass("hidden"),$("#item-group-permission-container").removeClass("hidden").addClass("show"),$("#user-search-area").removeClass("show").addClass("hidden"),$("#group-search-area").removeClass("hidden").addClass("show"),$("#clear-search").click()}),$(document).on("click",".itempermission-popup-close",function(e){eDialog=parent.$("#permission-popup").data("ejDialog"),eDialog.close(),$("#permission-popup iframe").attr("src","")}),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").hide(),$("#item-link").css({width:"100%",borderRadius:"4px"}),$("#item-link-copy").attr("data-original-title","")):$("#item-link-copy").tooltip({animation:!1}),$("#item-link-copy").removeClass("focusdiv"),$("#item-link").on("focusin",function(){$("#item-link-copy").addClass("focusdiv")}),$("#item-link").on("focusout",function(){$("#item-link-copy").removeClass("focusdiv")}),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.ItemNameValidator),$.validator.addMethod("hasWhiteSpace",function(e,t){return HasWhiteSpace(e)},window.Server.App.LocalizationContent.HasWhiteSpace),$.validator.addMethod("isValidEmail",function(e,t){return""==e.trim()||IsEmail(e)},window.Server.App.LocalizationContent.IsValidEmail),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecialCharactors),$.validator.addMethod("isValidUsernameLength",function(e,t){return IsValidUsernameLength(e)},window.Server.App.LocalizationContent.UsernameExceeds),$.validator.addMethod("isValidUsername",function(e,t){return IsValidUsername(e)},window.Server.App.LocalizationContent.AvoidSpecialCharactors),$.validator.addMethod("additionalSpecialCharValidation",function(e,t){if(/^[a-zA-Z_0-9`~!\$\^()=\-\.\{\} ]+$/.test(e)||""===e)return!0},window.Server.App.LocalizationContent.AvoidSpecialCharactors),$("#dialog-container").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{"user-name":{isRequired:!0,isValidUsernameLength:!0,isValidUsername:!0},"email-address":{isRequired:!0,isValidName:!0,isValidEmail:!0},"first-name":{isRequired:!0,isValidName:!0,additionalSpecialCharValidation:!0},"last-name":{isValidName:!0,additionalSpecialCharValidation:!0},"user-password":{isRequired:!0,isUserPasswordValid:!0}},highlight:function(e){$(e).closest("div").addClass("has-error")},unhighlight:function(e){$(e).closest("div").removeClass("has-error"),$(e).closest("div").find("span").html("")},errorPlacement:function(e,t){$(t).closest("div").find("span").html(e.html()).css("display","block")},messages:{"user-name":{isRequired:window.Server.App.LocalizationContent.UserNameValidator},"email-address":{isRequired:window.Server.App.LocalizationContent.EmailAddressValidator},"first-name":{isRequired:window.Server.App.LocalizationContent.FirstNameValidator},"user-password":{isRequired:window.Server.App.LocalizationContent.NewPasswordValidator}}}),$("#dialog-container").keyup(function(e){13==e.keyCode&&($("#cancel-user").is(":focus")?onUserAddDialogClose():$("#add-user").is(":focus")?e.preventDefault():$("input#add-user").trigger("click"))}),$("a[data-bs-toggle='tab']").on("click",function(e){"share-with"==$(this).attr("id")&&($("#first-tab").addClass("active"),$("#second-tab").removeClass("active"),$("#users-tab").trigger("click"))})}),$(document).on("focusout","#username",function(e){null!=e.relatedTarget&&("username"==e.target.id?userNameVaidation():"cancel-user"==e.target.id&&onUserAddDialogClose())}),$(document).on("focusout","#username",function(e){if("username"==e.target.id){var t=$("#username").val().trim();isEmptyOrWhitespace(t)||$.ajax({type:"POST",url:isUsernameExistsUrl,data:{username:t.toLowerCase()},success:function(e){if(e.Status)return $("#username").closest("div").addClass("has-error"),void $("#user-name-validation").html(window.Server.App.LocalizationContent.IsUserNameExist).show()}})}}),$(document).on("click",".group-permission",function(){var e=$(this).attr("data-permission-id");$("#groups-tab").click();var t=$("#itemgrouppermissiongrid").data("ejGrid");t.clearFiltering(),t.clearSorting();for(var i=t._dataManager.dataSource.json.length;i--&&t._dataManager.dataSource.json[i].PermissionId!=e;);if("true"==$("#is-owner").val().toLowerCase())var s=5;else s=8;i>s-1?(t.gotoPage((i-i%s)/s+1),t.selectRows(i%s)):(t.gotoPage(1),t.selectRows(i))}),$(document).keyup(function(e){27==e.keyCode&&(eDialog=parent.$("#permission-popup").data("ejDialog"),eDialog.close(),$("#permission-popup iframe").attr("src",""))}),$(document).on("click",".delete-permission",function(){var e=$(this).attr("data-permission-id"),t=$("#item-id-hidden").val();parent.messageBox("su-delete",window.Server.App.LocalizationContent.DeletePermission,window.Server.App.LocalizationContent.DeletePermissionConfirm,"error",function(){parent.showWaitingPopup("messageBox_wrapper"),$.ajax({type:"POST",url:deleteuserPermissionUrl,data:{permissionId:e,itemId:t},success:function(e,t){e&&($("#clear-search").click(),refreshItemUserPermissionGrid(),parent.hideWaitingPopup("messageBox_wrapper"),parent.onCloseMessageBox())}})},void 0,void 0,void 0,void 0,"delete-permission")}),$(document).on("click",".delete-group-permission",function(){var e=$(this).attr("data-permission-id"),t=$("#item-id-hidden").val();parent.messageBox("su-delete",window.Server.App.LocalizationContent.DeletePermission,window.Server.App.LocalizationContent.DeletePermissionConfirm,"error",function(){parent.showWaitingPopup("messageBox_wrapper"),$.ajax({type:"POST",url:deleteGroupPermissionUrl,data:{permissionId:e,itemId:t},success:function(e,t){e&&($("#clear-group-search").click(),refreshItemGroupPermissionGrid(),refreshItemUserPermissionGrid(),parent.hideWaitingPopup("messageBox_wrapper"),parent.onCloseMessageBox())}})},void 0,void 0,void 0,void 0,"delete-permission")}),$(document).on("click","#save-permission",function(){window.parent.$("#permission-popup_wrapper").ejWaitingPopup("show");var e=$("#user-search").val(),t=$("#group-search").val(),i=$("#access-selection").val(),s=$("#item-id-hidden").val(),n=$("#item-type-id-hidden").val();$.ajax({type:"POST",url:addnewpermissionUrl,data:{permissionList:JSON.stringify({mode:i,itemType:n,UserList:e,GroupList:t}),itemId:s},success:function(e,t){e?($("#user-search-container").find(".dropdown-toggle").click(),$("#user-search").data("selectpicker").deselectAll(),$("#group-search-container").find(".dropdown-toggle").click(),$("#group-search").data("selectpicker").deselectAll(),$("#group-search-container").find(".dropdown-toggle").click(),ValidateFields(),window.parent.$("#permission-popup_wrapper").ejWaitingPopup("hide"),parent.messageBox("su-manage-permission",window.Server.App.LocalizationContent.Permission,window.Server.App.LocalizationContent.AddPermissionSuccess,"success",function(){if(parent.onCloseMessageBox(),refreshItemGroupPermissionGrid(),refreshItemUserPermissionGrid(),parent.$("#on-board-share-dashboard").length>0&&!parent.$("#on-board-share-dashboard").hasClass("journey-done")){parent.$("#on-board-share-dashboard").addClass("journey-done").removeAttr("id");var e=parseInt(parent.$(".progress-bar-success").attr("data-progress-percentage"))+parseInt(parent.$(".progress-bar-success").attr("data-increment"));parent.$(".progress-bar-success").css("width",e+"%").attr("data-progress-percentage",e),parent.$(".progress-bar-percentage").text(e+"%")}},void 0,void 0,void 0,void 0,"add-permission")):(window.parent.$("#permission-popup_wrapper").ejWaitingPopup("hide"),parent.messageBox("su-manage-permission",window.Server.App.LocalizationContent.Permission,window.Server.App.LocalizationContent.AddPermissionError,"success",function(){parent.onCloseMessageBox()},void 0,void 0,void 0,void 0,"add-permission"))}})}),$(document).on("click","#item-link-copy",function(e){$("#item-link").select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($("#item-link-copy").removeClass("su su-copy"),$("#item-link-copy").attr("data-original-title","")):(document.execCommand("copy"),$("#item-link-copy").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess),$("#item-link-copy").tooltip("hide").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){$("#item-link-copy").attr("data-original-title",window.Server.App.LocalizationContent.LinkCopy),$("#item-link-copy").tooltip()},3e3))}),$(document).on("keyup",".bs-searchbox",function(e){isAdmin&&($("#user-search-container > .btn-group > .dropdown-menu > .inner .no-results-create-user").remove(),$("#user-search-container > .btn-group > .dropdown-menu > .bs-actionsbox").css("display","none"),$("#user-search-container > .btn-group > .dropdown-menu > .inner").append("<li class='no-results-create-user active' onclick='onUserDialogOpen()' style='display: list-item;text-align: center;padding-top: 5px;margin-top: 10px;'>(New User) "+$(".input-block-level").val()+"</li>"),""==$(".input-block-level").val()&&($("#user-search-container > .btn-group > .dropdown-menu > .inner .no-results-create-user").remove(),$("#user-search-container > .btn-group > .dropdown-menu > .bs-actionsbox").css("display","block")),13==e.which&&$(".no-results-create-user").trigger("click"))}),$.validator.addMethod("isUserPasswordValid",function(e,t){var i=new Array;i.push(validateUserpassword.p_policy_uppercase),i.push(validateUserpassword.p_policy_lowercase),i.push(validateUserpassword.p_policy_number),i.push(validateUserpassword.p_policy_specialcharacter),i.push(validateUserpassword.p_policy_length);for(var s=0;s<i.length;s++){var n=i[s];""!=n(e)&&null!=n(e)?(ruleName=n(e),"su-tick"!=$("#password_policy_rules").find("li#"+ruleName+" span").attr("class")&&($("#password_policy_rules").find("li#"+ruleName+" span").addClass("su su-tick").removeClass("su su-close"),$("#password_policy_rules").find("li#"+ruleName).addClass("clear-error"),ruleName="")):(ruleName=name,$(t).closest("div").addClass("has-error"),"su-tick"==$("#password_policy_rules").find("li#"+ruleName+" span").attr("class")&&($("#password_policy_rules").find("li#"+ruleName+" span").addClass("su su-close").removeClass("su-tick"),$("#password_policy_rules").find("li#"+ruleName).removeClass("clear-error"),ruleName=""))}if($("#password_policy_rules li>span.su-tick").length==$("#password_policy_rules").find("li>span").length)return!0},""),$(document).on("keyup","#user-password",function(){createPasswordPolicyRules(),$("#user-password").valid()}),$(document).on("click",".no-results-create-user",function(){$("#add-user").removeAttr("disabled"),$("#add-user-in-group").removeClass("d-block").addClass("d-none"),$(".validation").closest("div").removeClass("has-error"),$(".useradd-validation-messages").css("display","none")}),$(document).on("click","input#add-user",function(){var e=isSelfHosted?$("#username").val().trim():"";firstName=$("#firstname").val().trim(),emailid=$("#mailid").val().trim(),void 0!==$("#user-password").val()&&(password=$("#user-password").val().trim());var t=$("#dialog-container").valid();if(isAddUserUserNameValidated||userNameVaidation(),t){$(".useradd-validation-messages").css("display","none"),showWaitingPopup("user-add-dialog_wrapper"),lastName=$("#lastname").val().trim();var i={UserName:e,Email:emailid,FirstName:firstName,LastName:lastName,Password:password};$.ajax({type:"POST",url:isUsernameExistsUrl,data:{username:e.toLowerCase()},success:function(e){""!=e.Username||e.IsUserNameExist?(isUserNameExist=!0,$("#username").closest("div").addClass("has-error"),$("#invalid-username").html(window.Server.App.LocalizationContent.IsUserNameExist).show(),hideWaitingPopup("user-add-dialog_wrapper")):$.ajax({type:"POST",url:isPresentEmailId,data:{emailId:emailid.toLowerCase()},success:function(e){if(e.IsEmailExist)return $("#mailid").closest("div").addClass("has-error"),$("#invalid-email").html(window.Server.App.LocalizationContent.IsMailExist).css("display","block"),$(".useradd-validation-messages").css("display","block"),void hideWaitingPopup("user-add-dialog_wrapper");$.ajax({type:"POST",url:postactionUrl,data:i,success:function(e,t){"object"==$.type(e)&&("success"==e.Data.result?(hideWaitingPopup("user-add-dialog_wrapper"),$("#add-user").attr("disabled","disabled"),$("#create-user").removeClass("hide").addClass("show"),$(".form input[type='text']").val(""),$(".form input[type='password']").val(""),onUserAddDialogClose(),e.AzureADUserCount>0&&($("#azure-ad-indication").length?$("#azure-ad-indication").html('<span class="su su-azure-ad"> </span> - '+window.Server.App.LocalizationContent.AzureADUser):$("#user-list-container").append('<div id="azure-ad-indication" class="ad-azure-indication col-lg-12"><span class="su su-azure-ad"> </span> - '+window.Server.App.LocalizationContent.AzureADUser+"</div>")),e.DatabaseUserCount>0&&($("#database-indication").length?$("#database-indication").html('<span class="su su-datasource"> </span> - '+window.Server.App.LocalizationContent.DatabaseUser):$("#user-list-container").append('<div id="database-indication" class="ad-azure-indication col-lg-12"><span class="su su-datasource"> </span> - '+window.Server.App.LocalizationContent.DatabaseUser+"</div>")),$.ajax({type:"POST",url:checkMailSettingUrl,success:function(e){var t="";0==e.activation?t=window.Server.App.LocalizationContent.UserAddedActivatedSuccess:"success"==e.result&&1==e.activation?t=window.Server.App.LocalizationContent.UserAddedSuccess:"failure"==e.result&&1==e.isAdmin&&1==e.activation&&(t=window.Server.App.LocalizationContent.UserAddedNotActivated),SuccessAlert(window.Server.App.LocalizationContent.AddUser,t,7e3),$("#user-search-container > .btn-group > .dropdown-menu > .bs-actionsbox").css("display","block"),$("#user-search").append("<option value='"+emailid+"'>"+firstName+" "+lastName+"</option>"),$("#user-search").selectpicker("destroy"),$("#user-search").selectpicker(),$("#user-search").selectpicker("val",emailid),ValidateFields()}})):e.IsUserLimitExceed?(hideWaitingPopup("user-add-dialog_wrapper"),$("#limit-user").ejDialog("open"),$("#zero-user-acc .licensed-user-count").html(e.LicenseUserCount),$("#zero-user-acc").show()):messageBox("su-user-add",window.Server.App.LocalizationContent.AddUser,"[[[Internal Server Error. please try again.]]]","error",function(){onCloseMessageBox()}))}})}})}})}else $(".useradd-validation-messages").css("display","block")});var validateUserpassword={p_policy_uppercase:function(e){this.name="p_policy_uppercase";if(/^(?=.*[A-Z]).+$/.test(e))return"p_policy_uppercase"},p_policy_lowercase:function(e){this.name="p_policy_lowercase";if(/^(?=.*[a-z]).+$/.test(e))return"p_policy_lowercase"},p_policy_number:function(e){this.name="p_policy_number";if(/^(?=.*\d).+$/.test(e))return"p_policy_number"},p_policy_specialcharacter:function(e){this.name="p_policy_specialcharacter";if(/^(?=.*(_|[^\w])).+$/.test(e))return"p_policy_specialcharacter"},p_policy_length:function(e){if(this.name="p_policy_length",e.length>=minimumLength)return"p_policy_length"}};function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}$(document).on("mousedown",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("mouseup",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("mouseleave",".show-hide-password",function(){$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")})
/*!
*  filename: ej.core.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/,function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";var s,n,l,o;t.version="14.4.0.15",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==i}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,s,n,l){if(!e||!n)return i;for(var o=e.split("."),r=window,a=0;a<o.length-1;a++)t.isNullOrUndefined(r[o[a]])&&(r[o[a]]={}),r=r[o[a]];return(l||t.isNullOrUndefined(r[o[a]]))&&(s="function"==typeof s?s:function(){},r[o[a]]=s,r[o[a]].prototype=n),r[o[a]]},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,s){var n,l,o;if(!s)return i;for(n=s,l=e.split("."),o=0;o<l.length&&!t.util.isNullOrUndefined(n);o++)n=n[l[o]];return n},createObject:function(e,s,n){for(var l,o=e.split("."),r=n||window,a=r,d=o.length,h=0;h<d;h++)l=o[h],h+1==d?a[l]=s===i?{}:s:t.isNullOrUndefined(a[l])&&(a[l]={}),a=a[l];return r},isNullOrUndefined:function(e){return e===i||null===e},print:function(i,s){var n,l,o=t.buildTag("div"),r=i.clone();o.append(r),s||(s=window.open("","print","height=452,width=1024,tabbar=no")),s.document.write("<!DOCTYPE html>"),n=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(l="",n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),l+=i.outerHTML}),s.document.write("<html><head></head><body>"+l+o[0].innerHTML+"</body></html>")):(l="",s.document.write("<html><head>"),n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),l+=i.outerHTML}),s.document.writeln(l+"</head><body>"),s.document.writeln(o[0].innerHTML+"</body></html>")),s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,s,n,l){var o,r=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],a=/#([_a-z]+[-_0-9a-z]+)/gi.exec(t);return a=a?a[a.length-1]:i,o=(o=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t))?o[o.length-1]:i,e(document.createElement(r)).attr(a?{id:a}:{}).addClass(o||"").css(n||{}).attr(l||{}).html(s||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return((t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))==i||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,n,l,o=e(t).parents().andSelf().filter(":hidden");return o&&(n={visibility:"hidden",display:"block"},l=[],o.each(function(){var e={};for(var t in n)e[t]=this.style[t],this.style[t]=n[t];l.push(e)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),o.each(function(e){var t=l[e];for(var i in n)this.style[i]=t[i]})),s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var n=e(t).attr(i);return null!=n?"true"==n.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),n=e.height(),l=e.offset().left,o=e.offset().left+s,r=e.offset().top,a=e.offset().top+n,d=.3*s,h=.3*n;return t<l+d&&i<r+h?"e-m-skew-topleft":t>o-d&&i<r+h?"e-m-skew-topright":t>o-d&&i>a-h?"e-m-skew-bottomright":t<l+d&&i>a-h?"e-m-skew-bottomleft":t>l+d&&i<r+h&&t<o-d?"e-m-skew-top":t<l+d?"e-m-skew-left":t>o-d?"e-m-skew-right":i>a-h?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,s,n=e.touches?e.touches[0]:e,l=n.pageX-t._pointX,o=n.pageY-t._pointY;Date.now();return t._pointX=n.pageX,t._pointY=n.pageY,t._distX+=l,t._distY+=o,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,n,l,o){for(var r=0;r<e.length;r++)t.listenTouchEvent(e[r],i[r],s[r],n,l,o)},listenTouchEvent:function(i,s,n,l,o,r){for(var a,d=l?"removeEventListener":"addEventListener",h=l?"off":"on",c=e(i),u=0;u<c.length;u++)switch(a=c[u],s){case"touchstart":t._bindEvent(a,d,s,n,"mousedown","MSPointerDown","pointerdown",r);break;case"touchmove":t._bindEvent(a,d,s,n,"mousemove","MSPointerMove","pointermove",r);break;case"touchend":t._bindEvent(a,d,s,n,"mouseup","MSPointerUp","pointerup",r);break;case"touchcancel":t._bindEvent(a,d,s,n,"mousecancel","MSPointerCancel","pointercancel",r);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(a)[h](s,n);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?o._on(e(a),s,n):a[d](s,n,!0)}},_bindEvent:function(t,i,s,n,l,o,r){e.support.hasPointer?t[i](window.navigator.pointerEnabled?r:o,n,!0):t[i](s,n,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),n=s.data("ejWidgets");n&&s[n]("destroy")})},getAttrVal:function(t,i,s){var n=e(t).attr(i);return null!=n?n:s},getOffset:function(t){var i,s={},n=t.offset()||{left:0,top:0};return e.extend(!0,s,n),"static"!=e("body").css("position")&&(i=e("body").offset(),s.left-=i.left,s.top-=i.top),s},getZindexPartial:function(i,s){var n,l,o;if(!t.isNullOrUndefined(i)&&i.length>0)return n=i.parents(),l=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&l.splice(l.index(s),1),e(l).each(function(e,t){n.push(t)}),o=Math.max.apply(o,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!o||o<1e4?o=1e4:o+=1,o},isValidAttr:function(t,i){var s;return void 0!==(t=e(t)[0])[i]||(s=!1,e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s)}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,n,l){var o=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(o=e(i).attr("type")),o&&(o=o.toLowerCase(),t.template[o])?t.template[o](this,i,s,n,l):t.template.render(this,i,s,n,l)},destroy:function(){var i,s,n,l;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(i=this.element.data("ejWidgets")||[],l=0;l<i.length;l++)i[l]==this.pluginName&&i.splice(l,1);for(i.length||this.element.removeData("ejWidgets");this._events&&(n=[],s=this._events.pop());){for(l=0;l<s[1].length;l++)e.isPlainObject(s[1][l])||n.push(s[1][l]);e.fn.off.apply(s[0],n)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),n={},l=s.length;n&&"function"!=typeof n;)n=s[--l];return s[l]=t.proxy(s[l],this),this._events.push([i,s,n,s[l]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,n){var l,o,r,a,d=this._events;if(!d||!d.length)return this;for("function"==typeof s&&(l=n,n=s,s=l),o=i.match(/\S+/g)||[""],r=0;r<d.length;r++)if((a=d[r])[0].length&&(!n||a[2]===n)&&(a[1][0]===i||o[0])&&(!s||a[1][1]===s)&&e.inArray(t[0],a[0])>-1){e.fn.off.apply(t,n?[i,s,a[3]]:[i,s]),d.splice(r,1);break}return this},_trigger:function(i,s){var n,l,o,r,a=null,d={};return e.extend(d,s),i in this.model&&(a=this.model[i]),a&&("string"==typeof a&&(a=t.util.getObject(a,window)),e.isFunction(a)&&(l=t.event(i,this.model,s),n=a.call(this,l),(o=this.model._applyScope)&&o.call(),s&&e.extend(s,l),l.cancel||!t.isNullOrUndefined(n)))?!1===n||l.cancel:(r=Boolean(s),(s=s||{}).originalEventType=i,s.type=this.pluginName+i,l=e.Event(s.type,t.event(s.type,this.model,s)),this.element.trigger(l),r&&e.extend(s,l),t.isOnWebForms&&0==l.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,d),l.cancel)},setModel:function(t,i){var n,l,o,r;if(!this._trigger("modelChange",{changes:t})){for(n in t){if(!i){if(this.model[n]===t[n]){delete t[n];continue}if(e.isPlainObject(t[n])&&(s(this.model[n],t[n]),e.isEmptyObject(t[n]))){delete t[n];continue}}if(this.dataTypes&&!0!==(l=this._isValidModelValue(n,this.dataTypes,t)))throw"setModel - Invalid input for property :"+n+" - "+l;this.model.notifyOnEachPropertyChanges&&this.model[n]!==t[n]&&(o={oldValue:this.model[n],newValue:t[n]},t[n]=this._trigger(n+"Change",o)?this.model[n]:o.newValue)}e.isEmptyObject(t)||(this._setFirst?((r=t.dataSource)&&delete t.dataSource,e.extend(!0,this.model,t),r&&(this.model.dataSource=r instanceof Array?r.slice():r,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(s,n,l){if(!s)return this.model;if(e.isPlainObject(s))return this.setModel(s,l);if("string"==typeof s){s=s.replace(/^model\./,"");var o=t.getObject(s,this.model);if(n===i&&!l)return o;if("enablePersistence"===s)return this._setState(n);if(l&&n===t.extensions.modelGUID)return this._setModel(t.createObject(s,t.getObject(s,this.model),{}));if(l||t.getObject(s,this.model)!==n)return this.setModel(t.createObject(s,n,{}),l)}return i},_isValidModelValue:function(e,t,i){var s,n,l,o=t[e],r=i[e];if(!o)return!0;if("string"==typeof o){if("enum"==o&&(i[e]=r?r.toString().toLowerCase():r,o="string"),"array"===o){if("[object Array]"===Object.prototype.toString.call(r))return!0}else if("data"===o||"parent"===o||typeof r===o)return!0;return"Expected type - "+o}if(r instanceof Array){for(n=0;n<r.length;n++)if(!0!==(s=this._isValidModelValue(e,t,r[n])))return" ["+n+"] - "+s;return!0}for(l in r)if(!0!==(s=this._isValidModelValue(l,o,r)))return l+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var i,s=this.observables,n=0;n<s.length;n++)i=t.getObject(s[n],e),t.isNullOrUndefined(i)||"function"!=typeof i||this._returnFn(e,s[n]);return JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e,i;if(this._ignoreOnPersist){for(e=r({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=r({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var s,n,l=null;if(window.localStorage?l=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(l=t.cookie.get("$ej$"+this.pluginName+this._id)),l&&(s=JSON.parse(l),this._restoreState&&(this._restoreState(s.customPersists),delete s.customPersists),!1===t.isNullOrUndefined(s)&&(t.isNullOrUndefined(s.ignoreOnPersist)?t.isNullOrUndefined(s.addToPersist)||(this._addToPersist=s.addToPersist,delete s.addToPersist):(this._ignoreOnPersist=s.ignoreOnPersist,delete s.ignoreOnPersist))),t.isNullOrUndefined(s)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,s);else{for(n in this._ignoreOnPersist)-1!==this._ignoreOnPersist[n].indexOf(".")?t.createObject(this._ignoreOnPersist[n],t.getObject(this._ignoreOnPersist[n],this.model),s):s[this._ignoreOnPersist[n]]=this.model[this._ignoreOnPersist[n]];this.model=s}!i&&l&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,s,n=[];if("object"==typeof e?n=e:"string"==typeof e&&n.push(e),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<n.length;t++)this._ignoreOnPersist.push(n[t]);else for(t=0;t<n.length;t++)s=this._addToPersist.indexOf(n[t]),this._addToPersist.splice(s,1)},addToPersist:function(t){var s,n,l=[];if("object"==typeof t?l=t:"string"==typeof t&&l.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],n=0;n<l.length;n++)s=this._ignoreOnPersist.indexOf(l[n]),this._ignoreOnPersist.splice(s,1);else for(n=0;n<l.length;n++)-1===e.inArray(l[n],this._addToPersist)&&this._addToPersist.push(l[n])},formatting:function(i,s,n){var l,o,r,a,d,h,c,u;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),n=t.preferredCulture(n)?n:"en-US",l=i,o=i.split("{0:"),d=i.split("}"),r=o[0],a=d[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:"))return null!=(h=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(i))&&null!=s?null!=r&&null!=a?r+t.format(s,h[2],n)+a:t.format(s,h[2],n):null!=s?s:"";if(l.startsWith("{")&&!l.startsWith("{0:")){var m=l.split(""),p=(s=(s||"")+"").split(""),g=/[0aA\*CN<>\?]/gm;for(c=0,u=0;c<m.length;c++)m[c]=g.test(m[c])?"{"+u+++"}":m[c];return String.format.apply(String,[m.join("")].concat(p)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){l=l.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),l):this.data.Value}},t.WidgetBase=function(){},s=function(t,i){for(var n in t)t[n]===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(t[n])&&s(t[n],i[n])},t.widget=function(s,l,d){var c,u,m;if("object"!=typeof s)m=d._rootCSS||t.getNameSpace(l),d=t.defineClass(l,function(i,o){var h,c,u,p,g,f,_,v,b,C;if(this.sfType=l,this.pluginName=s,this.instance=a,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(h in o)if(!0!==(c=this._isValidModelValue(h,this.dataTypes,o)))throw"setModel - Invalid input for property :"+h+" - "+c;for((u=i.data("ejWidgets")||[]).push(s),i.data("ejWidgets",u),g=0;t.widget.observables&&this.observables&&g<this.observables.length;g++)(p=t.getObject(this.observables[g],o))&&t.createObject(this.observables[g],t.widget.observables.register(p,this.observables[g],this,i),o);if(this.element=i.jquery?i:e(i),this.model=r(!0,{},d.prototype.defaults,o),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(m+" e-js").data(s,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(g in window.localStorage)-1!=g.indexOf("$ej$")&&window.localStorage.removeItem(g);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion)for(f in document.cookie.split(/; */))-1!=f.indexOf("$ej$")&&t.cookie.set(f.split("=")[0],model,new Date);this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(o),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(v in _=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==v){_=!0;break}_&&this._keyPressed&&(b=i,C="keydown",this.keySettings&&(b=this.keySettings.getElement&&this.keySettings.getElement()||b,C=this.keySettings.event||C),this._on(b,C,function(e){if(this.model.keyConfigs){var t=n.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}}))}this._trigger("create")},d),e.fn[s]=function(n){for(var r,a,c=n,u=0;u<this.length;u++){var p=e(this[u]),g=p.data(s),f=g&&p.hasClass(m),_=null;if(this.length>0&&e.isPlainObject(c)&&(n=t.copyObject({},c)),f){if(n)if(a=[].slice.call(arguments,1),this.length>0&&a[0]&&"option"===c&&e.isPlainObject(a[0])&&(a[0]=t.copyObject({},a[0])),e.isPlainObject(n))g.setModel(n);else if(0!==n.indexOf("_")&&!t.isNullOrUndefined(_=t.getObject(n,g))||0===n.indexOf("model.")){if(!_||!e.isFunction(_)){if(1==arguments.length)return _;g.option(n,arguments[1]);continue}if((r=_.apply(g,a))!==i)return r}else o(l+": function/property - "+n+" does not exist")}else!0!==d.prototype._requiresID||e(this[u]).attr("id")||p.attr("id",h("ejControl_")),n&&"object"!=typeof n?o(s+": methods/properties can be accessed only after plugin creation"):(d.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in d.prototype.defaults&&"ejChart"!=s&&(!n||"locale"in n?t.isNullOrUndefined(n)&&((n={}).locale=t.setCulture().name):n.locale=t.setCulture().name),new d(p,n))}return-1!=s.indexOf("ejm")&&t.widget.registerInstance(p,s,l,d.prototype),this},t.widget.register(s,l,d.prototype);else for(c in d=l,s)(u=s[c])instanceof Array&&(d._rootCSS=u[1],u=u[0]),t.widget(c,u,d),s[c]instanceof Array&&(d._rootCSS="")},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,n){t.isNullOrUndefined(e[i])||o("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:n},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,n){i.push({element:e,pluginName:t,className:s,proto:n})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){var t,i,s,n;if(e&&e.length)for(t=0;t<e.length;t++)if((s=(i=e.eq(t).data()).ejWidgets)&&s.length)for(n=0;n<s.length;n++)i[s[n]]&&i[s[n]].destroy&&i[s[n]].destroy()},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},n={getActionFromCode:function(e,t,i,s,l){var o,r,a;for(o in i=i||!1,s=s||!1,l=l||!1,e)if("focus"!==o)for(r=n.getKeyObject(e[o]),a=0;a<r.length;a++)if(t===r[a].code&&i==r[a].isCtrl&&s==r[a].isShift&&l==r[a].isAlt)return o;return null},getKeyObject:function(t){for(var i,s,l,o={isCtrl:!1,isShift:!1,isAlt:!1},r=e.extend(!0,{},o),a=t.split(","),d=[],h=0;h<a.length;h++){if(i=null,-1!=a[h].indexOf("+"))for(s=a[h].split("+"),l=0;l<s.length;l++)i=n.getResult(e.trim(s[l]),o);else i=n.getResult(e.trim(a[h]),e.extend(!0,{},r));d.push(i)}return d},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i,s,n,l,o={},r=[],a={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(i in a)if(a.hasOwnProperty(i)&&(r=navigator.userAgent.match(a[i]))){if(o.name="opr"==r[1].toLowerCase()?"opera":r[1].toLowerCase(),o.version=r[2],o.culture={},o.culture.name=o.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(s=t.preferredCulture().name,n=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),l=0;navigator.languages&&l<navigator.languages.length&&(n=t.preferredCulture(navigator.languages[l])).language!=navigator.languages[l];l++);t.preferredCulture(s),e.extend(!0,o.culture,n)}!navigator.userAgent.match(/Trident\/7\./)||(o.name="msie");break}return o.isMSPointerEnabled="msie"==o.name&&o.version>9&&window.navigator.msPointerEnabled,o.pointerEnabled=window.navigator.pointerEnabled,o},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t,i,s=document.documentElement.style;if(e in s)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in s)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var r=t.copyObject=function(e,s){var n,l,o,a,d,h,c=2;for("boolean"!=typeof e&&(c=1),o=[].slice.call(arguments,c),1===c&&(s=e,e=i),a=0;a<o.length;a++)for(d in o[a])if(n=s[d],(l=o[a][d])!==i&&n!==l&&o[a]!==l&&s!==l)if(l instanceof Array)if(0===a&&e)for(s[d]=[],h=0;h<l.length;h++)r(!0,s[d],l);else s[d]=l.slice();else t.isPlainObject(l)?(s[d]=n||{},e?r(e,s[d],l):r(s[d],l)):s[d]=l;return s},a=function(){return this},d=0,h=function(e){return e+d++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,n,l){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var o={prop:l,index:n};return e(i).render(s,o)},t.isPlainObject=function(e){if(!e||t.DataManager!==i&&e instanceof t.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var s,n=t.support.isOwnLast;for(s in e)if(n)break;return s===i||e.hasOwnProperty(s)},l=!1,t.util.valueFunction=function(e){return function(s,n){var o=t.getObject(e,this.model);if(!1===l&&(l=t.getObject("observables.getValue",t.widget)),s===i)return t.isNullOrUndefined(l)?"function"==typeof o?o.call(this):o:l(o,n);"function"==typeof o?(this["ob.values"][e]=s,o.call(this,s)):t.createObject(e,s,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e,t=function(){this.a=1};for(e in t.prototype.b=1,new t)return"b"===e}(),outerHTML:document.createElement("div").outerHTML!==i},o=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},t.getRandomValue=function(e,s){var n,l;return e===i||s===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(l=new Uint16Array(1),window.crypto.getRandomValues(l),n=l[0]%(s-e)+e):n=Math.random()*(s-e)+e,0|n)},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,s=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;s.push(t[i])}return s},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,n=0;n<s.length;n++)if(0===s[n].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}()}),
/*!
*  filename: ej.data.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";var n,l,o,r,a,d,h,c,u;t.DataManager=function(i,n,l){if(!(this instanceof t.DataManager))return new t.DataManager(i,n,l);i||(i=[]),"string"==typeof(l=l||i.adaptor)&&(l=new t[l]);var o=[],r=this;return i instanceof Array?o={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),o={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,jsonp:i.jsonp,dataType:i.dataType,offline:i.offline!==s?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||L(i))&&(o={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(o={url:i,offline:!1,dataType:"json",json:[]}),o.requiresFormat!==s||t.support.cors||(o.requiresFormat=!!c(o.crossDomain)||o.crossDomain),o.dataType===s&&(o.dataType="json"),this.dataSource=o,this.defaultQuery=n,o.url&&o.offline&&!o.json.length?(this.isDataAvailable=!1,this.adaptor=l||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(n||t.Query()).done(function(e){r.dataSource.offline=!0,r.isDataAvailable=!0,o.json=e.result,r.adaptor=new t.JsonAdaptor})):this.adaptor=o.offline?new t.JsonAdaptor:new t.ODataAdaptor,!o.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(o.jsonp="callback"),this.adaptor=l||this.adaptor,o.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,o.timeTillExpiration,o.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,n,l,o){var r,d,h;return"function"==typeof i&&(o=l,l=n,n=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||u("DataManager - executeQuery() : A query is required to execute"),(r=e.Deferred()).then(n,l,o),d={query:i},this.dataSource.offline||this.dataSource.url==s?t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?a(function(){this._localQueryProcess(i,d,r)},this):this._localQueryProcess(i,d,r):(h=this.adaptor.processQuery(this,i),t.isNullOrUndefined(h.url)?a(function(){d=this._getDeferedArgs(i,h,d),r.resolveWith(this,[d])},this):this._makeRequest(h,r,d,i)),r.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=j(e._fromTable,i.result,this),i.getKnockoutModel=z(i.result),i},executeLocal:function(i){var s,n;if(this.defaultQuery||i instanceof t.Query||u("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||u("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery,s=this.adaptor.processQuery(this,i),i._subQuery){var l=i._subQuery._fromTable,o=i._subQuery._lookup,r=i._requiresCount?s.result:s;for(o&&o instanceof Array&&m(i._subQuery._fKey,l,r,o,i._subQuery._key),n=0;n<r.length;n++)r[n][l]instanceof Array&&(r[n]=e.extend({},r[n]),r[n][l]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(r[n][l].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,n,l){var o,r=!!l._subQuerySelector,a=h(function(e){n.error=e,s.rejectWith(this,[n])},this),c=h(function(e,t,i,o,a,d,h){r||(n.xhr=i,n.count=parseInt(t,10),n.result=e,n.request=o,n.aggregates=d,n.getTableModel=j(l._fromTable,e,this),n.getKnockoutModel=z(e),n.actual=a,n.virtualSelectRecords=h,s.resolveWith(this,[n]))},this),u=h(function(t,i){var s,o,d=e.Deferred(),h={parent:n};return l._subQuery._isChild=!0,s=this.adaptor.processQuery(this,l._subQuery,t?this.adaptor.processResponse(t):i),o=this._makeRequest(s,d,h,l._subQuery),r||d.then(function(e){t&&(m(l._subQuery._fKey,l._subQuery._fromTable,t,e,l._subQuery._key),c(t))},a),o},this),p=d(function(e,i,s,n){-1==s.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var o=this.adaptor.processResponse(e,this,l,s,n),a=0,d=null,h=e.virtualSelectRecords;l._requiresCount&&(a=o.count,d=o.aggregates,o=o.result),l._subQuery?r||u(o):c(o,a,s,n,e,d,h)},this),g=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:h(this._beforeSend,this),processData:!1,success:p,error:a},i);return"async"in this.dataSource&&(g.async=this.dataSource.async),g=e.ajax(g),r&&((o=l._subQuerySelector.call(this,{query:l._subQuery,parent:l}))&&o.length?(g=e.when(g,u(null,o))).then(d(function(e,t,i){var s,n=this.adaptor.processResponse(e[0],this,l,e[2],i[0]),o=0;l._requiresCount&&(o=n.count,n=n.result),s=this.adaptor.processResponse(t[0],this,l._subQuery,t[2],i[1]),o=0,l._subQuery._requiresCount&&(o=s.count,s=s.result),m(l._subQuery._fKey,l._subQuery._fromTable,n,s,l._subQuery._key),r=!1,c(n,o,e[2])},this),a):r=!1),g},_beforeSend:function(e,t){var i,s,n,l;for(this.adaptor.beforeSend(this,e,t),i=this.dataSource.headers,n=0;i&&n<i.length;n++)for(l in s=[],i[n])s.push(l),e.setRequestHeader(l,i[n][l])},saveChanges:function(i,s,n,l){var o,r,a;return n instanceof t.Query&&(l=n,n=null),o={url:n,key:s||this.dataSource.key},r=this.adaptor.batchRequest(this,i,o,l),this.dataSource.offline?r:(a=e.Deferred(),e.ajax(e.extend({beforeSend:h(this._beforeSend,this),success:d(function(e,t,s,n){a.resolveWith(this,[this.adaptor.processResponse(e,this,null,s,n,i)])},this),error:function(e){a.rejectWith(this,[{error:e}])}},r)),a.promise())},insert:function(i,s,n){var l,o;return i=C.replacer(i),s instanceof t.Query&&(n=s,s=null),l=this.adaptor.insert(this,i,s,n),this.dataSource.offline?l:(o=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:C.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(C.parseJson(e),this,null,s,n),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},l)),o.promise())},remove:function(i,s,n,l){var o,r;return"object"==typeof s&&(s=s[i]),n instanceof t.Query&&(l=n,n=null),o=this.adaptor.remove(this,i,s,n,l),this.dataSource.offline?o:(r=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:C.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(C.parseJson(e),this,null,s,n),r.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){r.rejectWith(this,[{error:e,dataManager:this}])}},o)),r.promise())},update:function(i,s,n,l){var o,r;return s=C.replacer(s),n instanceof t.Query&&(l=n,n=null),o=this.adaptor.update(this,i,s,n,l),this.dataSource.offline?o:(r=e.Deferred(),e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:C.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(C.parseJson(e),this,null,s,n),r.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){r.rejectWith(this,[{error:e,dataManager:this}])}},o)),r.promise())},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html()));var s=(i=i.jquery?i[0]:i).tagName.toLowerCase();return"table"!==s&&u("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var m=function(e,i,s,n,l){var o,r,a={};for(n.result&&(n=n.result),n.GROUPGUID&&u("ej.DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)(a[r=t.getObject(e,n[o])]||(a[r]=[])).push(n[o]);for(o=0;o<s.length;o++)s[o][i]=a[t.getObject(l||e,s[o])]},p="application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",g="multipart/mixed",f="--changeset_",_="batch_",v="Content-Type: application/http\nContent-Transfer-Encoding: binary ",b="Content-Type: application/json; charset=utf-8 ",C={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,C.jsonReviver):e instanceof Array?C.iterateAndReviveArray(e):"object"===t&&C.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?C.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?C.parseJson(e[t]):C.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var i in e)i.startsWith("__")||("object"==typeof(t=e[i])?t instanceof Array?C.iterateAndReviveArray(t):C.iterateAndReviveJson(t):e[i]=C.jsonReviver(i,t))},jsonReviver:function(e,t){var i,s,n=t;if("string"==typeof t){if(i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t))return C.replacer(new Date(parseInt(i[1])));/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=C.replacer(new Date(t)),isNaN(t)&&(s=n.split(/[^0-9]/),t=C.replacer(new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5]))))}return t},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e){return t.isPlainObject(e)?C.jsonReplacer(e):e instanceof Array?C.arrayReplacer(e):e instanceof Date?C.jsonReplacer({val:e}).val:e},jsonReplacer:function(e){var i;for(var s in e)(i=e[s])instanceof Date&&(e[s]=new Date(+i+36e5*t.serverTimezoneOffset));return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=C.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=C.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=C.isJson,t.parseJSON=C.parseJson,t.dateParse=!0,t.isGUID=C.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):u("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,n){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeQuery(this,i,s,n):u("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeLocal(this):u("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,n){i=(i||t.FilterOperators.equal).toLowerCase();var l=null;return"string"==typeof e?l=new t.Predicate(e,i,s,n):e instanceof t.Predicate?l=e:u("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:l}),this},search:function(e,i,s,n){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):n=i=[],"boolean"==typeof s&&(n=s,s=null),(s=s||t.FilterOperators.contains).length<3&&(s=t.data.operatorSymbols[s]);var l=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:n,comparer:l}}),this},sortBy:function(e,i,s){var n,l,o,r,a=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(o=0;o<e.length;o++)this.sortBy(e[o],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(a="custom"),i&&"string"!=typeof i||(a=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s)for(n=w(this.queries,"onSortBy"),o=0;o<n.length;o++)if("string"==typeof(l=n[o].e.fieldName)){if(l===e)return this}else if(l instanceof Array)for(r=0;r<l.length;r++)if(l[r]===e||e.toLowerCase()===l[r]+" desc")return this;return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:a}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return("number"!=typeof e||"number"!=typeof t)&&u("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&u("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&u("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||u("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||u("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},init:function(){},extend:function(t){var i,s,n=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};for(s in(n.prototype=new this.type).type=n,i=n.prototype.base={},t)n.prototype[s]&&(i[s]=n.prototype[s]);return e.extend(!0,n.prototype,t),n},processQuery:function(){},processResponse:function(e){return e.d?e.d:e},convertToQueryString:function(t){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,l,o,r,a,d,h=w(t.queries,"onSortBy"),u=w(t.queries,"onGroup"),m=w(t.queries,"onWhere"),p=w(t.queries,"onSearch"),g=w(t.queries,"onAggregates"),f=y(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),_=t._params,v=e.dataSource.url,b=null,C=this.options,x={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};for(f.onPage?(s=f.onPage,l=((l=n(s.pageIndex,t))-1)*(b=n(s.pageSize,t))):f.onRange&&(l=(s=f.onRange).start,b=s.end-s.start),o=0;o<h.length;o++)s=n(h[o].e.fieldName,t),x.sorted.push(S(this,"onEachSort",{name:s,direction:h[o].e.direction},t));for(i&&((s=this.getFiltersFrom(i,t))&&x.filters.push(S(this,"onEachWhere",s.toJSON(),t))),o=0;o<m.length;o++)for(a in x.filters.push(S(this,"onEachWhere",m[o].e.toJSON(),t)),x.filters[o])c(x[a])&&delete x[a];for(o=0;o<p.length;o++)s=p[o].e,x.searches.push(S(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(o=0;o<u.length;o++)x.grouped.push(n(u[o].e.fieldName,t));for(o=0;o<g.length;o++)s=g[o].e,x.aggregates.push({type:s.type,field:n(s.field,t)});for(a in(r={})[C.from]=t._fromTable,C.expand&&(r[C.expand]=t._expands),r[C.select]=f.onSelect?S(this,"onSelect",n(f.onSelect.fieldNames,t),t):"",r[C.count]=t._requiresCount?S(this,"onCount",t._requiresCount,t):"",r[C.search]=x.searches.length?S(this,"onSearch",x.searches,t):"",r[C.skip]=f.onSkip?S(this,"onSkip",n(f.onSkip.nos,t),t):"",r[C.take]=f.onTake?S(this,"onTake",n(f.onTake.nos,t),t):"",r[C.where]=x.filters.length||x.searches.length?S(this,"onWhere",x.filters,t):"",r[C.sortBy]=x.sorted.length?S(this,"onSortBy",x.sorted,t):"",r[C.group]=x.grouped.length?S(this,"onGroup",x.grouped,t):"",r[C.aggregates]=x.aggregates.length?S(this,"onAggregates",x.aggregates,t):"",r.param=[],S(this,"addParams",{dm:e,query:t,params:_,reqParams:r}),r)(c(r[a])||""===r[a]||0===r[a].length)&&delete r[a];return C.skip in r&&C.take in r||null===b||(r[C.skip]=S(this,"onSkip",l,t),r[C.take]=S(this,"onTake",b,t)),d=this.pvt,this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(r),url:v,ejPvtData:d,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(r,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?v.replace(/\/*$/,s):v,ejPvtData:d})},convertToQueryString:function(t,i,s){return s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,i,n,l,o,r){var a,d,h,c,u=o.ejPvtData||{},m=e.groupDs;if(l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return n._requiresCount?{result:[],count:0}:[];if((a=JSON.parse(o.data))&&"batch"===a.action&&e.added)return r.added=e.added,r;if(e.d&&(e=e.d),u&&u.aggregates&&u.aggregates.length){var p,g=u.aggregates,f={},_={};for(("count"in e&&(f.count=e.count),e.result&&(f.result=e.result),e.aggregate&&(e=e.aggregate),h=0);h<g.length;h++)(p=t.aggregates[g[h].type])&&(_[g[h].field+" - "+g[h].type]=p(e,g[h].field));f.aggregates=_,e=f}if(u&&u.groups&&u.groups.length){for((d=u.groups,f={},"count"in e&&(f.count=e.count),e.aggregates&&(f.aggregates=e.aggregates),e.result&&(e=e.result),h=0);h<d.length;h++)c=M(d[h],n.queries),t.isNullOrUndefined(m)||(m=t.group(m,d[h],null,c)),e=t.group(e,d[h],u.aggregates,c,null,m);return f.count!=s?f.result=e:f=e,f}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var n={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:n}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n)}},beforeSend:function(){},insert:function(e,t,i,s){var n={value:t,table:i,action:"insert"};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:n}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(n)}},remove:function(e,t,i,s,n){var l={key:i,keyColumn:t,table:s,action:"remove"};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:l}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(l)}},update:function(e,t,i,s,n){var l={value:i,action:"update",keyColumn:t,key:i[t],table:s};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:l}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(l)}},getFiltersFrom:function(e,i){var s;e instanceof Array&&e.length||u("ej.SubQuery: Array of key values required");var n,l=i._fKey,o=l,r=i._key,a=[],d="object"!=typeof e[0];for("object"!=typeof e[0]&&(o=null),s=0;s<e.length;s++)n=d?e[s]:t.pvt.getObject(r||o,e[s]),a.push(new t.Predicate(l,"==",n));return t.Predicate.or(a)},addParams:function(e){var t,i,s=e.dm,n=e.query,l=e.params,o=e.reqParams;for(o.params={},t=0;i=l[t];t++)o[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),o[i.key]=i.value,i.fn&&(o[i.key]=i.fn.call(n,i.key,n,s)),o.params[i.key]=o[i.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var n=t.UrlAdaptor.prototype.processQuery(e,i,s),l=t.parseJSON(n.data),o={};return o.value=l,S(this,"addParams",{dm:e,query:i,params:i._params,reqParams:o}),{data:JSON.stringify(o),url:n.url,ejPvtData:n.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t,i,s,n,l=e.dm,o=e.query,r=e.params,a=e.reqParams;for(a.params={},t=0;i=r[t];t++)a[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),s=i.key,n=i.value,i.fn&&(n=i.fn.call(o,i.key,o,l)),a[s]=n,a.params[s]=a[s]}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){var n,l;t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor"),n={keys:[],results:[]},window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(n)),l=this.guidId,t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(l)),s=[],n=0;n<e.results.length;n++)e.results[n].timeStamp=new Date-new Date(e.results[n].timeStamp),new Date-new Date(e.results[n].timeStamp)>i&&s.push(n);for(n=0;n<s.length;n++)e.results.splice(s[n],1),e.keys.splice(s[n],1);window.localStorage.removeItem(l),window.localStorage.setItem(l,JSON.stringify(e))},i)},generateKey:function(e,t){var i,s,n,l,o=w(t.queries,"onSortBy"),r=w(t.queries,"onGroup"),a=w(t.queries,"onWhere"),d=w(t.queries,"onSearch"),h=(w(t.queries,"onPage"),y(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),c=(t._params,e);for(h.onPage&&(c+=h.onPage.pageIndex),o.forEach(function(e){c+=e.e.direction+e.e.fieldName}),r.forEach(function(e){c+=e.e.fieldName}),d.forEach(function(e){c+=e.e.searchKey}),i=0;i<a.length;i++)if((s=a[i]).e.isComplex){for((n=t.clone()).queries=[],l=0;l<s.e.predicates.length;l++)n.queries.push({fn:"onWhere",e:s.e.predicates[l],filter:t.queries.filter});c+=s.e.condition+this.generateKey(e,n)}else c+=s.e.field+s.e.operator+s.e.value;return c},processQuery:function(e,i){var s,n,l=this.generateKey(e.dataSource.url,i);return window.localStorage&&(s=t.parseJSON(window.localStorage.getItem(this.guidId))),null==(n=s?s.results[s.keys.indexOf(l)]:null)||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):n},processResponse:function(i,s,n,l,o,r){var a;if(this._insertAction||o&&this.cacheAdaptor.options.batch&&o.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,n,l,o,r);i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0));var d=this.generateKey(s.dataSource.url,n),h={};for(window.localStorage&&(h=t.parseJSON(window.localStorage.getItem(this.guidId))),-1!=(a=e.inArray(d,h.keys))&&(h.results.splice(a,1),h.keys.splice(a,1)),h.results[h.keys.push(d)-1]={keys:d,result:i.result,timeStamp:new Date,count:i.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var w=function(e,t){return e.filter(function(e){return e.fn===t})||[]},y=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},S=function(e,t,i,s){if(e[t]){var n=e[t](i,s);c(n)||(i=n)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},onPredicate:function(e,i,s){var n,l,o,r="",a=e.value,d=typeof a,h=this._p(e.field);return a instanceof Date&&(a="datetime'"+C.replacer(a).toJSON()+"'"),"string"===d&&(a="'"+a+"'",s&&(h="cast("+h+", 'Edm.String')"),t.isGUID(a)&&(l="guid"),e.ignoreCase&&(l||(h="tolower("+h+")"),a=a.toLowerCase())),(n=t.data.odBiOperator[e.operator])?(r+=h,r+=n,l&&(r+=l),r+a):(n=t.data.odUniOperator[e.operator])&&"string"===d?("substringof"===n&&(o=a,a=h,h=o),r+=n+"(",r+=h+",",l&&(r+=l),r+(a+")")):""},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){var i,s;for(0===e.fields.length&&u("Query() - Search : oData search requires list of field names to search"),i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t,i=[];if(e.name instanceof Array)for(t=0;t<e.name.length;t++)i.push(this._p(e.name[t]));else i.push(this._p(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",g),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,n,l,o,r){var a,d,h,u,m,p,g,f,_,v;if(!t.isNullOrUndefined(i.d)&&(a=n&&n._requiresCount?i.d.results:i.d,!t.isNullOrUndefined(a)))for(_=0;_<a.length;_++)t.isNullOrUndefined(a[_].__metadata)||delete a[_].__metadata;if(d=o&&o.ejPvtData,l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return n._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(h=(h=l.getResponseHeader("Content-Type")).substring(h.indexOf("=batchresponse")+1),(i=i.split(h)).length<2)return;for(i=i[1],p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(p[0],""),g=p[1],_=(i=i.split(g)).length;_>-1;_--)/\bContent-ID:/i.test(i[_])&&/\bHTTP.+201/.test(i[_])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[_])[1]),r.added[u]&&(m=C.parseJson(/^\{.+\}/m.exec(i[_])[0]),e.extend(r.added[u],this.processResponse(m))));return r}var b=l&&l.getResponseHeader("DataServiceVersion"),w=null,y={};if(b=b&&parseInt(b,10)||2,n&&n._requiresCount&&((i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"])),3===b&&i.value&&(i=i.value),i.d&&(i=i.d),b<3&&i.results&&(i=i.results),d&&d.aggregates&&d.aggregates.length){var S,x=d.aggregates,T={};for(_=0;_<x.length;_++)(S=t.aggregates[x[_].type])&&(T[x[_].field+" - "+x[_].type]=S(i,x[_].field));y=T}if(d&&d.groups&&d.groups.length)for(f=d.groups,_=0;_<f.length;_++)v=M(f[_],n.queries),i=t.group(i,f[_],d.aggregates,v);return c(w)?i:{result:i,count:w,aggregates:y}},convertToQueryString:function(e,t,i){var s,n=[],l=e.table||"";for(s in delete e.table,i.dataSource.requiresFormat&&(e.$format="json"),e)n.push(s+"="+e[s]);return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!l?n:n.length?l+"?"+n:l||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")",data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,i,s){var n=s.guid=t.getGuid(_),l=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(f)},r="--"+n+"\n";return r+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,r+=this.generateInsertRequest(i.added,o),r+=this.generateUpdateRequest(i.changed,o),r+=this.generateDeleteRequest(i.deleted,o),r+=o.cSet+"--\n",{type:"POST",url:l,contentType:"multipart/mixed; charset=UTF-8;boundary="+n,data:r+="--"+n+"--"}},generateDeleteRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="DELETE ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n";return i+"\n"},generateInsertRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="PUT ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n\n",i+=JSON.stringify(e[s])+"\n\n";return i},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,i,s){var n="",l=e.value instanceof Date;return t.data.odUniOperator.contains="contains",n=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",l&&(n=n.replace(/datetime'(.*)'$/,"$1")),n},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(){return this.pvt.search.join(" OR ")},beforeSend:function(){},processQuery:function(e,i){for(var s,n,l=/\/[\d*\/]*/g,o="",r=i._expands.length-1;r>0;r--)if(o.indexOf(i._expands[r])>=0)i._expands.pop();else if(l.test(i._expands[r])){for(s=(o=i._expands.pop()).replace(l,"($expand="),n=0;n<o.split(l).length-1;n++)s+=")";i._expands.unshift(s),r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,n,l,o,r){var a,d,h,u,m,p,g,f,_,v,b=o&&o.ejPvtData;if(l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return n._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(a=(a=l.getResponseHeader("Content-Type")).substring(a.indexOf("=batchresponse")+1),(i=i.split(a)).length<2)return;for(i=i[1],u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(u[0],""),m=u[1],_=(i=i.split(m)).length;_>-1;_--)/\bContent-ID:/i.test(i[_])&&/\bHTTP.+201/.test(i[_])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(i[_])[1]),r.added[d]&&(h=C.parseJson(/^\{.+\}/m.exec(i[_])[0]),e.extend(r.added[d],this.processResponse(h))));return r}if(p=null,g={},n&&n._requiresCount&&"@odata.count"in i&&(p=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,b&&b.aggregates&&b.aggregates.length){var w,y=b.aggregates,S={};for(_=0;_<y.length;_++)(w=t.aggregates[y[_].type])&&(S[y[_].field+" - "+y[_].type]=w(i,y[_].field));g=S}if(b&&b.groups&&b.groups.length)for(f=b.groups,_=0;_<f.length;_++)v=M(f[_],n.queries),i=t.group(i,f[_],b.aggregates,v);return c(p)?i:{result:i,count:p,aggregates:g}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,n,l=e.dataSource.json.slice(0),o=l.length,r=!0,a={},d=0;d<t.queries.length;d++)i=this[(n=t.queries[d]).fn].call(this,l,n.e,t),"onAggregates"==n.fn?a[n.e.field+" - "+n.e.type]=i:l=i!==s?i:l,("onPage"===n.fn||"onSkip"===n.fn||"onTake"===n.fn||"onRange"===n.fn)&&(r=!1),r&&(o=l.length);return t._requiresCount&&(l={result:l,count:o,aggregates:a}),l},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase))return!0;return!1})):e},onSortBy:function(e,i,s){var l,o,r;if(!e)return e;if(!(o=n(i.fieldName,s)))return e.sort(i.comparer);if(o instanceof Array){for(r=(o=o.slice(0)).length-1;r>=0;r--)o[r]&&(l=i.comparer,o[r].endsWith(" desc")&&(l=t.pvt.fnSort(t.sortOrder.Descending),o[r]=o[r].replace(" desc","")),e=A(e,o[r],l,[]));return e}return A(e,o,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){var l,o,r,a,d;if(!e)return e;if(o=[],(l=w(s.queries,"onAggregates")).length)for(a=0;a<l.length;a++)r=l[a].e,o.push({type:r.type,field:n(r.field,s)});return d=M(i.fieldName,s.queries),t.group(e,n(i.fieldName,s),o,d)},onPage:function(e,t,i){var s=n(t.pageSize,i),l=(n(t.pageIndex,i)-1)*s,o=l+s;return e?e.slice(l,o):e},onRange:function(e,t){return e?e.slice(n(t.start),n(t.end)):e},onTake:function(e,t){return e?e.slice(0,n(t.nos)):e},onSkip:function(e,t){return e?e.slice(n(t.nos)):e},onSelect:function(e,i){return e?t.select(e,n(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s){var n,l=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),n=0;n<l.length&&t.getObject(i,l[n])!==s;n++);return n!==l.length?l.splice(n,1):null},update:function(i,s,n){for(var l=i.dataSource.json,o=t.getObject(s,n),r=0;r<l.length&&t.getObject(s,l[r])!==o;r++);return r<l.length?e.extend(l[r],n):null}}),t.ForeignKeyAdaptor=function(i,n){var l=(new t[n||"JsonAdaptor"]).extend({init:function(){var e,s;for(this.foreignData=[],this.key=[],this.adaptorType=n,this.value=[],this.fValue=[],this.keyField=[],e=i,s=0;s<e.length;s++)this.foreignData[s]=e[s].dataSource,this.key[s]=e[s].foreignKeyField,this.fValue[s]=t.isNullOrUndefined(e[s].field)?e[s].foreignKeyValue:e[s].field+"_"+e[s].foreignKeyValue,this.value[s]=e[s].foreignKeyValue,this.keyField[s]=e[s].field||e[s].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s,n,l,o=e.dataSource.json;if(this.initial){for(s=0;s<o.length;s++)for(n=this,l=0;l<this.foreignData.length;l++)this.foreignData[l].filter(function(e){t.getObject(n.key[l],e)==t.getObject(n.keyField[l],o[s])&&(o[s][n.fValue[l]]=t.getObject(n.value[l],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var n,l,o,r=0;r<this.foreignData.length;r++)n=this,"string"!=typeof(l=i[this.fValue[r]])||isNaN(l)||(l=t.parseFloat(l)),o=e.grep(n.foreignData[r],function(e){return e[n.value[r]]==l})[0],t.isNullOrUndefined(o)&&(o=e.grep(n.foreignData[r],function(e){return e[n.key[r]]==l})[0],t.getObject(this.value[r],o)!=s&&t.createObject(n.value[r],t.getObject(this.value[r],o),i)),t.getObject(this.value[r],o)!=s&&t.createObject(this.keyField[r],t.getObject(this.key[r],o),i)},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert"})}},update:function(e,i,s,n){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,n),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:n})}}});return e.extend(this,new l),this},t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,i,s){for(var n=0;n<i.added.length;n++)t.JsonAdaptor.prototype.insert(e,i.added[n]);for(n=0;n<i.changed.length;n++)t.JsonAdaptor.prototype.update(e,s.key,i.changed[n]);for(n=0;n<i.deleted.length;n++)t.JsonAdaptor.prototype.remove(e,s.key,i.deleted[n]);return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:i.changed,added:i.added,deleted:i.deleted,action:"batch",table:s.url,key:s.key})}}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},processResponse:function(e,i,s,n,l){var o,r,a,d=l&&l.ejPvtData;if(l&&"post"!=l.type.toLowerCase()){var h=n&&n.getResponseHeader("DataServiceVersion"),u=null,m={};if(h=h&&parseInt(h,10)||2,s&&s._requiresCount&&(c(e.Count)||(u=e.Count)),h<3&&e.Items&&(e=e.Items),d&&d.aggregates&&d.aggregates.length){var p,g=d.aggregates,f={};for(r=0;r<g.length;r++)(p=t.aggregates[g[r].type])&&(f[g[r].field+" - "+g[r].type]=p(e,g[r].field));m=f}if(d&&d.groups&&d.groups.length)for(o=d.groups,r=0;r<o.length;r++)a=M(o[r],s.queries),e=t.group(e,o[r],d.aggregates,a);return c(u)?e:{result:e,count:u,aggregates:m}}}}),n=function(e,t){return"function"==typeof e?e.call(t||{}):e},t.TableModel=function(i,s,n,l){var o,r,a,d;if(!N(this,t.TableModel))return new t.TableModel(s);for(N(s,Array)||u("ej.TableModel - Json Array is required"),o=[],a=h(k,this),d=0;d<s.length;d++)(r=new t.Model(s[d],this)).state="unchanged",r.on("stateChange",a),l&&r.computes(l),o.push(r);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=n,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&N(this.dataManager,t.DataManager)||u("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(h(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(h(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){var t;this.key||u("TableModel - update : Primary key should be assigned to TableModel.key");var i,s=e,n=this.key,l=s[n];for(t in i=this.rows.array.filter(function(e){return e.get(n)===l}),i=i[0],s)i.set(t,s[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:i,table:this})},remove:function(e){var t,i,n,l;for(this.key||u("TableModel - update : Primary key should be assigned to TableModel.key"),t=this.key,i=-1,e&&"object"==typeof e&&(e=e[t]!==s?e[t]:e.get(t)),l=0;l<this.rows.length();l++)if(this.rows.array[l].get(t)===e){i=l;break}i>-1&&((n=this.rows.removeAt(i)).markDelete(),this._deleted.push({model:n,position:i}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:n,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s,n=l,r=e(t.html()),a=this.toArray();for(e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(n=o),n.insertBefore(t),t.detach().empty(),s=0;s<a.length;s++)i=r.clone(),a[s].bindTo(i),t.append(i);t.insertAfter(n),n.remove()}},l=i?e(document.createElement("div")):{},o=i?e(document.createElement("tr")):{},t.Model=function(i,s,n){"string"==typeof s&&(n=s,s=null),this.$id=H("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=n||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,n,l=this.json,o=e;for(e=e.split("."),n=0;n<e.length-1;n++)l=l[(e=e[0])[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=l[e],this.actual[e]!==s||e in this.actual||(this.actual[e]=t),l[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:o,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||u("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,n,l,o=e(t),r=o.find("[ej-observe], [ej-computed], [ej-prop]"),a=r.length;for(o.data("ejModel",this),n={fields:[],props:[],computes:[]},l=0;l<a;l++)(s=(i=r.eq(l)).attr("ej-prop"))&&this._processAttrib(s,i,n),(s=i.attr("ej-observe"))&&-1!==this._props.indexOf(s)?this._processField(i,s,n):(s=i.attr("ej-computed"))&&this._processComputed(s,i,n);o.data("ejModelBinding"+this.$id,n)},unbind:function(t){var i,s,n,l,o,r,a,d={props:this._attrEls,computes:this._computeEls},h=!1;for(s in t&&(d=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||d,h=!0),this.computed)i=d.computes[s],s=this.computed[s],i&&s.deps&&(this.off(s.deps.join(" "),i.handle),h&&delete this._computeEls[s]);for(s in h||(this._computeEls={}),d.props)(i=d.props[s])&&(this.off(i.deps.join(" "),i.handle),delete d.props[s],h&&delete this._attrEls[s]);if(h||(this._attrEls={}),d.fields&&d.fields.length)for(n=d.fields.length,a=0;a<n;a++)l=d.fields[a],e(l).off("change",null,this._changeHandler),r=-1!==this.formElements.indexOf(l.tagName.toLowerCase())?"input":"read",-1!==(o=this._updates[r].indexOf(l))&&this._updates[r].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,n,l=T(e),o=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[l]||(this.computed[l]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=l),(s=this.computed[e]).get||(s.get=function(){s.value.call(this.json)}),n=s.deps,s=s.value,this._updateDeps(n),this._updateElement(t,o,s),s={el:t,handle:h(this._computeHandle,this,{value:e,type:o})},this._computeEls[e]=s,i.computes[e]=s,this.on(n.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],n=0;n<i.length;n++)i[n].startsWith("#ej.#")&&((t=i[n].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t));return s},_processAttrib:function(e,t,i){var s,n,l,o,r={};for(e=e.replace(/^ +| +$/g,"").split(";"),l=0;l<e.length;l++)e[l]=e[l].split(":"),e[l].length<2||(r[s=e[l][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,"")]=e[l][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));for(s in o=[],e=r)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),r=H("emak"),n={el:t,handle:h(this._attrHandle,this,r),value:e,deps:o},t.prop("ejmodelattrkey",r),i.props[r]=n,this._attrEls[r]=n,this.on(o.join(" "),n.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,n=this.json,l=this.computed;for(var o in i)(s=i[o])in n?s=n[s]:s in l&&((s=l[s])&&(s=s.value.call(e.extend({},this.json,l)))),c(s)||t.prop(o,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var n=t.length-1;n>-1;n--)t[n].offsetParent?e(t[n])[i](s):t.splice(n,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},n=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(n),this._updates[t].read.push(e[0])):(e.val(n).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var x=/[^\w]+/g,T=function(e){return e.replace(x,"_")},k=function(e){this.setDirty(!0,e.model)};if(t.Predicate=function(e,i,s,n){return this instanceof t.Predicate?("string"==typeof e?(this.field=e,this.operator=i,this.value=s,this.ignoreCase=n,this.isComplex=!1,this._comparer=t.data.fnOperators.processOperator(this.operator)):(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s)),this):new t.Predicate(e,i,s,n)},t.Predicate.and=function(){return r._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return r._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){var t,i,s;if(N(e,Array)){for(t=[],i=0,s=e.length;i<s;i++)t.push(r._fromJSON(e[i]));return t}return r._fromJSON(e)},r={_combinePredicates:function(e,i){if(!e.length)return s;if(1===e.length){if(!N(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))},_combine:function(e,i,s,n,l,o){return i instanceof t.Predicate?t.Predicate[l](e,i):"string"==typeof i?t.Predicate[l](e,new t.Predicate(i,s,n,o)):u("Predicate - "+l+" : invalid arguments")},_fromJSON:function(e){var i;if(!e||N(e,t.Predicate))return e;var s=e.predicates||[],n=s.length,l=[];for(i=0;i<n;i++)l.push(r._fromJSON(s[i]));return e.isComplex?new t.Predicate(l[0],e.condition,l.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase)}},t.Predicate.prototype={and:function(e,t,i,s){return r._combine(this,e,t,i,"and",s)},or:function(e,t,i,s){return r._combine(this,e,t,i,"or",s)},validate:function(e){var i,s,n,l=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase);for(i="and"===this.condition,n=0;n<l.length;n++)if(s=l[n].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t,i;if(this.isComplex)for(e=[],t=this.predicates,i=0;i<t.length;i++)e.push(t[i].toJSON());return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:e}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,n=[],l={},o=0;o<e.length;o++)(s=E(e,t,o))in l||(n.push(i?e[o]:s),l[s]=1);return n},sum:function(e,t){for(var i,s=0,n="number"!=typeof E(e,t,0),l=0;l<e.length;l++)i=E(e,t,l),isNaN(i)||null===i||(n&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],n=0;n<e.length;n++)s.push(t.pvt.extractFields(e[n],i));return s},group:function(i,s,n,l,o,r){var a,d,h,c,u,m,p,g,f,_;if(o=o||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(f=0;f<i.length;f++)t.isNullOrUndefined(r)?(i[f].items=t.group(i[f].items,s,n,l,i.level+1),i[f].count=i[f].items.length):(-1,_=e.grep(r,function(e){return e.key==i[f].key}),a=r.indexOf(_[0]),i[f].items=t.group(i[f].items,s,n,l,i.level+1,r[a].items),i[f].count=r[a].count);return i.childLevels+=1,i}for(d={},(h=[]).GROUPGUID=t.pvt.consts.GROUPGUID,h.level=o,h.childLevels=0,h.records=i,m=0;m<i.length;m++)c=E(i,s,m),t.isNullOrUndefined(l)||(c=l(c,s)),d[c]||(d[c]={key:c,count:0,items:[],aggregates:{},field:s},h.push(d[c]),t.isNullOrUndefined(r)||(u=e.grep(r,function(e){return e.key==d[c].key}),d[c].count=u[0].count)),d[c].count=t.isNullOrUndefined(r)?d[c].count+=1:d[c].count,d[c].items.push(i[m]);if(n&&n.length)for(m=0;m<h.length;m++){for(p={},f=0;f<n.length;f++)g=t.aggregates[n[f].type],t.isNullOrUndefined(r)?g&&(p[n[f].field+" - "+n[f].type]=g(h[m].items,n[f].field)):(_=e.grep(r,function(e){return e.key==h[m].key}),g&&(p[n[f].field+" - "+n[f].type]=g(_[0].items,n[f].field)));h[m].aggregates=p}return h},parseTable:function(i,s,n){var l,o,r,a,d,h,c,u=i.rows,m=[],p=[];if(!u.length)return[];switch(n=n||0,(s||"").toLowerCase()){case t.headerOption.tHead:l=i.tHead.rows[n];break;case t.headerOption.row:default:l=i.rows[n]}for(r=l.cells,o=0;o<r.length;o++)m.push(e.trim(r[o].innerHTML));for(o=n+1;o<u.length;o++){for(a={},d=u[o].cells,h=0;h<d.length;h++)c=d[h].innerHTML,a[m[h]]="string"==typeof c&&e.isNumeric(c)?Number(c):c;p.push(a)}return p}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e){return e.length}},t.pvt={filterQueries:w,mergeSort:function(e,i,s){if(e.length<=1)return e;var n=parseInt(e.length/2,10),l=e.slice(0,n),o=e.slice(n);return l=t.pvt.mergeSort(l,i,s),o=t.pvt.mergeSort(o,i,s),t.pvt.merge(l,o,i,s)},getItemFromComparer:function(e,i,s){var n,l,o,r=0,a="string"==typeof E(e,i,0);if(e.length)for(;t.isNullOrUndefined(n)&&r<e.length;)n=E(e,i,r),o=e[r++];for(;r<e.length;r++)l=E(e,i,r),t.isNullOrUndefined(l)||(a&&(n=+n,l=+l),s(n,l)>0&&(n=l,o=e[r]));return o},quickSelect:function(e,i,s,n,l,o){if(s==n)return e[s];var r=t.pvt.partition(e,i,s,n,o),a=r-s+1;return a==l?e[r]:l<a?t.pvt.quickSelect(e,i,s,r-1,l,o):t.pvt.quickSelect(e,i,r+1,n,l-a,o)},extractFields:function(e,i){var s,n={};if(1==i.length)return t.pvt.getObject(i[0],e);for(s=0;s<i.length;s++)n[i[s].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[s],e);return n},partition:function(e,i,s,n,l){var o,r=parseInt((s+n)/2,10),a=E(e,i,r);for(t.swap(e,r,n),r=s,o=s;o<n;o++)l(E(e,i,o),a)&&(t.swap(e,o,r),r++);return t.swap(e,r,n),r},fnSort:function(e){return(e=e?e.toLowerCase():t.sortOrder.Ascending)==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,n){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,n))}},fnAscending:function(e,t){return null===t||t===s?-1:"string"==typeof e?e.localeCompare(t):null===e||e===s?1:e-t},fnDescending:function(e,t){return null===t||t===s?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===s?-1:t-e},merge:function(e,t,i,s){for(var n,l=[];e.length>0||t.length>0;)n=e.length>0&&t.length>0?s?s(E(e,i,0),E(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,l.push(n.shift());return l},getObject:function(e,t){var i,n,l;if(!t)return s;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(i=t,n=e.split("."),l=0;l<n.length&&null!=i;l++)i=i[n[l]];return i},createObject:function(e,t,i){for(var n=e.split("."),l=i||window,o=l,r=0;r<n.length;r++)r+1==n.length?o[n[r]]=t===s?{}:t:null==o[n[r]]&&(o[n[r]]={}),o=o[n[r]];return l},getFieldList:function(e,i,n){if(n===s&&(n=""),i===s||null===i)return t.pvt.getFieldList(e,[],n);for(var l in e)"object"!=typeof e[l]||e[l]instanceof Array?i.push(n+l):t.pvt.getFieldList(e[l],i,n+l+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.data.fnOperators={equal:function(e,t,i){return i?P(e)==P(t):e==t},notequal:function(e,i,s){return!t.data.fnOperators.equal(e,i,s)},lessthan:function(e,t,i){return i?P(e)<P(t):e<t},greaterthan:function(e,t,i){return i?P(e)>P(t):e>t},lessthanorequal:function(e,t,i){return i?P(e)<=P(t):e<=t},greaterthanorequal:function(e,t,i){return i?P(e)>=P(t):e>=t},contains:function(e,t,i){return i?!c(e)&&!c(t)&&-1!=P(e).indexOf(P(t)):!c(e)&&!c(t)&&-1!=e.toString().indexOf(t)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i){return i?e&&t&&P(e).startsWith(P(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i){return i?e&&t&&P(e).endsWith(P(t)):e&&t&&e.endsWith(t)},processSymbols:function(e){var i,s=t.data.operatorSymbols[e];return s&&(i=t.data.fnOperators[s])?i:u("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.NotifierArray=function(i){return N(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=N(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},Array.prototype.filter=Array.prototype.filter||function(e){var t,i,s,n;if("function"!=typeof e)throw new TypeError;for(t=[],i=arguments[1]||this,s=0;s<this.length;s++)n=this[s],e.call(i,n,s,this)&&t.push(n);return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var D=/^https?:\/\//i,I=/^get|post$/i,O=new RegExp("^"+location.protocol,"i"),R=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t){if(e.crossDomain&&e.async&&I.test(e.type)&&D.test(t.url)&&O.test(t.url)){var i=null,n=(t.dataType||"").toLowerCase();return{send:function(l,o){i=new XDomainRequest,/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout),i.ontimeout=function(){o(500,"timeout")},i.onload=function(){var e,t="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,l={code:200,message:"success"},r={text:i.responseText};try{if("json"===n)try{r.json=JSON.parse(i.responseText)}catch(e){l.code=500,l.message="parseerror"}else if("xml"===n||"text"!==n&&R.test(i.contentType)){(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1;try{e.loadXML(i.responseText)}catch(t){e=s}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw l.code=500,l.message="parseerror","Invalid XML: "+i.responseText;r.xml=e}}catch(e){throw e}finally{o(l.code,l.message,r,t)}},i.onerror=function(){o(500,"error",{text:i.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(i.onprogress=function(){}),i.open(e.type,e.url),i.send(t.data)},abort:function(){i&&i.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"},a=function(e,t){t&&(e=h(e,t)),(window.setImmediate||window.setTimeout)(e,0)},t.support.enableLocalizedSort=!1;var A=function(e,i,s,n){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==n.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):F(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},M=function(i,s){for(var n=e.grep(s,function(e){return"onGroup"==e.fn}),l=0;l<n.length;l++)if(t.getObject("fieldName",n[l].e)==i)return t.getObject("fn",n[l].e)},F=function(e,i,s){var n=Object.prototype.toString;Object.prototype.toString=-1===i.indexOf(".")?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=n,s&&e.reverse()},P=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||!1===e?e.toString():""},E=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},L=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},N=function(e,t){return e instanceof t},j=function(e,i,s,n){return function(l){return"object"==typeof l&&(n=l,l=null),new t.TableModel(l||e,i,s,n)}},z=function(t){return function(i,s){var n,l,o,r,a;for((s=s||window.ko)||u("Knockout is undefined"),l=[],a=0;a<t.length;a++){for(o in n={},t[a])o.startsWith("_")||(n[o]=s.observable(t[a][o]));for(o in i)r=i[o],e.isPlainObject(r)?(r.owner||(r.owner=n),r=s.computed(r)):r=s.computed(r,n),n[o]=r;l.push(n)}return s.observableArray(l)}},V=0,H=function(e){return e+(V+=1)};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})},d=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},h=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}},t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)},c=function(e){return e===s||null===e},u=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document)}),
/*!
*  filename: ej.draggable.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},helpers={},this._wireEvents(),this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,"msie"==this._browser.name&&this.element.addClass("e-pinch")},_setModel:function(e){for(var t in e)switch(t){case"dragArea":this.model.dragArea=e[t];break;case"dragOnTaphold":this.model.dragOnTaphold=e[t]}},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1),t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var s,n=i;i.preventDefault(),i=this._getCoordinate(i),this.target=e(n.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},e(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler),this.model.clone||(s=this.element.offset(),this._relXposition=i.pageX-s.left,this._relYposition=i.pageY-s.top),e(document.documentElement).trigger(t.eventType.mouseDown,n)},_setDragArea:function(){var i,s,n,l,o,r,a,d=e(this.model.dragArea)[0];if(d){if(l=["left","right","bottom","top"],t.isNullOrUndefined(d.getBoundingClientRect)){for(i=e(this.model.dragArea).outerWidth(),s=e(this.model.dragArea).outerHeight(),a=0;a<l.length;a++)this["border-"+l[a]+"-width"]=0,this["padding-"+l[a]]=0;o=r=0}else{for(i=(n=d.getBoundingClientRect()).width?n.width:n.right-n.left,s=n.height?n.height:n.bottom-n.top,a=0;a<l.length;a++)this["border-"+l[a]+"-width"]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("border-"+l[a]+"-width")))?0:parseFloat(e(e(this.model.dragArea)[0]).css("border-"+l[a]+"-width")),this["padding-"+l[a]]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+l[a])))?0:parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+l[a]));o=e(this.model.dragArea).offset().top,r=e(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:r+this["border-left-width"]+this["padding-left"],this._top=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:o+this["border-top-width"]+this["padding-top"],this._right=r+i-[this["border-right-width"]+this["padding-right"]],this._bottom=o+s-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){var s,n,l,o,r,a=i;i=this._getCoordinate(i),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(a);var d=this._initPosition.x-i.pageX,h=this._initPosition.y-i.pageY;if(Math.sqrt(d*d+h*h)>=this.model.distance){if(!(s=this.model.helper({sender:a,element:this.target}))||t.isNullOrUndefined(s))return;if(n=this.model.handle=this.helper=s,this.model.dragStart&&(l=null,"touchmove"==a.type?(o=a.originalEvent.changedTouches[0],l=document.elementFromPoint(o.clientX,o.clientY)):l=a.originalEvent.target||a.target,this._trigger("dragStart",{event:a,element:this.element,target:l})))return this._destroy(),!1;this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0),r=n.offsetParent().offset(),e(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1),t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:n.css({position:"absolute",left:this.position.left-r.left,top:this.position.top-r.top}),destroy:this._destroyHandler}}},_drag:function(i){var s,n,l,o,r,a,d,h,c;i.preventDefault(),this.position=this._getMousePosition(i),this.position.top<0&&(this.position.top=0),e(document).height()<this.position.top&&(this.position.top=e(document).height()),e(document).width()<this.position.left&&(this.position.left=e(document).width()),h=t.widgetBase.droppables[this.model.scope].helper,this.model.drag&&(r=null,"touchmove"==i.type?(a=i.originalEvent.changedTouches[0],r=document.elementFromPoint(a.clientX,a.clientY)):r=i.originalEvent.target||i.target,this._trigger("drag",{event:i,element:this.target,target:r})),d=this._checkTargetElement(i),t.isNullOrUndefined(d)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=d,d.object._over(i),this._hoverTarget=d),c=(h=t.widgetBase.droppables[this.model.scope].helper).offsetParent().offset(),l=t.isNullOrUndefined(i.pageX)?i.originalEvent.changedTouches[0].pageX:i.pageX,o=t.isNullOrUndefined(i.pageY)?i.originalEvent.changedTouches[0].pageY:i.pageY,this.model.dragArea?(this._pageX!=l&&(s=this._left>this.position.left?this._left:this._right<this.position.left+h.outerWidth(!0)?this._right-h.outerWidth(!0):this.position.left),this._pageY!=o&&(n=this._top>this.position.top?this._top:this._bottom<this.position.top+h.outerHeight(!0)?this._bottom-h.outerHeight(!0):this.position.top)):(s=this.position.left,n=this.position.top),(n<0||n-[c.top+this["border-top-width"]]<0)&&(n=[c.top+this["border-top-width"]]),(s<0||s-[c.left+this["border-left-width"]]<0)&&(s=[c.left+this["border-left-width"]]),h.css({left:s-[c.left+this["border-left-width"]],top:n-[c.top+this["border-top-width"]]}),this.position.left=s,this.position.top=n,this._pageX=l,this._pageY=o},_dragStop:function(e){var t,i;("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e),this.model.dragStop&&(t=null,"touchend"==e.type?(i=e.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=e.originalEvent.target||e.target,this._trigger("dragStop",{event:e,element:this.target,target:t})),this._dragEnd(e)},_dragEnd:function(e){var i=this._checkTargetElement(e);t.isNullOrUndefined(i)||(e.target=e.toElement=i,i.object._drop(e))},_dragMouseEnter:function(t){e(document).off("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(t):this._isIE8?0==t.button&&this._dragManualStop(t):0==t.buttons&&this._dragManualStop(t)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target}),this._destroy(e)},_dragMouseOut:function(){e(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t=e.target;return this.helper&&this._contains(this.helper[0],t)?(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_withDropElement:function(i){if(i&&(dropObj=e(i).data("ejDroppable"),t.isNullOrUndefined(dropObj)&&(dropObj=this._checkParentElement(e(i))),!t.isNullOrUndefined(dropObj)))return e.extend(i,{object:dropObj})},_checkParentElement:function(i){var s=e(i).closest(".e-droppable");if(s.length>0&&(dropObj=e(s).data("ejDroppable"),!t.isNullOrUndefined(dropObj)))return dropObj},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):document.elementFromPoint(e.clientX,e.clientY)},_contains:function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}},_wireEvents:function(){1==t.isDevice()&&1==this.model.dragOnTaphold?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize),this._dragStartHandler=e.proxy(this._dragStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._dragStopHandler=e.proxy(this._dragStop,this),this._dragHandler=e.proxy(this._drag,this),this._dragMouseEnterHandler=e.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=e.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,i=this.model.clone?e.pageY:e.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(e){var i=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type&&"msie"!=t.browserInfo().name)&&(i=e.originalEvent.changedTouches[0]),i}}),function(e,t){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this.model.accept?e(this.element).delegate(this.accept,"mouseup",e.proxy(this._drop,this)):e(this.element).on("mouseup",e.proxy(this._drop,this)),this._on(e(document),"touchend",this._drop),this._mouseOver=!1},_setModel:function(){},_destroy:function(){e(this.element).off("mouseup",e.proxy(this._drop,this))},_over:function(e){this._mouseOver||(this._trigger("over",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("out",e),this._mouseOver=!1)},_drop:function(i){var s=t.widgetBase.droppables[this.model.scope],n=!t.isNullOrUndefined(s.helper)&&s.helper.is(":visible"),l=this._isDropArea(i);s&&!t.isNullOrUndefined(this.model.drop)&&n&&l.canDrop&&this.model.drop(e.extend(i,{dropTarget:l.target},!0),s)},_isDropArea:function(t){var i,s,n,l,o,r={canDrop:!0,target:e(t.target)};if("touchend"==t.type)for(i=t.originalEvent.changedTouches[0],s=document.elementFromPoint(i.clientX,i.clientY),r.canDrop=!1,n=e(s).parents(),l=0;l<this.element.length;l++){if(e(s).is(e(this.element[l])))r={canDrop:!0,target:e(s)};else for(o=0;o<n.length;o++)if(e(this.element[l]).is(e(n[o]))){r={canDrop:!0,target:e(s)};break}if(r.canDrop)break}return r}})}(jQuery,Syncfusion),function(e,t){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?e(this.target).delegate(this.handle,t.eventType.mouseDown,e.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):e(this.target).on("mousedown",e.proxy(this._mousedown,this)),this._resizeStartHandler=e.proxy(this._resizeStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._resizeStopHandler=e.proxy(this._resizeStop,this),this._resizeHandler=e.proxy(this._resize,this),this._resizeMouseEnterHandler=e.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){e(i.target).hasClass("e-resizable")?(e(i.target).css({cursor:"se-resize"}),e(this.target).on(t.eventType.mouseDown,e.proxy(this._mousedown,this))):(e(this.target).off(t.eventType.mouseDown),e(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(){},_mousedown:function(i){var s=i;return i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},this._pageX=i.pageX,this._pageY=i.pageY,e(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler),e(document.documentElement).trigger(t.eventType.mouseDown,s),!1},_resizeStart:function(i){var s;if(e(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var n,l,o=this._initPosition.x-i.pageX,r=this._initPosition.y-i.pageY;if(Math.sqrt(o*o+r*r)>=this.model.distance){if(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:i,element:this.target}))return;s=this.model.helper({element:this.target}),n=i.pageX-this._pageX+s.outerWidth(),l=i.pageY-this._pageY+s.outerHeight(),this._pageX=i.pageX,this._pageY=i.pageY,this.getElementPosition(s),e(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1),t.widgetBase.resizables[this.scope]={resizable:this.target,helper:s.css({width:n,height:l}),destroy:this._destroyHandler}}}},_resize:function(e){var i,s,n,l;e=this._getCoordinate(e),this.getElementPosition(t.widgetBase.resizables[this.scope].helper),l=this.model.helper({element:this.target}),i=e.pageX-this._pageX+l.outerWidth(),s=e.pageY-this._pageY+l.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,i<this.model.minWidth&&(n=this.model.minWidth-i,i=this.model.minWidth,this._pageX=e.pageX+n),s<this.model.minHeight&&(n=this.model.minHeight-s,s=this.model.minHeight,this._pageY=e.pageY+n),null!=this.model.maxHeight&&s>this.model.maxHeight&&(n=s-this.model.maxHeight,s=this.model.maxHeight,this._pageY=e.pageY-n),null!=this.model.maxWidth&&i>this.model.maxWidth&&(n=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=e.pageX-n),t.widgetBase.resizables[this.scope].helper.css({width:i,height:s}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1),t.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&e.length>0?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type)&&(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion)}),
/*!
*  filename: ej.globalize.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){!function(e){function t(e,t){return 0===e.indexOf(t)}function i(e,t){return e.substr(e.length-t.length)===t}function s(e){return(e+"").replace(w,"")}function n(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function l(e,s,n){var l,o=s["-"],r=s["+"];switch(n){case"n -":o=" "+o,r=" "+r;case"n-":i(e,o)?l=["-",e.substr(0,e.length-o.length)]:i(e,r)&&(l=["+",e.substr(0,e.length-r.length)]);break;case"- n":o+=" ",r+=" ";case"-n":t(e,o)?l=["-",e.substr(o.length)]:t(e,r)&&(l=["+",e.substr(r.length)]);break;case"(n)":t(e,"(")&&i(e,")")&&(l=["-",e.substr(1,e.length-2)])}return l||["",e]}function o(e,t,i){var s,l;if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var o,r=i.numberFormat,a=Math.abs(e),d=-1;switch(t.length>1&&(d=parseInt(t.slice(1),10)),s=t.charAt(0).toUpperCase()){case"D":o="n",a=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)}(a),-1!==d&&(a=n(""+a,d,!0)),e<0&&(a=-a);break;case"N":(l=r).pattern=l.pattern||["-n"];case"C":(l=l||r.currency).pattern=l.pattern||["-$n","$n"];case"P":(l=l||r.percent).pattern=l.pattern||["-n %","n %"],o=e<0?l.pattern[0]||"-n":l.pattern[1]||"n",-1===d&&(d=l.decimals),a=function(e,t,i){var s,l=i.groupSizes||[3],o=l[0],r=1,a=Math.pow(10,t),d=Math.round(e*a)/a;isFinite(d)||(d=e);var h=(e=d)+"",c="",u=h.split(/e/i),m=u.length>1?parseInt(u[1],10):0;u=(h=u[0]).split("."),h=u[0],c=u.length>1?u[1]:"",m>0?(h+=(c=n(c,m,!1)).slice(0,m),c=c.substr(m)):m<0&&(c=(h=n(h,1+(m=-m))).slice(-m,h.length)+c,h=h.slice(0,-m)),s=i["."]||".",c=t>0?s+(c.length>t?c.slice(0,t):n(c,t)):"";for(var p=h.length-1,g=i[","]||",",f="";p>=0;){if(0===o||o>p)return h.slice(0,p+1)+(f.length?g+f+c:c);f=h.slice(p-o+1,p+1)+(f.length?g+f:""),p-=o,r<l.length&&(o=l[r],r++)}return h.slice(0,p+1)+g+f+c}(a*("P"===s?100:1),d,l);break;default:throw"Bad number format specifier: "+s}return function(e,t,i){for(var s,n,l=/n|\$|-|%/g,o="";s=l.lastIndex,n=l.exec(t),o+=t.slice(s,n?n.index:t.length),n;)switch(n[0]){case"n":o+=e;break;case"$":o+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(o+=i["-"]||"-");break;case"%":o+=i.percent.symbol||"%"}return o}(a,o,r)}function r(e,t,i){return e<t||e>i}function a(e,t){var i,s,n=new Date;return t<100&&(i="string"==typeof(i=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i,(t+=(s=n.getFullYear())-s%100)>i&&(t-=100)),t}function d(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function h(e){return e.split("Â ").join(" ").toUpperCase()}function c(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=h(e[i]);return t}function u(e,t,i){var s,n=e.days,l=e._upperDays;return l||(e._upperDays=l=[c(n.names),c(n.namesAbbr),c(n.namesShort)]),t=h(t),i?-1===(s=d(l[1],t))&&(s=d(l[2],t)):s=d(l[0],t),s}function m(e,t,i){var s,n=e.months,l=e.monthsGenitive||e.months,o=e._upperMonths,r=e._upperMonthsGen;return o||(e._upperMonths=o=[c(n.names),c(n.namesAbbr)],e._upperMonthsGen=r=[c(l.names),c(l.namesAbbr)]),t=h(t),(s=d(i?o[1]:o[0],t))<0&&(s=d(i?r[1]:r[0],t)),s}function p(e,t){for(var i,s=0,n=!1,l=0,o=e.length;l<o;l++)"'"==(i=e.charAt(l))?(n?t.push("'"):s++,n=!1):"\\"==i?(n&&t.push("\\"),n=!n):(t.push(i),n=!1);return s}function g(e,t,i,s){if(!e)return null;var n=0,l=0,o=null;t=t.split(""),length=t.length;for(var r=function(e){for(var i=0;t[n]===e;)i++,n++;return i>0&&(n-=1),i},a=function(t){var i=new RegExp("^\\d{1,"+t+"}"),s=e.substr(l,t).match(i);return s?(s=s[0],l+=s.length,parseInt(s,10)):null},d=function(t,i){for(var s,n,o,r=0,a=t.length;r<a;r++)if(n=(s=t[r]).length,o=e.substr(l,n),i&&(o=o.toLowerCase()),o==s)return l+=n,r+1;return null},h=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s},c=function(e){var t={};for(var i in e)t[i]=h(e[i]);return t};n<length;n++)ch=t[n],"d"===ch&&(count=r("d"),s._lowerDays||(s._lowerDays=c(s.days)),o=count<3?a(2):d(s._lowerDays[3==count?"namesAbbr":"names"],!0));return o}function f(e,t){t=t||"F";var i,s=e.patterns,n=t.length;if(1===n){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function _(e,i,n){var l,o,d,h,c,p,f,_,v;e=s(e),i=s(i);var b=n.calendar,w=ej.globalize._getDateParseRegExp(b,i),y=new RegExp(w.regExp).exec(e);if(null===y)return null;var S,x=w.groups,T=null,k=null,D=null,I=null,O=0,R=0,A=0,M=0,F=null,P=!1;for(l=0,o=x.length;l<o;l++)if(d=y[l+1]){var E=x[l],L=E.length,N=parseInt(d,10);switch(E){case C.DAY_OF_MONTH_DOUBLE_DIGIT:case C.DAY_OF_MONTH_SINGLE_DIGIT:if(r(D=N,1,31))return null;break;case C.MONTH_THREE_LETTER:case C.MONTH_FULL_NAME:if(r(k=m(b,d,3===L),0,11))return null;break;case C.MONTH_SINGLE_DIGIT:case C.MONTH_DOUBLE_DIGIT:if(r(k=N-1,0,11))return null;break;case C.YEAR_SINGLE_DIGIT:case C.YEAR_DOUBLE_DIGIT:case C.YEAR_FULL:if(r(T=L<4?a(b,N):N,0,9999))return null;break;case C.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(12===(O=N)&&(O=0),r(O,0,11))return null;break;case C.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(r(O=N,0,23))return null;break;case C.MINUTES_SINGLE_DIGIT:case C.MINUTES_DOUBLE_DIGIT:if(r(R=N,0,59))return null;break;case C.SECONDS_SINGLE_DIGIT:case C.SECONDS_DOUBLE_DIGIT:if(r(A=N,0,59))return null;break;case C.MERIDIAN_INDICATOR_FULL:case C.MERIDIAN_INDICATOR_SINGLE:if(!(P=b.PM&&(d===b.PM[0]||d===b.PM[1]||d===b.PM[2]))&&(!b.AM||d!==b.AM[0]&&d!==b.AM[1]&&d!==b.AM[2]))return null;break;case C.DECISECONDS:case C.CENTISECONDS:case C.MILLISECONDS:if(r(M=N*Math.pow(10,3-L),0,999))return null;break;case C.DAY_OF_WEEK_THREE_LETTER:D=g(e,i,0,b);break;case C.DAY_OF_WEEK_FULL_NAME:if(u(b,d,3===L),r(I,0,6))return null;break;case C.TIME_ZONE_OFFSET_FULL:if(2!==(h=d.split(/:/)).length||r(S=parseInt(h[0],10),-12,13)||r(c=parseInt(h[1],10),0,59))return null;F=60*S+(t(d,"-")?-c:c);break;case C.TIME_ZONE_OFFSET_SINGLE_DIGIT:case C.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(r(S=N,-12,13))return null;F=60*S}}if(p=new Date,f=(_=b.convert)?_.fromGregorian(p)[0]:p.getFullYear(),null===T&&(T=f),null===k&&(k=0),null===D&&(D=1),_){if(null===(p=_.toGregorian(T,k,D)))return null}else if(p.setFullYear(T,k,D),p.getDate()!==D)return null;return P&&O<12&&(O+=12),p.setHours(O,R,A,M),null!==F&&(v=p.getMinutes()-(F+p.getTimezoneOffset()),p.setHours(p.getHours()+parseInt(v/60,10),v%60)),p}function v(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=w[t-2]+s).substr(i.length-t,t):s}function n(){return g||_||(g=y.test(t),_=!0),g}var l,o,r,a,d,h,c=i.calendar,u=c.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?u?v(e,c.patterns.F,i):e.toLocaleString():e.toString();o="s"===t,t=f(c,t),l=[];var m,g,_,b,w=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,S=0,x=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;for(!o&&u&&(b=u.fromGregorian(e));;){var T=x.lastIndex,k=x.exec(t);if(S+=p(t.slice(T,k?k.index:t.length),l),!k)break;if(S%2)l.push(k[0]);else switch(a=(r=k[0]).length,r){case C.DAY_OF_WEEK_THREE_LETTER:case C.DAY_OF_WEEK_FULL_NAME:d=3===a?c.days.namesAbbr:c.days.names,l.push(d[e.getDay()]);break;case C.DAY_OF_MONTH_SINGLE_DIGIT:case C.DAY_OF_MONTH_DOUBLE_DIGIT:g=!0,l.push(s(b?b[2]:e.getDate(),a));break;case C.MONTH_THREE_LETTER:case C.MONTH_FULL_NAME:h=b?b[1]:e.getMonth(),l.push(c.monthsGenitive&&n()?c.monthsGenitive[3===a?"namesAbbr":"names"][h]:c.months[3===a?"namesAbbr":"names"][h]);break;case C.MONTH_SINGLE_DIGIT:case C.MONTH_DOUBLE_DIGIT:l.push(s((b?b[1]:e.getMonth())+1,a));break;case C.YEAR_SINGLE_DIGIT:case C.YEAR_DOUBLE_DIGIT:case C.YEAR_FULL:h=b?b[0]:e.getFullYear(),a<4&&(h%=100),l.push(s(h,a));break;case C.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:0===(m=e.getHours()%12)&&(m=12),l.push(s(m,a));break;case C.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:l.push(s(e.getHours(),a));break;case C.MINUTES_SINGLE_DIGIT:case C.MINUTES_DOUBLE_DIGIT:l.push(s(e.getMinutes(),a));break;case C.SECONDS_SINGLE_DIGIT:case C.SECONDS_DOUBLE_DIGIT:l.push(s(e.getSeconds(),a));break;case C.MERIDIAN_INDICATOR_SINGLE:case C.MERIDIAN_INDICATOR_FULL:h=e.getHours()<12?c.AM?c.AM[0]:" ":c.PM?c.PM[0]:" ",l.push(1===a?h.charAt(0):h);break;case C.DECISECONDS:case C.CENTISECONDS:case C.MILLISECONDS:l.push(s(e.getMilliseconds(),3).substr(0,a));break;case C.TIME_ZONE_OFFSET_SINGLE_DIGIT:case C.TIME_ZONE_OFFSET_DOUBLE_DIGIT:m=e.getTimezoneOffset()/60,l.push((m<=0?"+":"-")+s(Math.floor(Math.abs(m)),a));break;case C.TIME_ZONE_OFFSET_FULL:m=e.getTimezoneOffset()/60,l.push((m<=0?"+":"-")+s(Math.floor(Math.abs(m)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case C.DATE_SEPARATOR:l.push(c["/"]||"/");break;default:throw"Invalid date format pattern '"+r+"'."}}return l.join("")}function b(e,t){return t.length?b(e[t[0]],t.slice(1)):e}var C;ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=e.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var w=/^\s+|\s+$/g,y=/^[+-]?infinity$/i,S=/^0x[a-f0-9]+$/i,x=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/;C={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"},ej.globalize._getDateParseRegExp=function(e,t){var i,s,n,l,o,r,a=e._parseRegExp;if(a){if(i=a[t])return i}else e._parseRegExp=a={};for(var d,h=f(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],m=0,g=0,_=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(d=_.exec(h));)if(s=h.slice(m,d.index),m=_.lastIndex,(g+=p(s,c))%2)c.push(d[0]);else{switch(l=(n=d[0]).length,n){case C.DAY_OF_WEEK_THREE_LETTER:case C.DAY_OF_WEEK_FULL_NAME:case C.MONTH_FULL_NAME:case C.MONTH_THREE_LETTER:o="(\\D+)";break;case C.MERIDIAN_INDICATOR_FULL:case C.MERIDIAN_INDICATOR_SINGLE:o="(\\D*)";break;case C.YEAR_FULL:case C.MILLISECONDS:case C.CENTISECONDS:case C.DECISECONDS:o="(\\d{"+l+"})";break;case C.DAY_OF_MONTH_DOUBLE_DIGIT:case C.DAY_OF_MONTH_SINGLE_DIGIT:case C.MONTH_DOUBLE_DIGIT:case C.MONTH_SINGLE_DIGIT:case C.YEAR_DOUBLE_DIGIT:case C.YEAR_SINGLE_DIGIT:case C.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case C.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case C.MINUTES_DOUBLE_DIGIT:case C.MINUTES_SINGLE_DIGIT:case C.SECONDS_DOUBLE_DIGIT:case C.SECONDS_SINGLE_DIGIT:o="(\\d\\d?)";break;case C.TIME_ZONE_OFFSET_FULL:o="([+-]?\\d\\d?:\\d{2})";break;case C.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case C.TIME_ZONE_OFFSET_SINGLE_DIGIT:o="([+-]?\\d\\d?)";break;case C.DATE_SEPARATOR:o="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+n+"'."}o&&c.push(o),u.push(d[0])}return p(h.slice(m),c),c.push("$"),r={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:u},a[t]=r},ej.globalize.addCulture=function(t,i){ej.cultures[t]=e.extend(!0,e.extend(!0,{},ej.cultures.default,i),ej.cultures[t]),ej.cultures[t].calendar=ej.cultures[t].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),(e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e)&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(t){var i,s,n,l,o;if(t){if(e.isPlainObject(t)&&t.numberFormat&&(i=t),"string"==typeof t){if((s=ej.cultures)[t])return s[t];if(t.indexOf("-")>-1){if(s[n=t.split("-")[0]])return s[n]}else for(l=e.map(s,function(e){return e}),o=0;o<l.length;o++)if(l[o].name.split("-")[0]===t)return l[o];return ej.cultures.default}}else i=ej.cultures.current||ej.cultures.default;return i},ej.globalize.format=function(e,t,i){var s=ej.globalize.findCulture(i);return"number"==typeof e?e=o(e,t,s):e instanceof Date&&(e=v(e,t,s)),e},ej.globalize.parseInt=function(e,t,i){return Math.floor(this.parseFloat(e,t,i))},ej.globalize.parseFloat=function(e,t,i){var n,o,r,a,d,h,c,u,m,p,g;"string"==typeof t&&(i=t,t=10);var f=NaN,_=(i=ej.globalize.findCulture(i)).numberFormat,v=i.numberFormat.pattern[0];if((e=e.replace(/ /g,"")).indexOf(i.numberFormat.currency.symbol)>-1?(e=(e=e.replace(i.numberFormat.currency.symbol||"$","")).replace(i.numberFormat.currency["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.currency.pattern[0].replace("$",""))):e.indexOf(i.numberFormat.percent.symbol)>-1&&(e=(e=e.replace(i.numberFormat.percent.symbol||"%","")).replace(i.numberFormat.percent["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.percent.pattern[0].replace("%",""))),e=s(e),y.test(e))f=parseFloat(e,t);else if(!t&&S.test(e))f=parseInt(e,16);else{var b=l(e,_,v),C=b[0],w=b[1];""===C&&"-n"!==_.pattern[0]&&(C=(b=l(e,_,"-n"))[0],w=b[1]),C=C||"+",(r=w.indexOf("e"))<0&&(r=w.indexOf("E")),r<0?(o=w,n=null):(o=w.substr(0,r),n=w.substr(r+1)),h=_["."]||".",(c=o.indexOf(h))<0?(a=o,d=null):(a=o.substr(0,c),d=o.substr(c+h.length)),u=_[","]||",",a=a.split(u).join(""),m=u.replace(/\u00A0/g," "),u!==m&&(a=a.split(m).join("")),p=C+a,null!==d&&(p+="."+d),null!==n&&(p+="e"+((g=l(n,_,v))[0]||"+")+g[1]),x.test(p)&&(f=parseFloat(p))}return f},ej.globalize.parseDate=function(e,t,i){var s,n,l,o,r,a;if(i=ej.globalize.findCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(o=0,r=t.length;o<r&&(!(a=t[o])||!(s=_(e,a,i)));o++);}else for(n in l=i.calendar.patterns)if(s=_(e,l[n],i))break;return s||null},ej.globalize.getLocalizedConstants=function(t,i){var s,n=t.replace("ej.","").split(".");return s=b(ej,n),e.extend(!0,{},s.Locale.default,s.Locale[i||this.cultureObject.name])},e.extend(ej,ej.globalize)}(jQuery)}),
/*!
*  filename: ej.scroller.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){(function(e,t,i,s){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||(this._content="horizontal"===this.model.orientation?this.element.find(".e-hhandle"):this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget"),this._ensureScrollers(),this.content(),this._setInitialValues()},_setInitialValues:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):this.element.addClass("e-vscrollbar"),(0!==this.value()||0!==this.model.minimum)&&(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){e.fn.jquery;this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._scrollData||(this._scrollData="vertical"===this.model.orientation?this._createScroller("Height","Y","Top","e-v"):this._createScroller("Width","X","Left","e-h"))},_setModel:function(e){for(var t in e){if("value"!==t){this.refresh();break}this.value()&&this.scroll(this.value(),"none")}},_createScroller:function(t,i,s,n){var l,o={};e.fn.jquery;return o.dimension=t,o.xy=i,o.position=s,o.css=n,o.uDimension=t,this._calculateLayout(o),this._createLayout(o),l=this[o.main].find(".e-button"),this._off(l,"mousedown")._on(l,"mousedown",{d:o,step:1},this._spaceMouseDown),this._off(this[o.scroll],"mousedown")._on(this[o.scroll],"mousedown",{d:o},this._spaceMouseDown),this._off(this[o.handler],"mousedown touchstart")._on(this[o.handler],"mousedown touchstart",{d:o},this._mouseDown),o},_createLayout:function(i){var s,n="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}</div>",l=e.fn.jquery,o={};o[i.dimension]=i.modelDim,s=t.buildTag("div."+i.css+"scroll e-box",String.format(n,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(n,"handlespace",i.handleSpace,String.format(n,"handle e-box e-pinch",i.handle))+String.format(n,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),o),this.element.append(s),this.element.find(".e-vhandle").addClass("e-v-line e-icon"),this.element.find(".e-hhandle").addClass("e-h-line e-icon"),"1.7.1"===l||"1.7.2"===l?i.uDimension.toLowerCase():i.uDimension,this[i.handler]=this.element.find("."+i.handler),this[i.handler].css("transition","none"),this[i.scroll]=this[i.handler].parent(),this[i.main]=this[i.scroll].parent(),this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(e){var i,n;e.scrollDim="scroll"+e.dimension,e.lPosition=e.position.toLowerCase(),e.clientXy="page"+e.xy,e.scrollVal="scroll"+e.position,e.scrollOneStepBy=this.model.smallChange,e.modelDim=this.model[e.dimension=e.dimension.toLowerCase()],e.handler=e.css+"handle",e.buttonSize=this.model.buttonSize,e.main=e.css+"scroll",e.scroll=e.css+"ScrollSpace",e.handleSpace=e.modelDim-2*e.buttonSize,e.scrollable=this.model.maximum-this.model.minimum,i=this.model.height,"horizontal"===this.model.orientation&&(i=this.model.width),e.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize),n=!t.isNullOrUndefined(this.model.elementHeight)&&"string"==typeof this.model.elementHeight&&-1!=this.model.elementHeight.indexOf("%"),e.handle<20&&!n&&(e.handle=20),e.onePx=e.scrollable/(e.handleSpace-e.handle),e.fromScroller=!1,e.up=!0,e.vInterval=s},_updateLayout:function(e){this.element.height(this.model.height),this.element.width(this.model.width);var t=this.element.find("."+e.css+"handle"),i=this.element.find("."+e.css+"handlespace"),n="width"==e.dimension?t.css("left"):t.css("top"),l="width"==e.dimension?i.outerWidth():i.outerHeight();n!==s&&"auto"!==n&&(l>=e.handle+parseFloat(n)||(this.model.enableRTL?t.css("width"===e.dimension?"left":"top",parseFloat(l)-e.handle):t.css("width"===e.dimension?"left":"top",parseFloat(l)-e.handle>0?parseFloat(l)-e.handle:0))),this.element.find("."+e.css+"scroll").css(e.dimension,e.modelDim+"px").find(".e-button").css(e.dimension,this.model.buttonSize).end().find("."+e.css+"handlespace").css(e.dimension,e.handleSpace+"px").find("."+e.css+"handle").css(e.dimension,e.handle+"px")},refresh:function(){this._ensureScrollers(),this.value()&&this.scroll(this.value(),"none"),this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(e,i,s,n){var l,o,r=this._scrollData;if(!s)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:e,originalEvent:n}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:e,originalEvent:n}))return;!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"==t.browserInfo().name?!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"!=t.browserInfo().name?this.value(e):this.value(-1*e):this.value(-r.scrollable+e),this.content().length>0&&(this.model.orientation===t.ScrollBar.Orientation.Horizontal?(e=(l=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth())<(e-this.model.minimum)/this._scrollData.onePx?l:(e-this.model.minimum)/this._scrollData.onePx,this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"!=t.browserInfo().name&&((e=l-e)>0&&(e*=-1)),this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"==t.browserInfo().name&&(e=-e),this._scrollData.enableRTL&&e>0&&!this._scrollData._scrollleftflag&&(e=0),this._scrollData._scrollleftflag&&(e>0&&(e*=-1),this.value(e)),this.content()[0].style.left=e+"px",this._scrollData._scrollleftflag=!1):(e=(o=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight())<(e-this.model.minimum)/this._scrollData.onePx?o:(e-this.model.minimum)/this._scrollData.onePx,this.content()[0].style.top=e+"px"))},_changeTop:function(e,t,i){var s,n;return e.dimension,n=(s=this.value())+t,e.step=t,e.enableRTL&&t<0||t>0&&!e.enableRTL?e.enableRTL?n<-1*this.model.maximum&&(n=-1*this.model.maximum):n>this.model.maximum&&(n=this.model.maximum):e.enableRTL?n>this.model.minimum&&(n=this.model.minimum):n<this.model.minimum&&(n=this.model.minimum),(n!==s||this.model.infiniteScrolling)&&this.scroll(n,i),n!==s},_mouseUp:function(i){if(i.data){var s=i.data.d;clearInterval(s.vInterval),"touchend"==i.type&&e(i.target).removeClass("e-touch"),"mouseup"!==i.type&&"touchend"!==i.type&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(e(document),"mousemove touchmove",this._mouseMove),e(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),s.fromScroller=!1,this[s.scroll].off("mousemove"),this[s.handler].off("mousemove").css("transition",""),"thumb"!==i.data.source||t.isNullOrUndefined(this.model)||e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:s})},this))),s.up=!0}},_mouseDown:function(i){this._enabled&&(this._d=i,this._data=this._d.data.d,this._data.target=this._d.target,this._data.fromScroller=!0,this[this._data.handler].css("transition","none"),this._on(e(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove),this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data}),e(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this)),"touchstart"==i.type&&e(i.target).addClass("e-touch"))},_mouseCall:function(e){e.type="mouseup",this._mouseUp(e)},_mouseMove:function(i){var s,n,l=0,o=parseInt(this[this._data.handler].css(this._data.lPosition))||0;if(i.preventDefault(),t.isNullOrUndefined(i.target.tagName)){if(e(i.target).is(document))return void this._mouseCall(i)}else if("iframe"===i.target.tagName.toLowerCase())return void this._mouseCall(i);n="mousemove"==i.type?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy],this._prevY&&n!==this._prevY&&(l=n-this._prevY,this.model.infiniteScrolling?(o+=l,this._data.step=l,(this._data.enableRTL?o>0:o<0)&&(o=0),o*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(o=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),s=Math.ceil(o*this._data.onePx),this.scroll(s,"thumb")):(s=l*this._data.onePx,this._changeTop(this._data,s,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,scrollData:this._data})),this._prevY=n},_spaceMouseDown:function(i){var s,n,l;i.data&&this._enabled&&(s=i.data.d,1===i.which&&i.target!==this[s.handler][0])&&(n=i.data.step?this.model.smallChange:this.model.largeChange,l=i.data.top||this[s.handler].offset()[s.lPosition],i[s.clientXy]=i[s.clientXy]||0,i[s.clientXy]<l&&(n*=-1),s.target=i.target,this._changeTop(s,n,3===n?"track":"button",i),1!==i.data.step&&this[s.scroll].mousemove(function(){s.up=!0}),s.up=!1,s.vInterval=setInterval(t.proxy(function(){(n<0?l+n/s.onePx<i[s.clientXy]:l+s.handle+n/s.onePx>i[s.clientXy])&&(s.up=!0),s.up?clearInterval(s.vInterval):(this._changeTop(s,n,3===n?"track":"button",i),l=i.data&&i.data.top||this[s.handler].offset()[s.lPosition])},this),150),e(document).one("mouseup",{d:s},t.proxy(this._mouseUp,this)),e(document).mouseout({d:s},t.proxy(this._mouseUp,this)))},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove(),this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove(),this._scrollData=null,this._content=null},_destroy:function(){this.element.remove()}}),t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}})(jQuery,Syncfusion,window),function(e,t,i,s){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:s,enableTouchScroll:!0,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this.model.enableRTL===s&&(this.model.enableRTL="rtl"===this.element.css("direction")),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._on(this.content(),"scroll",this._scroll),null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),(this._prevScrollWidth!==this.content()[0].scrollWidth||this._prevScrollHeight!==this.content()[0].scrollHeight)&&this.refresh()),this._addActionClass()},_addActionClass:function(){"msie"==this._browser&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")||(this._vScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):e(this.content()[0]).height("")),t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")||(this._hScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):e(this.content()[0]).width(""))},_setScrollLeftValue:function(e){this.model.enableRTL&&(e="mozilla"==t.browserInfo().name?e<0?e:-1*e:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&("chrome"==t.browserInfo().name||this._rtlScrollLeftValue>0)?e<0?this._rtlScrollLeftValue+e:this._rtlScrollLeftValue-e:Math.abs(e)),this.content().scrollLeft(e)},_ensureScrollers:function(){var s,n,l,o,r,a=e.fn.jquery;this.model.height="string"==typeof this.model.height&&-1!=this.model.height.indexOf("px")?parseInt(this.model.height):this.model.height,this.model.width="string"==typeof this.model.width&&-1!=this.model.width.indexOf("px")?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0&&(this.isVScroll()?(this._vScrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._hScrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll?(this.content().addClass("e-content"),"1.7.1"===a||"1.7.2"===a?(s="height",n="width"):(s="outerHeight",n="outerWidth"),o=(l=this._exactElementDimension(this.element)).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.content()[s](o-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:0)),r=l.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.content()[n](r-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:0)),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0&&e(i).on("resize",e.proxy(this._resetScroller,this))):this.content().removeClass("e-content"),this._setDimension(),this._parentHeight=e(this.element).parent().height(),this._parentWidth=e(this.element).parent().width())},_convertPercentageToPixel:function(e,t){return Math.floor(e*t/100)},isHScroll:function(){if(t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")){if(this.model.width>0){var i=this.content().find(this.model.targetPane);return null!=this.model.targetPane&&i.length?i[0].scrollWidth+i.siblings().width()>this.model.width:this.content()[0].scrollWidth>this.model.width||this.content()[0].scrollWidth==this.model.width&&e(this.content()[0]).find("> *").length>0&&e(this.content()[0]).find("> *")[0].scrollWidth>this.model.width}return!1}return this.content()[0].scrollWidth>this.element.width()},isVScroll:function(){return t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?!!(this.model.height>0&&(this.content()[0].scrollHeight>this.model.height||this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2)))):this.content()[0].scrollHeight>this.element.outerHeight()},_setModel:function(e){for(var i in e)if("enableRTL"===i)e[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1)),this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));else if("scrollLeft"===i)(parseFloat(e[i])<0||!this._hScroll)&&(e[i]=0),this._externalCall=!0,this._hScrollbar&&(e[i]=parseFloat(e[i])>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e[i])),this._setScrollLeftValue(parseFloat(e[i])),this.scrollLeft(e[i]),!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(e[i]);else if("scrollTop"===i)this._vScrollbar&&(e[i]=parseFloat(e[i])>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e[i])),(parseFloat(e[i])<0||!this._vScroll)&&(e[i]=0),this._externalCall=!0,this.content().scrollTop(parseFloat(e[i])),this.scrollTop(e[i]),this.scrollY(e[i]);else if("touchScroll"===i)this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");else if("scrollOneStepBy"===i)this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=e[i],this._vScrollbar.model.smallChange=e[i]),this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=e[i],this._hScrollbar.model.smallChange=e[i]);else{if("buttonSize"!==i){"height"===i&&(this._eleHeight=e[i]),"width"===i&&(this._eleWidth=e[i]),this.refresh();break}this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize),this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize),this.refresh()}},_createScrollbar:function(i,s){var n,l,o,r,a,d,h,c=this,u=document.createElement("div");return i===t.ScrollBar.Orientation.Vertical?(l=this.model.scrollerSize,o=n=t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?this.model.height-(s?this.model.scrollerSize:0):this.element.height()-(s?this.model.scrollerSize:0),r=this.content()[0].scrollHeight,a=this.scrollTop()):(l=n=this.model.width-(s?this.model.scrollerSize:0),o=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")?(d=this.content().find(this.model.targetPane),r=null!=this.model.targetPane&&d.length?d[0].scrollWidth+d.parent().width()-d.width():this.content()[0].scrollWidth):(l=n=this.element.width()-(s?this.model.scrollerSize:0),r=this.content()[0].scrollWidth),a=this.scrollLeft()),this.element.children(".e-hscrollbar").length>0?e(this.element.children(".e-hscrollbar")).before(u):this.element.append(u),e(u).ejScrollBar({elementHeight:c._eleHeight,elementWidth:c._eleWidth,buttonSize:c.model.buttonSize,orientation:i,viewportSize:n,height:o,width:l,maximum:r-n,value:a,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)}),h=e(u).ejScrollBar("instance"),i!==t.ScrollBar.Orientation.Vertical&&s||this._off(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:h._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=h._scrollData:this._scrollYdata=h._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(h._scrollData.enableRTL=!0),h._enabled=this.model.enabled,h},_updateScrollbar:function(i,s){var n=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;n&&(i===t.ScrollBar.Orientation.Vertical?(n.model.width=this.model.scrollerSize,n.model.height=n.model.viewportSize=this.model.height-(s?this.model.scrollerSize:0),n.model.maximum=this.content()[0].scrollHeight-n.model.viewportSize,n.model.value=this.scrollTop()):(n.model.width=n.model.viewportSize=this.model.width-(s?this.model.scrollerSize:0),n.model.height=this.model.scrollerSize,n.model.maximum=(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-e(this.model.targetPane).outerWidth()):this.content()[0].scrollWidth)-n.model.viewportSize,this.model.enableRTL||(n.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").hide()):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_scrollChanged:function(i){this._updateScroll=!0,i.scrollTop!==s?this.scrollY(i.scrollTop,!0,"",i.source):i.scrollLeft!==s&&this.scrollX(i.scrollLeft,!0,"",i.source),this._updateScroll=!1;var n=this;e.when(this.content()).done(t.proxy(function(){n._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(s,n){this._scrollEle=e(s).data("ejScrollBar"),this._event=n;this._listener=function(){this._scrollEle._off(e(document),"mousemove touchmove",this._scrollEle._mouseMove),e(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle)),this._scrollEle._prevY=null,this._off(e(document),"mousemove touchmove",this._mouseMove),this._off(e(document),"mouseup touchend",this._mouseUp),this._off(e(i),"blur"),this._evtData.handler,this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})},this._on(e(i),"blur",this._listener)},_thumbStart:function(e){this._evtData=e.scrollData;var t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar"));e.scrollData.handler,t=this.element.find("."+e.scrollData.handler).closest(".e-scrollbar");this._bindBlurEvent(t,e),this._trigger("thumbStart",e)},_thumbMove:function(e){this._trigger("thumbMove",e)},_thumbEnd:function(t){this._trigger("thumbEnd",t),this._off(e(i),"blur")},refresh:function(i){var s,n;i||this.element.find(">.e-content").removeAttr("style"),t.isNullOrUndefined(this._eleHeight)||"string"!=typeof this._eleHeight||-1==this._eleHeight.indexOf("%")||this._parentHeight==e(this.element).parent().height()||(s=(s=this._exactElementDimension(this.element.parent())).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),s)),t.isNullOrUndefined(this._eleWidth)||"string"!=typeof this._eleWidth||-1==this._eleWidth.indexOf("%")||this._parentWidth==e(this.element).parent().width()||(s=(s=this._exactElementDimension(this.element.parent())).width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),s)),this._ensureScrollers(),n=this.scrollLeft(),this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),n>0?this.content().scrollLeft(n):this._setScrollLeftValue(n)):this.content().scrollLeft(n),(this.scrollTop()&&null==this._vScrollbar||null!==this._vScrollbar&&null!=this._vScrollbar._scrollData&&!this._vScrollbar._scrollData.skipChange)&&this.content().scrollTop(this.scrollTop()),this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData)),this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData)),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version?this.element.find(".e-hhandle").css("left","0px"):null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this._addActionClass(),this._autohide()},_exactElementDimension:function(e){var t,i,s,n=e.get(0).getBoundingClientRect(),l=["left","right","top","bottom"];for(t=n.width?n.width:n.right-n.left,i=n.height?n.height:n.bottom-n.top,s=0;s<l.length;s++)this["border_"+l[s]]=isNaN(parseFloat(e.css("border-"+l[s]+"-width")))?0:parseFloat(e.css("border-"+l[s]+"-width")),this["padding_"+l[s]]=isNaN(parseFloat(e.css("padding-"+l[s])))?0:parseFloat(e.css("padding-"+l[s]));return{width:t,height:i}},_keyPressed:function(e,i){if(this.model.enabled){if(-1!==["input","select","textarea"].indexOf(i.tagName.toLowerCase()))return!0;var s,n;if(-1!==["up","down","pageUp","pageDown"].indexOf(e))this._vScrollbar&&("msie"==t.browserInfo().name&&this.model.allowVirtualScrolling&&this._content.focus(),s=this._vScrollbar._scrollData),n="o";else{if(-1===["left","right","pageLeft","pageRight"].indexOf(e))return!0;this._hScrollbar&&(s=this._hScrollbar._scrollData),n="i"}return!s||!this._changeTop(s,(e.indexOf(n)<0?-1:1)*("p"!==e[0]?1:3)*s.scrollOneStepBy,"key")}},scrollY:function(e,i,s,n,l){if(""!==e){if(i){l={source:n||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:l};if(this._trigger("scroll",l))return;return e=l.scrollTop,this.scrollTop(e),void this.content().scrollTop(e)}(t.isNullOrUndefined(s)||""===s)&&(s=100),this._vScrollbar&&(e=parseFloat(e)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e)),this.scrollTop(e),this.content().stop().animate({scrollTop:e},s,"linear"),this._trigger("scroll",{source:n||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:l})}},scrollX:function(e,i,s,n,l){var o;if(""!==e){if(this._hScrollbar&&(e=parseFloat(e)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e)),this._externalCall=!0,o=t.browserInfo().name,this.model.enableRTL&&"mozilla"!=o&&(e<0&&(e=Math.abs(e)),null!=this.model.targetPane?this.content().find(this.model.targetPane)[0]:this.content()[0],"mousemove"!=l&&"touchmove"!=l&&"msie"!=o&&"msie"!=o&&(e=this._hScrollbar._scrollData.scrollable-e)),this.scrollLeft(e),i){if(this._trigger("scroll",{source:n||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:l}))return;return void(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(e):this.content().scrollLeft(e))}(t.isNullOrUndefined(s)||""===s)&&(s=100),null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:e},s,"linear"):this.content().stop().animate({scrollLeft:e},s,"linear"),this._trigger("scroll",{source:n||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:l})}},enable:function(){var e=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");e.hasClass("e-disable")&&(e.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0),this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon").addClass("e-disable").attr({"aria-disabled":!0}),this.model.enabled=!1,this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(e,i,s,n){var l,o=null!=this.model.targetPane&&"height"!=e.dimension?this.content().find(this.model.targetPane)[e.scrollVal]():this.content()[e.scrollVal]();return"height"==e.dimension&&0==o&&(o=0!=this.scrollTop()?this.scrollTop():0),l=o+i,(e.enableRTL?l<e.scrollable:l>e.scrollable)&&(l=e.scrollable),(e.enableRTL?l>0:l<0)&&(l=0),l!==o&&(this["scroll"+e.xy](l,!0,"",s,n),"X"!==e.xy||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(l,s,!0,n):this._hScrollbar.scroll(l,s,!0,n)),l!==o},_mouseWheel:function(t){var s;if((this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var n,l=0,o=t.data.d,r=t;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:r.data.d}),this._wheelStart=!1,clearTimeout(e.data(this,"timer")),1!=this._wheelx&&(0==t.wheelDeltaX||0==t.wheelDeltaY)&&(this._wheelx=1),0==navigator.platform.indexOf("Mac")&&0==this._wheelx&&("webkit"==this._browser||"chrome"==this._browser))return!0;"mozilla"==this._browser?t.axis==t.HORIZONTAL_AXIS?o=this._scrollXdata:this._scrollYdata:"msie"==this._browser?("wheel"==t.type&&(l=t.deltaX/120),"mousewheel"==t.type&&t.shiftKey&&(o=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&0!=t.wheelDeltaX&&0==t.wheelDeltaY&&this._scrollXdata&&(o=this._scrollXdata),0==t.wheelDeltaX&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(l=0==navigator.platform.indexOf("Mac")?-t.wheelDelta/3:-t.wheelDelta/120,i.opera&&parseFloat(i.opera.version,10)<10&&(l=-l)):t.detail&&(l=t.detail/3),l&&(r.originalEvent&&(n=r.originalEvent.wheelDelta&&r.originalEvent.wheelDelta>0||r.originalEvent.detail&&r.originalEvent.detail<0?-1:1),this._changeTop(o,l*o.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():r.preventDefault(),r.stopImmediatePropagation(),r.stopPropagation(),this._trigger("wheelMove",{originalEvent:t,scrollData:r.data.d,direction:n})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:r}),this._wheelx=0),s=this,e.data(this,"timer",setTimeout(function(){s._wheelStart=!0,s._trigger("wheelStop",{originalEvent:t,scrollData:r.data.d,direction:n})},250)))}},_scrollerHover:function(e){"mouseenter"!=e.type&&"touchstart"!=e.type||this.content().siblings().is(":visible")?("mouseleave"==e.type||"touchend"==e.type)&&this.content().siblings().hide():this.content().siblings().css("display","block")},_mouseUp:function(s){if(s.data){var n=s.data.d;"mouseup"!==s.type&&"touchend"!==s.type&&(s.toElement||s.relatedTarget)||(this.content().css("cursor","default"),this._off(e(document),"mousemove touchmove"),this._off(e(document),"mouseup touchend",this._mouseUp),n.fromScroller=!1,!0!==this._mouseMoved||"thumb"!==s.data.source||t.isNullOrUndefined(this.model)||(e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:s,scrollData:n})},this)),this._off(e(i),"blur"))),n.up=!0}},_mouseDownOnContent:function(n){var l,o;if(this._velocity=0,this.model.enabled&&(l=n.data.d,this._evtData=n.data,this._startX=n.clientX!=s?n.clientX:n.originalEvent.changedTouches[0][l.clientXy],this._startY=n.clientY!=s?n.clientY:n.originalEvent.changedTouches[0][l.clientXy],this._timeStart=n.timeStamp||Date.now(),l.handler,o=this.element.find("."+l.handler).closest(".e-scrollbar"),this._bindBlurEvent(o,n),!this._trigger("thumbStart",{originalEvent:n,scrollData:l}))&&(3!=n.which||2!=n.button)){l.fromScroller=!0;var r,a=null,d=1;this._document=e(document),this._window=e(i),this._mouseMove=function(e){var i,n,o;if(this._relDisX=(this._startx=e.clientX!=s?e.clientX:e.originalEvent.changedTouches[0][l.clientXy])-this._startX,this._relDisY=(this._starty=e.clientY!=s?e.clientY:e.originalEvent.changedTouches[0][l.clientXy])-this._startY,this._duration=(e.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,e.preventDefault(),"iframe"===e.target.tagName.toLowerCase())return e.type="mouseup",void this._mouseUp(e);if(i="mousemove"==e.type?e[l.clientXy]:e.originalEvent.changedTouches[0][l.clientXy],a&&i!==a&&(this._mouseMoved=!0,n=i-a,o=this.model[l.scrollVal]-n,1==d&&Math.abs(n)>5&&(r=l.position,d=0),0==d&&(a=i),o>=0&&o<=l.scrollable&&r===l.position)){var h=this._velocityY>.5&&this._duration<50&&"Top"==l.position,c=this._velocityX>.5&&this._duration<50&&"Left"==l.position;(this._velocityY>.5||this._velocityX>.5)&&this._duration<50?h?(o=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(o+=this.scrollTop())>l.scrollable&&(o=l.scrollable):o<this.scrollTop()&&(o=Math.abs(o-this.scrollTop())),this.scrollTop()<=l.scrollable&&this.scrollY(o,!1,this.model.animationSpeed,"thumb")):c&&(o=Math.abs(this._relDisX),this._startX>this._startx?(o+=this.scrollLeft())>l.scrollable&&(o=l.scrollable):(o-=this.scrollLeft(),((o=Math.abs(o))>l.scrollable||o>=this.scrollLeft())&&(o=0)),this.scrollLeft()<=l.scrollable&&this.scrollX(o,!1,this.model.animationSpeed,"thumb")):(this["scroll"+l.xy](o,!0,"","thumb",e.type),"X"===l.xy?this._hScrollbar.scroll(o,"thumb",!0,e.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(o,"thumb",!0,e.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:e,scrollData:l}))}null==a&&(a=i)},this._on(e(document),"mousemove touchmove",{d:l,source:"thumb"},this._mouseMove),this._mouseMoved=!1,this._on(e(document),"mouseup touchend",{d:l,source:"thumb"},this._mouseUp)}},_scroll:function(e){for(var i,s,n=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null],l=0;l<2;l++)if((i=n[l])&&!i.skipChange){if(this._externalCall||("height"===i.dimension?this.scrollTop(e.target[i.scrollVal]):this.scrollLeft(e.target[i.scrollVal])),i.sTop=this.model&&null!=this.model.targetPane&&1==l&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0][i.scrollVal]:"scrollTop"==i.scrollVal?this.scrollTop():this.scrollLeft(),this[i.scrollVal](i.sTop),i.fromScroller)return;1===l?(s=this.content()[0],this._rtlScrollLeftValue&&s.scrollWidth-s.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=s.scrollWidth-s.clientWidth),i.sTop=this.model&&"mozilla"!=t.browserInfo().name&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?0==this._rtlScrollLeftValue?-1*i.sTop:i.sTop-this._rtlScrollLeftValue:i.sTop,this._hScrollbar.scroll(i.sTop,"",!0)):this._vScrollbar.scroll(i.sTop,"",!0),(2==n.length&&1==l||1==n.length&&0==l)&&(this._externalScroller=!1)}},_changevHandlerPosition:function(e){var t=this._vScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&e>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(e){var t=this._hScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&top>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_destroy:function(){this.element.css({width:"",height:""}).find(".e-vscrollbar,.e-hscrollbar").remove(),this.content().removeClass("e-content").css({width:"",height:""})}})}(jQuery,Syncfusion,window)}),
/*!
*  filename: ej.grid.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","jsrender","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.touch.min","./../common/ej.draggable.min","./../common/ej.scroller.min","./ej.button.min","./ej.checkbox.min","./ej.menu.min","./ej.waitingpopup.min","./ej.radiobutton.min","./ej.autocomplete.min","./ej.datepicker.min","./ej.datetimepicker.min","./ej.dropdownlist.min","./ej.dialog.min","./ej.editor.min","./ej.pager.min","./ej.toolbar.min","./ej.excelfilter.min"],e):e()}(function(){var n,t,r;n=jQuery,t=Syncfusion,t.gridFeatures=t.gridFeatures||{},t.gridFeatures.common={refreshContent:function(e){e&&(this.refreshTemplate(),this._refreshHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFilterBarTemplate();var i={};this._initialRenderings(),i.requestType=t.Grid.Actions.Refresh,this._processBindings(i)},rowHeightRefresh:function(){var e,i;if(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.model.currentViewData)&&this.model.currentViewData.length){var s=this.getContentTable().get(0).rows,l=this.getContentTable().get(1).rows,o=0;if(this.getContent().find(".e-frozencontentdiv").is(":visible"))for(e=0;e<s.length;e++)"none"!=n(s[e]).css("display")&&(o=t.max([s[e].getClientRects()[0].height,l[e].getClientRects()[0].height]),n(s[e]).height(o),n(l[e]).height(o),e&&(e==this.model.scrollSettings.frozenRows-1||e==s.length-1)&&(o+=1),this.model.allowTextWrap||e&&e!=this.model.scrollSettings.frozenRows-1||(o-=1),this.model.isEdit&&n(s[e]).find("#"+this._id+"EditForm").length&&e&&n(s[e]).find("#"+this._id+"EditForm td").css("height",o),n(l[e]).find("#"+this._id+"EditForm td").css("height",o));this._getRowHeights(),!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&(null!=this.getScrollObject()._vScrollbar||this.getScrollObject().isVScroll())&&(i=this.getScrollObject()._vScrollbar,(t.isNullOrUndefined(i)||i.value()!=i.model.maximum)&&this._scrollObject.refresh(this.model.scrollSettings.frozenColumns>0))}},dataSource:function(e,t){t&&(this._templateRefresh=!0),this._dataSource(e),this.model.scrollSettings.enableVirtualization||(e.length>0?this._currentPage(1):this._currentPage(0)),this._updateDataSource=!0,this._refreshDataSource(e,t);var i=this._refreshVirtualPagerInfo();(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling)&&this._showPagerInformation(i),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData?this._refreshVirtualView():this._refreshVirtualContent(),this.getContent().ejScroller("isHScroll")&&this.getContent().ejScroller("scrollX",0,!0),this.getContent().ejScroller("isVScroll")?(this.model.scrollSettings.enableVirtualization||this.getContent().ejScroller("scrollY",0,!0),this.element.find(".e-gridheader").addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss")),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow(),this._trigger("dataBound",{})},_refreshDataSource:function(e,i){this._dataManager=e instanceof t.DataManager?e:t.DataManager(e),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataManager.dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._virtualDataRefresh=!0,this._isLocalData&&this._refreshVirtualViewDetails(!0)),this.refreshContent(!!t.isNullOrUndefined(i)||i),t.isNullOrUndefined(this.getPager())||(this.getPager().ejPager("model.currentPage",1),this._refreshGridPager())},hideColumns:function(e){var i,s,l,o,r,a,d,h=0,c={},u=[],m=0;"string"==typeof e?this.getColumnByHeaderText(e):this.getColumnByHeaderText(e[0]),s="string"==typeof e?this.getColumnByField(e):this.getColumnByField(e[0]),this._showHideColumns=!0;var p=this._isDuplicate(n.merge(n.merge([],this._visibleColumns),this._hiddenColumns)),g=p?"_hiddenColumnsField":"_hiddenColumns",f=p?"_visibleColumnsField":"_visibleColumns";if(!p&&null!=s)if(n.isArray(e))for(l=0;l<e.length;l++)o=this.getColumnByField(e[l]),e[l]=null!=o?o.headerText:e[l];else e=s.headerText;if(n.isArray(e))for(l=0;l<e.length;l++)-1!=(i=n.inArray(e[l],this[f]))?(this[g].push(e[l]),this[f].splice(i,1)):-1==i&&"_visibleColumnsField"==f&&-1==n.inArray(e[l],this[g])&&t.isNullOrUndefined(this.getColumnByField(e[l]))&&(this[g].push(this.getColumnByHeaderText(e[l]).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(e[l]).field),this[f].splice(n.inArray(this.getColumnByHeaderText(e[l]).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(e[l],this._visibleColumns),1));else-1!=(i=n.inArray(e,this[f]))?(this[g].push(e),this[f].splice(i,1)):-1==i&&"_visibleColumnsField"==f&&-1==n.inArray(e,this[g])&&t.isNullOrUndefined(this.getColumnByField(e))&&(this[g].push(this.getColumnByHeaderText(e).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(e).field),this[f].splice(n.inArray(this.getColumnByHeaderText(e).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(e,this._visibleColumns),1));for(l=0;l<this.model.columns.length&&(r=p?"field":"headerText",-1!=n.inArray(t.isNullOrUndefined(this.model.columns[l][r])||""==this.model.columns[l][r]?this.model.columns[l].headerText:this.model.columns[l][r],this[g])&&(this.model.columns[l].visible&&u.push(this.model.columns[l]),this.model.columns[l].visible=!1,this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&this.model.columns.indexOf(this.model.columns[l])<this.model.scrollSettings.frozenColumns&&m++,h++),this[g].length!=h);l++);c.requestType="refresh",this._hideHeaderColumn(this[g],p),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(a=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(a[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&(0!=this.model.scrollSettings.frozenColumns||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||(d=this._calculateWidth(),this.getHeaderTable().width(d),this.getContentTable().width(d)),t.isNullOrUndefined(this._scrollObject)||this.getScrollObject().refresh()),this.model.showColumnChooser&&this._refreshColumnChooserList(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(m==this.model.scrollSettings.frozenColumns&&this._frozenPaneRefresh(),this.getScrollObject().refresh()),this._showHideColumns=!1},showColumns:function(e){var i,s,l,o,r,a,d,h=0,c={},u=[];"string"==typeof e?this.getColumnByHeaderText(e):this.getColumnByHeaderText(e[0]),i="string"==typeof e?this.getColumnByField(e):this.getColumnByField(e[0]),this._showHideColumns=!0;var m=this._isDuplicate(n.merge(n.merge([],this._visibleColumns),this._hiddenColumns)),p=m?"_hiddenColumnsField":"_hiddenColumns",g=m?"_visibleColumnsField":"_visibleColumns";if(!m&&null!=i)if(n.isArray(e))for(a=0;a<e.length;a++)s=this.getColumnByField(e[a]),e[a]=null!=s?s.headerText:e[a];else e=i.headerText;if(n.isArray(e))for(a=0;a<e.length;a++)-1!=(r=n.inArray(e[a],this[p]))?(this[p].splice(r,1),this[g].push(e[a])):-1==r&&"_hiddenColumnsField"==p&&-1==n.inArray(e[a],this[g])&&t.isNullOrUndefined(this.getColumnByField(e[a]))&&(this[g].push(this.getColumnByHeaderText(e[a]).field)&&this._visibleColumns.push(e[a]),this[p].splice(n.inArray(this.getColumnByHeaderText(e[a]).field,this[p]),1)&&this._hiddenColumns.splice(n.inArray(e[a],this._hiddenColumns),1));else-1!=(r=n.inArray(e,this[p]))?(this[p].splice(r,1),this[g].push(e)):-1==r&&"_hiddenColumnsField"==p&&-1==n.inArray(e,this[g])&&t.isNullOrUndefined(this.getColumnByField(e))&&(this[g].push(this.getColumnByHeaderText(e).field)&&this._visibleColumns.push(e),this[p].splice(n.inArray(this.getColumnByHeaderText(e).field,this[p]),1)&&this._hiddenColumns.splice(n.inArray(e,this._hiddenColumns),1));for(a=0;a<this.model.columns.length&&(l=m?"field":"headerText",-1!=n.inArray(t.isNullOrUndefined(this.model.columns[a][l])||""==this.model.columns[a][l]?this.model.columns[a].headerText:this.model.columns[a][l],this[g])&&(this.model.columns[a].visible||u.push(this.model.columns[a]),this.model.columns[a].visible=!0,h++),this[g].length!=h);a++);if(this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0){for(o=!1,a=0;a<u.length;a++)(r=this.model.columns.indexOf(u[a]))<this.model.scrollSettings.frozenColumns&&(o=!0);if(o){for(a=0;a<this.model.columns.length;a++)-1!=n.inArray(this.model.columns[a].headerText,this._hiddenColumns)?this.model.columns[a].visible=!1:-1!=n.inArray(this.model.columns[a].headerText,this._visibleColumns)&&(this.model.columns[a].visible=!0);d=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(d[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()}}c.requestType="refresh",this._showHeaderColumn(this[g],m),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&!t.isNullOrUndefined(this._scrollObject)&&this.getScrollObject().refresh(),this.model.showColumnChooser&&this._refreshColumnChooserList(),this._showHideColumns=!1},_virtualShowHide:function(e){this._currentPage(1),this.model.query=this.commonQuery.clone(),this._ensureDataSource(e),this._loadedJsonData=[],this._prevPage=this._currentPage()},resizeColumns:function(e,t){var i,s;if(e instanceof Array)for(i=0;i<e.length;i++)s=t instanceof Array?t[i]:t,this._setWidthColumnCollection(e[i],s);else this._setWidthColumnCollection(e,t);this.setWidthToColumns(),this.model.scrollSettings.frozenColumns&&(this._frozenAlign(),this.rowHeightRefresh())},_setWidthColumnCollection:function(e,t){var i=this.getColumnByHeaderText(e)||this.getColumnByField(e);i.width=t,-1==n.inArray(i.field,this._disabledResizingColumns)&&(this.columnsWidthCollection[n.inArray(i,this.model.columns)]=t)},refreshTemplate:function(){this.addInitTemplate(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.model.allowGrouping&&this.addGroupingTemplate()},_refreshHeader:function(){var e=this.element.find(".e-gridheader");this.element[0].replaceChild(this._renderGridHeader()[0],e[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowGrouping&&this._headerCellgDragDrop(),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.showColumnChooser&&this._renderColumnChooserData(!0),"both"!=this.model.gridLines&&this._showHeaderGridLines()},set_dropColumn:function(e,i){var s,l,o,a,d,h,c,u,m,p,g,f,_,v;if(this.model.allowReordering&&e!=i){this.model.columns.splice(i,0,this.model.columns.splice(e,1)[0]);var b=this.model.columns,C=this.getHeaderTable().find(".e-columnheader:last .e-headercell").not(".e-stackedHeaderCell"),w=C.find(".e-headercelldiv");this.model.scrollSettings.frozenColumns||this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),s=function(e){var t,i,s,l=[];if(e!=r){-1==["",r].indexOf(e.value)&&(l.push({name:"value",value:e.value}),e.value="");for(var o=0,a=e.attributes,d=a.length;o<d;o++)t=/^jQuery[0-9]+$/,a[o].name.match(t)||l.push({name:a[o].name,value:a[o].value});for(i=0,s=l.length;i<s;i++)n(e).removeAttr(l[i].name);return l}},l=function(e,t){if(t!=r)for(var i=0,s=e.length;i<s;i++)"value"==e[i].name&&(t.value=e[i].value),n(t).attr(e[i].name,e[i].value)},this.getHeaderTable().find(".e-filterdiv").length>0&&(o=this.getHeaderTable().find(".e-filterdiv input"));var y=t.isNullOrUndefined(o),S={cellattributes:[],headerattributes:[],filtercellattributes:[],filterThattributes:[]},x=e<i?e:i,T=e<i?i:e;for(f=x,_=0;f<=T;f++)a=null!=this.model.detailsTemplate||null!=this.model.childGrid?f+1:f,S.headerattributes[_]=s(C[a]),S.cellattributes[_]=s(w[f]),S.filtercellattributes[_]=y?[]:s(o[f]),S.filterThattributes[_]=y?[]:s(n(o[f]).closest("th")[0]),_++;for(c in d=e<i?S.cellattributes.length-1:0,h=e<i?0:S.cellattributes.length-1,S)S[c].splice(d,0,S[c].splice(h,1)[0]);for(f=x,_=0;f<=T;f++)u=null!=this.model.detailsTemplate||null!=this.model.childGrid?f+1:f,l(S.headerattributes[_],C[u]),l(S.cellattributes[_],w[f]),y||l(S.filtercellattributes[_],o[f]),y||l(S.filterThattributes[_],n(o[f]).closest("th")[0]),_++;if(this.model.allowFiltering&&-1!=["menu","excel"].indexOf(this.model.filterSettings.filterType)){for(this._$fDlgIsOpen&&this._closeFDialog(),m=this.model.columns,C.find(".e-filtericon").remove(),f=0;f<m.length;f++)(m[f].allowFiltering||t.isNullOrUndefined(m[f].allowFiltering))&&C.find(".e-headercelldiv[ej-mappingname="+m[f].field+"]").closest(".e-headercell").append(t.buildTag("div.e-filtericon e-icon e-filterset"));this._refreshFilterIcon()}for(this.columnsWidthCollection.splice(i,0,this.columnsWidthCollection.splice(e,1)[0]),this._fieldColumnNames=this._headerColumnNames=[],g=0;g<b.length;g++)this._fieldColumnNames[b[g].headerText]=b[g].field,this._headerColumnNames[b[g].field]=b[g].headerText,p=n(w[g]),t.isNullOrUndefined(b[g].headerTemplateID)?"checkbox"==b[g].type?p.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"):b[g].disableHtmlEncode?p.text(b[g].headerText):p.html(b[g].headerText):p.html(n(b[g].headerTemplateID).html()),this.model.groupSettings.showToggleButton&&(t.isNullOrUndefined(b[g].allowGrouping)||b[g].allowGrouping)&&(-1!=n.inArray(b[g].field,this.model.groupSettings.groupedColumns)?p.append(this._getToggleButton().addClass("e-toggleungroup")):p.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.allowGrouping&&1!=this.model.allowSorting)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[f].field,this.model.sortSettings.sortedColumns[f].direction);if(this.model.allowSorting)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++){var k=1,D=this.model.sortSettings.sortedColumns[f],I=this.getsortColumnByField(D.field),O=this.getColumnIndexByField(D.field),R=n.inArray(I,this.model.sortSettings.sortedColumns);if(imageDirection="descending"!=D.direction?"e-rarrowup-2x":"e-rarrowdown-2x",this.model.allowMultiSorting){for(_=1;_<=R;_++)k+=1;"right"==w.eq(O).css("text-align")?(this.model.sortSettings.sortedColumns.length>1&&w.eq(O).prepend(this._createSortNumber(k,w.eq(O)).addClass("e-sortnumber")),w.eq(O).append(this._createSortElement().addClass("e-"+(D.direction||"ascending")+" "+imageDirection))):(w.eq(O).append(this._createSortElement().addClass("e-"+(D.direction||"ascending")+" "+imageDirection)),this.model.sortSettings.sortedColumns.length>1&&w.eq(O).append(this._createSortNumber(k,w.eq(O)).addClass("e-sortnumber")))}else imageDirection="descending"!=D.direction?"e-rarrowup-2x":"e-rarrowdown-2x",w.eq(O).append(this._createSortElement().addClass("e-"+(D.direction||"ascending")+" "+imageDirection))}(v={}).requestType=t.Grid.Actions.Reorder,this._isReorder=!0,this.refreshTemplate(),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(v),this._isAddNew=!1),this.sendDataRenderingRequest(v),this._isReorder=!1}},getPager:function(){return this._gridPager},getFooterTable:function(){return this._gridFooterTable},setGridFooterTable:function(e){this._gridFooterTable=e},getFooterContent:function(){return this._gridFooterContent},setGridFooterContent:function(e){this._gridFooterContent=e},getScrollObject:function(){return(null==this._scrollObject||t.isNullOrUndefined(this._scrollObject.model))&&(this._scrollObject=this.getContent().ejScroller("instance")),this._scrollObject},setGridPager:function(e){this._gridPager=e},getRowHeight:function(){var e,t,i,s=-1;return null!=this.getContentTable()&&(t=(e=this.getContentTable().find("tr:not(.e-virtualrow)")).length>2?1:0,e.length&&(i=e[t].getBoundingClientRect()),e.length>1&&(s=i&&i.height?i.height:e[t].offsetHeight)),-1==s?32:s},getCurrentIndex:function(){return(this._currentPage()-1)*this.model.pageSettings.pageSize},getColumnByIndex:function(e){return e<this.model.columns.length?this.model.columns[e]:null},set_currentPageIndex:function(e){var i,s=this.model.pageSettings,n=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;return null==s.totalPages&&(s.totalPages=Math.ceil(n/s.pageSize)),!(e>s.totalPages||e<1||e==this._currentPage()||(t.isNullOrUndefined(this._prevPageNo)&&(this._prevPageNo=this._currentPage()),this._currentPage(e),this._currentPage()==this._prevPageNo||((i={}).requestType="paging",this.gotoPage(this._currentPage(),i),0)))},set_currentVirtualIndex:function(e){var t,i;return!(e<1||1!=e&&e!=this._totalVirtualViews&&e==this._currentVirtualIndex&&this._checkCurrentVirtualView(this._virtualLoadedRows,e)||(this._prevVirtualIndex=this._currentVirtualIndex,this._currentVirtualIndex=e,(t=this._calculateCurrentViewPage())<=this.model.pageSettings.totalPages&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)?this._prevVirtualIndex<e&&1!=e?(i=this._isThumbScroll&&1!=t?t:t+1,!this._virtualPageRecords[i]&&i<=this.model.pageSettings.totalPages?this._setCurrentViewPage(i):this._renderVirtulViewContent(t)):this._prevVirtualIndex>e?(i=this._isThumbScroll?t:t-1,this._virtualPageRecords[i]&&!this._virtualLoadedRecords[e-1]&&(i=t-1),!this._virtualPageRecords[i]&&i>=1&&this._setCurrentViewPage(i)):this._renderVirtulViewContent(t):this._renderVirtulViewContent(t),0))},_setCurrentViewPage:function(e){this._needPaging=!0,this._prevPageNo=this._currentPage(),this.gotoPage(e)},_renderVirtulViewContent:function(){this._needPaging=!1,this._refreshVirtualView(this._currentVirtualIndex),this.element.ejWaitingPopup("hide")},_checkCurrentVirtualView:function(e,t){var i,s=this._virtualRowCount,l=t-1,o=t+1;if(e instanceof Array){if(e.length&&((0==l||o==this._totalVirtualViews+1)&&-1!=n.inArray(t,e)||-1!=n.inArray(l,e)&&-1!=n.inArray(t,e)&&-1!=n.inArray(o,e)))return!0}else if(i=o==this._totalVirtualViews?this._lastViewData:s,!this.initialRender&&1==t&&this._virtualLoadedRows[t]||t==this._totalVirtualViews&&e==this._virtualLoadedRows&&e[t]||0==l&&e[t]&&e[t].length==s||o==this._totalVirtualViews+1&&e[t]&&e[t].length==this._lastViewData||e[l]&&e[l].length==s&&e[t]&&e[t].length==s&&e[o]&&e[o].length==i)return!0;return!1},expandCollapse:function(e){var i,s,l,o,a,d,h;if("DIV"==e.prop("tagName")&&(e.parent().hasClass("e-recordplusexpand")||e.parent().hasClass("e-recordpluscollapse")||e.parent().hasClass("e-detailrowcollapse")||e.parent().hasClass("e-detailrowexpand"))&&(e=e.parent()),i=-1,this.model.allowGrouping&&(t.isOnWebForms||this.initialRender))for(s=e.attr("ej-mappingname"),fieldValue=e.attr("ej-mappingvalue"),e.parents(".e-tabletd").length&&(l=e.parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand").attr("ej-mappingvalue")),o=this.model._groupingCollapsed,h=0;h<o.length;h++)if(o[h].key==s&&o[h].value==fieldValue&&(o[h].parent==r||o[h].parent==l)){i=h;break}if(e.hasClass("e-recordplusexpand")||e.hasClass("e-recordpluscollapse")||e.hasClass("e-detailrowcollapse")||e.hasClass("e-detailrowexpand")){if(e.hasClass("e-recordplusexpand")&&this.model.groupSettings.groupedColumns.length)u=e.index(),(m=e.closest("tr").next()).hide(),e.removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),(t.isOnWebForms||this.initialRender)&&-1==i&&this.model._groupingCollapsed.push({key:s,value:fieldValue,parent:l});else if(e.hasClass("e-recordpluscollapse")&&this.model.groupSettings.groupedColumns.length){var c,u=e.index(),m=e.closest("tr").next(),p=[];for(n((c=m)[0].cells[u]).hasClass("e-indentcell")&&c.children(".e-indentcell").length==e.parent().children(".e-indentcell").length+1&&(c.show(),null!=(d=c.children(".e-recordplusexpand"))&&d.length>0&&p.push(d)),e.removeClass("e-recordpluscollapse").addClass("e-recordplusexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),h=0;h<p.length;h++)p[h].removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(p[h]);(t.isOnWebForms||this.initialRender)&&-1!=i&&this.model._groupingCollapsed.splice(i,1)}else if(e.hasClass("e-detailrowexpand")){u=e.index();var g=this,f=this.getIndexByRow(e.closest("tr"));(m=e.closest("tr").next()).hide(0,function(){var i={masterRow:e.closest("tr"),detailsRow:m,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(i.masterData);t.isNullOrUndefined(s)||(i.foreignKeyData=s),g._trigger("detailsCollapse",i),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),e.removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").addClass("e-gnextforward").removeClass("e-gdiagonalnext")}else if(e.hasClass("e-detailrowcollapse")){u=e.index(),g=this,f=this.getIndexByRow(e.closest("tr"));var _=e.closest("tr").next();if(_.hasClass("e-detailrow"))m=_;else{var v=t.buildTag("tr.e-detailrow","",{display:"none"},{}),b=t.buildTag("td.e-detailindentcell"),C=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,w=t.buildTag("td.e-detailcell","",{},{colspan:this._visibleColumns.length-C}),y=t.buildTag("div"),S=n(e.closest("tr")).parents(".e-grid").length;y.attr("id","child"+S+"_grid"+f+Math.round(1e3*Math.random())),n(v).append(b),n(v).append(w),a=this._currentJsonData[f],this.model.detailsTemplate&&n(v).append(w.append(this._renderEjTemplate(this.model.detailsTemplate,a))),n(e.closest("tr")).after(v),this.model.childGrid&&(this.model.childGrid.parentDetails={parentID:this._id,parentPrimaryKeys:this.getPrimaryKeyFieldNames(),parentKeyField:this.model.childGrid.queryString,parentKeyFieldValue:a[this.model.childGrid.queryString],parentRowData:a},n(v).append(w.append(y))),m=v}for(this._showGridLines(),p=[],n((c=m)[0].cells[u]).hasClass("e-detailindentcell")&&(c.show(0,function(){var i={masterRow:e.closest("tr"),detailsRow:m,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(i.masterData);t.isNullOrUndefined(s)||(i.foreignKeyData=s),g._trigger("detailsExpand",i),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),_.hasClass("e-detailrow")||(this._trigger("detailsDataBound",{detailsElement:v,data:a}),this._trigger("refresh")),this.model.childGrid&&!t.isNullOrUndefined(y)&&y.ejGrid(this.model.childGrid),null!=(d=c.children(".e-detailrowexpand"))&&d.length>0&&p.push(d)),e.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").addClass("e-gdiagonalnext").removeClass("e-gnextforward"),h=0;h<p.length;h++)p[h].removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(p[h])}!this.model.allowScrolling||t.isNullOrUndefined(this._scrollObject&&this._scrollObject.model)||e.closest(".e-hscroll").length||this.getScrollObject().refresh(),this.model.isResponsive&&this.windowonresize()}},_refreshGridPager:function(){var e,i,s;null!=this.getPager()&&(e=this.getPager().ejPager("model"),(i={}).currentPage=this._currentPage(),0==this._filteredRecordsCount&&0==this.model.currentViewData.length&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)?(i.currentPage=0,this._prevPageNo=e.currentPage,this.model.pageSettings.currentPage=0):0==e.currentPage&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)&&(i.currentPage=this._prevPageNo),s=this.model.editSettings.showAddNewRow&&0==this.model.groupSettings.groupedColumns.length?1:0,i.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount-s:this._searchCount:this._filteredRecordsCount,t.util.isNullOrUndefined(i.currentPage)&&(i.currentPage=this._currentPage()),this.getPager().ejPager("option",i).ejPager("refreshPager"),this.model.pageSettings.totalPages=e.totalPages||null,this.model.pageSettings.totalRecordsCount=e.totalRecordsCount||null)},_showHeaderColumn:function(e,i){for(var s,l,o,r,a,d=this.getHeaderTable().find("thead"),h=d.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),c=d.find(".e-filterbar").find(".e-filterbarcell"),u=this.getHeaderTable().find("colgroup").find("col"),m=0;m<e.length;m++)a=i?t.isNullOrUndefined(this.getColumnByField(e[m]))?this.getColumnByHeaderText(e[m],t.isNullOrUndefined(this.getColumnByField(e[m]))):this.getColumnByField(e[m]):this.getColumnByHeaderText(e[m]),s=n.inArray(a,this.model.columns),s=null!=this.model.detailsTemplate||this.model.childGrid?s+1:s,o=0!=(l=this.model.scrollSettings.frozenColumns)&&s>=l?h.eq(s).removeClass("e-hide").index()+l:h.eq(s).removeClass("e-hide").index(),c.eq(o).removeClass("e-hide"),u.length>this.model.columns.length&&this.model.groupSettings.groupedColumns.length&&(r=u.length-this.model.columns.length,u=u.slice(this.model.detailsTemplate||this.model.childGrid?r+1:r)),u.eq(s).css("display","");this.model.showStackedHeader&&this._refreshStackedHeader()},_hideHeaderColumn:function(e,i){for(var s,l,o=this.getHeaderTable().find("thead"),r=o.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),a=o.find(".e-filterbar").find(".e-filterbarcell"),d=this.getHeaderTable().find("colgroup").find("col"),h=0;h<e.length;h++){l=i?t.isNullOrUndefined(this.getColumnByField(e[h]))?this.getColumnByHeaderText(e[h],t.isNullOrUndefined(this.getColumnByField(e[h]))):this.getColumnByField(e[h]):this.getColumnByHeaderText(e[h]);var c=n.inArray(l,this.model.columns),u=null!=this.model.detailsTemplate||this.model.childGrid?c+1:c,m=this.model.scrollSettings.frozenColumns;s=0!=m&&c>=m?r.eq(u).addClass("e-hide").index()+m:r.eq(u).addClass("e-hide").index(),a.eq(s).addClass("e-hide"),d.length>this.model.columns.length&&(d=d.slice(d.length-this.model.columns.length)),d.eq(c).css("display","none")}this.model.showStackedHeader&&(this._refreshStackedHeader(),this._colgroupRefresh())},_refreshStackedHeader:function(){var e,t,i,s;if(this.model.showStackedHeader){for(e=this.model.stackedHeaderRows,s=0;s<e.length;s++)if(0!=this.model.scrollSettings.frozenColumns){var l=n(this.getHeaderContent().find(".e-frozenheaderdiv")),o=n(this.getHeaderContent().find(".e-movableheader")),r=this._createStackedRow(e[s],!0),a=this._createStackedRow(e[s],!1);n(l.find("tr.e-stackedHeaderRow")[s]).replaceWith(r),n(o.find("tr.e-stackedHeaderRow")[s]).replaceWith(a)}else t=this._createStackedRow(e[s],!1),this.getHeaderTable().find("tr.e-stackedHeaderRow")[s]?n(this.getHeaderTable().find("tr.e-stackedHeaderRow")[s]).replaceWith(t):t.insertBefore(this.getHeaderTable().find("tr.e-columnheader:last"));if((i={}).requestType="refresh",this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0)for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)this.getHeaderTable().find(".e-stackedHeaderRow").prepend(this._getGroupTopLeftCell());this.model.allowScrolling&&this._refreshScroller(i)}},_getStackedColumnByTarget:function(e){var i=(e.get(0)||{}).className,s=/e-row([0-9])-column([0-9])/.exec(i),n=[s[1],"stackedHeaderColumns",s[2]].join(".");return t.getObject(n,this.model.stackedHeaderRows)},_checkSkipAction:function(e){switch(e.requestType){case t.Grid.Actions.Save:case t.Grid.Actions.Delete:return!0}return!1},_unboundTemplateRendering:function(e){return n("#"+e).html()},_processBindings:function(e){var i,s,l;if(this._requestType=e.requestType,this.model.query=this.commonQuery.clone(),!this._checkSkipAction(e)&&this._trigger("actionBegin",e))return!0;if("batch"==this.model.editSettings.editMode&&"batchsave"!=e.requestType&&"cancel"!=e.requestType&&!this._confirmedValue&&this._bulkChangesAcquired()&&this.model.editSettings.showConfirmDialog)return this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveLostChanges),this._confirmDialog.ejDialog("open"),this._requestArgs=e,!1;if(!t.isNullOrUndefined(this.model.dataSource)&&"refresh"==e.requestType&&this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this._scrollValue=0,this._loadedJsonData=[],this._prevPage=this._currentPage()),this._ensureDataSource(e),this.model.scrollSettings.allowVirtualScrolling&&("virtualscroll"==e.requestType?(this._loadedJsonData.push({pageIndex:this._prevPage,data:this._currentJsonData}),this._prevPage=this._currentPage()):this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=t.isNullOrUndefined(this._currentPageData)?this.model.currentViewData:this._currentPageData,this._currentPageData=null),"filtering"==e.requestType&&(this._loadedJsonData=[],this._prevPage=this._currentPage(),n("#"+this._id+"_externalEdit").remove()),(e.requestType==t.Grid.Actions.Delete||e.requestType==t.Grid.Actions.Add)&&this._refreshVirtualViewDetails()),this.model.scrollSettings.allowVirtualScrolling&&"filtering"==e.requestType&&this.model.filterSettings.filteredColumns.length>0&&this.getScrollObject().scrollY(0),this.model.enableRTL?this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"):this.element.hasClass("e-rtl")&&this.element.removeClass("e-rtl"),e.requestType==t.Grid.Actions.Delete&&0==this.model.groupSettings.groupedColumns.length&&(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").remove(),e.tr.remove()),this._editForm=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):n("#"+this._id+"EditForm"),(!this.model.editSettings.showAddNewRow||"beginedit"!=e.requestType)&&0!=this._editForm.length)for(i=0;i<this._editForm.length;i++)n(this._editForm[i]).find("select.e-dropdownlist").ejDropDownList("destroy"),n(this._editForm[i]).find(".e-datepicker").ejDatePicker("destroy"),n(this._editForm[i]).find(".e-datetimepicker").ejDateTimePicker("destroy"),n(this._editForm[i]).find(".e-numerictextbox").ejNumericTextbox("destroy");if(!(this._dataSource()instanceof t.DataManager)||this._isRemoteSaveAdaptor||e.requestType==t.Grid.Actions.BeginEdit||e.requestType==t.Grid.Actions.Cancel||e.requestType==t.Grid.Actions.Add||this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(e.requestType==t.Grid.Actions.Save||e.requestType==t.Grid.Actions.Delete))this._isRelationalRendering(e)?this._setForeignKeyData(e):this.sendDataRenderingRequest(e);else{this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage&&-1==this.virtualLoadedPages.indexOf((this._prevPageNo-1)*this.model.pageSettings.pageSize)&&(s=t.pvt.filterQueries(this.model.query.queries,"onPage"),this.model.query.queries.splice(n.inArray(s[0],this.model.query.queries),1),this.model.query.page(this._currentPage()-1,this.model.pageSettings.pageSize),l=this._dataSource().executeQuery(this.model.query),this.model.query.queries.splice(n.inArray(s[0],this.model.query.queries),1),this.model.query.page(this._currentPage(),this.model.pageSettings.pageSize)),this._virtualSelectedRows&&this._virtualSelectedRows.length>0&&this.model.query.addParams("virtualSelectRecords",this._virtualSelectedRows);var o=this._queryPromise=this._dataSource().executeQuery(this.model.query),r=(this.element.ejWaitingPopup("instance"),this);this.element.ejWaitingPopup("show"),r._dataSource().ready?r._dataSource().ready.done(function(){r._processDataRequest(r,e,o,l)}):r._processDataRequest(r,e,o,l)}},_processDataRequest:function(e,i,s,n){s.done(t.proxy(function(s){var l,o;if(0==e._relationalColumns.length&&e.element.ejWaitingPopup("hide"),n&&!e._previousPageRendered)e._processLastPageData(e,i,s.result,n),e.model.previousViewData&&0!=e.model.previousViewData.length&&(e.model.previousViewData.splice(0,s.result.length),e._previousPageLength=s.result.length,e._currentPageData=s.result,t.merge(e.model.previousViewData,s.result),e.model.currentViewData=e.model.previousViewData,e._remoteLastPageRendered=!0);else if(e._remoteLastPageRendered&&e.model.pageSettings.currentPage==e.model.pageSettings.totalPages-1&&!e.model.scrollSettings.enableVirtualization){for(l=e.model.pageSettings.pageSize-e._previousPageLength,o=0;o<l;o++)e.getRows()[e.getRows().length-(e.model.pageSettings.pageSize-o)].remove();e._tempPageRendered=!0,e.model.currentViewData=s.result}else e._identityKeys.length&&"add"==i.action&&this.adaptor instanceof t.ODataAdaptor&&e._processIdentityField(s.result,i),e.model.pageSettings.currentPage!=e.model.pageSettings.totalPages-1||e._remoteLastPageRendered||(e._previousPageRendered=!0),e.model.currentViewData=null==s.result?[]:s.result,e._$fkColumn&&"excel"==e.model.filterSettings.filterType&&e.model.filterSettings.filteredColumns.length>0&&(e._fkParentTblData=s.result);e.model.currentViewData=null==s.result?[]:s.result,e.model.allowScrolling&&e.model.scrollSettings.allowVirtualScrolling&&e.model.scrollSettings.enableVirtualization&&("filtering"==i.requestType&&(e._gridRecordsCount=e._filteredRecordsCount=s.count,e._refreshVirtualViewDetails()),s.result.length?(e._isInitNextPage||e._isLastVirtualpage?(e._setInitialCurrentIndexRecords(s.result,e._currentPage()),e._isInitNextPage=e._isLastVirtualpage=!1):(e._gridRecordsCount=s.count,e._refreshVirtualViewDetails(),e._setVirtualLoadedRecords(s.result,e._currentPage())),e._isThumbScroll&&!e._checkCurrentVirtualView(e._virtualLoadedRecords,e._currentVirtualIndex)&&e._checkPrevNextViews(),e._remoteRefresh=!0):e.getContent().find(".e-virtualtop, .e-virtualbottom").remove()),t.isNullOrUndefined(s.aggregates)||(e._remoteSummaryData=s.aggregates),e._processData(s,i),t.isNullOrUndefined(e._unboundRow)||i.selectedRow==e._unboundRow||"save"!=i.requestType||(e._unboundRow.find(".e-editbutton").trigger("click"),e._unboundRow=null)})),s.fail(t.proxy(function(s){e.element.ejWaitingPopup("hide"),i.error=s.error,s=[],e.model.currentViewData=[],e._processData(s,i),t.isNullOrUndefined(e.getPager())||e.getPager().ejPager({currentPage:0,totalRecordsCount:0}),e._trigger("actionFailure",i)}))},_processIdentityField:function(e,i){var s=this._primaryKeys[0],l=t.distinct(e,s),o=t.distinct(this.model.currentViewData,s),r=n.grep(l,function(e){return-1==n.inArray(e,o)}),a=t.DataManager(e).executeLocal((new t.Query).where(s,"equal",r))[0];i.data=t.isNullOrUndefined(a)?i.data:a},_processLastPageData:function(e,i,s,n){n.done(t.proxy(function(t){e.model.previousViewData=t.result})),n.fail(t.proxy(function(t){e.element.ejWaitingPopup("hide"),i.error=t.error,t=[],e.model.previousViewData=[],e._processData(t,i),e._trigger("actionFailure",i)}))},_createUnboundElement:function(e,i){var s,l,o,r,a=document.createElement("div");for(e.headerText=t.isNullOrUndefined(e.headerText)?e.field:e.headerText,t.isNullOrUndefined(e.headerText)||(a.id=this._id+e.headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate"),s=t.buildTag("div.e-unboundcelldiv"),l=e.commands,o=0;o<l.length;o++)(r=t.buildTag("button.e-"+l[o].type.replace(/\s+/g,"")+"button","",{},{type:"button"})).val(l[o].type),s.append(r);return n("body").append(n(a).html(s).hide()),a},_refreshUnboundTemplate:function(e){var i,s,l,o,r,a;if(this._isUnboundColumn)for(i=0;i<this.model.columns.length;i++)if(this.model.columns[i].commands)for(s=e.find(".e-unboundcell.e-"+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).find(".e-unboundcelldiv"),l=n.extend(!0,[],this.model.columns[i].commands),o=0;o<l.length;o++){for(t.isNullOrUndefined(l[o].buttonOptions)&&(l[o].buttonOptions={}),l[o].buttonOptions.width=t.isNullOrUndefined(l[o].buttonOptions.width)?"52":l[o].buttonOptions.width,l[o].buttonOptions.height=t.isNullOrUndefined(l[o].buttonOptions.height)?"28":l[o].buttonOptions.height,l[o].buttonOptions.cssClass=t.isNullOrUndefined(l[o].buttonOptions.cssClass)?this.model.cssClass:l[o].buttonOptions.cssClass,l[o].buttonOptions.enableRTL=this.model.enableRTL,r=s.find(".e-"+l[o].type.replace(/\s+/g,"")+"button"),this.model.isEdit&&"cancel"!=this._requestType||(e.closest(".e-editcell").length?"save"==l[o].type||"cancel"==l[o].type?r.show():(r.hasClass("e-deletebutton")&&r.hide(),r.hasClass("e-editbutton")&&r.hide()):"save"==l[o].type||"cancel"==l[o].type?r.hide():(r.hasClass("e-deletebutton")&&r.show(),r.hasClass("e-editbutton")&&r.show())),a=0;a<r.length;a++)n(r[a]).data("ejButton")&&n(r[a]).ejButton("destroy");r.ejButton(l[o].buttonOptions)}},_gridTemplate:function(e,t,i){var s=e.model.columns[i];return e._isGrouping&&(this.index=e._currentJsonData.indexOf(this.data)),e._renderEjTemplate("#"+t,this.data,this.index,s)},_createTemplateElement:function(e,i,s){var l,o=e["templateID"in e?"templateID":"template"],r=/^#([\w-]*)/.exec(o),a=(i=i||n("body"),s?"Pager":e.headerText+n.inArray(e,this.model.columns)+"_Template"),d={name:"SCRIPT",type:"text/x-template",text:o,id:(this._id+a).replace(/[^0-9A-z-_]/g,"")};return(l=r&&r[1]?document.getElementById(r[1]):/^<script/i.test(o)?n(o).get(0):t.buildTag(d.name,d.text).get(0)).id=l.id||d.id,l.type=l.type||d.type,i.append(s?l.innerHTML:l),l},_renderGridPager:function(){var e=n(document.createElement("div")),t={};return this.model.pageSettings.click=this._gPagerClickHandler,this.model.pageSettings.totalRecordsCount=this._gridRecordsCount||null,this.model.pageSettings.enableRTL=this.model.enableRTL,this.model.pageSettings.locale=this.model.locale,this.model.pageSettings.enableQueryString=this.model.pageSettings.enableQueryString,this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(t.enableExternalMessage=this.model.filterSettings.showFilterBarStatus),n.extend(t,this.model.pageSettings),t.currentPage=this._currentPage(),t.masterObject=this,this.setGridPager(e),e.ejPager(t),e.ejPager("refreshPager"),t=e.ejPager("model"),this.model.pageSettings.totalPages=t.totalPages||null,this._currentPage()!==t.currentPage&&this._currentPage(t.currentPage),this._renderPagerTemplate(e),e},_renderPagerTemplate:function(e,i){var s,n=this.model.pageSettings,l=0==e.find(".e-pagercontainer").not(".e-template").length;e.find(".e-pagercontainer.e-template").remove(),(i||!n.enableTemplates)&&l&&e.ejPager("renderPager"),n.enableTemplates&&(n.showDefaults||e.children().remove(),s=t.buildTag("div",null,null,{class:"e-pagercontainer e-template"}),this._createTemplateElement(this.model.pageSettings,s,!0),e.append(s))},_renderContext:function(){var e,i,s,l,o,r,a,d,h,c=this.model.contextMenuSettings.contextMenuItems,u=0,m=t.buildTag("ul","",{},{id:this._id+"_Context"});if(!this.model.contextMenuSettings.disableDefaultItems)for(;u<c.length;u++)e=c[u],i=this._items(e,"contextMenuItem"),m.append(i);for(var p,g,f=this.model.contextMenuSettings.customContextMenuItems,_=this.model.contextMenuSettings.subContextMenu,v=0;v<f.length;v++){for(p=f[v],g=this._items(p,"customContextMenuItem"),s=0;s<_.length;s++)if("string"==typeof p&&p==_[s].contextMenuItem||"object"==typeof p&&p.id==_[s].contextMenuItem){for(l=t.buildTag("ul","",{},{id:this._id+"_subMenuContext"+s}),o=0;o<_[s].subMenu.length;o++)menuItem=_[s].subMenu[o],menuItem1=this._items(menuItem,"subMenuItems"),l.append(menuItem1);g.append(l)}m.append(g)}m.find("li").length>0&&(this.element.append(m),r=this.element.parents("div.e-grid"),a=t.Menu.prototype._showContextMenu,t.Menu.prototype._showContextMenu=function(e,t,i,s){n(this.model.contextMenuTarget).hasClass("e-grid")&&(++e,++t),a.apply(this,[e,t,i,s])},n(m).ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+this._id,click:n.proxy(this._clickevent,this),width:"auto",beforeOpen:n.proxy(this._menu,this)}),r.length&&(h=(d=n("#"+r[0].id+"_Context")).ejMenu("model.excludeTarget"),d.ejMenu({excludeTarget:t.isNullOrUndefined(h)||0==h.length?"#"+this._id:h.concat(",#"+this._id)})),this._conmenu=m.data("ejMenu"))},_clickevent:function(e){var i,s,l=e.events.text,o=n(this._contexttarget.parentNode),r=n(this._contexttarget);if(r.hasClass("e-filterset")?r=r.siblings():(r.hasClass("e-icon")||r.hasClass("e-number"))&&(r=r.parent()),i=r.attr("ej-mappingname")||r.find(".e-headercelldiv").attr("ej-mappingname"),!this._trigger("contextClick",e))switch(l){case this.localizedLabels.AddRecord:this._startAdd();break;case this.localizedLabels.EditRecord:if("batch"==this.model.editSettings.editMode){var a=n(this._contexttarget.parentNode).find(".e-rowcell").index(r),d=this._excludeDetailRows().index(o),h=this.model.columns[a].field;this.editCell(d,h)}else this.startEdit(o);break;case this.localizedLabels.DeleteRecord:this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):this.multiDeleteMode&&this.selectedRowsIndexes.length>1?this._multiRowDelete():this.deleteRow(o);break;case this.localizedLabels.Save:this.endEdit();break;case this.localizedLabels.Cancel:this.cancelEdit();break;case this.localizedLabels.SortInDescendingOrder:s=t.sortOrder.Descending,this.sortColumn(i,s);break;case this.localizedLabels.SortInAscendingOrder:s=t.sortOrder.Ascending,this.sortColumn(i,s);break;case this.localizedLabels.Grouping:this.groupColumn(i);break;case this.localizedLabels.Ungrouping:this.ungroupColumn(i);break;case this.localizedLabels.NextPage:case this.localizedLabels.PreviousPage:case this.localizedLabels.LastPage:case this.localizedLabels.FirstPage:this._page(e)}},_menu:function(e){var i,s,l,o,r,a,d,h,c,u,m,p=this._conmenu.element;if(this._contexttarget=e.target,i=n(e.target),o=n(this._contexttarget),this.model.allowSelection&&(o.hasClass("e-rowcell")||o.closest(".e-rowcell").length&&!i.hasClass("e-selectionbackground"))&&(r=o.hasClass("e-rowcell")?o.parent():o.closest(".e-rowcell").parent(),this.model.isEdit||this.selectRows(this.getIndexByRow(r),null,o)),(i.hasClass("e-ascending")||i.hasClass("e-descending"))&&!i.parent().hasClass("e-headercelldiv"))return!1;s=i.hasClass("e-filtericon")||i.hasClass("e-headercelldiv")?e.target.parentNode.getAttribute("aria-sort"):i.hasClass("e-headercell")?e.target.getAttribute("aria-sort"):i.parent().parent().attr("aria-sort"),e.target.className,a=n(p),l=i.hasClass("e-filterset")?i.siblings().attr("ej-mappingname"):i.hasClass("e-icon")||i.hasClass("e-number")?i.parent().attr("ej-mappingname"):i.hasClass("e-headercell")?i.find(".e-headercelldiv").attr("ej-mappingname"):i.attr("ej-mappingname"),p.css("visibility","visible");var g=i.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,f=i.closest(".e-rowcell"),_=i.closest(".e-headercell"),v=-1!=f.index()?f.index():_.index()-this.model.groupSettings.groupedColumns.length,b=i.hasClass("e-rowcell")?i.index()-g:v-g;for(c in b=null!=this.model.detailsTemplate||null!=this.model.childGrid?b-1:b,d=this.model.columns[b],h={allowGrouping:".e-contextgrouping",allowSorting:".e-contextascending, .e-contextdescending","editSettings.allowAdding":".e-contextadd","editSettings.allowEditing":".e-contextedit","editSettings.allowDeleting":".e-contextdelete"})u=p.find(h[c]).parent(),0==t.getObject(c,this.model)||!1===t.getObject(c,d)?u.css("display","none"):"none"==u.css("display")&&u.css("display","block");if(i.closest(".e-grid").attr("id")!==this._id||i.is("input"))p.css("visibility","hidden");else{if(this.getHeaderTable().find(i).length>0){if(0==_.length||!_.children().hasClass("e-headercelldiv"))return void p.css("visibility","hidden");m=n(p.find(".e-head")),p.find(".e-page").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&(m.css("display","none"),0==p.find(".e-customitem").length&&p.css("visibility","hidden"))}else if(this.getContentTable().find(i).length>0){if(0==f.length)return void p.css("visibility","hidden");m=n(p.find(".e-content")),p.find(".e-head").css("display","none"),p.find(".e-page").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&"batch"==this.model.editSettings.editMode&&(m.css("display","none"),0==p.find(".e-customitem").length&&p.css("visibility","hidden"))}else{if(!(this.getPager().find(i).length>0||i.hasClass("e-pager")))return m=n(p),p.css("visibility","hidden"),!1;m=n(p.find(".e-page")),p.find(".e-head").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block")}switch(s){case"ascending":a.find(".ascending").parent().css("display","none");break;case"descending":a.find(".descending").parent().css("display","none")}i.hasClass("e-rowcell")&&this.model.editSettings.showAddNewRow&&(m=n(p.find(".e-savcan")),p.find(".e-contextadd").parent().css("display","none"),m.css("display","block")),this.model.isEdit&&i.hasClass("e-rowcell")&&(!this.model.editSettings.showAddNewRow||n(".e-editedrow").length>0)&&(m=n(p.find(".e-savcan")),p.find(".e-head").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-page").css("display","none"),m.css("display","block")),1==this.model.pageSettings.totalPages&&m.hasClass("e-page")?0==p.find(".e-customitem").length?p.css("visibility","hidden"):p.find(".e-page").css("display","none"):1==this.model.pageSettings.currentPage?(a.find(".previous").parent().css("display","none"),a.find(".first").parent().css("display","none")):this.model.pageSettings.currentPage==this.model.pageSettings.totalPages&&(a.find(".last").parent().css("display","none"),a.find(".nextpage").parent().css("display","none")),-1!=this.model.groupSettings.groupedColumns.indexOf(l)?m.find(".group").parent().css("display","none"):-1==this.model.groupSettings.groupedColumns.indexOf(l)&&m.find(".ungroup").parent().css("display","none"),this.selectedRowsIndexes.length>1&&"multiple"==this.model.selectionType&&this.model.editSettings.allowDeleting&&(p.find(".e-contextadd").parent().css("display","none"),p.find(".e-contextedit").parent().css("display","none")),this.model.contextOpen&&this._trigger("contextOpen",e)}},_items:function(e,i){var s,l,o,r;return""!=e&&("contextMenuItem"==i&&(-1!=e.indexOf("Record")?(l=t.buildTag("li","",{},{class:"e-content"})).css("display","none"):-1!=e.indexOf("Page")?(l=t.buildTag("li","",{},{class:"e-page"}),-1!=e.indexOf("Next")?s=t.buildTag("div","",{},{class:"nextpage"}):-1!=e.indexOf("Previous")?s=t.buildTag("div","",{},{class:"previous"}):-1!=e.indexOf("Last")?s=t.buildTag("div","",{},{class:"last"}):-1!=e.indexOf("First")&&(s=t.buildTag("div","",{},{class:"first"})),l.css("display","none")):"Save"==e||"Cancel"==e?(l=t.buildTag("li","",{},{class:"e-savcan"})).css("display","none"):(-1!=e.indexOf("Order")||"Grouping"==e||"Ungrouping"==e)&&(l=t.buildTag("li","",{},{class:"e-head"}),-1!=e.indexOf("Ascending")?s=t.buildTag("div","",{},{class:"ascending"}):-1!=e.indexOf("Descending")?s=t.buildTag("div","",{},{class:"descending"}):"Grouping"==e?s=t.buildTag("div","",{},{class:"group"}):"Ungrouping"==e&&(s=t.buildTag("div","",{},{class:"ungroup"})),l.css("display","none"))),t.isNullOrUndefined(l)&&(l=t.buildTag("li","",{},{class:"e-customitem"})).css("display","block"),l.append(s),o=document.createElement("a"),r="","string"==typeof e&&(r=-1!=e.indexOf("Ascending")?"ascending":-1!=e.indexOf("Descending")?"descending":e.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[e.replace(/\s+/g,"")])?e:this.localizedLabels[e.replace(/\s+/g,"")]),"object"==typeof e&&(r="Ascending"==e.id?"ascending":"Descending"==e.id?"descending":e.id.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[e.text.replace(/\s+/g,"")])?e.text:this.localizedLabels[e.text.replace(/\s+/g,"")],l.attr("id",e.id)),n(o).append(t.buildTag("span","",{},{class:"e-gridcontext e-icon e-context"+r})),l.append(o),l)},_page:function(e){var t;e.events.text==this.localizedLabels.NextPage?(t=this.model.pageSettings.currentPage,++t,this.gotoPage(t)):e.events.text==this.localizedLabels.PreviousPage?(t=this.model.pageSettings.currentPage)>1?(--t,this.gotoPage(t)):this.gotoPage(t):e.events.text==this.localizedLabels.LastPage?(t=this.model.pageSettings.totalPages,this.gotoPage(t)):this.gotoPage(1)},gotoPage:function(e){var i,s;(this.model.allowPaging||this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling)&&((i={}).previousPage=this._currentPage(),this._currentPage(e),i.endIndex=this._currentPage()*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:this._currentPage()*this.model.pageSettings.pageSize,i.startIndex=this._currentPage()*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=e,this.model.allowPaging&&(i.requestType=t.Grid.Actions.Paging),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this._isVirtualRecordsLoaded=!1,s=this._refreshVirtualPagerInfo(),this._showPagerInformation(s),i.requestType=t.Grid.Actions.VirtualScroll),this._processBindings(i)&&this._currentPage(i.previousPage),this._primaryKeyValues=[])},_gPagerClickHandler:function(e){if(this._prevPageNo!=e.currentPage)return this.model.masterObject.gotoPage(e.currentPage),!1},_processData:function(e,i){this._gridRecordsCount=0==e.count&&this.model.currentViewData.length?e.result.length:e.count,null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),(i.requestType==t.Grid.Actions.Filtering||t.Grid.Actions.Save||this.model.filterSettings.filteredColumns.length>0&&i.requestType==t.Grid.Actions.Refresh)&&(this._filteredRecordsCount=e.count),this._setForeignKeyData(i),0==this._relationalColumns.length&&this.sendDataRenderingRequest(i)},_frozenCell:function(e,t){var i=t,s=0,l=this.getRowByIndex(e);return t>=this.model.scrollSettings.frozenColumns&&(s=1,i-=this.model.scrollSettings.frozenColumns),n(l.eq(s).find(".e-rowcell:eq("+i+")"))},_frozenColumnSelection:function(e,t,i){var s,l,o=t,r=0;if(i)for(l=t;l<i;l++){for(o=l,l>=this.model.scrollSettings.frozenColumns&&(r=1,o=l-this.model.scrollSettings.frozenColumns),s=0;s<e[r].length;s++)n(e[r][s].cells[o]).addClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell")[l]).addClass("e-columnselection"),this.selectedColumnIndexes.push(l)}else for(t>=this.model.scrollSettings.frozenColumns&&(r=1,o=t-this.model.scrollSettings.frozenColumns),l=0;l<e[r].length;l++)n(e[r][l].cells[o]).addClass("e-columnselection")},_renderGridFooter:function(){var e,i;if(this.model.summaryRows.length>0){if(e=t.buildTag("div.e-gridfooter"),i=t.buildTag("table.e-gridsummary","",{},{cellspacing:"0.25px"}),this.setGridFooterContent(e),this.model.scrollSettings.frozenColumns>0){var s=t.buildTag("div.e-frozenfooterdiv"),n=t.buildTag("div.e-movablefooter"),l=i.clone(),o=t.buildTag("div.e-movablefooterdiv");n.append(o),i.append(this.getHeaderTable().first().find("colgroup").clone()),l.append(this.getHeaderTable().last().find("colgroup").clone()),s.append(i),o.append(l),this.setGridFooterTable(i.add(l)),this._createSummaryRows(this.getFooterTable()),e.append(s.add(n)),e.find(".e-frozenfooterdiv").outerWidth(this.getHeaderContent().find(".e-frozenheaderdiv").width()).end().find(".e-movablefooterdiv").outerWidth(this.getContent().find(".e-movablecontentdiv").width())}else i.append(this.getHeaderTable().find("colgroup").clone()),this.setGridFooterTable(i),this._createSummaryRows(this.getFooterTable()),e.append(i);return e}throw"summary row collection is missing"},_setSummaryAggregate:function(e){for(var t,i,s,n=this.model.summaryRows,l=0,o=n.length;l<o;l++)for(t=0,i=(s=n[l].summaryColumns).length;t<i;t++)e.aggregate(s[t].summaryType,s[t].dataMember)},_createSummaryRows:function(e,i,s,l,o){var r=e.find("col");e.find("tbody").length>0&&e.find("tbody").remove();var a=t.buildTag("tbody"),d=this,h=a.clone(),c=this.model.summaryRows;!t.isNullOrUndefined(i)&&this._isCaptionSummary&&(c=this._captionSummary(o)),n.each(c,function(c,u){var m,p,g,f,_;if(!1===u.showTotalSummary&&t.isNullOrUndefined(i)||!1===u.showGroupSummary&&o&&!t.isNullOrUndefined(i))return!0;if(m=t.buildTag("tr.e-gridSummaryRows"),t.isNullOrUndefined(l&&l.level))for(_=0;_<d.model.groupSettings.groupedColumns.length;_++)m.prepend(t.buildTag("td").addClass("e-indentcell"));p=o?" e-gcsummary":"",(null!=d.model.detailsTemplate||null!=d.model.childGrid)&&(0!=d.model.groupSettings.groupedColumns.length?m.children("td.e-indentcell").last().after("<td class='e-summaryrow"+p+"'></td>"):m.prepend("<td class='e-summaryrow'></td>"));var v=d.getHeaderTable().find("td").clone().addClass("e-summaryrow"+p),b=0;if(t.isNullOrUndefined(u.titleColumn)||-1==(b=d.getColumnIndexByField(u.titleColumn))&&(b=d.getColumnIndexByHeaderText(u.titleColumn)),-1!=b&&(v=d._assignTitleColumn(b,u.title,v,0)),d._hideSummaryColumn(v,r),d.model.scrollSettings.frozenColumns>0)g=m.clone(),a.append(m.append(v.slice(0,d.model.scrollSettings.frozenColumns))),h.append(g.append(v.slice(d.model.scrollSettings.frozenColumns)));else if(d._isCaptionSummary&&!o||t.isNullOrUndefined(l&&l.level))a.append(m.append(v));else{var C=d.model.groupSettings.groupedColumns.length-l.level+1,w=e.clone().addClass("e-groupsummary"),y={};for(y.data={items:l},m.prepend("<td class='e-summaryrow"+p+"' colspan="+d._colSpanAdjust(null,null,y)+" style = 'padding:0;' ></td>"),n(m[0].cells).filter(".e-summaryrow").html(w.append(t.buildTag("tr",v))),f=w.find("col").length-(d.model.columns.length+C),_=0;_<f;_++)w.find("col").first().remove();for(_=0;_<C;_++)n(w[0].rows).prepend("<td class='e-indentcell'></td>"),n(w.find("col")[_]).addClass("e-summary");a.append(m)}n.each(u.summaryColumns,function(e,l){var o,r,a,h;o="custom"!=l.summaryType?s?s[l.dataMember+" - "+l.summaryType]:d._remoteSummaryData[l.dataMember+" - "+l.summaryType]:d.getSummaryValues(l,i),prefix=l.prefix?l.prefix:"",r=d.getColumnIndexByField(l.displayColumn),a=l.suffix?l.suffix:"",d.model.allowScrolling&&n(v[r]).addClass("e-scroller"),""!=n(v[r]).html()&&""==prefix&&(prefix=n(v[r]).html()),t.isNullOrUndefined(l.template)?-1!=r&&n(v[r]).html(prefix+(l.format?d.formatting(l.format,o,d.model.locale):o)+a).css("text-align",d.model.columns[r].textAlign):(h={summaryValue:l.format?d.formatting(l.format,o,d.model.locale):o,summaryColumn:l},n(v[r]).html(n.render[d._id+"_summaryTemplate"+l.template](h)).css("text-align",d.model.columns[r].textAlign),n(v[r]).addClass("e-summarytemplate"))})}),this.model.scrollSettings.frozenColumns>0?(e.first().append(a),e.last().append(h)):e.append(a)},_assignTitleColumn:function(e,t,i,s){for(var n,l=e;l<this.model.columns.length;l++)if(n=this.model.columns[l],0==s&&0!=n.visible){i.eq(l).html(t);break}return i},getSummaryValues:function(e,i){var s,l,o,r,a,d;switch((l=t.isNullOrUndefined(i)?this.model.filterSettings.filteredColumns.length>0?this._filteredRecords:this._dataSource():i)instanceof t.DataManager?(o=l,l=l.dataSource.json):o=t.DataManager(l),e.summaryType){case t.Grid.SummaryType.Maximum:r=t.max(l,e.dataMember),s=t.getObject(e.dataMember,r);break;case t.Grid.SummaryType.Minimum:r=t.min(l,e.dataMember),s=t.getObject(e.dataMember,r);break;case t.Grid.SummaryType.Average:s=t.avg(l,e.dataMember);break;case t.Grid.SummaryType.Sum:s=t.sum(l,e.dataMember);break;case t.Grid.SummaryType.Count:s=l.length;break;case t.Grid.SummaryType.TrueCount:a=t.Predicate(e.dataMember,"equal",!0),s=o.executeLocal(t.Query().where(a)).length;break;case t.Grid.SummaryType.FalseCount:a=t.Predicate(e.dataMember,"equal",!1),s=o.executeLocal(t.Query().where(a)).length;break;case t.Grid.SummaryType.Custom:(d=e.customSummaryValue)&&("string"==typeof d&&(d=t.util.getObject(d,window)),n.isFunction(d)&&(s=d.call(this,e,l)))}return s},_hideCaptionSummaryColumn:function(){var e,t,s,n=this.getHeaderTable().find(".e-headercelldiv[ej-mappingname]").first(),l=this.getContentTable().find(".e-groupcaption").clone(),o=this.getContentTable().find(".e-groupcaption").parent(),r=this.model.columns.length-1;if(this._isCaptionSummary&&(this.getContentTable().find(".e-summaryrow:not(.e-gcsummary)").remove(),this.getFooterTable().find("tbody td").slice(-r).removeClass("e-groupcaptionsummary").addClass("e-summaryrow"),null!=this.getFooterTable()&&this.getContentTable().find(".e-recordplusexpand").parent().children(".e-indentcell").remove(),!this.model.groupSettings.showGroupedColumn&&this.getContentTable().find(".e-groupcaptionsummary").not(".e-hide").length&&(e=+this.getContentTable().find(".e-recordtable:first").parents("tbody:first").find(".e-groupcaption").attr("colspan"),this._hiddenColumnsField.length==this.model.columns.length-1&&n.parent().hasClass("e-hide")||!e)))for(i=0;i<l.length;i++)o.eq(i).children().not(".e-hide,.e-recordplusexpand").filter("td.e-groupcaptionsummary:first").addClass("e-hide"),t=o.eq(i).find(".e-groupcaption"),s=parseInt(t.attr("colspan")),t.attr("colspan",++s);this.getContentTable().find(".e-recordtable").find(".e-indentcell").remove()},_hideSummaryColumn:function(e,t){if(t.length>this.model.columns.length&&(t=t.slice(t.length-this.model.columns.length)),!this.model.groupSettings.showGroupedColumn&&this.model.showSummary)for(i=0;i<this.model.columns.length;i++)for(j=0;j<this.model.groupSettings.groupedColumns.length||j<this._hiddenColumnsField.length;j++){if(!this.getHeaderTable().find(".e-headercelldiv:not(.e-emptyCell)").eq(i).is(":visible")){t.eq(i).css("display","none"),n(e[i]).addClass("e-hide");break}"none"==t.eq(i).css("display")&&t.eq(i).css("display","")}else for(i=0;i<this.model.columns.length;i++)this.model.columns[i].visible?"none"==t.eq(i).css("display")&&t.eq(i).css("display",""):(t.eq(i).css("display","none"),n(e[i]).addClass("e-hide"))},_initScrolling:function(){var e,i,s=[],l=[];for(this.model.scrollSettings.enableVirtualization&&(this.model.scrollSettings.allowVirtualScrolling=!0),e=0;e<this.model.columns.length;e++)!1===this.model.columns[e].visible&&this.model.scrollSettings.frozenColumns,!0===this.model.columns[e].isFrozen?s.push(this.model.columns[e]):l.push(this.model.columns[e]);if(s.length>0&&(i=this.model.scrollSettings.frozenColumns,this.model.columns=n.merge(n.merge([],s),l),this.model.scrollSettings.frozenColumns=s.length,s.length!=i&&0!=i&&(this.model.scrollSettings.frozenColumns=i)),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&(this.model.allowGrouping||null!=this.model.rowTemplate||null!=this.model.detailsTemplate||null!=this.model.childGrid||this.model.scrollSettings.allowVirtualScrolling||"batch"==this.model.editSettings.editMode))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels().FrozenNotSupportedException),void this._alertDialog.ejDialog("open");this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this.model.scrollSettings.enableVirtualization?(this._vRowHeight=Math.floor(this.getRowHeight()+1),this._virtualRowCount=Math.round(this.model.scrollSettings.height/this._vRowHeight)+1,this.model.pageSettings.pageSize<5*this._virtualRowCount&&(this.model.pageSettings.pageSize=5*this._virtualRowCount)):(this.model.pageSettings.pageSize=12==this.model.pageSettings.pageSize?Math.round(this.model.scrollSettings.height/32)+1:this.model.pageSettings.pageSize,this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize))),(this.model.width||this.model.height)&&(this.model.allowScrolling=!0,this.model.width&&(this.model.scrollSettings.width=this.model.width),this.model.height&&(this.model.scrollSettings.height=this.model.height)),this._originalScrollWidth=t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)?this.model.scrollSettings.width:this.model.scrollSettings.previousStateWidth},_checkScrollActions:function(e){return!(this.model.scrollSettings.allowVirtualScrolling||e!=t.Grid.Actions.Sorting&&e!=t.Grid.Actions.Reorder)||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Add||e==t.Grid.Actions.Cancel||e==t.Grid.Actions.Save||e==t.Grid.Actions.BatchSave||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Paging||e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Search},_frozenAlign:function(){var e,i=this.getContent().first(),s=!t.isIOSWebView()&&this.getBrowserDetails();e=this.model.enableRTL?"margin-right":"margin-left",i.find(".e-movablecontent").css(e,s&&"safari"===s.browser?"auto":i.find(".e-frozencontentdiv").width()+"px"),this.getHeaderContent().find(".e-movableheader").removeAttr("style").css(e,s&&"safari"===s.browser?"auto":this.getHeaderContent().find(".e-frozenheaderdiv").width()+"px")},_refreshScroller:function(e){var i,s,n,l,o,r,a,d=this.getContent().first();if(!t.isNullOrUndefined(d.data("ejScroller"))){if(this.model.scrollSettings.frozenColumns>0){if(this._isFrozenColumnVisible())if(this._visibleColumns.length<=this.model.scrollSettings.frozenColumns){for(i=!1,s=this.model.scrollSettings.frozenColumns;s<this.model.columns.length;s++)if(-1!=this._visibleColumns.indexOf(this.model.columns[s].headerText)){i=!0;break}i||(d.find(".e-frozencontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-frozenheaderdiv").removeAttr("style"),d.find(".e-movablecontent").width(0),d.find(".e-movablecontentdiv").width(0),d.find(".e-movablecontent").height(0),d.find(".e-movablecontentdiv").height(0))}else this._frozenAlign(),d.find(".e-movablecontent").scrollLeft(this.getHeaderContent().find(".e-movableheader").scrollLeft()),!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.getScrollObject()._vScrollbar.value()>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum);else d.find(".e-movablecontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-movableheaderdiv").removeAttr("style"),d.find(".e-frozencontent").width(0),d.find(".e-frozencontentdiv").width(0),d.find(".e-frozencontent").height(0),d.find("e-frozencontentdiv").height(0);this.refreshScrollerEvent()}this.model.scrollSettings.frozenRows>0&&(this._initFrozenRows(),!this.initialRender&&t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.element.height()>this.model.scrollSettings.height&&this.getContent().attr("tabindex","0").ejScroller(this.model.scrollSettings),n=this.getScrollObject().model.scrollTop,!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&n>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum),("cancel"==e.requestType||"save"==e.requestType)&&n>this._editFormHeight&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&(n-=this._editFormHeight),e.requestType==t.Grid.Actions.Add&&this.getScrollObject().scrollY(0,!0),t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),"beginedit"==e.requestType&&(n=this.getScrollObject().model.scrollTop,this.getScrollObject().scrollY(0,!0)),!t.isNullOrUndefined(this.model.dataSource)&&("refresh"==e.requestType||"searching"==e.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData&&this._gridRecordsCount>0?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(1),1==this._currentVirtualIndex&&this.getScrollObject().scrollY(0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.getScrollObject().refresh(),d.ejScroller("model.enableRTL",this.model.enableRTL),this.model.isResponsive&&("searching"==e.requestType||"filtering"==e.requestType)&&(o=(l=this.getScrollObject()).isHScroll()?this.getContentTable().height()+l.model.buttonSize:this.getContentTable().height(),o="string"==typeof this.model.scrollSettings.height||o>this.model.scrollSettings.height?this.model.scrollSettings.height:o,r="string"==typeof this.model.scrollSettings.width?this.element.width():this.model.scrollSettings.width,width=r,this.getContent().ejScroller({height:o,width:width})),this.getScrollObject().isVScroll()&&!this.getScrollObject().model.autoHide?(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width()),this.getHeaderContent().find(".e-headercontent").hasClass("e-hscrollcss")||this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):this._showHideScroller(),!this.model.allowPaging||this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll()||this.getContentTable().width()==this.getContent().width()||(this.getContentTable().width(this.getContent().width()),this.getHeaderTable().width(this.getContentTable().width())),this._getRowHeights(),n&&!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&e.requestType!=t.Grid.Actions.Add&&(this._currentTopFrozenRow=0,n>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum),this.getScrollObject()._vScrollbar.scroll(n)),"virtualscroll"==e.requestType&&(a=this.getScrollObject().model.scrollTop+this.getScrollObject().model.height-.3*this.getScrollObject().model.height,this.getScrollObject().scrollY(a,!0))}},_isFrozenColumnVisible:function(){for(var e=0;e<this.model.scrollSettings.frozenColumns;e++)if(this.model.columns[e].visible)return!0;return!1},_frozenPaneRefresh:function(){this.getContent().find(".e-frozencontentdiv").css("display","none"),this.getHeaderContent().find(".e-frozenheaderdiv").css("display","none"),this.getHeaderContent().find(".e-movableheader")[0].style["margin-left"]="",this.getContent().find(".e-movablecontent")[0].style["margin-left"]="";var e=t.isNullOrUndefined(this._scrollObject._vScrollbar)?0:this._scrollObject._vScrollbar["e-vscroll"].width(),i=this.model.scrollSettings.width-e-1;this.model.scrollSettings.width>this.getContent().find(".e-movablecontentdiv").width()&&(this.getContent().find(".e-movablecontentdiv").width(i),this.getHeaderContent().find(".e-movableheaderdiv").width(i)),this._scrollObject.option("scrollLeft",0)},_renderScroller:function(){var e,i,s,l,o,r,a,d;if(this.model.scrollSettings||(this.model.scrollSettings={}),this.model.enablePersistence&&(t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)||!this.model.scrollSettings.previousStateWidth)&&this.model.isResponsive&&(this.model.scrollSettings.previousStateWidth=this.model.scrollSettings.width),"string"!=typeof this._originalScrollWidth||this.model.isResponsive||(this.element.css("width","auto"),i=this.element.width(),("auto"==this.model.scrollSettings.width||"auto"==this._originalScrollWidth)&&(this._originalScrollWidth="100%"),this.model.scrollSettings.width=i*(parseFloat(this._originalScrollWidth)/100)),"string"!=typeof this.model.scrollSettings.height||this.model.isResponsive||(e=this.element.height(),"auto"==this.model.scrollSettings.height&&(this.model.scrollSettings.height="100%"),this.model.scrollSettings.height=e*(parseFloat(this.model.scrollSettings.height)/100)),(this.model.scrollSettings.width||this.model.width)&&!this._mediaQuery&&("string"==typeof(i=this.model.scrollSettings.width||this.model.width)?this.element.css("width",this.model.scrollSettings.width||this.model.width):this.element.width(this.model.scrollSettings.width||this.model.width)),s=this.getContent().attr("tabindex","0"),this.getRows(),this.model.scrollSettings.frozenColumns>0){if(scrollWidth=this.getContent().find(".e-frozencontentdiv").width()+20,scrollWidth>this.model.scrollSettings.width)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsViewAlert),void this._alertDialog.ejDialog("open");l=this.getContent().find(".e-frozencontentdiv").width(),o=this.model.enableRTL?"margin-right":"margin-left",this.getContent().find(".e-movablecontent").css(o,l+"px"),this.getHeaderContent().find(".e-movableheader").css(o,l+"px"),this.model.scrollSettings.targetPane=".e-movablecontent"}this._initFrozenRows(),this.model.scrollSettings.autoHide&&(this.model.scrollSettings.show=n.proxy(this._showHideScroller,this)),r=this,this.model.scrollSettings.frozenRows||(this.model.scrollSettings.scroll=function(e){t.isNullOrUndefined(e.scrollData)||"e-hhandle"!=e.scrollData.handler?(r._scrollValue=e.scrollTop,r.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/r._vRowHeight)):(r.model.allowFiltering&&("menu"==r.model.filterSettings.filterType||r._isExcelFilter)&&(r._isExcelFilter?r._excelFilter.closeXFDialog():r._closeFilterDlg()),r._checkScroller(e,this))}),!this.model.scrollSettings.allowVirtualScrolling&&this.model.currentIndex>0&&!this.model.scrollSettings.scrollTop&&(a=this.model.currentIndex*this.getRowHeight(),this.model.scrollSettings.scrollTop=a),s.ejScroller(this.model.scrollSettings),null==this.model.rowTemplate||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser&&"safari"!=this.getBrowserDetails().browser||this.getScrollObject().refresh(),this.model.scrollSettings.frozenColumns>0&&0==this.model.scrollSettings.frozenRows&&this.getScrollObject()._vScrollbar&&this.getScrollObject()._hScrollbar&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=this.getScrollObject()._hScrollbar._scrollData.skipChange=!0),this.model.scrollSettings.autoHide||this._showHideScroller(),!t.isIOSWebView()&&"safari"==this.getBrowserDetails().browser&&this.model.scrollSettings.frozenColumns>0&&this.getHeaderContent().find(".e-movableheader").add(this.getContent().find(".e-movablecontent")).css(o,"auto"),this.refreshScrollerEvent(),this.model.scrollSettings.frozenColumns>0&&!this._isFrozenColumnVisible()&&this._frozenPaneRefresh(),r.model.scrollSettings.allowVirtualScrolling&&(d=this._refreshVirtualPagerInfo(),this._showPagerInformation(d),s.ejScroller({scroll:function(e){if(r.model.scrollSettings.enableVirtualization&&null!=e.scrollData&&"e-hhandle"!=e.scrollData.handler){if(e.reachedEnd=e.scrollData.scrollable-e.scrollTop==0,"thumb"==e.source){var i=Object.keys(r._virtualLoadedRows),s=(r._currentVirtualIndex+2).toString();"continuous"==r.model.scrollSettings.virtualScrollMode&&-1==n.inArray(s,i)&&s<r._totalVirtualViews?r._isContinuous=!0:(e.model.scrollTop=e.scrollTop,r._isContinuous=!1,e.cancel=!0)}("button"==e.source||"key"==e.source||"wheel"==e.source)&&(n("#"+r._id+"_WaitingPopup").is(":visible")?e.cancel=!0:(r._isThumbScroll=!1,r._virtualViewScroll(e)),"continuous"==r.model.scrollSettings.virtualScrollMode&&e.reachedEnd&&this.refresh()),r.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/r._vRowHeight)}else!t.isNullOrUndefined(e.scrollData)&&"e-hhandle"==e.scrollData.handler&&r.model.allowFiltering&&("menu"==r.model.filterSettings.filterType||r._isExcelFilter)&&(r._isExcelFilter?r._excelFilter.closeXFDialog():r._closeFilterDlg()),e.reachedEnd=this.content()[0].scrollHeight-e.scrollTop==this.content()[0].clientHeight,("button"==e.source||"key"==e.source||"wheel"==e.source)&&null!=r.model&&r._virtualScroll(e),"wheel"==e.source&&e.scrollTop!=r._scrollValue&&(e.scrollTop=r._scrollValue),r._checkScroller(e,this)},thumbEnd:function(e){r.model.scrollSettings.enableVirtualization&&"continuous"==r.model.scrollSettings.virtualScrollMode?e.reachedEnd=e.scrollData.scrollable-e.model.scrollTop==0:e.originalEvent&&!n(e.originalEvent.target).hasClass("e-rowcell")&&(e.reachedEnd=this.content()[0].scrollHeight-e.scrollData.sTop==this.content()[0].clientHeight),"e-hhandle"!=e.scrollData.handler&&null!=r.model&&e.originalEvent&&(r.model.scrollSettings.enableVirtualization?(r._isThumbScroll=!0,r._virtualViewScroll(e),"continuous"==r.model.scrollSettings.virtualScrollMode&&e.reachedEnd&&this.refresh(),r._isLocalData&&r.element.ejWaitingPopup("hide")):r._virtualScroll(e))},scrollEnd:function(e){if("mousewheel"!=e.scrollData.type&&(null==e.scrollData.model||"horizontal"!=e.scrollData.model.orientation)&&r.model.scrollSettings.enableVirtualization&&!r._isContinuous){var t=r._calculateCurrentViewPage(e.model),i=-1!=n.inArray(t,r._virtualLoadedPages);i?(r._isThumbScroll=!0,r._virtualViewScroll(e),r.element.ejWaitingPopup("hide"),r._totalVirtualViews<=3*r._maxViews&&(this._content[0].scrollTop=e.scrollData.scrollTop)):(i||r.element.ejWaitingPopup("show"),e.cancel=!0)}}}))},_checkScroller:function(e,t){var i,s=e.scrollLeft>0?e.scrollLeft:Math.abs(e.scrollLeft);"thumb"==e.source&&(t.content()[0].scrollWidth-s==t.content()[0].clientWidth||0==s)&&(this.model.enableRTL&&(i=0==s?e.scrollData.scrollable:0,e.scrollData.sTop=e.model.scrollLeft=i,t.content().scrollLeft(i)),t._hScrollbar.refresh())},_showHideScroller:function(){this.getScrollObject().isVScroll()?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this.model.scrollSettings.autoHide||this.getHeaderContent().addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss"),0!=this.model.scrollSettings.frozenColumns||this._mediaQuery||(!this.element.find(".e-gridheader").hasClass("e-scrollcss")&&(this.model.filterSettings.filteredColumns.length||this._hiddenColumns.length&&!this.model.minWidth)?(this.getHeaderTable().removeAttr("style"),this.getContentTable().removeAttr("style")):(this.getHeaderContent().find("div table").first().width(this.getContentTable().width()),this.getContent().find("div table").first().width(this.getContentTable().width()),this.getHeaderTable().width(this.getContentTable().width()))),this._isHscrollcss()},_isHscrollcss:function(){var e=this.getContent().data("ejScroller"),t=e&&(e.isHScroll()||e.isVScroll())?"addClass":"removeClass";this.getHeaderContent().find(".e-headercontent")[t]("e-hscrollcss")},_initFrozenRows:function(){var e,i=this.getRows();this.model.currentViewData&&0!=this.model.currentViewData.length&&(this.model.scrollSettings.frozenRows>0&&null!=i?(this.model.scrollSettings.scroll=n.proxy(this._scroll,this),this.getContent().find(".e-frozeny").removeClass("e-frozeny").end().find(".e-frozenrow").removeClass("e-frozenrow"),!t.isNullOrUndefined(i[0][this.model.scrollSettings.frozenRows-1])&&!t.isNullOrUndefined(i[1][this.model.scrollSettings.frozenRows-1])&&this.model.scrollSettings.frozenColumns>0?n(i[0][this.model.scrollSettings.frozenRows-1].cells).add(i[1][this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"):t.isNullOrUndefined(this.getRowByIndex(this.model.scrollSettings.frozenRows-1)[0])||n(i[this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"),this.getContent().height()>this.model.scrollSettings.height&&(e=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),this.initialRender||t.isNullOrUndefined(e)||!t.isNullOrUndefined(e._vScrollbar)||this._getRowHeights(),this.model.scrollSettings.height=this._rowHeightCollection[Math.floor(this.model.scrollSettings.height/this._rowHeightCollection[1])]+18)):delete this.model.scrollSettings.scroll)},refreshScrollerEvent:function(){this.getContent().find(".e-content:first,.e-movablecontent").scroll(t.proxy(function(e){if(this.model.scrollSettings.targetPane?($movablecontent=n(e.currentTarget).hasClass("e-movablecontent")||!this.model.currentViewData||0==this.model.currentViewData.length?n(e.currentTarget):n(e.currentTarget).find(".e-movablecontent"),this.getHeaderContent().find(".e-movableheader").scrollLeft($movablecontent.scrollLeft())):this.getHeaderContent().find("div").first().scrollLeft(n(e.currentTarget).scrollLeft()),this.model.scrollSettings.frozenRows>0&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&this.model.isEdit){var t=e.target.scrollTop;this.getContent().find(".e-content").scrollTop(0),this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop+t,!0)}},this)),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").scroll(t.proxy(function(e){var t=n(e.currentTarget);this.model.scrollSettings.targetPane?(this.getContent().find(".e-movablecontent").scrollLeft(t.scrollLeft()),this.model.showSummary&&this.getFooterContent().find(".e-movablefooter").scrollLeft(t.scrollLeft())):(this.model.showSummary&&this.getFooterContent().scrollLeft(t.scrollLeft()),this.getContent().find(".e-content").first().scrollLeft(t.scrollLeft()))},this))},clearFiltering:function(e){if(e)this._clearFilter(e);else{for(var t=this.model.filterSettings.filteredColumns;0<t.length;)this._clearFilter(t[0].field);("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this.getHeaderTable().find(".e-filtericon").removeClass("e-filteredicon e-filternone")}},_clearFilter:function(e){var i,s=this.model.filterSettings.filterType;switch(t.isNullOrUndefined(this.getColumnByField(e).filterType)||(s=this.getColumnByField(e).filterType),s){case t.Grid.FilterType.FilterBar:-1!=n.inArray(this.getColumnByField(e),this.filterColumnCollection)&&(this.getHeaderTable().find("#"+e+"_filterBarcell").val(""),this._currentFilterbarValue="",n.inArray(e,this.filterColumnCollection),this._currentFilterColumn=this.getColumnByField(e),this._showFilterMsg());break;case t.Grid.FilterType.Menu:i="#"+this._id+"_"+this._$colType+"Dlg","boolean"==this._$colType?n(i).find(".e-value .e-js").ejCheckBox("model.checked",!1):"number"==this._$colType?n(i).find(".e-numerictextbox").ejNumericTextbox("model.value",""):n(i).find(".e-value input").val(""),(this._excelFilterRendered||this._isExcelFilter)&&delete this._excelFilter._predicates[0][e],this._$curFieldName=e;break;case t.Grid.FilterType.Excel:delete this._excelFilter._predicates[0][e],this._excelFilter.closeXFDialog(),this._$curFieldName=e}this.filterColumn(e,"","","or")},clearSearching:function(){this.element.find(".e-gridtoolbar #"+this._id+"_search").val(""),this.search(""),n.extend(this.model.searchSettings,this.defaults.searchSettings)},_renderByFrozenDesign:function(){var e=n(document.createElement("div")),i=this._getMetaColGroup().find("col"),s={};s.colgroup1=e.append(t.buildTag("colgroup").append(i.splice(0,this.model.scrollSettings.frozenColumns))).html(),s.colgroup2=e.html(t.buildTag("colgroup").append(i)).html(),this.getContent().find("div").first().get(0).innerHTML=n.render[this._id+"_FrozenTemplate"]({datas:this.model.currentViewData},s),this.setGridContentTable(this.getContent().find(".e-table").attr("role","grid"))},addFrozenTemplate:function(){var e="<div class='e-frozencontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup1}}<tbody>{{for datas tmpl='"+this._id+"_JSONFrozenTemplate'/}}</tbody></table></div><div class='e-movablecontent'><div class='e-movablecontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup2}}<tbody>{{for datas tmpl='"+this._id+"_JSONTemplate'/}}</tbody></table></div></div>",t={};t[this._id+"_FrozenTemplate"]=e,n.templates(t)},_getTopRow:function(e){var t=this.model.scrollSettings.frozenRows,i=0;if(e>10)for(i=0;i<this._rowHeightCollection.length;i++)if(this._rowHeightCollection[i]>e){t=this.model.scrollSettings.frozenRows+i-1;break}return{imaginaryIndex:t,actualIndex:i}},_showHideRow:function(e,t,i,s){var l=this.getRows();this.model.scrollSettings.frozenColumns>0?n(l[0]).slice(e,t).add(n(l[1]).slice(e,t).toArray())[i]():n(l).slice(e,t)[i](),this._currentTopFrozenRow="show"==i?e:t,this.getScrollObject()._changevHandlerPosition(s)},_scroll:function(e){var i,s,n,l,o;if(null!=e.scrollData&&"width"!=e.scrollData.dimension){e.cancel=!0,this.getRows();var r=this._getTopRow(e.scrollTop).imaginaryIndex;if(r>this._currentTopFrozenRow?this._showHideRow(this.model.scrollSettings.frozenRows,r,"hide",e.scrollTop):r<this._currentTopFrozenRow&&this._showHideRow(r,this._currentTopFrozenRow+1,"show",e.scrollTop),i=this.getContentTable().last().find("tr"),s=2*parseInt(i.last().find("td:first").css("border-top-width"))+1,e.scrollTop==this.getScrollObject()._vScrollbar.model.maximum&&i.last()[0].offsetTop+i.last().height()-s>this.element.find(".e-content").height()){for(n=i.last().prev()[0].offsetTop+i.last().prev().height(),l=1,o=i.length-2;n-s>this.element.find(".e-content").height();o++){n=i[o].offsetTop+i.eq(o).height(),l++;break}this._showHideRow(this.model.scrollSettings.frozenRows,r+l,"hide",e.scrollTop)}e.model.scrollTop=e.scrollTop}else t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)},_renderAlertDialog:function(){var e=t.buildTag("div.e-content",this._getLocalizedLabels().frozenColumnsMessage),i=t.buildTag("span.e-buttons","<input type='button' id="+this._id+"ConfirmDialogOK value='"+this._getLocalizedLabels().OkButton+"'/>");this._alertDialog=t.buildTag("div#"+this._id+"AlertDialog"),this._alertDialog.append(e).append(i),this.element.append(this._alertDialog),i.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:n.proxy(function(){this._alertDialog.ejDialog("close")},this)}),this._renderFDialog(this._id+"AlertDialog"),this._alertDialog.ejDialog({width:"auto",enableModal:!0})},_renderFDialog:function(e){n("#"+e).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_virtualScroll:function(e){var t,i;if(null!=e){var s=0,l=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,o=this.model.pageSettings,a=this.getContentTable()[0].tBodies[0],d=n(a).find("tr.e-virtualrow");if(o.totalPages=Math.ceil(l/o.pageSize),e.scrollTop!==r&&(e.model.scrollTop=e.scrollTop),e.reachedEnd!=r&&(e.model.reachedEnd=e.reachedEnd),(t=this._calculateCurrenPage(d,this.getContentTable(),e.model))>o.totalPages&&(t=o.totalPages),o.currentPage!=t&&-1==n.inArray((t-1)*o.pageSize,this.virtualLoadedPages)&&0==this.element.find(".gridform:visible").length&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded)o.currentPage=t;else{if(-1==n.inArray((t-1)*o.pageSize,this.virtualLoadedPages)){if("continuous"==this.model.scrollSettings.virtualScrollMode&&!e.reachedEnd)return;t==o.totalPages&&-1==n.inArray((t-2)*o.pageSize,this.virtualLoadedPages)&&(s++,this.set_currentPageIndex(t)),1==s&&(this._lastRow=!0),this.set_currentPageIndex(t)}o.currentPage=t}i=this._refreshVirtualPagerInfo(),this._showPagerInformation(i)}},_virtualViewScroll:function(e){if(null!=e){e.scrollTop!==r&&(e.model.scrollTop=e.scrollTop),e.reachedEnd!=r&&(e.model.reachedEnd=e.reachedEnd);var t=this._calculateCurrentVirtualIndex(e);this.model.isEdit&&this.cancelEdit(),-1==n.inArray(t,this._currentLoadedIndexes)&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded||this.set_currentVirtualIndex(t)}},_createPagerStatusBar:function(){var e,i,s=this.element.find(".e-pagerstatusbar");s.length&&s.remove(),e=t.buildTag("div.e-pagermsgdiv"),this.$pagerStatusBarDiv=t.buildTag("div.e-pagerstatusbar").append(e),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(i=t.buildTag("div.e-pagerfiltermsg").css("display","none"),this.$pagerStatusBarDiv.append(i)),this.$pagerStatusBarDiv.appendTo(this.element),this.$pagerStatusBarDiv.css("display","none")},_refreshVirtualContent:function(e){var t,i,s,l,o,r,a,d=this.getRowHeight(),h=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;null!=e&&(this._currentPage(e),t=this._refreshVirtualPagerInfo(),this._showPagerInformation(t)),i=this.getCurrentIndex(),s=this.getContentTable()[0].tBodies[0],i>0&&(l=document.createElement("tr"),n(l).addClass("e-virtualrow").css("height",d*i).prependTo(s)),i+this.model.pageSettings.pageSize<=h&&1!=this.getContentTable().find("tr").last().hasClass("e-virtualrow")&&0==this.model.scrollSettings.frozenColumns&&(o=document.createElement("tr"),r="normal"==this.model.scrollSettings.virtualScrollMode?d*(h-(i+this.model.pageSettings.pageSize)):1,n(o).addClass("e-virtualrow").css("height",r).appendTo(n(s))),this.virtualLoadedPages=[],this.orderedVirtualLoadedPage=[],this.virtualLoadedPages.push(i>=0?i:0),this.orderedVirtualLoadedPage.push(i>=0?i:0),(a=n(s).find("tr:not(.e-virtualrow)").attr("name",i>=0?i:0)[0])&&a.previousSibling&&(n(a.previousSibling).hasClass("e-virtualrow")||a.previousSibling.offsetTop>i*this.getContent().height())&&(this.getContent().children("div").first().scrollTop(this.getContent().find(".content").scrollTop()-(this.getContent().find(".content").scrollTop()-a.offsetTop)),this._isVirtualRecordsLoaded=!0)},isIntermediate:function(){return this.model.currentIndex<this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1)},_refreshVirtualView:function(e){var t,i,s,l,o,r,a,d,h;if(this._singleView)this._singleView=!1,this._addLastRow(),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),d=this._currentVirtualIndex.toString(32),n(this._gridRows).attr("name",d),this._virtualLoadedRows[this._currentVirtualIndex]=this._gridRows,this._eventBindings();else{if(t=this._virtualRowCount,e)e>this._totalVirtualViews&&(e=1,i=!0),this._currentVirtualIndex=e,this._virtualLoadedRecords[e]?(l=this.getScrollObject(),s=Math.ceil((l.scrollTop()+this.model.scrollSettings.height)/this._vRowHeight/this.model.pageSettings.pageSize)):(this._virtualDataRefresh||this._currentVirtualIndex==this._totalVirtualViews||(i=!0),s=Math.ceil(e*this._virtualRowCount/this.model.pageSettings.pageSize)),this._refreshVirtualViewScroller(i),s>this.model.pageSettings.totalPages&&(s=this.model.pageSettings.totalPages),s<=0&&(s=1),-1==n.inArray(s,this._virtualLoadedPages)?this.gotoPage(s):(this._currentPage(s),this._needPaging=!this._checkCurrentVirtualView(this._virtualLoadedRecords,e),this._getVirtualLoadedRecords(this.model.query),this._replacingVirtualContent());else{if(this._refreshVirtualViewDetails(),o=n(this.getContentTable()[0].rows),this._setVirtualTopBottom(),this.initialRender){for(h=0;h<this._currentLoadedIndexes.length;h++)r=this._currentLoadedIndexes[h],viewIndex=(h+1)*t,viewCount=h*t,n(o[viewIndex-1]).addClass("e-virtualview"+r),d=r.toString(32),a=o.slice(viewCount,viewCount+t).attr("name",d).detach(),this._virtualLoadedRows[r]=a,a.appendTo(this.getContentTable());this._currentVirtualIndex>1&&this._refreshVirtualViewScroller()}this._eventBindings()}-1==n.inArray(this._currentPage(),this._virtualLoadedPages)&&this._virtualLoadedPages.push(this._currentPage())}if(!e&&(this.model.queryCellInfo||this.model.rowDataBound))for(h=0;h<this._currentLoadedIndexes.length;h++)-1==n.inArray(this._currentLoadedIndexes[h],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[h]);this._isThumbScroll=!1,this._virtualDataRefresh=!1},_refreshVirtualViewData:function(){this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualLoadedPages=[],this._virtualPageRecords={},this._queryCellView=[],null!=this.model.pageSettings.totalPages&&this._currentPage()>this.model.pageSettings.totalPages&&(this._currentPage(1),this._currentVirtualIndex=1)},setCurrentPageData:function(e){this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._refreshVirtualViewDetails(),this._setVirtualLoadedRecords(e,this._currentPage()),this._refreshVirtualView(this._currentVirtualIndex))},_refreshVirtualViewScroller:function(e){var t;this.initialRender&&!this.model.scrollSettings.scrollTop||e?(this._vRowHeight,t=this.model.currentIndex*this._vRowHeight):t=this._scrollObject.model.scrollTop,this.getContent().ejScroller("model.scrollTop",t),this._scrollValue=t},_calculateCurrentViewPage:function(e){e||(e=this._scrollObject.model);var t=this.model.pageSettings.pageSize,i=Math.ceil((e.scrollTop+this.model.scrollSettings.height)/this._vRowHeight/t);return null==this.model.pageSettings.totalPages&&(this.model.pageSettings.totalPages=Math.ceil(this._getVirtualTotalRecord()/t)),i>this.model.pageSettings.totalPages&&(i=this.model.pageSettings.totalPages),this.model.pageSettings.currentPage=i,i},_calculateCurrentVirtualIndex:function(e){var t,i,s,l,o,r,a,d,h,c=e.model,u=(this._getVirtualTotalRecord(),[]),m=c.scrollTop;if(t=(m+this.model.scrollSettings.height)/this._vRowHeight/this._virtualRowCount,t=this._prevVirtualIndex>this._currentVirtualIndex&&m<=this._scrollValue?Math.floor(t):Math.ceil(t),m>=this._scrollValue&&"continuous"==c.virtualScrollMode&&c.reachedEnd&&(t+=1),t>this._totalVirtualViews&&(t=this._totalVirtualViews),t<=0&&(t=1),-1!==n.inArray(t,this._currentLoadedIndexes)&&this._virtualLoadedRows[t]&&m!=e.scrollData.scrollable){for(r=(a=this.getContentTable()[0].rows).length,d=this.getContent().find(".e-virtualtop").height(),s=m>=this._scrollValue,h=0;h<r;h++){if((o=(l=a[h]).offsetHeight+l.offsetTop+d)>m+this.model.scrollSettings.height){0===u.length&&0!==h&&(u=[a[l.offsetTop<=m+this.model.scrollSettings.height?h:h-1]]);break}if(o>=m&&o<=m+this.model.scrollSettings.height&&(u.push(l),!1===s&&u.length>1))break}(i=n(m>=this._scrollValue?u[u.length-1]:u[0])).length&&(t=parseInt(i.attr("name"),32))}return this._scrollValue=m,t},_calculateCurrenPage:function(e,t,i){var s,l,o,r,a,d,h,c,u,m,p,g,f,_=this.model.pageSettings.pageSize,v=this,b=[],C=this.getRowHeight();if(s=(i.scrollTop+this.model.scrollSettings.height)/C/_,h=this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1),s=(c=this.getContentTable().find("tr[name="+h+"]").eq(0)).length&&c.offset().top>0&&s>=1&&i.scrollTop<this._scrollValue&&-1!==this.virtualLoadedPages.indexOf(Math.ceil(s-1)*_)?Math.floor(s):Math.ceil(s),i.scrollTop>=this._scrollValue&&"continuous"==i.virtualScrollMode&&i.reachedEnd&&(s=this.virtualLoadedPages[this.virtualLoadedPages.length-1]/_+2),-1!==n.inArray((s-1)*_,this.virtualLoadedPages)){for(d=(u=this.getContentTable().children("tbody").children("tr")).length,o=i.scrollTop>=this._scrollValue,m=0;m<d;m++){if((a=(r=u[m]).offsetHeight+r.offsetTop)>i.scrollTop+v.model.scrollSettings.height){0===b.length&&0!==m&&(b=[u[r.offsetTop<=i.scrollTop+v.model.scrollSettings.height?m:m-1]]);break}if(a>=i.scrollTop&&a<=i.scrollTop+v.model.scrollSettings.height&&(b.push(r),!1===o&&b.length>1))break}(l=n(i.scrollTop>=this._scrollValue?b[b.length-1]:b[0])).hasClass("e-virtualrow")?1===b.length&&s++:s=parseInt(l.attr("name"),10)/_+1}for(this._scrollValue=i.scrollTop,p=0;p<e.length;p++)if((g=e[p]).offsetTop+g.offsetHeight>=i.scrollTop)return f=this._calculatePrevPage(e,t,i),this._prevPageNo=f,0==s&&(s=1),s>this.model.pageSettings.totalPages?this.model.pageSettings.totalPages:s;return s},_calculatePrevPage:function(e,t,i){for(var s,l,o=0;o<e.length;o++)if((s=e[o]).offsetTop+s.offsetHeight>=i.scrollTop&&null!=(l=n(s).prevAll("tr[name]")[0]))return Math.ceil(parseInt(n(l).attr("name"),10)/this.model.pageSettings.pageSize)+1;return-1},_refreshVirtualPagerInfo:function(){var e={};return e.pageSize=this.model.pageSettings.pageSize,e.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,0==e.totalRecordsCount&&this._currentPage(0),e.currentPage=this._currentPage(),e.totalPages=Math.ceil(e.totalRecordsCount/e.pageSize),e},_showPagerInformation:function(e){var t=(e.currentPage-1)*e.pageSize;n(this.$pagerStatusBarDiv).find("div:first").html(String.format(this.localizedLabels.PagerInfo,e.currentPage,e.totalPages,e.totalRecordsCount),t,t+e.pageSize),n(this.$pagerStatusBarDiv).css("display","block")},_cellMerging:function(e){e.colMerge=function(e){if(-1==this.cell.className.indexOf("e-colmerge")){this.cell.className+=" e-colmerge",this.model.columns.length-this.cell.cellIndex<e&&(e=this.model.columns.length-this.cell.cellIndex),this.cell.colSpan=e;for(var i=1;i<e;i++)t.isNullOrUndefined(this.cell.parentElement.children[this.cell.cellIndex+i])||(this.cell.parentElement.children[this.cell.cellIndex+i].className+=" e-hide")}},e.rowMerge=function(e){var i,s;if(-1==this.cell.className.indexOf("e-rowmerge"))for(this.cell.className+=" e-rowmerge",(i=this.cell.parentNode.parentNode).rows.length-this.cell.parentElement.rowIndex<e&&(e=i.rows.length-this.cell.parentElement.rowIndex),this.cell.rowSpan=e,s=0;s<e-1&&!t.isNullOrUndefined(i.children[this.cell.parentElement.rowIndex+s].nextSibling);s++)(!n(".e-grid").children().is(".e-dialog")||-1!=n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")||this.model.allowFiltering)&&(i.children[this.cell.parentElement.rowIndex+s].nextSibling.children[this.cell.cellIndex].className+=" e-merged e-hide")},e.merge=function(i,s){var l,o,r,a;if(i>1&&s>1){if(-1==this.cell.className.indexOf("e-colmerge")){if(this.cell.className+=" e-colmerge",(l=this.cell.parentNode.parentNode).rows.length-this.cell.parentElement.rowIndex<s&&(s=l.rows.length-this.cell.parentElement.rowIndex),!n(".e-grid").children().is(".e-dialog")||-1!=n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")||this.model.allowFiltering)for(o=0;o<s&&!t.isNullOrUndefined(l.children[this.cell.parentElement.rowIndex+o]);o++)for(r=l.children[this.cell.parentElement.rowIndex+o].children[this.cell.cellIndex],this.model.columns.length-r.cellIndex<i&&(i=this.model.columns.length-r.cellIndex),r.colSpan=i,a=1;a<i;a++)t.isNullOrUndefined(r.parentElement.children[this.cell.cellIndex+a])||(r.parentElement.children[this.cell.cellIndex+a].className+=" e-hide");else for(this.cell.colSpan=i,a=1;a<i;a++)t.isNullOrUndefined(this.cell.nextSibling)||(this.cell.parentElement.children[this.cell.cellIndex+a].className+=" e-hide");e.rowMerge(s)}}else i>1&&e.colMerge(i),s>1&&e.rowMerge(s)}},_replacingContent:function(){var e,i,s,l,o,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y=document.createElement("div"),S=this.getCurrentIndex(),x=this.getContentTable()[0],T=n(x).find("colgroup").first(),k=this.getRowHeight();T.replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&T.prepend(this._getIndentCol()),e=x.tBodies[0],i=this.model.currentViewData,t.isNullOrUndefined(this._currentPageData)?this._virtualLoadedRecords[this._currentPage()]=i:(this._virtualLoadedRecords[this._currentPage()]=this._currentPageData,this._currentPageData=null);var D=this,I=n("<tbody></tbody>").append(n.render[this._id+"_JSONTemplate"](i)).children("tr");if(this._allowcolumnSelection&&this.selectedColumnIndexes.length>0)for(v=0;v<this.selectedColumnIndexes.length;v++)s=this.selectedColumnIndexes[v]+1,I.find("td:nth-of-type("+s+")").addClass("e-columnselection");for(this.virtualLoadedPages.push(S>=0?S:0),l=t.dataUtil.mergeSort(t.distinct(this.virtualLoadedPages)),n(I).attr("name",S),o=t.dataUtil.min(l),a=t.dataUtil.max(l),n(e).children(".e-virtualrow").remove(),_=0;_<l.length;_++)d=l[_],h=l[_-1],(d!=this.orderedVirtualLoadedPage[_]||this.orderedVirtualLoadedPage[_]==r)&&(h!=r?I.insertAfter(n(e).children("[name="+h+"]:last")):I.insertBefore(n(e).children("[name="+this.orderedVirtualLoadedPage[_]+"]:first")),this.orderedVirtualLoadedPage=l),0!=d&&(c=d-(d==o?o:h)-D.model.pageSettings.pageSize)>0&&(u=document.createElement("tr"),n(u).addClass("e-virtualrow").css("height",k*c).insertBefore(n(e).children("[name="+d+"]:first"))),d==a&&(m=D._gridRecordsCount-a-D.model.pageSettings.pageSize)>0&&(p=document.createElement("tr"),n(p).addClass("e-virtualrow").css("height",k*m).appendTo(e));o>0&&(g=document.createElement("tr"),n(g).addClass("e-virtualrow").css("height",k*o).prependTo(e));var O=this.getContent(),R=n(e).children("tr[name="+S+"]")[0],A=R.previousSibling,M=O.height(),F=R.offsetTop;if(this._virtaulUnSel)for(f=n.extend(!0,[],this._virtaulUnSel),_=0;_<f.length;_++){var P=f[_],E=this.model.pageSettings.currentPage;(P%this.model.pageSettings.pageSize==0?parseInt(P/this.model.pageSettings.pageSize):parseInt(P/this.model.pageSettings.pageSize)+1)==E&&(v=P%this.model.pageSettings.pageSize,n(e).find("tr[name="+S+"]").eq(v).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),-1!=(b=this._virtaulUnSel.indexOf(P))&&this._virtaulUnSel.splice(b,1))}(R&&A&&(this._virIndex||n(A).hasClass("e-virtualrow")||A.offsetTop>S*M)&&(this._gridRecordsCount-S>=this.model.pageSettings.pageSize||R.offsetParent.offsetHeight-F<M)||this._lastRow)&&(this._lastRow&&(this._lastRow=!1),this._virIndex&&(this._virIndex=!1),this._isVirtualRecordsLoaded=!0,O.find(".e-content").scrollTop(F),this._scrollValue=this.getContent()[0].firstChild.scrollTop),n(x).get(0),y.firstChild,this._currentJsonData=i,this._gridRows=n(x).get(0).rows,C=n(x).find(".e-virtualrow").last(),w="normal"==this.model.scrollSettings.virtualScrollMode?C.height()-(n(x).height()-this._gridRecordsCount*k):1,C.css("height",w),this._eventBindings()},_replacingVirtualContent:function(){var e,t,i,s,l,o,r,a=this.getContentTable()[0],d=this._currentLoadedIndexes,h=n("<tbody></tbody>");if(this._checkCurrentVirtualView(this._virtualLoadedRows,this._currentVirtualIndex)){for(e=[],r=0;r<d.length;r++)n.merge(e,this._virtualLoadedRows[d[r]]);n(h).append(e)}else for(n("<tbody></tbody>"),r=0;r<d.length;r++)if(t=d[r],i=this._virtualLoadedRows[t])t<this._currentVirtualIndex?(o=h.find(".e-virtualview"+t)).length?n(i).insertBefore(o):h.prepend(i):n(i).insertAfter(h.find(".e-virtualview"+(t-1)));else{var c=n("<tbody></tbody>").append(n.render[this._id+"_JSONTemplate"](this._virtualLoadedRecords[t]))[0].rows,u=c.length-1;n(c[u]).addClass("e-virtualview"+t),s=t.toString(32),((l=n(c).attr("name",s)).length==this._virtualRowCount||t==this._totalVirtualViews)&&(this._virtualLoadedRows[t]=l,h.append(c))}if(a.replaceChild(h[0],a.lastChild),n(a.rows).removeClass("e-hover"),this._setVirtualTopBottom(),(this._isThumbScroll||this._remoteRefresh)&&(this._scrollObject._content[0].scrollTop=this._scrollObject.scrollTop(),this._isThumbScroll=this._remoteRefresh=!1),this.model.allowSelection&&this._checkVirtualSelection(),this._gridRows=a.rows,this._currentJsonData=this.model.currentViewData,this._checkCurrentVirtualView(this._queryCellView,this._currentVirtualIndex)||this._eventBindings(),this.model.queryCellInfo||this.model.rowDataBound)for(r=0;r<this._currentLoadedIndexes.length;r++)-1==n.inArray(this._currentLoadedIndexes[r],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[r])},_setVirtualTopBottom:function(){var e,i,s,l,o,r,a,d,h,c=this.getContentTable()[0],u=this._vRowHeight,m=t.dataUtil.mergeSort(t.distinct(this._currentLoadedIndexes)),p=t.dataUtil.min(m),g=t.dataUtil.max(m),f=this._getVirtualTotalRecord();if("continuous"==this.model.scrollSettings.virtualScrollMode&&this._virtualLoadedRows[g+1]&&(s=Object.keys(this._virtualLoadedRows),g=(i=parseInt(t.dataUtil.max(s),10))-g),e=g*this._virtualRowCount*u,-1!=n.inArray(this._totalVirtualViews,this._currentLoadedIndexes)&&this._currentVirtualIndex!=this._totalVirtualViews&&(e=(f-(this._virtualRowCount-this._lastViewData))*u),l=f*u-e,"continuous"!=this.model.scrollSettings.virtualScrollMode||this._virtualLoadedRows[g+1]||(l=i&&i<=g+1?l:1),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),o=1e6,l>0&&this._getVirtualTotalRecord()>2*this._virtualRowCount)if(Math.round(l).toString().length<7)t.buildTag("div.e-virtualbottom","",{height:l}).insertAfter(c);else for(t.buildTag("div.e-virtualbottom").insertAfter(c),a=Math.ceil(l/o),d=0;d<a;d++)h=o,d==a-1&&(h=l%o),n(c).next().append(t.buildTag("div","",{height:h}));if(p>1)if(r=(p-1)*this._virtualRowCount*u,Math.round(r).toString().length<7)t.buildTag("div.e-virtualtop","",{height:r}).insertBefore(c);else for(t.buildTag("div.e-virtualtop").insertBefore(c),a=Math.ceil(r/o),d=0;d<a;d++)h=o,d==a-1&&(h=r%o),n(c).prev().append(t.buildTag("div","",{height:h}));this._scrollObject.model.scrollTop!=this._scrollValue&&this.getContent().ejScroller("model.scrollTop",this._scrollValue)},_checkVirtualSelection:function(){for(var e,t,i,s,l,o,r,a,d,h=this.getContentTable()[0],c=0;c<this.selectedRowsIndexes.length;c++)t=this.selectedRowsIndexes[c],i=this._getSelectedViewData(t).viewIndex,-1!=n.inArray(i,this._currentLoadedIndexes)&&(e=t%this._virtualRowCount+this._currentLoadedIndexes.indexOf(i)*this._virtualRowCount,n(h.rows[e].cells).hasClass("e-selectionbackground")||(n(n(h.rows[e]).attr("aria-selected","true")[0].cells).addClass("e-selectionbackground e-active"),this.model.selectedRecords[c]=this._virtualLoadedRecords[i][e%this._virtualRowCount]));for(c=0;c<this._rowIndexesColl.length;c++)if(t=this._rowIndexesColl[c],i=this._getSelectedViewData(t).viewIndex,-1!=n.inArray(i,this._currentLoadedIndexes)&&-1==n.inArray(t,this._virtualRowCellSelIndex)||this._virtualDataRefresh)for(s=n.inArray(t,this._rowIndexesColl),l=this.selectedRowCellIndexes[s].cellIndex,o=0;o<l.length;o++)this._selectMultipleCells(t,l[o]);for(r=n(h.rows).find(".e-active, .e-cellselectionbackground").closest("tr"),c=0;c<r.length;c++){var u=parseInt(n(r[c]).attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-n(r[c]).index()%this._virtualRowCount),m=n(r[c]).index();this.selectedRowsIndexes.length&&-1==n.inArray(u,this.selectedRowsIndexes)&&(this._clearVirtualSelection=!0,this.clearSelection(m)),this._rowIndexesColl.length&&-1==n.inArray(u,this._rowIndexesColl)&&n(this.getRowByIndex(m)[0].cells).removeClass("e-cellselectionbackground e-activecell")}for(n(h.rows).find(".e-columnselection").removeClass("e-columnselection"),a=0;a<this.selectedColumnIndexes.length;a++)d=this.selectedColumnIndexes[a]+1,n(h.rows).find("td:nth-of-type("+d+")").addClass("e-columnselection");this._clearVirtualSelection=!1},_refreshPagerTotalRecordsCount:function(){this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()})},_maxZindex:function(){var e=1;return((e=Math.max.apply(null,n.map(n("body *"),function(e){if("absolute"==n(e).css("position"))return parseInt(n(e).css("z-index"))||1})))==r||null==e)&&(e=1),e},_keyPressed:function(e,i,s,l){var o,a,d,h,c,u,m,p,g,f,_,v,b=n(i);if(b.hasClass("e-tooltxt")&&13==s.code)return o={currentTarget:i,target:i.firstChild},n(i).closest(".e-gridtoolbar").ejToolbar("instance")._trigger("click",o),!1;if(!this._allowcellSelection||this._previousRowCellIndex&&0!=this._previousRowCellIndex.length||(this._previousRowCellIndex=[],this._previousRowCellIndex.push([0,[0]])),b.hasClass("e-ddl")&&13==s.code&&n(document.activeElement).parents("td").hasClass("e-templatecell")||!this.model.allowKeyboardNavigation||"INPUT"==i.tagName&&-1==this.model.keyConfigs[e].indexOf(",")&&40!=s.code&&38!=s.code&&13!=s.code&&27!=s.code&&9!=s.code||String.fromCharCode(s.code).toLowerCase()==this.element[0].accessKey.toLowerCase()||"checkbox"==n(i).prop("type")&&13!=s.code&&9!=s.code&&27!=s.code||"batch"==this.model.editSettings.editMode&&"INPUT"==i.tagName&&13!=s.code&&9!=s.code&&27!=s.code&&(0!=i.selectionStart&&"moveCellRight"!=e||i.selectionEnd!=i.value.length&&"moveCellLeft"!=e)||this.model.allowFiltering&&b.hasClass("e-filtertext")&&13==s.code||b.hasClass("e-fltrbtn")&&13==s.code||("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode)&&n(i).closest("#"+this._id+"EditForm").length||n(i).parent().siblings("#"+this._id+"EditForm").length||13==s.code&&b.parent().hasClass("e-unboundcelldiv"))return!0;if(13==s.code&&"INPUT"==i.tagName&&b.closest("#"+this._id+"_search").length&&(e="searchRequest"),13==s.code&&null!=this._excelFilter&&this._excelFilter._openedFltr.length&&this._excelFilter._openedFltr.is(":visible")&&(e="excelfilter"),13==s.code&&n(i).hasClass("e-gridtoolbar")&&(toolbarId=b.find(".e-hover").attr("Id"),e="toolbarOperationRequest"),!this.model.isEdit&&"cancelRequest"==e)return this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),!0;if("true"==n(i).find("input.e-dropdownlist").attr("aria-expanded")&&this.model.isEdit&&"saveRequest"==e)return!0;if(null!=this.getPager()&&(d=(a=this.getPager().ejPager("model")).currentPage),h=!1,(b=n(i)).closest(".e-grid").attr("Id")===this._id){switch(e){case"insertRecord":!t.gridFeatures.edit||this.model.isEdit||this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||this._toolbarOperation(this._id+"_add");break;case"toolbarOperationRequest":this._toolbarOperation(toolbarId),this.element.focus();break;case"searchRequest":this.search(b.val());break;case"excelfilter":u=this._id+this._excelFilter._$colType,this._excelFilter._openedFltr.hasClass("e-dlgcustom")&&(u+="Custom"),this._excelFilter._openedFltr.find("#"+u+"_OkBtn").trigger("click");break;case"saveRequest":t.gridFeatures.edit&&(b.blur(),"batch"==this.model.editSettings.editMode?(m=n(this.getRowByIndex(this._bulkEditCellDetails.rowIndex)),this.model.isEdit&&m.hasClass("e-insertedrow")&&this._batchCellValidation(this._bulkEditCellDetails.rowIndex),this._moveCurrentCell("down")):this._toolbarOperation(this._id+"_update"),l.stopPropagation());break;case"cancelRequest":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_cancel");break;case"deleteRecord":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_delete");break;case"editRecord":t.gridFeatures.edit&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&this._toolbarOperation(this._id+"_edit");break;case"totalGroupCollapse":t.gridFeatures.group&&(this.collapseAll(),this.element.focus());break;case"totalGroupExpand":t.gridFeatures.group&&(this.expandAll(),this.element.focus());break;case"selectedGroupExpand":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),c=this._$currentTr.parents("tr").first().prev().find(".e-recordpluscollapse"),this.expandCollapse(c));break;case"selectedGroupCollapse":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),c=this._$currentTr.parents("tr").first().prev().find(".e-recordplusexpand"),this.expandCollapse(c));break;case"firstRowSelection":t.gridFeatures.selection&&this.selectRows(0);break;case"lastRowSelection":t.gridFeatures.selection&&(f=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?n(this.getRows()[0]).length-1:n(this._excludeDetailRows()).length-1),this.selectRows(f);break;case"rowUpSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),(p=null!=this._traverseRow?this._traverseRow:this._selectedRow())>0&&(this._nextRow=p,this._prevRow=p-1,n(this.getContent().find("tr.e-traverse")[0]).removeClass("e-traverse"),this.getRowByIndex(this._prevRow).addClass("e-traverse"),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g));break;case"rowDownSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),((p=null!=this._traverseRow?this._traverseRow:this._selectedRow())+1<this.model.currentViewData.length||this.model.scrollSettings.allowVirtualScrolling)&&(this._prevRow=p,this._nextRow=p+1,n(this.getContent().find("tr.e-traverse")[0]).removeClass("e-traverse"),this.getRowByIndex(this._nextRow).addClass("e-traverse"),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g));break;case"randomSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),"multiple"==this.model.selectionType&&(this.multiSelectCtrlRequest=!0),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g),-1!=this._traverseRow&&(this.model.selectionSettings.enableToggle&&1==this.getSelectedRecords().length&&-1!=n.inArray(this._traverseRow,this.selectedRowsIndexes)?this.clearSelection(selectedIndex):this.selectRows(this._traverseRow)),this.getRowByIndex(p).removeClass("e-traverse"),this.multiSelectCtrlRequest=!1;break;case"upArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&b.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._selectedRow()>0&&!this.model.scrollSettings.enableVirtualization&&(this._enableCheckSelect||this.selectRows(this._selectedRow()-1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("up")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&0!=this._previousRowCellIndex[0][0]&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]-1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"downArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&b.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;-1==this._selectedRow()&&(this.model.selectedRowIndex=0),f=this._excludeDetailRows().length-1,this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(f=this.getRows()[0].length-1),this._selectedRow()==f||-1==this._selectedRow()||this.model.scrollSettings.enableVirtualization||(this._enableCheckSelect||this.selectRows(this._selectedRow()+1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&this._previousRowCellIndex[0][0]!=f&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]+1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"rightArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;f=n(this.getRows()).length-1,this._previousRowCellIndex&&this._previousRowCellIndex[0][1]==this.model.columns.length-1&&this._previousRowCellIndex[0][0]!=f?this.selectCells([[this._previousRowCellIndex[0][0]+1,[0]]]):this._previousRowCellIndex&&this._previousRowCellIndex[0][1]!=this.model.columns.length-1&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])+1]]])}break;case"leftArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._previousRowCellIndex&&0==this._previousRowCellIndex[0][1]&&0!=this._previousRowCellIndex[0][0]?this.selectCells([[this._previousRowCellIndex[0][0]-1,[this.model.columns.length-1]]]):this._previousRowCellIndex&&0!=this._previousRowCellIndex[0][1]&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])-1]]])}break;case"firstCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;(f=n(this.getRows()).length-1)>-1&&this.selectCells([[0,[0]]])}break;case"lastCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;(f=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?this.getRows()[0].length-1:n(this._excludeDetailRows()).length-1)>-1&&this.selectCells([[f,[this.model.columns.length-1]]])}break;case"nextPage":null!=this.getPager()&&(d+=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"previousPage":null!=this.getPager()&&(d-=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"lastPage":null!=this.getPager()&&(d=a.totalPages);break;case"firstPage":null!=this.getPager()&&(d=1);break;case"nextPager":null!=this.getPager()&&(d=Math.ceil(a.currentPage/a.pageCount)*a.pageCount+1);break;case"previousPager":null!=this.getPager()&&(d=(Math.floor(a.currentPage/a.pageCount)-1)*a.pageCount+1);break;case"moveCellLeft":"batch"==this.model.editSettings.editMode?(this._tabKey=!0,h=this._moveCurrentCell("left")):h=!0;break;case"moveCellRight":"batch"==this.model.editSettings.editMode&&b?(this._tabKey=!0,h=this._moveCurrentCell("right")):h=!0;break;case"multiSelectionByDownArrow":t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(f=this._excludeDetailRows().length-1,b=this.element.find(".e-gridcontent").find(".e-rowcell"),this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(f=this.getRows()[0].length-1),this._selectedRow()<=f&&-1!=this._selectedRow()&&(_=this._selectedRow()+1,v=this._previousIndex,this.selectRows(v,_,b),_-1==f&&(this.selectRows(v,f),_=f)),this._selectedRow(_),this._previousIndex=v),"batch"==this.model.editSettings.editMode&&this.element.focus();break;case"multiSelectionByUpArrow":t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(f=this._excludeDetailRows().length-1,b=this.element.find(".e-gridcontent").find(".e-rowcell"),this._selectedRow()>=0&&this._selectedRow()>=-1&&(_=this._selectedRow()-1,v=this._previousIndex,this.selectRows(v,_,b),_<0&&(this.selectRows(v,0),_=0)),this._selectedRow(_),this._previousIndex=v),"batch"==this.model.editSettings.editMode&&this.element.focus();break;default:h=!0}return null!=this.getPager()&&d<=a.totalPages&&a.currentPage!==d&&"searchRequest"!=e&&"deleteRecord"!==e&&this.getPager().ejPager("goToPage",d),h}},_findColumnsWidth:function(){for(var e=this.getHeaderTable().find(".e-headercell").not(".e-stackedHeaderCell, .e-detailheadercell"),t=0;t<this.model.columns.length;t++)this.model.columns[t].visible&&(this.columnsWidthCollection[t]=e.eq(t+0).outerWidth())},_calculateWidth:function(){for(var e=this.getHeaderTable().find(".e-columnheader").last().find("th:visible"),t=0,i=0;i<e.length;i++)t+=e.eq(i).outerWidth();return t},_initIndicators:function(){var e=this._id+"_ColumnDropIndicator";n("#"+e).length&&n("#"+e).remove(),this._Indicator=document.createElement("DIV"),n(this._Indicator).attr("id",e).addClass("e-columndropindicator").addClass("e-dropAcceptor").appendTo(document.body),n(this._Indicator).css({display:"none"})},_refreshGroupSummary:function(){var e,t,i=this.getHeaderContent().find("colgroup col").clone();for(i.splice(0,this.model.groupSettings.groupedColumns.length),e=this.getContentTable().find(".e-groupsummary colgroup"),t=0;t<e.length;t++)n(e[t]).find(".e-summary").is("visible")||n(e[t]).find(".e-summary").show(),n(e[t]).find("col:not('.e-summary')").remove(),n(e[t]).append(i.clone())},reorderColumns:function(e,t){var i,s;"string"==typeof e&&"string"==typeof t?(i=this.getColumnIndexByField(e),s=this.getColumnIndexByField(t)):(i=e,s=t),-1!=i&&-1!=s&&"string"!=typeof i&&"string"!=typeof s&&(this.set_dropColumn(i,s),this.model.showStackedHeader&&this._refreshStackedHeader(),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualDataRefresh=!0,this._queryCellView=[],this._virtualLoadedRows={},this._refreshVirtualView(this._currentVirtualIndex)):this._refreshVirtualContent()))},columns:function(e,s){var l,o,r,a,d;if(!t.isNullOrUndefined(e)){for(l=!1,"string"==typeof e?(e=[e],l=!0):e instanceof Array&&e.length&&"string"==typeof e[0]&&(l=!0),i=0;i<e.length;i++)o=l?e[i]:e[i].field,r=l?e[i]:e[i].headerText,a=!t.isNullOrUndefined(o)&&""!=o||!t.isNullOrUndefined(r)&&""!=r?t.isNullOrUndefined(o)||""==o?n.inArray(this.getColumnByHeaderText(r),this.model.columns):n.inArray(this.getColumnByField(o),this.model.columns):-1,"add"==s||t.isNullOrUndefined(s)?-1==a?this.model.columns.push(l?{field:e[i]}:e[i]):this.model.columns[a]=l?{field:e[i]}:e[i]:-1!=a&&this.model.columns.splice(a,1);for(this.columnsWidthCollection=[],tooltip=!1,d=0;d<this.model.columns.length;d++)this.columnsWidthCollection.push(this.model.columns[d].width),t.isNullOrUndefined(tooltip)||(tooltip=!0);this._enableRowHover(tooltip),this._refreshHeader(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.refreshContent(!0),this.model.allowScrolling&&(this.refreshScrollerEvent(),this.model.allowResizeToFit&&this.getContent().ejScroller("isVScroll")&&this._showHideScroller())}},_enableRowHover:function(e){var i,s=!0;if(t.isNullOrUndefined(e)){for(i=0;i<this.model.columns.length;i++)if(!t.isNullOrUndefined(this.model.columns[i].tooltip)){s=!0;break}}else s=e;this.model.enableRowHover||s?this._on(this.element,"mouseenter mouseleave",".e-gridcontent tr td",this._rowHover):this._off(this.element,"mouseenter mouseleave",".e-gridcontent tr td")},_rowHover:function(e){var i,s,l=n(e.target);if(i=this.model.scrollSettings.frozenColumns?n(this.getRows()):this.element.find(".e-row.e-hover,.e-alt_row.e-hover"),(!l.closest("#"+this._id+"EditForm").length||!l.hasClass("e-rowcell"))&&l.hasClass("e-rowcell"))return"mouseenter"==e.type&&l.hasClass("e-gridtooltip")&&this._showTooltip(l),this.model.enableRowHover&&(this.element.find(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,"mouseenter"!=e.type||this._dragActive?(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(i[0])&&!t.isNullOrUndefined(i[1])&&(i=n(i[0]).add(i[1])),i.removeClass("e-hover")):this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(i[0])&&!t.isNullOrUndefined(i[1])?((i=n(i[0]).add(i[1])).removeClass("e-hover"),-1!=(s=this.getIndexByRow(l.parent()))&&this.getRowByIndex(s).addClass("e-hover")):(i.removeClass("e-hover"),(l.parent().hasClass("e-row")||l.parent().hasClass("e-alt_row"))&&l.parent().addClass("e-hover"))),!1},_showTooltip:function(e,i){var s,l,o,r,a,d,h,c,u=e.index(),m=e.hasClass("e-stackedHeaderCell"),p={};if(e.hasClass("e-headercelldiv")&&(u=e.parent(".e-headercell").index()-this.model.groupSettings.groupedColumns.length),!m&&(this.model.childGrid||this.model.detailsTemplate)&&u--,this.model.scrollSettings.frozenColumns>0&&(e.closest(".e-movableheaderdiv").length||e.closest(".e-movablecontentdiv").length)&&(u+=this.model.scrollSettings.frozenColumns),(s=m?this._getStackedColumnByTarget(e):this.getColumnByIndex(u)).clipMode!=t.Grid.ClipMode.Ellipsis){if(s.clipMode==t.Grid.ClipMode.EllipsisWithTooltip&&(l=e,e.find("span").hasClass("e-tooltip")||($span=t.buildTag("span.e-tooltip",{},{}),$span.html(e.html()),l.append($span)),l.find("span.e-tooltip").css("display","inline-block"),o=l.find("span:first")[0].getBoundingClientRect().width,l.find("span.e-tooltip").remove(),e.width()>o))return void e.removeAttr("title");if(r=document.createElement("script"),t.isNullOrUndefined(s.tooltip)&&t.isNullOrUndefined(s.headerTooltip))return;r.id=(this._id+s.headerText+n.inArray(s,this.model.columns)+"_TemplateToolTip").split(" ").join(""),r.type="text/x-template",d=i?"headerTooltip":"tooltip",t.isNullOrUndefined(s[d])||"#"===s[d].slice(0,1)?a=n(s[d]):r.text=s[d],a&&(r.text=a.html(),r.type=a.attr("type")||r.type),n("body").append(r),h=e.closest("tr"),n(h).hasClass("e-columnheader")||(u=this.getIndexByRow(h),p=this.getCurrentViewData()[u]),p.value=e.text(),c=n(r).render(p),e.attr("title",c)}else e.removeAttr("title")},_rightClickHandler:function(e){var i,s,l;if(e.preventDefault(),i=t.browserInfo(),3==e.which||"msie"==i.name&&"8.0"==i.version){if(s={},$target=n(e.target),$gridRow=n(this.getRows()),this.getContentTable().has($target).length){var o=$gridRow.index($target.parent()),r=this.getRowByIndex(o),a=this._currentJsonData[o];if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(l=this._getSelectedViewData(o,$target)).data,o=l.rowIndex),-1==o)return;s={rowIndex:o,row:r,data:a,cellIndex:$target.index(),cellValue:$target.html(),cell:$target}}else if(this.getHeaderTable().has($target).length){if(o=0,$th=this.getHeaderTable().find("th").not(".e-detailheadercell,.e-grouptopleftcell,.e-filterbarcell"),-1==(o=$target.is(".e-headercelldiv")?$th.index($target.closest(".e-headercell")):$th.index($target)))return;s={headerIndex:o,headerText:this.getColumnFieldNames()[o],headerCell:$th.eq(o),column:this.getColumnByIndex(o)}}else($target.is(".e-pager")||null!=this.getPager()&&this.getPager().has($target).length)&&(s={pager:this.model.pageSettings});this._trigger("rightClick",s)}},_touchGrid:function(e){var t,i=this._currentPage(),s=!0;switch((this.model.allowScrolling||this.model.isResponsive&&0!=this.model.minWidth)&&(t=(this.getScrollObject()||{})._scrollXdata)&&(s="swipeleft"==e.type?t.scrollable-t.sTop==0:0==t.sTop),e.type){case"swipeleft":this.model.allowPaging&&i!=this.model.pageSettings.totalPages&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i+1);break;case"swiperight":this.model.allowPaging&&i>1&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i-1)}},_recorddblClickHandler:function(e){var t,i,s={},l=n(e.target).is(".e-rowcell")?n(e.target):n(e.target).closest("td");if(l.closest(".e-grid").attr("id")===this._id&&(l.is(".e-rowcell")||l.closest("td").is(".e-rowcell"))&&!(l.closest(".e-editcell,.e-editedbatchcell").length>0)){var o=this.getIndexByRow(l.closest("tr")),r=this.getRowByIndex(o),a=this._currentJsonData[o];this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(t=this._getSelectedViewData(o,l)).data,o=t.rowIndex),i=null!=this.model.detailsTemplate||null!=this.model.childGrid?l.index()-1:l.index(),s={rowIndex:o,row:r,data:a,cell:l,cellIndex:i,columnName:this.getColumnByIndex(i).headerText,cellValue:l.text()},this._trigger("recordDoubleClick",s)}},_invokeRecordClick:function(e,t){var i,s,l={},o=n(e.target).is(".e-rowcell")?n(e.target):n(e.target).closest("td");if(o.closest(".e-grid").attr("id")===t._id&&(o.is(".e-rowcell")||o.closest("td").is(".e-rowcell"))&&!(o.closest(".e-editcell,.e-editedbatchcell").length>0)){var r=t.getIndexByRow(o.closest("tr")),a=t.getRowByIndex(r),d=t._currentJsonData[r];t.model.scrollSettings.allowVirtualScrolling&&t.model.scrollSettings.enableVirtualization&&(d=(i=t._getSelectedViewData(r,o)).data,r=i.rowIndex),s=null!=t.model.detailsTemplate||null!=t.model.childGrid?o.index()-1:o.index(),l={rowIndex:r,row:a,data:d,cell:o,cellIndex:s,columnName:t.getColumnByIndex(s).headerText,cellValue:o.text()},t._trigger("recordClick",l)}},_recordClick:function(e){this._click++;var i=this,s=null;1==i._click?-1!==n.inArray("recordClick",this.model.serverEvents)&&-1!==n.inArray("recordDoubleClick",this.model.serverEvents)?s=setTimeout(function(){i._click=0,i._invokeRecordClick(e,i)},400):(i._click=0,t.isNullOrUndefined(s)||clearTimeout(s),i._invokeRecordClick(e,i)):2==i._click&&(t.isNullOrUndefined(s)||clearTimeout(s),i._click=0)},_headerMouseDown:function(e){if(n(e.target).hasClass("e-headercelldiv")&&!n(e.target).parent().hasClass("e-grouptopleftcell")||n(e.target).hasClass("e-headercell")){var t=n(e.target).hasClass("e-headercelldiv")?n(e.target).parent():n(e.target);this.model.enableHeaderHover&&t.removeClass("e-hover e-headercell-hover").addClass("e-headercellactive e-active")}if(this.model.allowResizing)return this._resizer._mouseDown(e)},_contentMouseDown:function(e){var i,s,l;n(e.target).closest("td").hasClass("e-selectionbackground")||n(e.target).closest("tr").length&&(i="touchstart"==e.type?e.originalEvent.touches[0].pageX:e.pageX,s="touchstart"==e.type?e.originalEvent.touches[0].pageY:e.pageY,this._dragDiv=t.buildTag("div.e-griddragarea","",{position:"absolute",width:"0px",height:"0px"}),this.getContent().append(this._dragDiv),(l=n(e.target).closest("tr.e-row")).length||(l=n(e.target).closest("tr.e-alt_row")),this._startIndex=l.length?this.getIndexByRow(l):null,this._on(n(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._on(this.element,"contextmenu",function(e){e.preventDefault()}),this._on(n(document),"touchend mouseup",this._mouseUpDragHandler),this._startDrag={_x:i,_y:s})},_mouseMoveDragHandler:function(e){var i,s,l,o;if(e.pageY!=this._startDrag._y){i="touchmove"==e.type?e.originalEvent.touches[0].pageX:e.pageX,s="touchmove"==e.type?e.originalEvent.touches[0].pageY:e.pageY,this._selectDrag=!0,this._dragDiv[0].offsetLeft,this._dragDiv[0].offsetTop;var r,a=this._startDrag._x,d=this._startDrag._y,h=i,c=s,u=s+2;a>h&&(r=h,h=a,a=r),d>c&&(r=c,c=d,d=r,u=s-2),this._dragDiv.height(),this._dragDiv.css({left:a,top:d,width:h-a,height:c-d}),(o=(l=n(document.elementFromPoint(i,u))).closest("tr.e-row")).length||(o=l.closest("tr.e-alt_row")),o.length&&(this._endIndex=this.getIndexByRow(o),t.isNullOrUndefined(this._startIndex)&&(this._startIndex=this._endIndex),this.selectRows(this._startIndex,this._endIndex))}},_mouseUpDragHandler:function(e){this._off(n(document),"touchend mouseup",this._mouseUpDragHandler),this._off(n(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._off(this.element,"contextmenu",function(e){e.preventDefault()}),e.stopPropagation(),this._selectDrag=!1,this._dragDiv.remove()},_headerHover:function(e){var t=n(e.target);"mouseover"==e.type||"mousemove"==e.type||"touchmove"==e.type||"MSPointerMove"==e.type?((this.model.allowResizing||this.model.allowResizeToFit)&&this._resizer._mouseHover(e),this.model.enableHeaderHover&&!this._dragActive&&(t.hasClass("e-headercelldiv")&&!t.parent().hasClass("e-grouptopleftcell")||t.hasClass("e-headercell"))&&(t.hasClass("e-headercelldiv")&&(t=t.parent()),this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover"),t.addClass("e-headercell-hover e-hover")),t.hasClass("e-gridtooltip")&&this._showTooltip(t),t.hasClass("e-headertooltip")&&this._showTooltip(t,!0),"mouseover"==e.type&&this._addCursor()):this.model.enableHeaderHover&&this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover")},_addCursor:function(){var e,i,s;if(this.model.allowResizing||this.model.allowResizeToFit||this.model.allowGrouping||this.model.allowFiltering||this.model.allowSorting||this.model.allowReordering||this.model.contextMenuSettings.enableContextMenu||this._allowcolumnSelection){if(this.getHeaderTable().find(".e-columnheader").removeClass("e-defaultcursor"),!this.model.contextMenuSettings.enableContextMenu&&"column"!=this.model.selectionSettings.selectionMode){for(e=[{val:this.model.allowSorting,str:"sort"},{val:this.model.allowGrouping,str:"group"},{val:this.model.allowReordering,str:"reorder"},{val:this.model.allowFiltering,str:"filter"}],i=0,s=0;s<e.length;s++)0==e[s].val&&(e.splice(s,1),s--);for(s=0;s<this.model.columns.length&&e.length>0;s++){for(j=0;j<e.length;j++)switch(e[j].str){case"sort":t.isNullOrUndefined(this.model.columns[s].allowSorting)||this.model.columns[s].allowSorting||i++;break;case"group":t.isNullOrUndefined(this.model.columns[s].allowGrouping)||this.model.columns[s].allowGrouping||i++;break;case"reorder":t.isNullOrUndefined(this.model.columns[s].allowReordering)||this.model.columns[s].allowReordering||i++;break;case"filter":t.isNullOrUndefined(this.model.columns[s].allowFiltering)||this.model.columns[s].allowFiltering||i++}isTempCol=!t.isNullOrUndefined(this.model.columns[s].template)||!t.isNullOrUndefined(this.model.columns[s].templateID),i!=e.length||isTempCol||this.getHeaderTable().find(".e-headercell").eq(s).addClass("e-defaultcursor"),i=0}}}else this.getHeaderTable().find(".e-columnheader").addClass("e-defaultcursor"),this.getHeaderTable().find(".e-headercell").removeClass("e-defaultcursor")},_colgroupRefresh:function(){var e,t,i,s;(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(e=n(this.getHeaderTable()).find("colgroup"),t=n(this.getContentTable()).find("colgroup")):(e=n(this.getHeaderTable()).find("colgroup")[0],t=n(this.getContentTable()).find("colgroup")[0]),i=n(e).clone(),s=n(t).clone(),n(t).remove(),n(e).remove(),(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(n(i[0]).prependTo(this.getHeaderTable()[0]),n(i[1]).prependTo(this.getHeaderTable()[1]),n(s[0]).prependTo(this.getContentTable()[0]),n(s[1]).prependTo(this.getContentTable()[1])):(n(i).prependTo(this.getHeaderTable()),n(s).prependTo(this.getContentTable()))},_detailColsRefresh:function(){this._$headerCols=this.getHeaderTable().children("colgroup").find("col"),this._$contentCols=this.getContentTable().children("colgroup").find("col");var e=this.model.columns.length;this._$headerCols.length>e&&this._$headerCols.splice(0,this._$headerCols.length-e),this._$contentCols.length>e&&this._$contentCols.splice(0,this._$contentCols.length-e)},_summaryColRrefresh:function(){for(var e=this.getFooterContent().find(".e-gridsummary"),t=0;t<this.columnsWidthCollection.length;t++)e.find("col").eq(t).width(this.columnsWidthCollection[t])},_headerdblClickHandler:function(e){this.model.allowResizeToFit&&this._resizer._columnResizeToFit(e),this.model.allowScrolling&&this.getScrollObject().refresh(this.model.scrollSettings.frozenColumns>0)},_mouseUp:function(e){this.model.allowResizing&&this._resizer._mouseUp(e)},_mouseMove:function(e){this.model.allowResizing&&this._resizer._mouseMove(e)},_setModel:function(e){var i,s,l,o,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y;for(i in e)switch(i){case"enableResponsiveRow":e[i]?(this.element.addClass("e-responsive"),this.model.minWidth&&(this._removeMedia(),this._scrollerAddedOnMedia=!1),this.model.allowFiltering&&(this.element.find(".e-filterDialoge").remove(),this._renderFilterDialogs(),this._renderResponsiveFilter(),this.element.find(".e-gridtoolbar").remove())):(this.model.allowFiltering&&(n("body").find(".e-filterDialoge").remove(),this._renderFilterDialogs()),"none"==this.element.css("display")&&this.element.css("display","block"),this.element.removeClass("e-responsive"),this.model.minWidth&&this._addMedia(),this.model.allowScrolling&&(this.getScrollObject().refresh(),this.getScrollObject().isVScroll()?this.getScrollObject().isVScroll()&&(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):(this.getHeaderContent().removeClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").removeClass("e-hscrollcss")))),this._tdsOffsetWidth=[],(this.model.allowFiltering||this.model.allowSorting)&&(-1!=(s=this.model.toolbarSettings.toolbarItems.indexOf("responsiveFilter"))&&this.model.toolbarSettings.toolbarItems.splice(s,1),-1!=(l=this.model.toolbarSettings.toolbarItems.indexOf("responsiveSorting"))&&this.model.toolbarSettings.toolbarItems.splice(l,1),this.element.find(".e-gridtoolbar").remove(),this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first()));break;case"showColumnChooser":e[i]?(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._renderGridHeaderInternalDesign(this.model.columns),this._renderColumnChooser()):(n("#"+this._id+"ccDiv").data("ejDialog").isOpened()&&n("#"+this._id+"_ccTail").remove(),o=this.element.find(".e-ccButton").outerHeight(),this.element.find(".e-ccButton").remove(),n("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-o));break;case"gridLines":this.getContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this.getHeaderContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this._showHeaderGridLines(),this._showGridLines();break;case"showDeleteConfirmDialog":this.model.editSettings.showDeleteConfirmDialog=e[i],e[i]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"showConfirmDialog":this.model.editSettings.showConfirmDialog=e[i],e[i]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"pageSettings":if(a=this.getPager().ejPager("model"),t.isNullOrUndefined(e[i].currentPage)||a.currentPage!=this._currentPage()){for(d in e[i])"currentPage"!=d&&e[i][d]===a[d]&&delete e[i][d];if(n.isEmptyObject(e[i]))break;e[i].currentPage=this._currentPage(),this.getPager().ejPager("option",e[i]),this._renderPagerTemplate(this.getPager(),e[i].showDefaults),this._currentPage(this._currentPage()>a.totalPages?a.totalPages:this._currentPage()),this.refreshContent()}break;case"columns":h=e.columns,this.model.columns=[],this.columns(h,"add");break;case"allowPaging":this.model.allowPaging=e[i],e[i]&&0==this.element.children(".e-pager").length?(this.element.append(this._renderGridPager()),this.refreshContent(),this.getPager().ejPager("refreshPager")):(this.getPager().remove(),this.setGridPager(null),this.refreshContent(),"filterbar"==this.model.filterSettings.filterType&&this.model.allowFiltering&&this._createPagerStatusBar());break;case"allowSearching":this.model.allowSearching=e[i];break;case"searchSettings":n.extend(this.model.searchSetings,e[i]),this.refreshContent();break;case"allowGrouping":e[i]&&0==this.element.children(".e-groupdroparea").length?(this.model.allowGrouping=e[i],this.addGroupingTemplate(),this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),this._enableGroupingEvents(),this._headerCellgDragDrop(),this._off(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)):this.element.children(".e-groupdroparea").remove(),this.model.allowGrouping&&(t.isNullOrUndefined(e.groupSettings)||n.extend(this.model.groupSettings,e.groupSettings),this._enableGrouping());break;case"groupSettings":n.extend(this.model.groupSettings,e[i]),this.model.allowGrouping&&t.isNullOrUndefined(e.allowGrouping)&&this._enableGrouping(),t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation);break;case"cssClass":this.element.removeClass(this.model.cssClass).addClass(e[i]);break;case"allowFiltering":case"filterSettings":if("filterSettings"==i?n.extend(this.model.filterSettings,e[i]):this.model.allowFiltering=e[i],this._$fDlgIsOpen&&this._closeFDialog(),this.model.allowFiltering){if(this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar)for(this.getHeaderTable().find(".e-filterbar").remove(),this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this._renderFiltering(),this._renderFilterBarTemplate(),this.model.filterSettings.showFilterBarStatus&&!this.model.allowPaging?this._createPagerStatusBar():this.model.allowPaging&&this.getPager().ejPager({enableExternalMessage:this.model.filterSettings.showFilterBarStatus}),c=this.getHeaderTable().find(".e-filterbar"),v=0;v<this.model.groupSettings.groupedColumns.length;v++)c.prepend(this._getEmptyFilterBarCell());else if(!u&&(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)){for(u=1,this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this.getHeaderTable().find(".e-filterbar").remove(),m=this.getHeaderTable().find(".e-columnheader").find(".e-headercell").not(".e-detailheadercell"),v=0;v<m.length;v++)p=m.eq(v).find(".e-headercelldiv").attr("ej-mappingname"),t.isNullOrUndefined(p)||(g=this.getColumnByField(p),!t.isNullOrUndefined(g)&&(t.isNullOrUndefined(g.allowFiltering)||g.allowFiltering)&&m.eq(v).addClass("e-headercellfilter").append(t.buildTag("div.e-filtericon e-icon e-filterset")));this.model.filterSettings.filterType==t.Grid.FilterType.Excel?(this._isExcelFilter=!0,this._renderExcelFilter()):this._isExcelFilter&&(this._isExcelFilter=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this._renderFilterDialogs(),this.model.filterSettings.filteredColumns=[],this.refreshContent()}this._enableFilterEvents()}else this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar?this.getHeaderTable().find(".e-filterbar").remove():(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)&&this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),(this._isExcelFilter||this._excelFilterRendered)&&(this._isExcelFilter=this._excelFilterRendered=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this.model.filterSettings.filteredColumns=[],this.refreshContent();this.model.isResponsive&&this.model.allowScrolling&&((f={}).requestType="filtering",this._refreshScroller(f));break;case"enableRowHover":this.model.enableRowHover=e[i],this._enableRowHover();break;case"allowScrolling":case"scrollSettings":if(S=this.getContent(),"allowScrolling"!=i){if(!t.util.isNullOrUndefined(e.scrollSettings)){if(n.isEmptyObject(e.scrollSettings))break;t.util.isNullOrUndefined(e.scrollSettings.enableVirtualization)||t.util.isNullOrUndefined(e.scrollSettings.allowVirtualScrolling)||(e.scrollSettings.allowVirtualScrolling=e.scrollSettings.enableVirtualization),n.extend(this.model.scrollSettings,e.scrollSettings)}this._initHeight=this.model.scrollSettings.height,this._isHeightResponsive="100%"==this.model.scrollSettings.height,this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this.model.currentIndex=1,this.model.scrollSettings.enableVirtualization?(this._virtualRowCount=Math.round(this.model.scrollSettings.height/this.getRowHeight())+1,this._refreshVirtualViewDetails(),this._refreshVirtualViewData()):(this._createPagerStatusBar(),this._showPagerInformation(this.model.pageSettings))),e.scrollSettings.frozenColumns!==r||e.scrollSettings.frozenRows!==r||e.scrollSettings.allowVirtualScrolling!==r||e.scrollSettings.virtualScrollMode!==r||e.scrollSettings.enableVirtualization!=r?((w=this.model).query=this.commonQuery.clone(),-1!=this._selectedRow()&&this.clearSelection(this._selectedRow()),e.scrollSettings.virtualScrollMode!=r&&(w.pageSettings.currentPage=1),this.element.ejGrid("destroy").ejGrid(w)):(t.util.isNullOrUndefined(e.allowScrolling)||(this.model.allowScrolling=e.allowScrolling),t.util.isNullOrUndefined(S.data("ejScroller"))||S.ejScroller("destroy"),this.model.allowScrolling?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this._originalScrollWidth=this.model.scrollSettings.width,this._renderScroller(),this.setWidthToColumns(),t.util.isNullOrUndefined(S.data("ejScroller"))||this.getScrollObject().refresh(),this.refreshScrollerEvent()):(this.element.children(".e-gridheader").removeClass("e-scrollcss"),0==this.element.get(0).style.width.length&&this.element.css("width","auto"),this.setWidthToColumns()),this._addLastRow())}break;case"currentIndex":this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(_=Math.ceil(e.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._refreshVirtualView(_),this._refreshVirtualViewScroller(!0)):this._scrollObject.option("scrollTop",e.currentIndex*this.getRowHeight());break;case"locale":this.model.locale=e[i],this.model.query=this.commonQuery.clone(),this._destroy(),this.element.css("margin-top","0px").addClass("e-grid"+this.model.cssClass),this._init();break;case"dataSource":for(S=this.element.find(".e-gridcontent").first(),n.isFunction(e.dataSource)||this.resetModelCollections(),1==this._gridRecordsCount&&!t.isNullOrUndefined(this._cDeleteData)&&-1==n.inArray(this._cDeleteData[0],this._dataSource())&&this.model.editSettings.allowDeleting&&(this._gridRecordsCount=this._dataSource().length),v=0;v<this.model.columns.length;v++)this.model.columns[v].template!==r&&(this._columntemplaterefresh=!0);this._refreshDataSource(this._dataSource()),this.element.children(".e-gridfooter").remove(),this.model.showSummary&&this.model.currentViewData.length>0&&this._renderGridFooter().insertAfter(S),this._gridRecordsCount&&this.model.allowFiltering&&(this._initColumns(this.model.currentViewData[0]!=r?this.model.currentViewData[0]:this.model.currentViewData.value),this._renderFilterDialogs()),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow();break;case"selectedRowIndex":-1!=this._selectedRow()&&-1==n.inArray(this._selectedRow(),this.selectedRowsIndexes)?(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())):-1==this._selectedRow()&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"selectedRowIndices":1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0?(this.model.selectedRowIndices=e[i],this._selectingMultipleRows(this.model.selectedRowIndices)):0==this._selectedMultipleRows().length&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"editType":-1!=this._selectedRow()&&-1==n.inArray(this._selectedRow(),this.selectedRowsIndexes)&&this.selectRows(this._selectedRow());break;case"editSettings":n.extend(this.model.editSettings,e[i]),this.refreshToolbar(),this.refreshContent(!0),this.refreshBatchEditMode(),this._tdsOffsetWidth=[],n("#"+this._id+"_dialogEdit").data("ejDialog")&&n("#"+this._id+"_dialogEdit").ejDialog("destroy"),n("#"+this._id+"_dialogEdit_wrapper,#"+this._id+"_dialogEdit").remove(),n("#"+this._id+"_externalEdit").remove(),this.getContentTable().find(".e-insertedrow").remove(),this.model.isEdit=!1,"normal"!=this.model.editSettings.editMode&&(this.model.editSettings.showAddNewRow=!1),this.model.editSettings.showAddNewRow||this.getContentTable().find(".e-addedrow").length&&this.cancelEdit(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),(this.model.editSettings.allowDeleting&&this.model.editSettings.showDeleteConfirmDialog||"batch"==this.model.editSettings.editMode&&this.model.editSettings.showConfirmDialog)&&t.isNullOrUndefined(this._confirmDialog)&&this._renderConfirmDialog(),this._enableEditingEvents(),this.refreshToolbar();break;case"allowResizing":this.model.allowResizing=e[i],this.model.allowResizing?(this._on(this.element,t.eventType.mouseMove,this._mouseMove),this._on(this.element,"mouseup",this._mouseUp),this._resizer=this._resizer||new t.gridFeatures.gridResize(this)):(this._off(this.element,t.eventType.mouseMove,this._mouseMove),this._off(this.element,"mouseup",this._mouseUp),this.model.allowResizeToFit||(this._resizer=null));break;case"allowResizeToFit":this.model.allowResizeToFit?(this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this._resizer=this._resizer||new t.gridFeatures.gridResize(this),this.setWidthToColumns()):(this._off(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing||(this._resizer=null));break;case"allowReordering":this.model.allowReordering=e[i],this.model.allowReordering&&this._headerCellreorderDragDrop();break;case"allowRowDragAndDrop":this.model.allowRowDragAndDrop?(this._rowsDragAndDrop(),"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown)):(this._off(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this.getContentTable().ejDroppable("destroy"),n(this.getRows()).ejDraggable("destroy"));break;case"showSummary":case"summaryRows":if("showSummary"==i&&e[i]&&this.addSummaryTemplate(),"showSummary"!=i||e[i]){if("summaryRows"==i&&this.model.showSummary||"showSummary"==i){this.element.children(".e-gridfooter").remove(),this.element.children(".e-gridfooter").remove();var S=this.element.find(".e-gridcontent").first(),x=this.model.query.queries,T=[];for(v=0;v<x.length;v++)"onPage"===x[v].fn&&(T=x.splice(v,1));b=this.model.query,this._setSummaryAggregate(b),T.length&&b.queries.push(T[0]),this.model.currentViewData.length&&(this._isLocalData?(this._remoteSummaryData=this._dataManager.executeLocal(b).aggregates,this._renderGridFooter().insertAfter(S)):(C=this,this._dataManager.executeQuery(b).done(function(e){C.element.children(".e-gridfooter").remove(),C._remoteSummaryData=e.aggregates,C._renderGridFooter().insertAfter(S)}))),this.model.allowGrouping&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0,this.refreshContent(!0))}}else this.element.children(".e-gridfooter").remove();break;case"enableAltRow":this.model.enableAltRow=e[i],this.addInitTemplate(),this.refreshContent();break;case"toolbarSettings":n.extend(this.model.toolbarSettings,e[i]),this.element.children(".e-gridtoolbar").remove(),this.model.toolbarSettings.showToolbar&&this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first());break;case"allowSorting":this.model.allowSorting=e[i],this.model.allowSorting||this.clearSorting();break;case"selectionSettings":n.extend(this.model.selectionSettings,e[i]),this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection();break;case"sortSettings":n.extend(this.model.sortSettings,e[i]),this.refreshContent();break;case"contextMenuSettings":n.extend(this.model.contextMenuSettings,e[i]),!t.isNullOrUndefined(n("#"+this._id+"_Context").data("ejMenu"))&&n("#"+this._id+"_Context").ejMenu("destroy")&&n("#"+this._id+"_Context").remove(),this.model.contextMenuSettings.enableContextMenu&&this._renderContext();break;case"enableRTL":this.model.enableRTL=e[i],(w=this.model).query=this.commonQuery.clone(),this.element.ejGrid("destroy"),w.enableRTL?n("#"+this._id).addClass("e-rtl"):n("#"+this._id).removeClass("e-rtl"),n("#"+this._id).ejGrid(w);break;case"enableTouch":this.model.enableTouch=e[i],this.model.enableTouch?(this._on(this.element,"swipeleft swiperight",".e-gridcontent .e-table",n.proxy(this._touchGrid,this)),this.element.removeClass("e-touch")):(this.element.addClass("e-touch"),this._off(this.element,"swipeleft swiperight",".e-gridcontent .e-table"));break;case"allowSelection":e[i]?(this._off(this.element,n.isFunction(n.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,"click",this._clickHandler),this._initSelection()):(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1);break;case"query":this.commonQuery=n.extend(!0,{},e[i]);break;case"showStackedHeader":case"stackedHeaderRows":this.model.showStackedHeader&&e.stackedHeaderRows&&e.stackedHeaderRows.length>0?(t.getObject("stackedHeaderRows.length",e)&&(this.model.stackedHeaderRows=e.stackedHeaderRows),this._refreshStackedHeader()):this.getHeaderTable().find(".e-stackedHeaderRow").remove();break;case"allowTextWrap":case"textWrapSettings":n.extend(this.model.textWrapSettings,e[i]),this._setTextWrap();break;case"rowTemplate":this.refreshContent(!0);break;case"detailsTemplate":this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?(this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels("FrozenNotSupportedException")),this._alertDialog.ejDialog("open")):((y=this.element.children(".e-gridheader")).find("div").first().empty().append(this._renderGridHeader().find("table")),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.setGridHeaderContent(y),this.refreshContent(!0),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.allowGrouping&&this._headerCellgDragDrop())}},resetModelCollections:function(){this.model.groupSettings.groupedColumns=[],this.model.filterSettings.filteredColumns=[],this.model.sortSettings.sortedColumns=[],this.model.pageSettings.currentPage=this.defaults.pageSettings.currentPage},_enableGrouping:function(){var e,i,s,l,o;if(this.refreshTemplate(),this.model.groupSettings.showToggleButton)for(e=0;e<this.model.columns.length;e++)i=this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").eq(e),s=this.model.columns[e].field,-1!=n.inArray(s,this._disabledGroupableColumns)||t.isNullOrUndefined(s)||""==s||i.find(".e-gridgroupbutton").length||(-1!=n.inArray(s,this.model.groupSettings.groupedColumns)?i.append(this._getToggleButton().addClass("e-toggleungroup")):i.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.groupSettings.showToggleButton||this.getHeaderTable().find(".e-gridgroupbutton").remove(),this.element.find(".e-groupdroparea").remove(),this.model.groupSettings.showDropArea&&(this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),t.gridFeatures.dragAndDrop&&(this._groupHeaderCelldrag(),this._headerCellgDragDrop())),!t.isNullOrUndefined(this.model.groupSettings.groupedColumns.length)&&this.model.groupSettings.groupedColumns.length){for((l={}).columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],l.requestType=t.Grid.Actions.Grouping,n(".e-grid").find(".e-groupdroparea").empty(),o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[o]);for(o=0;o<this.model.groupSettings.groupedColumns.length;o++)t.isNullOrUndefined(this.getsortColumnByField(this.model.groupSettings.groupedColumns[o]))&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[o],direction:t.sortOrder.Ascending});this._processBindings(l)}},addIgnoreOnExport:function(e){"string"==typeof e?this.ignoreOnExport.push(e):this.ignoreOnExport=this.ignoreOnExport.concat(e)},_decode:function(e){return n("<div/>").html(e).text()},_htmlEscape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},_mappingSelection:function(){var e,i;if(t.gridFeatures.selection&&this._enableCheckSelect){for(this.multiSelectCtrlRequest=!0,e=[],i=0;i<this._currentJsonData.length;i++)1==t.pvt.getObject(this._selectionMapColumn,this._currentJsonData[i])&&e.push(i);this.selectedRowsIndexes=[],this._selectedRow(-1),this._selectionByGrid=!0,e.length&&this.selectRows(e),this._selectionByGrid=!1}},_headerCheckUpdateAll:function(e){for(var i=[],s=(i=this._isLocalData?this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource():this._currentJsonData,0);s<i.length;s++)i[s][this._selectionMapColumn]=e,this.batchChanges.changed.push(i[s]);this.batchSave()},_getForeignKeyData:function(e){var s,n=this,l={};for(i=0;i<this.model.columns.length;i++)this.model.columns[i].foreignKeyValue&&this.model.columns[i].dataSource&&(s=t.isNullOrUndefined(n.model.columns[i].foreignKeyField)?n.model.columns[i].field:n.model.columns[i].foreignKeyField,(this.model.columns[i].dataSource instanceof t.DataManager?this.model.columns[i].foreignKeyData:this.model.columns[i].dataSource).filter(function(t){var o=e[n.model.columns[i].field],r=!isNaN(parseFloat(o))&&isFinite(o)?parseFloat(o):o;t[s]==r&&(l[s]=t)}));return l},_foreignKeyBinding:function(e,i,s){var l,o,r=n("#"+s).ejGrid("instance");return((e=r.model.columns[e]).dataSource instanceof t.DataManager?e.foreignKeyData:e.dataSource).filter(function(s){if(t.getObject(e.foreignKeyField,s)==i)return o=t.getObject(e.foreignKeyValue,s),l="date"==e.type?new Date(o):o}),e.format&&(l=r.formatting(e.format,l,r.model.locale)),l},_checkForeignKeyBinding:function(){if(this.model.columns.length){var e,i,s,n;for(e=0,s=(i=this.model.columns).length;e<s;e++)(n=i[e]).hasOwnProperty("foreignKeyField")&&n.dataSource instanceof t.DataManager&&this._relationalColumns.push({field:n.field,key:n.foreignKeyField,value:n.foreignKeyValue,dataSource:n.dataSource});this._$fkColumn=!0}},_setForeignKeyData:function(e){var i,s,l,o;if(this._relationalColumns.length){var a,d,h,c,u=this._relationalColumns,m=this._relationalColumns.length,p=[],g=this.model.currentViewData,f={},_=this;if(0==g.length)for(i=0,s=this.model.columns.length;i<s;i++)column=this.model.columns[i],!t.isNullOrUndefined(column.foreignKeyField)&&column.dataSource instanceof t.DataManager&&(column.foreignKeyData=[]);for(l=t.proxy(function(e){this._trigger("actionFailure",{requestType:"fetchingforeigndata",error:e.error})},this),this.element.ejWaitingPopup("model.showOnInit")||this.element.ejWaitingPopup("show"),o=0;o<m;o++)if(0 in g){if(a=u[o],f.field=a.field,f.keyField=a.key,f.valueField=a.value,f.dataSource=a.dataSource,f.query=(new t.Query).select([f.valueField,f.keyField]).foreignKey(f.keyField),h=t.distinct(g.level?g.records:g,f.keyField,!0),d=t.UrlAdaptor.prototype.getFiltersFrom(h,f.query),f.query.where(d),this._trigger("actionBegin",n.extend(f,{requestType:"fetchingforeigndata",column:this.getColumnByField(f.field)})))return;c=f.dataSource.ready===r?f.dataSource.executeQuery(f.query,null,l):f.dataSource.ready.fail(l),p.push(c)}n.when.apply(this,p).then(function(){var t,i,s,n,l,o;for(_.element.ejWaitingPopup("hide"),t=[].slice.call(arguments,0,arguments.length),s=0,n=p.length;s<n;s++)for(a=u[s],l=0,o=_.model.columns.length;l<o;l++)(i=_.model.columns[l]).foreignKeyField==a.key&&i.foreignKeyValue==a.value&&(i.foreignKeyData=t[s].result);_.initialRender?_._initGridRender():_.sendDataRenderingRequest(e)})}},_isRelationalRendering:function(e){return 0 in this._relationalColumns&&-1==["add","beginedit","cancel"].indexOf(e.requestType)}},function(e,t,s){t.gridFeatures=t.gridFeatures||{},Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),t.gridFeatures.edit={_processEditing:function(){var i,n,l,o,r,a,d,h,c,u=this._columnToSelect(),m=u.query,p=[],g=u.fields,f=[],_=this._relationalColumns,v=_.length;if(""!=this.model.query._fromTable&&m.from(this.model.query._fromTable),(n=g.length)&&f.push(this._dataManager.executeQuery(m)),0!=v)for(l=0;l<v;l++)obj=_[l],qry=(new t.Query).select([obj.key,obj.value]),i=obj.dataSource.ready===s?obj.dataSource.executeQuery(qry):obj.dataSource.ready,f.push(i);if(u.fieldsDrop.length)for(o=u.fieldsDrop.length,r=u.fieldsDrop,a=0;a<o;a++)d=[],h=this.getColumnByField(r[a]),t.isNullOrUndefined(t.getObject("editParams.fields.text",h))?p.push(r[a]):(c=h.editParams,p.push(c.fields)),p[a]instanceof Object?(d.push(p[a].text),d.push(p[a].value)):d.push(p[a]),m=(new t.Query).select(d),f.push(h.dataSource.executeQuery(m));0!=f.length?e.when.apply(this,f).then(t.proxy(function(){for(var e,i=[].slice.call(arguments,0,arguments.length),s=0,l=0,o=0,r=n,a=f.length;s<a;s++){for(;r>0;)t.createObject(g[--r],i[s].result,this._dropDownManager),e=!0;if(!e||0!=s){if(_.length!=l){obj=_[l],key=obj.key+"."+obj.value,t.createObject(key,i[s].result,this._dropDownManager),l++;continue}_.length==l&&p.length&&(p[o]instanceof Object?(t.createObject(p[o].text,i[s].result,this._dropDownManager),t.createObject(p[o].value,i[s].result,this._dropDownManager)):t.createObject(p[o],i[s].result,this._dropDownManager),o++)}}this._initiateTemplateRendering()},this)):this._initiateTemplateRendering()},_initiateTemplateRendering:function(){"normal"==this.model.editSettings.editMode?this.addEditingTemplate():"batch"==this.model.editSettings.editMode?this.addBatchEditTemplate():"dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode?this.addDialogEditingTemplate():this.addExternalDialogEditingTemplate(),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&this._startAdd()},addEditingTemplate:function(){var i,n,l,o,r,a,d,h;if(0!=this.model.columns.length){var c=t.buildTag("tbody"),u=t.buildTag("tr"),m=t.buildTag("td","",{},{colSpan:this.model.scrollSettings.frozenColumns>0?this.model.scrollSettings.frozenColumns:this.model.columns.length}),p=t.buildTag("form","",{},{id:this._id+"EditForm",class:"gridform"}),g=t.buildTag("table.e-table","",{},{cellspacing:.25}),f=t.buildTag("tbody"),_=t.buildTag("tr");for(c.append(u),u.append(m),m.append(p),i=e(document.createElement("colgroup")),p.append(g),g.append(i),f.append(_).appendTo(g),this.model.scrollSettings.frozenColumns>0&&(n=c.clone()).find("td").first().prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns),l=0;l<this.model.columns.length;l++)o=t.buildTag("td.e-rowcell"),_.append(o.get(0)),("checkbox"!=this.model.columns[l].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[l].commands)&&(!this.model.columns[l].template||this.model.columns[l].template&&0!=this.model.columns[l].allowEditing&&this.model.columns[l].field)?this._initCellEditType(l,o):this.model.columns[l].template?(d={},r=this.model.columns[l].headerText,d["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(d),t.isNullOrUndefined(r)||t.isNullOrUndefined(r.match(/[^0-9\s\w]/g))||(r=r.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+r+l+"_Template").remove(),a=this._createTemplateElement(this.model.columns[l]),o.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+a.id+"')}}")):this.model.columns[l].commands&&((d={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(d),e("#"+this._id+this.model.columns[l].headerText.replace(/[^a-z0-9|s_]/gi,"")+l+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[l],l),o.addClass("e-unboundcell").addClass("e-"+this.model.columns[l].headerText.replace(/[^a-z0-9|s_]/gi,"")+l).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&o.addClass("e-frozenunbound"),this._isUnboundColumn=!0),this.model.columns[l].textAlign!=s&&o.css("text-align",this.model.columns[l].textAlign),0==this.model.columns[l].allowEditing&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[l].isPrimaryKey&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[l].isIdentity&&(o.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[l].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),h=e(document.createElement("col")),this.model.columns[l].priority&&(o.addClass("e-table-priority-"+this.model.columns[l].priority),h.addClass("e-table-priority-"+this.model.columns[l].priority)),!1===this.model.columns[l].visible&&(h.css("display","none"),o.addClass("e-hide")),t.isNullOrUndefined(this.model.columns[l].cssClass)||o.addClass(this.model.columns[l].cssClass),!this.model.groupSettings.showGroupedColumn&&o.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[l].field+"'}}e-hide{{/if}}{{/for}}")&&h.css("display","none"),i.append(h),l==this.model.scrollSettings.frozenColumns-1&&(_=n.find("tr").last(),i=n.find("colgroup"),e.templates(this._id+"_JSONFrozenEditingTemplate",c.html()),c=n));e.templates(this._id+"_JSONEditingTemplate",c.html())}},addDialogEditingTemplate:function(){var i,n,l,o;if(0!=this.model.columns.length){var r,a,d,h,c,u=t.buildTag("div"),m=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),p=t.buildTag("table","",{},{cellspacing:"14px"});for(i=0;i<this.model.columns.length;i++)("checkbox"!=this.model.columns[i].type||this._isMapSelection)&&("dialog"==this.model.editSettings.editMode?(h="tr",c="td"):h=c="div",r=t.buildTag(h),a=t.buildTag(c,"",{"text-align":"right"}).addClass("e-label"),d=t.buildTag(c,"",{"text-align":"left"}).addClass("e-rowcell"),this.model.columns[i].priority&&"inlineform"==this.model.editSettings.editMode&&r.addClass("e-table-priority-"+this.model.columns[i].priority),r.append(a.get(0)).append(d.get(0)),this.model.columns[i].headerText==s&&(this.model.columns[i].headerText=this.model.columns[i].field),a.append("<label for='"+this.model.columns[i].field+"'>"+this.model.columns[i].headerText+"</label>"),t.isNullOrUndefined(this.model.columns[i].commands)&&(!this.model.columns[i].template||this.model.columns[i].template&&0!=this.model.columns[i].allowEditing&&this.model.columns[i].field)?this._initCellEditType(i,d):this.model.columns[i].template?(o={},n=this.model.columns[i].headerText,o["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(o),t.isNullOrUndefined(n)||t.isNullOrUndefined(n.match(/[^0-9\s\w]/g))||(n=n.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+n+i+"_Template").remove(),l=this._createTemplateElement(this.model.columns[i]),d.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+l.id+"')}}")):this.model.columns[i].commands&&((o={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(o),e("#"+this._id+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[i],i),d.addClass("e-unboundcell").addClass("e-"+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&d.addClass("e-frozenunbound"),this._isUnboundColumn=!0,r.addClass("e-hide")),0==this.model.columns[i].allowEditing&&d.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[i].isIdentity&&(d.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[i].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),!1===this.model.columns[i].visible&&r.addClass("e-hide"),t.isNullOrUndefined(this.model.columns[i].cssClass)||d.addClass(this.model.columns[i].cssClass),"dialog"==this.model.editSettings.editMode?(m.append(p),p.append(r)):m.append(r),m.appendTo(u),!0===this.model.columns[i].isPrimaryKey&&(d.find(".e-field").attr("disabled",!0).addClass("e-disable"),this._primaryKeys.push(e.trim(this.model.columns[i].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));"dialog"==this.model.editSettings.editMode&&m.append(p),u=this.renderDiaglogButton(m,u),e.templates(this._id+"_JSONDialogEditingTemplate",u.html())}},_editEventTrigger:function(e){if("save"==e.requestType||"delete"==e.requestType){var i={data:e.data,previousData:e.previousData,action:e.action!==s?e.action:e.requestType};t.isNullOrUndefined(e.foreignKeyData)||(i.foreignKeyData=e.foreignKeyData),this._trigger("end"+i.action.charAt(0).toUpperCase()+i.action.slice(1),i)}},_compiledDropDownTemplate:function(i,s,n,l){var o,r,a={_gridFormatting:this.formatting};return e.views.helpers(a),o=t.buildTag("select"),r=t.buildTag("option",null!=l?"{{:~_gridFormatting('"+l+"',"+s+",'"+this.model.locale+"')}}":"{{:"+s+"}}",{},{value:"{{:"+i+"}}"}),o.append(r),e.templates(o.html())},_initCellEditType:function(i,n){var l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C=this.model.columns[i].field;this.model.columns[i].foreignKeyValue&&(this.model.columns[i].editType="dropdownedit"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(-1!=(g=e.inArray(this.model.columns[i].field,this._dataSource().adaptor.value))&&(l=this._dataSource().adaptor.value[g],o=this._dataSource().adaptor.key[g])),this.model.columns[i].editTemplate&&(this.model.columns[i].editType="edittemplate"),t.isNullOrUndefined(this.model.columns[i].editType)&&(this.model.columns[i].editType="date"==this.model.columns[i].type||"datetime"==this.model.columns[i].type?this.model.columns[i].type+"picker":"stringedit"),this.model.isResponsive&&n.attr("data-cell",this._decode(this.model.columns[i].headerText));var w=(C||"").split("."),y=w.length-1,S="";for(t.isNullOrUndefined(C)||(C=C.replace(/[^a-z0-9\s_]/gi,""));y;)S+="(",y--;switch(this.model.columns[i].editType){case"edittemplate":"string"==typeof(r=this.model.columns[i].editTemplate.create)?(a=t.util.getObject(r,window),d=e.isFunction(a)?e(a()).attr({id:this._id+C,name:this.model.columns[i].field}):1==e(r).length&&"SCRIPT"==e(r).get(0).tagName?e(e(r).html()).attr({id:this._id+C,name:this.model.columns[i].field}):e(r).attr({id:this._id+C,name:this.model.columns[i].field})):d=e(r()).attr({id:this._id+C,name:this.model.columns[i].field}),n.append(d);break;case"stringedit":n.html(t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{html:"+S+"#data['"+w.join("'] || {})['")+"']}}",id:this._id+C,name:this.model.columns[i].field}));break;case"booleanedit":n.html('{{if #data["'+w.join('"]["')+'"]}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+C+" name="+this.model.columns[i].field+' checked="checkbox"></input>{{else}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+C+" name="+this.model.columns[i].field+" > {{/if}}"),"normal"==this.model.editSettings.editMode&&n.addClass("e-boolcell");break;case"numericedit":h=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:"+S+"#data['"+w.join("'] || {})['")+"']}}",id:this._id+C,name:this.model.columns[i].field}),n.append(h);break;case"datepicker":case"datetimepicker":c=t.buildTag("input.e-"+this.model.columns[i].editType+" e-field","",{},{type:"text",value:"{{:"+S+"#data['"+w.join("'] || {})['")+"']}}",id:this._id+C,name:this.model.columns[i].field}),n.append(c);break;case"dropdownedit":if(u=this.model.columns[i],m=[],t.isNullOrUndefined(u.dataSource)){if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l&&(data=this.model.dataSource.adaptor.foreignData[g],$foreignkeyfield=this.model.dataSource.adaptor.key[g],$foreignkeyvalue=this.model.dataSource.adaptor.value[g],m=data),x=u.field,t.isNullOrUndefined(t.getObject(x,this._dropDownManager)))return;if(k=0 in(p=t.getObject(x,this._dropDownManager))&&"object"==typeof p[0],D=D=t.dataUtil.mergeSort(t.distinct(p,k?x:s,!k&&s)),0==m.length)if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l)for(g=0;g<D.length;g++)m.push({text:D[g][0],value:D[g][1]});else for(g=0;g<D.length;g++)m.push({text:D[g],value:D[g]})}else if(t.isNullOrUndefined(u.foreignKeyField)&&u.dataSource instanceof t.DataManager){var x=u.field,T=t.getObject(x,this._dropDownManager),k=0 in T&&"object"==typeof T[0],D=D=t.dataUtil.mergeSort(t.distinct(T,k?x:s,!k&&s));if(t.isNullOrUndefined(t.getObject("editParams.fields.text",u))||(m=T),0==m.length)for(g=0;g<D.length;g++)m.push({text:D[g],value:D[g]})}else m=!t.isNullOrUndefined(u.foreignKeyField)&&u.field in this._dropDownManager?t.getObject(u.foreignKeyField+"."+u.foreignKeyValue,this._dropDownManager):u.dataSource;_=t.isNullOrUndefined(u.foreignKeyField)?u.field:u.foreignKeyField,u.foreignKeyValue?f=this._compiledDropDownTemplate(_,u.foreignKeyValue,u.type,u.format):this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l?f=this._compiledDropDownTemplate($foreignkeyfield||"value",$foreignkeyvalue||"text",u.type,u.format):(v=t.getObject("editParams.fields.value",u)||"value",b=t.getObject("editParams.fields.text",u)||"text",f=this._compiledDropDownTemplate(v,b,u.type,u.format)),n.get(0).innerHTML=!t.isNullOrUndefined(u.editParams)&&this._dataSource()instanceof t.DataManager&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l?"<input data-value='{{:"+o+"}}'/>":["<select>",f.render(m),"</select>"].join(""),n.find("select,input").prop({id:this._id+C,name:u.field}).addClass("e-field e-dropdownlist")}},addBatchEditTemplate:function(){if(0!=this.model.columns.length){for(var i,s=t.buildTag("div","",{display:"none"},{id:this._id+"_BulkEditTemplate"}),n=0,l=this.model.columns.length;n<l;n++)(t.isNullOrUndefined(this.model.columns[n].commands)&&t.isNullOrUndefined(this.model.columns[n].template)||this.model.columns[n].template&&0!=this.model.columns[n].allowEditing&&this.model.columns[n].field)&&(i=t.buildTag("div","",{},{id:this.model.columns[n].field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit"}),this._initCellEditType(n,i),s.append(i)),!0===this.model.columns[n].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[n].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),!0===this.model.columns[n].isIdentity&&(i.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[n].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort()));s.children().length&&(this._bulkEditTemplate=s)}},addExternalDialogEditingTemplate:function(){var i,s,n,l,o;if(0!=this.model.columns.length){for(i=t.buildTag("td","",{"text-align":"left"}).addClass("e-rowcell"),s=0;s<this.model.columns.length;s++)("checkbox"!=this.model.columns[s].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[s].commands)&&!t.isNullOrUndefined(this.model.columns[s].template)&&0!=this.model.columns[s].allowEditing&&this.model.columns[s].field&&!t.isNullOrUndefined(this.model.columns[s].editTemplate)&&this._initCellEditType(s,i),!0===this.model.columns[s].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[s].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));n=t.buildTag("div","",{display:"none"}),l=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),"dialogtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.dialogEditorTemplateID?o=this.model.editSettings.dialogEditorTemplateID:"externalformtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.externalFormTemplateID?(o=this.model.editSettings.externalFormTemplateID,l.addClass("e-display")):(o=this.model.editSettings.inlineFormTemplateID,l.addClass("e-display")),l.html(e(o).html()),n=this.renderDiaglogButton(l,n),e.templates(this._id+"_JSONdialogTemplateMode",n.html())}},_editdblClickHandler:function(t){var i=e(t.target);i.closest(".e-grid").attr("id")===this._id&&(i.hasClass("e-rowcell")||i.closest("td").hasClass("e-rowcell"))&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&(this._$currentTr=this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?this.getRowByIndex(i.closest("tr").index()):i.closest("tr"),this.startEdit(this._$currentTr))},_columnToSelect:function(){for(var i=[],s=[],n=this.model.columns,l=0;l<this.model.columns.length;l++)this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=e.inArray(this.model.columns[l].field,this._dataSource().adaptor.value)&&t.isNullOrUndefined(this.model.columns[l].editType)&&(this.model.columns[l].editType="dropdownedit"),this.model.columns[l].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(this.model.columns[l].dataSource)&&i.push(this.model.columns[l].field),n[l].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(n[l].foreignKeyField)&&n[l].dataSource instanceof t.DataManager&&s.push(this.model.columns[l].field);return i.length?{query:t.Query().select(i),fields:i,fieldsDrop:s}:{query:t.Query(),fields:[],fieldsDrop:s}},_renderExternalForm:function(){var e=t.buildTag("div","",{display:"none"},{id:this._id+"_externalEdit",class:"e-form-container"}),i=t.buildTag("div","","",{id:this._id+"_eFormHeader",class:"e-form-titlebar"}),s=t.buildTag("span","","",{class:"e-form-title"}),n=t.buildTag("div","","",{id:this._id+"_eFormToggleBtn",class:"e-form-togglebtn"}),l=t.buildTag("span","","",{class:"e-form-toggle-icon e-icon"});n.append(l),i.append(s).append(n);var o=t.buildTag("div","","",{id:this._id+"_eFormContent",class:"e-form-content"}),r=t.buildTag("div","","",{id:this._id+"_externalForm",class:"e-externalform"}),a=t.buildTag("div","","",{class:"e-externalformedit"});return r.append(a),o.append(r),e.append(i).append(o)},_buttonClick:function(t){if("close"==t.type){if(!this.model.isEdit)return;return this.model.isEdit=!1,this.element.ejGrid("cancelEdit"),void this.refreshToolbar()}if(t.keyCode!==s&&13!=t.keyCode||null==this.model)return!0;"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?t.target.id=="EditDialog_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="EditDialog_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_dialogEdit").ejDialog("close")):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?e(t.target).hasClass("e-form-toggle-icon")?(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):t.target.id=="EditExternalForm_"+this._id+"_Save"?this.element.ejGrid("endEdit").length!==s&&e("#"+this._id+"_externalEdit").css("display","none"):t.target.id=="EditExternalForm_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?t.target.id=="InlineEditForm_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="InlineEditForm_"+this._id+"_Cancel"&&this.element.ejGrid("cancelEdit"):this.element.ejGrid("cancelEdit")},_enableEditingEvents:function(){this.model.editSettings.allowEditing||this.model.editSettings.allowAdding?(this.model.editSettings.allowEditing&&"batch"!=this.model.editSettings.editMode&&this.model.editSettings.allowEditOnDblClick?this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent",this._editdblClickHandler):(this._off(this.element,"dblclick",".e-gridcontent"),this._off(this.element,"doubletap",".e-gridcontent")),this._off(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this._on(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel",this._buttonClick):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?(this._on(e("#"+this._id+"_externalEdit"),"click ","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel",this._buttonClick),e(this.element).on("click",".e-form-toggle-icon",e.proxy(this._buttonClick,this))):"batch"==this.model.editSettings.editMode?(this._on(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!0):"inlineform"!=this.model.editSettings.editMode&&"inlineformtemplate"!=this.model.editSettings.editMode||e(this.element).on("click ","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel",e.proxy(this._buttonClick,this)),"batch"!=this.model.editSettings.editMode&&this._batchEnabled&&(this._off(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!1)):(this._off(e("#"+this._id+"_dialogEdit"),"click","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),e(this.element).off("click",".e-icon"),this._off(e("#"+this._id+"_externalEdit"),"click","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel"),e(this.element).off("click",".e-form-toggle-icon"),e(this.element).off("click","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel"))},_multiRowDelete:function(){var e,i,s={};if(s.added=[],s.deleted=[],s.changed=[],s.deleted=this.getSelectedRecords(),(e={}).data=this.getSelectedRecords(),e.tr=this.getSelectedRows(),i=this._getForeignKeyData(e.data),t.isNullOrUndefined(i)||(e.foreignKeyData=i),e.requestType="delete",this._trigger("actionBegin",e))return!0;this._sendBulkReuqest(s,e)},deleteRow:function(i){var n,l,o,r,a,d,h;if(this.model.editSettings.allowDeleting&&(!this.model.isEdit||"batch"==this.model.editSettings.editMode||this.model.editSettings.showAddNewRow)){if(this.model.editSettings.showDeleteConfirmDialog&&!this._confirmDialog.is(":visible"))return this._cDeleteData=i,void this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open");if(e.isArray(i))this.selectRows(i),this._multiRowDelete();else if("batch"==this.model.editSettings.editMode)this._bulkDelete(this.getIndexByRow(i));else{if(0==this._primaryKeys.length&&!this.model.editSettings.allowEditing&&!this.model.editSettings.allowAdding)for(o=0;o<this.model.columns.length;o++)!0===this.model.columns[o].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[o].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort()));if(-1==this._selectedRow()&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.DeleteOperationAlert);for(t.isNullOrUndefined(i)&&(i=this.model.scrollSettings.enableVirtualization?this.getContentTable().find("tr[aria-selected='true']"):this.getRowByIndex(this._selectedRow())),this._primaryKeyValues=[],this._getPrimaryKeyValues(i),n=t.DataManager(this._currentJsonData),l=new t.Query,o=0;o<this._primaryKeys.length;o++)l=l.where(this._primaryKeys[o],t.FilterOperators.equal,this._primaryKeyValues[o]);if(currentData=n.executeLocal(l),(r={}).tr=i,r.data=currentData[0],a=this._getForeignKeyData(r.data),t.isNullOrUndefined(a)||(r.foreignKeyData=a),r.requestType=t.Grid.Actions.Delete,this._trigger("actionBegin",r))return!0;this._cDeleteData=currentData,(!t.isOnWebForms||!this.model.serverEvents||-1==this.model.serverEvents.indexOf("endDelete"))&&this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor?(d=this._dataManager.remove(this._primaryKeys[0],currentData[0][this._primaryKeys[0]],this.model.query),h=this,e.isFunction(d.promise)?(d.done(function(){h._processBindings(r),h._primaryKeyValues=[],h._cDeleteData=null}),d.fail(function(e){r.error=e,h._trigger("actionFailure",r)})):this._processBindings(r)):this._processBindings(r),d!=s&&e.isFunction(d.promise)||(this._primaryKeyValues=[],this._cDeleteData=null)}}},_htmlEncode:function(e){return str=e,t.isNullOrUndefined(str)||(str=isNaN(str)?str.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):str),str},startEdit:function(i){if(this.model.editSettings.allowEditing&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||!this._excludeDetailRows().hasClass("e-editedrow"))&&!this.element.ejWaitingPopup("model.showOnInit")){if(-1==this._selectedRow()&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.EditOperationAlert);if(this.model.scrollSettings.enableVirtualization&&t.isNullOrUndefined(i)&&(i=this.getContentTable().find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(this._currentTrIndex=this._selectedRow(),this._$currentTr=this.getRowByIndex(this._currentTrIndex)):(this._currentTrIndex=this.getIndexByRow(i),this._$currentTr=i),!e(this._$currentTr).is(":visible"))return!1;this._primaryKeyValues=[],this._getPrimaryKeyValues(this._$currentTr);var s=this._currentJsonData[this._currentTrIndex],n={row:this._$currentTr,rowIndex:this._currentTrIndex,primaryKey:this._primaryKeys,primaryKeyValue:this._primaryKeyValues,rowData:s};if(this._trigger("beginEdit",n))return void(this._primaryKeyValues=[]);n.requestType=t.Grid.Actions.BeginEdit,this._processBindings(n)}},_getPrimaryKeyValues:function(i){var s,n,l,o,r,a,d=i.attr("name"),h=!1;for(this._lastVirtualPage=null,a=0;a<this._primaryKeys.length;a++)l=this.getColumnByField(this._primaryKeys[a]),s=this.getIndexByRow(i),n=this._currentJsonData,this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(s%=this._virtualRowCount,o=parseInt(d,32)):(s%=this.model.pageSettings.pageSize,o=parseFloat(d)/this.model.pageSettings.pageSize+1,this._currentJsonData=this._virtualLoadedRecords[o],o!=this.model.pageSettings.totalPages||this._prevPageRendered||this._virtualLoadedRecords[o].length==this.model.pageSettings.pageSize||(n=e.extend(!0,[],this._previousPageRecords),r=e.extend(!0,[],this._virtualLoadedRecords[o]),t.merge(n,r),this._lastVirtualPage=this._currentJsonData=e.extend(!0,[],n),h=!0)),n=h?n:this._virtualLoadedRecords[o],this._vCurrentTrIndex=s,this._currentVIndex=o),this._primaryKeyValues.push(this._htmlEncode(n[s][l.field]))},_startAdd:function(){var i,s,n,l,o,r,a,d,h;if(this.model.editSettings.allowAdding)if(this._isAddNew=!0,"batch"==this.model.editSettings.editMode)this._bulkAddRow();else{for(i={},s=this.model.columns,o=0;o<s.length;o++)t.isNullOrUndefined(this.model.parentDetails)||s[o].field!=this.model.parentDetails.parentKeyField||(s[o].defaultValue=this.model.parentDetails.parentKeyFieldValue),!t.isNullOrUndefined(s[o].field)&&s[o].field.indexOf(".")>0?t.createObject(s[o].field,s[o].defaultValue||"",i):i[s[o].field]=t.isNullOrUndefined(s[o].defaultValue)?"date"==s[o].type||"datetime"==s[o].type?null:"":s[o].defaultValue;if(l={},(n={}).data=i,-1!=this.model.editSettings.editMode.indexOf("template"))for(o=0;o<this.model.columns.length;o++)t.isNullOrUndefined(this.model.columns[o].field)||-1==this.model.columns[o].field.indexOf(".")||(r=this.model.columns[o].field.split("."),t.createObject(this.model.columns[o].field,n.data[this.model.columns[o].field],l),n.data[r[0]]=l,delete n.data[this.model.columns[o].field]);a=this._getForeignKeyData(n.data),t.isNullOrUndefined(a)||(n.foreignKeyData=a),n.requestType="add",this.clearSelection(),this.model.scrollSettings.allowVirtualScrolling&&(this._currentVIndex=null,this._lastVirtualPage=null,this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(1):this._virtualLoadedRecords[1]?this._currentPage(1):this.gotoPage(1),this.getScrollObject().scrollY(0)),this._processBindings(n)||(this.model.editSettings.showAddNewRow?this._selectedRow(-1):this._selectedRow(0)),(d=this.model.groupSettings.groupedColumns.length)>1&&(h=this.getContentTable().find(".e-addedrow").find("table").find("colgroup").children(),e(h.slice(0,d-1)).css("width",this.getHeaderTable().find("colgroup").children()[0].style.width))}},endEdit:function(){var i,n,l,o,r,a,d,h,c,u,m,p,g;if(this.model.isEdit){if(o=0,!this.editFormValidate())return!0;if(r={},"batch"==this.model.editSettings.editMode)this.saveCell();else{for(this.model.editSettings.showAddNewRow&&(l=this.getContentTable().find(".e-editedrow")),i=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(l)||1!=l.length?document.getElementById(this._id+"EditForm"):l[0].lastChild.lastChild,n=e(i),(a="normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?n.closest("tr"):n.closest("div")).find("td.e-rowcell").removeClass("e-validError"),i=this.model.scrollSettings.frozenColumns>0?i[0]:i,d=0;d<i.length;d++)if(!a.hasClass("e-addedrow")||!e(i[d]).hasClass("e-identity")){var f=i[d].name,_=e(i[d]),v=this.getColumnByField(f);if(!_.hasClass("e-dropdownlist e-input")||-1==_.attr("id").indexOf("_input")||!t.isNullOrUndefined(n[1])){if(f!=s&&((""==f||t.isNullOrUndefined(v))&&(f=-1!=i[d].id.indexOf("Save")||-1!=i[d].id.indexOf("Cancel")?"":i[d].id.replace(this._id,"")),""!=f&&null==r[f])){v=this.getColumnByField(f);var b=i[d].value,C=i[d].type,w=e(i[d]).is(":checked"),y=v?v.originalType:null;if(t.isNullOrUndefined(v)||"edittemplate"!=v.editType)e(i[d]).hasClass("e-datepicker")?b=_.ejDatePicker("model.value"):e(i[d]).hasClass("e-datetimepicker")?b=_.ejDateTimePicker("model.value"):_.is(".e-numerictextbox")?(b=_.ejNumericTextbox("getValue"),"string"!=v.type||t.isNullOrUndefined(b)||(b=b.toString())):_.data("ejDropDownList")&&(b=_.ejDropDownList("getSelectedValue"),t.isNullOrUndefined(v)||t.isNullOrUndefined(v.format)||"date"!=v.type&&"datetime"!=v.type||(b=b.length>0?new Date(b):b));else{if(!e(i[d]).is("#"+this._id+f))continue;h=v.editTemplate.read,_=e(i[d]),"string"==typeof h&&(h=t.util.getObject(h,window)),b=h(_)}y&&(b="number"==y?+b:"boolean"==y?b===this.localizedLabels.True:"date"===y?new Date(b):b),null==v?b=!isNaN(parseFloat(b))&&isFinite(b)?parseFloat(b):b:"number"==v.type&&!t.isNullOrUndefined(b)&&b.length&&(b=t.parseFloat(b,this.model.locale)),"string"!=typeof b||b.length||(b=null),("checkbox"!=C&&!t.isNullOrUndefined(b)&&""!==b||w)&&o++,c="checkbox"!=C?b:w,-1!=f.indexOf(".")?t.createObject(f,c,r):r[f]=c}d==i.length-1&&n.length>1&&0==n.index(i)&&(i=n[1],d=-1)}}if(u={data:r},m=this._getForeignKeyData(u.data),t.isNullOrUndefined(m)||(u.foreignKeyData=m),u.requestType=t.Grid.Actions.Save,u.selectedRow=this._selectedRow(),u.previousData=jQuery.extend({},this.model.currentViewData[u.selectedRow]),this._trigger("actionBegin",u))return!0;if(a.hasClass("e-editedrow")?(this._cModifiedData=r,u.action="edit"):a.hasClass("e-addedrow")&&(o&&(this._cAddedRecord=r),u.action="add"),"add"==u.action&&this.editFormValidate()&&!o)return elements=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm"),p=t.buildTag("div"),g=elements.find("input:visible").not(".e-identity").first(),this._renderValidator(p,g),$errorMessage=t.buildTag("div.e-field-validation-error",this.localizedLabels.EmptyRowValidationMessage),$tail=e(p).find(".e-errortail"),$errorMessage.insertAfter($tail),$errorMessage.css("display","block"),!1;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this._updateAction(u)}}},_updateAction:function(i){var n,l;this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor?"batch"==this.model.editSettings.editMode?(this.batchChanges.added.push(i.data),this.batchSave()):(t.isNullOrUndefined(this._cModifiedData)||t.isOnWebForms&&this.model.serverEvents&&-1!=this.model.serverEvents.indexOf("endEdit")?t.isOnWebForms&&this.model.serverEvents&&-1!=this.model.serverEvents.indexOf("endAdd")||(n=this._dataManager.insert(i.data,this.model.query)):n=this._dataManager.update(this._primaryKeys[0],i.data,this.model.query),l=this,this.element.ejWaitingPopup("show"),n&&e.isFunction(n.promise)?(n.done(function(s){l.model.isEdit=!1,!t.isNullOrUndefined(s)&&e.isPlainObject(s.record)&&(e.extend(i.data,s.record),"add"==i.action&&(l._cAddedRecord=i.data),"edit"==i.action&&(l._cModifiedData=i.data)),l._processBindings(i),l._isRemoteSaveAdaptor&&(l.element.ejWaitingPopup("hide"),t.isNullOrUndefined(l._unboundRow)||i.selectedRow==l._unboundRow||"save"!=i.requestType||(l._unboundRow.find(".e-editbutton").trigger("click"),l._unboundRow=null)),l._cModifiedData=null,l._cAddedRecord=null,l._primaryKeyValues=[]}),n.fail(function(e){i.error=e&&e.error?e.error:e,l._cModifiedData=null,l._cAddedRecord=null,l.element.ejWaitingPopup("hide"),l._trigger("actionFailure",i)})):(l.model.isEdit=!1,l._processBindings(i))):this._processBindings(i),n!=s&&e.isFunction(n.promise)||(this._cModifiedData=null,this._cAddedRecord=null,this._primaryKeyValues=[])},cancelEdit:function(){var i={};i.requestType=t.Grid.Actions.Cancel,this._cModifiedData=null,this._processBindings(i),this._primaryKeyValues=[],this._currentData=null,("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")},refreshToolbar:function(){var t,i,s=e("#"+this._id+"_toolbarItems"),n=s.find("li");if(s.ejToolbar("enableItem",n),t=this.getContentTable().find(".e-editedrow"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length)this._disabledToolItems.push(n.filter("[id="+this._id+"_add]"));else for(i=0;i<n.length;i++)switch(n[i].id){case this._id+"_add":case this._id+"_edit":case this._id+"_delete":case this._id+"_responsiveFilter":case this._id+"_responsiveSorting":case this._id+"_search":this.model.isEdit?this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length||(e(n[i]).hasClass("e-hover")&&e(n[i]).removeClass("e-hover"),this._disabledToolItems.push(n[i])):(this.model.enableToolbarItems||this.model.editSettings.allowAdding||n[i].id!=this._id+"_add")&&(this.model.enableToolbarItems||this.model.editSettings.allowEditing||n[i].id!=this._id+"_edit")&&(this.model.enableToolbarItems||this.model.editSettings.allowDeleting||n[i].id!=this._id+"_delete")||this._disabledToolItems.push(n[i]);break;case this._id+"_update":case this._id+"_cancel":this.model.isEdit||(e(n[i]).hasClass("e-hover")&&e(n[i]).removeClass("e-hover"),this._disabledToolItems.push(n[i]))}s.ejToolbar("disableItem",this._disabledToolItems),s.ejToolbar("model.enableRTL",this.model.enableRTL),this._disabledToolItems=e()},_getHiddenCount:function(e){for(var t=0,i=0;i<e.length;i++)e.eq(i).hasClass("e-hide")&&t++;return t},_refreshTemplateCell:function(t,i){for(var s,n=t.find(".e-templatecell"),l=0;l<n.length;l++)s={cell:n[l],data:i,column:this.model.columns[e(n[l]).index()],rowIndex:t.index()},this._trigger("templateRefresh",s)},_edit:function(i){var s,n,l,o,r,a,d,h,c=this.model.scrollSettings.enableVirtualization?t.DataManager(this._virtualLoadedRecords[this._currentVIndex]):t.DataManager(this._currentJsonData),u=new t.Query;for(this.model.allowFiltering&&(this._previousFilterCount=this._filteredRecordsCount),n=0;n<this._primaryKeys.length;n++)u=u.where(this._primaryKeys[n],t.FilterOperators.equal,this._primaryKeyValues[n]);this._currentData=c.executeLocal(u);var m=document.createElement("div"),p=t.isNullOrUndefined(this.model.editSettings.titleColumn)?this._primaryKeys[0]:this.model.editSettings.titleColumn,g=e(m);if("normal"==this.model.editSettings.editMode){m.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("");var f=g.find("tr").first(),_=0,v=this.model.columns.length,b=i.row.first();this.model.scrollSettings.frozenColumns>0&&(g.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),f.splice(0,0,g.find("table").first().find("tr").first().get(0)),$currentTrLa=i.row.last(),$tempLastTR=f.last()),s=g.find("tr").first(),g.find("td").not(".e-rowcell").addClass("e-editcell e-normaledit"),this._setEditDropdownValue(g),this.model.groupSettings.groupedColumns.length>=2&&(l=i.row.find("td.e-indentcell"),g.find("tr").first().prepend(l)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(_++,g.find(".e-editcell").find("tr").prepend(i.row.find("[class*=e-detailrow]").eq(0).removeClass("e-selectionbackground e-active")),"both"!=this.model.gridLines&&g.find(".e-editcell .e-rowcell:first").addClass("e-detailrowvisible")),this.model.scrollSettings.frozenColumns>0&&(g.find(".e-editcell").get(1).colSpan=this.model.columns.length-this.model.scrollSettings.frozenColumns-i.row.last().find(".e-hide").length+_,v=this.model.scrollSettings.frozenColumns,$currentTrLa.hasClass("e-alt_row")&&$tempLastTR.addClass("e-alt_row")),g.find(".e-editcell").get(0).colSpan=v-b.find("td").not(":visible").length+_,b.hasClass("e-alt_row")&&s.addClass("e-alt_row"),b.empty().replaceWith(s.addClass("e-editedrow")),i.row=s,s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0&&($currentTrLa.empty().replaceWith($tempLastTR.addClass("e-editedrow")),i.row=$tempLastTR),this._refreshUnboundTemplate(f.find(".gridform")),this._gridRows=0==this.model.scrollSettings.frozenColumns?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row, tr.e-editedrow").toArray():e(this.getContentTable().get(0).rows).toArray(),this.model.scrollSettings.frozenColumns>0&&(this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop,!0),this._gridRows=[this._gridRows,e(this.getContentTable().get(1).rows).toArray()])}else"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(o=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,_=0,m.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(g),r=t.buildTag("tr"),a=t.buildTag("td"),r.addClass("e-editedrow"),a.addClass("e-inlineformedit"),m=e(m).clone(!0).children(),a.html(m),r.append(a),r.is(":last-child")||r.find(".e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0?((d=r.clone()).find("td").empty().prop("colspan",this.model.scrollSettings.frozenColumns),i.row.eq(1).after(r).end().eq(0).after(d),this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]):i.row.after(r),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr").toArray(),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&_++,this.model.scrollSettings.frozenColumns>0?a.prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-r.find("form").children().not(":visible").length-o+_):a.prop("colspan",this.model.columns.length-this._hiddenColumns.length-o+_),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),i.row.find("input").attr("disabled","disabled").addClass("e-disable")):(g.addClass("e-editedrow"),m.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(g),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(m)),(h={}).cssClass=this.model.cssClass,h.enableRTL=this.model.enableRTL,h.width="auto",h.enableResize=this.phoneMode,h.close=e.proxy(this._buttonClick,this),h.content="#"+this._id,h.enableModal=!0,h.allowKeyboardNavigation=!1,h.title=this.localizedLabels.EditFormTitle+this._currentData[0][p],e("#"+this._id+"_dialogEdit").ejDialog(h),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(m)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),this._externalFormPosition(),i.row.find("input").attr("disabled","disabled").addClass("e-disable")));"normal"!=this.model.editSettings.editMode&&(s=e(m)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,this.model.currentViewData[s.index()])},_setEditDropdownValue:function(i){for(var s,n,l,o,r,a,d=i.find("select.e-field"),h=i.find("input.e-field.e-dropdownlist"),c=0;c<d.length;c++){if(s={},n="",-1!=d[c].name.indexOf(".")){for(r=1;r<d[c].name.split(".").length;r++)n=n.concat("(");s[this._id+"ddlTemp"]="{{:"+n+"#data['"+d[c].name.split(".").join("'] || {})['")+"']}}"}else s[this._id+"ddlTemp"]="{{:"+d[c].name.replace(/[^a-z0-9\s_]/gi,"")+"}}";e.templates(s),a=e.render[this._id+"ddlTemp"](this._currentData),l=i.find("select:eq("+c+') option[value="'+a+'"]'),d.eq(c).data("ej-value",a),o=this.getColumnByField(d[c].name),this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=this._dataSource().adaptor.value.indexOf(o.field)&&(l=i.find("select:eq("+c+') option:contains("'+a+'")'),d.eq(c).val(l[0].value),d.eq(c).data("ej-value",l[0].value)),l.attr("selected","selected")}for(r=0;r<h.length;r++)h.eq(r).data("ej-value",t.getObject(h.eq(r).attr("name"),this._currentData[0]))},_add:function(i){var s,n,l,o,r,a,d,h,c,u,m=document.createElement("div");if(this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(0,1):this._dataSource().splice(0,1)),this._previousFilterCount=this._filteredRecordsCount,"normal"==this.model.editSettings.editMode){for(l=e(m),o=this.model.columns.length,m.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);if(this.model.scrollSettings.frozenColumns>0&&($tempLastTR=l.find("table").first().find("tr").first(),l.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),e($tempLastTR).find("td").first().addClass("e-editcell")),n=l.find("tr").first(),_=e(m).find(".e-editcell").get(0),e(m).find("td").first().addClass("e-editcell"),this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),0!=this.model.currentViewData.length&&0!=this.getContentTable().find("td.e-rowcell").length||0!=this.model.scrollSettings.frozenColumns?(this.model.scrollSettings.frozenColumns>0&&this._renderByFrozenDesign(),r=this.getContentTable().first().find("tbody").first(),"top"==this.model.editSettings.rowPosition?r.prepend(n.addClass("e-addedrow e-normaledit")):"bottom"==this.model.editSettings.rowPosition&&r.append(n.addClass("e-addedrow e-normaledit")),this.model.scrollSettings.frozenColumns>0&&this.getContentTable().last().find("tbody").first().prepend($tempLastTR.addClass("e-addedrow e-normaledit"))):(this.getContentTable().find("tr").first().replaceWith(e(m).find("tr").first().addClass("e-addedrow e-normaledit")),0==this.getContentTable().find("tr").length&&this.getContentTable().append(e(m).find("tr").first().addClass("e-addedrow e-normaledit"))),s=this.getContentTable().find("tr.e-addedrow"),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&s.attr("name",0),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&s.find("tr").first().prepend(t.buildTag("td.e-detailrowcollapse")),p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length){for(c=0;c<this.model.groupSettings.groupedColumns.length;c++)0==c?s.prepend(t.buildTag("td.e-indentcell")):s.find("tr").prepend(t.buildTag("td.e-indentcell"));this.model.groupSettings.groupedColumns.length>0&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)?s.find("td.e-editcell").prop("colspan",this.model.columns.length+this.model.groupSettings.groupedColumns.length-this._hiddenColumns.length-p):this.model.groupSettings.groupedColumns.length>=2?s.find("td.e-editcell").prop("colspan",this.model.columns.length+(this.model.groupSettings.groupedColumns.length-1)-this._hiddenColumns.length-p):s.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p)}else null!=this.model.detailsTemplate||null!=this.model.childGrid?s.find(".e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p+1):(this.model.scrollSettings.frozenColumns>0&&(s.find(".e-editcell").last().prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-$tempLastTR.find("td").not(":visible").length-p),o=this.model.scrollSettings.frozenColumns),s.find(".e-editcell").first().prop("colspan",o-n.find("td").not(":visible").length-p));s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||"bottom"!=this.model.editSettings.rowPosition||this._colgroupRefresh(),this._refreshUnboundTemplate(s.find(".gridform")),this._gridRows=this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else if("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){m.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data);var p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,g=0,f=t.buildTag("tr"),_=t.buildTag("td");for(f.addClass("e-addedrow"),_.addClass("e-inlineformedit e-editcell"),m=e(m).clone(!0).children(),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);if(_.html(m),f.append(_),f.is(":last-child")||f.find(".e-rowcell").addClass("e-validError"),p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length)for(c=0;c<this.model.groupSettings.groupedColumns.length;c++)f.prepend(t.buildTag("td.e-indentcell"));else f.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p);this.model.scrollSettings.frozenColumns>0?(a=f.clone(),d=_.find(".gridform").children(),a.find("td").empty().prop("colSpan",this.model.scrollSettings.frozenColumns-this._getHiddenCount(d.slice(0,this.model.scrollSettings.frozenColumns))),_.prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns-this._getHiddenCount(d.slice(this.model.scrollSettings.frozenColumns))),(0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length)&&this._renderByFrozenDesign(),this.getContentTable().first().find("tbody").first().prepend(a),this.getContentTable().last().find("tbody").first().prepend(f)):((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&g++,_.prop("colspan",this.model.columns.length-this._hiddenColumns.length-p+g),0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length?this.getContentTable().find("tr").first().replaceWith(e(f)):this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(f):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(f)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.AddFormTitle),this._refreshUnboundTemplate(e("#"+this._id+"EditForm")),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else{for(e(m).addClass("e-addedrow"),m.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(m)),(u={}).cssClass=this.model.cssClass,u.width="auto",u.enableResize=this.phoneMode,u.content="#"+this._id,u.enableModal=!0,u.close=e.proxy(this._buttonClick,this),u.enableRTL=this.model.enableRTL,u.allowKeyboardNavigation=!1,u.title=this.localizedLabels.AddFormTitle,e("#"+this._id+"_dialogEdit").ejDialog(u),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(m)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.AddFormTitle),this._externalFormPosition())}"normal"!=this.model.editSettings.editMode&&(s=e(m)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,i.data),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager())},editFormValidate:function(){var t,i,s;return!e.isFunction(e.validator)||(this.model.scrollSettings.frozenColumns>0?(t=this.element.find(".gridform")).length>1?(i=t.eq(0).validate().form(),s=t.eq(1).validate().form(),!(!i||!s)):t.validate().form():this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform").validate().form():this.element.find(".e-addedrow .gridform").validate().form():e("#"+this._id+"EditForm").validate().form())},_refreshAltRow:function(){for(var t,i=this._excludeDetailRows(),s=0;s<i.length;s++)(t=e(i[s])).hasClass("e-alt_row")&&t.removeClass("e-alt_row"),s%2!=0?t.addClass("e-alt_row"):t.addClass("e-row")},_editCompleteAction:function(i){var s,n,l,o,r=this.element.find(".gridform");if(this.model.isEdit=!0,this.getContentTable().children("colgroup").find("col"),this.element.width(),this.setWidthToColumns(),t.Grid.Actions.Add==i.requestType){for(s=r.find(".e-field:disabled"),n=0;n<s.length;n++)l=e(s[n]).attr("name"),e(s[n]).hasClass("e-identity")||(-1==e.inArray(l,this._disabledEditableColumns)||-1!==e.inArray(l,this._primaryKeys))&&e(s[n]).prop("disabled",!1).removeClass("e-disable");for(o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)r.find("colgroup").prepend(this._getIndentCol())}(0==this._tdsOffsetWidth.length||this.model.groupSettings.groupedColumns.length||-1!=e.inArray(0,this._tdsOffsetWidth)||this._hiddenColumns.length>0)&&this._setoffsetWidth(),this._refreshEditForm(i),this.model.scrollSettings.frozenColumns>0&&("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&("beginedit"==i.requestType?i.row.eq(0).next().find("td").height(i.row.eq(1).next().find("td").height()):this.getContentTable().first().find("tr").first().find("td").height(this.getContentTable().last().find("tr").first().find("td").height())),this.model.scrollSettings.frozenRows>0&&"beginedit"==i.requestType&&(this._initFrozenRows(),t.getObject("_vScrollbar._scrollData",this.getScrollObject())&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns<=0&&this.getScrollObject()&&this.getScrollObject().isHScroll()&&this.getScrollObject().refresh(),e.isFunction(e.validator)&&this.initValidator()},_refreshEditForm:function(i){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S;for(this.model.editSettings.showAddNewRow&&(n=this.getContentTable().find(".e-editedrow")),l=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(n)||1!=n.length?document.getElementById(this._id+"EditForm"):n[0].lastChild.lastChild,o=!1,this.model.enableResponsiveRow&&e.isFunction(window.matchMedia)&&(a=window.matchMedia("(max-width: 320px)")),d=e(l).find("input,select,div.e-field,textarea"),h=86,(this._isUnboundColumn||null!=this.getContentTable().find(".e-templatecell"))&&"batch"!=this.model.editSettings.editMode&&(d=d.filter(function(){return!e(this).closest(".e-rowcell").hasClass("e-unboundcell")&&!e(this).closest(".e-rowcell").hasClass("e-templatecell")})),c=null,v=0;v<d.length;v++){if(u=d.eq(v),null!=(p=this.getColumnByField(t.isNullOrUndefined(u.prop("name"))?u.attr("name"):u.prop("name")))&&(r=e.inArray(p,this.model.columns)),"batch"==this.model.editSettings.editMode?h=95:"normal"==this.model.editSettings.editMode&&(h=96),"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(u.parent().css("width",t.dataUtil.max(this._tdsOffsetWidth)+"px"),m=t.max(this._tdsOffsetWidth)*(h/100)):m=this._tdsOffsetWidth[v]*(h/100),("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode||this.model.allowResizing||this.model.allowResizeToFit)&&!u.hasClass("e-checkbox")&&(m="100%"),null!=p&&r!==s&&r<this.model.columns.length&&this.model.columns[r].editTemplate)g={rowdata:"batch"==this.model.editSettings.editMode?this._batchEditRowData:this._currentJsonData[this._selectedRow()],column:this.model.columns,element:u,requestType:i.requestType,type:i.type},f=this.model.columns[r].editTemplate.write,t.isNullOrUndefined(i)||"add"!=i.requestType||(g.rowdata={}),"string"==typeof f&&(f=t.util.getObject(f,window)),f(g),this.model.columns[r].isPrimaryKey&&"beginedit"==i.requestType&&u.addClass("e-disable").attr("disabled","disabled");else if(u.hasClass("e-numerictextbox")){var x={width:m},T=u.val(),k=this.getColumnByField(u.prop("name"));(!t.isNullOrUndefined(a)&&a.matches||k.width&&"string"==typeof k.width&&-1!=k.width.indexOf("%")&&("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode))&&(x.width="100%"),x.enableRTL=this.model.enableRTL,x.showSpinButton=!0,x.cssClass=this.model.cssClass,x.watermarkText=this.localizedLabels.NumericTextBoxWaterMark,x.locale=this.model.locale,T.length&&(x.value=parseFloat(T)),u.hasClass("e-disable")&&(x.enabled=!1),t.isNullOrUndefined(k.editParams)||e.extend(x,k.editParams),u.ejNumericTextbox(x),u.prop("name",u.prop("name").replace(this._id,""))}else if(u.hasClass("e-datepicker")||u.hasClass("e-datetimepicker")||u.hasClass("e-dropdownlist"))k=this.getColumnByField(u.prop("name")),T=u.val(),(!t.isNullOrUndefined(a)&&a.matches||k.width&&"string"==typeof k.width&&-1!=k.width.indexOf("%")&&("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode))&&(m="100%"),u.width(m),u.hasClass("e-disable")&&u.attr("disabled","disabled");else if(u.hasClass("e-save e-button")||u.hasClass("e-cancel e-button"))u.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,width:"100","text-align":"centre",height:"35px"});else switch(u.prop("tagName")){case"INPUT":if(!t.isNullOrUndefined(p)&&p.format&&""!=u.val())switch(p.type){case"date":T=u.val();var D=new Date(T),I=p.format.replace("{0:","").replace("}",""),O=t.format(D,I);u.val(O);break;case"number":T=u.val(),"c"==(I=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(p.format))[2].toLowerCase().split("")[0]?I[2]=I[2].toLowerCase().replace("c","n"):I[2],u.val(t.format(parseFloat(T),I[2]))}"checkbox"!=u.attr("type")?(u.css("text-align",null!=u.attr("name")&&null!=this.getColumnByField(u.attr("name"))?this.getColumnByField(u.attr("name")).textAlign:"center"),"batch"==this.model.editSettings.editMode?(u.css("width","100%").css("height","28px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","22px")):"normal"==this.model.editSettings.editMode?(u.css("width","100%").css("height","30px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","24px")):(u.outerWidth(m).height(28),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","26px"))):u.width(m>0?u.width()>m?m:u.width():-1!=this.model.editSettings.editMode.indexOf("template")?u.width():1),"batch"!=this.model.editSettings.editMode||this._tabKey||(u.is(":checked")?u.prop("checked",!1):u.prop("checked",!0));break;case"SELECT":u.width(m).height(28)}null==p||p.visible||!p.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||u.addClass("e-hide"),u.is(":disabled")||o||u.is(":hidden")&&"object"!=typeof(u.data("ejDropDownList")||u.data("ejNumericTextbox"))||(c=u,o=!0)}for((_={}).width="100%",_.enableRTL=this.model.enableRTL,_.cssClass=this.model.cssClass,_.locale=this.model.locale,_.watermarkText=this.localizedLabels.DatePickerWaterMark,d.filter(".e-datepicker").ejDatePicker(e.extend({displayDefaultDate:!0,showPopupButton:!1},_)),delete _.watermarkText,d.filter(".e-datetimepicker").ejDateTimePicker(e.extend({showPopupButton:!1},_)),d.filter(".e-dropdownlist").ejDropDownList(e.extend({enableIncrementalSearch:!0},_)),v=0;v<this.model.columns.length;v++){if(b=this.model.columns[v],!t.isNullOrUndefined(b.editParams))switch(b.editType){case t.Grid.EditingType.DateTimePicker:d.filter("#"+this._id+b.field+".e-datetimepicker").ejDateTimePicker(b.editParams);break;case t.Grid.EditingType.DatePicker:d.filter("#"+this._id+b.field+".e-datepicker").ejDatePicker(b.editParams);break;case t.Grid.EditingType.Dropdown:d.filter("#"+this._id+b.field+".e-dropdownlist").ejDropDownList(b.editParams)}if(b.editType==t.Grid.EditingType.Dropdown&&(C=-1,this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(C=this._dataSource().adaptor.value.indexOf(b.field)),w=d.filter("#"+this._id+b.field.replace(".","")+".e-dropdownlist"),y=null,!t.isNullOrUndefined(b.dataSource)&&!t.isNullOrUndefined(b.editParams)&&t.isNullOrUndefined(b.foreignKeyField)&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=C?y=b.dataSource:t.isNullOrUndefined(b.dataSource)&&-1!=C&&!t.isNullOrUndefined(b.editParams)?y=this._dataSource().adaptor.foreignData[C]:!t.isNullOrUndefined(b.editParams)&&"fields"in b.editParams&&t.isNullOrUndefined(b.foreignKeyField)&&(y=b.dataSource),null!=y&&w.ejDropDownList({dataSource:y}),S=w.data("ej-value"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=C&&!t.isNullOrUndefined(b.editParams)?w.ejDropDownList("setSelectedText","add"==i.requestType&&t.isNullOrUndefined(b.defaultValue)?w.val(""):S):w.ejDropDownList("setSelectedValue","add"==i.requestType&&t.isNullOrUndefined(b.defaultValue)?w.val(""):S),null==b||b.visible||!b.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||b.editType==t.Grid.EditingType.Dropdown&&w.closest(".e-rowcell").find("input").addClass("e-hide")),I=null,b.format!==s&&b.format.length>0&&(I=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(b.format)[2]),-1!=[t.Grid.EditingType.DatePicker,t.Grid.EditingType.DateTimePicker].indexOf(b.editType)){var R=b.editType==t.Grid.EditingType.DatePicker?"datePicker":"dateTimePicker",A="ej"+R.replace(/\b\w/g,function(e){return e.toUpperCase()}),M=this._id+b.field,F=d.filter(function(t,i){return i.id==M&&(e(i).hasClass("e-datepicker")||e(i).hasClass("e-datetimepicker"))}),P={};null!=I&&(P[R.replace("Picker","")+"Format"]=I),F.hasClass("e-disable")&&(P.enabled=!1),F[A](P),"batch"==this.model.editSettings.editMode&&F[A]("show")}}null!=c&&this._focusElements(c)},_focusElements:function(e){if(e.length){var t=e;"select"==t[0].tagName.toLowerCase()&&!t.hasClass("e-field e-dropdownlist")||"input"==t[0].tagName.toLowerCase()&&!t.hasClass("e-numerictextbox")?(t.focus().select(),t[0].focus()):t.hasClass("e-field e-dropdownlist")?t.closest(".e-ddl").focus():t.hasClass("e-numerictextbox")?t.siblings("input:visible").first().select().focus():t.find("input:visible,select").first().select().focus()}},_renderToolBar:function(){var i,s,n=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),l=t.buildTag("ul");return(!t.isNullOrUndefined(this.model.toolbarSettings.toolbarItems)&&this.model.toolbarSettings.toolbarItems.length||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this._renderLi(l),n.append(l),i=t.buildTag("ul"),n.append(i),!t.isNullOrUndefined(this.model.toolbarSettings.customToolbarItems)&&this.model.toolbarSettings.customToolbarItems.length&&this._renderCustomLi(i),(s={}).click=this._toolBarClick,s.cssClass=this.model.cssClass,s.enableRTL=this.model.enableRTL,s.enableSeprator=!1,n.ejToolbar(s),n.ejToolbar("disableItem",this._disabledToolItems),this._disabledToolItems=e(),n},_renderCustomLi:function(i){for(var s,n,l,o=0;o<this.model.toolbarSettings.customToolbarItems.length;o++){switch(l=this.model.toolbarSettings.customToolbarItems[o].templateID?this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#",""):this.model.toolbarSettings.customToolbarItems[o],n=t.buildTag("li","",{},{id:this._id+"_"+l,title:l}),typeof this.model.toolbarSettings.customToolbarItems[o]){case"string":s=t.buildTag("a.e-toolbaricons e-icon","",{}).addClass(this.model.toolbarSettings.customToolbarItems[o]);break;case"object":n.attr("title",this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#","")),s=e(this.model.toolbarSettings.customToolbarItems[o].templateID).hide().html()}n.html(s),i.append(n)}},_renderLi:function(i){var s,n,l,o;for(e.isFunction(window.matchMedia)&&this.model.enableResponsiveRow&&(-1!=(s=this.model.toolbarSettings.toolbarItems.indexOf("search"))&&this.model.toolbarSettings.toolbarItems.splice(s,1),this.model.allowFiltering&&this.model.toolbarSettings.toolbarItems.push("responsiveFilter"),this.model.allowSorting&&this.model.toolbarSettings.toolbarItems.push("responsiveSorting"),-1!=s&&this.model.toolbarSettings.toolbarItems.push("search")),n=0;n<this.model.toolbarSettings.toolbarItems.length;n++)l=t.buildTag("li","",{},{id:this._id+"_"+this.model.toolbarSettings.toolbarItems[n],title:this.localizedLabels[this.model.toolbarSettings.toolbarItems[n].slice(0,1).toUpperCase()+this.model.toolbarSettings.toolbarItems[n].slice(1)]}),this._renderLiContent(l,this.model.toolbarSettings.toolbarItems[n]),o=this.model.toolbarSettings.toolbarItems[n],this.model.enableResponsiveRow&&("responsiveFilter"===o||"responsiveSorting"===o)&&(l.addClass("e-gridresponsiveicons"),l.css("display","none")),i.append(l)},_renderLiContent:function(e,i){var s,n,l,o;switch(i){case"add":s=t.buildTag("a.e-addnewitem e-toolbaricons e-icon e-addnew","",{});break;case"edit":s=t.buildTag("a.e-edititem e-toolbaricons e-icon e-edit","",{});break;case"delete":s=t.buildTag("a.e-deleteitem e-toolbaricons e-icon e-delete","",{});break;case"update":s=t.buildTag("a.e-saveitem e-toolbaricons e-disabletool e-icon e-save","",{}),this._disabledToolItems.push(e.get(0));break;case"cancel":s=t.buildTag("a.e-cancel e-toolbaricons e-disabletool e-icon e-gcancel","",{}),this._disabledToolItems.push(e.get(0));break;case"search":s=t.buildTag("a.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{}),this.model.enableResponsiveRow||(n=t.buildTag("input.e-ejinputtext e-gridsearchbar","",{},{type:"text",id:this._id+"_searchbar"}),o=t.buildTag("span.e-cancel e-icon e-hide","",{right:"1%"}),(l=t.buildTag("div.e-filterdiv e-searchinputdiv","",{display:"inline-table",width:"83%"})).append(n).append(o),e.append(l),t.isNullOrUndefined(this.model.searchSettings.key)||n.val(this.model.searchSettings.key)),this.model.allowSearching=!0;break;case"printGrid":s=t.buildTag("a.e-print e-toolbaricons e-icon","",{});break;case"excelExport":s=t.buildTag("a.e-toolbaricons e-excelIcon e-icon","",{});break;case"wordExport":s=t.buildTag("a.e-toolbaricons e-wordIcon e-icon","",{});break;case"pdfExport":s=t.buildTag("a.e-toolbaricons e-pdfIcon e-icon","",{});break;case"responsiveFilter":s=t.buildTag("a.e-toolbaricons e-filterset e-icon","",{});break;case"responsiveSorting":s=t.buildTag("a.e-toolbaricons e-respponsiveSorting e-icon","",{})}e.append(s),"search"==i&&(this._searchBar=e,e.css("display","flex"))},_toolBarClick:function(i){var n,l=e(this.itemsContainer).closest(".e-grid"),o=l.ejGrid("instance"),r=l.attr("id");if(i.event!=s||"INPUT"!=i.target.tagName||i.currentTarget.id!=r+"_search"){e.isFunction(e.fn.ejDatePicker)&&e("#"+r+"EditForm").find(".e-datepicker").ejDatePicker("hide");var a=i.currentTarget,d=i.target,h={itemName:e(a).attr("data-content"),itemId:a.id,currentTarget:a,target:d,itemIndex:e(a).index(),itemCurrentTarget:a.outerHTML,gridModel:o.model,itemTarget:d.outerHTML,toolbarData:i};if(!l.ejGrid("instance")._trigger("toolbarClick",h)){switch(h.itemId){case r+"_add":o._toolbarOperation(r+"_add");break;case r+"_edit":o._toolbarOperation(r+"_edit");break;case r+"_delete":o._toolbarOperation(r+"_delete");break;case r+"_update":o._toolbarOperation(r+"_update");break;case r+"_cancel":"batch"==o.model.editSettings.editMode?o._confirmDialog.find(".e-content").html(o.localizedLabels.CancelEdit).end().ejDialog("open"):o._toolbarOperation(r+"_cancel");break;case r+"_search":if(o.model.enableResponsiveRow)if(t.isNullOrUndefined(o.element.find(".e-responsesearch")[0])){var c=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),u=t.buildTag("div.e-responsesearch","",{width:"95%",height:"38px","margin-top":"7px","margin-left":"6px"}),m=t.buildTag("span.e-ttoltxt","",{width:"98%","margin-left":"2%"},{id:o._id+"_search"});$a=t.buildTag("span.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{position:"absolute",right:"2%","margin-top":"1%"}),"webkit"===t.browserInfo().name&&$a.css("margin-top","-2px"),n=t.buildTag("input.e-ejinputtext","",{width:"97%",height:"30px"},{type:"search",id:o._id+"_searchInput"}),t.isNullOrUndefined(o.model.searchSettings.key)||n.val(o.model.searchSettings.key),m.append(n),m.append($a),u.append(m),c.append(u),c.ejToolbar({click:function(t){o._toolbarOperation(r+"_search",e(t.currentTarget).find("input").val())}}),n.on("keyup",function(){""!=n.val()?($a.removeClass("e-searchfind"),$a.addClass("e-cancel")):($a.removeClass("e-cancel"),$a.addClass("e-searchfind"))}),$a.click(function(){$a.hasClass("e-cancel")&&(n.val(""),$a.removeClass("e-cancel"),$a.addClass("e-searchfind"),o._toolbarOperation(r+"_search",e("#"+r+"_searchInput").val()))}),c.insertBefore(o.getHeaderContent())}else"block"==o.element.find(".e-responsesearch").css("display")?o.element.find(".e-responsesearch").css("display","none"):o.element.find(".e-responsesearch").css("display","block");else o._toolbarOperation(r+"_search",e(i.currentTarget).find("input").val());break;case r+"_printGrid":o._toolbarOperation(r+"_printGrid");break;case r+"_excelExport":o._toolbarOperation(r+"_excelExport");break;case r+"_wordExport":o._toolbarOperation(r+"_wordExport");break;case r+"_pdfExport":o._toolbarOperation(r+"_pdfExport");break;case r+"_responsiveFilter":o._toolbarOperation(r+"_responsiveFilter");break;case r+"_responsiveSorting":o._toolbarOperation(r+"_responsiveSorting")}return!1}}},_toolbarOperation:function(i,s){var n,l,o,r,a,d=this.element,h=d.ejGrid("instance"),c="batch"==h.model.editSettings.editMode,u=d.attr("id");switch(h._exportTo=h.export,i){case u+"_add":c?h._bulkAddRow():h._startAdd();break;case u+"_edit":if(c&&h.model.editSettings.allowEditing){if(-1==h._bulkEditCellDetails.columnIndex)return void alert(this.localizedLabels.EditOperationAlert);(n=h.model.columns[h._bulkEditCellDetails.columnIndex].field)&&h.editCell(h._bulkEditCellDetails.rowIndex,n)}else h.startEdit();break;case u+"_delete":if(-1==this._selectedRow())return void alert(this.localizedLabels.DeleteOperationAlert);this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):c?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():this.deleteRow();break;case u+"_update":c&&0==e("#"+this._id+"EditForm").children().find(".e-field-validation-error").length?this.model.editSettings.showConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveConfirm).end().ejDialog("open"):this.batchSave():h.endEdit();break;case u+"_cancel":c?!0===e("#"+u+"ConfirmDialog").ejDialog("isOpened")?this._triggerConfirm():h.cancelEditCell():h.cancelEdit();break;case u+"_search":"click"==args.type&&"A"==args.target.nodeName&&d.ejGrid("search",s);break;case u+"_printGrid":this.print();break;case u+"_excelExport":h._exportTo(h.model.exportToExcelAction,"excelExporting",h.model.allowMultipleExporting);break;case u+"_wordExport":h._exportTo(h.model.exportToWordAction,"wordExporting",h.model.allowMultipleExporting);break;case u+"_pdfExport":h._exportTo(h.model.exportToPdfAction,"pdfExporting",h.model.allowMultipleExporting);break;case u+"_responsiveFilter":e("#responsiveFilter").css("display","block"),setTimeout(function(){h.element.css("display","none")});break;case u+"_responsiveSorting":for(this._sortColumns=[],this._removeSortCol=[],l=0;l<this.model.sortSettings.sortedColumns.length;l++)this._sortColumns.push({field:this.model.sortSettings.sortedColumns[l].field,direction:this.model.sortSettings.sortedColumns[l].direction});if(t.isNullOrUndefined(e("#responsiveSort")[0])){(o=e("#responsiveFilter").clone().css("display","block")).insertAfter(this.element),o.attr("id","responsiveSort"),h._setSortingButton();var m=t.buildTag("div.btnContainer","",{width:"100%",bottom:"0px",position:"absolute"}),p=t.buildTag("input.e-resposnsiveFilterBtnLeft","OK",{width:"45.6%"}),g=t.buildTag("input.e-resposnsiveFilterBtnRight","Cancel",{width:"46%"}),f=t.buildTag("div.e-resFIlterRigthIcon"),_=t.buildTag("span.e-icon e-responsiveClose e-resIcon");o.find(".e-resFilterleftIcon").remove(),o.find(".labelRes").text("Sorting"),o.find(".e-resFilterDialogHeaderDiv").append(f.append(_)),o.find(".e-resFilterDialogHeaderDiv").find(".e-resFIlterRigthIcon").click(function(){e("#responsiveSort").css("display","none"),h.element.css("display","block")}),r=t.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),a=t.buildTag("span.e-icon e-resIcon e-responsiveSortClear"),r.click(function(){o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton(!0);for(var e=0;e<h._sortColumns.length;e++)-1==h._removeSortCol.indexOf(h._sortColumns[e].field)&&h._removeSortCol.push(h._sortColumns[e].field);h._sortColumns=[],h._removeSortCol=[]}),o.find(".e-resFilterDialogHeaderDiv").prepend(r.append(a)),o.append(m),m.append(p).append(g),p.ejButton({text:"OK",type:"button",click:e.proxy(this._resSortOperation,this)}),g.ejButton({text:"Cancel",type:"button",click:function(){e("#responsiveSort").css("display","none"),h.element.css("display","block"),h._sortColumns=[],o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton()}})}else e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-button").remove(),this._setSortingButton();e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-filternone").remove(),e("#responsiveSort").css("display","block"),setTimeout(function(){h.element.css("display","none")})}return!1},_resSortOperation:function(){for(var t=[],i=0;i<this.model.sortSettings.sortedColumns.length;i++)t.push(this.model.sortSettings.sortedColumns[i].field);for(i=0;i<t.length;i++)this.removeSortedColumns(t[i]);for(i=0;i<this._sortColumns.length;i++)this.model.allowMultiSorting&&(this.multiSortRequest=!0),this.sortColumn(this._sortColumns[i].field,this._sortColumns[i].direction);e("#responsiveSort").css("display","none"),this.element.css("display","block")},_setSortingButton:function(i){var s=e("#responsiveSort"),n=this;this._sortCols=[],t.isNullOrUndefined(s.find(".e-responsivefilterColDiv").find(".e-button")[0])&&s.find(".e-responsivefilterColDiv").each(function(s,l){var o,r,a,d=t.buildTag("div","",{float:"right","margin-right":"2%","margin-top":"-1%"}),h=e(l).attr("ej-MappingName"),c=t.buildTag("button#"+h+".e-sortingBtn","");if(e(l).append(d.append(c)),o="None",r="",i)c.ejButton({text:o,type:"button",height:28,width:120,id:h,showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)});else{for(a=0;a<n.model.sortSettings.sortedColumns.length;a++)n.model.sortSettings.sortedColumns[a].field==h&&(r="Ascending"==(o="ascending"==n.model.sortSettings.sortedColumns[a].direction?"Ascending":"Descending")?"e-resIcon e-respponsiveSortingAsc":"e-resIcon e-respponsiveSortingDesc");""!=r?c.ejButton({text:o,type:"button",height:28,width:120,cssClass:"e-resSortIconBtn",id:h,prefixIcon:r,imagePosition:"imageright",contentType:"textandimage",showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)}):c.ejButton({text:o,type:"button",height:28,cssClass:"e-resSortIconBtn",width:120,id:h,showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)})}})},_sortOperation:function(t,i){var s;for(-1!=this._removeSortCol.indexOf(t)&&(this._sortColumns.splice(this._removeSortCol.indexOf(t),0),this._removeSortCol.splice(this._removeSortCol.indexOf(t),0)),s=0;s<this._sortColumns.length&&this._sortColumns[s].field!=t;s++);this.model.allowMultiSorting?(this.multiSortRequest=!0,-1!=s&&(this._sortColumns.splice(s,1),-1==this._removeSortCol.indexOf(t)&&this._removeSortCol.push(t))):(e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable"),e("#responsiveFilter").find(".e-responsivefilterColDiv").not(".e-responsivefilterColDiv[ej-mappingname='"+t+"']").find(".e-button").addClass("e-disable").text("None"),this._sortColumns.length>0&&(this._removeSortCol.push(this._sortColumns[0].field),this._sortColumns=[])),this._sortColumns.push({field:t,direction:i})},_resSortButClick:function(t){var i,s="",n="",l=t.model.id,o=e("#"+t.model.id).ejButton("instance");if("None"==t.model.text)s="Ascending",n="e-resIcon e-respponsiveSortingAsc",this._sortOperation(l,"ascending");else{if("Ascending"!=t.model.text){for(o.model.text="None",o.model.prefixIcon="",o.type="button",o.model.contentType="text",o._render(),i=0;i<this._sortColumns.length&&this._sortColumns[i].field!=l;i++);return this._removeSortCol.push(l),this._sortColumns.splice(i,1),void e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable")}s="Descending",n="e-resIcon e-respponsiveSortingDesc",this._sortOperation(l,"descending")}o.model.text=s,o.model.prefixIcon="e-resIcon "+n,o.model.imagePosition="imageright",o.model.contentType="textandimage",o._render()},renderDiaglogButton:function(e,i){var s,n,l,o;return"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s="EditExternalForm_":"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(s="InlineEditForm_",t.buildTag("div","","",{id:this._id+"_inlineFormTitle",class:"e-inlineform-titlebar"}).appendTo(i)):s="EditDialog_",(n=t.buildTag("input.e-save","",{"margin-left":"30px"},{type:"button",id:s+this._id+"_Save"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.SaveButton,width:"100"}),(l=t.buildTag("input.e-cancel","",{"margin-left":"19px","margin-right":"13px"},{type:"button",id:s+this._id+"_Cancel"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.CancelButton,width:"100"}),(o="dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?t.buildTag("div","","",{class:"e-editform-btn"}):t.buildTag("div")).append(n),o.append(l),e.appendTo(i),"dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?o.appendTo(i):e.append(o),i},_externalFormPosition:function(){var t=e(this.element).offset(),i=e(this.element).width(),s=e(this.element).height(),n=e("#"+this._id+"_externalEdit");switch(this.model.editSettings.formPosition){case"topright":e(n).find(".e-form-toggle-icon").removeClass("e-bottomleft").addClass("e-topright"),e(n).css({left:t.left+i+1+"px",top:t.top+"px",position:"absolute",width:"290px"}),e("#"+this._id+"_eFormContent").height("auto");break;case"bottomleft":e(n).find(".e-form-toggle-icon").removeClass("e-topright").addClass("e-bottomleft"),e(n).css({left:t.left+"px",top:t.top+s+1+"px"}),e("#"+this._id+"_eFormContent").width("100%")}},_setoffsetWidth:function(){var t,i,s=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm");if(0!=this._gridRecordsCount||"batch"==this.model.editSettings.editMode||0!=this.model.scrollSettings.frozenColumns)for(t="batch"==this.model.editSettings.editMode?s.closest("td"):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s.find(".e-rowcell").not(".e-unboundcell,.e-templatecell"):s.find("tr").find(".e-rowcell").not(".e-unboundcell,.e-templatecell"),i=0;i<t.length;i++)this._tdsOffsetWidth[i]=t.get(i).offsetWidth},_bulkChangesAcquired:function(){return!!(this.batchChanges.added.length>0||this.batchChanges.changed.length||this.batchChanges.deleted.length)},_renderDialog:function(){return t.buildTag("div.e-dialog e-dialog-content e-shadow e-widget-content","",{display:"none"},{id:this._id+"_dialogEdit"})},getCurrentEditCellData:function(){var i,s,n,l,o,r;if(this.model.isEdit&&e("#"+this._id+"EditForm").length){switch(i=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,"")),n=this.model.columns[this._bulkEditCellDetails.columnIndex],this._bulkEditCellDetails.cellEditType){case t.Grid.EditingType.String:case t.Grid.EditingType.Numeric:s=i.val();break;case t.Grid.EditingType.Dropdown:s=this._bulkEditCellDetails.isForeignKey?{value:i.ejDropDownList("getSelectedValue"),text:i.ejDropDownList("getValue")}:i.ejDropDownList("getSelectedValue");break;case t.Grid.EditingType.Boolean:s=i.is(":checked");break;case t.Grid.EditingType.DatePicker:o=e.trim(i.val()),(r=i.ejDatePicker("instance"))._setDateValue(o),s=""==o?o:r.model.value;break;case t.Grid.EditingType.DateTimePicker:s=""==e.trim(i.val())?e.trim(i.val()):i.ejDateTimePicker("model.value");break;case"edittemplate":"string"==typeof(l=n.editTemplate.read)&&(l=t.util.getObject(l,window)),s=l(i)}return"string"==typeof s&&s.length&&"number"==n.type&&(s=t.globalize.parseFloat(s,this.model.locale)),s}return null},cancelEditCell:function(){if(this.model.isEdit){var t,i=this.getRows()[this._bulkEditCellDetails.rowIndex],s={};s[this._bulkEditCellDetails.fieldName]=this._bulkEditCellDetails.cellValue,t=e(i).hasClass("e-insertedrow")?e(i).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex+this.model.groupSettings.groupedColumns.length):e(i).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex),e(t).removeClass("e-editedbatchcell").empty().html(e(e.templates[this._id+"_JSONTemplate"].render(s)).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex).innerHTML),this.model.isEdit=!1,this.element.focus()}},saveCell:function(i){var s,n,l,o;if(this.model.isEdit){if(!this.editFormValidate())return!0;var r,a,d,h,c=e("#"+this._id+"EditForm"),u=c.closest("tr"),m=c.closest("td"),p={},g=this.model.columns[this._bulkEditCellDetails.columnIndex],f=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,""));if(p={columnName:g.field,value:this.getCurrentEditCellData(),rowData:this._bulkEditCellDetails.rowData,previousValue:this._bulkEditCellDetails.cellValue,columnObject:g,cell:m,isForeignKey:this._bulkEditCellDetails.isForeignKey},!i&&this._trigger("cellSave",p))return this._focusElements(p.cell),void(this._bulkEditCellDetails.cancelSave=!0);("datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType||"datepicker"==this._bulkEditCellDetails.cellEditType)&&f[f.data("ejWidgets")[0]]("destroy"),t.isNullOrUndefined(g.format)||("date"!=g.type&&"datetime"!=g.type||t.isNullOrUndefined(p.value)||(p.isForeignKey?p.value.text=p.value.text.length>0?new Date(p.value.text):p.value.text:p.value=p.value.length>0?new Date(p.value):p.value),a=this.formatting(g.format,p.isForeignKey?!isNaN(parseFloat(p.value.text))&&isFinite(p.value.text)?parseFloat(p.value.text):p.value.text:p.value,this.model.locale),p.cell.empty().html(a)),t.createObject(this._bulkEditCellDetails.fieldName,p.isForeignKey?p.value.value:p.value,p.rowData),t.isNullOrUndefined(g.format)&&(a=p.isForeignKey?p.value.text:p.value),t.isNullOrUndefined(g.template)||(s=t.copyObject({},p.rowData),t.createObject(this._bulkEditCellDetails.fieldName,p.isForeignKey?p.value.value:p.value,s),a=e.templates(g.template).render(s)),"edittemplate"==this._bulkEditCellDetails.cellEditType?(p.value instanceof Array&&(a=p.value.join()),p.cell.empty().html(a)):"boolean"==p.columnObject.type||"booleanedit"==p.columnObject.editType?(n={},t.createObject(p.columnObject.field,p.value,n),p.cell.empty().html(e(e.templates[this._id+"_JSONTemplate"].render(n))[0].cells[this._bulkEditCellDetails.columnIndex].innerHTML)):("datepicker"!=p.columnObject.editType&&"datetimepicker"!=p.columnObject.editType||t.isNullOrUndefined(g.format))&&p.columnObject.disableHtmlEncode?p.cell.text(a).html():p.cell.empty().html(a),p.cell.removeClass("e-validError"),p.cell.hasClass("e-updatedtd")&&p.cell.addClass("e-gupdatenotify"),p.previousValue=t.isNullOrUndefined(p.previousValue)?"":"date"==g.type||"datetime"==g.type?new Date(p.previousValue):p.previousValue,r=p.isForeignKey?p.value.value:p.value,!1,l="date"!=this._bulkEditCellDetails.type&&"datetime"!=this._bulkEditCellDetails.type||t.isNullOrUndefined(this._bulkEditCellDetails.format)?("datepicker"==this._bulkEditCellDetails.cellEditType||"datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType)&&r instanceof Date&&p.previousValue instanceof Date?r.getTime()!==p.previousValue.getTime():"number"==typeof r?r!==parseFloat(p.previousValue):r!==p.previousValue.toString():!(this._bulkEditCellDetails.cellValue instanceof Date)||this.formatting(this._bulkEditCellDetails.format,this._bulkEditCellDetails.cellValue)!=this.formatting(this._bulkEditCellDetails.format,r),this.model.isEdit=!1,l&&(this._enableSaveCancel(),p.cell.addClass("e-updatedtd e-icon e-gupdatenotify"),h="string"==typeof(d=t.getObject(this._bulkEditCellDetails.fieldName,p.rowData))&&d.length?p.isForeignKey?p.value.value.toString():p.value.toString():p.isForeignKey?isNaN(parseInt(p.value.value))?p.value.value:parseInt(p.value.value):p.value,"string"!=typeof p.value||h.length||(h=null),t.createObject(this._bulkEditCellDetails.fieldName,h,p.rowData),-1==e.inArray(p.rowData,this.batchChanges.changed)&&-1==e.inArray(p.rowData,this.batchChanges.added)&&this.batchChanges.changed.push(p.rowData),this.isejObservableArray&&(o=p.cell.closest("tr").hasClass("e-insertedrow")?"insert":"update",this._refreshViewModel(p,o))),u.removeClass("e-editedrow").removeClass("e-batchrow"),p.cell.removeClass("e-editedbatchcell")}},_refreshViewModel:function(i,n){var l,o,r;for(l=this._dataSource()instanceof t.DataManager?this._dataSource():t.DataManager(this._dataSource()),o=new t.Query,r=0;r<this._primaryKeys.length;r++)o=o.where(this._primaryKeys[r],t.FilterOperators.equal,i.rowData[this._primaryKeys[r]]);var a=l.executeLocal(o),d=this._dataSource(s,!0),h=e.inArray(a[0],this._dataSource());switch(this.model.editSettings.showConfirmDialog=!1,n){case"update":case"remove":d(i.rowData,h,n);break;case"insert":d(i.rowData,0,n)}},_enableSaveCancel:function(){this.model.toolbarSettings.showToolbar&&($toolBar=this.element.find("#"+this._id+"_toolbarItems"),$toolBar.ejToolbar("enableItemByID",this._id+"_update"),$toolBar.ejToolbar("enableItemByID",this._id+"_cancel"))},setCellText:function(i,n,l){var o,r,a,d,h="string"==typeof n,c=this._excludeDetailRows(),u=0!=this.model.groupSettings.groupedColumns.length,m=this.model.scrollSettings.allowVirtualScrolling,p=this[h?"getColumnByField":"getColumnByIndex"](n),g=t.getObject(["currentViewData",u?".records":""].join(""),this.model),f={},_=m?this._dataManager:new t.DataManager(g),v=this._primaryKeys[0],b=h||t.getObject(i+"."+v,m?this._dataManager.dataSource.json:g);t.createObject(p.field,l,f),h&&(b=i,i=_.executeLocal((new t.Query).select(v)).indexOf(i),n=this.getColumnIndexByField(p.field)),m&&(a=((i+(r=this.model.pageSettings.pageSize)-(d=i%r))/r-1)*r,isCached=-1!=e.inArray(a,this.virtualLoadedPages),isCached&&(o=this.getContentTable().find("tr[name="+a+"]")[d].cells[n])),canSkip=-1==i||-1==n||m&&!isCached||i>(m?this._dataSource():g).length||n>this.model.columns.length,canSkip||(o=o||this._excludeDetailCells(c[i])[n],l=p.format===s?l:this.formatting(p.format,l,this.model.locale),t.isNullOrUndefined(p.foreignKeyField)||t.isNullOrUndefined(p.foreignKeyValue)||(l=this._getForeignKeyData(f)[p.foreignKeyField][p.foreignKeyValue]),p.disableHtmlEncode?e(o).text(l):o.innerHTML=l,this._trigger("queryCellInfo",{cell:o,text:o.innerHTML,column:p,data:f})),v&&(t.createObject(v,b,f),this._dataManager.update(v,f))},_excludeDetailCells:function(i){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)?e(i.cells):e(i.cells).not(".e-detailrowexpand, .e-detailrowcollapse")},setCellValue:function(i,n,l){if(e("#"+this._id+"EditForm").length>0&&e("#"+this._id+"EditForm").attr("id","EditForm1"),"batch"==this.model.editSettings.editMode&&!this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.frozenColumns){var o,r=this.getDataByIndex(i),a=this._excludeDetailRows()[i],d=this.getColumnIndexByField(n),h=this,c=l,u=!1,m=this.getColumnByField(n);if(o=e(a).hasClass("e-insertedrow")?e(a.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[d+this.model.groupSettings.groupedColumns.length]:e(a.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[d],!t.isNullOrUndefined(m)&&!m.isPrimaryKey&&0!=m.allowEditing){if(t.isNullOrUndefined(m.validationRules)||($form=t.buildTag("form","",{},{id:this._id+"EditForm"}),$valElem=t.buildTag("input","",{},{id:this._id+m.field,value:l}),$form.append($valElem),this.element.append($form),$form.validate({errorPlacement:function(t){return h._alertDialog||h._renderAlertDialog(),e("#"+h._id+"AlertDialog_wrapper").css("min-height",""),h._alertDialog.find(".e-content").text(t.text()),h._alertDialog.ejDialog("open"),h.element.find($form).remove(),u=!0,!0}}),this.setValidationToField(m.field,m.validationRules)),m.foreignKeyValue&&(c=this._foreignKeyBinding(d,l,this._id))==s)return this._alertDialog||this._renderAlertDialog(),e("#"+this._id+"AlertDialog_wrapper").css("min-height",""),this._alertDialog.find(".e-content").text(this.localizedLabels.ForeignKeyAlert),this._alertDialog.ejDialog("open"),void(t.isNullOrUndefined(m.validationRules)||this.element.find($form).remove());t.isNullOrUndefined(m.format)||(c=this.formatting(m.format,m.foreignKeyValue&&!isNaN(parseFloat(l))&&isFinite(l)?parseFloat(l):l,this.model.locale)),t.isNullOrUndefined(m.validationRules)||(e($form).validate().form(),this.element.find($form).remove()),e("#EditForm1").attr("id",this._id+"EditForm"),u||o.innerHTML==c||(e(o).has("form").length>0&&(this.model.isEdit=!1),e(o).hasClass("e-boolrowcell")?e(o).find("input").attr("checked",c):o.innerHTML=c,e(o).addClass("e-updatedtd e-icon e-gupdatenotify"),e(o).removeClass("e-validError e-editedbatchcell"),t.createObject(n,l,r),-1==e.inArray(r,this.batchChanges.changed)&&this.batchChanges.changed.push(r),this._enableSaveCancel())}}},setDefaultData:function(i){var s,n,l,o,r;if(t.isNullOrUndefined(i)){for(s=[],n=this.model.columns,l=0;l<this.model.columns.length;l++)s.push(this.model.columns[l].field);for(t.isNullOrUndefined(this._bulkEditCellDetails._data)&&(this._bulkEditCellDetails._data=[]),i={},o=function(e,s){t.createObject(e,s,i)},r=0;r<s.length;r++){var a=r,d=s[r],h=n[r].type,c=t.getObject(d,this._bulkEditCellDetails._data[0]);if(d===(t.isNullOrUndefined(this.model.parentDetails)?null:this.model.parentDetails.parentKeyField)&&(this.model.columns[a].defaultValue=this.model.parentDetails.parentKeyFieldValue),t.isNullOrUndefined(this.model.columns[a].defaultValue))switch(h){case"number":o(d,0);break;case"string":o(d,null);break;case"boolean":o(d,!1);break;case"object":e.isArray(c)?o(d,[]):o(d,null);case"datetime":case"date":o(d,null)}else o(d,this.model.columns[a].defaultValue)}}this._bulkEditCellDetails.defaultData=i},_bulkDelete:function(i){if(this.model.editSettings.allowDeleting){if(t.isNullOrUndefined(i)&&(i=this._selectedRow()),-1==i)return void alert(this.localizedLabels.DeleteOperationAlert);var s,n,l,o={};if(this.multiDeleteMode&&this.selectedRowsIndexes.length>1?(l=[],n=this.getSelectedRows(),Array.prototype.push.apply(l,this.getSelectedRecords()),Array.prototype.push.apply(this.batchChanges.deleted,this.getSelectedRecords())):(s=this.getRows()[i],n=e(s),l=this.getDataByIndex(i)),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:l,row:n},this._trigger("beforeBatchDelete",o))return;this.isejObservableArray&&this._refreshViewModel(o,"remove"),this.model.isEdit&&this.cancelEditCell(),n.hasClass("e-insertedrow")?(n.remove(),-1!=(i=e.inArray(s,this._bulkEditCellDetails.insertedTrCollection))&&(this._bulkEditCellDetails.insertedTrCollection.splice(i,1),this.batchChanges.added.splice(i,1))):(n.hide(),(0==o.rowIndex||n.hasClass("e-firstrow"))&&(n.hasClass("e-firstrow")&&this.getContentTable().find("tr").removeClass("e-firstrow"),this.getContentTable().find("tr:visible").first().addClass("e-firstrow")),e.isArray(l)||this.batchChanges.deleted.push(l)),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),this.model.allowScrolling&&this._refreshScroller(o),this._enableSaveCancel(),this._selectedRow(-1),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:l},this._trigger("batchDelete",o)}},_bulkAddRow:function(i){var s,n,l,o,r,a;if(e("#"+this._id+"EditForm").length&&!this.editFormValidate())return!0;if(this.model.editSettings.allowAdding){if(s={},o=this.getRows(),t.isNullOrUndefined(i)||(this._bulkEditCellDetails.defaultData=i),t.isNullOrUndefined(this._bulkEditCellDetails.defaultData)&&this.setDefaultData(),s={defaultData:e.extend(!0,{},this._bulkEditCellDetails.defaultData),primaryKey:this._primaryKeys},this._trigger("beforeBatchAdd",s))return;for(n=e(e.render[this._id+"_JSONTemplate"](s.defaultData)).addClass("e-insertedrow"),null!=o&&e(o[0]).hasClass("e-alt_row")&&n.removeClass("e-alt_row"),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(n):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(n),this.model.allowScrolling&&this._refreshScroller(s),0===this._gridRecordsCount&&this.getContentTable().find("tbody .emptyrecord").first().remove(),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),r=0;r<this.model.groupSettings.groupedColumns.length;r++)n.prepend(t.buildTag("td.e-indentcell"));this._bulkEditCellDetails.insertedTrCollection.push(n.get(0)),this.batchChanges.added.push(s.defaultData),this._enableSaveCancel(),a=this._gridRows.length-1,"bottom"==this.model.editSettings.rowPosition?(l=this._findNextEditableCell(0),this.selectRows(a),this.editCell(a,this.model.columns[l].field)):(l=this._findNextEditableCell(0),this.selectRows(0),this.editCell(0,this.model.columns[l].field)),n.find(".e-rowcell").addClass("e-updatedtd e-icon e-gupdatenotify"),s={defaultData:s.defaultData},e.extend(s,{columnObject:this.model.columns[l],columnIndex:l,row:n,primaryKey:this._primaryKeys,cell:e(n[0].cells[l])}),this._trigger("batchAdd",s)}},getDataByIndex:function(t){var i,s=e(this.getRows()[t]);return s.hasClass("e-insertedrow")?(i=e.inArray(s[0],this._bulkEditCellDetails.insertedTrCollection),this.batchChanges.added[i]):this._bulkEditCellDetails._data["top"==this.model.editSettings.rowPosition?t-this._bulkEditCellDetails.insertedTrCollection.length:t]},refreshBatchEditChanges:function(){this._bulkEditCellDetails={cellValue:null,rowIndex:-1,_data:null,columnIndex:-1,fieldName:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null,isForeignKey:!1},this.batchChanges={added:[],deleted:[],changed:[]}},refreshBatchEditMode:function(){"batch"==this.model.editSettings.editMode&&(this.refreshBatchEditChanges(),this._bulkEditCellDetails._data=e.extend(!0,[],this.getCurrentViewData()))},batchCancel:function(){this.cancelEdit()},batchSave:function(){var e={};this.saveCell(),e.batchChanges=this.getBatchChanges(),this._trigger("beforeBatchSave",e)||((e={}).requestType="batchsave",this._sendBulkReuqest(this.getBatchChanges(),e))},_sendBulkReuqest:function(e,i){var s=this._dataManager.saveChanges(e,this._primaryKeys[0],this.model.query._fromTable,this.model.query),n=this;this._dataManager instanceof t.DataManager&&!this._dataManager.dataSource.offline?(s.done(function(){n._processBindings(i)}),s.fail(function(e){var t={error:e.error};n._trigger("actionFailure",t)})):this._processBindings(i)},getBatchChanges:function(){return this.batchChanges},editCell:function(i,n){var l;if(!this.element.ejWaitingPopup("model.showOnInit")&&this.model.editSettings.allowEditing&&-1==e.inArray(n,this._disabledEditableColumns)){if(l=e("#"+this._id+"EditForm"),this.model.isEdit&&this.saveCell(),e.isFunction(e.validator)&&l.length&&l.validate().errorList.length)return;var o=e(this.getRows()[i]),r=this.getColumnIndexByField(n),a=o.find(".e-rowcell").eq(r),d=this.model.columns[r],h=this.getDataByIndex(i),c={validationRules:t.isNullOrUndefined(d.validationRules)?{}:e.extend(!0,{},d.validationRules),columnName:d.field,value:t.getObject(t.isNullOrUndefined(n)?"":n,h),rowData:h,row:o,primaryKey:this._primaryKeys,columnObject:d,cell:a,isForeignKey:!t.isNullOrUndefined(d.foreignKeyValue)&&"batch"==this.model.editSettings.editMode},u=!0;if(this.model.allowScrolling&&this._refreshScroller(c),this._batchEditRowData=h,this._trigger("cellEdit",c))return;o.hasClass("e-insertedrow")&&(c.requestType="add"),(-1!=e.inArray(n,this._primaryKeys)||!1===c.columnObject.allowEditing||c.columnObject.template&&(0==c.columnObject.allowEditing||!c.columnObject.field)||c.columnObject.commands)&&(e.extend(this._bulkEditCellDetails,{cellValue:c.value,rowIndex:i,fieldName:n,rowData:c.rowData,columnIndex:r,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),u=!1),o.hasClass("e-insertedrow")&&c.columnObject.isPrimaryKey&&(u=!0),u&&(e.extend(this._bulkEditCellDetails,{rowIndex:i,cellValue:c.value,columnIndex:r,format:d.format==s?null:d.format,type:d.type,fieldName:n,cellEditType:c.columnObject.editType,rowData:h,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),this._renderBulkEditObject(c,a),o.addClass("e-editedrow").addClass("e-batchrow"),c.cell.addClass("e-editedbatchcell"),"booleanedit"==c.columnObject.editType&&c.cell.addClass("e-boolrowcell"))}},_findNextEditableCell:function(e){for(var t=this.model.columns.length,i=e;i<t;i++)if(!this.model.columns[i].template&&!this.model.columns[i].commands&&this.model.columns[i].visible)return i;return-1},_findNextCell:function(i,s){var n,l,o=[],r=this.getRows();return this.model.columns[i].template&&(this.model.columns[i].__isTemplate=!0),this.model.columns[i].commands&&(this.model.columns[i].__isCommand=!0),l=t.Predicate("visible","equal",!0).and("__isTemplate","notequal",!0).and("__isCommand","notequal",!0),e(r[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow")||(l=l.and("allowEditing","notequal",!1)),n="right"==s?this.model.columns.slice(i):this.model.columns.slice(0,i+1).reverse(),0!=(o=t.DataManager(n).executeLocal(t.Query().where(l))).length||"left"==s&&0==this._bulkEditCellDetails.rowIndex||"right"==s&&this._bulkEditCellDetails.rowIndex+1==this.getRows().length||(n="right"==s?this.model.columns.slice(0,i):this.model.columns.slice(i).reverse(),o=t.DataManager(n).executeLocal(t.Query().where(l)),this._bulkEditCellDetails.rowIndex=o.length&&"right"==s?this._bulkEditCellDetails.rowIndex+1:this._bulkEditCellDetails.rowIndex-1),o.length?e.inArray(o[0],this.model.columns):-1},_moveCurrentCell:function(i){var s,n=this._bulkEditCellDetails.rowIndex,l=e("#"+this._id+"EditForm");if(-1==this._bulkEditCellDetails.rowIndex&&-1==this._bulkEditCellDetails.columnIndex)return!0;switch(i){case"right":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1&&this._bulkEditCellDetails.columnIndex==this.model.columns.length-1||!this.element.is(document.activeElement)&&0==l.length)return!0;this._bulkEditCellDetails.columnIndex==this.model.columns.length-1?(s=0,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex+1):s=this._bulkEditCellDetails.columnIndex+1,t.isNullOrUndefined(this.model.columns[s].template)&&t.isNullOrUndefined(this.model.columns[s].commands)&&!1!==this.model.columns[s].visible&&!1!==this.model.columns[s].allowEditing||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=n&&this.selectRows(this._bulkEditCellDetails.rowIndex),-1!=s&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"left":if(0==this._bulkEditCellDetails.rowIndex&&0==this._bulkEditCellDetails.columnIndex||!this.element.is(document.activeElement)&&0==l.length)return!0;0==this._bulkEditCellDetails.columnIndex?(s=this.model.columns.length-1,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex-1,this.selectRows(this._bulkEditCellDetails.rowIndex)):s=this._bulkEditCellDetails.columnIndex-1,t.isNullOrUndefined(this.model.columns[s].template)&&t.isNullOrUndefined(this.model.columns[s].commands)&&!1!==this.model.columns[s].visible&&!1!==this.model.columns[s].allowEditing||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=n&&this.selectRows(this._bulkEditCellDetails.rowIndex),-1!=s&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"up":if(0==this._bulkEditCellDetails.rowIndex)return;s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex-1),this.editCell(this._bulkEditCellDetails.rowIndex-1,this.model.columns[this._bulkEditCellDetails.columnIndex].field);break;case"down":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1)return void this.endEdit();s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex+1),-1!=this._bulkEditCellDetails.columnIndex&&this.editCell(this._bulkEditCellDetails.rowIndex+1,this.model.columns[this._bulkEditCellDetails.columnIndex].field)}return addedRow=!e(this.getRows()[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow"),-1!=s&&(this.model.columns[s].commands||this.model.columns[s].isPrimaryKey&&addedRow||this.model.columns[s].template)&&this.element.focus(),!1},_renderBulkEditObject:function(i,s){var n,l,o,r,a=t.buildTag("form","",{},{id:this._id+"EditForm"}),d=this._bulkEditTemplate,h=(this._id,i.columnObject.field,{});t.createObject(i.columnObject.field,i.value,h),o={requestType:i.requestType},s.empty(),s.parent().is(":last-child")||(s.addClass("e-validError"),s.removeClass("e-gupdatenotify")),l=d.find("#"+i.columnObject.field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit").html(),"SELECT"==(n=e(e.templates(l).render(h))).get(0).tagName&&(r=t.getObject(i.columnObject.field,h),n.val(t.isNullOrUndefined(r)?"":r.toString()),null==n.val()&&n.val(n.find("option").first().val()),n.data("ej-value",r)),a.append(n),s.append(a),this._setoffsetWidth(),this._refreshEditForm(o),e.isFunction(e.validator)&&!e.isEmptyObject(i.validationRules)&&(this.initValidator(),this.setValidationToField(i.columnObject.field,i.validationRules)),this.model.isEdit=!0},_triggerConfirm:function(e){if(e!==s&&e.model.text==this.localizedLabels.OkButton)this._confirmDialog.find(".e-content").text()==this.localizedLabels.BatchSaveConfirm?this.batchSave():this._confirmDialog.find(".e-content").text()==this.localizedLabels.ConfirmDelete?"batch"==this.model.editSettings.editMode?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():t.isNullOrUndefined(this._cDeleteData)?this.deleteRow():(this.deleteRow(this._cDeleteData),this._cDeleteData=null):this._confirmDialog.find(".e-content").text()==this.localizedLabels.CancelEdit?this.cancelEdit():(this._confirmedValue=!0,this._processBindings(this._requestArgs));else{if(this._confirmDialog.find(".e-content").text()!=this.localizedLabels.BatchSaveConfirm&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.ConfirmDelete&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.CancelEdit)switch(this._requestArgs.requestType){case"grouping":this.model.groupSettings.groupedColumns.pop();break;case"ungrouping":this.model.groupSettings.groupedColumns.push(this._requestArgs.columnName);break;case"sorting":this._cSortedDirection=this._cSortedColumn=null;break;case"filtering":this.model.filterSettings.filteredColumns.reverse().splice(0,this._requestArgs.currentFilterObject),this.model.filterSettings.filteredColumns.reverse();break;case"paging":this._currentPage(this._requestArgs.previousPage),this.getPager().ejPager("model.currentPage",this._requestArgs.previousPage)}this._confirmedValue=!1}this._requestArgs=null,this._confirmDialog.ejDialog("close")},_batchCellValidation:function(e){var t,s=this.getRowByIndex(e);if("batch"==this.model.editSettings.editMode&&this.model.isEdit&&s.hasClass("e-insertedrow"))for(i=0;i<this._validatedColumns.length;i++){if(t=this.getColumnIndexByField(this._validatedColumns[i]),!this.editFormValidate())return!0;this.editCell(e,this.model.columns[t].field)}},_saveCellHandler:function(t){var i,s=e(t.target);t.stopPropagation(),i="top"==this.model.editSettings.rowPosition||null==this._gridRows?0:this._gridRows.length-1,0==s.closest(".e-popup").length&&0==s.closest(".e-rowcell").find("#"+this._id+"EditForm").length&&(e(this.getRows()).hasClass("e-insertedrow")&&this._batchCellValidation(i),this.saveCell())},initValidator:function(){for(var t=this,i=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):e("#"+this._id+"EditForm"),s=0;s<i.length;s++)i.eq(s).validate({ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(e,i){t._renderValidator(e,i)}})},_renderValidator:function(i,s){var n,l,o,r,a;if(s.is(":hidden")&&(s=s.siblings("input:visible")),s.length){var d=s.closest(".e-rowcell"),h=e(i).addClass("e-error"),c=t.buildTag("div.e-errortail e-toparrow"),u=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),m=0;(d=d.length?d:d=s.closest("td")).find(".e-error").remove(),s.parent().hasClass("e-in-wrap")?h.insertAfter(s.closest(".e-widget")):h.insertAfter(s),h[(n=this.model.scrollSettings.frozenRows>0&&this._currentTrIndex>=this.model.scrollSettings.frozenRows)?"append":"prepend"](c),this.model.allowScrolling&&(u&&u._hScrollbar||u._vScrollbar)&&(d.addClass("e-validError"),m=u._hScrollbar?u._hScrollbar.element[0].offsetTop:0);var p=d.offset().top+d[0].offsetHeight+i[0].offsetHeight,g=!1,f=u&&u._hScrollbar?u._hScrollbar.model.height:0;if((u&&u.isHScroll()&&p>m||p>this.getContent()[0].offsetTop+this.getContent().find(".e-content").height())&&(g=!0),this.model.enableRTL?"dialog"!=this.model.editSettings.editMode&&h.offset({top:s.offset().top+s.height()}):"dialog"!=this.model.editSettings.editMode&&h.offset({left:s.offset().left,top:s.offset().top+s.height()}),this.model.scrollSettings.frozenRows<=0&&-1==e.inArray(this.model.editSettings.editMode,["externalform","externalformtemplate","dialog","dialogtemplate"])){var _=this.getContent(),v=_.find(".e-content"),b=v.height(),C=_[0].offsetTop;if(g&&null!=u&&u._vScrollbar&&this.model.scrollSettings.frozenColumns){u._vScrollbar.model.value,v[0].scrollHeight;var w=C+v[0].scrollHeight,y=C+b;(!this.model.scrollSettings.frozenColumns&&p>w||this.model.scrollSettings.frozenColumns&&p>y)&&(u._vScrollbar.model.maximum+=p-(C+b),u._vScrollbar.refresh(!0)),this.model.scrollSettings.frozenColumns&&(l=this.getContent().find(".e-movablecontent")).height(l[0].scrollHeight),u.scrollY(s.offset().top-C+v[0].scrollTop)}else g&&this.model.allowScrolling&&null!=u&&(u.isVScroll()?u.isVScroll()&&(u.refresh(),this._showHideScroller(),u._vScroll&&(r=u._vScrollbar.model.value+(p-(C+b+f-f)),u.scrollY(r))):(o=p-(C+b),v.height(b+o)))}else n&&(g?(a=h.css("top"),c.addClass("e-bottomarrow"),h.css({bottom:a,top:"auto"})):c.prependTo(c.parent()));h.show("slow")}},setValidation:function(){for(var e=0;e<this.model.columns.length;e++)t.isNullOrUndefined(this.model.columns[e].validationRules)||this.setValidationToField(this.model.columns[e].field,this.model.columns[e].validationRules)},setValidationToField:function(i,s){var n,l,o,r,a=i;t.isNullOrUndefined(i)||(a=a.replace(/[^a-z0-9\s_]/gi,"")),n=(l="batch"==this.model.editSettings.editMode?this.element.find("#"+this._id+"EditForm"):this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform"):this.element.find(".e-addedrow .gridform"):this.element.find(".gridform")).find("#"+this._id+a).length>0?l.find("#"+this._id+a):l.find("#"+a),s.regex&&(s[i+"regex"]=s.regex,delete s.regex,e.validator.addMethod(a+"regex",function(e,t,i){return(i instanceof RegExp?i:new RegExp(i)).test(e)},t.getObject("messages.regex",s)||this.getColumnByField(i).headerText+" should match the given pattern")),n.attr("name")||n.attr("name",i),n.rules("add",s),(o=e("#"+this._id+"EditForm").validate()).settings.messages[i]=o.settings.messages[i]||{},t.isNullOrUndefined(s.required)||(0==(r=t.isNullOrUndefined(s.messages&&s.messages.required)?e.validator.messages.required:s.messages.required).indexOf("This field")&&(r=r.replace("This field",this.getColumnByField(i).headerText)),o.settings.messages[i].required=r,n.hasClass("e-datepicker")&&n.ejDatePicker({watermarkText:""}))},_renderConfirmDialog:function(){var i=t.buildTag("div.e-content",this.localizedLabels.BatchSaveConfirm),s=t.buildTag("span.e-buttons",'<input type="button" id='+this._id+'ConfirmDialogOK value="'+this.localizedLabels.OkButton+"\" /> <input type='button' id="+this._id+"ConfirmDialogCancel value='"+this.localizedLabels.CancelButton+"' />");this._confirmDialog=t.buildTag("div#"+this._id+"ConfirmDialog"),this._confirmDialog.append(i).append(s),this.element.append(this._confirmDialog),s.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:e.proxy(this._triggerConfirm,this)}),this._renderFDialog(this._id+"ConfirmDialog"),this._confirmDialog.ejDialog({width:"auto",minWidth:0,minHeight:0,enableModal:!0})},_unboundClickHandler:function(i){var s,n,l,o,r,a,d,h,c=e(i.target).closest("button");if(!(c.hasClass("e-button")&&(c.hasClass("e-disable")||c.prop("disabled"))||(s=0,n={},e(i.target).hasClass("e-unboundcelldiv")))){if(l=c.hasClass("e-savebutton")?this.getIndexByRow(e(".e-editedrow")):this.getIndexByRow(c.closest("tr")),this.model.isEdit&&(!this._isLocalData||this._isRemoteSaveAdaptor)&&c.hasClass("e-editbutton"))return void(this._unboundRow=c.closest("tr"));if(o=this._currentJsonData[l],r=e(c).ejButton("instance"),("inlineform"==this.model.editSettings.editMode||"inlinetemplate"==this.model.editSettings.editMode)&&(s=e("#"+this._id).find(".e-editedrow").length),this.model.allowSelection&&!this.model.isEdit&&this.selectRows(this.getIndexByRow(c.closest("tr"))-s),c.hasClass("e-cancelbutton")&&(this.model.isEdit=!1),e.isFunction(e.fn.ejDatePicker)&&e("#"+this._id+"EditForm").find(".e-datepicker").ejDatePicker("hide"),c.hasClass("e-editbutton"))this.model.isEdit&&this.cancelEdit(),a=this.getRowByIndex(l),this.startEdit(a);else if(c.hasClass("e-deletebutton")){if(a=this.getRowByIndex(l),this.model.editSettings.showDeleteConfirmDialog)return void this._toolbarOperation(this._id+"_delete");this.deleteRow(a)}else c.hasClass("e-savebutton")?(this.endEdit(),o=this._currentJsonData[l]):c.hasClass("e-cancelbutton")&&this.cancelEdit();n={rowIndex:l,data:o,buttonModel:r.model,commandType:c.val()},t.raiseWebFormsServerEvents&&(d={model:this.model,originalEventType:"commandButtonClick"},h=n,t.isNullOrUndefined(this.model.serverEvents)||-1==e.inArray("commandButtonClick",this.model.serverEvents)||t.raiseWebFormsServerEvents("commandButtonClick",d,h))}},addRecord:function(i,s){var n,l;this.model.editSettings.allowAdding&&0==e(".e-gridcontent").find(".gridform").length&&(i?(("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&(n=t.buildTag("tr.e-addedrow"),this.getContentTable().find("tbody").first().prepend(n)),(l={data:i}).action="add",l.selectedRow=this._selectedRow(),this._cAddedRecord=i,l.requestType=t.Grid.Actions.Save,this._updateAction(l),-1!=l.selectedRow&&this.selectRows(l.selectedRow+1),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),s||("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&this.model.allowPaging&&this.model.pageSettings.pageSize<this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild)):this._startAdd())},updateRecord:function(e,i){this._updateDeleteRecord(e,i,"update"),"batch"!=this.model.editSettings.editMode&&(this.model.sortSettings.sortedColumns.length||this.model.summaryRows.length>0||this.model.groupSettings.groupedColumns.length||!t.isNullOrUndefined(this._searchCount)||this.filterColumnCollection.length)&&this.refreshContent()},_updateDeleteRecord:function(i,s,n){var l,o,r,a;(l=t.DataManager(this._currentJsonData).executeLocal(t.Query().where(i,t.FilterOperators.equal,s[i]))).length&&(-1!=(o=e.inArray(l[0],this._currentJsonData))&&(r=this.getRowByIndex(o),"update"==n?(t.copyObject(l[0],s),a=e(e.render[this._id+"_JSONTemplate"](l)),r.hasClass("e-alt_row")?a.addClass("e-alt_row"):a.removeClass("e-alt_row"),r.replaceWith(a),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),"batch"==this.model.editSettings.editMode?this.batchChanges.changed.push(l[0]):this._dataManager[n](i,s),this._isMapSelection&&(this._selectionByGrid=!0,this.multiSelectCtrlRequest=!0,s[this._selectionMapColumn]?this.selectRows(o):this.clearSelection(o),this._selectionByGrid=!1)):(-1==e.inArray(o,this.selectedRowsIndexes)&&this.selectedRowsIndexes.push(o),this.deleteRow(r)),"batch"==this.model.editSettings.editMode&&(this.batchSave(),this._confirmedValue=!0)))},deleteRecord:function(e,t){this._updateDeleteRecord(e,t,"remove")}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.sort={_addSortElementToColumn:function(i,s){var n,l,o,r;if(l=t.DataManager(this.model.columns).executeLocal(t.Query().where("field","equal",i)).length>1?this.getColumnByHeaderText(this._$curSElementTarget.text()):this.getColumnByField(i),!t.isNullOrUndefined(l)){var a=e.inArray(l,this.model.columns),d=this.getsortColumnByField(i),h=e.inArray(d,this.model.sortSettings.sortedColumns),c=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(a).find(".e-headercelldiv");if(s=t.isNullOrUndefined(s)?"ascending":s.toLowerCase(),c.find(".e-ascending,.e-descending").remove(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").find(".e-ascending,.e-descending").not(".e-ungroupbutton").remove(),n="descending"!=s?"e-rarrowup-2x":"e-rarrowdown-2x",o=1,this.model.allowSorting&&this.model.allowMultiSorting&&this.model.sortSettings.sortedColumns.length>1){for(r=1;r<=h;r++)o+=1;c.css("text-align"),c.prepend(this._createSortNumber(o,c).addClass("e-sortnumber")),c.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n))}else c.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n));this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n)),c.parent().attr("aria-sort",s)}},_removeSortElementFromColumn:function(t){var i=this.getColumnByField(t),s=e.inArray(i,this.model.columns),n=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell").eq(s).find(".e-headercelldiv");n.find(".e-ascending,.e-descending").remove(),n.parent().prop("aria-sort",!1)},_sortCompleteAction:function(i){var s,n,l;for(this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i.columnName+"']").find(".e-ascending,.e-descending,.e-number").not(".e-ungroupbutton").remove(),this.getHeaderTable().find("[aria-sort]").prop("aria-sort",!1),n=0;n<this.model.sortSettings.sortedColumns.length;n++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[n].field,this.model.sortSettings.sortedColumns[n].direction);this.model.groupSettings.groupedColumns.length&&null!=this._$curSElementTarget&&(l=this._checkEinGroupDrop(e.trim(this._$curSElementTarget.attr("ej-mappingname"))),t.isNullOrUndefined(l)||(s="ascending"==(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)?"e-rarrowup-2x":"e-rarrowdown-2x",l.find(".e-ascending,.e-descending").removeClass().addClass("e-icon e-"+(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)+" "+s))),this.multiSortRequest=!1,(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns()},removeSortedColumns:function(t){if(e.isArray(t))for(var i=0;i<t.length;i++)this._removeSortedColumnFromCollection(t[i]);else this._removeSortedColumnFromCollection(t);this.multiSortRequest=!0,this.sortColumn(null,null)},_removeSortedColumnFromCollection:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length;t++)if(this.model.sortSettings.sortedColumns[t].field==e){this.model.sortSettings.sortedColumns.splice(t,1);break}},clearSorting:function(){var t=this;this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(i){return-1!=e.inArray(i.field,t.model.groupSettings.groupedColumns)}),this._$prevSElementTarget=null,this._$curSElementTarget=null,this.refreshContent()},sortColumn:function(i,s){var n,l;this.model.allowSorting&&-1==e.inArray(i,this._disabledSortableColumns)&&(null==i||0!=i.length)&&(n={},this.multiSortRequest||(l=this,this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(t){return-1!=e.inArray(t.field,l.model.groupSettings.groupedColumns)})),n.requestType=t.Grid.Actions.Sorting,this._cSortedColumn=n.columnName=i,this._cSortedDirection=n.columnSortDirection=t.isNullOrUndefined(s)?t.sortOrder.Ascending:s.toLowerCase(),null!==this._cSortedColumn&&(this._removeSortedColumnFromCollection(i),this.model.sortSettings.sortedColumns.push({field:this._cSortedColumn,direction:this._cSortedDirection})),this._processBindings(n)&&(this._cSortedDirection=this._cSortedColumn=null),this._primaryKeyValues=[])},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),"multiple"==this.model.selectionType&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function($,ej,undefined){ej.gridFeatures=ej.gridFeatures||{},ej.gridFeatures.filter={getFilterBar:function(){return this._gridFilterBar},setGridFilterBar:function(e){this._gridFilterBar=e},filterColumn:function(e,t,i,s,n,l){var o,r,a,d,h,c,u,m,p;if(this.model.allowFiltering)for(o=this.getColumnByField(e),(ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||"boolean"!=o.type||"true"!=i)&&"false"!=i||(i=JSON.parse(i)),!ej.isNullOrUndefined(o)&&!ej.isNullOrUndefined(o.filterBarTemplate)&&("date"==o.type||"datetime"==o.type)&&i.length>0&&(r=ej.isNullOrUndefined(o.format)?"date"==this._currentFilterColumn.type?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:o.format.replace("{0:","").replace("}",""),i=ej.parseDate(i,r,this.model.locale)),a=[],"object"==typeof e?a=e:a.push({field:e,operator:t,value:i,predicate:s,matchcase:n,actualFilterValue:l}),d=0;d<a.length;d++){e=a[d].field,t=a[d].operator,i=a[d].value,s=a[d].predicate,n=!ej.isNullOrUndefined(a[d].matchcase)&&a[d].matchcase,l=a[d].actualFilterValue;var g={};for(g.requestType=ej.Grid.Actions.Filtering,g.currentFilterObject=[],this._$curFieldName=e,$.isArray(t)||(t=$.makeArray(t)),$.isArray(i)||(i=$.makeArray(i)),$.isArray(s)||(s=$.makeArray(s)),h=!1,this._filterCollection,ej.util.isNullOrUndefined(this._currentFilterColumn)&&(this._currentFilterColumn=this.getColumnByField(e)),c=0;c<t.length;c++){if(u={field:e,operator:t[c],value:i[c],matchcase:n,predicate:s[c],actualFilterValue:ej.getObject("value",l),actualOperator:ej.getObject("operator",l)},predicated=ej.getObject("ejpredicate",l),predicated&&(u=predicated),"filterbar"==this.model.filterSettings.filterType&&(this._$colType=this._currentFilterColumn.type),0==this.model.filterSettings.filteredColumns.length&&""!==u.value)"date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof u.value?this.model.filterSettings.filteredColumns.push(u):this._setDateFilters(u);else{if(!h){var f=ej.DataManager(this.model.filterSettings.filteredColumns),_=(new ej.Query).where("field",ej.FilterOperators.equal,u.field),v=f.executeLocal(_);for(m=0;m<v.length;m++)-1!=(p=$.inArray(v[m],this.model.filterSettings.filteredColumns))&&this.model.filterSettings.filteredColumns.splice(p,1)}""!==u.value&&("date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof u.value?this.model.filterSettings.filteredColumns.push(u):this._setDateFilters(u))}h=!0,g.currentFilterObject.push(u)}g.filterCollection=this.model.filterSettings.filteredColumns,g.currentFilteringColumn=e,this._processBindings(g)&&(this.model.filterSettings.filteredColumns.reverse().splice(0,t.length),this.model.filterSettings.filteredColumns.reverse()),ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||(this.filterStatusMsg="",this._currentFilterbarValue=g.currentFilterObject[0].value,this._oldFilterColumn!=o&&this.filterColumnCollection.length>0&&-1==$.inArray(o,this.filterColumnCollection)&&this.filterColumnCollection.push(o),this._oldFilterColumn=this._currentFilterColumn=o,this._showFilterMsg())}},search:function(e){var t={};$("#"+this._id+"_search").find("input").val(),$("#"+this._id+"_search").find("input").val(e),t.requestType=ej.Grid.Actions.Search,t.keyValue=e,this.model.searchSettings.fields=0!=this.model.searchSettings.fields.length?this.model.searchSettings.fields:this.getColumnFieldNames(),(""!=e||""!=this.model.searchSettings.key)&&(this.model.searchSettings.key=e.toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":e.toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":e,this._processBindings(t)),this._primaryKeyValues=[]},_filterBarHandler:function(e){var t,i,s,n=e.keyCode,l=$(e.target);if(l.closest(".e-grid").attr("id")===this._id&&("immediate"==this.model.filterSettings.filterBarMode||13==n)&&9!=n){for(l=$(e.target),this.filterStatusMsg="",t=l.prop("id").replace("_filterBarcell",""),s=0;s<this.model.columns.length;s++){if(!ej.isNullOrUndefined(this.model.columns[s].foreignKeyValue)&&-1!=t.indexOf("_"+this.model.columns[s].foreignKeyValue)){i=this.model.columns[s];break}if(this.model.columns[s].field==t){i=this.model.columns[s];break}}if(null==i)return;if(this._currentFilterColumn=i,this._$curFieldName=i.field,this._currentFilterColumn!=this._oldFilterColumn&&(this.filterValueOldLength=0),this._currentFilterbarValue=l.val().toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":l.val().toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":l.val(),this.filterValueCurrentLength=this._currentFilterbarValue.length,(0==this.filterValueCurrentLength&&0==this.filterValueOldLength||this._currentFilterbarValue==this.OldfilterValue)&&this._currentFilterColumn==this._oldFilterColumn&&!this.model.scrollSettings.enableVirtualization)return void this._showFilterMsg();if(this._skipFilterProcess=this._checkForSkipInput(),this._skipFilterProcess){if("string"!=this._currentFilterColumn.type)return this._skipFilterProcess=!1,void(this.model.scrollSettings.enableVirtualization||this._showFilterMsg());this.filterStatusMsg="Invalid Filter Data",this._showFilterMsg()}else this._processFilter(e)}},_renderResponsiveFilter:function(){for(var e,t=ej.buildTag("div#responsiveFilter.resFilterDiv","",{width:"100%",padding:"0px"}),i=$(window).height()+1,s=.08*i,n=(this.element.height()>i?$(window).width():$(window).width(),ej.buildTag("div.columnDiv","",{width:"100%"})),l=0;l<this.model.columns.length;l++)e=ej.buildTag("div.e-responsivefilterColDiv","",{width:"100%"},{"ej-MappingName":this.model.columns[l].field}),a=ej.buildTag("span",this.model.columns[l].headerText,{"margin-left":"4%"}),e.append(a),n.append(e);t.append(n),this.element.append(t);var o=this,r=(this.element.outerWidth(),ej.buildTag("div.e-resFilterDialogHeaderDiv","",{height:s})),a=ej.buildTag("div.labelRes","<span>Filter</span>"),d=ej.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),h=ej.buildTag("span.e-icon e-responsiveFilterClear e-resIcon","",{"font-size":"23px"}),c=ej.buildTag("div.e-resFIlterRigthIcon","",{float:"right","margin-top":"3%"},{closeDialogue:"responsiveFilter",gridEle:!0}),u=ej.buildTag("span.e-icon e-responisveClose e-resIcon","",{"font-size":"23px"},{closeDialogue:"responsiveFilter",gridEle:!0});c.click(function(){$("#responsiveFilter").css("display","none"),o.element.css("display","block")}),d.click(function(){$("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-filternone").click()}),r.append(d.append(h)),r.append(a).append(c.append(u)),t.prepend(r),t.insertAfter(this.element),$(".resFilterDiv").on("keydown",$.proxy(this._responsiveDialogueKeyUp,this)),t.css("display","none"),$(".e-responsivefilterColDiv").on("click",$.proxy(this._mouseClickHandler,this))},_closeDivIcon:function(e){var t,i=$(e.target);ej.isNullOrUndefined(i.attr("closeDialogue"))||(t=$("#"+i.attr("closeDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","none"):t.ejDialog("close")),ej.isNullOrUndefined(i.attr("gridEle"))||this.element.css("display","block"),ej.isNullOrUndefined(i.attr("openDialogue"))||(this.model.enableResponsiveRow||-1!=i.attr("closeDialogue").indexOf("Custom")?(t=$("#"+i.attr("openDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","block"):t.ejDialog("open")):this.element.css("display","block"))},_setResponsiveFilterIcon:function(){var e,t=$("#responsiveFilter").find(".columnDiv"),i=this;for(t.find(".e-filtericon").remove(),e=0;e<this.model.filterSettings.filteredColumns.length;e++){var s=this.model.filterSettings.filteredColumns[e],n=t.find(".e-responsivefilterColDiv[ej-MappingName="+s.field+"]"),l=ej.buildTag("div.e-filtericon e-icon e-resIcon e-filterset e-filternone e-filterreset","",{float:"right",height:"22px",width:"21px","font-size":"20px","margin-right":"3%","margin-top":"2%"}),o=ej.buildTag("span.e-filtericon e-icon e-resIcon e-filterset e-filternone","",{},{colType:s.type});n.find(".e-filternone").remove(),n.append(l),o.click(function(e){var t=e.target;i._$colType=t.attr("colType"),i._fltrClrHandler(),t.remove()})}},_renderExcelFilter:function(){var e=0!=this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns[0].field:null,t={instance:this,showSortOptions:this.model.allowSorting,allowFormatFiltering:this.model.filterSettings.allowFormatFiltering,allowCaseSensitive:this.model.filterSettings.enableCaseSensitivity,maxFilterLimit:this.model.filterSettings.maxFilterChoices,interDeterminateState:this.model.filterSettings.enableInterDeterminateState,enableComplexBlankFilter:this.model.filterSettings.enableComplexBlankFilter,blankValue:this.model.filterSettings.blankValue,filterHandler:ej.proxy(this._filterHandler,this),initFilterCol:e,actionBegin:"actionBegin",actionComplete:"actionComplete"};this._excelFilter=new ej.excelFilter(t),$.extend(this._excelFilter,this.model.filterSettings)},_filterHandler:function(e){var t,i,s,n,l,o,r,a,d={};if(d.requestType="sorting"==e.action?e.action:"filtering",i=this.model.filterSettings.filteredColumns,"filtering"==e.action){for(t=ej.DataManager(this.model.filterSettings.filteredColumns),s=(new ej.Query).where("field",ej.FilterOperators.equal,e.fieldName),n=t.executeLocal(s),l=0;l<n.length;l++)-1!=(o=$.inArray(n[l],this.model.filterSettings.filteredColumns))&&this.model.filterSettings.filteredColumns.splice(o,1);ej.merge(this.model.filterSettings.filteredColumns,e.filterCollection),e.currentFilterCollection=e.filterCollection}else{if("clearfiltering"==e.action)return r=e.filterDetails,delete this._excelFilter._predicates[0][e.fieldName],void this.filterColumn(r.field,r.operator,r.value,r.predicate);if("sorting"==e.action)return a=e.sortDetails,ej.gridFeatures.sort&&this.sortColumn(a.field,a.direction),void this._excelFilter.closeXFDialog()}d.currentFilteringColumn=e.fieldName,d.predicated=e.ejpredicate,this._processBindings(d)&&(this.model.filterSettings.filteredColumns=i)},_renderFiltering:function(){var e,t,i,s,n,l,o,r,a=this.getHeaderTable(),d=ej.buildTag("tr.e-filterbar"),h=[];for((this.model.detailsTemplate||this.model.childGrid)&&d.append(ej.buildTag("th.e-filterbarcell e-mastercell")),n=0;n<this.model.columns.length;n++){var c=ej.buildTag("th.e-filterbarcell"),u=ej.buildTag("div.e-filterdiv"),m=ej.buildTag("span.e-cancel e-icon e-hide"),p=ej.isNullOrUndefined(this.model.columns[n].field)?this.model.columns[n].field:this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,""),g=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?p+"_filterBarcell":p+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell";if(0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[n].field)?(u.addClass("e-fltrinputdiv"),p=this.model.columns[n].field,g=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?p+"_filterBarcell":p+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell",s=ej.buildTag("input.e-ejinputtext e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,type:"search",id:g})):(c.addClass("e-fltrtemp"),u.addClass("e-fltrtempdiv"),ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate.create)?s=ej.buildTag("input e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:g,class:"e-filterUi_input e-filtertext e-fltrTemp"}):(e={columnIndex:n,column:this.model.columns[n]},"string"==typeof(t=this.model.columns[n].filterBarTemplate.create)&&(t=ej.util.getObject(t,window)),s=t(e),s=$(s).attr({title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:g,class:"e-filterUi_input e-filtertext e-fltrTemp"}))),this.model.filterSettings.filteredColumns.length>0&&"filterbar"==this.model.filterSettings.filterType&&-1==$.inArray(this.model.columns[n].field,h))for(l=0;l<this.model.filterSettings.filteredColumns.length;l++)this.getColumnIndexByField(this.model.filterSettings.filteredColumns[l].field)==n&&("greaterthan"==this.model.filterSettings.filteredColumns[l].operator?s.val(">"+this.model.filterSettings.filteredColumns[l].value):"lessthan"==this.model.filterSettings.filteredColumns[l].operator?s.val("<"+this.model.filterSettings.filteredColumns[l].value):"notequal"==this.model.filterSettings.filteredColumns[l].operator?s.val("!="+this.model.filterSettings.filteredColumns[l].value):s.val(this.model.filterSettings.filteredColumns[l].value),-1==$.inArray(this.model.filterSettings.filteredColumns[l].field,h)&&h.push(this.model.filterSettings.filteredColumns[l].field));(!1===this.model.columns[n].allowFiltering||""==this.model.columns[n].field||ej.isNullOrUndefined(this.model.columns[n].field))&&(s.attr("disabled",!0).addClass("e-disable"),this._disabledFilterableColumns.push(this.model.columns[n].headerText)),!1===this.model.columns[n].visible&&c.addClass("e-hide"),ej.isNullOrUndefined(this.model.columns[n].cssClass)||c.addClass(this.model.columns[n].cssClass),0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)?u.append(s).append(m):u.append(s),d.append(c.append(u)),n==this.model.scrollSettings.frozenColumns-1&&(i=d.clone(),a.find("thead").first().append(i),d.empty())}if(a.find("thead").last().append(d),"msie"==ej.browserInfo().name&&ej.browserInfo().version<10)for(o=a.find("thead").find(".e-ejinputtext.e-filtertext"),r=0;r<o.length;r++)ej.ieClearRemover(o[r]);this.setGridFilterBar(d)},_renderFilterBarTemplate:function(){for(var e,t,i,s=!1,n=0;n<this.model.columns.length;n++)0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[n].field)||("string"==typeof(t=this.model.columns[n].filterBarTemplate.read)&&(t=ej.util.getObject(t,window)),"string"==typeof(e={element:this.getHeaderTable().find(".e-filterbar").find(".e-fltrtemp").find("#"+this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,"")+"_filterBarcell"),columIndex:n,column:this.model.columns[n]}).column.filterBarTemplate.read&&(e.column.filterBarTemplate.read=t),"string"==typeof(i=this.model.columns[n].filterBarTemplate.write)&&(i=ej.util.getObject(i,window)),i.call(this,e),s=!0);s&&(this.model.filterSettings.filterBarMode=ej.Grid.FilterBarMode.OnEnter)},_closeFilterDlg:function(){ej.isNullOrUndefined($("#"+this._id+"_"+this._$colType+"Dlg").data("ejDialog"))?$("#"+this._id+"_"+this._$colType+"Dlg").css("display","none"):$("#"+this._id+"_"+this._$colType+"Dlg").ejDialog("close"),this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1},_filterBarClose:function(e){var t,i=$(e.target);i.closest(".e-grid").attr("id")===this._id&&("click"==e.type&&i.hasClass("e-cancel")&&((t=i.prev()).focus().val(""),t.trigger("keyup"),e.stopPropagation()),"focusin"==e.type&&i.hasClass("e-filtertext")&&(i=$(e.target).next(),this.getFilterBar().find(".e-cancel").addClass("e-hide"),i.removeClass("e-hide")))},_processFilter:function(e){this._alreadyFilterProcessed?(this._stopTimer(),this._startTimer(e)):(this._alreadyFilterProcessed=!0,this._startTimer(e))},_startTimer:function(e){var t=this,i=13==e.keyCode?0:t.model.filterSettings.immediateModeDelay;this._timer=window.setTimeout(function(){t._onTimerTick()},i)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_onTimerTick:function(){var e,t,i;this.OldfilterValue=this._currentFilterbarValue,this._oldFilterColumn=this._currentFilterColumn,this.filterValueOldLength=this.filterValueCurrentLength,this._findPredicate();var s="string"!=this._currentFilterColumn.type,n=$.extend([],this.model.filterSettings.filteredColumns);for(e=0;e<n.length;e++)""==this.getHeaderContent().find(".e-filterbar #"+n[e].field+"_filterBarcell").val()&&(-1!=$.inArray(this.model.filterSettings.filteredColumns[e],this.filterColumnCollection)&&this.filterColumnCollection.splice(e,1),this.model.filterSettings.filteredColumns.splice(e,1));if("date"==this._currentFilterColumn.type||"datetime"==this._currentFilterColumn.type)for(t=0;t<this.model.filterSettings.filteredColumns.length;t++)this.model.filterSettings.filteredColumns[t].isComplex&&(i=this.model.filterSettings.filteredColumns[t].predicates,1==this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns=i:(this.model.filterSettings.filteredColumns[t]=i[0],this.model.filterSettings.filteredColumns.push(i[1])));this._skipFilterProcess?this.filterStatusMsg="Invalid Filter Data":this._currentFilterColumn.foreignKeyValue&&this._currentFilterColumn.dataSource&&""!=this._currentFilterbarValue?this._fltrForeignKeyValue(this._operator,this._currentFilterbarValue,s,this._currentFilterColumn.dataSource,this._currentFilterColumn.foreignKeyField,this._currentFilterColumn.foreignKeyValue,this._currentFilterColumn.type):ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.filterColumn(this._currentFilterColumn.field,this._operator,this._currentFilterbarValue,this._predicate,s),!this.model.scrollSettings.enableVirtualization&&ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this._showFilterMsg(),this._stopTimer()},_findPredicate:function(){var e,t=this._currentFilterbarValue.replace(/ && /i," and ").replace(" || "," or "),i=t.split(" ");if(this._predicate="and",0!=i.length)if($.isFunction(ej.Predicate[i[1]])){this._skipFilterProcess=!1,this._predicate=i[1];var s=t.split(" "+i[1]+" "),n=[],l=[];for(e=0;e<s.length;e++)this._validateFilterValue(s[e]),n.push(this._operator),"number"==this._currentFilterColumn.type?l.push(this._currentFilterbarValue):"string"==this._currentFilterColumn.type&&l.push(s[e]);this._currentFilterbarValue=l,this._operator=n}else this._validateFilterValue($.trim(this._currentFilterbarValue));else this._validateFilterValue($.trim(this._currentFilterbarValue))},_validateFilterValue:function(e){var t,i,s,n;switch(this._currentFilterColumn.type){case"number":for(this._operator=ej.FilterOperators.equal,t=[">","<","=","!"],i=0;i<e.length&&-1==jQuery.inArray(e[i],t);i++);i!=e.length&&(this._getOperator(e.substring(i)),0!=i&&(this._currentFilterbarValue=e.substring(0,i))),this._currentFilterbarValue=""!=this._currentFilterbarValue&&e.length>=1?ej.parseFloat(this._currentFilterbarValue,this.model.locale):e.length>1?ej.parseFloat(e,this.model.locale):e;break;case"date":case"datetime":this._operator=ej.FilterOperators.equal,this._getOperator(e),s=ej.isNullOrUndefined(this._currentFilterColumn.format)?"date"==this._currentFilterColumn.type?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:this._currentFilterColumn.format.replace("{0:","").replace("}",""),""!=this._currentFilterbarValue&&(n=ej.parseDate(this._currentFilterbarValue,s,this.model.locale),ej.isNullOrUndefined(n)?this.filterStatusMsg="Invalid Filter Data":this._currentFilterbarValue=ej.parseDate(this._currentFilterbarValue,s,this.model.locale));break;case"string":"*"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(e.length-1)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(0,-1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.endsWith):this._operator=ej.FilterOperators.startsWith;break;case"boolean":case"checkbox":"true"==this._currentFilterbarValue.toLowerCase()||"1"==this._currentFilterbarValue?this._currentFilterbarValue=!0:("false"==this._currentFilterbarValue.toLowerCase()||"0"==this._currentFilterbarValue)&&(this._currentFilterbarValue=!1),this._operator=ej.FilterOperators.equal;break;default:this._operator=ej.FilterOperators.equal}},_getOperator:function(e){"="==e.charAt(0)&&(this._operator=ej.FilterOperators.equal,this._currentFilterbarValue=e.substring(1)),(ej.data.operatorSymbols[e.charAt(0)]!==undefined||ej.data.operatorSymbols[e.slice(0,2)]!==undefined)&&(this._operator=ej.data.operatorSymbols[e.charAt(0)],this._currentFilterbarValue=e.substring(1),this._operator===undefined&&(this._operator=ej.data.operatorSymbols[e.slice(0,2)],this._currentFilterbarValue=e.substring(2))),(this._operator==ej.FilterOperators.lessThan||this._operator==ej.FilterOperators.greaterThan)&&"="==this._currentFilterbarValue.charAt(0)&&(this._operator=this._operator+"orequal",this._currentFilterbarValue=this._currentFilterbarValue.substring(1))},_checkForSkipInput:function(){var e,t,i=!1;if("number"==this._currentFilterColumn.type&&(ej.data.operatorSymbols[this._currentFilterbarValue]!==undefined||-1!=$.inArray(this._currentFilterbarValue,["="," ","!"]))&&(i=!0),"string"==this._currentFilterColumn.type)for(e=[">","<","=","!"],t=0;t<this._currentFilterbarValue.length;t++)-1!=$.inArray(this._currentFilterbarValue[t],e)&&(i=!0);return i},_showFilterMsg:function(){var e,t,i,s,n=$.inArray(this._currentFilterColumn,this.filterColumnCollection);if(""!==this._currentFilterbarValue&&-1==n&&this.filterColumnCollection.push(this._currentFilterColumn),""===this._currentFilterbarValue&&-1!=n&&this.filterColumnCollection.splice(n,1),(!this._skipFilterProcess||this.filterColumnCollection.length>0)&&"Invalid Filter Data"!=this.filterStatusMsg)for(n=0;n<this.filterColumnCollection.length;n++)i=this.filterColumnCollection[n].headerText,this.filterColumnCollection[n].disableHtmlEncode&&(i=this._htmlEscape(i)),-1!=this.filterColumnCollection[n].field.indexOf(".")?(t=this.filterColumnCollection[n].field.split(".").join("\\."),e=$("#"+t+"_filterBarcell").val()):(s=ej.isNullOrUndefined(this.filterColumnCollection[n].foreignKeyValue)?this.filterColumnCollection[n].field+"_filterBarcell":this.filterColumnCollection[n].field+"_"+this.filterColumnCollection[n].foreignKeyValue+"_filterBarcell",e="boolean"==this._currentFilterColumn.type&&!ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.element.find("#"+s).hasClass("e-checkbox e-js")?this.element.find("#"+s).parent().attr("aria-checked"):this.element.find("#"+s).val()),""!=e&&(n>0&&""!=this.filterStatusMsg&&(this.filterStatusMsg+=" && "),this.filterStatusMsg+=i+": "+e);this.model.allowPaging?this.getPager().ejPager("model.externalMessage",this.filterStatusMsg):(this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").html(this.filterStatusMsg).css("display","block"):this.$pagerStatusBarDiv.find("div").html(this.filterStatusMsg),this.filterStatusMsg.length?this.$pagerStatusBarDiv.css("display","block"):this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").hide():this.$pagerStatusBarDiv.hide()),"Invalid Filter Data"==this.filterStatusMsg&&(n=$.inArray(this._currentFilterColumn,this.filterColumnCollection),this.filterColumnCollection.splice(n,1)),this.filterStatusMsg=""},_renderFilterDialogs:function(){var e,t,i,s,n,l;$.each(this.model.columns,ej.proxy(function(o,r){"string"!=r.type||e&&ej.isNullOrUndefined(r.filterType)?"guid"!=r.type||l&&ej.isNullOrUndefined(r.filterType)?"number"!=r.type||t&&ej.isNullOrUndefined(r.filterType)?"date"!=r.type||s&&ej.isNullOrUndefined(r.filterType)?"datetime"!=r.type||n&&ej.isNullOrUndefined(r.filterType)?"boolean"!=r.type||i&&ej.isNullOrUndefined(r.filterType)||(ej.isNullOrUndefined(r.filterType)&&(i=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(n=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(s=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(t=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(l=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(e=!0),this._renderFilters(r))},this))},_renderFilters:function(col){this._isExcelFilter&&"menu"!=col.filterType||"excel"==col.filterType?(ej.isNullOrUndefined(this._excelFilter)&&(this._renderExcelFilter(),this._excelFilterRendered=!0),this._excelFilter.renderDialog(col.type)):eval(this["_render"+col.type.substring(0,1).toUpperCase()+col.type.substring(1)+"Dialog"](col))},_renderStringDialog:function(){var e,t=this._id+"_stringDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"string"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderBooleanDialog:function(){var e,t=this._id+"_booleanDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"boolean"),this.model.isResponsive&&this._mediaStatus||(this._renderFDialog(t),this.model.filterSettings.showPredicate?$("#"+t).ejDialog({minHeight:136,width:"100%"}):$("#"+t).ejDialog({minHeight:90,width:"100%"})))},_renderGuidDialog:function(){var e,t=this._id+"_guidDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"guid"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderNumberDialog:function(){var e,t=this._id+"_numberDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"number"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderDateDialog:function(e){var t,i=this._id+"_dateDlg";$("#"+i).length>0||((t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(t,"date",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderDatetimeDialog:function(e){var t,i=this._id+"_datetimeDlg";$("#"+i).length>0||((t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(t,"datetime",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderFDialog:function(e){$("#"+e).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_closeFDialog:function(){(this._isExcelFilter||this._excelFilterRendered)&&this._excelFilter.closeXFDialog(),this._$menuDlgIsOpen&&this._closeFilterDlg()},_renderDlgContent:function(e,t,i){e.addClass("e-grid");var s,n=ej.buildTag("div.e-predicate"),l=ej.buildTag("div.e-operator"),o=ej.buildTag("div.e-value"),r=this.localizedLabels.StringMenuOptions,a=this.localizedLabels.NumberMenuOptions,d=ej.buildTag("input#"+this._id+t+"_ddinput",{},{},{type:"text"}),h=ej.buildTag("div#"+this._id+t+"_dropdown"),c=ej.buildTag("ul"),u=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"or"}),m=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"and",checked:"checked"});n.append(m).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateAnd)).append(u).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateOr)),this.model.filterSettings.showPredicate||n.hide(),"string"==t&&(s=ej.buildTag("input",{},{},{type:"checkbox"}),n.append(s).append(ej.buildTag("span.e-caption").html(this.localizedLabels.MatchCase)),$.each(r,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),("number"==t||"date"==t||"datetime"==t||"guid"==t)&&("guid"==t&&(a=a.slice(4,6)),$.each(a,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),"boolean"!=t&&(h.append(c),l.append(d),l.append(h));var p=ej.buildTag("input",{},{},{type:"text"}),g=ej.buildTag("input",{},{},{type:"checkbox"}),f=this.model.enableResponsiveRow?"OkButton":"Filter",_=this.model.enableResponsiveRow?"CancelButton":"Clear",v=ej.buildTag("input.e-filter",{},{},{type:"button",value:this.localizedLabels[f]}),b=ej.buildTag("input.e-clear",{},{},{type:"button",value:this.localizedLabels[_]});o.append(ej.buildTag("span.e-caption").html(this.localizedLabels.FilterMenuCaption+" : ")),e.append(n),"boolean"==t?(o.find("span.e-caption").css("top","1px"),o.append(g)):(o.append(ej.buildTag("br")).append(p),e.append(l)),e.append(o),e.append(ej.buildTag("div.e-dlgBtns").append(v).append(b)),"boolean"!=t&&d.ejDropDownList({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,targetID:this._id+t+"_dropdown",width:"100%",height:"26px",selectedItemIndex:0}),u.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),m.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,checked:!0}),s&&s.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),e.css("display","none"),this._createButton("filter",v),this._createButton("clear",b),"number"==t?p.ejNumericTextbox({cssClass:this.model.cssClass,locale:this.model.locale,enableRTL:this.model.enableRTL,value:0,showSpinButton:!1,height:"26px",decimalPlaces:2,width:"100%"}):"guid"==t?p.css({height:"26px",width:"100%"}):"date"==t?(p.attr("id",this._id+"_dpDate"),p.ejDatePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this.model.locale}),ej.isNullOrUndefined(i.format)||p.ejDatePicker({dateFormat:i.format.replace(/{0:|}/g,function(){return""})})):"datetime"==t?(p.attr("id",this._id+"_dpDateTime"),p.ejDateTimePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",locale:this.model.locale}),ej.isNullOrUndefined(i.format)||p.ejDateTimePicker({dateTimeFormat:i.format.replace(/{0:|}/g,function(){return""})})):"boolean"==t?g.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}):"string"==t&&(p.attr("id",this._id+"_acString"),p.ejAutocomplete({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,dataSource:this._dataSource(),width:"100%",height:26,enableDistinct:!0,focusIn:function(){var e=this.element.closest(".e-dialog").find(".e-dropdownlist"),t=this.element.closest(".e-dialog").find(".e-checkbox").prop("checked");this.model.filterType=e.ejDropDownList("model.value"),this.model.caseSensitiveSearch=t},open:function(){var e=!this.element.closest(".e-dialog").ejDialog("isOpened");this.suggestionList.css({visibility:e?"hidden":"visible"})}}))},_createButton:function(e,t){var i="filter"==e?ej.proxy(this._fltrBtnHandler,this):ej.proxy(this._fltrClrHandler,this);t.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,click:i})},_getIdField:function(){var e;return $.each(this.model.columns,function(t,i){if(i.key)return e=i.field,!1}),e},_filterCompleteAction:function(){var e;if(this.model.allowPaging&&this._refreshGridPager(),"menu"==this.model.filterSettings.filterType||this._isExcelFilter){this._closeFDialog();var t=this.getColumnByField(this._$curFieldName),i=$.inArray(t,this.model.columns),s=this,n=!1;$.each(this.model.filterSettings.filteredColumns,function(e,t){return t.field==s._$curFieldName||1==t.isComplex&&t.predicates[0].field==s._$curFieldName?(n=!0,!1):void 0}),e=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell").eq(i).find(".e-filtericon"),n?e.addClass("e-filteredicon e-filternone"):e.removeClass("e-filteredicon e-filternone")}},_refreshFilterIcon:function(){var e,t,i,s,n,l;if(this.model.filterSettings.filteredColumns.length)for(e=ej.distinct(this.model.filterSettings.filteredColumns,"field",!0),t=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell"),this.model.showStackedHeader&&(t=t.not(".e-stackedHeaderCell")),this.model.allowReordering&&t.find(".e-filtericon").removeClass("e-filteredicon e-filternone"),n=0,l=e.length;n<l;n++)s=e[n],i=this.getColumnIndexByField(!0===s.isComplex?s.predicates[0].field:s.field),t.eq(i).find(".e-filtericon").addClass("e-filteredicon e-filternone")},_setFilterFieldValues:function(e){var t,i="",s=this,n=-1;$.each(this.model.filterSettings.filteredColumns,function(e,t){t.field==s._$curFieldName&&(n=e)}),-1==n&&"boolean"!=this._$colType&&("string"==this._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:!1}),$(".e-predicate input[name ="+this._id+"_predicate"+this._$colType+"]:first").ejRadioButton({checked:!0}),$("#"+this._id+this._$colType+"_ddinput").ejDropDownList({selectedItemIndex:0,change:function(){this.element.closest(".e-dialog").find(".e-autocomplete").val(i)}})),t=$(this.model.filterSettings.filteredColumns).map(function(){return this.field}).get(),(this._$curFieldName!=this._$prevFieldName||-1!=$.inArray(this._$curFieldName,t))&&($.each(this.model.filterSettings.filteredColumns,function(e,t){if(t.field==s._$curFieldName){for(var n="number"==s._$colType||"date"==s._$colType||"datetime"==s._$colType?"Number":"String",l=s.localizedLabels[n+"MenuOptions"],o=ej.isNullOrUndefined(t.actualOperator)?t.operator:t.actualOperator,r=0;r<l.length&&l[r].value.toLowerCase()!=o;r++);return"string"==s._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:t.matchcase}),$("input[value="+t.predicate+"]").ejRadioButton({checked:!0}),$("#"+s._id+s._$colType+"_ddinput").ejDropDownList({selectedItemIndex:r}),i=null!=t.actualFilterValue?t.actualFilterValue:t.value,!1}}),"boolean"==this._$colType?i&&""!=i?$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!0}):$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!1}):"date"==this._$colType||"datetime"==this._$colType?$(e).find(".e-value .e-datepicker")["date"==this._$colType?"ejDatePicker":"ejDateTimePicker"]("model.value",i):"number"==this._$colType?$(e).find(".e-value .e-numerictextbox").ejNumericTextbox("model.value",i):$(e).find(".e-value input").val(i))},_fltrBtnHandler:function(){var e;this.model.isResponsive&&this._mediaStatus&&this._responsiveFilterClose();var t,i,s=this._id+"_"+this._$colType+"Dlg",n=$("#"+s),l=n.find(".e-value input"),o=l.val(),r=undefined;"number"==this._$colType&&(l=l.filter(".e-numerictextbox"),o=parseFloat(l.ejNumericTextbox("getValue")),r=!0),"string"==this._$colType&&(r=n.find(".e-predicate input[type='checkbox']").is(":checked")),("date"==this._$colType||"datetime"==this._$colType)&&(o=ej.parseDate(o,this._$colFormat,this.model.locale),r=!0),"boolean"==this._$colType?(o=null!=l.ejCheckBox("model.checked")&&l.ejCheckBox("model.checked"),t="equal"):t=$("#"+this._id+this._$colType+"_ddinput").ejDropDownList("getSelectedValue").toLowerCase(),i=n.find(".e-predicate input[type='radio']:checked"),this._$colForeignKeyValue&&this._$colDropdownData?this._fltrForeignKeyValue(t,o,r,this._$colDropdownData,this._$colForeignKeyField,this._$colForeignKeyValue,this._$colType,i):this.filterColumn(this._$curFieldName,t,o,n.find(".e-predicate input[type='radio']:checked").attr("value"),r),this.model.isResponsive&&(n.css("display","none"),this._setResponsiveFilterIcon(),this.element.css("display","block"),!this.model.allowScrolling||this.model.enableResponsiveRow&&this.model.minWidth||((e={}).requestType="refresh",this._refreshScroller(e)))},_fltrClrHandler:function(){this.clearFiltering(this._$curFieldName)},_fltrForeignKeyValue:function(e,t,s,n,l,o,r,a){var d,h;ej.isNullOrUndefined(s)&&(s=!0);var c,u,m,p,g=[],f=(!a||a.css("display"),a?a.attr("value"):"and"),_=n,v={mapFieldName:o,fieldName:l,operator:e,value:t,predicate:a,matchcase:s},b={requestType:ej.Grid.Actions.Filtering,action:"fetchingForeignKeyField",currentFilteringColumn:l,currentFilterObject:v};this._trigger("actionBegin",b),n instanceof ej.DataManager||(_=new ej.DataManager(n)),"date"==r?(d=new Date(t.setDate(t.getDate()-1)),h=new Date(t.setDate(t.getDate()+2)),c="equal"==e||"notequal"==e?"equal"==e?(new ej.Query).where(ej.Predicate(v.mapFieldName,">",d,!v.matchcase).and(v.mapFieldName,"<",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(ej.Predicate(v.mapFieldName,"<=",d,!v.matchcase).or(v.mapFieldName,">=",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName)):c=(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName),u={actualFilterValue:v.value,actualOperator:v.operator,ejpredicate:undefined,predicate:f},_.executeQuery(c).done(ej.proxy(function(e){for(p=e.result,requireProc=$.isPlainObject(p[0]),preds=[],merge=!1,p=requireProc?ej.distinct(p,l,!1):p,field=this._$curFieldName,m=new ej.Predicate(field,"equal",p[0],s),i=1,vlen=p.length;i<vlen;i++)preds.push(new ej.Predicate(field,"equal",p[i],s)),merge=!0;merge&&(preds.unshift(m),m=ej.Predicate.or(preds)),$.extend(u,{ejpredicate:$.extend(m,{field:field},u)}),this.filterColumn(v.fieldName,v.operator,v.value,g,v.matchcase,u)},this))},_setDateFilters:function(e,t){var i,s,n,l,o;if(t||ej.isNullOrUndefined(this.getColumnByField(e.field).format)?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):-1!=(n=this.getColumnByField(e.field).format).indexOf("s")?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):-1!=n.indexOf("m")?(i=new Date(e.value.setMinutes(e.value.getMinutes()-1)),s=new Date(e.value.setMinutes(e.value.getMinutes()+2))):-1!=n.indexOf("h")?(i=new Date(e.value.setHours(e.value.getHours()-1)),s=new Date(e.value.setHours(e.value.getHours()+2))):(i=new Date(e.value.setDate(e.value.getDate()-1)),s=new Date(e.value.setDate(e.value.getDate()+2))),l=$.extend({},e),o=$.extend({},e),l.value=i,o.value=s,"equal"==e.operator?(l.operator="greaterthan",l.predicate="and",o.operator="lessthan",o.predicate="and"):(l.operator="lessthanorequal",l.predicate="or",o.operator="greaterthanorequal",o.predicate="or"),pred=ej.Predicate(l.field,l.operator,l.value,!1),predicate=pred[o.predicate](ej.Predicate(o.field,o.operator,o.value,!1)),e.value=new Date(e.value.setSeconds(o.value.getSeconds()-1)),t)return predicate;this.model.filterSettings.filteredColumns.push($.extend(predicate,{field:e.field,operator:e.operator}))}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.group={_renderGroupDropArea:function(){var e,i;return t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation),e=this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea,this.model.groupSettings.showDropArea?(i=t.buildTag("div.e-groupdroparea",e),this.model.groupSettings.enableDropAreaAutoSizing&&i.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),i):void 0},_getColGroup:function(t){var s,n,l,o=this.getRsc("helpers",t);return s=1==o.model.groupSettings.groupedColumns.length?this.data.items.level===i?0:this.data.items.level-1:this.data.items.level===i?o.model.groupSettings.groupedColumns.length:this.data.items.level-1,n=e(document.createElement("div")),o._isCaptionSummary?l=o._getCaptionColGroup(s):(l=o._getMetaColGroup(),s!=o.model.groupSettings.groupedColumns.length&&o.model.groupSettings.groupedColumns.length>1&&l.prepend(o._getIndentCol())),n.html(l),n.html()},_colSpanAdjust:function(s,n,l){var o,r,a,d,h,c,u,m;if(t.isNullOrUndefined(s)?(o=this,r=l):(o=this.getRsc("helpers",s),r=this),1==o.model.groupSettings.groupedColumns.length?(a=r.data.items.level===i?1:r.data.items.level-1,"groupcaption"==n&&(o._currentJsonData=o._currentJsonData.concat(r.data.items))):(a=r.data.items.level===i?o.model.groupSettings.groupedColumns.length:r.data.items.level-1,"groupcaption"==n&&r.data.items.level===i&&(o._currentJsonData=o._currentJsonData.concat(r.data.items))),o._isGrouping=!0,d=o.model.groupSettings.showGroupedColumn?0:o.model.groupSettings.groupedColumns.length,h=0,e.each(o._hiddenColumnsField,function(t,i){-1!=e.inArray(i,o.model.groupSettings.groupedColumns)&&(h+=1,o.model.groupSettings.showGroupedColumn&&(d+=1))}),c=o.model.columns.length+o.model.groupSettings.groupedColumns.length-a-o._hiddenColumnsField.length-d+h,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c,o._isCaptionSummary&&"groupcaption"==n){var p=[],g=o._captionSummary(),f=0,_=[];for(e.each(g[0].summaryColumns,function(t,i){-1!=e.inArray(i.displayColumn,o._hiddenColumnsField)&&0,_.push(o.getColumnIndexByField(i.displayColumn)),p.push(o.getColumnIndexByField(i.displayColumn)+o.model.groupSettings.groupedColumns.length-a)}),u=t.min(_),m=0;m<o._hiddenColumnsField.length;m++)u>(t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[m]))?o.getColumnIndexByHeaderText(o._hiddenColumnsField[m],t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[m]))):o.getColumnIndexByField(o._hiddenColumnsField[m]))&&f++;p.length>0&&(c=t.min(p)),c-=f,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c}return c},_captionEncode:function(e){return this.getRsc("helpers",e).getColumnByField(this.data.field).disableHtmlEncode},_captionFormat:function(i){var s,n=this.getRsc("helpers",i),l=e.extend({},this.data),o=n.getColumnByField(l.field);return s=o.foreignKeyValue&&o.dataSource?n._foreignKeyBinding(n.getColumnIndexByField(l.field),l.key,n._id):l.key,t.isNullOrUndefined(o.format)||-1!=o.format.indexOf("{0:")||(l[l.field]=l.key,n.data=l),l.key=o.format?n.formatting(o.format,s,n.model.locale):s,l.headerText=o.headerText,e.render[n._id+"_CaptionTemplate"](l)},_getCaptionColGroup:function(e){var t,i=this.getHeaderTable().find("colgroup").clone(),s=i.find("col").length-this.model.columns.length;if((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(s-=1),i.find("col:lt("+s+")").remove(),e>0&&e!=this.model.groupSettings.groupedColumns.length)if(this.model.groupSettings.groupedColumns.length>2&&e!=this.model.groupSettings.groupedColumns.length-1)for(t=0;t<this.model.groupSettings.groupedColumns.length-e;t++)i.prepend(this._getIndentCol());else i.prepend(this._getIndentCol());return i},_groupSummaryRow:function(i,s,n,l){var o,r,a,d,h,c,u=this.getRsc("helpers",n);l=!t.isNullOrUndefined(l);if(u.model.showSummary){if(null==u.getFooterTable()&&u._renderGridFooter(),u._createSummaryRows(u.getFooterTable(),null==i.records?i:i.records,s,i,l),u._isCaptionSummary&&!l&&(o=[],r=u._captionSummary(),e.each(r[0].summaryColumns,function(e,t){o.push(u.getColumnIndexByField(t.displayColumn))}),o.length>0&&(colIndex=t.min(o)),a=u.model.columns.length,u.getFooterTable().find("tbody td").slice(-(a-colIndex)).removeClass("e-summaryrow").addClass("e-groupcaptionsummary")),!u.model.groupSettings.showGroupedColumn){var m=u.model.groupSettings.groupedColumns,p=0,g=u.getFooterTable().children("tbody").find("tr");for(d=0;d<u.model.summaryRows.length;d++){for(h=0;h<u.model.summaryRows[d].summaryColumns.length;h++)for(c=0;c<m.length;c++)m[c]==u.model.summaryRows[d].summaryColumns[h].displayColumn&&(p++,u.model.summaryRows[d].summaryColumns.length==p&&e(g[d]).addClass("e-hide"));p=0}}return l?u.getFooterTable().find("tbody").html():u.getFooterTable().find("tbody").find("tr").html()}},addGroupingTemplate:function(){document.createElement("tbody");var i,s,n,l,o=this,r={};r["_"+o._id+"ColSpanAdjust"]=this._colSpanAdjust,r["_"+o._id+"Colgroup"]=this._getColGroup,t.isNullOrUndefined(this.model.groupSettings.captionFormat)?e.templates(o._id+"_CaptionTemplate",this.localizedLabels.GroupCaptionFormat):e.templates(o._id+"_CaptionTemplate",this.model.groupSettings.captionFormat),r["_"+o._id+"CaptionFormat"]=this._captionFormat,r["_"+o._id+"GroupSummaryRow"]=this._groupSummaryRow,r["_"+o._id+"CaptionEncode"]=this._captionEncode,r[o._id+"Object"]=this,e.views.helpers(r),i=" ~_"+o._id+"CaptionFormat('"+o._id+"Object')",s="<td class='e-recordplusexpand' ej-mappingname='{{:field}}' ej-mappingvalue='{{:key}}'><div class='e-icon e-gdiagonalnext'></div></td><td class='e-groupcaption' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','groupcaption') }}'>{{if ~_"+o._id+"CaptionEncode('"+o._id+"Object')}}{{html:"+i+"}}{{else}}{{:"+i+"}}{{/if}}</td>",this._isCaptionSummary&&this.model.showSummary&&(s=s+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object')}}"),n="<tr>"+s+"</tr>",(l=t.buildTag("tbody")).html("{{if items.GROUPGUID}}{{for items tmpl='"+o._id+"_GroupingTemplate'/}}{{else}}{{for items tmpl='"+o._id+"_JSONTemplate'/}}{{/if}}");var a="<table class='e-table {{if items.GROUPGUID}}{{else}}e-recordtable{{/if}}' cellspacing='0.25px' >{{:~_"+o._id+"Colgroup('"+o._id+"Object')}}"+l.html()+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object', '"+o._id+"showGroupCaption')}}</table>",d="<tr><td class='e-indentcell'></td>"+("<td class='e-tabletd' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','table')}}'>"+a+"</td>")+"</tr>";e.templates(o._id+"_GroupingTemplate",n+d)},addSummaryTemplate:function(){var i=this;e.each(i.model.summaryRows,function(s,n){e.each(n.summaryColumns,function(s,n){t.isNullOrUndefined(n.template)||e.templates(i._id+"_summaryTemplate"+n.template,n.template)})})},_getGroupTopLeftCell:function(){var e=t.buildTag("th.e-grouptopleftcell");return e.append(t.buildTag("div.e-headercelldiv e-emptyCell","&nbsp;")),e},_getEmptyFilterBarCell:function(){return t.buildTag("th.e-filterbarcell e-grouptopleftcell")},_groupingAction:function(e){var t,i=this.getHeaderTable().find("thead").find(".e-columnheader:not(.e-stackedHeaderRow)").find(".e-grouptopleftcell"),s=(this.getHeaderTable().find("colgroup").find("col"),i.length);for(s&&(this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),i.remove(),this.getHeaderTable().find("thead").find(".e-filterbar").find(".e-filterbarcell:lt("+s+")").remove()),(!this.model.allowResizeToFit||e)&&this.setWidthToColumns(),t=0;t<this.model.groupSettings.groupedColumns.length;t++)this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),this.getHeaderTable().find("thead").find(".e-columnheader").prepend(this._getGroupTopLeftCell()),this.getHeaderTable().find("thead").find(".e-filterbar").prepend(this._getEmptyFilterBarCell());this.getHeaderTable().find(".e-columnheader").find("th.e-grouptopleftcell").last().addClass("e-lastgrouptopleftcell")},groupColumn:function(i){var s,n;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping&&-1==e.inArray(i,this._disabledGroupableColumns)&&!t.isNullOrUndefined(this.getColumnByField(i))&&-1==e.inArray(i,this.model.groupSettings.groupedColumns)){for(this.model.groupSettings.groupedColumns.push(i),s=0;s<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[s].field!=i;s++);this.model.sortSettings.sortedColumns.length==s&&this.model.sortSettings.sortedColumns.push({field:i,direction:t.sortOrder.Ascending}),(n={}).columnName=i,n.requestType=t.Grid.Actions.Grouping,this._processBindings(n)&&(-1!=e.inArray(i,this._scolumns)||this._gridSort==i||this.model.sortSettings.sortedColumns.pop(),this.model.groupSettings.groupedColumns.pop()),this._primaryKeyValues=[]}},ungroupColumn:function(i){var s,n,l,o,r;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping){if(-1==e.inArray(i,this.model.groupSettings.groupedColumns))return null;for(this.model.groupSettings.groupedColumns.splice(e.inArray(i,this.model.groupSettings.groupedColumns),1),0==this.model.groupSettings.groupedColumns.length&&(this._LastColumnUnGroup=!0),s=this.getColumnByField(i),this.model.groupSettings.showGroupedColumn||s.visible||(n=this._hiddenColumnsField.indexOf(i),this._hiddenColumnsField.splice(n,1),s.visible=!0),l={},o=0;o<this.model.sortSettings.sortedColumns.length;o++)if(this.model.sortSettings.sortedColumns[o].field==i){if(-1!=this._scolumns.indexOf(i)&&this.model.allowSorting&&this.model.allowMultiSorting||this._gridSort==i){if(this.model.allowSorting&&this.model.allowMultiSorting){r=e.inArray(i,this._scolumns),this._scolumns.splice(r,1);break}this._gridSort=null;break}this.model.sortSettings.sortedColumns.splice(o,1);break}l.columnName=i,l.requestType=t.Grid.Actions.Ungrouping,this._isUngrouping=!0,this._processBindings(l)&&this.model.groupSettings.groupedColumns.push(i),this._primaryKeyValues=[]}},collapseGroupDropArea:function(){var i=this.element.find(".e-groupdroparea").first(),s=this;0==this.model.groupSettings.groupedColumns.length&&this.model.groupSettings.enableDropAreaAutoSizing&&i.animate({height:"10px"},200,function(){null!=s.model&&0==s.model.groupSettings.groupedColumns.length&&(e(this).html("").append(t.buildTag("div.e-animatebutton e-animatebuttondown e-icon e-gdownarrow")),e(this).dequeue().css("height","auto"))})},expandGroupDropArea:function(){var e=this.element.find(".e-groupdroparea").first(),i=this;0==this.model.groupSettings.groupedColumns.length&&i.model.groupSettings.enableDropAreaAutoSizing&&e.animate({height:"30px"},150,function(){0==i.model.groupSettings.groupedColumns.length&&e.html(i.localizedLabels.GroupDropArea).append(t.buildTag("div.e-animatebutton e-animatebuttonup e-icon e-guparrow")),e.dequeue().css("height","30px")})},_enableGroupingEvents:function(){this.model.allowGrouping&&(this._on(this.element,"click",".e-groupdroparea,.e-groupheadercell",this._groupHeaderCellClick),this._on(this.element,"mousedown",".e-groupheadercell",function(){return!1}))},_recalculateIndentWidth:function(){var i,s,n,l=this,o=!t.isIOSWebView()&&this.getBrowserDetails(),r=this.getHeaderTable().find(".e-lastgrouptopleftcell").width(),a=r,d=r/30;d>=1&&(a=30/d),this.getHeaderTable().find("colgroup").find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",a+"px"),s=this.getContentTable().find("table").filter(":not(.e-recordtable)"),(r=this.getHeaderTable().find(".e-lastgrouptopleftcell").width())>30||this._isCaptionSummary&&(r>=30||r>a)?(this._isCaptionSummary?(n=this.model.isEdit?s.parent(":not(.gridform)").children("colgroup"):s.children("colgroup"),e.each(n,function(t,i){var s=e(i).find("col").length-l.model.columns.length;(null!=l.model.detailsTemplate||null!=l.model.childGrid)&&s>0&&(s-=1),e(i).find("col").slice(0,s).css("width",a+"px")})):this.model.isEdit?s.parent(":not(.gridform)").children("colgroup").find("col:first-child").css("width",r+"px"):s.children("colgroup").find("col:first-child").css("width",r+"px"),i=this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length),o&&"msie"!=o.browser||this._isCaptionSummary?i.css("width",a+"px"):i.first().css("width",r/this.element.width()*100+"%")):(this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",a+"px"),this.getContentTable().find("table").filter(":not(.e-recordtable)").children("colgroup").find("col:first-child").css("width",r+"px")),this.model.showSummary&&this.getContentTable().find("table").filter(".e-groupsummary").find(".e-summary").css("width",a+"px")},getFieldNameByHeaderText:function(e){return t.isNullOrUndefined(this._fieldColumnNames[e])?null:this._fieldColumnNames[e]},getHeaderTextByFieldName:function(e){return t.isNullOrUndefined(this._headerColumnNames[e])?null:this._headerColumnNames[e]},expandAll:function(){var t,i=this.element.find(".e-recordpluscollapse"),s=this._excludeDetailRows().find(".e-detailrowcollapse");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},collapseAll:function(){var t,i=this.element.find(".e-recordplusexpand"),s=this.element.find(".e-detailrowexpand");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},_group:function(i){var s,n,l,o,r,a;if(this.model.groupSettings.groupedColumns.length&&this.model.currentViewData){if(this._currentJsonData=[],s=document.createElement("div"),!this.model.groupSettings.showGroupedColumn){if(this.initialRender||t.isNullOrUndefined(i.columnName)||"grouping"!=i.requestType)for(a=0;a<this.model.groupSettings.groupedColumns.length;a++)-1==e.inArray(this.model.groupSettings.groupedColumns[a],this._hiddenColumnsField)&&(this._hiddenColumnsField.push(this.model.groupSettings.groupedColumns[a]),this.getColumnByField(this.model.groupSettings.groupedColumns[a]).visible=!1);else n=this.getColumnByField(i.columnName),-1==e.inArray(i.columnName,this._hiddenColumnsField)&&(this._hiddenColumnsField.push(i.columnName),n.visible=!1);this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.getContentTable().children("colgroup").replaceWith(this.getHeaderTable().find("colgroup").clone())}for(this._isReorder="reorder"==i.requestType,o=(l=this.getContentTable().children("colgroup").find("col")).length-this.model.columns.length,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o--,l.length>this.model.columns.length&&this.getContentTable().children("colgroup").find("col:lt("+o+")").remove(),this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),r=null!=this.model.detailsTemplate||null!=this.model.childGrid?this.model.groupSettings.groupedColumns.length+1:this.model.groupSettings.groupedColumns.length,a=0;a<r;a++)this.getContentTable().children("colgroup").prepend(this._getIndentCol());this.model.currentViewData.length?(this.getContentTable().children("tbody").empty(),s.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),this.getContentTable().get(0).replaceChild(s.firstChild.firstChild,this.getContentTable().get(0).lastChild),this._hideCaptionSummaryColumn()):this.model.isEdit&&this.cancelEdit(),this._groupingAction(),this._gridRows=this.getContentTable().find(".e-recordtable").find("tbody").find("tr").not(".e-gridSummaryRows"),this._eventBindings()}},_ungroup:function(){var e,i,s,n;if(this._isGrouping=!1,t.isNullOrUndefined(this.model.detailsTemplate)||(this._detailsOuterWidth=null),i=(e=this.element.children(".e-gridheader")).find(".e-filterbar").find("th").find("input"),e.find("div").first().empty().append(this._renderGridHeader().find("table")),this.setGridHeaderContent(e),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType)for(this._renderFiltering(),this._renderFilterBarTemplate(),s=this.element.children(".e-gridheader").find(".e-filterbar").find("th").find("input"),n=0;n<i.length;n++)s.eq(n).val(i.eq(n).val());this.model.groupSettings.showGroupedColumn||this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.refreshTemplate(),this.element.find(".e-gridcontent").children("div").first().empty().append(this._renderGridContent().find("table").first()),this.setGridContent(this.element.find(".e-gridcontent")),this._gridRows=0!=this.model.groupSettings.groupedColumns.length?this.getContentTable().find(".e-recordtable").find("tbody").find("tr").toArray():this.getContentTable().get(0).rows},_groupHeaderCellClick:function(t){var i,s=e(t.target);if(!s.hasClass("e-groupdroparea"))return s.hasClass("e-ungroupbutton")?(i=s.parent().attr("ej-mappingname"),this.ungroupColumn(i)):s.hasClass("e-togglegroupbutton")?(i=s.parent().attr("ej-mappingname"),s.hasClass("e-toggleungroup")&&this.ungroupColumn(i)):s.hasClass("e-animatebutton")?e(t.target).hasClass("e-animatebuttondown")?this.expandGroupDropArea():this.collapseGroupDropArea():(s.addClass("e-headercelldiv"),this._mouseClickHandler(t),s.removeClass("e-headercelldiv")),!1},_captionSummary:function(i){for(var s=null,n=this.model.summaryRows,l=n.length,o=0;o<l;o++)if(1==n[o].showCaptionSummary){s=e(n[o]);break}return i&&(left=n.slice(0,o),right=n.slice(o+1,l),t.merge(s=left,right)),s},_dropAreaHover:function(t){var i=e(t.target);return"mouseenter"==t.type?(this._dragActive?i.hasClass("e-groupdroparea")&&i.addClass("e-hover"):i.removeClass("e-hover"),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").show(150)):"mouseleave"==t.type&&(i.hasClass("e-groupdroparea")&&(i.find(".e-ungroupbutton").hide(150),i.removeClass("e-hover")),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").hide(150)),!1},_groupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");if((this.model.groupSettings.groupedColumns.length&&0==s.find(".e-grid-icon").length||t.Grid.Actions.Refresh==e.requestType)&&s.empty(),this.initialRender||t.Grid.Actions.Refresh==e.requestType){for(i=0;i<this.model.groupSettings.groupedColumns.length;i++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[i]);this._refreshGridPager()}else this._addColumnToGroupDrop(e.columnName);for(this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction);!this.initialRender&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_ungroupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");for(e.requestType!=t.Grid.Actions.Refresh&&this._removeColumnFromDrop(e.columnName),this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction);0==this.model.groupSettings.groupedColumns.length&&(s.html(this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea),this.model.groupSettings.enableDropAreaAutoSizing&&s.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),s.css("height","auto")),t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&this._headerCellreorderDragDrop(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_getToggleButton:function(){return t.buildTag("span.e-togglegroupbutton e-icon e-gridgroupbutton","&nbsp;")},_checkEinHeader:function(t){for(var i,s=this.element.children(".e-gridheader").find("thead").find(".e-columnheader").find(".e-headercell"),n=0;n<s.length;n++){if(e.trim(s.eq(n).find("div").attr("ej-mappingname"))==t)return s.eq(n);if(this.model.allowSorting&&this.model.allowMultiSorting&&((i=e(s.eq(n)).clone()).find(".e-number").remove(),e.trim(i.find("div").attr("ej-mappingname"))==t))return i}return null},_checkEinGroupDrop:function(t){for(var i=this.element.children(".e-groupdroparea").find(".e-grid-icon"),s=0;s<i.length;s++)if(e.trim(i.eq(s).find("div").attr("ej-mappingname"))==t)return i.eq(s);return null},_addColumnToGroupDrop:function(i){var s,n,l=t.buildTag("div.e-grid-icon e-groupheadercell"),o=this.element.find(".e-groupdroparea").first(),r=t.buildTag("div",{},{},{"ej-mappingname":i}),a="e-rarrowup-2x",d=this.getColumnByField(i);d.disableHtmlEncode?l.append(r.text(d.headerText)):d.headerTemplateID?l.append(r.html(e(d.headerTemplateID).html())):l.append(r.html(d.headerText)),s=this._checkEinHeader(i),this.model.groupSettings.showToggleButton&&(r.append(this._getToggleButton().addClass("e-toggleungroup")),s.find(".e-headercelldiv").find(".e-togglegroupbutton").remove().end().append(this._getToggleButton().addClass("e-toggleungroup"))),n="ascending",s.find(".e-ascending,.e-descending").length&&(a="ascending"==(n=s.find(".e-ascending,.e-descending").hasClass("e-ascending")?"ascending":"descending")?"e-rarrowup-2x":"e-rarrowdown-2x"),r.append(this._createSortElement().addClass("e-"+n+" "+a)),this.model.groupSettings.showUngroupButton&&r.append(t.buildTag("span.e-ungroupbutton e-icon e-cancel"," ",{},{title:this.localizedLabels.UnGroup})),o.append(l).css("height","auto");var h=l.offset().left,c=l.clone().css("position","absolute");l.css("visibility","hidden"),o.append(c).dequeue(),c.css({left:h+150}).animate({left:h},150,function(){l.css("visibility","visible"),c.remove()})},_removeColumnFromDrop:function(t){this.getHeaderTextByFieldName(t);for(var i=this.element.children(".e-groupdroparea").css("height","30px").find(".e-grid-icon"),s=0;s<i.length;s++)e.trim(i.eq(s).find("div").attr("ej-mappingname"))==t&&(0==this.model.groupSettings.groupedColumns.length?this.collapseGroupDropArea():i.eq(s).remove())},_setAggreatedCollection:function(e){var s;this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url!=i&&!this._isRemoteSaveAdaptor||this.model.enableLoadOnDemand||(s=this._dataManager.executeLocal(e).result,this._aggregatedCollection=s)},_setAggregates:function(e,i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v=new t.Query;for(e=e||this.model.currentViewData,i=i||this._aggregatedCollection,0!=(l=e.length)&&(r=t.Predicate("field","equal",e[0].field),a=t.Predicate("key","equal",e[0].key),e[0].key instanceof Date&&(d={value:e[0].key,operator:"equal",field:"key"},a=this._setDateFilters(d,!0)),n=r.and(a)),s=1;s<l;s++)r=t.Predicate("field","equal",e[s].field),a=t.Predicate("key","equal",e[s].key),e[s].key instanceof Date&&(d={value:e[s].key,operator:"equal",field:"key"},a=this._setDateFilters(d,!0)),n=n.or(r.and(a));if(o=(i=n?new t.DataManager(i).executeLocal(v.where(n)):i).length,e.length>0)for(s=0;s<o;s++)if((!(s>0)||!(s<o-1))&&(e[s].count=i[s].count,e[s].items.GROUPGUID&&this._setAggregates(e[s].items,i[s].items),this.model.showSummary))for(h=e[s].aggregates=[],p=0,g=(c=this.model.summaryRows).length;p<g;p++)for(f=0,_=(u=c[p].summaryColumns).length;f<_;f++)m=i[s].items.level?i[s].items.records:i[s].items,h[u[f].dataMember+" - "+u[f].summaryType]=this.getSummaryValues(u[f],m)}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.dragAndDrop={_headerCellgDragDrop:function(){var i,s=this;this.dragHeaderElement(),(i=this.element.children("div.e-groupdroparea")).ejDroppable({accept:i,drop:function(i,n){if(!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")){var l=s.getColumnByField(e.trim(e(n.draggable[0]).find("div").attr("ej-mappingname")));n.helper.remove(),s._disabledGroupableColumns.length&&-1!=e.inArray(l.field,s._disabledGroupableColumns)||t.isNullOrUndefined(l)||t.isNullOrUndefined(l.field)||""==l.field||s.groupColumn(l.field)}}})},_headerCellreorderDragDrop:function(){var i,s=this;this.dragHeaderElement(),(i=this.element.find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell")).ejDroppable({accept:i,drop:function(i,n){var l,o,r,a,d,h,c,u,m,p,g,f;!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")&&e(n.draggable[0]).closest(".e-grid").attr("id")==s._id&&(("ascending"==n.draggable.attr("aria-sort")||"descending"==n.draggable.attr("aria-sort"))&&(l=s.getColumnByField(e.trim(e(n.draggable[0]).find("div").attr("ej-mappingname"))),s.model.allowSorting&&s.model.allowMultiSorting?s._scolumns.push(l.field):s._gridSort=l.field),h=n.draggable.index(),c=i.dropTarget.parent().index(),(e(i.dropTarget).hasClass("e-number")||e(i.dropTarget).hasClass("e-icon"))&&(c=i.dropTarget.closest(".e-headercell").index()),s.model.scrollSettings.frozenColumns>0?(a=n.draggable.closest(".e-frozenheaderdiv").length>0?h:h+s.model.scrollSettings.frozenColumns,d=i.dropTarget.closest(".e-frozenheaderdiv").length>0?c:c+s.model.scrollSettings.frozenColumns):(a=h,d=c),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?(a-=s.model.groupSettings.groupedColumns.length,d-=s.model.groupSettings.groupedColumns.length):(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(a-=1,d-=1),o=s.getColumnByIndex(a),r=s.getColumnByIndex(d),u=t.isNullOrUndefined(o)||t.isNullOrUndefined(o.field)||""==o.field?null:o.field,m=t.isNullOrUndefined(r.field)||""==r.field?null:r.field,n.helper.remove(),(p=e(i.dropTarget).clone()).find(".e-number").remove(),t.isNullOrUndefined(u)||t.isNullOrUndefined(m)?s.reorderColumns(a,d):(e(i.dropTarget).hasClass("e-droppable")?(p=p.children(".e-headercelldiv"),g=e(i.dropTarget).children(".e-headercelldiv")):(p=e(i.dropTarget).parent(),g=e(i.dropTarget),e(g).hasClass("e-filtericon")&&(g=p=e(g).siblings(".e-headercelldiv"))),f=s.model.allowSorting&&s.model.allowMultiSorting?i.dropTarget.hasClass("e-number")||i.dropTarget.hasClass("e-icon")?s.getColumnByField(e.trim(p.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))):i.dropTarget.hasClass("e-icon")&&!i.dropTarget.hasClass("e-filtericon")?s.getColumnByField(e.trim(p.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))),s.reorderColumns(o.field,f.field)))}})},dragHeaderElement:function(){var i,s=this,n=this.element.children("div.e-gridheader").find("th.e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),l=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2});n.ejDraggable({cursorAt:{top:-50,left:-2},helper:function(t){var n,o,r,a;return s.element.find(".e-dragclone").length>0&&s.element.find(".e-dragclone").remove(),o=(n=e(t.element).hasClass("e-headercell")?e(t.element):e(t.element).closest("th")).find(".e-headercelldiv"),r=e(t.element).index(),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?r-=s.model.groupSettings.groupedColumns.length:(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(r-=1),i=s.getColumnByIndex(r),s._$curSElementTarget=o,s.model.allowSorting&&s.model.allowMultiSorting?((a=e(n).clone()).find(".e-number").remove(),l.text(a.text()).clone().width(n.outerWidth()+2).height(n.height()+2).css({"font-size":parseInt((n.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)):l.text(n.text()).clone().width(n.outerWidth()+2).height(n.height()+2).css({"font-size":parseInt((n.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)},dragStart:function(t){var n,l,o=t.target,r=e(o),a={target:o,draggableType:"headercell",column:i},d=!1;return s.model.groupSettings.showToggleButton&&i&&i.allowGrouping&&(n=e.inArray(i.field,s.model.groupSettings.groupedColumns),l=e(t.element).find(".e-togglegroupbutton").hasClass("e-togglegroup"),(-1!=n&&l||-1==n&&!l)&&(d=!0)),null!=s._resizer&&s._resizer._expand||d||r.eq(0).hasClass("e-filtericon")||i&&0==i.allowGrouping&&0==i.allowReordering?(e(".e-dragclone").remove(),!1):(s._dragActive=!0,s.model.allowGrouping&&s.expandGroupDropArea(),!s._trigger("columnDragStart",a)&&void 0)},drag:function(t){var n=e(t.target),l={target:n,draggableType:"headercell",column:i};if(s._trigger("columnDrag",l))return!1;n.closest(".e-grid").attr("id")===s._id&&(s.getHeaderTable().find(".e-headercell").removeClass("e-reorderindicate"),!s.model.allowReordering||!(n.hasClass("e-headercelldiv")||n.hasClass("e-headercell"))||n.hasClass("e-detailheadercell")||n.hasClass("e-stackedHeaderCell")||n.parent().hasClass("e-grouptopleftcell")||(document.body.style.cursor="",n.addClass("e-allowDrop"),s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),n.hasClass("e-headercell")?n.addClass("e-reorderindicate"):n.parent().addClass("e-reorderindicate")),n.hasClass("e-groupdroparea")||n.closest(".e-groupdroparea").length?(document.body.style.cursor="",n.addClass("e-allowDrop")):document.body.style.cursor="not-allowed")},dragStop:function(t){if(!t.element.dropped){var n={target:e(t.target),draggableType:"headercell",column:i};s._trigger("columnDrop",n),s.element.find(".e-groupdroparea").removeClass("e-hover"),s.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),e(".e-dragclone").remove(),s._dragActive=!1,s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),s.model.allowGrouping&&s.collapseGroupDropArea(),document.body.style.cursor="",e(s._Indicator).css("display","none")}}})},_groupHeaderCelldrag:function(){var i=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2}),s=this;this.element.children(".e-groupdroparea").find(".e-groupheadercell").ejDraggable({cursorAt:{top:-35,left:-2},helper:function(t){var n=e(t.sender.target).closest(".e-grid-icon");return i.text(e(t.sender.target).closest(".e-groupheadercell").text()).clone().width(n.width()+2).height(n.height()+2).addClass("e-dragclone").appendTo(s.element)},dragStart:function(e){var t,i=e.target;return e.model.cursorAt={top:-35,left:-2},t={target:i,draggableType:"groupheadercell"},!s._trigger("columnDragStart",t)&&void 0},drag:function(t){e(".Sibling").remove();var i=e(t.target),n={target:i,draggableType:"groupheadercell"};if(s._trigger("columnDrag",n))return!1;i.closest("div.e-gridcontent").length?(document.body.style.cursor="",i.addClass("e-allowDrop")):document.body.style.cursor="not-allowed"},dragStop:function(t){if(!t.element.dropped){var i={target:e(t.target),draggableType:"groupheadercell"};s._trigger("columnDrop",i),e(".e-dragclone").remove(),document.body.style.cursor=""}}}),this.element.children(".e-gridcontent, .e-gridheader").ejDroppable({accept:s.element.children("div.e-groupdroparea").find(".e-groupheadercell"),drop:function(i,n){if(!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")&&n.draggable.hasClass("e-groupheadercell")){var l=e(n.draggable[0]).find("div").attr("ej-mappingname");n.helper.remove(),t.isNullOrUndefined(l)||s.ungroupColumn(l)}}})},_rowsDragAndDrop:function(){this.dragRowElement();var i=this.getContentTable(),s=this;i.ejDroppable({accept:i,drop:function(i,n){var l,o,r,a,d,h,c=e(i.dropTarget).closest("tr");if(!n.helper.find("tr.e-srcgridinfo").length||(s._draggedGridID=n.helper.find("tr.e-srcgridinfo").children("td").text(),(l=s._draggedGridID!=s._id?e("#"+s._draggedGridID).ejGrid("instance"):s)._id!=s._id&&l.model.rowDropSettings.dropTargetID!="#"+s._id))return!1;var u=l.getSelectedRecords(),m=o=s.getIndexByRow(c);if(-1==m&&(m=o=0),d={target:c,targetIndex:m=m+s.model.pageSettings.currentPage*s.model.pageSettings.pageSize-s.model.pageSettings.pageSize,draggedRecords:u,dropDetails:r={sourceID:l._id,destinationID:s._id,destinationRowIndex:m}},!s._trigger("beforeRowDrop",d))if(a=s._dataSource()instanceof t.DataManager?s._dataSource().dataSource:s._dataSource(),t.isNullOrUndefined(s.model.rowDropSettings.dropMapper)||(t.isNullOrUndefined(a.headers)&&(a.headers=[]),a.headers.push({rowDropDetails:JSON.stringify(r)})),s._id!=l._id){s._dataManager,s._dataSource().adaptor;var p=l.getBatchChanges();p.deleted=u,d={dropDetails:r,records:u,requestType:t.Grid.Actions.Refresh,targetIndex:m,action:"rowDragged"},s._processDropRequest(l,p,"drag",d),(h=s.getBatchChanges()).added=u,d.action="rowDropped",s._processDropRequest(s,h,"drop",d)}else s._draggedGridID==s._id&&s.reorderRows(l.selectedRowsIndexes,o)}})},dragRowElement:function(){var i=this;e(this.getRows()).ejDraggable({cursorAt:{top:-8,left:-8},helper:function(s){var n,l,o,r,a;return this.clone=!0,n=e(s.sender.target).closest("tr"),!(i._selectDrag||!n.length||-1==e.inArray(i.model.editSettings.showAddNewRow?n[0].rowIndex-1:n[0].rowIndex,i.selectedRowsIndexes))&&((l=t.buildTag("div.e-cloneproperties e-draganddrop e-grid","",{height:"auto","z-index":2,position:"absolute",width:i.element.width()})).append(t.buildTag("table","",{width:i.element.width()})),r=e(i.getRows()).clone().removeClass(),o=e.map(r,function(t,s){if(-1!=e.inArray(s,i.selectedRowsIndexes))return t}),a=t.buildTag("tr.e-srcgridinfo e-grid","",{display:"none",height:"auto"}).append("<td>"+i._id+"</td>"),o.push(a[0]),e(o).find("td").removeClass("e-selectionbackground e-active"),l.find("table").append(o),e(s.sender.target).closest("td").hasClass("e-selectionbackground")||l.css("display","none"),l.addClass("e-dragclone").appendTo(i.element))},dragStart:function(t){if(i._selectDrag||-1==e.inArray(i.model.editSettings.showAddNewRow?e(t.target).closest("tr")[0].rowIndex-1:e(t.target).closest("tr")[0].rowIndex,i.selectedRowsIndexes))return!1;var s=t.target,n={target:i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),currentTarget:s,draggableType:"rows",data:i.getSelectedRecords()};return!i._trigger("rowDragStart",n)&&void 0},drag:function(t){var s,n=e(t.target),l={target:i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),currentTarget:n,draggableType:"rows",data:i.getSelectedRecords()};if(i._trigger("rowDrag",l))return!1;document.body.style.cursor="not-allowed",s=e(i.model.rowDropSettings.dropTargetID),(n.closest(i.model.rowDropSettings.dropTargetID).length||n.closest("#"+i._id).length)&&(n.closest(".e-grid").length&&(n.closest(".e-rowcell").length||n.closest(".emptyrecord").length)?n.closest("table").addClass("e-allowRowDrop"):s.hasClass("e-grid")||s.addClass("e-allowRowDrop"))},dragStop:function(t){var s,n;if(!t.element.dropped){var l=e(t.target),o=i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),r=i.getSelectedRecords();if(e(".e-dragclone").remove(),document.body.style.cursor="",(s=e(i.model.rowDropSettings.dropTargetID)).hasClass("e-grid")?s.find(".e-gridcontent").find("table").removeClass("e-allowRowDrop"):s.removeClass("e-allowRowDrop"),i.getContent().find("table").removeClass("e-allowRowDrop"),n={rows:o,target:l,draggableType:"rows",data:r},i._trigger("rowDrop",n))return!1}}})},_processDropRequest:function(i,s,n,l){var o,r=i._dataManager.dataSource.batchUrl;i._dataManager.dataSource.batchUrl=i.model.rowDropSettings[n+"Mapper"],o=i._dataManager.saveChanges(s,i._primaryKeys[0],i.model.query._fromTable),e.isFunction(o.promise)&&null!=i._dataManager.dataSource.batchUrl?(e("#"+i._id).data("ejWaitingPopup").show(),o.done(function(){i._isLocalData&&"drop"==n&&(l.dropDetails.sourceID==l.dropDetails.destinationID?i._moveDroppedRowIndex(l.targetIndex,l.records,l.draggedRowIndexes):i._moveDroppedRowIndex(l.targetIndex,l.records)),"drop"==n&&(i._dataSource()instanceof t.DataManager?i._dataSource().dataSource.headers.pop():i._dataSource().headers.pop()),i._dataManager.dataSource.batchUrl=r,i.refreshBatchEditChanges(),e("#"+i._id).data("ejWaitingPopup").hide(),i._processBindings(l)}),o.fail(function(t){i._dataManager.dataSource.batchUrl=r,e("#"+i._id).data("ejWaitingPopup").hide(),l.error=t&&t.error?t.error:t,i._trigger("actionFailure",l)})):(i.refreshBatchEditChanges(),i._dataManager.dataSource.batchUrl=r,"drop"==n&&i._moveDroppedRowIndex(l.targetIndex,l.records),l.dropDetails.sourceID==l.dropDetails.destinationID&&"drag"==n||i._processBindings(l))},reorderRows:function(e,i){var s,n,l;if(!this.model.sortSettings.sortedColumns.length)if(s=this.getSelectedRecords(),this.selectedRowsIndexes=[],n={requestType:t.Grid.Actions.Refresh,action:"rowReordering",draggedRowIndexes:e,targetIndex:i,dropDetails:{sourceID:this._id,destinationID:this._id,DestinationRowIndex:i},records:s},t.isNullOrUndefined(this.model.rowDropSettings.dropMapper)){if(this._trigger("actionBegin",n))return!1;this._moveDroppedRowIndex(i,s,e),this._trigger("actionComplete",n)}else(l=this.getBatchChanges()).changed=s,this._processDropRequest(this,l,"drop",n)},_moveDroppedRowIndex:function(i,s,n){var l,o,r,a;if(t.isNullOrUndefined(n)){if(i>-1)for(r=this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource(),i+this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,a=0;a<s.length;a++)r.splice(i++,0,r.splice(r.length-s.length+a,1)[0])}else{n=n.sort(function(e,t){return e-t});var d,h,c=i,u=0,m=this.model.currentViewData.slice(),p=this.getRowByIndex(i);for(i+=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,a=0;a<n.length;a++)r=m[n[a]],h=n[a]-u,d=0,l=this._excludeDetailRows(),o=e(l[h]),c>h&&u++,this.model.allowPaging&&(d=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize),h=d+h,this.selectedRowsIndexes.push(c-u),a==n.length-1&&(this.model.selectedRowIndex=this.selectedRowsIndexes[0]),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o.next().hasClass("e-detailrow")&&(o=o.add(o.next()[0])),p.before(o),c<n[a]-u?c++:i--,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(i+a,0,this._dataSource().dataSource.json.splice(h,1)[0]):this._dataSource().splice(i+a,0,this._dataSource().splice(h,1)[0]),this.model.currentViewData.splice(i+a-d,0,this.model.currentViewData.splice(h-d,1)[0])}}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.selection={selectRows:function(s,n,l){var o,r,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S,x,T,k,D,I;if(!this._allowrowSelection)return!1;if(this._traverseRow!=s&&e(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,o=[],this.initialRender&&(this.model.currentIndex=s),this.model.scrollSettings.enableVirtualization&&(e.isArray(s)?this.model.currentIndex=s[0]:n&&(this.model.currentIndex=s>n?n:s)),!this.multiSelectCtrlRequest&&this.model.scrollSettings.allowVirtualScrolling&&(this._virtuaOtherPage?this._virtualScrollingSelection=!0:(this.clearSelection(),this._virtualScrollingSelection=!1)),e.isArray(s)&&(s=(o=s)[0],this._virtaulSel=[],this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization))for(this._virtualScrollingSelection=!0,this._virtualSelectedRows=o,r=parseInt(s/this.model.pageSettings.pageSize)*this.model.pageSettings.pageSize,y=(parseInt(s/this.model.pageSettings.pageSize)+1)*this.model.pageSettings.pageSize,this._virtaulSel.push(s),this._virtuaOtherPage||(this._virtaulUnSel=[]),w=1;w<o.length;w++)r<o[w]&&o[w]<y?this._virtaulSel.push(o[w]):this._virtaulUnSel.push(o[w]);g=e(this.getRows()),!this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||0!=this.model.scrollSettings.frozenColumns||0!=this.model.scrollSettings.frozenRows||(a=g.eq(s)[0],this.getScrollObject().scrollTop()+this.getScrollObject().content()[0].clientHeight<a.offsetTop+a.offsetHeight&&(d=t.isNullOrUndefined(a)?" ":a.offsetTop,this.getScrollObject().scrollY(d))),I={},u=this._currentPage()-1,t.isNullOrUndefined(s)||("batch"==this.model.editSettings.editMode&&e(g[s]).hasClass("e-insertedrow")?(m=this.batchChanges.added.reverse()[s],this.batchChanges.added.reverse()):m="batch"==this.model.editSettings.editMode?this._currentJsonData[s-this.batchChanges.added.length]:this._currentJsonData[t.isNullOrUndefined(s)?n:s]);var O=s,R=this._previousIndex,A=this.getRowByIndex(this._previousIndex);if(this.model.scrollSettings.allowVirtualScrolling)if(this.model.scrollSettings.enableVirtualization){var M=this._virtualRowCount,F=Math.ceil((s+1)/M),P=F>1?this._virtualRowCount:0;if(this.initialRender||F!=this._currentVirtualIndex&&!l?(this._isThumbScroll=!0,this._refreshVirtualView(F),s=0!=s?s%this._virtualRowCount+P:s):(s>3*this._virtualRowCount||l?(S=this._getSelectedViewData(s,l).viewIndex,b=s%this._virtualRowCount,O=S*this._virtualRowCount-(this._virtualRowCount-b)):s=s%this._virtualRowCount+P,s!=O||l||(s=0!=s?s%this._virtualRowCount+P:s)),o.length)for(w=0;w<o.length;w++)S=this._getSelectedViewData(o[w]).viewIndex,-1!=e.inArray(S,this._currentLoadedIndexes)&&this._virtaulSel.push(o[w]),this._virtualSelectedRecords[o[w]]||(this._virtualSelectedRecords[o[w]]=this._getSelectedViewData(o[w]).data);m=this._getSelectedViewData(s,l,F).data,R=this._prevSelIndex,A=this._prevSelRow}else{var E=this.model.pageSettings.pageSize,L=this.getRowByIndex(s).attr("name"),N=t.isNullOrUndefined(L)?s:parseInt(L)/E+1,j=s%E,z=parseInt(s/E),V=z*E;if(!t.isNullOrUndefined(z)&&z>0&&-1==e.inArray(V,this.virtualLoadedPages)&&t.isNullOrUndefined(l))if(j--,this._virIndex=!0,this._virtualTrIndex=j,this.gotoPage(z+1),p=this,this._dataSource()instanceof t.DataManager){if(this._queryPromise.done(function(e){var t;p._virtuaOtherPage=!0,p._virtualdata=p._currentJsonData,p._pageTo=z,p._virtualScrollingSelection&&(p._virtualSelRecords=e.virtualSelectRecords);var i=parseInt(s/p.model.pageSettings.pageSize)*p.model.pageSettings.pageSize,n=(parseInt(s/p.model.pageSettings.pageSize)+1)*p.model.pageSettings.pageSize,l=[];for(l.push(s),t=1;t<o.length;t++)i<o[t]&&o[t]<n&&l.push(o[t]);return p.selectRows(l),!1}),p._virtualScrollingSelection)return}else{if(p._virtualdata=p._currentJsonData,o.length>0)for(p._virtualSelRecords=[],w=0;w<o.length;w++)p._virtualSelRecords.push(this.model.dataSource[o[w]]);p._pageTo=z}for(this._virtuaOtherPage&&(this._virtuaOtherPage=!1),w=0;w<this._loadedJsonData.length;w++)this._loadedJsonData[w].pageIndex==N&&(c=this._loadedJsonData[w].data);m=t.isNullOrUndefined(c)?this._currentJsonData[j]:c[j],m=this._virtualScrollingSelection?this._virtualSelRecords:m,V=this._pageTo*E,!t.isNullOrUndefined(this._virtualdata)&&this._virtualdata.length>0?(s=e(document.getElementsByName(V)[j]).index(),m=this._virtualdata[j],this._virtualdata=[]):e(document.getElementsByName(z*E)).length>0&&!t.isNullOrUndefined(this._pageTo)&&(s=e(document.getElementsByName(z*E)[s%E]).index())}if(I={rowIndex:O,row:g.eq(s),data:m,target:l,prevRow:A,prevRowIndex:R},!this._trigger("rowSelecting",I)){if(l&&l.hasClass("e-checkselectall")&&this._isLocalData&&this._isMapSelection)return this._headerCheckUpdateAll(!l[0].checked);if(g=e(this.getRows()),this._isMapSelection&&!this._selectionByGrid&&t.isNullOrUndefined(n)&&!o.length)return m[this._selectionMapColumn]=!I.row.find(".e-checkcelldiv input").prop("checked"),void this.updateRecord(this._primaryKeys[0],m,"update");if((this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this.model.isEdit&&this.model.enableAutoSaveOnSelectionChange&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||0!=this.getContentTable().find(".e-editedrow").length)){if(this.endEdit())return;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")}if(this._checkSelectedRowsIndexes[u]!=i||this._isMapSelection||(this._checkSelectedRowsIndexes[u]=[]),o.length>0){for(w=0;w<o.length;w++)-1==this.selectedRowsIndexes.indexOf(o[w])&&this.selectedRowsIndexes.push(o[w]),this._isMapSelection&&!this._selectionByGrid&&((k=this._currentJsonData[o[w]])[this._selectionMapColumn]=!0,this.batchChanges.changed.push(k));if(!this.model.scrollSettings.enableVirtualization)for(f=this._virtaulSel[0]-s,w=0;w<this._virtaulSel.length;w++)this._virtaulSel[w]-=f;if(rows=this.getRowByIndex(this.model.scrollSettings.allowVirtualScrolling?this._virtaulSel:o),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this._enableCheckSelect&&!this._isMapSelection&&e(rows).find(".e-checkcelldiv input").prop("checked","checked"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._isMapSelection&&!this._selectionByGrid)return void this.batchSave()}else if(t.isNullOrUndefined(n)||t.isNullOrUndefined(s))switch(O=s=t.isNullOrUndefined(s)?n:s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){this.model.selectedRecords=[],-1!=(_=e.inArray(O,this.selectedRowsIndexes))&&!this._isMapSelection&&this.clearSelection(O,l)&&this.selectedRowsIndexes.splice(_,0),-1==_&&(this.selectedRowsIndexes.push(O),(v=this.getRowByIndex(s)).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[O]=this._getSelectedViewData(s,l).data:this._virtualSelectAction(N,s,E),this._enableCheckSelect&&l&&!l.parent().hasClass("e-checkcelldiv")&&v.find(".e-checkcelldiv input").prop("checked","checked")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords());break}case t.Grid.SelectionType.Single:this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},this.selectedRowsIndexes.push(O),this.getRowByIndex(s).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[O]=m:this._virtualSelectAction(N,s,E),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&this.getRowByIndex(s).find(".e-checkcelldiv [type=checkbox]").prop("checked",!0)}else if(this.model.selectionType==t.Grid.SelectionType.Multiple&&(this._isMapSelection||this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},$toIndex=n,this._virtualUnSel=[],this._virtualUnSelIndexes=[],this._isMapSelection||!(l&&l.hasClass("e-checkselectall")&&l[0].checked))){for(this.model.scrollSettings.enableVirtualization&&l&&(S=this._getSelectedViewData(n,l).viewIndex,b=n%this._virtualRowCount,$toIndex=S*this._virtualRowCount-(this._virtualRowCount-b),O!=this._prevSelIndex&&(O=this._prevSelIndex)),h=O-$toIndex<0,this.model.scrollSettings.enableVirtualization||(rows=h?this.getRowByIndex(s,n+1):this.getRowByIndex(n,s+1)),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),C=[],w=h?O:$toIndex,y=h?$toIndex:O;w<=y;w++)this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualSelectedRecords[w]=this._getSelectedViewData(w).data,S=this._getSelectedViewData(w).viewIndex,-1!=e.inArray(S,this._currentLoadedIndexes)?(x=this._currentLoadedIndexes.indexOf(S),0==(T=w%this._virtualRowCount+x*this._virtualRowCount)&&this._virtualRowCount,C.push(T)):(this._virtualUnSel.push(w),-1==e.inArray(S,this._virtualUnSelIndexes)&&this._virtualUnSelIndexes.push(S))):(L=this.getRowByIndex(w).attr("name"),N=t.isNullOrUndefined(L)?s:parseInt(L)/E+1,this._virtualSelectAction(N,w,E))),this.selectedRowsIndexes.push(w),this._isMapSelection&&!this._selectionByGrid&&((k=this._currentJsonData[w])[this._selectionMapColumn]=!0,this.batchChanges.changed.push(k));if(this._isMapSelection)return void this.batchSave();this.model.scrollSettings.enableVirtualization&&(rows=this.getRowByIndex(C[0],C[C.length-1]+1)),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&e(rows).find(".e-checkcelldiv input").prop("checked","checked")}this._enableCheckSelect&&(this._checkSelectedRowsIndexes[u]=this.selectedRowsIndexes,this._selectAllCheck||(this.selectedRowsIndexes.length==this._currentJsonData.length?this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked","checked"):this._selectionByGrid&&this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked",!1))),this._selectedRow()!==O&&this._selectedRow(O),l&&l.hasClass("e-checkselectall")&&!this._isMapSelection&&(D=this,this._checkSelectedRowsIndexes=l.is(":checked")?[]:e.map(Array(this.model.pageSettings.totalPages),function(){return Array(e.map(Array(D.model.pageSettings.pageSize),function(e,t){return t}))})),m=this._virtualScrollingSelection?this._virtualSelRecords:m,I={rowIndex:this.model.scrollSettings.enableVirtualization?O:this._selectedRow(),row:this.getRowByIndex(this._selectedRow()),data:m,target:l,prevRow:A,prevRowIndex:R},this._previousIndex=this.selectedRowsIndexes.length?s:this._previousIndex,this.model.scrollSettings.enableVirtualization&&(this._prevSelIndex=O,this._prevSelRow=this.getRowByIndex(s)),e(this.getRowByIndex(s)).is('[role="row"]')&&this._trigger("rowSelected",I)}},_selectingMultipleRows:function(e){this._modelMultiSelectedIndexes=e,this.clearSelection(),this.multiSelectCtrlRequest=!0;for(var t=0;t<e.length;t++)this.selectRows(e[t]);this.multiSelectCtrlRequest=!1,this.model.selectedRowIndices=this._modelMultiSelectedIndexes,this._modelMultiSelectedIndexes=[]},_virtualSelectAction:function(e,i,s){this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(i)&&(this._virtualSelectedRecords[i]=t.isNullOrUndefined(this._virtualLoadedRecords[e])?this._currentJsonData[i%s]:this._virtualLoadedRecords[e][i%s])},_getSelectedViewData:function(t,i,s){var n,l,o=t%this._virtualRowCount,r={};return n=i?parseInt(e(i).closest("tr").attr("name"),32):s||(t>1?Math.ceil((t+1)/this._virtualRowCount):1),r.viewIndex=n,this._virtualLoadedRecords[n]&&(r.data=this._virtualLoadedRecords[n][o]),l=t%this._virtualRowCount,r.rowIndex=n*this._virtualRowCount-(this._virtualRowCount-l),r},selectCells:function(s){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v;if(!this._allowcellSelection)return!1;if(n=null,r=this._excludeDetailRows(),n=this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]):r.eq(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")"),t.isNullOrUndefined(this._previousRowCellIndex)||0==this._previousRowCellIndex.length||(this.model.scrollSettings.enableVirtualization?(l=this._prevRowCell,o=this._preVirRowCellIndex):(l=e(this.getRowByIndex(this._previousRowCellIndex[0][0]).find(".e-rowcell:eq("+this._previousRowCellIndex[0][1]+")")),o=this._previousRowCellIndex)),a=this._currentJsonData[s[0][0]],d=s[0][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(h=this._getSelectedViewData(s[0][0],n)).data,d=h.rowIndex),v={currentCell:n,cellIndex:s[0][1],data:a,previousRowCellIndex:o,previousRowCell:l},"multiple"==this.model.selectionType&&(v.isCtrlPressed=this.multiSelectCtrlRequest,v.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("cellSelecting",v)){switch(this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){-1!=(_=e.inArray(d,this._rowIndexesColl))?this.selectedRowCellIndexes[_].cellIndex.push(parseInt(s[0][1].toString())):(-1==e.inArray(d,this._rowIndexesColl)&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]})),n.addClass("e-cellselectionbackground e-activecell");break}if(this.multiSelectShiftRequest&&this._previousRowCellIndex!=i){this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[];var b=this._previousRowCellIndex[0][0],C=parseInt(this._previousRowCellIndex[0][1]),w=s[0][0],y=parseInt(s[0][1]);if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(b=this._preVirRowCellIndex[0][0],w=this._getSelectedViewData(w,this.getRowByIndex(w).find(".e-rowcell")).rowIndex),k=[],"box"==this.model.selectionSettings.cellSelectionMode){this.model.scrollSettings.frozenColumns?this.getRows()[0].length:this.getRows().length;var S=C<y?C:y,x=S==y?C:y,T=[],k=[];for(m=S;m<=x;m++){if((c=b)<(u=w))for(g=c;g<=u;g++)-1==e.inArray(g,T)&&T.push(g),this._selectMultipleCells(g,m,y,C);else for(g=u;g<=c;g++)-1==e.inArray(g,T)&&T.push(g),this._selectMultipleCells(g,m,y,C);k.push(m)}for(m=0;m<T.length;m++)this.selectedRowCellIndexes.push({rowIndex:T[m],cellIndex:k});this._rowIndexesColl=t.distinct(T)}else if(w>b)for(m=b;m<=w;m++){for(k=[],c=m==b?C:0,u=m==w?y:this.model.columns.length-1,g=c;g<=u;g++)k.push(g),this._selectMultipleCells(m,g,y,C);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:k}),this._rowIndexesColl.push(m)}else for(m=b;m>=w;m--){if(k=[],(c=m==b?C:this.model.columns.length-1)>(u=m==w?y:0))for(g=c;g>=u;g--)k.push(g),this._selectMultipleCells(m,g,y,C);else for(g=u;g>=c;g--)k.push(g),this._selectMultipleCells(m,g,y,C);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:k}),this._rowIndexesColl.push(m)}break}for(this.clearCellSelection(),this._virtualRowCellSelIndex=[],m=0;m<s.length;m++)if(s[m][1].length>1)for(p=r.eq(s[m][0]).find(".e-rowcell"),this.model.scrollSettings.frozenColumns&&(p=e(r[0]).eq(s[m][0]).find(".e-rowcell").add(e(r[1]).eq(s[m][0]).find(".e-rowcell"))),g=0;g<p.length;g++)f=null!=this.model.detailsTemplate||null!=this.model.childGrid?p[g].cellIndex-1:g,-1!=e.inArray(f,s[m][1])&&(e(p[g]).addClass("e-cellselectionbackground e-activecell"),-1!=(_=e.inArray(s[m][0],this._rowIndexesColl))?this.selectedRowCellIndexes[_].cellIndex.push(p[g].cellIndex):(d=s[m][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(h=this._getSelectedViewData(d,p)).data,d=h.rowIndex),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:[p[g].cellIndex]}),this._rowIndexesColl.push(s[m][0])));else this.model.scrollSettings.frozenColumns?this._frozenCell(s[m][0],s[m][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[m][0]).find(".e-rowcell:eq("+s[m][1]+")")).addClass("e-cellselectionbackground e-activecell"),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[m][1]}),this._rowIndexesColl.push(d);break;case t.Grid.SelectionType.Single:this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[],this._virtualRowCellSelIndex=[],-1==e.inArray(d,this._rowIndexesColl)&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]}),this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")")).addClass("e-cellselectionbackground e-activecell")}v={currentCell:n,cellIndex:s[0][1],data:a,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCellIndex:o,previousRowCell:l},(!this.multiSelectShiftRequest||t.isNullOrUndefined(this._previousRowCellIndex))&&(this._previousRowCellIndex=s,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._preVirRowCellIndex=e.extend(!0,[],s),this._preVirRowCellIndex[0][0]=d),this._prevRowCell=n),this._trigger("cellSelected",v)}},_selectMultipleCells:function(t,i){var s,n,l;this.model.scrollSettings.frozenColumns?this._frozenCell(t,i).addClass("e-cellselectionbackground e-activecell"):this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(s=this._getSelectedViewData(t).viewIndex,-1!=e.inArray(s,this._currentLoadedIndexes)&&(n=this._currentLoadedIndexes.indexOf(s),l=t%this._virtualRowCount+n*this._virtualRowCount,e(this.getRowByIndex(l).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell"),-1==e.inArray(t,this._virtualRowCellSelIndex)&&-1!=e.inArray(t,this._rowIndexesColl)&&t!=this._preVirRowCellIndex[0][0]&&this._virtualRowCellSelIndex.push(t))):e(this.getRowByIndex(t).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell")},selectColumns:function(s,n){var l,o,r,a,d,h;if(!this._allowcolumnSelection)return!1;this._allowcolumnSelection=!0;var c=this.getRows(),u=this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[this._previousColumnIndex],m={columnIndex:s==i?n:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[s]),column:this.model.columns[s],previousColumnIndex:this._previousColumnIndex,prevColumnHeaderCell:u},p=this._previousColumnIndex;if(this._previousColumnIndex=1==(m.isShiftPressed=this.multiSelectShiftRequest)?s==i?n:s:n,"multiple"==this.model.selectionType&&(m.isCtrlPressed=this.multiSelectCtrlRequest,m.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("columnSelecting",m)){if(t.isNullOrUndefined(n)||t.isNullOrUndefined(s))switch(s=t.isNullOrUndefined(s)?n:s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){if(-1!=(l=e.inArray(s,this.selectedColumnIndexes))&&this.clearColumnSelection(s)&&this.selectedColumnIndexes.splice(l,0),-1==l){if(this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,s);else for(d=0;d<c.length;d++)e(c[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}break}case t.Grid.SelectionType.Single:if(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.selectedColumnIndexes=[],this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,s);else for(d=0;d<c.length;d++)e(c[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}else if(this.model.selectionType==t.Grid.SelectionType.Multiple)if(this.clearColumnSelection(),this.selectedColumnIndexes=[],o=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++s,++n,o=1),r=s>n?n:s,a=s>n?s+1:n+1,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,r,a);else for(d=r;d<a;d++){for(h=0;h<c.length;h++)e(c[h].cells[d]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[d]).addClass("e-columnselection"),this.selectedColumnIndexes.push(d-o)}m={columnIndex:s==i?n:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th").not(".e-detailheadercell")[s]),column:this.model.columns[s],selectedColumnIndex:this.selectedColumnIndexes,previousColumnIndex:p,prevColumnHeaderCell:u},this._trigger("columnSelected",m)}},clearSelection:function(i,s){var n,l,o,r,a=i;return this._selectedRow()>=-1&&(n=this.model.scrollSettings.frozenColumns||!t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?this._excludeDetailRows():e(this.element.find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(n.removeAttr("aria-selected").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-selectionbackground").removeClass("e-active"),this._clearVirtualSelection||(this.selectedRowsIndexes=[],this.model.selectedRecords=[],this.model.selectedRowIndices=[]),this._selectionByGrid||(n.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&this._headerCheckUpdateAll(!1),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))):(this.getRowByIndex(i).removeAttr("aria-selected").find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active"),l=this.getRowByIndex(i),this.model.scrollSettings.enableVirtualization&&this.multiSelectCtrlRequest&&-1==e.inArray(i,this.selectedRowsIndexes)&&(i=parseInt(l.attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-l.index()%this._virtualRowCount)),-1!=(i=e.inArray(i,this.selectedRowsIndexes))&&this.selectedRowsIndexes.splice(i,1),this._enableCheckSelect&&!s&&l.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&(this._selectionByGrid||t.isNullOrUndefined(i)||-1==i||((o=this._currentJsonData[a])[this._selectionMapColumn]=!1,this.updateRecord(this._primaryKeys[0],o,"update")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))),this._enableCheckSelect&&(this.selectedRowsIndexes.length==this._currentJsonData.length||this._selectAllCheck||this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall").prop("checked",!1),r=this._currentPage()-1,checkBoxIndex=e.inArray(a,this._checkSelectedRowsIndexes[r]),-1!=checkBoxIndex&&this._checkSelectedRowsIndexes[r].splice(i,1),this.selectedRowsIndexes.length||this._isMapSelection||s||(this._checkSelectedRowsIndexes[r]=[],n.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1))),this.selectedRowsIndexes.length||this._selectedRow(-1)),!0},_excludeDetailRows:function(){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)||this.model.scrollSettings.frozenColumns?this.model.scrollSettings.frozenColumns>0&&null!=this.getRows()&&this.getRows().length>1?e(this.getRows()[0]).not(".e-detailrow,.e-gridSummaryRows").add(e(this.getRows()[1]).not(".e-detailrow,.e-gridSummaryRows")):e(this.getRows()):e(this.getRows()).not(".e-detailrow,.e-gridSummaryRows")},clearCellSelection:function(i,s){var n,l,o;if(this._allowcellSelection)if(n=t.isNullOrUndefined(i)&&t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?e(this.element.find(".e-cellselectionbackground")).parent():this._excludeDetailRows(),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(n=e(n[0]).add(n[1])),n.find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-cellselectionbackground").removeClass("e-activecell"),this.selectedRowCellIndexes=[],this._rowIndexesColl=[];else{for(o=0;o<this.selectedRowCellIndexes.length;o++)if(this.selectedRowCellIndexes[o].rowIndex==i){l=e.inArray(s,this.selectedRowCellIndexes[o].cellIndex),this.model.scrollSettings.frozenColumns?this._frozenCell(i,s).removeClass("e-cellselectionbackground").removeClass("e-activecell"):n.eq(i).find(".e-rowcell").eq(s).removeClass("e-cellselectionbackground").removeClass("e-activecell");break}o!=this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[o].cellIndex.splice(l,1),0==this.selectedRowCellIndexes[o].cellIndex.length&&(this.selectedRowCellIndexes.splice(o,1),this._rowIndexesColl.splice(e.inArray(i,this._rowIndexesColl),1)))}return!0},clearColumnSelection:function(i){var s,n,l,o,r;if(this._allowcolumnSelection)if(s=e(this._excludeDetailRows()),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(s=e(s[0]).add(s[1])),s.find(".e-rowcell").removeClass("e-columnselection"),e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")).removeClass("e-columnselection"),this.selectedColumnIndexes=[];else{if(n=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++i,n=1),this.model.scrollSettings.frozenColumns)for(l=0,currentIndex=i,i>=this.model.scrollSettings.frozenColumns&&(l=1,currentIndex=i-this.model.scrollSettings.frozenColumns),o=0;o<s[l].length;o++)e(s[l][o].cells[currentIndex]).removeClass("e-columnselection");else for(r=0;r<s.length;r++)e(s[r].cells[i]).removeClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[i]).removeClass("e-columnselection"),this.selectedColumnIndexes.splice(0,i-n)}return!0},getSelectedRows:function(){for(var t=e(),i=0;i<this.selectedRowsIndexes.length;i++)this.model.scrollSettings.frozenColumns>0?(t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]),t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[1])):t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]);return t},getSelectedRecords:function(){var t,i,s=[];if($gridRows=this.getRows(),this._virtualScrollingSelection)return this._virtualSelRecords;for(t=0;t<this.selectedRowsIndexes.length;t++)-1!=this.selectedRowsIndexes[t]&&("batch"==this.model.editSettings.editMode&&e($gridRows[this.selectedRowsIndexes[t]]).hasClass("e-insertedrow")?(i=this.batchChanges.added.reverse(),s.push(i[this.selectedRowsIndexes[t]]),this.batchChanges.added.reverse()):this.model.scrollSettings.allowVirtualScrolling?s.push(this._virtualSelectedRecords[this.selectedRowsIndexes[t]]):"batch"==this.model.editSettings.editMode?s.push(this._currentJsonData[this.selectedRowsIndexes[t]-this.batchChanges.added.length]):s.push(this._currentJsonData[this.selectedRowsIndexes[t]]));return s},_setCurrentRow:function(e){(e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Sorting||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Save||e==t.Grid.Actions.Cancel||e==t.Grid.Actions.Paging)&&(this._selectedRow(-1),this._virtualDataRefresh||(this.selectedRowsIndexes=[]))},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),this.model.selectionType==t.Grid.SelectionType.Multiple&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function(e,t,s){t.gridFeatures=t.gridFeatures||{},t.widget("ejGrid","ej.Grid",{_rootCSS:"e-grid",element:null,validTags:["div"],model:null,_requiresID:!0,keyConfigs:{focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",nextPage:"34",previousPage:"33",lastPage:"ctrl+alt+34",firstPage:"ctrl+alt+33",nextPager:"alt+34",previousPager:"alt+33",firstCellSelection:"36",lastCellSelection:"35",firstRowSelection:"ctrl+36",lastRowSelection:"ctrl+35",rowUpSelection:"ctrl+shift+38",rowDownSelection:"ctrl+shift+40",randomSelection:"ctrl+shift+83",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",moveCellRight:"9",moveCellLeft:"shift+9",selectedGroupExpand:"alt+40",totalGroupExpand:"ctrl+40",selectedGroupCollapse:"alt+38",totalGroupCollapse:"ctrl+38",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40"},_ignoreOnPersist:["query","isEdit","toolbarClick","queryCellInfo","mergeCellInfo","currentViewData","enableAltRow","enableRTL","contextClick","contextOpen","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","childGrid","summaryRows","toolbarSettings","editSettings","allowMultiSorting","enableAutoSaveOnSelectionChange","locale","allowCellMerging","allowTextWrap","textWrapSettings","cssClass","dataSource","groupSettings.enableDropAreaAutoSizing","enableRowHover","showSummary","allowGrouping","enableHeaderHover","allowKeyboardNavigation","scrollSettings.frozenRows","scrollSettings.frozenColumns","enableTouch","contextMenuSettings.enableContextMenu","exportToExcelAction","exportToWordAction","exportToPdfAction"],ignoreOnExport:["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","editSettings","pageSettings","enableAutoSaveOnSelectionChange","localization","allowScrolling","cssClass","dataSource","groupSettings.enableDropAreaAnimation","enableRowHover","allowSummary","enableHeaderHover","allowKeyboardNavigation"],observables:["dataSource","selectedRowIndex","pageSettings.currentPage","selectedRowIndices"],_tags:[{tag:"columns",attr:["allowEditing","allowFiltering","filterType","allowGrouping","allowResizing","allowSorting","cssClass","customAttributes","dataSource","defaultValue","disableHtmlEncode","editTemplate","editType","foreignKeyField","foreignKeyValue","headerTemplateID","headerText","isFrozen","isIdentity","isPrimaryKey","filterBarTemplate","textAlign","templateID","textAlign","headerTextAlign","tooltip","clipMode","validationRules.minlength","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","editParams.decimalPlaces",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["showCaptionSummary","showTotalSummary",[{tag:"summaryColumns",attr:["customSummaryValue","dataMember","displayColumn","summaryType","template"]}]]},{tag:"stackedHeaderRows",attr:[[{tag:"stackedHeaderColumns",attr:["headerText","column"]}]]},{tag:"filterSettings.filteredColumns",attr:[]},{tag:"sortSettings.sortedColumns",attr:[]}],_dataSource:t.util.valueFunction("dataSource"),_selectedRow:t.util.valueFunction("selectedRowIndex"),_selectedMultipleRows:t.util.valueFunction("selectedRowIndices"),_currentPage:t.util.valueFunction("pageSettings.currentPage"),defaults:{allowPaging:!1,showColumnChooser:!1,gridLines:"both",allowSorting:!1,showStackedHeader:!1,selectedRecords:[],stackedHeaderRows:[],allowFiltering:!1,allowMultipleExporting:!1,allowSelection:!0,allowGrouping:!1,showSummary:!1,allowResizing:!1,allowResizeToFit:!1,allowTextWrap:!1,allowCellMerging:!1,enableRowHover:!0,enablePersistence:!1,enableFocusout:!1,selectedRowIndex:-1,selectedRowIndices:[],allowSearching:!1,enableToolbarItems:!1,enableHeaderHover:!1,allowReordering:!1,allowKeyboardNavigation:!0,allowRowDragAndDrop:!1,enableTouch:!0,enableLoadOnDemand:!1,columnLayout:"auto",selectionType:"single",dataSource:null,cssClass:"",allowScrolling:!1,locale:"en-US",enableAutoSaveOnSelectionChange:!0,allowMultiSorting:!1,exportToExcelAction:"ExportToExcel",exportToWordAction:"ExportToWord",exportToPdfAction:"ExportToPdf",_groupingCollapsed:[],editSettings:{allowEditing:!1,showAddNewRow:!1,allowAdding:!1,showAddNewRow:!1,allowDeleting:!1,editMode:"normal",rowPosition:"top",dialogEditorTemplateID:null,allowEditOnDblClick:!0,externalFormTemplateID:null,inlineFormTemplateID:null,formPosition:"bottomleft",titleColumn:null,showConfirmDialog:!0,showDeleteConfirmDialog:!1},selectionSettings:{selectionMode:["row"],enableToggle:!1,cellSelectionMode:"flow"},resizeSettings:{resizeMode:"normal"},pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:null,enableTemplates:!1,showDefaults:!1,template:null,totalRecordsCount:null,enableQueryString:!1,printMode:"allpages"},groupSettings:{showDropArea:!0,showToggleButton:!1,showGroupedColumn:!0,showUngroupButton:!0,enableDropAreaAutoSizing:!0,captionFormat:null,groupedColumns:[]},contextMenuSettings:{enableContextMenu:!1,contextMenuItems:["Add Record","Edit Record","Delete Record","Sort In Ascending Order","Sort In Descending Order","Next Page","Last Page","Previous Page","First Page","Save","Cancel","Grouping","Ungrouping"],customContextMenuItems:[],subContextMenu:[],disableDefaultItems:!1},filterSettings:{filterType:"filterbar",filterBarMode:"immediate",showFilterBarStatus:!0,statusBarWidth:450,showPredicate:!1,filteredColumns:[],enableInterDeterminateState:!0,maxFilterChoices:1e3,enableCaseSensitivity:!1,immediateModeDelay:1500,enableComplexBlankFilter:!0,blankValue:""},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0},sortSettings:{sortedColumns:[]},toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},minWidth:0,currentIndex:0,rowDropSettings:{dropMapper:null,dragMapper:null,dropTargetID:null},scrollSettings:{width:"auto",height:0,enableTouchScroll:!0,allowVirtualScrolling:!1,virtualScrollMode:"normal",frozenRows:0,frozenColumns:0,buttonSize:18,autoHide:!1,scrollerSize:18,scrollOneStepBy:57,enableVirtualization:!1},textWrapSettings:{wrapMode:"both"},summaryRows:[],enableRTL:!1,enableAltRow:!0,currentViewData:null,detailsTemplate:null,childGrid:null,keySettings:null,rowTemplate:null,detailsDataBound:null,rowDataBound:null,queryCellInfo:null,mergeCellInfo:null,create:null,actionBegin:null,actionComplete:null,actionFailure:null,beginEdit:null,endEdit:null,endAdd:null,endDelete:null,beforeBatchAdd:null,beforeBatchSave:null,beforeBatchDelete:null,beforePrint:null,batchAdd:null,batchDelete:null,cellSave:null,cellEdit:null,resizeStart:null,resizeEnd:null,resized:null,load:null,destroy:null,rowSelecting:null,rowSelected:null,cellSelecting:null,cellSelected:null,columnSelecting:null,columnSelected:null,columnDragStart:null,columnDrag:null,columnDrop:null,rowDrag:null,rowDragStart:null,rowDrop:null,beforeRowDrop:null,dataBound:null,recordClick:null,recordDoubleClick:null,templateRefresh:null,rightClick:null,detailsCollapse:null,detailsExpand:null,toolbarClick:null,contextOpen:null,contextClick:null,columns:[],query:null,isEdit:!1,isResponsive:!1,enableResponsiveRow:!1,virtualLoading:null},dataTypes:{dataSource:"data",query:"data",columns:"array",childGrid:"parent",gridLines:"enum",summaryRows:"array",stackedHeaderRows:"array",toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},contextMenuSettings:{contextMenuItems:"array",customContextMenuItems:"array",subContextMenu:"array"},selectionSettings:{selectionMode:"array",selectedRecords:"array"},sortSettings:{sortedColumns:"array"},filterSettings:{filteredColumns:"array",filterType:"enum",filterBarMode:"enum"},groupSettings:{groupedColumns:"array"},editSettings:{editMode:"enum",formPosition:"enum",rowPosition:"enum"},searchSettings:{fields:"array"},textWrapSettings:{wrapMode:"enum"}},_columns:function(){this.element.find(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),this._headerCellgDragDrop(),this.refreshContent(!0),this._trigger("refresh")},_summaryRows:function(e,i,s){if("showTotalSummary"==i||"showCaptionSummary"==i){var n=e.summaryRows,l=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);this.option("summaryRows")[n][i]=l}this.element.find(".e-gridfooter").remove(),this._renderGridFooter().insertAfter(this.getContent()),("showCaptionSummary"==i||"title"==i)&&(this._isCaptionSummary=this.option("summaryRows")[n].showCaptionSummary,this.model.showSummary=this._isCaptionSummary,0!=this.model.groupSettings.groupedColumns.length&&this._refreshCaptionSummary())},_summaryRows_summaryColumns:function(e,i,s){("displayColumn"==i||"dataMember"==i)&&t.isNullOrUndefined(this.getColumnByField(s))||(this._createSummaryRows(this.getFooterTable()),0!=this.element.find(".e-groupcaptionsummary").length&&this._refreshCaptionSummary())},_stackedHeaderRows_stackedHeaderColumns:function(){this._refreshStackedHeader()},_sortSettings_sortedColumns:function(e,t,i){var s,n,l=this.model.sortSettings.sortedColumns[e["sortSettings.sortedColumns"]];"field"==t?(s=null!=this.getColumnByField(i)?i:null,n="ascending"==l.direction||"descending"==l.direction?l.direction:null):"direction"==t&&(s=null!=this.getColumnByField(l.field)?l.field:null,n="ascending"==i||"descending"==i?i:null),null!=s&&null!=n&&this.sortColumn(s,n)},_filterSettings_filteredColumns:function(e,i,s){var n,l,o,r,a,d=this.model.filterSettings.filteredColumns[e["filterSettings.filteredColumns"]];switch(i){case"field":n=null!=this.getColumnByField(s)?s:null,l=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"matchcase":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);break;case"operator":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,s),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"predicate":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==s||"or"==s?s:null,o=d.matchcase;break;case"value":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,d.operator),a=s,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase}null!=n&&null!=l&&null!=a&&null!=r&&null!=o&&this.filterColumn(n,l,a,r,o)},_map:function(t,i){var s=e.map(t,function(e){if(e===i)return e});return 0!=s.length?s[0]:null},_refreshCaptionSummary:function(){var t=document.createElement("div");t.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),this.getContentTable().get(0).replaceChild(t.firstChild.firstChild,this.getContentTable().get(0).lastChild),this.refreshContent()},getContentTable:function(){return this._gridContentTable},setGridContentTable:function(e){this._gridContentTable=e},getContent:function(){return this._gridContent},setGridContent:function(e){this._gridContent=e},getHeaderContent:function(){return this._gridHeaderContent},setGridHeaderContent:function(e){this._gridHeaderContent=e},getHeaderTable:function(){return this._gridHeaderTable},setGridHeaderTable:function(e){this._gridHeaderTable=e},getRows:function(){return this._gridRows},getFilteredRecords:function(){return this._filteredRecords},getRowByIndex:function(i,s){var n;try{var l=this.getRows(),o=this._excludeDetailRows(),r=e();if(e.isArray(i)){for(n=0;n<i.length;n++)this.model.scrollSettings.frozenColumns>0?(r.push(l[0][i[n]]),r.push(l[1][i[n]])):r.push(l[i[n]]);return r}return t.isNullOrUndefined(s)?this.model.scrollSettings.frozenColumns>0?(r.push(l[0][i]),r.push(l[1][i]),r):e(o.not(".e-virtualrow")[i]):this.model.scrollSettings.frozenColumns>0?(r.push(e(l[0]).slice(i,s)),r.push(e(l[1]).slice(i,s)),r):e(o.not(".e-virtualrow").slice(i,s))}catch(t){return e()}},getColumnIndexByField:function(e){for(var t=0,i=this.model.columns,s=i.length;t<s;t++)if(i[t].field===e)return t;return-1},getColumnIndexByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s},getIndexByRow:function(t){var i,s=this.getRows(),n=this._excludeDetailRows();return this.model.scrollSettings.frozenColumns>0?(-1==(i=e(s[0]).index(t))&&(i=e(s[1]).index(t)),i):n.not(".e-virtualrow").index(t)},getPrimaryKeyFieldNames:function(){if(0!=this._primaryKeys.length)return this._primaryKeys;for(var e=0,t=this.model.columns,i=t.length;e<i;e++)t[e].isPrimaryKey&&this._primaryKeys.push(t[e].field);return this._primaryKeys},getVisibleColumnNames:function(){return this._visibleColumns},getHiddenColumnNames:function(){return this._hiddenColumns},getColumnByField:function(e){for(var t=0;t<this.model.columns.length&&this.model.columns[t].field!=e;t++);return t==this.model.columns.length?null:this.model.columns[t]},getsortColumnByField:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[t].field!=e;t++);return t==this.model.sortSettings.sortedColumns.length?null:this.model.sortSettings.sortedColumns[t]},getColumnByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s==this.model.columns.length?null:this.model.columns[s]},getCurrentViewData:function(){return this._currentJsonData},getColumnFieldNames:function(){for(var e=[],t=0;t<this.model.columns.length;t++)this.model.columns[t].field&&e.push(this.model.columns[t].field);return e},getBrowserDetails:function(){var t=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return navigator.userAgent.match(/Trident\/7\./)||navigator.userAgent.match(/Edge/)?{browser:"msie",version:e.uaMatch(navigator.userAgent).version}:{browser:t[1].toLowerCase(),version:t[2]}},_initPrivateProperties:function(){this._click=0,this._gridPhoneMode=320,this._columntemplaterefresh=!1,this._tabKey=!1,this._gridHeaderTable=null,this._gridWidth=this.element.width(),this._id=this.element.attr("id"),this._gridRows=[],this._unboundRow=null,this._gridContentTable=null,this._gridContent=null,this._remoteSummaryData=null,this._gridSort=null,this._gridHeaderContent=null,this._gridFooterContent=null,this._gridFooterTable=null,this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._links=null,this._gridPager=null,this._cSortedColumn=null,this._cSortedDirection=null,this._$curSElementTarget=null,this._gridFilterBar=null,this._$curFieldName=null,this._$prevFieldName=null,this._mediaStatus=!1,this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1,this._$colType=null,this._$colFormat=null,this._$prevColType=null,this._$prevSElementTarget=null,this._currentFilterColumn=null,this._filteredRecordsCount=null,this._filteredRecords=[],this._validatedColumns=[],this.filterColumnCollection=[],this._previousFilterCount=null,this._excelFilter=null,this._isExcelFilter="excel"==this.model.filterSettings.filterType,this._$fkColumn=!1,this._fkParentTblData=[],this._primaryKeys=[],this._identityKeys=[],this._primaryKeyValues=[],this._modifiedRecords=[],this._addedRecords=[],this._tdsOffsetWidth=[],this._deletedRecords=[],this._disabledToolItems=e(),this._validationRules={},this._groupedColumns=[],this._LastColumnUnGroup=!1,this._scolumns=[],this._currentJsonData=[],this._groupingColumnIndex=0,this._dataManager=this._dataSource()instanceof t.DataManager?this._dataSource():null!=this._dataSource()?t.DataManager(this._dataSource()):null,null!=this._dataManager&&this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&null!=this.model.pageSettings.totalRecordsCount&&null!=this._dataManager.dataSource.json&&this._dataManager.dataSource.json.splice(this.model.pageSettings.totalRecordsCount),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!0,this._disabledResizingColumns=[],this._disabledSortableColumns=[],this._disabledGroupableColumns=[],this._disabledFilterableColumns=[],this._disabledEditableColumns=[],this._hiddenColumns=[],this._visibleColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._ccVisibleColumns=[],this._ccHiddenColumns=[],this._sortedColumns=[],this.multiSortRequest=!1,this.multiSelectCtrlRequest=!1,this.multiSelectShiftRequest=!1,this._enableSelectMultiTouch=!1,this._enableSortMultiTouch=!1,this._templateRefresh=!1,this.initialRender=!1,this._selectDrag=!1,this._isAddNew=!1,this._fieldColumnNames={},this._headerColumnNames={},this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualPageRecords={},this._queryCellView=[],this._currentPageViews=[],this._virtualLoadedPages=[],this._currentLoadedIndexes=[],this._prevVirtualSort=[],this._prevVirtualFilter=[],this._prevVirtualIndex=0,this._currentVirtualIndex=1,this._virtualRowCount=0,this._virtualSelectedRecords={},this._selectionByGrid=!1,this._enableCheckSelect=!1,this._checkSelectedRowsIndexes=[],this._isMapSelection=!1,this._selectionMapColumn=null,this._selectAllCheck=!1,this.selectedRowsIndexes=[],this._isReorder=!1,this._searchString="",this._searchCount=null,this.columnsWidthCollection=[],this._Indicator=null,this._resizer=null,this._bulkEditCellDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null},this.batchChanges={added:[],deleted:[],changed:[]},this._bulkEditTemplate=e(),this._confirmDialog=null,this._confirmedValue=!1,this._lastRow=!1,this._isVirtualRecordsLoaded=!1,this._scrollValue=0,this._currentTopFrozenRow=this.model.scrollSettings.frozenRows,this._rowHeightCollection=[],this._scrollObject=null,this._customPop=null,this.selectedRowCellIndexes=[],this._rowIndexesColl=[],this.selectedColumnIndexes=[],this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.commonQuery=e.extend(!0,{},this.model.query),t.gridFeatures.group&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0),this.phoneMode=!!(this.model.isResponsive&&document.documentElement.clientWidth<360),this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection(),this._mediaQuery=!1,this._columnChooserList=null,this._$headerCols=null,this._$contentCols=null,this._detailsOuterWidth=null,this._editForm=null,this._cloneQuery=null,this.localizedLabels=this._getLocalizedLabels(),this._searchBar=null,this._relationalColumns=[],this._dropDownManager={},this._isUngrouping=!1,this._columnChooser=!1,this._showHideColumns=!1,this._vCurrentTrIndex=null,this._lastVirtualPage=null,this._currentVIndex=null,(!this.model.enablePersistence||t.isNullOrUndefined(this._isHeightResponsive))&&(this._isHeightResponsive=!1),this._resize=!1,this._initHeight=0},_init:function(){var e,i,n;this._trigger("load"),!t.isNullOrUndefined(this.model.query)&&this.model.query instanceof t.Query||(this.model.query=t.Query()),t.isNullOrUndefined(this.model.parentDetails)||(e=this.model.queryString,i=this.model.foreignKeyField,this.model.query=this.model.query.clone(),n=this.model.parentDetails.parentKeyFieldValue===s?"undefined":this.model.parentDetails.parentKeyFieldValue,this.model.query.where(t.isNullOrUndefined(i)?e:i,"equal",n,!0)),this._initPrivateProperties(),t.gridFeatures.common&&this._initScrolling(),this.model.enableResponsiveRow&&this.element.addClass("e-responsive"),this._checkForeignKeyBinding(),this._checkDataBinding()},_initComplexColumn:function(e,i,s){var n,l,o,r=s||i;for(n in e)"object"!=typeof e[n]||t.isNullOrUndefined(e[n])?(l=r.concat(".").concat(n),o=e[n],this.model.columns.push({field:l,type:null!=o?o.getDay?o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0||o.getMilliseconds()>0?"datetime":"date":typeof o:null})):(r=r.concat(".").concat(n),this._initComplexColumn(e[n],n,r))},_initColumns:function(i){for(var n,l,o,r,a;i.items!=s;)i=i.items[0];if(0==this.model.columns.length&&i){for(n in i)i.hasOwnProperty(n)&&("object"!=typeof i[n]||i[n]instanceof Date||null==i[n])?(l=i[n],this.model.columns.push({field:n,type:null!=l?l.getDay?l.getHours()>0||l.getMinutes()>0||l.getSeconds()>0||l.getMilliseconds()>0?"datetime":"date":typeof l:null})):"object"==typeof i[n]&&this._initComplexColumn(i[n],n);this.model.columns.length&&this._renderAfterColumnInitialize()}else for(o=0;o<this.model.columns.length;o++)this.model.columns[o].field=t.isNullOrUndefined(this.model.columns[o].field)?"":this.model.columns[o].field,t.isNullOrUndefined(this.model.columns[o].validationRules)||this._validatedColumns.push(this.model.columns[o].field),t.isNullOrUndefined(this.model.columns[o].type)?(r=t.isNullOrUndefined(this.model.columns[o].field)?null:t.getObject(this.model.columns[o].field,i),!!(a=this.model.columns[o].dataSource)&&this.model.columns[o].foreignKeyValue&&(this.model.columns[o].originalType=null!=r?r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof r:null,r=a instanceof t.DataManager?t.getObject("0."+this.model.columns[o].foreignKeyValue,this.model.columns[o].foreignKeyData):t.getObject("0."+this.model.columns[o].foreignKeyValue,a)),this.model.columns[o].type=null!=r?r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof r:null):"date"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns?e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+"}"}):"datetime"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns&&e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+" "+t.preferredCulture().calendars.standard.patterns.t+"}"})},_initSelection:function(){var e=this.model.selectionSettings.selectionMode;for(i=0;i<e.length;i++)this["_allow"+e[i]+"Selection"]=!0},_checkDataBinding:function(){var i,n,l,o,r;if(!this.model.columns.length&&((null==this._dataSource()||!this._dataSource().length)&&!(this._dataSource()instanceof t.DataManager)||this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url==s&&!this._dataSource().dataSource.json.length))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource),void this._alertDialog.ejDialog("open");if(this._initialRenderings(),this.model.editSettings.allowDeleting&&"multiple"==this.model.selectionType&&(this.multiDeleteMode=!0),this.initialRender=!0,this.model.enableRTL&&this.element.addClass("e-rtl"),this.model.allowFiltering&&this._isExcelFilter&&this._renderExcelFilter(),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this.model.allowGrouping&&this.element.append(this._renderGroupDropArea()),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&(this.element.append(this._renderToolBar()),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&-1!=e.inArray("search",this.model.toolbarSettings.toolbarItems)&&(i=this.element.find(".e-toolbar.e-toolbarspan .e-gridsearchbar"),t.ieClearRemover(i[0]))),(n=this.model.columns)&&n.length){if(l=this.model.query._expands,"string"==typeof n[0])for(o=0;o<n.length;o++)n[o]={field:n[o]};for(o=0;o<n.length;o++)n[o].field&&-1!==n[o].field.indexOf(".")&&this._getExpands(n[o].field,l);this.model.query.expand(l),this.commonQuery.expand(l),this._renderAfterColumnInitialize()}this.model.allowPaging&&this.element.append(this._renderGridPager()),this.model.contextMenuSettings.enableContextMenu&&this.element.append(this._renderContext()),e.isFunction(e.fn.ejWaitingPopup)&&(this.element.ejWaitingPopup({showOnInit:!1}),e("#"+this._id+"_WaitingPopup").addClass("e-gridwaitingpopup")),this.model.scrollSettings.allowVirtualScrolling&&(this._loadedJsonData=[],this._prevPage=1),this._dataSource()instanceof t.DataManager?(this.element.ejWaitingPopup("show"),this._dataSource().ready!=s?(r=this,this._dataSource().ready.done(function(e){r._initDataSource(),r.model.dataSource=t.DataManager(e.result)})):(this.element.ejWaitingPopup("show"),this._initDataSource())):(this._ensureDataSource(),this._trigger("actionBegin"),this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender(),this._vRowHeight=Math.floor(this.getRowHeight()))},_renderColumnChooser:function(){var i,n,l,o,r,a,d,h,c,u,m=t.buildTag("button .e-ccButton",this.localizedLabels.Columns,{float:this.model.enableRTL?"left":"right"}).attr("type","button");this.element.prepend(m),m.ejButton({prefixIcon:"e-icon e-down-arrow",imagePosition:"imageright",contentType:"textandimage",type:"button",click:e.proxy(this._ccClickHandler,this),width:90}),i=m.outerHeight(),m.css("margin-top",0-i),n=parseInt(this.element.css("margin-top"),10),this.element.css("margin-top",n+i),t.buildTag("div"),l=t.buildTag("div .e-grid e-columnChooser","",{},{id:this._id+"ccDiv"}),e("#"+this._id+"ccDiv").data("ejDialog")!=s&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove()),o=t.buildTag("div.e-searchbox e-fields").append(t.buildTag("input#"+this._id+"_ccSearchBox.e-ejinputtext e-filtertext",{},{},{type:"text"})),r=t.buildTag("span .e-searchfind e-icon"),o.append(r),a=t.buildTag("div","",{height:"228px"},{id:this._id+"liScrollerDiv"}),this._renderColumnChooserData(!1),a.append(this._columnChooserList),l.append(o),l.append(a),d=t.buildTag("div .e-columnChooserSplitter","",{"border-bottom":"0px"}),l.append(d),this.model.enableRTL?($buttonDiv=t.buildTag("div","",{float:"left","margin-top":"7px","margin-right":"-13px"}),h=t.buildTag("button",this.localizedLabels.Cancel,{"margin-right":"7px","margin-left":"9px"}),e(r).addClass("e-rtl")):($buttonDiv=t.buildTag("div","",{float:"right","margin-top":"7px","margin-right":"-13px"}),h=t.buildTag("button",this.localizedLabels.Cancel,{"margin-right":"20px","margin-left":"6px"})),c=t.buildTag("button",this.localizedLabels.Done),$buttonDiv.append(c),$buttonDiv.append(h),l.append($buttonDiv),c.ejButton({click:e.proxy(this._addButtonCC,this),showRoundedCorner:!0,width:66}),h.ejButton({click:e.proxy(this._cancelButtonHandler,this),showRoundedCorner:!0,width:66}),l.insertBefore(this.element),l.ejDialog({width:"auto",beforeClose:e.proxy(this._columnChooserBeforeClose,this),showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260}),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&(u=e(".e-columnChooser").find("input#"+this._id+"_ccSearchBox")[0],t.ieClearRemover(u))},_renderColumnChooserData:function(i){var s,n,l,o,r,a,d,h=this.model.columns.length==this.getVisibleColumnNames().length;for(this._ccCheckBoxList=[],s=t.buildTag("div","",{"margin-left":"0px",width:"250px"}),n=0,l=-1;l<this.model.columns.length;l++)if((o=-1==l)||this.model.columns[l].showInColumnChooser){var c=this.model.columns[l],u=o?this.localizedLabels.SelectAll:t.isNullOrUndefined(c.headerText)||""==c.headerText?""==c.field?null:c.field:c.headerText,m=c&&c.disableHtmlEncode?this._htmlEscape(u):u;if(!t.isNullOrUndefined(u)||o){var p=t.buildTag("div","",{},{class:"e-columnChooserListDiv"}),g=o?this._id+"selectAll":this._id+u.replace(/\s|\.|[^a-zA-Z0-9]|&nbsp/g,"_"),f=s.find("#"+g).length;f&&n++,r=t.buildTag("input","",{},{id:f?g+n+"":g,value:u,type:"checkbox","ej-field":o?"":c.field,"ej-headertext":o?"":c.headerText,class:o?"e-selectall":""}),a=t.buildTag("label",m,{"font-size":"13px"},{for:f?g+n+"":g}),p.append(r),p.append(a),s.append(p),d=!(!o&&!t.isNullOrUndefined(c.visible))||c.visible,r.ejCheckBox({checked:o?h:d,change:e.proxy(this._columnChooserCheckChange,this)}),o||t.isNullOrUndefined(c.visible)||r[c.visible?"attr":"removeAttr"]("checked",!0)}}i?(this._columnChooserList.empty().append(s.children()),e("#"+this._id+"liScrollerDiv").is(":visible")&&e("#"+this._id+"liScrollerDiv").ejScroller("refresh")):this._columnChooserList=s,this._ccCheckBoxList=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")},_checkFinder:function(){var t=e(this),i=t.closest(".e-columnChooserListDiv");if(t.hasClass("e-checkbox")&&!i.hasClass("e-hide")&&t.prop("checked"))return!0},_displayFinder:function(){return!e(this).closest(".e-columnChooserListDiv").hasClass("e-hide")},_columnChooserCheckChange:function(t){var i;if(t.isInteraction){var s=t.isChecked,n=this._ccCheckBoxList.filter(this._displayFinder),l=this._ccCheckBoxList.filter(this._checkFinder),o=n.length,r=l.length;t.model.id==this._id+"selectAll"?s?n.not(":checked").ejCheckBox({checked:s}):l.ejCheckBox({checked:s}):(this._columnChooserList.find("input.e-selectall").ejCheckBox("model.checked",o==r),s=0!=r,this.element[s?"attr":"removeAttr"]("checked",!0)),i=s?"removeClass":"addClass",e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[i]("e-disable")}else t.isChecked&&e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable")},_columnChooserBeforeClose:function(){e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove(),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable"),e("#"+this._id+"_ccSearchBox").val("");var t={target:{}};t.target.value="",this._columnChooserSearch(t)},_columnChooserSearch:function(s){var n,l,o,r,a,d,h,c,u;"click"==s.type&&(s.target.value="",e("#"+this._id+"_ccSearchBox").val("")),n=s.target.value,l=e("#"+this._id+"_ccSearchBox").next("span"),""!=n?(l.removeClass("e-searchfind"),l.addClass("e-cancel")):(l.removeClass("e-cancel"),l.addClass("e-searchfind")),e(".e-cancel").on("click",e.proxy(this._columnChooserSearch,this));var m=this.model.columns,p=[],g=[],f=this,_=function(t){var i=f.model.groupSettings;return!i.showGroupedColumn&&e.inArray(t,i.groupedColumns)>-1};for(""!=n&&(m=t.DataManager(this.model.columns).executeLocal(t.Query().where("headerText",t.FilterOperators.startsWith,n,!0)),t.DataManager(this.model.columns).executeLocal(t.Query().where("field",t.FilterOperators.startsWith,n,!0)).forEach(function(t){""==t.headerText&&-1==e.inArray(t,m)&&m.push(t)})),m.forEach(function(e){if(e.showInColumnChooser&&!_(e.field)){var i=t.isNullOrUndefined(e.headerText)||""==e.headerText?""==e.field?null:e.field:e.headerText;p.push(i)}}),t.isNullOrUndefined(e("#nomatches")[0])||e("#nomatches").remove(),o=e("#"+this._id+"ccDiv").find("#"+this._id+"liScrollerDiv"),r=this._columnChooserList.find(".e-columnChooserListDiv"),i=0;i<this.model.columns.length;i++)this.model.columns[i].showInColumnChooser&&!t.isNullOrUndefined(this.model.columns[i].headerText)&&(""!=this.model.columns[i].headerText?g.push(this.model.columns[i].headerText):""!=this.model.columns[i].field&&g.push(this.model.columns[i].field));for(a=0;a<g.length;a++)d=g[a],h=p.indexOf(d),t.isNullOrUndefined(d)||r.eq(a+1)[-1==h?"addClass":"removeClass"]("e-hide");0==p.length&&(c=t.buildTag("div#nomatches","",{"padding-left":"13px"}),u=t.buildTag("span",this.localizedLabels.NoResult),c.append(u),e(o).append(c));var v=this._ccCheckBoxList.filter(this._displayFinder).length,b=this._ccCheckBoxList.filter(this._checkFinder).length,C=b==v;p.length&&r.eq(0).find("input.e-js").ejCheckBox({checked:C}),r.eq(0)[0==p.length?"addClass":"removeClass"]("e-hide"),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[b?"removeClass":"addClass"]("e-disable"),e("#"+this._id+"liScrollerDiv").ejScroller("refresh")},_addButtonCC:function(){var t,i,s,n;for(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._columnChooserClick=!0,(t={}).requestType="columnchooser",this._columnChooser=!0,s=0,n=(i=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")).length;s<n;s++){var l=e(i[s]),o=l.attr("ej-headertext"),r=l.attr("ej-field");this._id+"selectAll"!=l.attr("id")&&(this[i[s].checked?"_visibleColumns":"_hiddenColumns"].push(o),this[i[s].checked?"_visibleColumnsField":"_hiddenColumnsField"].push(""!=r?r:o))}var a,d,h=this._visibleColumns,c=this._hiddenColumns;a=e.merge(e.merge([],h),c),d=this._isDuplicate(a),this._trigger("actionBegin",t),d?(this.showColumns(this._visibleColumnsField),this.hideColumns(this._hiddenColumnsField)):(this.showColumns(this._visibleColumns),this.hideColumns(this._hiddenColumns)),e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertail").remove(),this.refreshScrollerEvent(),t={requestType:"columnchooser",removedcolumns:[],addedcolumns:[],visiblecolumns:this.getVisibleColumnNames(),hiddencolumns:this.getHiddenColumnNames()},this._ccColumnUpdate(t.addedcolumns,this.getVisibleColumnNames(),this._ccVisibleColumns),this._ccColumnUpdate(t.removedcolumns,this.getHiddenColumnNames(),this._ccHiddenColumns),this._trigger("actionComplete",t)},_ccColumnUpdate:function(t,s,n){for(i=0;i<s.length;i++)-1==e.inArray(s[i],n)&&t.push(s[i])},_isDuplicate:function(e){for(var t,i=[],s=0;s<e.length;s++)i[t=e[s]]=i[t]>=1?i[t]+1:1;for(t in i)if(i[t]>1)return!0;return!1},_cancelButtonHandler:function(){e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertailAlt").remove(),e(".e-columnChoosertail").remove()},_ccClickHandler:function(){var i,s,n=this.element.find(".e-ccButton");if(i=n.offset().left+n.width(),(s=e("#"+this._id+"ccDiv").data("ejDialog"))&&s.isOpened())s.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove();else{e("#"+this._id+"ccDiv").ejDialog({width:"230px",height:"309px",position:{X:this.model.enableRTL?i-230+143:i-230,Y:n.offset().top+35}}).ejDialog("open");var l=parseInt(e("#"+this._id+"ccDiv_wrapper").css("z-index")),o=t.buildTag("div #"+this._id+"_ccTail .e-columnChoosertail","",{display:"block",position:"absolute",left:this.model.enableRTL?i-78:i-29,top:n.offset().top+15}),r=t.buildTag("div #"+this._id+"_ccTailAlt .e-columnChoosertailAlt","",{display:"block","z-index":l+2,position:"absolute",left:this.model.enableRTL?i-78:i-29,top:n.offset().top+16});o.insertBefore(e("#"+this._id+"ccDiv_wrapper")),r.insertBefore(e("#"+this._id+"ccDiv_wrapper"))}this._refreshColumnChooserList(),this._ccVisibleColumns=this.getVisibleColumnNames(),this._ccHiddenColumns=this.getHiddenColumnNames(),e("#"+this._id+"liScrollerDiv").ejScroller({height:"228",width:"228",buttonSize:0}),e("#"+this._id+"liScrollerDiv").ejScroller("refresh"),t.isIOSWebView()||"chrome"!=this.getBrowserDetails().browser||e(".e-columnChooser .e-hscrollbar").attr("style","height: 10px !important;"),e(".e-ejinputtext").on("keyup",e.proxy(this._columnChooserSearch,this))},_refreshColumnChooserList:function(){for(var t,i,s,n=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall"),l=this._isDuplicate(e.merge(e.merge([],this._visibleColumns),this._hiddenColumns)),o=0,r=n.length;o<r;o++){var a,d=e(n[o]),h=d.attr("ej-headertext"),c=d.attr("ej-field");n.filter("[ej-headertext='"+h+"']").length;this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&-1!=e.inArray(e(n[o]).attr("ej-field"),this.model.groupSettings.groupedColumns)?(e(n[o]).parents(".e-columnChooserListDiv").addClass("e-hide"),n[o].checked=!1):(e(n[o]).parents(".e-columnChooserListDiv").removeClass("e-hide"),n[o].checked=!0),t=l?""==c?h:c:h,a=-1!=this[l?"_hiddenColumnsField":"_hiddenColumns"].indexOf(t),d.prop("checked",!a),d.ejCheckBox("model.checked",!a)}i=!(n.filter(this._displayFinder).length!=n.filter(this._checkFinder).length||!n.filter(this._displayFinder).length),this._columnChooserList.find("input:checkbox.e-selectall").ejCheckBox({checked:i}),this.model.groupSettings.showGroupedColumn||(s=n.filter(this._displayFinder).length>0,e("#"+this._id+"ccDiv").find("button[aria-describedby='Done']").ejButton({enabled:s}))},_initDataSource:function(){var i,s;this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataSource().dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(this._isLocalData=!1),this._ensureDataSource(),this._trigger("actionBegin"),i=this._dataSource().executeQuery(this.model.query),s=this,null!=this._dataManager.dataSource.table&&this._dataManager.dataSource.table.css("display","none"),this.element.is(":visible")||this.element.ejWaitingPopup("hide"),i.done(t.proxy(function(i){var n,l,o;if(0==this._relationalColumns.length&&this.element.ejWaitingPopup("hide"),!this.model.columns.length&&!i.count)return n=i.count%this.model.pageSettings.pageSize==0?i.count/this.model.pageSettings.pageSize:parseInt(i.count/this.model.pageSettings.pageSize,10)+1,this._currentPage()>n&&this._currentPage(n),s._renderAlertDialog(),s._alertDialog.find(".e-content").text(s.localizedLabels.EmptyDataSource),s._alertDialog.ejDialog("open"),void s.element.ejWaitingPopup("hide");if(t.isNullOrUndefined(i.aggregates)||(this._remoteSummaryData=i.aggregates),this.model.scrollSettings.enableVirtualization||(this.model.currentViewData=i.result),this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=i.result),this._gridRecordsCount=this.model.enablePersistence||null==this.model.pageSettings.totalRecordsCount||0!=this.model.filterSettings.filteredColumns.length?0==i.count&&i.result.length?i.result.length:i.count:this.model.pageSettings.totalRecordsCount,this.model.filterSettings.filteredColumns.length>0&&(this._filteredRecordsCount=i.count),null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)if(this._refreshVirtualViewDetails(),this._isInitNextPage||this._remoteRefresh?(this._setInitialCurrentIndexRecords(i.result,this._currentPage()),this._isInitNextPage=this._remoteRefresh=!1):this._setVirtualLoadedRecords(i.result,this._currentPage()),this._isThumbScroll&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)&&this._checkPrevNextViews(this._currentPage()),this.initialRender)for(this.model.currentViewData=[],l=0;l<this._currentLoadedIndexes.length;l++)o=this._currentLoadedIndexes[l],e.merge(this.model.currentViewData,this._virtualLoadedRecords[o]||[]);else this.model.currentViewData=i.result;this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender()},this)),s=this,i.fail(function(e){s.element.ejWaitingPopup("hide"),s.model.currentViewData=[],s._gridRecordsCount=0,s._renderGridContent().insertAfter(s.element.children(".e-gridheader"));var t={error:e.error};s._trigger("actionFailure",t)})},_initialRenderings:function(){var i,s;if(this.model.groupSettings.groupedColumns.length){for(i=[],s=0;s<this.model.sortSettings.sortedColumns.length;s++)t.isNullOrUndefined(this.model.sortSettings.sortedColumns[s].direction)&&(this.model.sortSettings.sortedColumns[s].direction=t.sortOrder.Ascending),i.push(this.model.sortSettings.sortedColumns[s].field);if(this.model.allowGrouping)for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)-1==e.inArray(this.model.groupSettings.groupedColumns[s],i)&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[s],direction:t.sortOrder.Ascending})}},_getExpands:function(e,t){var i,s,n=e.split("."),l="";for(n.splice(n.length-1,1),i=0;i<n.length;i++,l=""){for(s=0;s<i;s++)l+=n[s]+"/";l+=n[i],-1===t.indexOf(l)&&t.push(l)}},_renderAfterColumnInitialize:function(){this.element.append(this._renderGridHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(this._renderFiltering(),this._renderFilterBarTemplate()),"both"!=this.model.gridLines&&this._showHeaderGridLines(),this.model.allowPaging&&this.element.append(this.element.find(".e-pager").first())},_ensureDataSource:function(i){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S,x,T,k,D,I,O,R,A,M,F,P,E;if(null==this._dataSource()&&!(this._dataSource()instanceof t.DataManager)){if(t.isNullOrUndefined(i)||"add"!=i.requestType)return;this.dataSource([])}if(this.model.query.requiresCount(),l=(n=this.model.query).clone(),this._dataSource()instanceof t.DataManager||(this.model.currentViewData=this._dataSource()),this._isLocalData&&(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(!t.isNullOrUndefined(this._cModifiedData)||!t.isNullOrUndefined(this._cAddedRecord))){if(t.isNullOrUndefined(this._cAddedRecord)){for(a=0;a<this._primaryKeys.length;a++)n=n.where(this._primaryKeys[a],t.FilterOperators.equal,this._primaryKeyValues[a]);o=this._dataManager.executeLocal(n),this._dataSource()instanceof t.DataManager?t.copyObject(this._dataSource().dataSource.json[e.inArray(o.result[0],this._dataSource().dataSource.json)],this._cModifiedData):t.copyObject(this._dataSource()[e.inArray(o.result[0],this._dataSource())],this._cModifiedData),this._cModifiedData=null}else r=this._cAddedRecord,this._cAddedRecord=null,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(r):this._dataSource(s,!0).splice(0,0,r);n.queries=l.queries,this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1)}if(i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&(1==this._excludeDetailRows().length||"multiple"==this.multiDeleteMode&&this.selectedRowsIndexes.length==this._excludeDetailRows().length)&&1!=this.model.pageSettings.currentPage&&this._currentPage(this.model.pageSettings.totalPages-1),i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&!t.isNullOrUndefined(this._cDeleteData)&&this._isLocalData&&(this._dataSource()instanceof t.DataManager?(a=e.inArray(this._cDeleteData[0],this._dataSource().dataSource.json),this._dataSource().dataSource.json.splice(a,1)):(a=e.inArray(this._cDeleteData[0],this._dataSource()),this._dataSource(s,!0).splice(a,1))),this.model.scrollSettings.allowVirtualScrolling&&i&&("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._virtualDataRefresh=!0,this._refreshVirtualViewData()),this.model.sortSettings.sortedColumns.length){for(d=[],x=(h=this.model.sortSettings.sortedColumns).length-1;x>=0;x--)if(-1==this.model.groupSettings.groupedColumns.indexOf(h[x].field)){if(n.sortBy(h[x].field,h[x].direction),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&-1==e.inArray(h[x],this._prevVirtualSort)){for(C=0;C<this._prevVirtualSort.length;C++)h[x].field==this._prevVirtualSort[C].field&&this._prevVirtualSort.splice(C,1);this._needVPaging=this._currentVirtualIndex*this._virtualRowCount%this.model.pageSettings.pageSize<=this._virtualRowCount,this._prevVirtualSort.push(h[x]),this._virtualDataRefresh=!0,this._refreshVirtualViewData()}}else d.push({field:h[x].field,direction:h[x].direction});for(C=0;C<d.length;C++)n.sortBy(d[C].field,d[C].direction)}if(this.model.allowSearching&&this.model.searchSettings.key.length&&((c=this.model.searchSettings).fields=0!=c.fields.length?c.fields:this.getColumnFieldNames(),n.search(c.key,c.fields,c.operator||"contains",c.ignoreCase||!0),this.initialRender||"searching"!=i.requestType||this._currentPage(1)),this._isLocalData&&this.model.allowSearching&&(this._filteredRecords=0!=this.model.searchSettings.key.length?this._dataManager.executeLocal(n).result:[]),this.model.allowFiltering&&this.model.filterSettings.filteredColumns.length){if(m=this.model.filterSettings.filteredColumns[0],p=this.model.filterSettings.filteredColumns,!this._isExcelFilter&&!this._excelFilterRendered||m instanceof t.Predicate)for(m instanceof t.Predicate?(u=m,this._excelFilterRendered&&(b=t.distinct(p,"field",!1),this._excelFilter._predicates[0]=this._excelFilter._predicates[0]||{},this._excelFilter._predicates[0][b[0]]=u)):u=t.Predicate(m.field,m.operator,m.value,!m.matchcase),x=1;x<p.length;x++)p[x]instanceof t.Predicate?u=u[p[x].predicate||"and"](p[x]):!this._isLocalData&&p.length>2&&x>1&&"or"==p[x].predicate?u.predicates.push(t.Predicate(p[x].field,p[x].operator,p[x].value,p[x].ignoreCase||!p[x].matchcase)):u=u[p[x].predicate||"and"](p[x].field,p[x].operator,p[x].value,!p[x].matchcase);else for(f in this._excelFilter.getPredicate(p,null,!0),g=this._excelFilter._predicates[0])(v=(_=g[f]).from!=s)?n.skip("top"==_.from?0:this._gridRecordsCount-_.take).take(_.take):u=u!=s?u.and(_):_;if(u&&n.where(u),this._isLocalData?(w=this._dataManager.executeLocal(n),this._filteredRecordsCount=v?w.result.length:w.count,y=this._filteredRecordsCount%this.model.pageSettings.pageSize==0?this._filteredRecordsCount/this.model.pageSettings.pageSize:parseInt(this._filteredRecordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>y&&this._currentPage(y),this._filteredRecords=this._dataManager.executeLocal(n).result,this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=this._filteredRecords)):t.isNullOrUndefined(i)||i.requestType!=t.Grid.Actions.Filtering||this._currentPage(1),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)for(x=0;x<p.length;x++){for(C=0;C<this._prevVirtualFilter.length;C++)p[x]==this._prevVirtualFilter[C]&&i.requestType==t.Grid.Actions.Filtering&&this._prevVirtualFilter.splice(C,1);-1==e.inArray(p[x],this._prevVirtualFilter)&&(this._prevVirtualFilter.push(p[x]),this._gridRecordsCount=this._filteredRecordsCount,this._refreshViewPageDetails(),this._refreshVirtualViewData(),this._refreshVirtualViewDetails())}}if(this._isLocalData&&this.model.allowFiltering&&0==this.model.filterSettings.filteredColumns.length&&(!t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount>0)&&(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshViewPageDetails(),this._refreshVirtualViewDetails(!0)),this._filteredRecordsCount=null,this._filteredRecords=[]),this.model.summaryRows.length&&this._setSummaryAggregate(n),(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&!this.model.scrollSettings.enableVirtualization)&&(this._isLocalData&&(w=this._dataManager.executeLocal(n),this._recordsCount=w.count,y=this._recordsCount%this.model.pageSettings.pageSize==0?this._recordsCount/this.model.pageSettings.pageSize:parseInt(this._recordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>y&&this._currentPage(y)),0==this._currentPage()&&(0==this._prevPageNo||null==this._prevPageNo?this._currentPage(1):this._currentPage(this._prevPageNo)),n.page(this._currentPage(),this.model.pageSettings.pageSize)),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._needPaging=!0,this.initialRender&&this.model.currentIndex>1&&(this.model.currentIndex<=this._getVirtualTotalRecord()||!this._isLocalData)&&("continuous"==this.model.scrollSettings.virtualScrollMode&&(this.model.currentIndex=1),this._currentVirtualIndex=Math.ceil(this.model.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._currentPage(Math.ceil(this.model.currentIndex/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),this._virtualDataRefresh&&(this._isThumbScroll=!0,this._refreshVirtualViewData(!0),this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._currentPage(Math.ceil(this._currentVirtualIndex*this._virtualRowCount/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),null!=this.model.virtualLoading&&(this._gridRecordsCount=this.model.pageSettings.totalRecordsCount),0==this.model.filterSettings.filteredColumns&&this._prevVirtualFilter.length&&(this._refreshVirtualViewData(),this._prevVirtualFilter=[]),this._isLocalData&&this.initialRender&&this._refreshVirtualViewDetails(),this._getVirtualLoadedRecords(n)),this.model.allowGrouping){for(S=n.clone(),this.model.allowPaging&&this.model.groupSettings.groupedColumns.length&&(S.queries=S.queries.slice(0,S.queries.length-1)),x=0;x<this.model.groupSettings.groupedColumns.length;x++)T=this.model.groupSettings.groupedColumns[x],k=this.getColumnByField(T),!t.isNullOrUndefined(k.enableGroupByFormat)&&k.enableGroupByFormat?(n.group(T,t.proxy(this._formatGroupColumn,this)),S.group(T,t.proxy(this._formatGroupColumn,this))):(n.group(T),S.group(T));this.model.groupSettings.groupedColumns.length&&this._setAggreatedCollection(S)}if(i!=s&&"add"==i.requestType&&this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(i.data):this._dataSource().unshift(i.data)),t.isNullOrUndefined(i)||"add"!=i.action||t.isNullOrUndefined(this.model.parentDetails)||(D=this.getColumnByField(this.model.parentDetails.parentKeyField),-1==e.inArray(D,this.model.columns)&&((I={})[this.model.parentDetails.parentKeyField]=this.model.parentDetails.parentKeyFieldValue,e.extend(!0,this.model.currentViewData[0],I))),this._cloneQuery=n.clone(),this._isLocalData&&(!this.model.scrollSettings.enableVirtualization||this._virtualDataRefresh)){if(O=this._dataManager.dataSource.json,R=this._dataSource().dataSource,!t.isNullOrUndefined(R)&&this._dataSource()instanceof t.DataManager&&(this._dataManager.dataSource.json=O!=R.json?R.json:O),A=this._dataManager.executeLocal(n),t.isNullOrUndefined(i)||"beginedit"!=i.requestType)if(this.model.scrollSettings.allowVirtualScrolling&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&(this._prevPageRendered=!0),this.model.scrollSettings.allowVirtualScrolling&&!this._prevPageRendered&&A.result.length!=this.model.pageSettings.pageSize&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage)M=t.pvt.filterQueries(n.queries,"onPage"),n.queries.splice(e.inArray(M[0],n.queries),1),n.page(this._currentPage()-1,this.model.pageSettings.pageSize),(F=this._dataManager.executeLocal(n)).result.splice(0,A.result.length),this._previousPageRecords=e.extend(!0,[],F.result),this._previousPageLength=A.result.length,this._currentPageData=A.result,t.merge(F.result,A.result),this.model.currentViewData=this._lastVirtualPage=F.result,this._lastPageRendered=!0;else if(this._lastPageRendered&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&!this.model.scrollSettings.enableVirtualization){for(P=this.model.pageSettings.pageSize-this._previousPageLength,E=0;E<P;E++)this.getRows()[this.getRows().length-(this.model.pageSettings.pageSize-E)].remove();this._tempPageRendered=!0,this.model.currentViewData=A.result}else this.model.currentViewData=A.result;else this.model.currentViewData=A.result;this._gridRecordsCount=A.count,this._remoteSummaryData=A.aggregates,this._searchCount=this._searchString.length?A.count:null,this.model.groupSettings.groupedColumns.length&&this._setAggregates()}},_formatGroupColumn:function(e,i){var s;return s=this.getColumnByField(i).format,s=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(s)[2],t.format(e,s,this.model.locale)},_refreshViewPageDetails:function(){this._currentPage(1),this.model.currentIndex=0,this._currentVirtualIndex=1,this.getContent().ejScroller("model.scrollTop",0)},_refreshVirtualViewDetails:function(e){var i=this._dataSource();e&&(this._gridRecordsCount=null!==i?i instanceof t.DataManager?i.dataSource.json.length:i.length:this.model.pageSettings.totalRecordsCount),this._totalVirtualViews=Math.ceil(this._getVirtualTotalRecord()/this._virtualRowCount),this._maxViews=Math.ceil(this.model.pageSettings.pageSize/this._virtualRowCount),this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize),this.model.pageSettings.totalRecordsCount=this._gridRecordsCount,this._lastViewData=this._virtualRowCount-(this._totalVirtualViews*this._virtualRowCount-this._getVirtualTotalRecord())},_getVirtualLoadedRecords:function(t){var i,s,n=this._currentPage();if(this._needPaging&&(this._isLastVirtualpage=needTwoPage=this._isThumbScroll&&n==this.model.pageSettings.totalPages&&!this._virtualPageRecords[n],(this.initialRender||this._virtualDataRefresh)&&(needTwoPage=!0),this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=n)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._getVirtualOnLoadingData(n,!needTwoPage):this._setVirtualPaging(t,n,!needTwoPage),!this.initialRender&&this._isThumbScroll&&this._virtualPageRecords[n]&&!this._virtualDataRefresh&&this._checkPrevNextViews(n,t)),this._needPaging=!1,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.initialRender&&this._isLocalData)for(this.model.currentViewData=[],i=0;i<this._currentLoadedIndexes.length;i++)s=this._currentLoadedIndexes[i],this._virtualLoadedRecords[s]&&e.merge(this.model.currentViewData,this._virtualLoadedRecords[s])},_setVirtualPaging:function(i,s,n){var l,o=t.pvt.filterQueries(i.queries,"onPage");o.length&&i.queries.splice(e.inArray(o[0],i.queries),1),(!n||this._needVPaging)&&this.model.currentIndex>this._virtualRowCount?(this._initCurrentIndex(i,s),this._needVPaging=!1):i.page(s,this.model.pageSettings.pageSize),this._isLocalData&&!this._virtualPageRecords[s]&&(l=this._dataManager.executeLocal(i),this.initialRender||(this.model.currentViewData=l.result),l.result.length?(this._setVirtualLoadedRecords(l.result,s),-1==e.inArray(s,this._virtualLoadedPages)&&this._virtualLoadedPages.push(s)):this.initialRender||this.getContent().find(".e-virtualtop, .e-virtualbottom").remove())},_checkPrevNextViews:function(){var e,t,i=this._currentVirtualIndex,s=this._virtualLoadedRecords[i-1],n=this._virtualLoadedRecords[i+1],l=3==this._maxViews?1:2;1!=i&&i!=this._totalVirtualViews&&(s&&s.length==this._virtualRowCount?n&&n.length==this._virtualRowCount||this._totalVirtualViews==i-1||(t=i-l,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t-1,e=this._scrollValue-l*this._virtualRowCount*this._vRowHeight):(t=i+l,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t+1,e=this._scrollValue+l*this._virtualRowCount*this._vRowHeight),e&&(this._scrollValue=e,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.model.currentIndex=0==e?e:Math.floor(e/this._vRowHeight)))},_initCurrentIndex:function(i,s){var n,l,o,r,a,d,h=s*this.model.pageSettings.pageSize,c=this._currentVirtualIndex*this._virtualRowCount+this._virtualRowCount,u=this._currentVirtualIndex*this._virtualRowCount-2*this._virtualRowCount;c>h||u<h-this.model.pageSettings.pageSize||this._isLastVirtualpage?(c>h?(n=(s-1)*this.model.pageSettings.pageSize,l=2*this.model.pageSettings.pageSize,this._isInitNextPage=!0):(u<h-this.model.pageSettings.pageSize||this._isLastVirtualpage)&&(n=(s-2)*this.model.pageSettings.pageSize,l=2*this.model.pageSettings.pageSize,this._isInitNextPage=!1,this._remoteRefresh=!0),this.model.virtualLoading&&this._isLocalData?((o={}).endIndex=n+l,o.endIndex=o.endIndex>this._getVirtualTotalRecord()?this._getVirtualTotalRecord():o.endIndex,o.startIndex=n,o.currentPage=this._currentPage(),o.result=null,this._trigger("virtualLoading",o),d=o.result,this._setInitialCurrentIndexRecords(d,s)):((r=t.pvt.filterQueries(i.queries,"onSkip")).length&&i.queries.splice(e.inArray(r[0],i.queries),1),i.skip(n).take(l),this._isLocalData&&(a=this._dataManager.executeLocal(i),d=this.model.currentViewData=a.result,this._isLastVirtualpage=!1,this._setInitialCurrentIndexRecords(d,s)))):(this._needVPaging=!1,this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=s)?this._getVirtualOnLoadingData(s,!0):this._setVirtualPaging(i,s,!0))},_setInitialCurrentIndexRecords:function(e,t){for(i=0;i<2;i++){var s,n=i*this.model.pageSettings.pageSize,l=n+this.model.pageSettings.pageSize,o=e.slice(n,l);s=this._isInitNextPage||1==t&&1==this.model.pageSettings.totalPages?0==i?t:t+1:0==i?t-1:t,this._setVirtualLoadedRecords(o,s)}},_getVirtualOnLoadingData:function(e,t){var i,n;e>0&&(this.model.currentIndex>this._virtualRowCount&&(!t||this._needVPaging)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._initCurrentIndex(s,e):((i={}).endIndex=e*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:e*this.model.pageSettings.pageSize,i.startIndex=e*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=this._currentPage(),i.result=null,this._trigger("virtualLoading",i),n=i.result,this._setVirtualLoadedRecords(n,e)))},_setVirtualLoadedRecords:function(t,i){var s,n,l,o,r,a,d,h,c,u=this._virtualRowCount,m=this.model.pageSettings.pageSize,p=m/u,g=Math.ceil(i*m/u),f=i==this.model.pageSettings.totalPages;for(this._virtualPageRecords[i]||(this._virtualPageRecords[i]=t),f&&(n=this._getVirtualTotalRecord()%m,g=(!this._virtualLoadedRecords[this._totalVirtualViews]||this._virtualLoadedRecords[this._totalVirtualViews].length!=this._lastViewData)&&n<this._lastViewData&&0!=n?this._totalVirtualViews+1:this._totalVirtualViews,this._getVirtualTotalRecord()<u&&(this._singleView=!0)),l=0;l<p;l++)((a=Math.ceil((i-1)*p+(l+1)))<=this._totalVirtualViews||f)&&a<=g&&(this._virtualLoadedRecords[a-1]&&this._virtualLoadedRecords[a-1].length!=u?(o=u-(this._virtualLoadedRecords[a-1].length+l*u)+l*u,e.merge(this._virtualLoadedRecords[a-1],t.slice(0,o)),s=r=o+u,a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(o,s))):1==a||this._virtualLoadedRecords[a-1]?s=r=(o=s||l*u%m)+u:(0!=(d=r=(a-1)*u%m)&&(this._virtualLoadedRecords[a-1]=t.slice(0,d)),o=d,r=s=d+u),this._virtualLoadedRecords[a]&&this._virtualLoadedRecords[a].length!=u?(h=t.slice(o,r)).length+this._virtualLoadedRecords[a].length<=u&&(c=e.merge(h,this._virtualLoadedRecords[a]),this._virtualLoadedRecords[a]=c):!this._virtualLoadedRecords[a]&&a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(o,r)));-1==e.inArray(i,this._virtualLoadedPages)&&this._virtualLoadedPages.push(i)},_setVirtualLoadedIndexes:function(e){var t,i;for(this._currentLoadedIndexes=[],t=e==this._totalVirtualViews?e:e+1,1!=e&&(e-=1),i=e;i<=t;i++)this._currentLoadedIndexes.push(i)},_getVirtualTotalRecord:function(){return 0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount},_initGridRender:function(){var i,s,n,l,o;if(this.addInitTemplate(),this.model.scrollSettings.frozenColumns>0&&this.addFrozenTemplate(),this.model.allowGrouping&&this.addGroupingTemplate(),this.model.showSummary&&this.addSummaryTemplate(),(this.model.allowResizing||this.model.allowResizeToFit)&&(this._resizer=new t.gridFeatures.gridResize(this)),this.model.keySettings&&e.extend(this.model.keyConfigs,this.model.keySettings),this._initHeight=this.model.scrollSettings.height,"100%"==this.model.scrollSettings.height&&(this._isHeightResponsive=!0),this.render(),this._setTextWrap(),"fixed"==this.model.columnLayout){var r=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),a=this.getHeaderContent().width()>r?"addClass":"removeClass",d=this.getHeaderTable(),h=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(d=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),h=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),d[a]("e-tableLastCell"),h[a]("e-tableLastCell")}if(this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&(this._headerCellreorderDragDrop(),this._initIndicators()),this._wireEvents(),this.model.allowGrouping&&!t.isNullOrUndefined(this.model.serverProperties))for(this.model._groupingCollapsed=this.model.serverProperties._groupingCollapsed,i=0;i<this.model._groupingCollapsed.length;i++)(s=this.getContent().find(".e-recordplusexpand").filter("td[ej-mappingname='"+this.model._groupingCollapsed[i].key+"'    ][ej-mappingvalue='"+this.model._groupingCollapsed[i].value+"']")).length>1&&!t.isNullOrUndefined(this.model._groupingCollapsed[i].parent)&&(n=this.model._groupingCollapsed[i].parent,s=s.filter(function(){return e(this).parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand[ej-mappingvalue="+n+"]").length})),this.expandCollapse(s);this.initialRender=!1,this.model.width&&!this.model.allowScrolling&&this.element.width(this.model.width),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this._trigger("dataBound",{}),this._trigger("refresh"),this.model.parentDetails&&(l=this.model.parentDetails.parentID,(o=e("#"+l).data("ejGrid")).model.allowScrolling&&o._refreshScroller({requestType:"refresh"})),this.element.closest("tr").hasClass("e-detailrow")&&!this.model.parentDetails&&((o=this.element.closest("tr.e-detailrow").closest(".e-grid").data("ejGrid")).model.allowScrolling&&o.getScrollObject().refresh()),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._renderFilterDialogs(),this.model.enableResponsiveRow&&(this.model.allowSorting||this.model.allowFiltering)&&this._renderResponsiveFilter(),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),this._isMapSelection&&this._mappingSelection(),this.model.showColumnChooser&&this._renderColumnChooser()},_setTextWrap:function(){if(1==this.model.allowTextWrap){switch(this.model.textWrapSettings.wrapMode){case"content":this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap"),this.getContent().addClass("e-wrap");break;case"header":this.element.removeClass("e-wrap"),this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").addClass("e-wrap");break;default:this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.addClass("e-wrap")}if(this.model.scrollSettings.frozenColumns>0&&"content"!=this.model.textWrapSettings.wrapMode){var e=this.getHeaderContent().find(".e-frozenheaderdiv").find(".e-columnheader").last().find("th"),t=this.getHeaderContent().find(".e-movableheader").find(".e-columnheader").last().find("th");e.height()>t.height()?t.height(e.height()):e.height(t.height())}}else this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap")},_getMetaColGroup:function(){for(var i,s=t.buildTag("colgroup"),n=0;n<this.model.columns.length;n++)i=e(document.createElement("col")),!1===this.model.columns[n].visible&&i.css("display","none"),null==this.model.rowTemplate||t.isNullOrUndefined(this.model.columns[n].cssClass)||i.addClass(this.model.columns[n].cssClass),this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&-1!=e.inArray(this.model.columns[n].field,this.model.groupSettings.groupedColumns)&&i.css("display","none"),s.append(i);return s},_alternateRow:function(){return this.getIndex()%2==0?"e-row":"e-alt_row"},addInitTemplate:function(){var i,n,l,o,r,a,d,h,c=this.element.find(".e-headercelldiv:not(.e-emptyCell)"),u={},m=!0,p=document.createElement("tbody"),g=e(p);if(null==this.model.rowTemplate){var f,_=document.createElement("tr"),v=e(_),b=this.model.columns;for(this._gridRecordsCount&&!this._virtualDataRefresh?this._initColumns(this.model.currentViewData[0]!=s?this.model.currentViewData[0]:this.model.currentViewData.value):this._isLocalData&&(null!=this._dataSource()&&this._dataSource().length||this._dataManager&&this._dataManager.dataSource.json.length)&&this._initColumns(this._dataSource()[0]!=s?this._dataSource()[0]:this._dataManager.dataSource.json[0]),i={_gridFormatting:this.formatting},e.views.helpers(i),(h={})._foreignKey=this._foreignKeyBinding,e.views.helpers(h),(this.model.childGrid||this.model.detailsTemplate)&&(n=t.buildTag("td.e-detailrowcollapse","<div class='e-icon e-gnextforward'></div>"),v.append(n)),f=0;f<this.model.columns.length;f++){if(l=t.buildTag("td.e-rowcell"),t.isNullOrUndefined(b[f].tooltip)&&b[f].clipMode!=t.Grid.ClipMode.EllipsisWithTooltip||l.addClass("e-gridtooltip"),(b[f].clipMode==t.Grid.ClipMode.Ellipsis||b[f].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&l.addClass("e-gridellipsis"),this.model.isResponsive&&l.attr("data-cell",this._decode(this.model.columns[f].headerText)),0==b[f].visible?l.addClass("e-hide"):(m&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&l.addClass("e-detailrowvisible"),m=!1),this.model.groupSettings.showGroupedColumn||l.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[f].field+"'}}e-hide{{/if}}{{/for}}"),t.isNullOrUndefined(b[f].templateID||b[f].template)){for(var C=(b[f].field||"").split("."),w=C.length-1,y="";w;)y+="(",w--;switch(b[f].type||b[f].editType){case"boolean":case"booleanedit":t.isNullOrUndefined(b[f].displayAsCheckbox)&&(b[f].displayAsCheckbox=!0),b[f].displayAsCheckbox?(a="",a="batch"==this.model.editSettings.editMode&&(t.isNullOrUndefined(b[f].allowEditing)||b[f].allowEditing)?a:"disabled='disabled'",d="{{if #data['"+C.join("']['")+"']=='true'||#data['"+C.join("']['")+"']==true}} <input type ='checkbox' "+a+" checked='checked'></input>{{else}} <input type ='checkbox' "+a+"></input> {{/if}}",l.addClass("e-boolrowcell").html(d)):l.html("{{if "+b[f].field+"}}"+this.localizedLabels.True+"{{else}}"+this.localizedLabels.False+"{{/if}}");break;case"checkbox":this._enableCheckSelect=!0,this.model.selectionType="multiple",this.model.selectionSettings.enableToggle=!0,this._isMapSelection=""!=b[f].field,this._selectionMapColumn=b[f].field,b[f].textAlign="center",this._isMapSelection||(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),l.addClass("e-checkcell").html("<div class = 'e-checkcelldiv'>{{if #data['"+C.join("']['")+"']}} <input type ='checkbox' checked='checked'></input>{{else}} <input type ='checkbox'></input> {{/if}}</div>"),this.model.columns[f].editType=t.Grid.EditingType.Boolean,this.model.scrollSettings.frozenColumns>0&&l.addClass("e-frozenunbound"),this.model.enableAutoSaveOnSelectionChange=!1;break;default:b[f].disableHtmlEncode?l.html("{{html:"+y+"#data['"+C.join("'] || {})['")+"']}}"):l.html("{{:"+y+"#data['"+C.join("'] || {})['")+"']}}")}b[f].format==s||b[f].foreignKeyValue||l.html("{{:~_gridFormatting('"+b[f].format+"',"+y+"#data['"+C.join("'] || {})['")+"'],'"+this.model.locale+"')}}"),b[f].foreignKeyValue&&b[f].dataSource&&l.html("{{:~_foreignKey("+f+","+y+"#data['"+C.join("'] || {})['")+"'],'"+this._id+"')}}"),b[f].commands&&((h={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(h),(t.isNullOrUndefined(b[f].field)||""==b[f].field)&&(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),t.isNullOrUndefined(b[f].headerText)||e("#"+this._id+b[f].headerText.replace(/[^a-z0-9|s_]/gi,"")+f+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(b[f],f),t.isNullOrUndefined(b[f].headerText)||l.addClass("e-unboundcell").addClass("e-"+b[f].headerText.replace(/[^a-z0-9|s_]/gi,"")+f).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&l.addClass("e-frozenunbound"),this._isUnboundColumn=!0)}else h={},o=b[f].headerText,h["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this,undefined),e.views.helpers(h),t.isNullOrUndefined(o)||t.isNullOrUndefined(o.match(/[^0-9\s\w]/g))||(o=o.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+o+f+"_Template").remove(),r=this._createTemplateElement(b[f]),(""==b[f].field||t.isNullOrUndefined(b[f].field))&&(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),0!=b[f].template&&l.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+r.id+"','"+f+"')}}");b[f].textAlign==s&&(b[f].textAlign="left"),!0===b[f].isPrimaryKey&&(this._primaryKeys.push(e.trim(b[f].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),this.phoneMode&&this.model.enableResponsiveRow||b[f].textAlign==s||(l.css("text-align",b[f].textAlign),e(c[f]).css("text-align",b[f].textAlign)),this.phoneMode||t.isNullOrUndefined(b[f].headerTextAlign)||e(c[f]).css("text-align",b[f].headerTextAlign),t.isNullOrUndefined(b[f].cssClass)||l.addClass(b[f].cssClass),t.isNullOrUndefined(b[f].priority)||l.addClass("e-table-priority-"+b[f].priority),t.isNullOrUndefined(b[f].customAttributes)||l.attr(b[f].customAttributes),l.attr("role","gridcell"),v.append(l),this.model.enableAltRow?(i["_"+this._id+"AlternateRow"]=this._alternateRow,e.views.helpers(i),v.addClass("{{:~_"+this._id+"AlternateRow()}}")):v.addClass("e-row"),v.attr("role","row"),this.model.scrollSettings.frozenColumns>0&&this.model.scrollSettings.frozenColumns==f+1&&(p.appendChild(_),u[this._id+"_JSONFrozenTemplate"]=g.html(),v.empty(),g.empty())}p.appendChild(_)}u[this._id+"_JSONTemplate"]=null!=this.model.rowTemplate?e(this.model.rowTemplate).html():g.html(),e.templates(u)},render:function(){this.model.showSummary=this.model.summaryRows.length>0||this.model.showSummary,this._renderGridContent().insertAfter(this.element.children(".e-gridheader")),this.model.allowResizeToFit&&this.setWidthToColumns(),this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.showSummary&&this._currentJsonData.length&&(this._renderGridFooter().insertAfter(this.getContent()),this._hideCaptionSummaryColumn()),this._initialEndRendering()},_createStackedRow:function(i,n){var l,o,r,a,d,h,c,u,m,p,g,f,_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),v=[],b=[];for(tAl=[],tp=[],g=0;g<this.model.columns.length;g++)if(0!=(l=this.model.columns[g]).visible){if(this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&this.model.groupSettings.groupedColumns.length>0&&-1!=e.inArray(l.field,this.model.groupSettings.groupedColumns))continue;var C="",w="",y="",S="",x=i.stackedHeaderColumns;for(m=0;m<x.length;m++)o=e.isArray(x[m].column)?x[m].column:e.map(x[m].column.split(","),e.trim),r="e-row"+e.inArray(i,this.model.stackedHeaderRows)+"-column"+m,-1!=e.inArray(l.field,o)&&(C=x[m].headerText,w=x[m].cssClass,y=x[m].textAlign,S=x[m].tooltip?" e-gridtooltip "+r:"");v.push(C),b.push(w),tAl.push(y),tp.push(S)}for(a=[],u=0;u<v.length;u++){for(d=1,h=u+1;h<v.length&&v[u]==v[h];h++)d++;a.push({sapnCount:d,headerText:v[u],cssClass:b[u],txtAlign:tAl[u],tooltip:tp[u]}),u+=d-1}if(_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),c=this.model.scrollSettings.frozenColumns,this.model.allowScrolling&&c>0){var T=[],k=0,D=0,I=0;for(u=0;u<this.model.columns.length;u++)m=this.model.columns[u],u<c&&0==m.visible&&I++;for(k=c-I;k>0;)p=a[D].sapnCount,a[D].sapnCount<k?(T.push(a[D]),n?D++:a.splice(D,1)):a[D].sapnCount>k?(a[D].sapnCount=a[D].sapnCount-k,n&&T.push({sapnCount:k,headerText:a[D].headerText})):(T.push(a[D]),n||a.splice(D,1)),k-=p;n&&(a=T)}for((this.model.detailsTemplate||this.model.childGrid)&&_.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g=0;g<a.length;g++)(f=t.buildTag("th.e-headercell e-stackedHeaderCell e-default"+a[g].tooltip,a[g].headerText,{},{colspan:a[g].sapnCount})).css("textAlign",a[g].txtAlign),_.append(f),a[g].cssClass!=s&&f.addClass(a[g].cssClass);return _},_renderGridHeaderInternalDesign:function(i,n){var l,o,r,a,d,h,c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px",role:"grid"}),u=t.buildTag("thead"),m=t.buildTag("tbody.e-hide"),p=t.buildTag("tr.e-columnheader"),g=e(document.createElement("colgroup")),f=e(document.createElement("tr"));if((this.model.childGrid||this.model.detailsTemplate)&&(p.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g.append(this._getIndentCol())),this.model.showStackedHeader)for(h=0;h<this.model.stackedHeaderRows.length;h++)l=this._createStackedRow(this.model.stackedHeaderRows[h],n),u.append(l);for(o=0;o<i.length;o++){var _=t.buildTag("th.e-headercell e-default","",{},{role:"columnheader"}),v=document.createElement("td"),b=t.buildTag("div.e-headercelldiv",i[o].headerText===s&&"checkbox"!=i[o].type?i[o].headerText=i[o].field:i[o].headerText,{},{"ej-mappingname":i[o].field});if(i[o].disableHtmlEncode&&b.text(i[o].headerText),t.isNullOrUndefined(i[o].headerTooltip)||b.addClass("e-headertooltip"),t.isNullOrUndefined(i[o].tooltip)||b.addClass("e-gridtooltip"),(i[o].clipMode==t.Grid.ClipMode.Ellipsis||i[o].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&b.addClass("e-gridellipsis"),_.append(b),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&(i[o].allowFiltering==s||!0===i[o].allowFiltering)&&(!t.isNullOrUndefined(i[o].field)||""==i[o].field)&&"checkbox"!=i[o].type){if(r="e-filterset",!this.initialRender&&this.model.filterSettings.filteredColumns)for(a=0;a<this.model.filterSettings.filteredColumns.length;a++)this.model.filterSettings.filteredColumns[a].field==i[o].field&&(r="e-filterset e-filteredicon e-filternone");_.append(t.buildTag("div.e-filtericon e-icon "+r)),_.addClass("e-headercellfilter"),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version&&this.model.enableRTL&&e(b).css("padding","0 0 0 2em")}d=document.createElement("col"),i[o].priority&&e(v).addClass("e-table-priority-"+i[o].priority),f.append(v),p.append(_),g.append(d),!1===i[o].visible?(_.addClass("e-hide")&&e(d).css("display","none"),-1==e.inArray(i[o].headerText,this._hiddenColumns)&&-1==e.inArray(i[o].field,this._hiddenColumnsField)&&(this._hiddenColumns.push(i[o].headerText)&&i[o].field!=s?this._hiddenColumnsField.push(i[o].field):this._hiddenColumnsField.push(i[o].headerText)),-1!=e.inArray(i[o].field,this._visibleColumnsField)&&this._visibleColumnsField.splice(e.inArray(i[o].field,this._visibleColumnsField),1)&&this._visibleColumns.splice(e.inArray(i[o].headerText,this._visibleColumns),1)):(this._visibleColumns.push(i[o].headerText)&&i[o].field!=s?this._visibleColumnsField.push(i[o].field):this._visibleColumnsField.push(i[o].headerText),i[o].visible=!0,-1!=e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField)&&this._hiddenColumnsField.splice(e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField),1)&&this._hiddenColumns.splice(e.inArray(i[o].headerText,this._hiddenColumns),1)),this.model.showColumnChooser&&!1!==i[o].showInColumnChooser&&(i[o].showInColumnChooser=!0),this.model.allowResizing&&!1!==i[o].allowResizing&&(i[o].allowResizing=!0),t.isNullOrUndefined(i[o].headerTextAlign)?i[o].textAlign!=s?b.css("text-align",i[o].textAlign):this.model.enableRTL&&b.css("text-align",i[o].textAlign="right"):b.css("text-align",i[o].headerTextAlign),!1===i[o].allowResizing&&this._disabledResizingColumns.push(i[o].field),!1===i[o].allowSorting&&this._disabledSortableColumns.push(i[o].field),!1===i[o].allowGrouping&&this._disabledGroupableColumns.push(i[o].field),!1===i[o].allowEditing&&this._disabledEditableColumns.push(i[o].field),t.isNullOrUndefined(i[o].cssClass)||(_.addClass(i[o].cssClass),e(d).addClass(i[o].cssClass)),t.isNullOrUndefined(i[o].headerTemplateID)||(b.html(e(i[o].headerTemplateID).hide().html()).parent().addClass("e-headertemplate"),-1==(h=e.inArray(i[o].field,this._disabledGroupableColumns))&&t.isNullOrUndefined(i[o].field)&&this._disabledGroupableColumns.push(i[o].field)),"checkbox"==t.getObject("type",i[o])&&t.isNullOrUndefined(i[o].headerText)&&(b.addClass("e-headercheckcelldiv"),b.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"),t.isNullOrUndefined(i[o].field)||b.attr("ej-mappingname",i[o].field)),this.model.allowGrouping&&this.model.groupSettings.showToggleButton&&-1==e.inArray(i[o].field,this._disabledGroupableColumns)&&!t.isNullOrUndefined(i[o].field)&&""!=i[o].field&&(-1!=e.inArray(i[o].field,this.model.groupSettings.groupedColumns)?b.append(this._getToggleButton().addClass("e-toggleungroup")):b.append(this._getToggleButton().addClass("e-togglegroup"))),this.model.isResponsive&&_.attr("title",this._decode(i[o].headerText)),i[o].priority&&(_.attr("data-priority",i[o].priority).addClass("e-table-priority-"+i[o].priority),e(d).addClass("e-table-priority-"+i[o].priority)),this.initialRender&&("string"==typeof i[o].width&&-1!=i[o].width.indexOf("%")?this.columnsWidthCollection.push(parseInt(i[o].width)/100*this.element.width()):this.columnsWidthCollection.push(i[o].width)),i[o].width==s&&this.model.commonWidth!==s&&(this.columnsWidthCollection[o]=this.model.commonWidth),this._fieldColumnNames[i[o].headerText]=i[o].field,this._headerColumnNames[i[o].field]=i[o].headerText}return u.append(p),m.append(f),c.append(g).append(u).append(m),c},_renderGridHeader:function(){var e,i,s=t.buildTag("div.e-gridheader"),n=t.buildTag("div");return this.model.allowScrolling&&n.addClass("e-headercontent"),this.setGridHeaderContent(s),this.initialRender&&(this.columnsWidthCollection=[],this._hiddenColumns=[],this._hiddenColumnsField=[]),this._visibleColumns=[],this._visibleColumnsField=[],this._disabledGroupableColumns=[],this._fieldColumnNames={},this._headerColumnNames={},this.model.scrollSettings.frozenColumns>0?(e=t.buildTag("div.e-frozenheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(0,this.model.scrollSettings.frozenColumns),!0)),i=t.buildTag("div.e-movableheader",t.buildTag("div.e-movableheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(this.model.scrollSettings.frozenColumns),!1))),n.append(e).append(i)):n.append(this._renderGridHeaderInternalDesign(this.model.columns)),s.html(n),this.model.isResponsive&&s.addClass("e-textover"),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),s},_renderGridContent:function(){var i,s,n,l,o,r,a,d=t.buildTag("div.e-gridcontent"),h=t.buildTag("div"),c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),u=e(document.createElement("tbody"));if(c.append(this.getHeaderTable().find("colgroup").clone()).append(u),h.html(c),d.html(h),this.setGridContentTable(c),this.setGridContent(d),c.attr("role","grid"),i={},this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length){if(this.initialRender&&(i.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],!this.model.groupSettings.showGroupedColumn))for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)n=this.model.groupSettings.groupedColumns[s],-1==e.inArray(n,this._hiddenColumnsField)&&(this._hiddenColumnsField.push(n),this.getColumnByField(n).visible=!1);i.requestType=t.Grid.Actions.Grouping}else i.requestType=t.Grid.Actions.Refresh;if(null==this._dataSource()||0==this._dataSource().length||0==this.model.currentViewData.length?(l=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length}),u.append(e(document.createElement("tr")).append(l)),this.setWidthToColumns(),(this.initialRender||this.model.groupSettings.groupedColumns.length)&&this.sendDataRenderingRequest(i)):this.sendDataRenderingRequest(i),this._isCaptionSummary&&"grouping"==i.requestType&&this.model.groupSettings.groupedColumns.length>1)for(o=this.getContentTable().find(".e-table").not(".e-recordtable").children("colgroup"),r=e(this.getContentTable().find(".e-recordtable")[0]).children("colgroup").find("col"),s=0;s<o.length;s++)a=e(o[s]).find("col").length,e(o[s]).find("col:gt("+(a-r.length-1)+")").remove(),e(o[s]).append(r.clone());return d},print:function(){var e,i,s,n,l={};l.requestType="print",this._printselectrows=this.getContentTable().find('tr[aria-selected="true"]'),this._trigger("actionBegin",l),e=this.model.allowPaging,this._$fDlgIsOpen&&(this.element.find(".e-excelfilter:visible").css("display","none"),this.element.find(".e-filterdialoglarge:visible").css("display","none")),i=this.element.clone(),s=window.open("","print","height=452,width=1024,tabbar=no"),this.model.allowPaging&&"currentpage"==this.model.pageSettings.printMode?(this.getPager().css("display","none"),i=this.element.clone(),this.model.allowScrolling||(this.refreshContent(),this.getPager().css("display","block"))):e&&(this.model.allowPaging=!1,this.refreshContent(),this.getPager().css("display","none"),i=this.element.clone(),this.model.allowPaging=!0,this.model.allowScrolling||(this.refreshContent(),this.getPager().css("display","block"))),this.model.allowScrolling&&(this.model.scrollSettings.width,this.model.scrollSettings.height,(this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll())&&(n=this.getContent().find(".e-content")[0],i.find(".e-gridcontent").height(n.scrollHeight),i.find(".e-gridcontent").ejScroller({width:"auto",height:"auto"}),i.width(n.scrollWidth),i.find(".e-gridheader").removeClass("e-scrollcss")),this.model.allowPaging&&(this.refreshContent(),this.getPager().css("display","block"))),this.model.toolbarSettings.showToolbar&&i.find(".e-gridtoolbar").remove(),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&i.find(".e-filterbar").remove(),l={requestType:"print",element:i,selectedRows:this._printselectrows},this._trigger("beforePrint",l),t.isNullOrUndefined(l.element)||(i=l.element),t.print(i,s),l.requestType="print",this._trigger("actionComplete",l)},export:function(i,s,n,l){var o,r,a,d,h,c,u=e.extend(!0,{},this.model),m=this,p={action:i,method:"post","data-ajax":"false"},g=t.buildTag("form","",null,p);if(n&&!t.isOnWebForms)o=e("div.e-grid"),l&&l.length>0&&(o=e.map(l,function(e){return document.getElementById(e)})),e.each(o,function(i,s){var n,l,o,r,a=e(s).data("ejGrid");if(!t.isNullOrUndefined(a)&&(n=e.extend(!0,{},a.model),n=m._getModifyExportModel(n),a.ignoreOnExport)){for(l=0;l<a.ignoreOnExport.length;l++)delete n[a.ignoreOnExport[l]];o={name:"GridModel",type:"hidden",value:a.stringify(n)},r=t.buildTag("input","",null,o),g.append(r)}}),e("body").append(g),g.submit();else{if(this._locale=this.model.locale,u=this._getModifyExportModel(u),this.ignoreOnExport)for(r=0;r<this.ignoreOnExport.length;r++)delete u[this.ignoreOnExport[r]];t.raiseWebFormsServerEvents?(a={model:u,originalEventType:s},d={model:this.stringify(u)},t.raiseWebFormsServerEvents(s,a,d),setTimeout(function(){t.isOnWebForms=!0},1e3)):(h={name:"GridModel",type:"hidden",value:this.stringify(u)},c=t.buildTag("input","",null,h),g.append(c),g.append(this),e("body").append(g),g.submit()),setTimeout(function(){m.model.locale=m._locale},0)}return!0},_getModifyExportModel:function(i){var n,l,o,r={};e.extend(r,t.Grid.Locale["en-US"],t.Grid.Locale[i.locale]);var a=r.GroupCaptionFormat,d=a.indexOf("{{if"),h=a.indexOf(" {{else}}"),c=a.slice(d,h).replace("{{if count == 1 }}",""),u={EmptyRecord:r.EmptyRecord,GroupCaptionFormat:a.slice(0,d),GroupText:c,True:r.True,False:r.False};for(t.isNullOrUndefined(this.model)||(this.model.locale=i.locale.concat(JSON.stringify(u))),i.locale=i.locale.concat(JSON.stringify(u)),n=0;n<i.columns.length;n++)if(i.columns[n].editType!=s)switch(i.columns[n].editType){case"stringedit":case"edittemplate":i.columns[n].editType="string";break;case"numericedit":i.columns[n].editType="numeric";break;case"dropdownedit":i.columns[n].editType="dropdown";break;case"booleanedit":i.columns[n].editType="boolean"}for(n=0;n<i.filterSettings.filteredColumns.length;n++)"equal"==i.filterSettings.filteredColumns[n].operator?i.filterSettings.filteredColumns[n].operator="equals":"notequal"==i.filterSettings.filteredColumns[n].operator&&(i.filterSettings.filteredColumns[n].operator="notequals");if(i.showStackedHeader)for(i.stackedHeaderRow=i.stackedHeaderRows,n=0;n<i.stackedHeaderRow.length;n++)for(i.stackedHeaderRow[n].stackedHeaderColumn=i.stackedHeaderRow[n].stackedHeaderColumns,l=i.stackedHeaderRow[n].stackedHeaderColumn,o=0;o<l.length;o++)i.stackedHeaderRow[n].stackedHeaderColumn[o].column=e.isArray(l[o].column)?l[o].column:l[o].column.split(",");return i},sendDataRenderingRequest:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f;if(this._templateRefresh&&(this.refreshTemplate(),this._templateRefresh=!1),this.setFormat(),this.model.scrollSettings.enableVirtualization||(this._previousColumnIndex=null,this._previousRowCellIndex=null,this._previousIndex=null),"add"==i.requestType||"grouping"==i.requestType||null!=this.model.currentViewData&&this.model.currentViewData.length)switch(i.requestType){case t.Grid.Actions.Refresh:case t.Grid.Actions.Paging:case t.Grid.Actions.Sorting:case t.Grid.Actions.Filtering:case t.Grid.Actions.Save:case t.Grid.Actions.Cancel:case t.Grid.Actions.Delete:case t.Grid.Actions.Search:case t.Grid.Actions.Reorder:case t.Grid.Actions.BatchSave:if(s=this.model.groupSettings.groupedColumns,this.model.allowGrouping&&i.requestType==t.Grid.Actions.Refresh&&0==s.length&&this.element.find(".e-grouptopleftcell").length>0&&this.element.children(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this.model.allowGrouping||(s=[]),0==s.length){var _,v=document.createElement("div"),b=-1,C=!1;if(this.phoneMode||this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),(null!=this.model.childGrid||null!=this.model.detailsTemplate)&&this.getContentTable().find("colgroup").first().prepend(this._getIndentCol()),n=this._currentPage(),("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"normal"==this.model.editSettings.editMode)&&("cancel"==i.requestType||"save"==i.requestType)&&(this._editFormHeight=this.element.find(".gridform").closest("tr").height()),this.model.scrollSettings.frozenColumns>0)v.innerHTML=this._renderByFrozenDesign();else{i.data&&((_=document.createElement("div")).innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](i.data),"</table>"].join(""),this._dataSource()instanceof t.DataManager&&i.requestType==t.Grid.Actions.Save&&(b=this._getDataIndex(this.model.currentViewData,i.data),C=this._dataSource().adaptor instanceof t.remoteSaveAdaptor)),null,l=!this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||t.isNullOrUndefined(this._currentVIndex)||"save"!=i.requestType&&"cancel"!=i.requestType&&"delete"!=i.requestType?this.model.currentViewData:t.isNullOrUndefined(this._lastVirtualPage)?this._virtualLoadedRecords[this._currentVIndex]:this._lastVirtualPage,v.innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](l),"</table>"].join("");var w=this.getContentTable().get(0),y=w.lastChild,S=this.getContentTable().first().find("tbody").first();if("save"!=i.requestType&&"cancel"!=i.requestType||"batch"==this.model.editSettings.editMode||this.model.scrollSettings.allowVirtualScrolling)"delete"!=i.requestType||this.model.scrollSettings.allowVirtualScrolling?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):(this._isUnboundColumn&&($editedrow=this.element.find(".e-editedrow"),$oldChild=this.getContentTable().find(".e-editedrow").get(0),$newChild=$editedrow.length?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,0==$editedrow.length||"normal"!=this.model.editSettings.editMode&&"externalform"!=this.model.editSettings.editMode&&"externalformtemplate"!=this.model.editSettings.editMode?"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedrow.prev("tr").get(0),$editedrow.remove()):$oldChild=$editedrow.get(0):e($oldChild).replaceWith(e($newChild))),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&this.getContentTable()[0].rows.length!=this.model.currentViewData.length&&(this.getContentTable().find("tr").length&&this._excludeDetailRows().length?this.multiDeleteMode?(p=v.firstChild.firstChild.rows.length,g=e(v.firstChild.firstChild.rows).slice(p-this.selectedRowsIndexes.length,p),e(y).append(g)):y.appendChild(v.firstChild.firstChild.lastChild):e(y).prepend(v.firstChild.firstChild.rows)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(f=this.getContentTable().find(".e-detailrow:visible"),e.each(f,function(e){0==f.eq(e).closest("tr").prev().children(".e-detailrowexpand").length&&f.eq(e).remove()})),this._gridRows=w.rows,this.model.enableAltRow&&this._refreshAltRow());else{if(rowIndex=-1!=this.model.editSettings.editMode.indexOf("inlineform")?t.isNullOrUndefined(i.selectedRow)?this._selectedRow():i.selectedRow:this.getContentTable().find(".e-"+i.action+"edrow").index(),o=this._currentTrIndex,-1==rowIndex&&(rowIndex=o),null!=this.model.detailsTemplate||null!=this.model.childGrid)for(r="inlineform"==this.model.editSettings.editMode?e(e(y.childNodes).not(".e-detailrow")[rowIndex]):e(y.childNodes[rowIndex]),a=e(y.childNodes).not(".e-detailrow"),u=0;u<a.length;u++)r.is(a[u])&&(rowIndex=u);if("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){if("add"==i.action&&!this.getContentTable().find(".e-addedrow").length)break;$oldChild=this.getContentTable().find(".e-addedrow").get(0),$editedTr=this.getContentTable().find(".e-editedrow"),$newChild=$editedTr.length||"cancel"==i.requestType?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,$editedTr.length?(this.model.editSettings.showAddNewRow&&"top"==this.model.editSettings.rowPosition&&(rowIndex-=1),$newChild=v.firstChild.firstChild.childNodes[rowIndex],"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedTr.prev("tr").get(0),$editedTr.remove()):$oldChild=$editedTr.get(0),d=e($newChild),m=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next("tr.e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),"cancel"==i.requestType?(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").addClass("e-showaddrow"),m.replaceWith(d)):!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(null!=this.model.detailsTemplate&&m.next("tr.e-detailrow").length&&y.removeChild(m.next("tr.e-detailrow").get(0)),m.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&y.appendChild(v.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this.model.currentViewData[rowIndex][this._primaryKeys[0]]!=i.data[this._primaryKeys[0]]?e(y).replaceWith(e(v).find("tbody")):y.replaceChild($newChild,$oldChild),this.model.editSettings.showAddNewRow&&("top"==this.model.editSettings.rowPosition?y.firstChild.remove():y.lastChild.remove())):(d=e($newChild),m=e($oldChild),"add"==i.action&&"save"==i.requestType&&this.model.editSettings.showAddNewRow&&this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&("bottom"==this.model.editSettings.rowPosition?y.lastChild.previousSibling.remove():y.lastChild.remove()),"cancel"==i.requestType||this._dataSource()instanceof t.DataManager||1!=this._currentPage()||"save"==i.requestType&&!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount==this._previousFilterCount?(t.isNullOrUndefined($oldChild)||(m.remove(),this._dataSource()instanceof t.DataManager&&-1!=b?0==b?y.insertBefore($newChild,y.children[b]):d.insertAfter(y.children[b-1]):this._dataSource()instanceof t.DataManager&&!C||1==this._currentPage()||"save"!=i.requestType||e(y).prepend(e(v.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&(this._dataSource()instanceof t.DataManager&&-1==b&&!C&&"save"!=i.requestType||"save"!=i.requestType&&!(this._dataSource()instanceof t.DataManager))&&"cancel"==i.requestType&&!this.model.editSettings.showAddNewRow&&w.lastChild.appendChild(v.firstChild.firstChild.lastChild)),"cancel"!=i.requestType||-1==this._selectedRow()||this._enableCheckSelect||this.clearSelection()):1==this.model.currentViewData.length?(e(y).empty(),y.appendChild($newChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):"bottom"==this.model.editSettings.rowPosition?(S.prepend($oldChild),y.replaceChild($newChild,$oldChild)):y.replaceChild($newChild,$oldChild))}else if("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)if($editedTr=this.element.find(".e-editedrow"),"cancel"!=i.requestType&&($editedTr.length||t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount!=this._previousFilterCount))if($editedTr.length){if($newChild=v.firstChild.firstChild.childNodes[rowIndex],$oldChild=this._excludeDetailRows(y.childNodes)[rowIndex],null!=this.model.allowCellMerging&&(m=e($oldChild),e($oldChild.childNodes).hasClass("e-merged")))for(h=m.children(".e-merged").index(),c=$oldChild.children[h].colSpan,u=0;u<c;u++)$newChild.childNodes[h+u].className+=" e-merged e-hide",$newChild.childNodes[h].colSpan=u+1;null!=this.model.detailsTemplate&&($oldChild=e(y.childNodes).not(".e-detailrow").eq(rowIndex).get(0)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next("tr.e-detailrow:visible").length&&e($newChild).find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(m=e($oldChild),null!=this.model.detailsTemplate&&m.next("tr.e-detailrow").length&&y.removeChild(m.next("tr.e-detailrow").get(0)),m.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&y.appendChild(v.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this.model.currentViewData[rowIndex][this._primaryKeys[0]]!=i.data[this._primaryKeys[0]]?e(y).replaceWith(e(v).find("tbody")):y.replaceChild($newChild,$oldChild)}else 1==this.model.currentViewData.length&&0==this.getContentTable().find("td.e-rowcell").length?($newChild=v.firstChild.firstChild.firstChild,e(y).empty(),y.appendChild($newChild)):(newChild=$editedTr.length||"cancel"==i.requestType?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,this._dataSource()instanceof t.DataManager?-1!=b&&(0==b?y.insertBefore(newChild,y.children[b]):e(newChild).insertAfter(y.children[b-1]),this.model.allowPaging&&(this.model.pageSettings.pageSize<=this.model.currentViewData.length||b==this.model.pageSettings.pageSize-1)&&y.removeChild(y.lastChild)):(this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):1==this._currentPage()?this.getContentTable().find("tbody").first().prepend(e(newChild)):this.getContentTable().find("tbody").first().prepend(e(v.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&y.removeChild(y.lastChild)),null!=this.model.detailsTemplate&&e(w.lastChild.lastChild).children(".e-detailrowexpand").length&&y.removeChild(y.lastChild));else $newChild=v.firstChild.firstChild.childNodes[rowIndex],$oldChild=y.childNodes[rowIndex],d=e($newChild),m=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next(".e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),m.replaceWith(d),this._enableCheckSelect||this.clearSelection(),this.model.allowPaging&&this._refreshGridPager();this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():w.rows,this.model.enableAltRow&&this._refreshAltRow()}}this._currentJsonData=this.model.currentViewData,this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():this.getContentTable().get(0).rows,this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),("sorting"==i.requestType||"filtering"==i.requestType||"save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&("filtering"==i.requestType&&(this.getContent().first().ejScroller("refresh").ejScroller("isVScroll")?this.element.find(".gridheader").addClass("e-scrollcss"):this.element.find(".gridheader").removeClass("e-scrollcss"),this._refreshVirtualPagerInfo()),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(n),"filtering"==i.requestType&&this.getContent().first().ejScroller("refresh")),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager()),this.model.scrollSettings.enableVirtualization||this._eventBindings();break}case t.Grid.Actions.Grouping:this._group(i),this._refreshStackedHeader();break;case t.Grid.Actions.BeginEdit:this._edit(i);break;case t.Grid.Actions.Add:this._add(i);break;case t.Grid.Actions.Ungrouping:this._ungroup(i);break;case t.Grid.Actions.VirtualScroll:this._isVirtualRecordsLoaded||(this.model.scrollSettings.enableVirtualization?this._replacingVirtualContent():this._replacingContent())}else"reorder"==i.requestType&&this.model.groupSettings.groupedColumns.length>0?this._group(i):((t.isNullOrUndefined(this.model.currentViewData)||0==this.model.currentViewData.length)&&!this.phoneMode&&("refresh"==i.requestType&&0==this.model.scrollSettings.frozenColumns&&this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),("cancel"==i.requestType||"refresh"==i.requestType)&&this.model.scrollSettings.frozenColumns>0&&this._removeFrozenTemplate()),this._newungroup(i));this._showGridLines(),this._completeAction(i)},_removeFrozenTemplate:function(){this.getContent().find(".e-content").empty();var i=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),s=e(document.createElement("tbody"));i.append(this.getHeaderTable().find("colgroup").clone()).append(s),this.getContent().find(".e-content").html(i),this.setGridContentTable(i)},_showGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_showHeaderGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getHeaderContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_newungroup:function(e){"ungrouping"==e.requestType?this._ungroup(e):this.getContentTable().find("tbody").empty().first().append(this._getEmptyTbody())},setFormat:function(){for(var e,i,s,n=[],l=0;l<this.model.columns.length;l++)"date"==this.model.columns[l].type&&n.push(this.model.columns[l]);if(n.length>0&&!t.isNullOrUndefined(this.model.currentViewData))for(l=0,e=this.model.currentViewData.length;l<e;l++)for(i=0;i<n.length;i++)s=t.getObject(n[i].field,this.model.currentViewData[l]),/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(s)&&t.createObject(n[i].field,new Date(s),this.model.currentViewData[l])},_completeAction:function(i){var n,l,o,r,a,d;-1!=this.model.editSettings.editMode.indexOf("dialog")&&("save"==i.requestType||"cancel"==i.requestType)&&e("#"+this._id+"_dialogEdit").data("ejDialog")&&e("#"+this._id+"_dialogEdit").ejDialog("close"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1),this._confirmedValue=!1,t.Grid.Actions.Grouping==i.requestType&&t.isNullOrUndefined(i.columnName)||"refresh"==i.requestType&&this._LastColumnUnGroup?this._LastColumnUnGroup=!1:("ascending"!=i.columnSortDirection&&"descending"!=i.columnSortDirection||t.isNullOrUndefined(i.columnName)||(n=this.getColumnByField(i.columnName),this.model.allowSorting&&this.model.allowMultiSorting?this._scolumns.push(n.field):this._gridSort=n.field),"beginedit"!=i.requestType&&"add"!=i.requestType&&(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns(),("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._isAddNew=!1,this.model.isResponsive&&this.model.minWidth&&this.windowonresize()),this.initialRender||!(t.Grid.Actions.UnGrouping==i.requestType||this.model.groupSettings.groupedColumns.length>0)||e("#"+this._id+"EditForm").length||this._recalculateIndentWidth(),t.Grid.Actions.Paging==i.requestType||t.Grid.Actions.BatchSave==i.requestType?this._refreshGridPager():t.Grid.Actions.Sorting==i.requestType&&this.model.allowSorting||t.Grid.Actions.Refresh==i.requestType||t.Grid.Actions.Cancel==i.requestType?(t.gridFeatures.sort&&null!==this.getHeaderTable()&&this._sortCompleteAction(i),this.model.allowPaging&&(l=this.getPager().ejPager("option"),this._currentPage(l.currentPage),delete l.currentPage,e.extend(this.model.pageSettings,l),delete this.model.pageSettings.masterObject,this._refreshGridPager()),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i)):t.Grid.Actions.Delete==i.requestType||t.Grid.Actions.Save==i.requestType||t.Grid.Actions.Search==i.requestType?(this._editEventTrigger(i),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i),this.model.allowPaging&&this._refreshPagerTotalRecordsCount()):t.Grid.Actions.Filtering==i.requestType?this._filterCompleteAction():t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType?this._editCompleteAction(i):(t.Grid.Actions.Grouping==i.requestType||t.Grid.Actions.Ungrouping==i.requestType)&&this["_"+i.requestType+"CompleteAction"](i),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this.refreshToolbar(),!this.initialRender&&this.model.showSummary&&this.model.summaryRows.length>0&&(this.model.currentViewData.length?(this.element.children(".e-gridfooter").length||this._renderGridFooter().insertAfter(this.getContent()),this.getFooterTable().find("colgroup").remove(),this.model.scrollSettings.frozenColumns>0?(this.getFooterTable().eq(0).append(this.getHeaderTable().eq(0).find("colgroup").clone()),this.getFooterTable().eq(1).append(this.getHeaderTable().eq(1).find("colgroup").clone())):this.getFooterTable().append(this.getHeaderTable().find("colgroup").clone()),this._createSummaryRows(this.getFooterTable())):this.element.children(".e-gridfooter").remove()),!this.initialRender&&t.gridFeatures.selection&&(this.getContent().find("td.e-selectionbackground").length||this._setCurrentRow(i.requestType),"virtualscroll"!=i.requestType&&this.clearColumnSelection()&&e(this.getHeaderTable().find("th.e-headercell")).removeClass("e-columnselection")),"batch"==this.model.editSettings.editMode&&this.refreshBatchEditMode(),(!this.initialRender&&(this.model.allowScrolling||this.model.isResponsive)&&(this._checkScrollActions(i.requestType)||-1!=this.model.editSettings.editMode.indexOf("inline")&&"beginedit"==i.requestType)||"continuous"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType)&&(this.model.isResponsive&&this.model.minWidth?this.windowonresize():this._refreshScroller(i)),"normal"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType&&this.getContent().find("div:first").scrollLeft(this.getScrollObject().scrollLeft()),null!=this._customPop&&"sorting"!=i.requestType&&this._customPop.hide(),!this.model.allowScrolling||this.initialRender||this.model.scrollSettings.enableVirtualization||this.model.isResponsive||this.getContentTable().find("tr:last").find("td").addClass("e-lastrowcell"),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0&&this._groupingCompleteAction(i),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length<1&&this._ungroupingCompleteAction(i),this.model.textWrapSettings&&this._setTextWrap(),i.requestType==t.Grid.Actions.Reorder&&this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").data("ejDialog").isOpened()&&e("#"+this._id+"_ccTail").first().remove(),o=this.element.find(".e-ccButton").outerHeight(),this.element.find(".e-ccButton").first().remove(),e("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-o),this._renderColumnChooser()),(this._isUngrouping||this._columnChooser)&&"refresh"==i.requestType||(this._trigger("actionComplete",i),this._isUngrouping=!1,this._columnChooser=!1),(!this._isUngrouping&&!this.initialRender||this._showHideColumns||this._columntemplaterefresh)&&this._trigger("refresh"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&(this.initialRender||0!=this.getContentTable().find("tr.e-addedrow").length||0==this.element.find(".e-gridcontent").find("tr").length||this._startAdd(),"searching"==i.requestType&&this.element.find(".e-gridtoolbar").find("li#"+this._id+"_search input").focus()),(t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType)&&e.isFunction(e.validator)&&this.setValidation(),this.initialRender||(this.model._groupingCollapsed=[]),this._updateDataSource&&this._gridRecordsCount&&this.model.allowFiltering&&(this._initColumns(this.model.currentViewData[0]!=s?this.model.currentViewData[0]:this.model.currentViewData.value),this._renderFilterDialogs(),this._updateDataSource=!1),"fixed"!=this.model.columnLayout||this.model.isEdit||this.setWidthToColumns(),this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),!this._isLocalData&&this.model.allowScrolling&&0!=this.element.width()&&this.refreshScrollerEvent(),!this.initialRender&&this._enableCheckSelect&&(r=this._checkSelectedRowsIndexes[this._currentPage()-1],a=this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall"),this._selectAllCheck||a.prop("checked",!1),!this._isMapSelection&&r&&r.length>this._gridRows.length&&r.splice(this._gridRows.length,r.length-this._gridRows.length),this._isMapSelection?this._mappingSelection():"paging"!=i.requestType&&"save"!=i.requestType&&"beginedit"!=i.requestType&&"cancel"!=i.requestType?this._checkSelectedRowsIndexes=[]:r&&r.length&&this.selectRows(r),this._selectAllCheck&&(d=a.prop("checked")^this.selectedRowsIndexes.length==this.model.currentViewData.length,this.model.groupSettings.groupedColumns.length&&(d=!d),a[0].checked=d?a[0].checked:!a[0].checked)))},_getDataIndex:function(e,t){for(var i,s,n=0,l=0,o=e.length;l<o;l++){for(i=0,s=this._primaryKeys.length;i<s&&!this._checkPrimaryValue(e[l][this._primaryKeys[i]],t[this._primaryKeys[i]],this._primaryKeys[i]);i++)i==s-1&&(n=1);if(n)return l}return-1},_checkPrimaryValue:function(e,t,i){return"string"==this.getColumnByField(i).type&&(e=e.trim()),e!=t},_eventBindings:function(){var i,s,n,l,o,r,a,d,h=this.model.scrollSettings.frozenColumns>0?this._gridRows[0].length:this._gridRows.length,c=0,u=this.model.pageSettings.pageSize;if(t.gridFeatures.common&&this._refreshUnboundTemplate(this.getContentTable()),0!=this._gridRecordsCount&&(null!=this.model.queryCellInfo||null!=this.model.rowDataBound||null!=this.model.mergeCellInfo||null!=this.model.templateRefresh))for(s=0;s<h;s++){if(n=null,c=s,this.model.scrollSettings.allowVirtualScrolling&&s<u)if(this.model.scrollSettings.enableVirtualization){if(n=e(this._gridRows).eq(s),l=parseInt(e(n).attr("name"),32),-1!=e.inArray(l,this._queryCellView))continue;this._virtualLoadedRecords[l]&&(o=this._virtualLoadedRecords[l][s%this._virtualRowCount]),c=l*this._virtualRowCount+s%this._virtualRowCount}else{for(r=0;r<this._cloneQuery.queries.length;r++)i="onPage"==this._cloneQuery.queries[r].fn&&this._cloneQuery.queries[r].e.pageIndex-1;0!=(a=u*i)&&(c=(n=this.getContentTable().find("tr[name="+a+"]").eq(s)).index())}else this.model.scrollSettings.enableVirtualization&&(n=e(this._gridRows).eq(s));if((n=n||this.getRowByIndex(c)).hasClass("e-virtualrow")||t.isNullOrUndefined(this._currentJsonData[s]||o))break;d=this.model.scrollSettings.enableVirtualization?o:this._currentJsonData[s],this._rowEventTrigger(n,d)}},_rowEventTrigger:function(i,s){var n,l,o,r={row:i,data:s};for(this._trigger("rowDataBound",r),i.cells,n=e(i).find(".e-rowcell"),l=0;l<n.length;l++)r={cell:n[l],data:s,text:n[l].innerHTML},o=this._getForeignKeyData(r.data),e(n[l]).hasClass("e-rowcell")&&(r.column=this.model.columns[l]),t.isNullOrUndefined(o)||(r.foreignKeyData=o),1==this.model.allowCellMerging&&(this._cellMerging(r),this._trigger("mergeCellInfo",r)),this._trigger("queryCellInfo",r),e(n[l]).hasClass("e-templatecell")&&(r={cell:n[l],column:this.model.columns[l],data:s,rowIndex:e(i).index()},this._trigger("templateRefresh",r))},setWidthToColumns:function(){var i,n,l,o,r,a,d,h,c,u,m,p=this.getContentTable().children("colgroup").find("col"),g=this.getHeaderTable().children("colgroup").find("col"),f=[],_=this.element.width(),v=0,b=0,C=0,w=!t.isIOSWebView()&&this.getBrowserDetails();for(this.model.groupSettings.groupedColumns.length&&!this.model.allowScrolling&&this.model.groupSettings.showGroupedColumn&&w&&"msie"==w.browser&&parseInt(w.version,10)>8&&p.first().css("width",3e3/_+"%"),t.isNullOrUndefined(this.model.detailsTemplate)||(i=this.model.groupSettings.groupedColumns.length,n=0!=this.model.groupSettings.groupedColumns.length?1:0,p.eq(n).css("width",this._detailsOuterWidth),g.eq(i).css("width",this._detailsOuterWidth)),this._detailColsRefresh(),p=this._$headerCols,g=this._$contentCols,u=0;u<g.length;u++){if(this.model.allowResizeToFit&&this.model.columns[u].width===s){hCellIndex=this.model.groupSettings.groupedColumns.length?u+this.model.groupSettings.groupedColumns.length:u;var y=this._resizer._getContentWidth(u),S=this.getHeaderTable().find(".e-headercelldiv").eq(hCellIndex),x=this._resizer._getHeaderContentWidth(S);C="normal"==this.model.editSettings.editMode&&(this.model.isEdit||this._isAddNew)?"firefox"==w.browser?parseInt(p[u].style.width,10):p.eq(u).width():(y>x?y:x)+parseInt(S.css("padding-left"),10),this.columnsWidthCollection[u]=C,b+=this.model.columns[u].visible?C:0}else b+=this.model.columns[u].visible?parseInt(this.model.columns[u].width,10):0;this.model.columns[u].priority&&g.eq(u).addClass("e-table-priority-"+this.model.columns[u].priority),t.isNullOrUndefined(this.columnsWidthCollection[u])?this.model.allowScrolling&&f.push(this.model.columns[u]):(p.eq(u).width(this.columnsWidthCollection[u]),g.eq(u).width(this.columnsWidthCollection[u]))}for(l=f.filter(function(e){return!e.visible}).length,o=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),u=0;u<f.length;u++)if(f[u].visible){var T=t.isNullOrUndefined(f[u].field)?this.getColumnIndexByField(f[u].field):this.getColumnIndexByHeaderText(f[u].headerText),k=o.eq(T)[0],D=k.getBoundingClientRect().width;t.isNullOrUndefined(D)&&(D=k.offsetWidth),parseInt(D)<15&&(D=(_/this.model.columns.length).toFixed(2),bSize=(_/(this.model.scrollSettings.buttonSize||18)/100).toFixed(2),D-=bSize),p.eq(T).css("width",D+"px"),g.eq(T).css("width",D+"px"),this.model.columns[T].width=D,this.columnsWidthCollection[T]=parseFloat(D)}if(l||(this._undefinedColsCollection=null),"fixed"==this.model.columnLayout){this.model.scrollSettings&&0==this.model.scrollSettings.frozenColumns&&(this.getHeaderTable().width(b),this.getContentTable().width(b));var I=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),O=this.getHeaderContent().width()>I?"addClass":"removeClass",R=this.getHeaderTable(),A=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(R=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),A=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),R[O]("e-tableLastCell"),A[O]("e-tableLastCell")}if(!this.model.allowScrolling&&this.model.allowResizeToFit&&!this.model.isResponsive&&b>_&&(this.model.allowScrolling=!0,this.model.scrollSettings.width=_,this.getHeaderTable().parent().addClass("e-headercontent"),this._renderScroller(),!this.model.scrollSettings.frozenColumns>0&&this.getHeaderTable().width(_)),this.model.isEdit&&(d=p.clone(),this.model.editSettings.showAddNewRow&&(r=this.getContentTable().find(".e-editedrow")),$colGroup=this.model.scrollSettings.frozenColumns>0?this.getContent().find(".gridform").find("colgroup"):t.isNullOrUndefined(r)||1!=r.length?e("#"+this._id+"EditForm").find("colgroup"):r.find("colgroup"),this.model.scrollSettings.frozenColumns>0&&$colGroup.first().empty().append(d.splice(0,this.model.scrollSettings.frozenColumns)),$colGroup.last().empty().append(d),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&$colGroup.prepend(this._getIndentCol())),this.model.groupSettings.groupedColumns.length)for(a=this.getContentTable().find(".e-recordtable").children("colgroup"),u=0;u<a.length;u++)d=p.clone(),h=null!=this._detailsOuterWidth?this._detailsOuterWidth:"30px",(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&d.splice(0,0,e(this._getIndentCol()).width(h)[0]),a.eq(u).empty().append(d);if(this.model.scrollSettings.frozenColumns>0){for(c=0,u=0;u<this.model.columns.length;u++)c+=this.model.columns[u].visible?parseInt(this.columnsWidthCollection[u],10):0,this.model.scrollSettings.frozenColumns-1==u&&(v=Math.ceil(c));this.element.width(this.model.scrollSettings.width||this.model.width),(m=this.element.find(".e-gridcontent").children().first().width())>c?c=m+(this.getContentTable().height()<this.model.scrollSettings.height&&this.getScrollObject()._vScroll?this.model.scrollSettings.buttonSize:0):c+=this.getHeaderContent().height()<this.model.scrollSettings.height?this.model.scrollSettings.buttonSize:0,this.getContent().find(".e-frozencontentdiv").outerWidth(v).end().find(".e-movablecontentdiv").outerWidth(c-v),this.getHeaderContent().find(".e-frozenheaderdiv").outerWidth(v).end().find(".e-movableheaderdiv").outerWidth(c-v)}!this.initialRender&&this.model.allowResizeToFit&&this.model.allowScrolling&&this.model.scrollSettings.enableVirtualization&&(_=this.getHeaderTable().width()>this.getContentTable().width()?this.getHeaderTable().width():this.getContentTable().width(),this.getContentTable().width(_),this.getHeaderTable().width(_))},_initialEndRendering:function(){var i,s,n;if(this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),("batch"==this.model.editSettings.editMode||this.model.editSettings.showDeleteConfirmDialog)&&this._renderConfirmDialog(),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&0==e("#"+this._id+"AlertDialog").length&&this._renderAlertDialog(),(this.model.allowMultiSorting||"multiple"==this.model.selectionType)&&this._renderMultiTouchDialog(),this.model.scrollSettings.frozenColumns>0&&!this.model.allowScrolling)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsScrollAlert),void this._alertDialog.ejDialog("open");if(this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this._createPagerStatusBar(),this._getRowHeights(),0!=this.element.width()&&this.model.allowScrolling)this._renderScroller(),this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0||(this.setWidthToColumns(),null!=(i=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject())&&i.refresh(),this._isLocalData&&this.refreshScrollerEvent());else if(this.model.allowScrolling&&this.element.width()<=0)return s=this,void(n=setInterval(function(){if(!t.isNullOrUndefined(s.element)&&s.element.width()>0&&!t.isNullOrUndefined(s.element.width())){if(s._renderScroller(),!(s.model.scrollSettings.frozenRows>0||s.model.scrollSettings.frozenColumns>0)){s.setWidthToColumns();var e=t.isNullOrUndefined(s.getContent().data("ejScroller"))?null:s.getScrollObject();null!=e&&e.refresh(),s.refreshScrollerEvent()}s._endRendering(),clearInterval(n)}},100));this._endRendering()},_endRendering:function(){var e,i;!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.model.allowScrolling&&(e=this.getScrollObject()),i=this.model.enableRTL?"e-summaryscroll e-rtl":"e-summaryscroll",this.model.allowScrolling&&this.model.showSummary&&(e._vScroll&&this.element.find(".e-summaryrow.e-scroller").addClass(i),this.getFooterTable()&&this.getFooterTable().find("colgroup").first().replaceWith(this.getHeaderTable().find("colgroup").clone())),this._addMedia(),this.model.allowScrolling&&this.model.allowTextWrap&&!this.model.scrollSettings.allowVirtualScrolling&&this.getContent().first().ejScroller("refresh"),this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),1!=this._currentPage()||this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=this._currentJsonData),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView():this._refreshVirtualContent(this._currentPage()),this.getContent().first().ejScroller("refresh"),this.getContent().ejScroller("isVScroll")?(this.element.find(".e-gridheader").addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width())):this.element.find(".e-gridheader").removeClass("e-scrollcss")),1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0&&this._selectingMultipleRows(this._selectedMultipleRows()),-1!=this._selectedRow()&&0==this._selectedMultipleRows().length&&(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())),!this.model.allowFiltering||"filterbar"!=this.model.filterSettings.filterType||this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling||this._createPagerStatusBar(),t.gridFeatures.common&&this.rowHeightRefresh(),t.gridFeatures.filter&&-1!=["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this._recalculateIndentWidth(),this.initialRender&&(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow()},_addLastRow:function(){var i,s=this.getContentTable().find("tr:last").find("td"),n=0;if(this.model.allowScrolling&&!this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(this.model.dataSource)&&!t.isNullOrUndefined(this.getRows())){for(i=0;i<this.getRows().length;i++)n+=e(this.getRows()[i]).height();n<this.getContent().height()-1&&s.addClass("e-lastrowcell")}this.model.scrollSettings.allowVirtualScrolling&&this.getContentTable().height()<this.getContent().height()&&s.addClass("e-lastrowcell")},_addMedia:function(){if("string"!=typeof this.model.scrollSettings.width&&this.model.scrollSettings.width>0?this._responsiveScrollWidth=this._originalScrollWidth=this.model.scrollSettings.width:this._originalScrollWidth=this.element.width(),"string"!=typeof this.model.scrollSettings.height&&this.model.scrollSettings.height>0&&(this._responsiveScrollHiehgt=this.model.scrollSettings.height),this.model.minWidth&&this.model.isResponsive){if(this._$onresize=e.proxy(this.windowonresize,this),e(window).on("resize",this._$onresize),e.isFunction(window.matchMedia)){var t=window.matchMedia("(max-width: 768px)");this._mediaStatus=t.matches}this.windowonresize()}},_getNoncontentHeight:function(){var e=this.getHeaderContent().outerHeight();return this.model.toolbarSettings.showToolbar&&(e+=this.element.find(".e-gridtoolbar").outerHeight()),this.model.allowPaging&&(e+=this.element.find(".e-pager").outerHeight()),this.model.showColumnChooser&&(e+=this.element.find(".e-ccButton").outerHeight()),this.model.allowGrouping&&this.model.groupSettings.showDropArea&&(e+=this.element.find(".e-groupdroparea").outerHeight()),this.model.showSummary&&(e+=this.element.find(".e-gridsummary").outerHeight()),e},setDimension:function(e,t){var i=e-this._getNoncontentHeight();this.model.scrollSettings.height=i,this.model.scrollSettings.width=t,this._renderScroller()},_getVisibleColumnsWidth:function(){for(var e=0,t=0;t<this.columnsWidthCollection.length;t++)this.model.columns[t].visible&&(e+=this.columnsWidthCollection[t]);return e},setPhoneModeMaxWidth:function(e){this._gridPhoneMode=e},_mediaQueryUpdate:function(i,s,n,l){var o,r;if(window.innerWidth<=this._gridPhoneMode&&this.model.enableResponsiveRow)return(o=this.getContentTable()[0].style).removeAttribute?o.removeAttribute("min-width"):o.removeProperty("min-width"),void(this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy"));i?(this.model.scrollSettings.width=t.isNullOrUndefined(this._responsiveScrollWidth)?n:Math.min(this._responsiveScrollWidth,n),r=Math.min(l,s)-this._getNoncontentHeight(),r=t.isNullOrUndefined(this._responsiveScrollHiehgt)?r:Math.min(this._responsiveScrollHiehgt,r),(this.element.parent().is("body")&&e(document).height()>r||r>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(r-=parseInt(this.element.parent().css("margin-bottom")+1)),r="auto"!=this.model.scrollSettings.height?r:this.model.scrollSettings.height,(this.model.minWidth>n||this.getContentTable().width()>n)&&s>l&&(r="auto"!=r?r+this.model.scrollSettings.buttonSize:r),t.isNullOrUndefined(this.getRows())&&(r="100%"),this.model.scrollSettings.height=this._isHeightResponsive?r:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()):(this.model.scrollSettings.width="100%",t.isNullOrUndefined(this._responsiveScrollWidth)||(this.model.scrollSettings.width=Math.min(this._responsiveScrollWidth,n)),r=Math.min(l,s)-this._getNoncontentHeight(),t.isNullOrUndefined(this._responsiveScrollHiehgt)||(r=Math.min(this._responsiveScrollHiehgt,r)),(this.element.parent().is("body")&&e(document).height()>r||r>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(r-=parseInt(this.element.parent().css("margin-bottom"))),r="auto"!=this.model.scrollSettings.height?r:this.model.scrollSettings.height,(!t.isNullOrUndefined(this._responsiveScrollWidth)&&this.model.scrollSettings.width==this._responsiveScrollWidth&&(this.model.minWidth>this._responsiveScrollWidth||this._getVisibleColumnsWidth()>this._responsiveScrollWidth)||t.isNullOrUndefined(this._responsiveScrollWidth)&&(this.getRowHeight()==r||this._isHeightResponsive)&&this.getContentTable().width()>n)&&(r="auto"!=r?r+this.model.scrollSettings.buttonSize:r),t.isNullOrUndefined(this.getRows())&&(r="100%"),this.getContent().height()>=r&&!this._resize&&!this.initialRender&&"string"==typeof this.model.scrollSettings.width&&(this.model.scrollSettings.width=n),this.model.scrollSettings.height=this._isHeightResponsive?r:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()),this._resize=!1},windowonresize:function(i){var s,n;i&&"resize"==i.type&&(this._resize=!0),this.model.scrollSettings.width=this._responsiveScrollWidth,this.element.css("width","100%"),this.getContentTable().width("100%"),this.getHeaderTable().width("100%"),this.getContentTable().css("minWidth",this.model.minWidth),s=this.element.width();var l=e(window).height()-this.element.offset().top,o=(t.isNullOrUndefined(this.getRows())||this.getRows().length,this.element.parent().is(e("body"))||this.element.parent().height()==e("body").height()||""==this.element.parent()[0].style.height),r=this.getContentTable()[0].scrollHeight+this._getNoncontentHeight(),a=o?l:this.element.parent().height();r+=parseInt(this.element.parent().css("margin-top")),n=this.model.minWidth>s||a<=r,this._mediaQueryUpdate(n,a,s,r)},_removeMedia:function(){e(window).off("resize",this._$onresize),this.getContentTable().css("min-width",""),this.getHeaderTable().css("min-width",""),this.getContentTable().css("width",""),this.model.scrollSettings.width="auto",this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy")},_getRowHeights:function(){var e,t=this.getRows();if(null!==t)if(this._rowHeightCollection=[],t[1]!==s&&t[1].length&&(this.model.scrollSettings.frozenColumns>0&&t[0]!==s||t[0]!==s&&void 0!==t[0].item&&"number"==typeof t[0].length&&void 0!==t[1].item&&"number"==typeof t[1].length))for(frotrs=t[0],movtrs=t[1],e=0;e<frotrs.length;e++)this._rowHeightCollection[e]=frotrs[e].offsetTop>=movtrs[e].offsetTop?frotrs[e].offsetTop:movtrs[e].offsetTop;else for(e=0;e<t.length;e++)this._rowHeightCollection[e]=t[e].offsetTop;return this._rowHeightCollection},_getEmptyTbody:function(){var i=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length});return e(document.createElement("tr")).append(i)},_getIndentCol:function(){return t.buildTag("col","",{width:"30px"})},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_createSortNumber:function(e,i){return"right"==i.css("text-align")?t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"left"}):t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"right"})},_onFocusIn:function(){var e=this;setTimeout(function(){e.element.removeClass("e-activefocusout")},0)},_onFocusOut:function(){var e=this;setTimeout(function(){e.element.addClass("e-activefocusout")},0)},_wireEvents:function(){this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",".e-gridheader",this._mouseClickHandler),this.model.enableFocusout&&(this._on(this.element,"focusout",this._onFocusOut),this._on(this.element,"focusin",this._onFocusIn)),t.gridFeatures.common&&(this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent > div:first",this._recorddblClickHandler),this.model.rightClick&&this._on(this.element,"contextmenu",this._rightClickHandler),this._on(this.element,"click",".e-gridcontent",this._recordClick),this._enableRowHover(),this.model.enableTouch?this._on(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",e.proxy(this._touchGrid,this)):this.element.addClass("e-touch"),this._on(this.element,"mousedown",".e-gridheader",this._headerMouseDown),this.model.allowRowDragAndDrop&&"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this._on(this.element,"mouseover mouseleave",".e-gridheader:first",this._headerHover),this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._headerHover),this.model.allowResizeToFit&&this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing&&(this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._mouseMove),this._on(this.element,"mouseup",this._mouseUp)),this.model.allowKeyboardNavigation&&(this.element[0].tabIndex=-1==this.element[0].tabIndex?0:this.element[0].tabIndex,this.element[0].accessKey=t.isNullOrUndefined(this.element[0].accessKey)||""==this.element[0].accessKey?"e":this.element[0].accessKey,this._on(this.element,"keyup",this._keyDownHandler))),t.gridFeatures.edit&&(this._enableEditingEvents(),this._on(this.element,"click",".e-gridcontent .e-unboundcelldiv",this._unboundClickHandler)),this.model.allowGrouping&&(this._enableGroupingEvents(),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)),this._enableFilterEvents()},_enableFilterEvents:function(){if((this.model.allowMultiSorting||"multiple"==this.model.selectionType||this.model.allowFiltering)&&this._on(e(document),"mousedown",this._docClickHandler),this.model.allowFiltering){this._off(this.element,"keyup",".e-filterbar input")._on(this.element,"keyup",".e-filterbar input",this._filterBarHandler),this._on(this.element,"focus click",".e-filterbar",this._filterBarClose)}},_docClickHandler:function(i){var s=!t.isIOSWebView()&&this.getBrowserDetails(),n=e(i.target);null!=this._customPop&&0==this.element.find(i.target).length&&this._customPop.hide(),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType?this._$colType&&(e(i.target).find(".e-grid.e-dlgcontainer").length>1||e(i.target).find(".e-excelfilter").length>1)&&(s&&"msie"==s.browser?"BODY"!=i.target.tagName&&(this.isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):this._isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):n.hasClass("e-filtertext")||n.hasClass("e-cancel")||this.getFilterBar().find(".e-cancel").addClass("e-hide"))},_mouseClickHandler:function(i){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S=e(i.target);if((0==S.closest(".e-grid").length||S.closest(".e-grid").attr("id")===this._id)&&"col-resize"!=this.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow").css("cursor"))if(n=e(i.target).is(".e-ascending, .e-descending")?e(i.target.parentNode):S.hasClass("e-groupheadercell")?S.children("div"):e(i.target),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&(e.fx.off=!0,this._closeFDialog(),e.fx.off=!1),this.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),n.hasClass("e-headercelldiv")||n.hasClass("e-headercell")&&-1==e.inArray("column",this.model.selectionSettings.selectionMode)||!n.hasClass("e-togglegroupbutton")&&n.closest(".e-headercelldiv").length&&-1==e.inArray(n[0].tagName,["SELECT","INPUT","TEXTAREA"])||n.closest(".e-groupheadercell").length&&e(i.target).is(".e-ascending, .e-descending")){if(!this.model.allowSorting||t.gridFeatures.sort===s)return;n=n.hasClass("e-headercelldiv")||n.closest(".e-groupheadercell").length?n:n.hasClass("e-headercell")?n.find(".e-headercelldiv"):n.closest(".e-headercelldiv"),a=n.attr("ej-mappingname"),t.sortOrder.Ascending,this._$prevSElementTarget=this._$curSElementTarget,this._$curSElementTarget=n,l=n.find("span").hasClass("e-ascending")?t.sortOrder.Descending:t.sortOrder.Ascending,"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-sortdirect").hasClass("e-spanclicked")&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-rowselect").is(":visible")||!this._customPop.find(".e-sortdirect").hasClass("e-spanclicked"))&&this.model.allowMultiSorting&&(o=n.offset(),this._customPop.removeAttr("style"),this._customPop.offset({left:o.left,top:o.top-this.getHeaderTable().find(".e-columnheader").height()-n.height()}).find(".e-sortdirect").show().end().find(".e-rowselect").hide().end().show()),this.model.allowMultiSorting&&(i.ctrlKey||this._enableSortMultiTouch)&&(this.multiSortRequest=!0),i.shiftKey&&-1==e.inArray(a,this.model.groupSettings.groupedColumns)&&(this._removeSortedColumnFromCollection(a),this.multiSortRequest=!0,a=null,this.sortColumn(a,l)),t.isNullOrUndefined(a)||this.sortColumn(a,l)}else if(n.hasClass("e-togglegroupbutton")&&this.model.allowGrouping)r=n.parent().attr("ej-mappingname"),n.hasClass("e-togglegroup")&&this.groupColumn(r),n.hasClass("e-toggleungroup")&&this.ungroupColumn(r);else if((n.hasClass("e-filtericon")||n.hasClass("e-filteredicon")||n.hasClass("e-responsivefilterColDiv")||n.parent().hasClass("e-responsivefilterColDiv"))&&(a=n.parent().find(".e-headercelldiv").attr("ej-mappingname")||n.attr("ej-mappingname")||e(n.parent()).attr("ej-mappingname"),this._$prevFieldName=this._$curFieldName,currentColumn=this.getColumnByField(a),d={True:this.localizedLabels.True,False:this.localizedLabels.False},this.model.allowFiltering)){if(h=this,e.each(this.model.columns,function(e,t){t.field==a&&(h._$colType=t.type,h._$curFieldName=t.field,h._$colFormat=t.format,h._$filterType=t.filterType,h._$colForeignKeyField=t.foreignKeyField?t.foreignKeyField:t.field,h._$colForeignKeyValue=t.foreignKeyValue,h._$colDropdownData=t.dataSource)}),("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType)&&(c="#"+this._id+"_"+this._$colType+"Dlg",this._$menuDlgIsOpen=!0,"string"==this._$colType?this._$colForeignKeyValue&&this._$colDropdownData?e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$colForeignKeyValue,key:h._$colForeignKeyField},dataSource:h._$colDropdownData}):e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$curFieldName,key:this._getIdField()},dataSource:this._dataSource()}):"date"==this._$colType?this._$colFormat!=s?(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})):e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:"MM/dd/yyyy"}):"datetime"==this._$colType&&(this._$colFormat!=s&&(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datetimewidget input").ejDateTimePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})),this._setFilterFieldValues(c))),this._mediaStatus=document.documentElement.clientWidth<768,this.model.isResponsive&&this._mediaStatus){var x=this,T=t.buildTag("div.e-resFilterDialogHeaderDiv"),k=t.buildTag("div.labelRes","<span>Filter</span>");e(".e-filterMenuBtn").length>0&&e(".e-filterMenuBtn").remove();var D=t.buildTag("div.e-filterMenuBtn"),I=t.buildTag("input.e-resposnsiveFilterBtnLeft"),O=t.buildTag("input.e-resposnsiveFilterBtnRight");if(T.append(k),T.css("width","100%"),u=e(c).css("padding-left","0px"),n.parent().hasClass("e-responsivefilterColDiv")&&n.hasClass("e-filternone"))h._fltrClrHandler(),n.remove(),e("#responsiveFilter").css("display","block");else if(this.element.css("display","none"),setTimeout(function(){e("#responsiveFilter").css("display","none")}),this._isExcelFilter||"excel"==this._$filterType){if(this._excelDlg=c="#"+this._id+this._$colType+"_excelDlg",t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])){I.ejButton({text:"OK",type:"button",click:function(){x._responsiveFilterClose(),x._excelFilter._openedFltr=e(x._excelDlg),x._excelFilter._fltrBtnHandler(),x._setResponsiveFilterIcon()}}),O.ejButton({text:"Cancel",type:"button",click:function(){e(c).css("display","none"),h.element.css("display","block")}}),e(c).children().not(".e-searchcontainer").remove();var R=this._excelFilter,A=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),M=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"});A.click(function(t){e.proxy(x._closeDivIcon(t),this)}),T.append(A.append(M)),_=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),v=t.buildTag("span.e-icon e-resIcon e-responisveCustomFilter","",{},{closeDialogue:c.slice(1),gridEle:!0}),_.click(function(t){e.proxy(x._closeDivIcon(t),this)}),"boolean"!=h._$colType&&T.append(_.append(v)),e(c).css("padding","0px"),(b=e(c).css("height",e(window).height()-2)).css("width",e(window).width()-2),b.find(".e-searchcontainer .e-searchbox").css("margin-top","10px").children().css("margin-top","10px");var F=b.find(".e-checkboxlist"),P=.97*e(window).width(),E=.65*e(window).height();e(b.find(".e-searchcontainer")).addClass("e-resSearch"),(C=b.find(".e-resSearch .e-btncontainer").remove()).find("input:first").css("width","45.6%"),C.find("input:first").addClass("e-resposnsiveFilterBtnLeft"),C.find("input:last").addClass("e-resposnsiveFilterBtnRight"),b.find(".e-excelLabel").remove(),w=t.buildTag("div.e-excelLabel","Order Id",{"font-weight":"bold","margin-top":"10px"}),b.find(".e-searchcontainer"),w.insertAfter(b.find(".e-searchcontainer .e-searchbox")),b.prepend(T),e(c).append(D.append(I).append(O)),F.ejScroller({height:E,width:P}).ejScroller("refresh")}this._excelFilter.openXFDialog({field:a,enableResponsiveRow:!0,displayName:currentColumn.headerText,dataSource:this._dataSource(),position:{X:j,Y:z},dimension:{height:e(window).height(),width:e(window).width()},cssClass:"resFilter",type:this._$colType,format:this._$colFormat,localizedStrings:d}),e(c).insertAfter(this.element),t.isNullOrUndefined(e(c).parents(".e-grid")[0])||e(c).remove(),_.click(function(){var i,s,n,l,o,r,a,d,u,m,p,g,f,_,v;e(x._excelDlg).css("display","none"),i=e(window).height()-5,s=e(window).width(),R._openCustomFilter("equal"),n=c=e("#"+x._id+x._$colType+"_CustomFDlg").addClass("e-responsviesExcelFilter"),t.isNullOrUndefined(n.find(".e-resFilterDialogHeaderDiv")[0])&&(l=t.buildTag("div.e-resFilterDialogHeaderDiv"),o=t.buildTag("div.labelRes","<span>Custom Filter</span>"),l.append(o),r=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",openDialogue:x._excelDlg.slice(1)}),a=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",openDialogue:x._excelDlg.slice(1)}),r.click(function(){n.css("display","none"),x.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):x.element.css("display","block")}),l.append(r.append(a)),d=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",gridEle:!0}),u=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",gridEle:!0}),l.append(d.append(u)),d.click(function(){n.css("display","none"),x.element.css("display","block")}),n.prepend(l),n.insertAfter(x.element),n.find(".e-dlgfields").css("width","100%"),(m=n.find(".e-dlgfields:first").css("width","92%").css("margin-left","6%")).css("margin-top","4%"),p=n.find(".e-dlgfields").find(".e-fieldset legend").text(),t.buildTag("div.e-responsiveLabelDiv",p,{"margin-left":"6%"}).insertAfter(m),g=n.find(".e-dlgfields").find(".e-fieldset").find("table").css("width","61%"),n.find(".e-dlgfields").find(".e-fieldset").replaceWith(g),g.parent("div").addClass("e-responsiveExcelFilterFieldDiv"),g.find(".e-dropdownlist"),g.find(".e-dropdownlist").each(function(t,i){var s=e(i).ejDropDownList("model.dataSource"),n=.4*e(window).width();e(i).ejDropDownList("destroy").ejDropDownList({width:n,popupWidth:n+"px",dataSource:s})}),g.find(".e-autocomplete").each(function(t,i){var s=e(i).ejAutocomplete("model.dataSource"),n=.4*e(window).width();e(i).ejAutocomplete("destroy").ejAutocomplete({width:n,dataSource:s.dataSource,fields:s.fields})}),g.find(".e-datepicker").each(function(t,i){e(i).ejDatePicker("model.dataSource");var s=.4*e(window).width();e(i).ejDatePicker("destroy").ejDatePicker({width:s})}),f=I.clone(),_=O.clone(),f.ejButton({text:"OK",type:"button",click:function(){x._excelFilter._openedFltr=n,x._excelFilter._fltrBtnHandler(),n.hasClass("e-dlgcustom")&&n.ejDialog("close"),x._setResponsiveFilterIcon(),x.element.css("display","block")}}),_.ejButton({text:"Cancel",type:"button",click:function(){n.ejDialog("close"),h.element.css("display","block")}}),n.append(D.clone().append(f).append(_)),(v=n.find(".e-dlgfields .e-btncontainer").remove()).find("input:first").addClass("e-resposnsiveFilterBtnLeft"),v.find("input:first").css("width","45.6%"),v.find("input:last").addClass("e-resposnsiveFilterBtnRight")),x.element.css("display","none"),n.ejDialog({enableModal:!1,height:i,width:s,position:{X:0,Y:0},enableResize:!1,showHeader:!1}).ejDialog("open")}),t.buildTag("div")}else m=this.model.enableResponsiveRow?"OK":"Filter",p=this.model.enableResponsiveRow?"Cancel":"Clear",I.ejButton({text:m,type:"button",click:e.proxy(this._fltrBtnHandler,this)}),O.ejButton({text:p,type:"button",click:function(){"Clear"==p&&(h.element.css("display","block"),h._fltrClrHandler()),e(c).css("display","none"),O.hasClass("e-resposnsiveFilterBtnRight")&&h.element.css("display","block")}}),n.parent().hasClass("e-responsivefilterColDiv")&&n.hasClass("e-filternone")?(h._fltrClrHandler(),n.remove()):(u.addClass("e-resMenuFltr"),u.css("height",e(window).height()-1).css("width",e(window).width()-2),u.find(".e-operator").addClass("e-resFilterOperator"),u.find(".e-value").addClass("e-resFilterOperator"),u.find(".e-dlgBtns").remove().addClass("e-filterMenuBtn"),u.append(D.append(I).append(O)),t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])&&(u.insertAfter(this.element),A=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),M=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),A.click(function(){u.css("display","none"),x.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):x.element.css("display","block")}),T.append(A.append(M)),_=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),v=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:c.slice(1),gridEle:!0}),_.click(function(){u.css("display","none"),x.element.css("display","block")}),g=e(u.find(".e-value").find("input:last")),"string"==h._$colType&&(f=e(u.find(".e-value").find("input:last")).ejAutocomplete("model"),g.ejAutocomplete("destroy").ejAutocomplete({enableDistinct:!0,dataSource:f.dataSource,fields:f.fields,width:f.width,focusIn:function(){var e=this.element.closest(".e-filterDialoge").find(".e-dropdownlist");this.model.filterType=e.val()}})),T.append(_.append(v)),u.prepend(T)),u.find(".e-responsiveLabelDiv").remove(),t.buildTag("div.e-responsiveLabelDiv","",{"margin-left":"5%","font-size":"17px","margin-top":"5%"}).append(t.buildTag("span",this.getHeaderTextByFieldName(a),{"font-weight":"bold"})).insertAfter(u.find(".e-resFilterDialogHeaderDiv")),u.fadeIn(100,function(){}))}else{e(c).hasClass("e-resMenuFltr")&&(e(c).remove(),this._renderFilterDialogs(),c="#"+this._id+"_"+this._$colType+"Dlg"),e(c).ejDialog({position:{X:"",Y:""}});var L=e(document).width(),N=document.documentElement.clientWidth<800?200:250,j=n.position().left+18,z=n.position().top+2;"relative"==n.closest(".e-headercell").css("position")&&(j=n.offset().left+15,z=n.offset().top+20),y="e-filterdialoglarge",N=this._isExcelFilter?this._excelFilter._dialogContainer.width():N,n.offset().left+18+N>L&&(j-=N),200==N&&(y=""),t.isNullOrUndefined(this._$colType)||("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType?e(c).ejDialog({position:{X:j,Y:z},width:N,cssClass:y}).ejDialog("open"):this._excelFilter.openXFDialog({field:a,displayName:currentColumn.headerText,dataSource:this._dataSource(),position:{X:j,Y:z},type:this._$colType,format:currentColumn.format,foreignKey:currentColumn.foreignKeyField,foreignKeyType:currentColumn.originalType,foreignKeyValue:currentColumn.foreignKeyValue,foreignDataSource:currentColumn.dataSource,localizedStrings:d}))}this._setFilterFieldValues(c),"number"==this._$colType&&currentColumn.serverType!=s?e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:0}):"number"==this._$colType&&e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:2}),this._$prevColType=this._$colType,this._$fDlgIsOpen=!0}},_responsiveFilterClose:function(){this.element.css("display","block")},_clickHandler:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f,_=e(i.target),v=e("[id$='ccDiv'].e-grid.e-columnChooser"),b=e("#"+this._id+"EditForm");if(v.length)for(r=!0,a=0;a<v.length;a++)(_.parents(".e-ccButton").length||_.hasClass("e-ccButton"))&&(r=e(i.target).closest(".e-grid").attr("id")+"ccDiv"!=v[a].id),(d=e("#"+v[a].id).ejDialog("instance")).isOpened()&&r&&(d.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove());if(!(_.hasClass("e-button")&&(_.hasClass("e-disable")||_.prop("disabled"))||_.closest(".e-grid").attr("id")!==this._id||_.closest("#"+this._id+"EditForm").length)){if(_.hasClass("e-rowcell")||_.closest("td").is(".e-rowcell")||_.hasClass("e-headercell")&&i.clientY-_.offset().top<_.height()/4||_.parents(".e-headercheckcelldiv").length){if(this._bulkEditCellDetails.cancelSave)return void(this._bulkEditCellDetails.cancelSave=!1);if("batch"==this.model.editSettings.editMode&&e.isFunction(e.validator)&&b.length&&b.validate().errorList.length>0)return;"batch"==this.model.editSettings.editMode&&this.element.focus(),n=_.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,h=-1!=_.closest(".e-rowcell").index()?_.closest(".e-rowcell").index():_.closest(".e-headercell").index()-this.model.groupSettings.groupedColumns.length,l=_.hasClass("e-rowcell")?_.index()-n:h-n,l=null!=this.model.detailsTemplate||null!=this.model.childGrid?l-1:l,this.model.scrollSettings.frozenColumns&&(_.closest(".e-movableheaderdiv").length||_.closest(".e-movablecontentdiv").length)&&(l+=this.model.scrollSettings.frozenColumns),o=this.getIndexByRow(_.closest("tr")),this._bulkEditCellDetails.columnIndex=l,this._bulkEditCellDetails.rowIndex=o,this.model.allowSelection&&t.gridFeatures.selection&&(c=!(!this._enableCheckSelect||!_.parent(".e-checkcelldiv").length),_.hasClass("e-checkselectall")&&(this._selectAllCheck=!0,u=this.model.allowPaging?this.model.pageSettings.pageSize:this._gridRows.length,this.selectRows(0,u-1,_)),"multiple"==this.model.selectionType&&((i.ctrlKey||this._enableSelectMultiTouch)&&(this.multiSelectCtrlRequest=!0),i.shiftKey&&(this.multiSelectShiftRequest=!0,this._allowcellSelection&&o>-1&&this.selectCells([[o,[l]]]),this._allowrowSelection&&o>-1&&(!this._enableCheckSelect||c)&&this.selectRows(this._previousIndex,this.getIndexByRow(_.closest("tr")),_),this._selectedRow(this.getIndexByRow(_.closest("tr"))),this._allowcolumnSelection&&_.hasClass("e-headercell")&&!_.hasClass("e-stackedHeaderCell")&&i.clientY-_.offset().top<_.height()/4&&this.selectColumns(this._previousColumnIndex,l)),"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-rowselect").hasClass("e-spanclicked")&&"row"==this.model.selectionSettings.selectionMode&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-sortdirect").is(":visible")||!this._customPop.find(".e-rowselect").hasClass("e-spanclicked"))&&"multiple"==this.model.selectionType&&(this._customPop.removeAttr("style"),m=_.offset(),this._customPop.offset({top:0,left:0}).offset({left:m.left,top:m.top-this.getRowHeight()-_.height()}).find(".e-sortdirect").hide().end().find(".e-rowselect").show().end().show())),this.multiSelectShiftRequest||(this._allowcellSelection&&o>-1&&(p=this._checkCellSelectionByRow(o,l),(this.model.selectionSettings.enableToggle&&1==this.selectedRowCellIndexes.length&&1==this.selectedRowCellIndexes[0].cellIndex.length||i.ctrlKey&&"multiple"==this.model.selectionType)&&-1!=p&&this.selectedRowCellIndexes.length>0&&this.selectedRowCellIndexes[0].cellIndex.length>0?this.clearCellSelection(p.rowIndex,l):this.selectCells([[o,[l]]])),this._allowrowSelection&&o>-1&&(g=this.getIndexByRow(_.closest("tr")),this._enableCheckSelect&&(this.multiSelectCtrlRequest=!0),this.model.scrollSettings.enableVirtualization&&(f=o%this._virtualRowCount,g=parseInt(e(_).closest("tr").attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-f)),(!this._enableCheckSelect||c)&&(this.model.selectionSettings.enableToggle&&!this._enableCheckSelect&&1==this.getSelectedRecords().length&&-1!=e.inArray(this.getIndexByRow(_.closest("tr")),this.selectedRowsIndexes)?this.clearSelection(g):this.selectRows(this.getIndexByRow(_.closest("tr")),null,_)),!this._enableCheckSelect||i.ctrlKey||this._enableSelectMultiTouch||(this.multiSelectCtrlRequest=!1)),this._allowcolumnSelection&&_.hasClass("e-headercell")&&!_.hasClass("e-stackedHeaderCell")&&i.clientY-_.offset().top<_.height()/4&&(this.model.selectionSettings.enableToggle&&1==this.selectedColumnIndexes.length&&-1!=e.inArray(l,this.selectedColumnIndexes)?this.clearColumnSelection(l):this.selectColumns(l)),this.multiSelectCtrlRequest=!1),this.multiSelectShiftRequest=!1),s=this._bulkEditCellDetails.columnIndex>=0?this.model.columns[this._bulkEditCellDetails.columnIndex].field:null,_.closest(".e-rowcell").length&&!t.isNullOrUndefined(s)&&(this._tabKey=!1,this.model.editSettings.allowEditing&&this.model.editSettings.editMode==t.Grid.EditMode.Batch&&this.editCell(e.inArray(_.closest("tr").get(0),this.getRows()),s))}(_.hasClass("e-rowselect")||_.hasClass("e-sortdirect"))&&(_.hasClass("e-spanclicked")?(_.removeClass("e-spanclicked"),_.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!1),_.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!1),this._customPop.hide()):(_.addClass("e-spanclicked"),_.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!0),_.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!0))),this._selectAllCheck=!1,t.gridFeatures.common&&this.expandCollapse(_),_.is(".e-filtericon")&&0!=_.closest(".e-detailrow").length&&i.preventDefault(),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&!_.is(".e-filtericon")&&1!=_.closest(".e-dlgcontainer").length&&this._closeFDialog(),this.model.allowSearching&&null!=this._searchBar&&(_.is(this._searchBar.find(".e-cancel"))?this._searchBar.find("input").val(""):i.target.id==this._id+"_searchbar"?this._searchBar.find(".e-cancel").removeClass("e-hide"):this._searchBar.find(".e-cancel").hasClass("e-hide")||this._searchBar.find(".e-cancel").addClass("e-hide"))}},_checkCellSelectionByRow:function(t,i){for(var s=0;s<this.selectedRowCellIndexes.length&&this.selectedRowCellIndexes[s].rowIndex!=t;s++);return s!=this.selectedRowCellIndexes.length&&-1!=e.inArray(i,this.selectedRowCellIndexes[s].cellIndex)?this.selectedRowCellIndexes[s]:-1},_persistState:function(e){this.model.enablePersistence&&this._isHeightResponsive&&(e._isHeightResponsive=this._isHeightResponsive)},_restoreState:function(e){this.model.enablePersistence&&e._isHeightResponsive&&(this._isHeightResponsive=e._isHeightResponsive)},_destroy:function(){var t,i,s,n,l,o;if(this.element.off(),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").add(this.getContent().find(".e-content,.e-movablecontent")).off("scroll"),(t=e("#"+this._id+"EditForm")).length){for(i=t.find(".e-field"),n=0;n<i.length;n++)(s=e(i[n])).hasClass("e-datetimepicker")?s.ejDateTimePicker("destroy"):s.hasClass("e-datepicker")?s.ejDatePicker("destroy"):s.hasClass("e-dropdownlist")&&s.ejDropDownList("destroy");t.remove()}this._confirmDialog&&this._confirmDialog.ejDialog("destroy"),this.element.find(".e-dropdownlist").ejDropDownList("model.dataSource",[]),this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove(),e("#"+this._id+"_ccTail").remove(),e("#"+this._id+"_ccTailAlt").remove()),this.model.allowFiltering&&"excel"==this.model.filterSettings.filterType&&this._excelFilter.resetExcelFilter(),this.model.allowReordering&&e(".e-columndropindicator").remove(),this.model.allowFiltering&&"menu"==this.model.filterSettings.filterType&&(l=this,e.each(this.model.columns,function(t,i){o=i.type,e("#"+l._id+o+"_ddinput_popup_wrapper").remove(),"string"==o?e("#"+l._id+"_stringDlg").find(".e-autocomplete").ejAutocomplete("destroy"):"date"==o?e("#"+l._id+"_dateDlg").find(".e-datepicker").ejDatePicker("destroy"):"datetime"==o?e("#"+l._id+"_datetimeDlg").find(".e-datetimepicker").ejDateTimePicker("destroy"):"number"==o&&e("#"+l._id+"_numberDlg").find(".e-numerictextbox").ejNumericTextbox("destroy")})),this._$onresize&&e(window).off("resize",this._$onresize),this.element.empty().removeClass("e-grid "+this.model.cssClass),this.element.ejWaitingPopup("destroy"),this.model.contextMenuSettings.enableContextMenu&&(e("#"+this._id+"_Context").ejMenu("destroy"),e("#"+this._id+"_Context").remove())},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.gridFeatures.common&&e.extend(t.Grid.prototype,t.gridFeatures.common),t.gridFeatures.edit&&e.extend(t.Grid.prototype,t.gridFeatures.edit),t.gridFeatures.filter&&e.extend(t.Grid.prototype,t.gridFeatures.filter),t.gridFeatures.group&&e.extend(t.Grid.prototype,t.gridFeatures.group),t.gridFeatures.selection&&e.extend(t.Grid.prototype,t.gridFeatures.selection),t.gridFeatures.sort&&e.extend(t.Grid.prototype,t.gridFeatures.sort),t.gridFeatures.dragAndDrop&&e.extend(t.Grid.prototype,t.gridFeatures.dragAndDrop),t.Grid.Locale=t.Grid.Locale||{},t.Grid.Locale.default=t.Grid.Locale["en-US"]={EmptyRecord:"No records to display",GroupDropArea:"Drag a column header here to group its column",DeleteOperationAlert:"No records selected for delete operation",EditOperationAlert:"No records selected for edit operation",SaveButton:"Save",OkButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",Notactionkeyalert:"This Key-Combination is not available",Keyconfigalerttext:"This Key-Combination has already been assigned to ",GroupCaptionFormat:"{{:headerText}}: {{:key}} - {{:count}} {{if count == 1 }} item {{else}} items {{/if}} ",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",PagerInfo:"{0} of {1} pages ({2} items)",FrozenColumnsViewAlert:"Frozen columns should be in grid view area",FrozenColumnsScrollAlert:"Enable allowScrolling while using frozen Columns",FrozenNotSupportedException:"Frozen Columns and Rows are not supported for Grouping, Row Template, Detail Template, Hierarchy Grid and Batch Editing",Add:"Add",Edit:"Edit",Delete:"Delete",Update:"Update",Cancel:"Cancel",Done:"Done",Columns:"Columns",SelectAll:"(Select All)",PrintGrid:"Print",ExcelExport:"Excel Export",WordExport:"Word Export",PdfExport:"PDF Export",StringMenuOptions:[{text:"StartsWith",value:"StartsWith"},{text:"EndsWith",value:"EndsWith"},{text:"Contains",value:"Contains"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],NumberMenuOptions:[{text:"LessThan",value:"LessThan"},{text:"GreaterThan",value:"GreaterThan"},{text:"LessThanOrEqual",value:"LessThanOrEqual"},{text:"GreaterThanOrEqual",value:"GreaterThanOrEqual"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],PredicateAnd:"AND",PredicateOr:"OR",Filter:"Filter",FilterMenuCaption:"Filter Value",FilterbarTitle:"'s filter bar cell",MatchCase:"Match Case",Clear:"Clear",ResponsiveFilter:"Filter",ResponsiveSorting:"Sort",Search:"Search",DatePickerWaterMark:"Select date",NumericTextBoxWaterMark:"Enter value",EmptyDataSource:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",ForeignKeyAlert:"The updated value should be a valid foreign key value",True:"true",False:"false",UnGroup:"Click here to ungroup",AddRecord:"Add Record",EditRecord:"Edit Record",DeleteRecord:"Delete Record",Save:"Save",Grouping:"Group",Ungrouping:"Ungroup",SortInAscendingOrder:"Sort In Ascending Order",SortInDescendingOrder:"Sort In Descending Order",NextPage:"Next Page",PreviousPage:"Previous Page",FirstPage:"First Page",LastPage:"Last Page",EmptyRowValidationMessage:"Atleast one field must be updated",NoResult:"No Matches Found"},t.Grid.Actions={Paging:"paging",Sorting:"sorting",Filtering:"filtering",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Grouping:"grouping",Ungrouping:"ungrouping",Refresh:"refresh",Reorder:"reorder",Search:"searching",BatchSave:"batchsave",VirtualScroll:"virtualscroll"},t.Grid.SummaryType={Average:"average",Minimum:"minimum",Maximum:"maximum",Count:"count",Sum:"sum",TrueCount:"truecount",FalseCount:"falsecount",Custom:"custom"},t.Grid.EditMode={Normal:"normal",Dialog:"dialog",DialogTemplate:"dialogtemplate",Batch:"batch",ExternalForm:"externalform",ExternalFormTemplate:"externalformtemplate",InlineForm:"inlineform",InlineTemplateForm:"inlineformtemplate"},t.Grid.PrintMode={AllPages:"allpages",CurrentPage:"currentpage"},t.Grid.ResizeMode={NextColumn:"nextcolumn",Control:"control",Normal:"normal"},t.Grid.Rowposition={Top:"top",Bottom:"bottom"},t.Grid.FormPosition={BottomLeft:"bottomleft",TopRight:"topright"},t.Grid.ClipMode={Ellipsis:"ellipsis",Clip:"clip",EllipsisWithTooltip:"ellipsiswithtooltip"},t.Grid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker",DateTimePicker:"datetimepicker"},t.Grid.UnboundType={Edit:"edit",Save:"save",Delete:"delete",Cancel:"cancel"},t.Grid.ToolBarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",Search:"search",PrintGrid:"printGrid",ExcelExport:"excelExport",WordExport:"wordExport",PdfExport:"pdfExport"},t.Grid.FilterType={Menu:"menu",FilterBar:"filterbar",Excel:"excel"},t.Grid.FilterBarMode={Immediate:"immediate",OnEnter:"onenter"},t.Grid.SelectionType={Single:"single",Multiple:"multiple"},t.Grid.ColumnLayout={Auto:"auto",Fixed:"fixed"},t.Grid.GridLines={Both:"both",None:"none",Horizontal:"horizontal",Vertical:"vertical"},t.Grid.VirtualScrollMode={Normal:"normal",Continuous:"continuous"},t.Grid.SelectionMode={Row:"row",Cell:"cell",Column:"column"},t.Grid.WrapMode={Both:"both",Content:"content",Header:"header"},t.Grid.exportAll=function(e,i){t.Grid.prototype.export(e,null,!0,i)},t.SqlDataSourceAdaptor=(new t.UrlAdaptor).extend({init:function(){this.initialRender=!0},processQuery:function(e,i,s){var n,l,o,r,a=t.UrlAdaptor.prototype.processQuery(e,i,s),d=t.parseJSON(a.data),h={};if(d.param)for(n=0;n<d.param.length;n++)l=d.param[n],h[o=Object.keys(l)[0]]=l[o];return h.value=d,r=JSON.stringify({type:"SqlData",args:d}),0==this.initialRender&&__doPostBack("",r),this.initialRender=!1,{data:JSON.stringify(h),result:e.dataSource.json,ejPvtData:a.ejPvtData,count:e.dataSource.json.length}},processResponse:function(e,i,n,l,o){var r,a,d,h=e.ejPvtData||{},c=e.groupDs;if(l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return n._requiresCount?{result:[],count:0}:[];if((r=JSON.parse(e.data))&&"batch"===r.action&&e.added)return o.added=e.added,o;if(h&&h.aggregates&&h.aggregates.length){var u,m=h.aggregates,p={},g={};for(("count"in e&&(p.count=e.count),e.result&&(p.result=e.result),e.aggregate&&(e=e.aggregate),d=0);d<m.length;d++)(u=t.aggregates[m[d].type])&&(g[m[d].field+" - "+m[d].type]=u(e,m[d].field));p.aggregates=g,e=p}if(h&&h.groups&&h.groups.length){for((a=h.groups,p={},"count"in e&&(p.count=e.count),e.aggregates&&(p.aggregates=e.aggregates),e.result&&(e=e.result),d=0);d<a.length;d++)t.isNullOrUndefined(c)||(c=t.group(c,a[d])),e=t.group(e,a[d],h.aggregates,null,c);return p.count!=s?p.result=e:p=e,p}return e}})}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.gridResize=function(t){this.$headerTable=t.getHeaderTable(),this.gridInstance=t,this._colMinWidth=15,this._$visualElement=e(),this._currentCell=-1,this._allowStart=!1,this._oldWidth=null,this._orgX=null,this._orgY=null,this._extra=null,this._expand=!1,this._target=null,this._cellIndex=-1},t.gridFeatures.gridResize.prototype={_mouseHover:function(t){var i,s,n,l,o;if(!this._$visualElement.is(":visible")&&(this._allowStart=!1,e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),i=e(t.target),e(t.target).hasClass("e-filtericon")&&("col-resize"==e(t.target).css("cursor")||"col-resize"==e(t.target).closest("tr").css("cursor"))&&(e(t.target).css("cursor","pointer"),e(t.target).closest("tr").css("cursor","pointer")),i.hasClass("e-headercell"))){var r=t.target,a=r.getBoundingClientRect(),d=0,h=0;(t.type="mousemove")?(d=t.clientX,h=t.clientY):(t.type="touchmove")?(d=evt.originalEvent.changedTouches[0].clientX,h=evt.originalEvent.changedTouches[0].clientY):(t.type="MSPointerMove")&&(d=t.originalEvent.clientX,h=t.originalEvent.clientY),s=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderContent().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left:this.gridInstance.getHeaderTable().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left,(d>=a.left+document.documentElement.scrollLeft+r.offsetWidth-5||d<=a.left+3)&&d<s&&d>=a.left&&h<=a.top+document.documentElement.scrollTop+t.target.offsetHeight?(n=d>a.left+3?e(t.target).find(".e-headercelldiv"):e(t.target).prevAll("th:visible:first").find(".e-headercelldiv"),l=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,o=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-l,(this.gridInstance.model.enableRTL&&d<=o||!this.gridInstance.model.enableRTL&&d>=o)&&((this.gridInstance.model.showStackedHeader||n.length)&&-1==e.inArray(e(n).attr("ej-mappingname"),this.gridInstance._disabledResizingColumns)?(this.gridInstance.model.showStackedHeader&&e(i.parents("thead")).find("tr").css("cursor","col-resize"),this.gridInstance.model.showStackedHeader||i.parent().css("cursor","col-resize"),this._currentCell=e(t.target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(r):this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell").index(r),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):(i.parent().css("cursor","pointer"),this._currentCell=-1))):(this.gridInstance.element.find(".e-columnheader").css("cursor","pointer"),this._currentCell=-1)}},_start:function(t,i){var s,n,l,o,r,a,d=this.gridInstance.getHeaderTable().find(".e-columnheader");if(n=e(this._target).hasClass("e-stackedHeaderCell")?d.find(".e-headercell").not(".e-hide"):d.find(".e-headercell").not(".e-stackedHeaderCell,.e-hide"),-1!=this._currentCell&&this._currentCell<n.length&&(l=n[this._currentCell]),void 0!==l)if(o=l.getBoundingClientRect(),s=this._tableY=o.top+parseInt(-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollTop:document.documentElement.scrollTop),this._allowStart){if(r=this._$visualElement=e(document.createElement("div")),_height=this.gridInstance.element.find(".e-gridcontent").first().height()+this.gridInstance.element.find(".e-gridheader").height(),this.gridInstance.model.showStackedHeader&&this.gridInstance.model.stackedHeaderRows.length>0){var h=this.gridInstance.getHeaderTable().find("tr.e-columnheader"),c=(h.length,e(this._target).parent("tr")[0].rowIndex);for(a=0;a<c;a++)_height-=e(h[a]).height()}r.addClass("e-reSizeColbg").appendTo(this.gridInstance.element).attr("unselectable","on").css("visibility","hidden"),this.gridInstance._resizeTimeOut=setTimeout(function(){r.css({visibility:"visible",height:_height+"px",cursor:"col-resize",left:t,top:s,position:"fixed"})},100),this._oldWidth=l.offsetWidth,this._orgX=t,this._orgY=i,this._extra=t-this._orgX,this._expand=!0}else this._currentCell=-1},_mouseMove:function(e){if(this._expand){var t=0;(e.type="mousemove")?(t=e.clientX,e.clientY):(e.type="touchmove")?(t=evt.originalEvent.changedTouches[0].clientX,evt.originalEvent.changedTouches[0].clientY):(e.type="MSPointerMove")&&(t=e.originalEvent.clientX,e.originalEvent.clientY),-1!=navigator.userAgent.indexOf("WebKit")&&(t=e.pageX,e.pageY),t+=document.documentElement.scrollLeft,e.preventDefault(),this._moveVisual(t)}else this._mouseHover(e)},_getCellIndex:function(t){e(t._target);var i,s,n=t._target,l=n.getBoundingClientRect(),o=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft;return this._orgX<l.left+5+o&&(n=e(n).prevAll(":visible:first")[0]),s=i=n.cellIndex,t.gridInstance.model.groupSettings.groupedColumns.length&&(s=i-t.gridInstance.model.groupSettings.groupedColumns.length),s},_reSize:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v;if(this._initialTableWidth=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderTable().first().parent().width()+this.gridInstance.getHeaderTable().last().parent().width():this.gridInstance.getHeaderTable().parent().width(),this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell=this._currentCell-1:this.gridInstance.model.enableRTL||this._getResizableCell(),n=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?this.gridInstance.getHeaderTable().find("thead"):e(this._target).parents("thead"),-1!=this._currentCell&&this._expand){this._expand=!1;var b=(e(this._target).hasClass("e-stackedHeaderCell")?n.find(".e-headercell:not(.e-detailheadercell)").filter(":visible"):n.find(".e-headercell:not(.e-detailheadercell,.e-stackedHeaderCell)").filter(":visible"))[this._currentCell],C=b.offsetWidth,w=i-this._orgX;if(this.gridInstance.model.enableRTL&&(w=-w),parseInt(w)+parseInt(C)>this._colMinWidth){if(0!=w&&n.css("cursor","default"),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn&&(l=this.gridInstance.getHeaderTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),l=this.gridInstance._$headerCols),r=(o=l.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell)).width()),this._resizeColumnUsingDiff(C,w),a=(s=this.gridInstance.element.find(".e-gridcontent").first()).find("div").hasClass("e-content"),(d=!t.isIOSWebView()&&this.gridInstance.getBrowserDetails())&&"msie"==d.browser&&this.gridInstance.model.allowScrolling&&(h=this.gridInstance.getContentTable().width(),c=this.gridInstance._calculateWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?(this.gridInstance.getHeaderTable().last().width(c-this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()),this.gridInstance.getContentTable().last().width(c-this.gridInstance.getContent().find(".e-frozencontentdiv").width()),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().last().width(c-this.gridInstance.getFooterContent().find(".e-frozenfootertdiv").width())):c>h&&(this.gridInstance.getHeaderTable().width(c),this.gridInstance.getContentTable().width(c),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().width(c)),parseInt(d.version,10)>8&&this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length&&(c>h?(this.gridInstance.getContentTable().width(c),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",2e3/s.find("table").first().width()+"%")):(this.gridInstance.getContentTable().css("width","100%"),this.gridInstance._groupingAction(!0),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",(this.gridInstance.getHeaderTable().find("colgroup").find("col").first().width()/s.find("table").first().width()*100).toFixed(2)+"%"))),this.gridInstance.getHeaderTable().parent().scrollLeft(s.find(".e-content").scrollLeft()-1)),this.gridInstance._colgroupRefresh(),this.gridInstance.model.allowTextWrap&&this.gridInstance.rowHeightRefresh(),this.gridInstance.model.groupSettings.groupedColumns.length&&!this.gridInstance.model.isEdit&&this.gridInstance._recalculateIndentWidth(),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)!=t.Grid.ResizeMode.Normal)if(t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn){u=this.gridInstance.getHeaderTable().find("colgroup").find("col"),m=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),u=this.gridInstance._$headerCols,m=this.gridInstance._$contentCols);var y=this._currentCell+1,S=u.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?y+this.gridInstance.model.groupSettings.groupedColumns.length:y);if((E=S.width()+(r-o.width()))<this._colMinWidth&&(E=this._colMinWidth),S.width(E),this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var x=this.gridInstance.getContentTable().find(".e-recordtable"),T=x.find("colgroup"),k=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(T=T.not(x.find(".e-detailrow").find("colgroup")).get()),_=0;_<T.length;_++)(p=e(T[_]).find("col").filter(this._diaplayFinder)).length>k&&p.splice(0,p.length-k),e(p[y]).width(E)}if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(y>=0&&y<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+w>this.gridInstance.element.find(".e-headercontent").first().width())return;$ContentCol=m.filter(this._diaplayFinder).eq(y)}else $ContentCol=m.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?y+this.gridInstance.model.groupSettings.groupedColumns.length:y);if($ContentCol.width(E),this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings.frozenColumns>0&&e(b).is(":last-child")&&"ejGrid"==this.gridInstance.pluginName){var D=o.width()-r,I=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+D,O=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-D,R=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+D;this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(I),this.gridInstance.getContent().find(".e-frozencontentdiv").width(I),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(O),this.gridInstance.getContent().find(".e-movablecontentdiv").width(O),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",R),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",R)}this.gridInstance.model.scrollSettings.frozenColumns>0&&e(this._target).parent("tr").parents("div:first").hasClass("e-frozenheaderdiv")&&(this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(this._newWidth),this.gridInstance.getContent().find(".e-frozencontentdiv").width(this._newWidth))}else this.gridInstance.model.scrollSettings.frozenColumns||(g=this.gridInstance.getHeaderTable().width(),this.gridInstance.getHeaderTable().css("width",g+parseInt(w)),this.gridInstance.getContentTable().css("width",g+parseInt(w)),this.gridInstance.model.scrollSettings.width+=parseInt(w),this.gridInstance.getContent().width()>this.gridInstance.getContentTable().width()?(this.gridInstance.getContentTable().addClass("e-tableLastCell"),this.gridInstance.getHeaderTable().addClass("e-tableLastCell")):(this.gridInstance.getContentTable().removeClass("e-tableLastCell"),this.gridInstance.getHeaderTable().removeClass("e-tableLastCell")));if("msie"==d.browser||!d||!this.gridInstance.model.allowScrolling||0!=this.gridInstance.model.scrollSettings.frozenColumns||(this.gridInstance.getHeaderTable().width("100%"),this.gridInstance.getContentTable().width("100%"),((f=this.gridInstance._calculateWidth())<=this.gridInstance.getContentTable().width()||this.gridInstance.getHeaderTable().width()>this.gridInstance.getContentTable().width())&&(this.gridInstance.getHeaderTable().width(f),this.gridInstance.getContentTable().width(f))),this.gridInstance.model.allowResizing&&"default"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")){var A=this._currentCell,M=e(this._target),F=[],P=[],E=C+w,L={};if(this.gridInstance.model.showStackedHeader&&M.hasClass("e-stackedHeaderCell")){var N=M.parent(".e-stackedHeaderRow").index(),j=M.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,z=this.gridInstance.model.stackedHeaderRows[N].stackedHeaderColumns[j].column,V=z;for(z instanceof Array||(V=z.split(",")),_=0;_<V.length;_++)v=this.gridInstance.getColumnIndexByField(V[_]),F.push(v),P.push(this.gridInstance.model.columns[v]);L={columnIndex:F,column:P,oldWidth:C,newWidth:E}}else L={columnIndex:A,column:this.gridInstance.model.columns[A],oldWidth:C,newWidth:E};this.gridInstance._trigger("resized",L)}this.gridInstance.model.allowScrolling&&(this.gridInstance._scrollObject.refresh(this.gridInstance.model.scrollSettings.frozenColumns>0),!a&&s.find("div").hasClass("e-content")&&this.gridInstance.refreshScrollerEvent(),this.gridInstance._isHscrollcss())}}this._target=null,this._$visualElement.remove(),this._expand=!1,this._currentCell=-1,this._allowStart=!1},_getFrozenResizeWidth:function(){for(var e=this.gridInstance.getHeaderTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),t=0,i=0;i<e.length;i++)"none"!=e.eq(i).css("display")&&(t+=parseInt(e[i].style.width.replace("px","")));return t},_diaplayFinder:function(){return"none"!=e(this).css("display")},_resizeColumnUsingDiff:function(i,s){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,C;this._currntCe=this._currentCell,l=this.gridInstance.getHeaderTable().find("colgroup").find("col"),o=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),l=this.gridInstance._$headerCols,o=this.gridInstance._$contentCols);var w,y=l.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),S=(l.slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),y[0].style.width),x=-1!=S.indexOf("%"),T=!S||x?e(this._target).outerWidth():S;if(n=s/=x?1:i/parseInt(T),(r=this._newWidth=parseInt(s)+parseInt(T))>0&&0!=s){if(r<this._colMinWidth&&(r=this._colMinWidth),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn&&(a=y.next(),(d=!(!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1))&&(a=l.eq(this.gridInstance.model.scrollSettings.frozenColumns)),(d||!y.is(":last-child"))&&a.width()+(y.width()-r)<=this._colMinWidth&&(r=y.width()+(a.width()-this._colMinWidth))),s=r-i,this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(this._currentCell>=0&&this._currentCell<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+s>this.gridInstance.element.find(".e-headercontent").first().width())return;w=o.filter(this._diaplayFinder).eq(this._currentCell)}else w=o.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell);if(this.gridInstance.model.showSummary&&(this._$footerCols=this.gridInstance.getFooterTable().find("colgroup").find("col"),O=this.gridInstance.model.columns.length,this._$footerCols.length>O&&this._$footerCols.splice(0,this._$footerCols.length-O),$footerCols=this._$footerCols,$footerCols.filter(this._diaplayFinder).eq(this._currentCell).outerWidth(r)),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")?this._resizeStackedHeaderColumn(e(this._target).parent("tr"),n,this._currntCe):y.outerWidth(r),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")){if(this.gridInstance.model.groupSettings.groupedColumns.length)for(D=(k=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),m=0;m<this._changedcell.length;m++)for(I=this._changedcell[m],h=0;h<D.length;h++)c=e(D[h]).children().filter(this._diaplayFinder),(b=parseInt(n)+parseInt(c[I].style.width))<this._colMinWidth&&(b=this._colMinWidth),e(c[I]).width(b);for(this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder).length,m=0;m<this._changedcell.length;m++)u=this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder)[this._changedcell[m]],(b=parseInt(n)+parseInt(u.style.width))<this._colMinWidth&&(b=this._colMinWidth),e(u).outerWidth(b),this.gridInstance.model.isEdit&&this.gridInstance.model.allowGrouping&&0==this.gridInstance.model.groupSettings.groupedColumns.length&&($sEditCol=this.gridInstance.getContentTable().find(".gridform").find("colgroup col").filter(this._diaplayFinder)[this._changedcell[m]],e($sEditCol).outerWidth(b))}else{if(this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var k,D=(k=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),I=this._currentCell,O=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(D=D.not(k.find(".e-detailrow").find("colgroup")).get()),m=0;m<D.length;m++)(p=e(D[m]).find("col").filter(this._diaplayFinder)).length>O&&p.splice(0,p.length-O),e(p[I]).width(r)}w.outerWidth(r),this.gridInstance.model.isEdit&&(f=(g=this.gridInstance.getContentTable().find(".e-editedrow,.e-addedrow")).find("table").find("colgroup col"),_=g.hasClass("e-addedrow")&&this.gridInstance.model.groupSettings.groupedColumns.length?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length-1:this._currentCell,f.filter(this._diaplayFinder).eq(_).outerWidth(r))}if(this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns&&"nextcolumn"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&"ejGrid"==this.gridInstance.pluginName){for(v=this.gridInstance.getContentTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings.frozenColumns),b=0,m=0;m<v.length;m++)b+="none"==v[m].style.display?0:parseInt(v[m].style.width.replace("px",""));this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(b),C=this.gridInstance.model.enableRTL?"margin-right":"margin-left",this.gridInstance.getContent().find(".e-frozencontentdiv").width(b).next().css(C,b+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(b).next().css(C,b+"px"),this.gridInstance.model.showSummary&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(b)}this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor","default")}},_resizeStackedHeaderColumn:function(t,i,s){var n,l,o,r,a;this._changedcell=[];var d=0,h=0,c=this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell")[s],u=e(c).attr("colspan"),m=e(c).parent("tr"),p=(m.next(),c.cellIndex);for(this.gridInstance.model.groupSettings.showGroupedColumn&&(d+=h=this.gridInstance.model.groupSettings.groupedColumns.length);p>h;)p--,n=e(m).children("th").not(".e-detailheadercell")[p],d+=parseInt(e(n).attr("colspan"));for(this._currentCell=d,l=d+parseInt(u),o=d;o<l;o++)r=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder)[o],this._changedcell.push(o-h),(a=parseInt(i)+parseInt(r.style.width))<this._colMinWidth&&(a=this._colMinWidth),e(r).outerWidth(a)},_triggerResizeEvents:function(t,i){var s,n,l,o,r,a=this.gridInstance.getHeaderTable().find(".e-columnheader"),d=a.find(".e-headercell").filter(":visible"),h=this._cellIndex,c=e(this._target),u=[];if(col=[],"resizeStart"==t&&(this._orgX=i,h=this._cellIndex=this._getCellIndex(this,i)),n=(s=d[this._currentCell]).offsetWidth,this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")){var m=c.parent(".e-stackedHeaderRow").index(),p=c.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,g=this.gridInstance.model.stackedHeaderRows[m].stackedHeaderColumns[p].column,f=g;for(g instanceof Array||(f=g.split(",")),l=0;l<f.length;l++)o=this.gridInstance.getColumnIndexByField(f[l]),u.push(o),col.push(this.gridInstance.model.columns[o])}if("resizeStart"==t)return r={},r=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:c,oldWidth:n}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:n},this.gridInstance._trigger("resizeStart",r);a.find(".e-headercell").not(".e-detailheadercell").filter(":visible");var _=i-this._orgX,v=n+_;return this.gridInstance._colgroupRefresh(),r={},r=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:e(s),oldWidth:n,newWidth:v,extra:_}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:n,newWidth:v,extra:_},this.gridInstance._trigger("resizeEnd",r)},_mouseUp:function(e){if(this.gridInstance._resizeTimeOut&&(clearTimeout(this.gridInstance._resizeTimeOut),this.gridInstance._resizeTimeOut=0),this._expand){var i=e.clientX,s=e.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(i=e.pageX,s=e.pageY),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&this._triggerResizeEvents("resizeEnd",i))return void this.gridInstance.element.find(".e-reSizeColbg").remove();i+=document.documentElement.scrollLeft,this._reSize(i,s),!t.isNullOrUndefined(this._currntCe)&&this._currntCe>=0&&(this.gridInstance.model.columns[this._currntCe].width=this.gridInstance.columnsWidthCollection[this._currntCe])}},_getResizableCell:function(){var t,i,s;if(t=(e(this._target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderTable().find(".e-columnheader"):this.gridInstance.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow")).find(".e-headercell").not(".e-hide,.e-detailheadercell"),i=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft,!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1)for(s=0;s<t.length;s++){if(point=t[s].getBoundingClientRect(),point.left+i+5>this._orgX&&e(t[s]).height()+point.top>=this._orgY)return void(this._currentCell=s-1);if(s==t.length-1||this.gridInstance.model.showStackedHeader&&e(this._target).get(0)===t[s])return void(this._currentCell=s)}},_moveVisual:function(e){var t=this.gridInstance.getHeaderContent().find("div").first()[0].getBoundingClientRect();t.left+document.documentElement.scrollLeft+t.width<e||e<t.left+document.documentElement.scrollLeft?this._$visualElement.remove():-1!=this._currentCell&&this._$visualElement.css({left:e,top:this._tableY})},_mouseDown:function(t){var i,s;return!this._allowStart||"col-resize"!=e(t.target).closest("tr").css("cursor")||(this._target=t.target,i=t.clientX,s=t.clientY,-1!=navigator.userAgent.indexOf("WebKit")&&(i=t.pageX,s=t.pageY-document.body.scrollTop),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&(e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),this._target=t.target,this._triggerResizeEvents("resizeStart",i))?void 0:(i+=document.documentElement.scrollLeft,2!=t.button&&this._start(i,s),!1))},_columnResizeToFit:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g=this.gridInstance.getHeaderTable().find(".e-columnheader").filter(function(){return"col-resize"==e(this).css("cursor")});if(this.gridInstance.model.allowResizeToFit&&g.length){e(i.target).is(".e-headercelldiv")&&(i.target=i.target.parentNode);var f,_=e(i.target),v=0,b=0;if(f=_.hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"):this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-stackedHeaderCell,.e-detailheadercell"),this._target=_,_.hasClass("e-headercell")){var C=i.target,w=e.inArray(C,f),y=w;this._orgX=i.pageX,this.gridInstance.model.enableRTL?this._currentCell=w:this._getResizableCell(),w!=this._currentCell&&(w=y=this._currentCell,C=i.target.previousSibling);var S=f.filter(":visible")[y],x=[],T=[],k=[];if(b=this.gridInstance.model.groupSettings.groupedColumns.length,t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)&&t.isNullOrUndefined(this.gridInstance.model.childGrid)||(b+=1),e(C).parent("tr").hasClass("e-stackedHeaderRow")){for(currentSpan=e(S).attr("colspan"),tr=e(S).parent("tr"),tHeadIndex=S.cellIndex,tr.next();tHeadIndex>b;)tHeadIndex--,s=e(tr).children("th")[tHeadIndex],v+=parseInt(e(s).attr("colspan"));n=v+parseInt(currentSpan)}else v=y,n=y+1;var D=0,I=0,O=0,R=[],A=[];if(-1!=v)for(o={columnIndex:v+(l=f.slice(0,v+1).filter(".e-hide").length),column:this.gridInstance.model.columns[v+l],target:_,oldWidth:r},this.gridInstance._trigger("resizeStart",o),p=v;p<n;p++){if(l=f.slice(0,p+1).filter(".e-hide").length,O=this._getContentWidth(p+l),$cellDiv=this.gridInstance.getHeaderTable().find(".e-headercell:not(.e-hide, .e-stackedHeaderCell)").children(".e-headercelldiv").eq(p),I=this._getHeaderContentWidth($cellDiv),D=I>O?I:O,D+=parseInt($cellDiv.css("padding-left"),10),r=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder).eq(p+b).width(),D=r>D||this._colMinWidth<D?D:this._colMinWidth,a=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&a.splice(0,1),a.eq(p+b).width(D),this.gridInstance.model.groupSettings.groupedColumns.length&&(d=this.gridInstance.getContentTable().find(".e-recordtable").find("colgroup"),h=this,e.each(d,function(t,i){e(i).find("col").filter(h._diaplayFinder).eq(p).width(D)})),c=this.gridInstance.getContentTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&c.splice(0,1),c.eq(p+b).width(D),this.gridInstance.model.isEdit)for(this.gridInstance.getContentTable().find(".e-editedrow").find("col"),u=this.gridInstance.element.find(".gridform"),j=0;j<u.length;j++)e(u[j]).find("col").eq(p+b).width(D);R.push(this.gridInstance.model.columns[p+l]),A.push(Math.abs(D-r)),x.push(p+l),T.push(D),k.push(r),(this.gridInstance.model.scrollSettings.frozenColumns>0||this.gridInstance.model.groupSettings.groupedColumns.length&&this.gridInstance.model.isEdit)&&(m=p+l,this.gridInstance.columnsWidthCollection[m]=D,this.gridInstance.setWidthToColumns(),this.gridInstance.model.scrollSettings.frozenColumns<=m+1&&(this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",D),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",D)))}for(this.gridInstance._colgroupRefresh(),this.gridInstance._recalculateIndentWidth(),o={columnIndex:x,column:R,target:S,oldWidth:k,newWidth:T,extra:A},this.gridInstance._trigger("resizeEnd",o),p=0;p<x.length;p++)this.gridInstance.columnsWidthCollection[x[p]]=T[p],this.gridInstance.model.columns[x[p]].width=T[p];o={columnIndex:x,column:R,target:S,oldWidth:k,newWidth:T,extra:A},this.gridInstance._trigger("resized",o),this.gridInstance.model.summaryRows.length>0&&this.gridInstance._summaryColRrefresh(),this.gridInstance._findColumnsWidth()}}},_getContentWidth:function(i){var s,n,l=0,o=t.buildTag("span",{},{}),r=this.gridInstance;return t.isNullOrUndefined(r._gridRows)||(n=r._gridRows,this.gridInstance.model.scrollSettings.frozenColumns&&i>=this.gridInstance.model.scrollSettings.frozenColumns&&(n=n[1],i-=this.gridInstance.model.scrollSettings.frozenColumns),e.each(n,function(t,n){if(e(n).is(".e-row,.e-alt_row")&&!e(n).is(".e-editedrow")){var a=e(n).find("td.e-rowcell").eq(i),d=e(a).html();r.model.columns[i].commands?o.html(e(d).children()):a.hasClass("e-validError")?o.html(e(d).attr("value")):o.html(d),e(a).html(o),(s=a.find("span:first").width())>l&&(l=s),e(a).html(d)}})),r._refreshUnboundTemplate(this.gridInstance.getContentTable()),l},_getHeaderContentWidth:function(e){var i=0,s=t.buildTag("span",{},{}),n=e.html();return s.html(n),e.html(s),i=e.find("span:first").width(),(this.gridInstance.model.allowFiltering&&"menu"==this.gridInstance.model.filterSettings.filterType||"excel"==this.gridInstance.model.filterSettings.filterType)&&(i=i+e.parent().find(".e-filtericon").width()+10),e.html(n),i}}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.pager.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget("ejPager","ej.Pager",{_rootCSS:"e-pager",validTags:["div"],defaults:{pageSize:12,pageCount:10,currentPage:1,enableExternalMessage:!1,externalMessage:"",enableQueryString:!1,locale:"en-US",masterObject:null,click:null,enableRTL:!1,totalRecordsCount:null,totalPages:null,customText:"",showPageInfo:!0},_init:function(){this._initPrivateProperties(),this.model.enableQueryString&&this._queryStringValue(),this.renderPager(),this._wireEvents()},_initPrivateProperties:function(){this._links=[],this._$prev=null,this._$first=null,this._$PP=null,this._$NP=null,this._lastNP=!1,this._lastpageCount=null,this._$last=null,this._$next=null,this._prevPageNo=null,this.localizedLabels=this._getLocalizedLabels()},_wireEvents:function(){this.model.click!=i&&this._on(this.element,"click",this._pagerClickHandler)},renderPager:function(){var e=t.buildTag("div.e-pagercontainer","",{},{unselectable:"on"});this._renderPagerContainer(e),this.element[0].appendChild(e[0]),this._pageInfo(),this.model.enableExternalMessage&&this._renderPagerMessage()},_queryStringValue:function(){var e=new RegExp("[\\?&]page=([^&#]*)").exec(window.location.href);this.model.currentPage=e?parseInt(e[1]||1):1},_renderPagerMessage:function(){var e=t.buildTag("div.e-pagermessage");this.model.externalMessage.toString().length?e.html(this.model.externalMessage):e.hide(),this.element.append(e)},_renderPagerContainer:function(e){this._renderBackwardButton(e),this._renderpreviousPager(e),this._renderNumericItem(e),this._renderForwardPager(e),this._renderForwardButton(e)},_renderMsgBar:function(){var e=t.buildTag("span.e-pagermsg",String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0));this._parentMsgBar.appendChild(e[0]),this._parentMsgBar.style.textAlign=t.TextAlign.Right},_renderpreviousPager:function(e){this._$PP=t.buildTag("a.e-link e-nextprevitemdisabled e-disable e-spacing e-PP","...",{},{title:this.localizedLabels.previousPagerTooltip,role:"link"}),e.append(this._$PP)},_renderForwardPager:function(e){this._$NP=t.buildTag("a.e-link e-NP e-numericitem e-spacing e-default","...",{},{title:this.localizedLabels.nextPagerTooltip,role:"link"}),e.append(this._$NP)},_renderBackwardButton:function(e){this._$first=t.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.firstPageTooltip}),this._$prev=t.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.previousPageTooltip}),e.append(this._$first),e.append(this._$prev)},_renderNumericItem:function(e){var i=t.buildTag("div.e-numericcontainer e-default","",{},{unselectable:"on"});this._renderNumericLinks(i,this.model.pageCount),e.append(i)},_renderNumericLinks:function(e){var i,s;for(e.empty(),i=1;i<=this.model.pageCount;i++)s=t.buildTag("a.e-link",this.model.customText+i,{},{role:"link"}).addClass("e-numericitem e-spacing e-default").data("index",i),i==this.model.currentPage&&s.removeClass("e-default").addClass("e-currentitem e-active"),e.append(s);this._links=e.children()},_renderForwardButton:function(e){this._$next=t.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{unselectable:"on",title:this.localizedLabels.nextPageTooltip}),this._$last=t.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{unselectable:"on",title:this.localizedLabels.lastPageTooltip}),e.append(this._$next),e.append(this._$last)},_applyCss:function(){this.model.currentPage>1?(this._$prev.removeClass("e-prevpagedisabled").removeClass("e-disable").addClass("e-prevpage e-default"),this._$first.removeClass("e-firstpagedisabled").removeClass("e-disable").addClass("e-firstpage e-default")):(this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default")),this.model.currentPage>this.model.pageCount?this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastNP=!!(this._links.length&&parseInt(this._links[0].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>this.model.totalPages),0==this._lastNP?this._$NP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastpageCount=this.model.totalPages%this.model.pageCount,0==this._lastpageCount&&(this._lastpageCount=this.model.pageCount),this.model.currentPage>this.model.totalPages-this._LastpageCount&&(this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this.model.currentPage==this.model.totalPages||0==this.model.totalRecordsCount?(this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")):(this._$last.addClass("e-lastpage e-default").removeClass("e-lastpagedisabled").removeClass("e-disable"),this._$next.addClass("e-nextpage e-default").removeClass("e-nextpagedisabled").removeClass("e-disable")),this._links.length&&(this._links.removeClass("e-currentitem").removeClass("e-active").addClass("e-default"),e(this._links[(this.model.currentPage-1)%this.model.pageCount]).removeClass("e-default").addClass("e-currentitem e-active"),e(this._links[(this._prevPageNo-1)%this.model.pageCount]).removeClass("e-default").addClass("e-numericitem")),this.model.pageSize>=this.model.totalRecordsCount/this.model.pageCount&&null!=this._$PP&&0!=this._$PP.length&&(this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"))},_SetTotalPages:function(){this.model.totalPages=this.model.totalRecordsCount%this.model.pageSize==0?this.model.totalRecordsCount/this.model.pageSize:parseInt(this.model.totalRecordsCount/this.model.pageSize,10)+1},_refreshNumericItem:function(){var t,i,s;if(0!=this._links.length&&null!=this._links)for(this.model.currentPage=1==this.model.totalPages?1:this.model.currentPage,this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages),t=parseInt(this.model.currentPage/this.model.pageCount,10),this.model.currentPage%this.model.pageCount==0&&t>0&&(t-=1),this._links.css("display","none"),i=0;i<this.model.pageCount;i++)(s=t*this.model.pageCount+1+i)<=this.model.totalPages&&(this._links[i].style.display="",e(this._links[i]).data("index",s),e(this._links[i]).html(this.model.customText+s))},_refreshPagerInfo:function(){0==this.model.totalRecordsCount&&(this.model.currentPage=0),this.element.find(".e-pagermsg").text(String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0))},_refreshExternalMessage:function(){this.model.externalMessage.toString().length?this.element.find(".e-pagermessage").empty().html(this.model.externalMessage).show():this.element.find(".e-pagermessage").hide()},refreshPager:function(){this._SetTotalPages(),this._refreshNumericItem(),this._refreshPagerInfo(),this._applyCss(),this.model.enableExternalMessage&&this._refreshExternalMessage(),this.model.enableRTL?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_kDownHandler:function(e){var t;if(t=e.keyCode?e.keyCode:e.which?e.which:e.charCode,e.target=null,this.model.masterObject.checkKey("firstPage",t,e))e.target=this._$first;else if(this.model.masterObject.checkKey("previousPager",t,e))e.target=this._$PP;else if(this.model.masterObject.checkKey("previousPage",t,e))e.target=this._$prev;else if(this.model.masterObject.checkKey("lastPage",t,e))e.target=this._$last;else if(this.model.masterObject.checkKey("nextPager",t,e))e.target=this._$NP;else{if(!this.model.masterObject.checkKey("nextPage",t,e))return!1;e.target=this._$next}this._pagerClickHandler(e)},_pageInfo:function(){this.model.showPageInfo&&!this._parentMsgBar?(this._parentMsgBar=document.createElement("div"),this._parentMsgBar.className+="e-parentmsgbar",this._renderMsgBar(),this.element[0].appendChild(this._parentMsgBar),this.element[0].className+=this.model.enableRTL?" e-pager e-rtl":" e-pager"):(this._parentMsgBar&&this._parentMsgBar.remove(),this._parentMsgbar=null)},_pagerClickHandler:function(t){this._prevPageNo=this.model.currentPage;var s=e(t.target);return-1!=e.inArray(t.target,this._links)?this.model.currentPage=parseInt(e(t.target).data("index"),10):s.hasClass("e-nextpage")&&1!=s.hasClass("e-nextpagedisabled")?this.model.currentPage%this.model.pageCount==0?(this.model.currentPage++,this._links!=i&&0!=this._links.length&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML,10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0)):this.model.currentPage++:s.hasClass("e-prevpage")&&1!=s.hasClass("e-prevpagedisabled")?(this.model.currentPage%this.model.pageCount==1&&(this._lastNP=!1),this.model.currentPage--,this.model.currentPage<0&&(this.model.currentPage=0)):s.hasClass("e-lastpage")&&1!=s.hasClass("e-lastpagedisabled")?(this._LastpageCount=this.model.totalPages%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this.model.currentPage=this.model.totalPages,this._lastNP=!0):s.hasClass("e-firstpage")&&1!=s.hasClass("e-firstpagedisabled")?(this.model.currentPage=1,this._lastNP=!1):s.hasClass("e-NP")&&1!=s.hasClass("e-nextprevitemdisabled")?(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0,this._LastpageCount=this.model.totalRecordsCount-this.model.pageSize<this.model.pageSize?this.model.totalRecordsCount-this.model.pageSize:this.model.totalRecordsCount/this.model.pageSize%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this._links!=i&&(this.model.currentPage=parseInt(e(this._links[this.model.pageCount-1]).data("index"),10)+1))):s.hasClass("e-PP")&&1!=s.hasClass("e-nextprevitemdisabled")&&(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)-this.model.pageCount),this._lastNP=!1),this.goToPage(this.model.currentPage,t),!1},goToPage:function(e,t){e!=this.model.currentPage&&(this._prevPageNo=this.model.currentPage),this._prevPageNo!==e&&e>=1&&e<=this.model.totalPages?(this.model.currentPage=e,this.model.enableQueryString&&this._updateQueryString(this.model.currentPage),this._trigger("click",{currentPage:e,event:t})):this._trigger("click",{currentPage:e,event:t})},_updateQueryString:function(e){var t=this._getUpdatedURL(window.location.href,"page",e);history.pushState?window.history.pushState({path:t},"",t):window.location.href=t},_getUpdatedURL:function(e,t,i){var s,n,l=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");return e.match(l)?e.replace(l,"$1"+t+"="+i+"$2"):(s="",n=-1!==e.indexOf("?")?"&":"?",-1!==e.indexOf("#")&&(s=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+n+t+"="+i+s)},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_setFirst:!0,_setModel:function(e){for(var t in e)switch(t){case"pageCount":this._renderNumericLinks(this.element.find(".e-numericcontainer"));break;case"enableExternalMessage":this._renderPagerMessage();break;case"showPageInfo":this._pageInfo()}this.refreshPager()},_destroy:function(){this.element.empty().removeClass("e-pager")}}),t.Pager.Locale=t.Pager.Locale||{},t.Pager.Locale.default=t.Pager.Locale["en-US"]={pagerInfo:"{0} of {1} pages ({2} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.waitingpopup.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,target:null,appendTo:null,showImage:!0,htmlAttributes:{},cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},_isTargetVisible:function(){return"none"!=this.element.css("display")},show:function(){this._isTargetVisible()&&(this._refreshPanel(),this.maindiv.css("display","block"),this.model.showOnInit=!0)},hide:function(){this.maindiv.css("display","none"),this.model.showOnInit=!1},refresh:function(){this._isTargetVisible()&&this._refreshPanel()},_setText:function(e){e?this.popupText?this.popupText.html(e):(this._generateTextTag(e),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(e){e?(this.popupImage=t.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var i=this.model.template;"string"==typeof i&&(i=e(i)),this.templateObj="object"==typeof i&&"function"==typeof i.css?i:t.buildTag("div","",{"text-align":"center"}).append(i),this.templateObj.css({visibility:"visible",display:"block"}),this.maindiv.append(this.templateObj)},_setTheme:function(e){this.maindiv.removeClass(this.model.cssClass).addClass(e)},_init:function(){this._initialize(),this._render(),this._wireEvents()},_wireEvents:function(){e(window).on("resize",e.proxy(this._resizeHandler,this))},_unwireEvents:function(){e(window).off("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this.refresh()},_setModel:function(i){for(var s in i)switch(s){case"text":this._setText(i[s]);break;case"cssClass":this._setTheme(i[s]);break;case"htmlAttributes ":this._addAttr(i[s]);break;case"showOnInit":this._setVisibility(i[s]);break;case"showImage":this._showImage(i[s]),this._setContentPosition();break;case"target":this.model.target=i[s],this._setTarget(),this.refresh();break;case"appendTo":this.model.appendTo=i[s],this._setTarget(),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this.refresh();break;case"template":this.maindiv.empty(),i[s]?(this.model.template=i[s],this._setTemplate()):(this.model.template=i[s]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),this._setContentPosition()}},_setTarget:function(){this.targetElement="document"==this.model.target?e(document):"window"==this.model.target?e(window):this.model.target?e(this.model.target):this.element},_destroy:function(){this.maindiv.remove(),this._unwireEvents()},_initialize:function(){this.maindiv=null,this.popupText=null,this.popupImage=null,this.templateObj=null,this.targetElement=null},_render:function(){this._setTarget();var i=e("#"+this.element[0].id+"_WaitingPopup").get(0);i&&e(i).remove(),this.maindiv=t.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup"),this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this._setVisibility(this.model.showOnInit),this._addAttr(this.model.htmlAttributes)},_refreshPanel:function(){this.maindiv.width(this.targetElement.outerWidth()),this.maindiv.height(this.targetElement.outerHeight()),this._setPanelPosition(),this._setContentPosition()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.maindiv.addClass(e):i.maindiv.attr(t,e)})},_setPanelPosition:function(){var i=t.util.getOffset(this.targetElement);null!=this.model.appendTo&&e(this.model.appendTo).length>0&&("relative"!=this.targetElement.css("position")&&"absolute"!=this.targetElement.css("position")||this.targetElement[0]!==e(this.model.appendTo)[0]?(i.left-=this.targetElement.offsetParent().offset().left,i.top-=this.targetElement.offsetParent().offset().top):i={left:0,top:0}),this.maindiv.css({position:"absolute",left:Math.ceil(i.left)+"px",top:Math.ceil(i.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){if(null==this.model.template){var e,t=0,i=0,s=null;e=this.targetElement.outerHeight(),this.popupText&&(t=this.popupText.outerHeight()),this.popupImage&&(i=this.popupImage.outerHeight()),this.popupImage&&(s=Math.ceil((e-(i+t))/2),this.popupImage.css("top",s+"px")),this.popupText&&(s||(s=Math.ceil((e-t)/2)),this.popupText.css("top",s+"px"))}else this.templateObj.css({position:"relative",left:Math.ceil((this.targetElement.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.targetElement.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(e){this.popupText=t.buildTag("div.e-text",e),this.maindiv.append(this.popupText)},_setVisibility:function(e){e&&this._isTargetVisible()?this.show():this.hide()},_maxZindex:function(){return t.util.getZindexPartial(this.element)}})}),
/*!
*  filename: ej.radiobutton.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejRadioButton","ej.RadioButton",{_rootCSS:"e-radiobtn",element:null,_requiresID:!0,model:null,validTags:["input"],_addToPersist:["checked"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,checked:!1,cssClass:"",text:"",enableRTL:!1,htmlAttributes:{},enablePersistence:!1,idPrefix:"ej",size:"small",enabled:!0,validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._cloneElement=this.element.clone(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._setValue(),this._renderControl(),this.isChecked&&this._checkedHandler(),t.isNullOrUndefined(this.radbtn.attr("disabled"))||(this.model.enabled=!1),this._setEnabled(this.model.enabled),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._wireEvents(),this.initialRender=!1},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.div.addClass(e):"name"==t||"required"==t?i.radbtn.attr(t,e):"disabled"==t&&"disabled"==e?i.disable():"checked"==t&&"checked"==e?i._checkedChange(!0,!0):i.div.attr(t,e)})},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.element.find("input").rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.find("input").attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_setModel:function(e){for(var t in e)switch(t){case"cssClass":this._changeSkin(e[t]);break;case"enableRTL":this.model.text?e[t]?this.textWrapDiv.addClass("e-rtl"):this.textWrapDiv.removeClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").hasClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl"):e[t]?this.element.closest(".e-radiobtn-wrap").addClass("e-rtl"):this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl");break;case"text":this._setText(e[t]);break;case"size":this._setSize(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.element.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"checked":"boolean"==typeof this.checked()?(this.model.checked=e[t],this._checkedChange(this.model.checked)):null!=e[t]()&&e[t]()==this.element.find(".e-input").attr("value")&&this._checkedChange(e[t]());break;case"enabled":this._setEnabled(e[t]);break;case"id":this._setIdAttr(e[t]);break;case"name":this.radbtn.attr("name",e[t]);break;case"value":this.radbtn.attr("value",e[t]);break;case"htmlAttributes":this._addAttr(e[t])}},_destroy:function(){this.radbtn.remove(),this._cloneElement.removeClass("e-js e-input e-radiobtn"),this._cloneElement.insertBefore(this.element),this.element.remove()},_changeSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass).addClass(e),this.textWrapDiv.removeClass(this.model.cssClass).addClass(e))},_setValue:function(){t.isNullOrUndefined(this.element.attr("type"))&&this.element.attr("type","radio"),t.isNullOrUndefined(this.element.attr("id"))||(this.model.id=this.element.attr("id")),t.isNullOrUndefined(this.element.attr("name"))||(this.model.name=this.element.attr("name")),t.isNullOrUndefined(this.element.attr("value"))||(this.model.value=this.element.attr("value")),this.element.attr({id:this.model.id,name:this.model.name,value:this.model.value}),"boolean"==typeof this.checked()?this.model.checked=this.isChecked=this.model.checked||"checked"==this.element.attr("checked"):this.isChecked=this.element.attr("value")==this.checked(),this.isChecked&&this.element.attr("checked","checked"),this._hiddenValue=this.element.attr("value"),this._isAngularbind=!1},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),e("#"+this.model.idPrefix+this.model.id).attr("id",this.model.idPrefix+t),this.radbtn.attr("id",t)},_setSize:function(e){e==t.RadioButtonSize.Medium?this.span.removeClass("e-radsmaller").addClass("e-radmedium"):this.span.removeClass("e-radmedium").addClass("e-radsmaller")},_setEnabled:function(e){e?this.enable():this.disable()},_renderControl:function(){this.initialRender=!0;var i=t.browserInfo();this.div="msie"==i.name&&"8.0"==i.version?e('<div class="e-radiobtn-wrap e-widget e-rad-outer" ></div>'):e('<div class="e-radiobtn-wrap e-widget" ></div>'),this.div.attr({id:this.model.idPrefix+this.model.id,role:"radio",tabindex:0,"aria-checked":!1}),this.span=e("<span></span>"),this.span.addClass("e-spanicon"),this._setSize(this.model.size),this.spanImg=e('<span class="e-rad-icon e-icon e-rad-select"></span>',"",{},{role:"presentation"}),this.element.addClass("e-input"),this.div.addClass(this.model.cssClass),this.span.append(this.spanImg),this.div.insertBefore(this.element),this.div.append(this.element),this.div.append(this.span),this._setTextWrapper(this.model.text),this.radbtn=this.element,this.element=this.div},_setTextWrapper:function(i){""!=i?(this.textWrapDiv=t.buildTag("div.e-radiobtn-wrap "+this.model.cssClass+"#"+this.model.idPrefix+this.model.id+"_wrapper"),this.div.wrapAll(this.textWrapDiv),this.txtSpan=t.buildTag("div.e-text",i),this.textWrapDiv=e("#"+this.model.idPrefix+this.model.id+"_wrapper"),this.textWrapDiv.append(this.txtSpan),this.model.enableRTL&&this.textWrapDiv.addClass("e-rtl")):this.model.enableRTL&&this.element.closest(".e-radiobtn-wrap").addClass("e-rtl")},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_wireEvents:function(){this._on(this.element,"click",this._checkedHandler),this._on(this.element,"focus",this._focusIn),this._on(this.element,"focusout",this._focusOut)},_focusIn:function(){e(this.element).addClass("e-focus"),e(this.element).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.element).removeClass("e-focus"),e(this.element).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){(32==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(){this.element.hasClass("e-disable")||(this.isChecked="boolean"==typeof this.checked()?"checked"==this.radbtn.attr("checked"):this.checked()==this.radbtn.attr("value"),e(this.element).find(".e-rad-icon").hasClass("e-circle_01")||this._changeEvent(!0))},_checkedChange:function(e,t){this.isChecked=e,this._changeEvent(t)},_changeEvent:function(t){var i={isChecked:this.isChecked,isInteraction:!!t};if(!this.initialRender&&1==this._trigger("beforeChange",i))return!1;if(e(this.element).find(".e-rad-icon").hasClass("e-circle_01"))this.spanImg.removeClass("e-circle_01").addClass("e-rad-select"),this.span.removeClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!1}),this.radbtn.removeAttr("checked");else{var s=this.element.find(".e-input").attr("name"),n=e('input.e-radiobtn[name="'+s+'"]:radio'),l=this.element.find(".e-input"),o=e(l).data("ejRadioButton");i.isChecked&&(this.spanImg.addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this.radbtn.attr("checked","checked")),e.each(n,function(t,i){e(i).closest(".e-radiobtn-wrap").find(".e-rad-icon").removeClass("e-circle_01").addClass("e-rad-select"),e(i).closest(".e-radiobtn-wrap").find(".e-spanicon").removeClass("e-rad-active"),e(i).closest(".e-radiobtn-wrap").attr({tabindex:0,"aria-checked":!1});var s=e(i).data("ejRadioButton");null!=s&&null!=s.checked()&&"boolean"==typeof s.checked()&&(s.model.checked=!1)}),null!=o&&null!=o.checked()&&"boolean"==typeof o.checked()?o.model.checked=!0:o.checked(o.radbtn.attr("value")),this.element.find(".e-rad-icon").addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this._isAngularbind||this.element.find(".e-input").click(),this.isChecked=!0}i={isChecked:this.isChecked,isInteraction:!!t},this.initialRender||this._trigger("change",i),t&&this._trigger("_change",{value:this._hiddenValue})},disable:function(){this.element.hasClass("e-disable")||(this.element.addClass("e-disable"),this.radbtn.attr("disabled","disabled")),this._isIE8&&this.span.addClass("e-disable"),this.div.attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.hasClass("e-disable")&&(this.element.removeClass("e-disable"),this.radbtn.prop("disabled",!1)),this._isIE8&&this.span.removeClass("e-disable"),this.div.attr("aria-disabled",!1),this.model.enabled=!0}}),t.RadioButtonSize={Small:"small",Medium:"medium"}}),
/*!
*  filename: ej.dropdownlist.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.globalize.min","./../common/ej.data.min","./../common/ej.scroller.min","./../common/ej.draggable.min"],e):e()}(function(){var t,i;t=jQuery,(i=Syncfusion).widget("ejDropDownList","ej.DropDownList",{element:null,model:null,validTags:["select","input"],_addToPersist:["value","text","selectedIndex","selectedItemIndex","selectedItems","selectedIndices","popupWidth","popupHeight","itemValue"],_setFirst:!1,_rootCSS:"e-dropdownlist",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{cssClass:"",value:null,htmlAttributes:{},text:null,itemValue:"",itemsCount:0,dataSource:null,delimiterChar:",",query:null,fields:{id:null,text:null,value:null,category:null,groupBy:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,selected:null,tableName:null},locale:"en-US",watermarkText:null,height:"",width:"",popupHeight:"152px",popupWidth:"auto",maxPopupHeight:null,minPopupHeight:"20",maxPopupWidth:null,minPopupWidth:"0",targetID:null,template:null,headerTemplate:null,selectedItemIndex:-1,selectedIndex:-1,disableItemsByIndex:null,enableItemsByIndex:null,selectedItems:[],selectedIndices:[],cascadeTo:null,enablePopupResize:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",showRoundedCorner:!1,showPopupOnLoad:!1,enableRTL:!1,enabled:!0,filterType:"contains",sortOrder:"ascending",caseSensitiveSearch:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,enablePersistence:!1,enableFilterSearch:!1,enableIncrementalSearch:!0,readOnly:!1,enableAnimation:!1,multiSelectMode:"none",allowGrouping:!1,enableSorting:!1,validationRules:null,validationMessage:null,actionBegin:null,actionComplete:null,actionFailure:null,actionSuccess:null,create:null,popupHide:null,popupShown:null,beforePopupShown:null,beforePopupHide:null,popupResizeStart:null,popupResize:null,popupResizeStop:null,change:null,select:null,dataBound:null,search:null,checkChange:null,cascade:null,destroy:null},dataTypes:{cssClass:"string",itemsCount:"number",watermarkText:"string",template:"string",disableItemsByIndex:"string",enableItemsByIndex:"string",enableIncrementalSearch:"boolean",cascadeTo:"string",delimiterChar:"string",showRoundedCorner:"boolean",showPopupOnLoad:"boolean",enableRTL:"boolean",enablePersistence:"boolean",allowVirtualScrolling:"boolean",virtualScrollMode:"enum",enabled:"boolean",readOnly:"boolean",multiSelectMode:"enum",dataSource:"data",query:"data",fields:"data",selectedItems:"array",enableAnimation:"boolean",allowGrouping:"boolean",enableSorting:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",locale:"string"},observables:["value","selectedItemIndex","selectedIndex"],value:i.util.valueFunction("value"),selectedItemIndex:i.util.valueFunction("selectedItemIndex"),selectedIndex:i.util.valueFunction("selectedIndex"),enable:function(){this._visibleInput.hasClass("e-disable")&&(this.target.disabled=!1,this.model.enabled=!0,this._visibleInput.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable"),this.popupListWrapper.removeClass("e-disable"),this._isIE8&&this.drpbtnspan.removeClass("e-disable"),this.container.on("mousedown",t.proxy(this._OnDropdownClick,this)),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable"),this.wrapper.attr("tabindex","0")),this._wireEvents()},disable:function(){this._visibleInput.hasClass("e-disable")||(this.target.disabled=!0,this.model.enabled=!1,this._visibleInput.addClass("e-disable"),this.popupListWrapper.addClass("e-disable"),this.dropdownbutton.addClass("e-disable"),this._isIE8&&this.drpbtnspan.addClass("e-disable"),"visualmode"==this.model.multiSelectMode&&this._ulBox.addClass("e-disable"),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this)),this._unwireEvents(),this.wrapper.removeAttr("tabindex"),this._isPopupShown()&&this._hideResult())},getValue:function(){return this._visibleInput.val()},_setValue:function(e){i.isNullOrUndefined(e)||(this._raiseEvents=!1,i.isNullOrUndefined(this.model.text)||this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByValue(e))},_setText:function(e){e&&(this._raiseEvents=!1,this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByText(e))},_setItemValue:function(e){this.model.itemValue=e},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.text(e)},hidePopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._hideResult()},showPopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._showResult()},clearText:function(){this._clearTextboxValue(),this._isWatermark||this._setWatermark()},addItem:function(e){var i,s,n,l,o,r;if(!this.model.enabled||!e||(this._mapFields(),(i=t.isArray(e)?e:[e]).length<1))return!1;for(s=this.mapFld,(n={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null,_category:null})._id=i[0][s._id]?s._id:"id",n._imageUrl=i[0][s._imageUrl]?s._imageUrl:"imageUrl",n._imageAttributes=i[0][s._imageAttributes]?s._imageAttributes:"imageAttributes",n._spriteCSS=i[0][s._spriteCSS]?s._spriteCSS:"spriteCssClass",n._text=i[0][s._text]?s._text:"text",n._value=i[0][s._value]?s._value:"value",n._htmlAttributes=i[0][s._htmlAttributes]?s._htmlAttributes:"htmlAttributes",n._selected=i[0][s._selected]?s._selected:"selected",n._category=i[0][s._category]?s._category:"groupBy",this._generateLi(i,n),l=this.dummyUl,o=0;o<i.length;o++)this._listItem(i[o],"add");this.model.showCheckbox?this._appendCheckbox(l,!0):this._isSingleSelect()||this._multiItemSelection(l,!0),this._virtualUl.append(t(this.dummyUl).clone(!0)),this.ultag.append(this.dummyUl),this._isPopupShown()&&(r=this.scrollerObj?this.scrollerObj.scrollTop():0,this._refreshScroller(),this.scrollerObj&&this.scrollerObj.option("scrollTop",r))},_toArray:function(e,s){var n;return"function"==typeof e&&(e=i.util.getVal(e)),t.isArray(e)?n=e:"string"==typeof e?s&&("visualmode"==this.model.multiSelectMode||"delimiter"==this.model.multiSelectMode||this.model.showCheckbox)?0==(n=e.split(this.model.delimiterChar)).length&&(n=[e]):(s||0==(n=e.split(this.model.delimiterChar)).length)&&(n=[e]):n=[e],n},_trim:function(e){return"string"==typeof e?t.trim(e):e},selectItemByIndex:function(e){this._selectItemByIndex(e)},selectItemsByIndices:function(e){this._selectItemByIndex(e)},_selectItemByIndex:function(e){var i,s,n,l;for(this.listitems=this._getLi(),this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,i=this._toArray(e,!0),n=0;n<i.length;n++)if(null!=(s=parseInt(i[n]))&&s>=0){if(-1==t.inArray(s,this._selectedIndices))for(l=0;l<this.listitems.length;l++)t(this.listitems[l]).hasClass("e-disable")||l==s&&(this.selectedIndexValue=l,this._activeItem=s,this._enterTextBoxValue())}else this.model.showCheckbox||"none"!=this.model.multiSelectMode||this._clearTextboxValue()},unselectItemsByIndices:function(e){this._unselectItemByIndex(e)},unselectItemByIndex:function(e){this._unselectItemByIndex(e)},_unselectItemByIndex:function(e){var i,s,n,l;for(this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,s=this._toArray(e,!0),this.listitems=this._getLi(),l=0;l<s.length;l++)for(n=parseInt(s[l]),i=0;i<this.listitems.length;i++)i==n&&(this.selectedIndexValue=i,this._activeItem=n,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue())},setSelectedValue:function(e){this.selectItemByValue(e)},selectItemByValue:function(e){var s,n,l,o;if(this.listitems=this._getLi(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(n=this._toArray(e,!0),l=0;l<n.length;l++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(o=this._getAttributeValue(this.listitems[s])||t(this.listitems[s]).text())&&(this._selectedValue=o,this._selectedValue==n[l])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByValue:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this._getAttributeValue(this.listitems[t])&&(this._selectedValue=this._getAttributeValue(this.listitems[t]),this._selectedValue==s[i])){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},setSelectedText:function(e){this.selectItemByText(e)},selectItemByText:function(e){var s,n,l;if(this.listitems=this._getLi(),this._mapFields(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(n=this._toArray(e,!0),l=0;l<n.length;l++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(this.selectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[s]:this._getField(this.popupListItems[s],this.mapFld._text),this.selectedTextValue==n[l])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByText:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),this._mapFields(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this.unselectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[t]:this._getField(this.popupListItems[t],this.mapFld._text),this.unselectedTextValue==s[i]){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},getSelectedValue:function(){return this.element.val()},getSelectedItem:function(){var e,t=[];for(this.listitems=this._getLi(),e=0;e<this._selectedIndices.length;e++)t.push(this.listitems[this._selectedIndices[e]]);return t},getItemDataByValue:function(e){for(var t,i=this._toArray(e,!1),s=[],n=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",l=0;l<i.length;l++)for(t=0;t<this._rawList.length;t++)this._rawList[t][n]==i[l]&&s.push(this._rawList[t]);return s},getListData:function(){return this._rawList},getSelectedItemsID:function(){return this._selectedItemsID},disableItemsByIndices:function(e){this._disableItemByIndex(e)},disableItemByIndex:function(e){this._disableItemByIndex(e)},_disableItemByIndex:function(e){var i,s;if(!this.model.enabled)return!1;for(i=this._toArray(e,!1),s=0;s<i.length;s++)null==i[s]||isNaN(parseInt(i[s]))||i.length>0&&!(t.inArray(parseInt(i[s]),this._disabledItems)>-1)&&(index=t.inArray(i[s],this._disabledItems),this._setClass(this._getLi()[parseInt(i[s])],"e-disable"),this._disabledItems.push(parseInt(i[s])),this.model.disableItemsByIndex=String(this._disabledItems.join(",")))},enableItemsByIndices:function(e){this._enableItemByIndex(e)},enableItemByIndex:function(e){this._enableItemByIndex(e)},_enableItemByIndex:function(e){var i,s,n=this._toArray(e,!1);for(this.model.enableItemsByIndex=e,s=0;s<n.length;s++)n.length>0&&t.inArray(parseInt(n[s]),this._disabledItems)>-1&&!isNaN(parseInt(n[s]))&&(i=t.inArray(parseInt(n[s]),this._disabledItems),this._removeClass(this._getLi()[parseInt(n[s])],"e-disable"),this._disabledItems.splice(i,1));this.model.enableItemsByIndex=null,this.model.disableItemsByIndex=this._disabledItems.join(this.model.delimiterChar)},_validateDelimiter:function(e){return 1!=this._trim(e).length||/^[a-zA-Z0-9]+$/.test(e)?",":e},_removeText:function(e){var i=this.element[0].value.split(this.model.delimiterChar),s=this._visibleInput[0].value.split(this.model.delimiterChar),n=t.inArray(e,i);n>=0&&(i.splice(n,1),s.splice(n,1)),this.element[0].value=i.join(this.model.delimiterChar),this._visibleInput[0].value=s.join(this.model.delimiterChar)},_addText:function(e){var t,i,s,n;if(this._checkContains(this._hiddenValue))return!1;for(t=["element","_visibleInput"],s=0;s<t.length;s++)i="element"==t[s]?this._hiddenValue:e,this[t[s]][0].value&&""!=this[t[s]][0].value?((n=this[t[s]][0].value.split(this.model.delimiterChar)).push(i),this[t[s]][0].value=n.join(this.model.delimiterChar)):this[t[s]][0].value=i},_checkContains:function(e){var t,i=this.element[0].value.split(this.model.delimiterChar);for(this.contains=!1,t=0;t<i.length;t++)if(i[t]===e){this.contains=!0;break}return this.contains},_updateLocalConstant:function(){this._localizedLabels=i.getLocalizedConstants("ej.DropDownList",this.model.locale)},_init:function(){var e=i.browserInfo();this._updateLocalConstant(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._textContent=this._isIE8?"innerText":"textContent",(this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))||this.element.is("select"))&&(this._isWatermark="placeholder"in document.createElement("input"),this._id=this.element[0].id,this._initialize(),this._render(),this._addAttr(this.model.htmlAttributes),this._enabled(this.model.enabled),this._initValue=!1,this._checkboxValue=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation()))},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,s,n,l,o;if(0!=this.element.closest("form").length)for(n in this.element.rules("add",this.model.validationRules),(e=this.element.closest("form").data("validator"))||(e=this.element.closest("form").validate()),s=this.element.attr("name"),e.settings.messages[s]={},this.model.validationRules)if(l=null,!i.isNullOrUndefined(this.model.validationRules[n])){if(i.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[n]))for(o in e.settings.messages[s][n]=t.validator.messages[n],this.model.validationMessage)n==o&&(l=this.model.validationMessage[n]);else l=this.model.validationRules.messages[n];e.settings.messages[s][n]=null!=l?l:t.validator.messages[n]}},_setInitialPopup:function(e){this.model.enabled&&!this.model.readOnly&&(0==e?this._hideResult():this._showResult())},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupListWrapper.removeClass(this.model.cssClass).addClass(e)},_setRTL:function(e){this.model.enableRTL!=e&&(this.model.enableRTL=e,this._RightToLeft(),this._dropbtnRTL())},_changeHeight:function(e){this.wrapper.height(e),this._setListHeight()},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setModel:function(e){var s,n,l,o,r;for(s in e)switch(s){case"dataSource":this._isEqualDataSource(e[s])||this._checkModelDataBinding(e[s],this.model.query);break;case"query":this._checkModelDataBinding(this.model.dataSource,e[s]);break;case"fields":this.model.fields=t.extend(this.model.fields,e[s]),this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"itemsCount":this.model.itemsCount=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"template":this.model.template=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"value":n=i.util.getVal(e[s]),i.isNullOrUndefined(n)||""===n?this._clearTextboxValue():(this._setValue(i.util.getVal(e[s])),e[s]=this.model.value);break;case"delimiterChar":l=this.model.delimiterChar,e[s]=this._validateDelimiter(e[s]),this.model.delimiterChar=e[s],this.model.text&&(this.model.text=this.model.text.split(l).join(this.model.delimiterChar),this._visibleInput.val(this.model.text)),this.model.value&&(this.model.value=this.model.value.split(l).join(this.model.delimiterChar),this.element.val(this.model.value));break;case"text":i.isNullOrUndefined(e[s])||""===e[s]?this._clearTextboxValue():(this._setText(e[s]),e[s]=this.model.text);break;case"itemValue":this._setItemValue(e[s]);break;case"enableRTL":this._setRTL(e[s]);break;case"enabled":this._enabled(e[s]);break;case"height":this._changeHeight(e[s]);break;case"width":this._changeWidth(e[s]);break;case"popupHeight":this.model.popupHeight=e[s],this._setListHeight(e[s]);break;case"popupWidth":this.model.popupWidth=e[s],this._setListWidth();break;case"minPopupHeight":this.model.minPopupHeight=e[s],this._setListHeight(e[s]);break;case"minPopupWidth":this.model.minPopupWidth=e[s],this._setListWidth();break;case"maxPopupHeight":this.model.maxPopupHeight=e[s],this._setListHeight(e[s]);break;case"maxPopupWidth":this.model.maxPopupWidth=e[s],this._setListWidth();break;case"cssClass":this._changeSkin(e[s]);break;case"showCheckbox":this.model.showCheckbox=e[s],o=this.model.text,r=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this._checkboxHideShow(e[s]),this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):r&&r.length&&this._setText(r[0]),this._isPopupShown()&&this._setListPosition();break;case"checkAll":return this._setCheckAll(e[s]),!1;case"uncheckAll":return this._setUncheckAll(e[s]),!1;case"watermarkText":this._changeWatermark(e[s]);break;case"validationRules":0!=this.element.closest("form").length&&(null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation()));break;case"locale":this.model.locale=e[s],this._updateLocalConstant();break;case"validationMessage":0!=this.element.closest("form").length&&(this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation()));break;case"showRoundedCorner":this._roundedCorner(e[s]),this.model.showRoundedCorner=e[s];break;case"showPopupOnLoad":this._setInitialPopup(e[s]);break;case"targetID":this.model.targetID=e[s],this._showFullList();break;case"selectedItemIndex":case"selectedIndex":this._selectItemByIndex(e[s]),this.model.selectedItemIndex=this.model.selectedIndex=e[s];break;case"unselectItemByIndex":this._unselectItemByIndex(e[s]);break;case"disableItemsByIndex":this._disableItemByIndex(e[s]);break;case"enableItemsByIndex":this._enableItemByIndex(e[s]);break;case"selectedItems":case"selectedIndices":this._selectCheckedItem(e[s]),e[s]=this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;break;case"multiSelectMode":"visualmode"==this.model.multiSelectMode&&(this._swapUlandInput(!1),this._ulBox.remove(),this._ulBox=null),this.model.multiSelectMode=e[s],o=this.model.text,r=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):(this._setText(r[0]),this.wrapper.find("input[name="+this._name+"]").remove()),this._isPopupShown()&&this._setListPosition();break;case"allowGrouping":this._setGroupingAndSorting("allowGrouping",e[s]);break;case"enableSorting":this._setGroupingAndSorting("enableSorting",e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"enablePopupResize":this.model.enablePopupResize=e[s],e[s]?this._enablePopupResize():this.popupListWrapper.removeClass("e-resizable").find(".e-resizebar").remove()&&this._hideResult();break;case"enableFilterSearch":if(e[s]){this.model.enableFilterSearch=!0,this._enableSearch();break}this._removeSearch()}},_clearTextboxValue:function(){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._selectedIndices=[],this.model.selectedItems=[],this.model.selectedIndices=[],this.selectedIndex(null),this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.model.showCheckbox&&this._resetCheck(),0!=this.wrapper.find("ul.e-ul.e-boxes").length&&(this._ulBox.children("li").remove(),""===this._name?this.wrapper.find("input:hidden[id^='#']").remove():this.wrapper.find("input:hidden[id^='#'][name="+this._name+"]").remove(),t(this.element).attr("name",this._name))},_destroy:function(){this._destroyDropdown(),this._visibleInput.removeClass("e-input "),this._setAttr(this.element[0],{accesskey:this.wrapper.attr("accesskey"),type:"text"}),this._isWatermark&&this._visibleInput.removeAttr("placeholder"),this.element[0].value="",this.model.dataSource||(this.selectOptions?this.docbdy&&this.docbdy.append(this.selectOptions.show()).show()&&this.element.remove()&&this.selectOptions&&this.selectOptions.removeClass("e-dropdownlist e-js"):this.docbdy&&this.ultag.find("li").removeClass("e-active")&&this.docbdy.append(this.ultag.html()).show()),this._hideResult(),this.popupPanelWrapper.remove(),this.element.removeAttr("aria-expanded aria-autocomplete aria-haspopup aria-owns accesskey role").css({width:"",display:"block"}),this._unwireEvents()},_finalize:function(){this.model.text!=this._visibleInput.val()&&this._setText(this.model.text),""==this.value()&&""!==this._visibleInput[0].value&&this._updateValue(this.element[0].value),this.value()!==this.element.val()&&this._setValue(this.value()),this.selectedIndex(-1!=this.selectedIndex()?this.selectedIndex():this.selectedItemIndex()),-1!=this.selectedIndex()?this._selectItemByIndex(this.selectedIndex()):this._selectedIndices.length>0&&this._selectCheckedItem(this._selectedIndices),null!=this.model.disableItemsByIndex&&this._disableItemByIndex(this.model.disableItemsByIndex),null!=this.model.enableItemsByIndex&&this._enableItemByIndex(this.model.enableItemsByIndex)},_initialize:function(){this._selectedIndices=this.model.selectedIndices.length>0?this.model.selectedIndices:this.model.selectedItems,this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,this.model.selectedIndex=-1!=this.model.selectedIndex?this.model.selectedIndex:this.model.selectedItemIndex,this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown()),this._selectedItemsID=[],this.target=this.element[0],this._disabledItems=[],this._queryString=null,this.suggLen=0,this._itemId=null,this.checkedStatus=!1,this._incqueryString="",this._activeItem=null,this.ddWidth=0,this._initValue=!0,this._virtualCount=0,this._raiseEvents=!0},_renderSelectToDropdown:function(){var e,s,n,l;if(this.inputElement=i.buildTag("input.e-dropdownlist#"+this._id+"_input","",{},{type:"text","data-role":"none"}),this.inputElement.insertAfter(this.element),this.element.attr("name")&&(this.inputElement.attr("name",this.element.attr("name")),this.element.removeAttr("name")),this.selectOptions=this.element,this.selectOptions.attr("id",this._id),null==this.model.dataSource){for(this.optionDiv=i.buildTag("div#"+this._id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=i.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptionItems=this.element.children("option"),s=this.selectOptionItems.length,this.optionDummyUl=t(),e=0;e<s;e++)l=this.selectOptionItems[e],null!=(n=t(l).attr("label")?t(l).attr("label"):l.innerHTML)&&(this.optionLi=i.buildTag("li",n,{},{"data-value":l.value,unselectable:"on"}),this.optionDummyUl.push(this.optionLi[0]),t(l).attr("selected")&&this.model.showCheckbox&&(-1==t.inArray(e,this._selectedIndices)?(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices):i.isNullOrUndefined(this.selectedIndex())&&this.selectedIndex(e)));this.optionUl.append(this.optionDummyUl)}this.element.css("display","none"),this.element=this.inputElement},_render:function(){var e;this._renderDropdown(),this._setWatermark(),this._renderPopupPanelWrapper(),this._showFullList(),this._roundedCorner(this.model.showRoundedCorner),e=this.model.dataSource,i.DataManager&&e instanceof i.DataManager?e.dataSource.offline&&e.dataSource.json&&e.dataSource.json.length>0&&this._finalize():this._finalize(),i.DataManager&&this.model.dataSource instanceof i.DataManager||this._finalize(),this._setCheckAll(this.model.checkAll)},_isEqualDataSource:function(e){var t,i,s;if(!this.model.dataSource||!e||this.model.dataSource.length!==e.length)return!1;for(t=!0,i=0,s=this.model.dataSource.length;i<s;i++)if(this.model.dataSource[i]!==e[i]){t=!1;break}return t},_checkModelDataBinding:function(e,t){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this.model.selectedItems=this.model.selectedIndices=this._selectedIndices=[],this.model.selectedIndex=this.model.selectedItemIndex=-1,"visualmode"==this.model.multiSelectMode&&this._destroyBoxModel(),this.model.dataSource=e,this.model.query=t,this.ultag.empty(),this._showFullList()},_initDataSource:function(e){var t=this;i.DataManager&&e instanceof i.DataManager&&(t._addLoadingClass(),t._trigger("actionBegin",{requestFrom:"default"})||e.executeQuery(this._getQuery()).done(function(e){t._trigger("actionSuccess",{e:e,requestFrom:"default"}),t._totalCount=e.count,t._listItem(e.result),t._removeLoadingClass(),t._renderPopupList(),t._finalize()}).fail(function(e){t.model.dataSource=null,t._addLoadingClass(),t._trigger("actionFailure",{e:e,requestFrom:"default"})}).always(function(e){t._trigger("actionComplete",{e:e,requestFrom:"default"})}))},_listItem:function(e,i){"add"==i?(this.popupListItems.push(e),this._rawList.push(e)):t.isArray(e)&&(this.popupListItems=e.slice(0),this._rawList=e.slice(0))},_getQuery:function(e){var t,s,n,l=this.model.fields,o=i.Query();if(!i.isNullOrUndefined(this.model.query)||this.model.template||e)this.model.query&&(o=this.model.query.clone());else{for(n in s=[],l)"tableName"!==n&&l[n]&&s.push(l[n]);s.length>0&&o.select(s)}return this.model.allowVirtualScrolling&&o.requiresCount(),this.model.itemsCount>0&&o.take(this.model.itemsCount),t=this.model.dataSource.dataSource,l&&(t&&t.url&&!t.url.match(l.tableName+"$")||t&&!t.url||!t)&&(i.isNullOrUndefined(l.tableName)||o.from(l.tableName)),o},_addLoadingClass:function(){this._isPopupShown()?this.popupListWrapper.addClass("e-load"):(this.dropdownbutton.addClass("e-load"),this.drpbtnspan.removeClass("e-icon e-arrow-sans-down")),this._readOnly=!0},_removeLoadingClass:function(){this.dropdownbutton.removeClass("e-load"),this.drpbtnspan.addClass("e-icon e-arrow-sans-down"),this._readOnly=!1,this.popupListWrapper.removeClass("e-load")},_renderDropdown:function(){if(this.wrapper=i.buildTag("span.e-ddl e-widget "+this.model.cssClass+"#"+this._id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.container=i.buildTag("span.e-in-wrap e-box #"+this._id+"_container"),this.element.removeAttr("accesskey"),null==this.model.value&&null!=this.element.attr("value")&&(this.model.value=this.element.attr("value")),this.element.attr("value","").val(""),this._setAttr(this.element[0],{type:"hidden",role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide(),this.drpbtnspan=i.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select",unselectable:"on"}),this.dropdownbutton=i.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button",unselectable:"on"}).append(this.drpbtnspan),this.container.insertAfter(this.element),this.container.append(this.element),this.container.append(this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.selectelement&&this.selectOptions.insertBefore(this.element),this._visibleInput=i.buildTag("input#"+this._id+"_hidden","",{}).insertAfter(this.element),this._visibleInput.addClass("e-input "),this._setAttr(this._visibleInput[0],{readonly:!0,tabindex:-1,"data-role":"none"}),!this._isWatermark){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan=i.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(e),this._hiddenSpan.css("display","none"),this._hiddenSpan.on("mousedown",t.proxy(this._OnDropdownClick,this))}this._checkNameAttr(),this._setDimentions(),this._RightToLeft(),this.ddWidth=this.dropdownbutton.outerWidth()>0?this.dropdownbutton.outerWidth():24,this.container.on("mousedown",t.proxy(this._OnDropdownClick,this))},_checkNameAttr:function(){this._name=i.isNullOrUndefined(this.element.attr("name"))?this._id:this.element.attr("name"),this.element.attr("name",this._name)},_addAttr:function(e){var s=this;t.map(e,function(e,n){var l=n.toLowerCase();"class"==l?s.wrapper.addClass(e):"disabled"==l&&"disabled"==e?s.disable():"readOnly"==l&&"readOnly"==e?s.model.readOnly=!0:"style"==l?s.wrapper.attr(n,e):i.isValidAttr(s._visibleInput[0],n)?t(s._visibleInput).attr(n,e):s.wrapper.attr(n,e)})},_renderBoxModel:function(){if("visualmode"!=this.model.multiSelectMode)return!1;this._ulBox=i.buildTag("ul.e-ul e-boxes"),this.container.prepend(this._ulBox),this._ulBox.css("min-height","30px"),this._ulBox.css("display","none"),this._on(this.container,"click",function(e){if(!this.model.enabled)return!1;var i=t(e.target);i.hasClass("e-options")&&(!e.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")),!e.ctrlKey&&i.hasClass("e-boxes")&&this._removeActive()})},_renderPopupPanelWrapper:function(){var e=t("#"+this.element[0].id+"_popup_wrapper").get(0);e&&t(e).remove(),this.popupPanelWrapper=i.buildTag("div#"+this._id+"_popup_wrapper"),t("body").append(this.popupPanelWrapper),this.popupListWrapper=i.buildTag("div.e-ddl-popup e-box e-widget  e-popup#"+this._id+"_popup_list_wrapper","",{display:"none",overflow:"hidden"}),this.popupList=i.buildTag("div#"+this._id+"_popup",{tabIndex:0}),this.popupListWrapper.addClass(this.model.cssClass),this.popup=this.popupList,this.popupScroller=i.buildTag("div"),this.ultag=i.buildTag("ul.e-ul","",{},{role:"listbox"}),this.popupScroller.append(this.ultag),this.popupList.append(this.popupScroller),this.model.headerTemplate&&(this.headerTemplate=t("<div>").append(this.model.headerTemplate),this.popupListWrapper.append(this.headerTemplate)),this.popupListWrapper.append(this.popupList),this.popupPanelWrapper.append(this.popupListWrapper),this.ultag.on({mouseenter:t.proxy(this._OnMouseEnter,this),mouseleave:t.proxy(this._OnMouseLeave,this),click:t.proxy(this._OnMouseClick,this)},"li:not('.e-category')"),i.isTouchDevice()&&this.ultag.on({tap:t.proxy(this._OnMouseEnter,this)},"li:not('.e-category')"),t(window).on("resize",t.proxy(this._OnWindowResize,this))},_updateText:function(){this.model.text=""==this._visibleInput.val()?null:this._visibleInput.val()},_updateValue:function(e){this.value(""==e?null:e)},_setGroupingAndSorting:function(e,t){var i,s,n;if(this.model[e]=t,i=this.model.text,this._updateValue(""),this._selectedIndices=[],this.ultag.empty(),this._showFullList(),this.model.showCheckbox&&i)for(s=i.split(this.model.delimiterChar),n=0;n<s.length;n++)this.selectItemByText(s[n]);else this.selectItemByText(i)},_setSortingList:function(){var e,i,s=document.createElement("ul");if(t(s).append(this.itemsContainer.children()),this.model.allowGrouping||t(s).find(">.e-category").length>0)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<t(s).find(">.e-category").length;e++)i=t(s).find(">.e-category").eq(0).first().nextUntil(".e-category").get(),this._setSortList(s,i);else t(s).children(">.e-category").remove(),i=t(s).children("li").get(),this._setSortList(s,i);this.itemsContainer=t(s)},_setSortList:function(e,i){i.sort(function(e,i){var s=t(e).text().toUpperCase(),n=t(i).text().toUpperCase();return s<n?-1:s>n?1:0}),"descending"==this.model.sortOrder&&i.reverse(),(this.model.allowGrouping||t(e).find(">.e-category").length>0)&&(t(e).append(t("<li>").text(t(e).find(">.e-category").eq(0).text()).addClass("e-category")),t(e).find(">.e-category").eq(0).remove()),t.each(i,function(i,s){t(e).append(s)})},_renderPopupList:function(){this._doDataBind(),this._renderRemaining()},_renderRemaining:function(){var e=this;this._dropbtnRTL(),this.model.enableFilterSearch&&this._enableSearch(),this.model.enablePopupResize&&this._enablePopupResize(),this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode&&this._totalCount&&this._totalCount>0&&(this._totalHeight=29*this._totalCount,this._totalPages=this._totalCount/(29*this.model.itemsCount),this._loadedItemHeight=29*this._getLi().length,this._getLi().attr("page",0),this._virtualPages=[0],this.ultag.append(t("<span>").addClass("e-virtual").css({height:this._totalHeight-this._loadedItemHeight,display:"block"}))),this._virtualUl=this.ultag.clone(!0),this._setListWidth(),this._setListHeight(),this._setListPosition(),this.popupScroller.css({height:"",width:""}),this.popupList.ejScroller({height:this._getPopupHeight(),width:0,scrollerSize:20,scroll:function(t){e.model.allowVirtualScrolling&&e._onScroll(t)}}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.find("div.e-scrollbar div").attr("unselectable","on"),this.popupListWrapper.css({display:"none",visibility:"visible"}),this._isSingleSelect()||(this.model.showCheckbox?this._checkboxHideShow(this.model.showCheckbox):this._multiItemSelection(this._getLi())),this._setUncheckAll(this.model.uncheckAll),this._changeSkin(this.model.cssClass),this.model.showPopupOnLoad&&this._showResult()},_enableSearch:function(){this.model.enableFilterSearch&&(this.inputSearch||(this.inputSearch=i.buildTag("input#"+this._id+"_inputSearch.e-input","",{},{type:"text","data-role":"none"}),this.popupListWrapper.prepend(t("<span>").addClass("e-atc e-search").append(t("<span>").addClass("e-in-wrap ").append(this.inputSearch).append(t("<span>").addClass(" e-icon e-search")))),this._on(this.inputSearch,"keyup",this._OnSearchEnter)))},_removeSearch:function(){this.model.enableFilterSearch=!1,this.popupListWrapper.find(".e-atc.e-search").remove(),this._isPopupShown()&&this.hidePopup(),this.inputSearch=null},_OnSearchEnter:function(e){var s,n,l="mozilla"==i.browserInfo().name?e.charCode:e.keyCode;-1!=t.inArray(l,[38,40,13])&&this.ultag.find("li.e-nosuggestion").length<=0?13==l?this._OnKeyUp(e):this._OnKeyDown(e):(this._activeItem=-1,this._queryString=this.inputSearch.val(),""==this._queryString&&this._virtualUl?(n={searchString:this._queryString,searchQuery:null,items:this._rawList},this._trigger("search",n),this._resetList(),this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()):(this._mapFields(),s=this._addSearchQuery(i.Query(),!this._isPlainType(this._rawList)),n={searchString:this._queryString,items:this._rawList,searchQuery:s},this.popupListWrapper.find(".e-atc.e-search .e-search").addClass("e-cross-circle").removeClass("e-search"),this._on(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch),this._trigger("search",n)||this._filterSearch(s,n)))},_refreshSearch:function(){this._resetSearch(),this._refreshPopup()},_filterSearch:function(e,t){var s=!1,n=t.result?t.result:i.DataManager(this._rawList).executeLocal(e);0==n.length&&(s=!0,n.push(this._getLocalizedLabels("emptyResultText"))),this.popupListItems=n,this.ultag.empty(),this._isPlainType(this.popupListItems)?this._plainArrayTypeBinding(n):this._objectArrayTypeBinding(n,"search"),s&&1==this.ultag.find("li").length&&this.ultag.find("li").eq(0).addClass("e-nosuggestion"),this.model.showCheckbox&&!s&&this._appendCheckbox(this._getLi()),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1,this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()},_updateSelectedIndexByValue:function(e){var t,i,s;if(e&&this.model.enableFilterSearch){for(this._selectedIndices=this.model.selectedItems=this.model.selectedIndices=[],this._virtualList=this._virtualUl.children("li:not('.e-category')"),t=this._toArray(e),i=0;i<t.length;i++)for(s=0;s<this._virtualList.length;s++)if(t[i]==this._getIndexedValue(this._virtualList[s])){this._selectedIndices.push(s);break}this.model.selectedItems=this.model.selectedIndices=this._selectedIndices}},_getIndexedValue:function(e){return this._getAttributeValue(e)?this._getAttributeValue(e):e.innerText},_resetSearch:function(){this.inputSearch&&this.model&&this.model.enableFilterSearch&&""!=this.inputSearch.val()&&this._virtualUl&&(this.inputSearch.val(""),this._resetList())},_resetList:function(){1==this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").length&&(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").addClass("e-search").removeClass("e-cross-circle"),this._off(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch)),this._listItem(this._rawList),this.ultag.empty().append(this._virtualUl.children().clone(!0)),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1},_addSearchQuery:function(e,t){var i,s="";return t&&(s=(i=this.model.fields)&&i.text?i.text:"text"),this._queryString&&e.where(s,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch),this.model.itemsCount>0&&e.take(this.model.itemsCount),e},_targetElementBinding:function(){var e,i,s,n,l,o=this.element.parents().last();if(this.docbdy=this.model.targetID?o.find("#"+this.model.targetID):this.optionDiv?this.optionDiv:null,!this.docbdy)return!1;if(this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),(this.model.allowGrouping||this.itemsContainer.find(">.e-category").length>0)&&!this.model.enableSorting)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<this.itemsContainer.find(">.e-category").length;e++)(i=this.itemsContainer.find(">.e-category").eq(e)).replaceWith(t("<li>").text(i.text()).addClass("e-category"));else this.model.enableSorting&&this._setSortingList();for(this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this.items.children("img,div").addClass("e-align"),this._listItem([]),s=0;s<this.items.length;s++)n=t(this.items[s]).text(),l=this._getAttributeValue(this.items[s]),t(this.items[s]).attr("data-value")||t(this.items[s]).attr("data-value",l||n),this._listItem({text:n,value:l||n},"add");this.ultag.empty().append(this.itemsContainer.children()),this.ultag.children("li").attr("role","option").attr("unselectable","on"),this.docbdy.css({display:"none"}).children("ol,ul").remove()},_plainArrayTypeBinding:function(e){var s,n;if(this.dummyUl=t(),this.model.enableSorting&&(e.sort(),"descending"==this.model.sortOrder&&e.reverse()),e.length>0){for(s=0;s<e.length;s++)i.isNullOrUndefined(e[s])||(n=i.buildTag("li",e[s],{},{"data-value":e[s],unselectable:"on"}),this.dummyUl.push(n[0]));this.ultag.append(this.dummyUl),this._trigger("dataBound",{data:e})}},_mapFields:function(){this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category;var e=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null},this.mapFld._id=e&&e.id?e.id:"id",this.mapFld._imageUrl=e&&e.imageUrl?e.imageUrl:"imageUrl",this.mapFld._imageAttributes=e&&e.imageAttributes?e.imageAttributes:"imageAttributes",this.mapFld._spriteCSS=e&&e.spriteCssClass?e.spriteCssClass:"spriteCssClass",this.mapFld._text=e&&e.text?e.text:"text",this.mapFld._value=e&&e.value?e.value:"value",this.mapFld._htmlAttributes=e&&e.htmlAttributes?e.htmlAttributes:"htmlAttributes",this.mapFld._selected=e&&e.selected?e.selected:"selected",this.mapFld._category=e&&e.groupBy?e.groupBy:"groupBy"},_doDataBind:function(){var e=this.model.dataSource,t=this.popupListItems;!e||!t||!t.length||t.length<1?this._targetElementBinding():this._isPlainType(t)?this._plainArrayTypeBinding(t):this._objectArrayTypeBinding(t)},_isPlainType:function(e){return"object"!=typeof e[0]},_objectArrayTypeBinding:function(e,s){var n,l,o,r,a,d;if(this.dummyUl=t(),this._mapFields(),this.model.enableSorting&&(n=i.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),e=i.DataManager(e).executeLocal(n),this.popupListItems=e),this.model.allowGrouping||this.model.fields.groupBy)for(this.popupListWrapper.addClass("e-atc-popup"),l=this.mapFld._category,r=i.Query().group(l),this.model.enableSorting||r.queries.splice(0,1),o=i.DataManager(e).executeLocal(r),this._swapUnCategorized(o),"search"==s?this.popupListItems=[]:this._listItem([]),a=0;a<o.length;a++)for(o[a].key&&this.ultag.append(i.buildTag("li.e-category",o[a].key).attr("role","option")[0]),this._generateLi(o[a].items,this.mapFld),this.ultag.append(this.dummyUl),d=0;d<o[a].items.length;d++)"search"==s?this.popupListItems.push(o[a].items[d]):this._listItem(o[a].items[d],"add");else this._generateLi(e,this.mapFld),this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:e})},_onScroll:function(e){var s,n,l,o;e.scrollTop&&(s=e.scrollTop,(n=this).model.allowVirtualScrolling&&"continuous"==n.model.virtualScrollMode?(o=i.Query().skip(n._rawList.length).take(n.model.itemsCount).clone(),s>=t(n.popupList).find("ul,ol").height()-t(n.popupList).height()&&n._rawList.length<n._totalCount&&(n._addLoadingClass(),i.DataManager&&n.model.dataSource instanceof i.DataManager?(o=n._getQuery().skip(n._rawList.length).take(n.model.itemsCount).clone(),n._trigger("actionBegin",{requestFrom:"scroll"})||n.model.dataSource.executeQuery(o).done(function(e){n.addItem(e.result),n._removeLoadingClass(),n._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){n.model.dataSource=null,n._removeLoadingClass(),n._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){n._trigger("actionComplete",{e:e,requestFrom:"scroll"})})):(l=i.DataManager(n.model.dataSource).executeLocal(o),n.addItem(l),n._removeLoadingClass()))):n.model.allowVirtualScrolling&&"normal"==n.model.virtualScrollMode&&window.setTimeout(function(){0==n._virtualCount&&n._loadList()},300))},_loadList:function(){var s,n,l,o,r;this._virtualCount++;var a,d=this.scrollerObj.scrollTop(),h=this,c=0,u=null;if(this._currentPage=Math.round(d/(29*this.model.itemsCount)),-1!=t.inArray(this._currentPage,this._virtualPages.sort(function(e,t){return e-t})))if(0==this._currentPage){if(-1!=t.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else if(-1!=t.inArray(this._currentPage-1,this._virtualPages)){if(-1!=t.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else this._currentPage=this._currentPage-1;for(a=!(-1!=t.inArray(this._currentPage-1,this._virtualPages)),this._addLoadingClass(),s=this._virtualPages.length-1;s>=0;s--)if(this._virtualPages[s]<this._currentPage){c=this._virtualPages[s],s+1==this._virtualPages.length||(u=this._virtualPages[s+1]);break}if(n=a?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,l=i.Query().range(n,this._currentPage*this.model.itemsCount+this.model.itemsCount),i.DataManager&&h.model.dataSource instanceof i.DataManager){if(r=a?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,l=this._getQuery().skip(r),a){for(s=0;s<l.queries.length;s++)if("onTake"==l.queries[s].fn){l.queries.splice(s,1);break}l.take(2*this.model.itemsCount)}h._trigger("actionBegin",{requestFrom:"scroll"})||h.model.dataSource.executeQuery(l).done(function(e){h._appendVirtualList(e.result,c,h._currentPage,u,a),h._removeLoadingClass(),h._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){h._virtualCount--,h._removeLoadingClass(),h._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){h._trigger("actionComplete",{e:e,requestFrom:"scroll"})})}else o=i.DataManager(h.model.dataSource).executeLocal(l),this._appendVirtualList(o,c,this._currentPage,u,a),h._removeLoadingClass()},_appendVirtualList:function(e,i,s,n,l){var o,r,a,d,h,c;if(this._virtualCount--,-1!=t.inArray(s,this._virtualPages.sort(function(e,t){return e-t})))return!1;for(l&&-1!=t.inArray(s-1,this._virtualPages.sort())&&(e.splice(0,this.model.itemsCount),l=!1),o=this.model.itemsCount,r=t("<ul>"),0!=(a=l?(s-1)*o*29-29*(i*o+o):s*o*29-29*(i*o+o))&&r.append(t("<span>").addClass("e-virtual").css({display:"block",height:a})),this._mapFields(),this._generateLi(e,this.mapFld),t(this.dummyUl).attr("page",s),l&&t(this.dummyUl).slice(0,o).attr("page",s-1),this.model.showCheckbox&&this._appendCheckbox(this.dummyUl),r.append(this.dummyUl),d=29*(s*o+o),0!=(d=null!=n?n*o*29-d:this.ultag.height()-d)&&r.append(t("<span>").addClass("e-virtual").css({display:"block",height:d})),(h=this.ultag.find("li[page="+i+"]").last()).next().remove(),r.children().insertAfter(h),this._virtualPages.push(s),l&&this._virtualPages.push(s-1),c=0;c<e.length;c++)this._listItem(e[c],"add");this._virtualUl=this.ultag.clone(!0),this._renderBoxModel()},_generateLi:function(e,s){var n,l,o,r;if(this.mapFld=s,this.dummyUl=[],!e||!e.length||e.length<1)return!1;for(n=0;n<e.length;n++){var a=this._getField(e[n],this.mapFld._id),d=this._getField(e[n],this.mapFld._imageUrl),h=this._getField(e[n],this.mapFld._imageAttributes),c=this._getField(e[n],this.mapFld._spriteCSS),u=this._getField(e[n],this.mapFld._text),m=this._getField(e[n],this.mapFld._value),p=this._getField(e[n],this.mapFld._htmlAttributes),g=this._getField(e[n],this.mapFld._selected),f=document.createElement("li");!i.isNullOrUndefined(m)&&m.toString().length>0?f.setAttribute("data-value","object"==typeof m?JSON.stringify(m):m):f.setAttribute("data-value",u),i.isNullOrUndefined(a)||""===a||f.setAttribute("id",a),i.isNullOrUndefined(p)||""==p||this._setAttr(f,p),this.model.template?t(f).append(this._getTemplatedString(e[n])):(i.isNullOrUndefined(d)||""==d||(l=document.createElement("img"),this._setClass(l,"e-align")._setAttr(l,{src:d,alt:u}),h&&""!=h&&this._setAttr(l,h),f.appendChild(l)),i.isNullOrUndefined(c)||""==c||(o=document.createElement("div"),this._setClass(o,"div.e-align "+c+" sprite-image"),f.appendChild(o)),g&&this._setClass(f,"chkselect"),i.isNullOrUndefined(u)&&(u=String(u)),(r=document.createElement("span")).innerHTML=u,this._setClass(r,"e-ddltxt"),f.innerHTML+=r.outerHTML),this._setAttr(f,{role:"option",unselectable:"on"}),this.dummyUl.push(f)}},_setAttr:function(e,t){var i,s,n;if("string"==typeof t)2==(i=t.replace(/['"]/g,"").split("=")).length&&e.setAttribute(i[0],i[1]);else for(s in t)if("styles"!=s&&"style"!=s||"object"!=typeof t[s])e.setAttribute(s,t[s]);else for(n in t[s])e.style[n]=t[s][n];return this},_setClass:function(e,t){return e.className+=" "+t,this},_removeClass:function(e,t){var i=e.className.indexOf(t);return i>=0&&(e.className=0!=i&&" "===e.className[i-1]?e.className.replace(" "+t,""):e.className.replace(t,"")),this},_hasClass:function(e,t){return e.className.indexOf(t)>=0},_swapUnCategorized:function(e){t(e).each(function(t,i){if(!i.key){for(var s=t;s>0;s--)e[s]=e[s-1];return e[s]=i,!1}})},_getField:function(e,t){return i.pvt.getObject(t,e)},_getTemplatedString:function(e){for(var t,i,s=this.model.template,n=s.indexOf("${"),l=s.indexOf("}");-1!=n&&-1!=l;)i=(t=s.substring(n,l+1)).replace("${","").replace("}",""),n=(s=s.replace(t,this._getField(e,i))).indexOf("${"),l=s.indexOf("}");return s},_setWatermark:function(){if(""==this.element.val()&&""==this._trim(this._visibleInput.val())){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.css("display","block").text(e),"visualmode"==this.model.multiSelectMode&&this._ulBox&&0==this._ulBox.find("li").length&&this._swapUlandInput(!1)}},_checkboxHideShow:function(e){e?(this.listitems=this._getLi(),0==this.listitems.find("input[type=checkbox]").length&&this._appendCheckbox(this.listitems)):this._removeCheck(this.popupList),this.model.showCheckbox=e,this._virtualUl=this.ultag.clone(!0)},_setCheckAll:function(e){!this._isSingleSelect()&&e?this.checkAll():this.model.checkAll=!1},_setUncheckAll:function(e){!this._isSingleSelect()&&e?this.uncheckAll():this.model.uncheckAll=!1},checkAll:function(){var e,s,n=this._selectedIndices,l=!1;if(this._mapFields(),this.listitems=this._getLi(),this._isWatermark||this._hiddenSpan.css("display","none"),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?l=!0:this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0])&&!this._isChecked(s)?(this._setClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!0}),s.firstChild.checked=!0,l=!1):l=!0:(l=!1,t(this.listitems[e]).addClass("e-active")),l||(this.checkedStatus=!0,this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._selectedItemsID.push(this._itemID),this._createListHidden(this._hiddenValue),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._hiddenValue)),this._isPopupShown()&&this._setListPosition()),this._addText(this._currentText),-1==t.inArray(e,n)&&(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._trigger("change",args),this._activeItem=e,this.activeItem=this._getActiveItem(),this._cascadeAction());this._updateValue(this.element.val()),this._updateText(),this.model.itemValue=this._selectedValue,this.model.uncheckAll=!1,this.model.checkAll=!0,this._activeItem=-1,this._setWatermark()}},_createListHidden:function(e){var i=document.createElement("input");this._setAttr(i,{type:"hidden",name:this._name,value:e,id:"#"+e}),this.container.append(i),t(this.element).attr("name","hiddenEle")},_removeListHidden:function(e){var i=document.getElementById("#"+e);t(i).remove()},_getAttributeValue:function(e){return e?e.getAttribute("data-value")||e.getAttribute("value"):null},_selectCheckedItem:function(e){for(var t=0;t<e.length;t++)this._activeItem=e[t],this._enterTextBoxValue()},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){var e,s,n,l=!1;if(this.listitems=this._getLi(),this._mapFields(),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0])&&this._isChecked(s)?(this._removeClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!1}),s.firstChild.checked=!1,l=!0):l=!1:(t(this.listitems[e]).removeClass("e-active"),l=!0):l=!1,l&&(this.checkedStatus=!1,this._activeItem=e,this.activeItem=this._getActiveItem(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),n=this._selectedIndices,t.inArray(e,n)>-1&&(this._selectedIndices.splice(t.inArray(e,n),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._removeSelectedItemsID(),this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._trigger("change",args),this._cascadeAction(),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition()));this._updateValue(this.element.val()),this._updateText(),this.model.itemValue=this._selectedValue,this.model.checkAll=!1,this.model.uncheckAll=!0,this._setWatermark(),this._activeItem=-1}},_removeSelectedItemsID:function(){var e;e=this._selectedItemsID.indexOf(this._itemID),this._selectedItemsID.splice(e,1),this._itemID=""},_refreshScroller:function(){this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.popupList.find(".e-content, .e-vhandle").removeAttr("style"),this.popupList.find(".e-vhandle div").removeAttr("style"),this.popupList.children(".e-content").removeClass("e-content");var e=this._isPopupShown();this.popupListWrapper.css("display","block"),this.popupList.css({display:"block"}),this.scrollerObj.model.height=Math.ceil(this._getPopupHeight()),this.scrollerObj.refresh(),this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.scrollerObj.option("scrollTop",0),e||this.popupListWrapper.css("display","none")},_enablePopupResize:function(){this.model.enablePopupResize&&(this.popupListWrapper.addClass("e-resizable").append(i.buildTag("div.e-resizebar").append(i.buildTag("div.e-icon e-resize-handle"))).find(".e-resize-handle").addClass(this.model.enableRTL?"e-rtl-resize":""),this._resizePopup())},_resizePopup:function(){var e=this,i=!1;this.popupListWrapper.find("div.e-resize-handle").ejResizable({minHeight:e._validatePixelData(e.model.minPopupHeight),minWidth:e._validatePixelData(e.model.minPopupWidth),maxHeight:e._validatePixelData(e.model.maxPopupHeight),maxWidth:e._validatePixelData(e.model.maxPopupWidth),handle:"e-ddl-popup",resizeStart:function(t){if(!e.model.enabled)return!1;i||e._trigger("popupResizeStart",{event:t}),i=!0},resize:function(i){var s=t(i.element).parents("div.e-ddl-popup");e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),e._trigger("popupResize",{event:i})},resizeStop:function(t){i&&(e._refreshPopupOnResize(e.model.popupHeight,e.model.popupWidth),i&&e._trigger("popupResizeStop",{event:t}),i=!1)},helper:function(i){var s=t(i.element).parents("div.e-ddl-popup");return e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),t(e.popupListWrapper)}})},_refreshPopupOnResize:function(e,t){e&&(this.model.popupHeight=e),t&&(this.model.popupWidth=t),this.popupListWrapper.css({height:this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight)}),this._setListWidth(),this._refreshScroller()},_setListWidth:function(){var e=this.model.popupWidth;"auto"!=e?this.popupListWrapper.css({width:e}):this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}),this.popupListWrapper.css({"max-width":this._validatePixelData(this.model.maxPopupWidth)})},_setListHeight:function(){this.model.enablePopupResize&&this.model.enableFilterSearch&&this.model.minPopupHeight&&this.model.minPopupHeight.toString().indexOf("%")<0&&20==this._validatePixelData(this.model.minPopupHeight)&&(this.model.minPopupHeight="65"),this.model.enablePopupResize?this.popupListWrapper.css({"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight),height:this._validatePixelData(this.model.popupHeight)}):this.popupListWrapper.css({"max-height":this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight)})},_validatePixelData:function(e){return e&&!isNaN(e)?Number(e):e},_getPopupHeight:function(){var e,t=this.popupListWrapper.height();return this.model.enablePopupResize&&(t-=this.popupListWrapper.find(">div.e-resizebar").height()),this.model.headerTemplate&&this.headerTemplate&&(t-=this.headerTemplate.height()),this.model.enableFilterSearch&&this.inputSearch&&(e=this.inputSearch.parent(".e-in-wrap"),t-=parseInt(e.css("height"))+parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"))),t},_refreshPopup:function(){"auto"!=this.model.popupWidth||this._validatePixelData(this.model.minPopupWidth)?this._validatePixelData(this.model.minPopupWidth)&&this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}):this.popupListWrapper.css({"min-width":this.wrapper.width()}),this._refreshScroller(),this._setListPosition()},_setListPosition:function(){var e,i=this.wrapper,s=this._getOffset(i),n=t(document).scrollTop()+t(window).height()-(s.top+t(i).outerHeight()),l=s.top-t(document).scrollTop(),o=this.popupListWrapper.outerHeight(),r=this.popupListWrapper.outerWidth(),a=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<n||o>l?s.top+d+3:s.top-o-3)-h;e=t(document).scrollLeft()+t(window).width()-a,(this.model.enableRTL||r>e&&r<a+i.outerWidth())&&(a-=this.popupListWrapper.outerWidth()-i.outerWidth()),this.popupListWrapper.css({left:a+"px",top:u+"px","z-index":c})},_getOffset:function(e){return i.util.getOffset(e)},_getZindexPartial:function(){return i.util.getZindexPartial(this.element,this.popupListWrapper)},_showResult:function(){var e=this,s={text:this._visibleInput[0].value,value:this._selectedValue,refreshPopup:!0};this._trigger("beforePopupShown",s)||(s.refreshPopup&&this._refreshPopup(),t(this.popupListWrapper).slideDown(this.model.enableAnimation?200:1,function(){t(document).on("mousedown",t.proxy(e._OnDocumentClick,e)),e._on(i.getScrollableParents(e.wrapper),"scroll",e._hideResult)}),this.element[0].setAttribute("aria-expanded",!0),this._listSize=this._getLi().length,this._trigger("popupShown",{text:this._visibleInput[0].value,value:this._selectedValue}),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")}))},_OnWindowResize:function(){!i.isNullOrUndefined(this.model)&&this._isPopupShown()&&this._refreshPopup()},_hideResult:function(e){if(this.model&&this._isPopupShown()){if(!i.isNullOrUndefined(e)&&!i.isNullOrUndefined(this.inputSearch)&&t(this.inputSearch).is(":focus")&&"scroll"==e.type&&i.isTouchDevice())return!1;var s=this;if(this._trigger("beforePopupHide",{text:this._visibleInput[0].value,value:this._selectedValue}))return;t(this.popupListWrapper).slideUp(this.model.enableAnimation?100:0,function(){t(document).off("mousedown",t.proxy(s._OnDocumentClick,s))}),null!=this.element&&this.element.attr("aria-expanded",!1),this._off(i.getScrollableParents(this.wrapper),"scroll",this._hideResult),null!=this._visibleInput&&this._trigger("popupHide",{text:this._visibleInput[0].value,value:this._selectedValue}),setTimeout(function(){s._resetSearch()},100)}},_isPopupShown:function(){return"block"==this.popupListWrapper.css("display")},_enterTextBoxValue:function(){var e,i,s=!0;this.removeID=!1,this.checkedStatus=!1,this._isWatermark||this._hiddenSpan.css("display","none"),this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||!this._trigger("select",e)?((this._activeItem>=0||null!=this._activeItem)&&(this._isSingleSelect()||this._checkContains(this._selectedValue)?this._isSingleSelect()?(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.activeItem.addClass("e-active"),this._maintainHiddenValue(),this._visibleInput.val(this._currentText),this.element.val(this._hiddenValue),this.selectedItemIndex(this.selectedIndexValue),this.selectedIndex(this.selectedIndexValue),this._selectedIndices[0]=this.selectedIndexValue):s=!1:(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)||(this._setClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!0}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.addClass("e-active"),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._selectedValue)),this._isPopupShown()&&this._setListPosition()),this._maintainHiddenValue(),this._addText(this._currentText),this._createListHidden(this._hiddenValue),-1==t.inArray(this.selectedIndexValue,this._selectedIndices)&&(this._selectedIndices.push(this.selectedIndexValue),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices)),s&&(this.checkedStatus=!0,this._onValueChange(),this._cascadeAction(),this.selectelement&&t("#"+this._id).children().length>this.selectedIndexValue&&(t("#"+this._id).children()[this.selectedIndexValue].selected=!0))),this.model.uncheckAll=!1,this._setWatermark()):this._setWatermark()},_onValueChange:function(){this.model.itemValue=this._selectedValue,this._updateText(),this.value()==this.element.val()||null==this.value()&&""==this.element.val()||(this._updateSelectedIndexByValue(this._visibleInput.val()),this._updateValue(this.element.val()),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:this.selectedIndexValue,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||(this._trigger("change",args),this.model.showCheckbox&&this._trigger("checkChange",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this._selectedValue,data:this.model})),this._uiInteract=!1)},_decode:function(e){return t("<span>").html(e).text()},_chooseSelectionType:function(){this.activeItem=this._getActiveItem(),this.selectedIndexValue=this._activeItem,this._mapFields(),null==this.model.dataSource||this._isPlainType(this.model.dataSource)?(this._currentText=this.activeItem.text(),this._getAttributeValue(this.activeItem[0])?this._selectedValue=this._getAttributeValue(this.activeItem[0]):null!=this._currentText?(this.activeItem[0].setAttribute("value",this._currentText),this._selectedValue=this._currentText):this._selectedValue="",this._itemID=t(this.activeItem).attr("id")):(this._currentText=this._decode(this._getField(this.popupListItems[this._activeItem],this.mapFld._text)),this._currentText=""===this._currentText||null==this._currentText?this.activeItem.text():this._currentText,this._selectedValue=this._getField(this.popupListItems[this._activeItem],this.mapFld._value),this._selectedValue=null!=this._selectedValue?this._selectedValue:this._currentText,this._itemID=this._getField(this.popupListItems[this._activeItem],this.mapFld._id)),i.isNullOrUndefined(this._itemID)||""==this._itemID||(this.model.showCheckbox?this.removeID?this._removeSelectedItemsID():this._selectedItemsID.push(this._itemID):(this._selectedItemsID=[],this.removeID||this._selectedItemsID.push(this._itemID))),this.selectedTextValue=this._currentText},_maintainHiddenValue:function(){this._hiddenValue=this._getAttributeValue(this.activeItem[0])||this._currentText},_removeTextBoxValue:function(){var e,i;this._uiInteract=!0,this.removeID=!0,this.checkedStatus=!0,this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._onSearch||!this._raiseEvents||!this._trigger("select",e)?(this._maintainHiddenValue(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),this.activeItem.removeClass("e-active"),this._isSingleSelect()||(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)&&(this._removeClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!1}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.removeClass("e-active"),t.inArray(this.selectedIndexValue,this._selectedIndices)>-1&&(this._selectedIndices.splice(t.inArray(this.selectedIndexValue,this._selectedIndices),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition())),this.checkedStatus=!1,this._onValueChange(),null==this.model.cascadeTo||this._isSingleSelect()||this._cascadeAction(),this.model.checkAll=!1,this._setWatermark()):this._setWatermark()},_createBox:function(e,s){if(!this._checkContains(s)){"none"==this._ulBox.css("display")&&"none"!=this._visibleInput.css("display")&&this._swapUlandInput(!0);var n=i.buildTag("span.e-icon e-close","",{},{unselectable:"on"}),l=i.buildTag("li.e-options").text(e).attr("data-value",s).append(n);return this._on(n,"click",function(e){if(!this.model.enabled)return!1;this._deleteBox(t(e.target).parent())}),l}},_deleteBoxCheck:function(e){for(var i=this._ulBox.children("li"),s=0;s<i.length;s++)t(i[s]).attr("data-value")==e&&t(i[s]).remove()},_deleteLastBox:function(){var e=this._ulBox.children("li:not(.e-search-box)").last();e.hasClass("e-active")?this._deleteBox(e):(this._removeActive(),e.addClass("e-active"))},_deleteBox:function(e){for(var i,s,n,l=0;l<e.length;l++)for(i=t(e[l]).attr("data-value"),s=this._getLi(),n=0;n<s.length;n++)if(t(s[n]).attr("data-value")==i){this._activeItem=n,this._removeTextBoxValue();break}this._isFocused||this._isPopupShown()||this._setWatermark()},_swapUlandInput:function(e){e?(this._visibleInput.css("display","none"),this._ulBox.css("display","block"),this.wrapper.css({height:"auto"})):(this._visibleInput.css("display","block"),this._ulBox.css("display","none"),this.wrapper.css({height:this.model.height}))},_removeActive:function(){this._ulBox.children("li").removeClass("e-active")},_adjustWidth:function(){var e=i.buildTag("span",this._visibleInput.val());this.container.append(e),this._visibleInput.width(e.width()+30),e.remove()},_destroyBoxModel:function(){this._visibleInput.css("display","block"),this.wrapper.height(this.model.height),this._ulBox.remove(),this._ulBox=null,this._off(this.container,"click")},_removeListHover:function(){this.ultag.children("li").removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("hover")}),e.focus()},_getLi:function(){return this.ultag.children("li:not('.e-category'):not('.e-nosuggestion')")},_calcScrollTop:function(e){this.ultag.outerHeight();var i,s,n,l,o=this.ultag.find("li"),r=0;for(this._selectedIndices&&this._selectedIndices.length>0&&"active"==e?(l=this._getLi(),i=this._selectedIndices.length==l.length?0:this._selectedIndices[this._selectedIndices.length-1],(null!=this.model.fields.groupBy||this.ultag.find("li.e-category").length>0)&&(i=t.inArray(l.eq(i)[0],o))):i=this.ultag.find("li.e-"+e).index(),n=0;n<i;n++)r+=o.eq(n).outerHeight(!0);return(s=r-(this.popupList.outerHeight()-o.eq(i).outerHeight(!0))/2)<0?0:s},_getActiveItem:function(){return this._getLi().eq(this._activeItem)},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_roundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupListWrapper.addClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupListWrapper.removeClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").removeClass("e-corner"))},_enabled:function(e){e?this.enable():this.disable()},_destroyDropdown:function(){this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton.outerWidth()),this.wrapper.remove(),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this))},_RightToLeft:function(){this.model.enableRTL?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_dropbtnRTL:function(){this.model.enableRTL?(this.popupListWrapper.addClass("e-rtl").find(".e-resize-handle").addClass("e-rtl-resize"),this.popupList.addClass("e-rtl")):(this.popupListWrapper.removeClass("e-rtl").find(".e-resize-handle").removeClass("e-rtl-resize"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(e){if(this._preventDefaultAction(e),t(e.target).is("li")&&t(e.target).parent().hasClass("e-boxes")||t(e.target).parents("ul").hasClass("e-boxes")&&t(e.target).hasClass("e-icon e-close")||this.model.readOnly||this._readOnly)return!1;this.ultag.find("li").length>0&&(e.which&&1==e.which||e.button&&0==e.button)&&this._OnPopupHideShow()},_OnPopupHideShow:function(){this._isPopupShown()?this._hideResult():(this._showResult(),this.wrapper.focus())},_showFullList:function(){var e=this.model.dataSource;i.DataManager&&e instanceof i.DataManager?e.dataSource.offline||e.dataSource.json&&e.dataSource.json.length>0?this._getFilteredList(e.dataSource.json):this._initDataSource(e):this._getFilteredList(e)},_getFilteredList:function(e){if(!e||!e.length||e.length<1)this._targetElementBinding(),this._renderRemaining();else{var t=i.DataManager(e).executeLocal(this._isPlainType(e)?i.Query():this._getQuery(!0));this._totalCount=t.count,this._listItem(t.result?t.result:t),this._renderPopupList(),this._rawList=this.popupListItems}},_cascadeAction:function(){if(this.model.cascadeTo)for(var e=this.model.cascadeTo.split(","),s=0;s<e.length;s++)t("#"+e[s]).hasClass("e-dropdownlist")?this._doCascadeAction(e[s],this,this.checkedStatus):t("#"+e[s]).on("ejDropDownListcreate",{Obj:this,status:this.checkedStatus},function(e){i.isNullOrUndefined(e.data.Obj.getValue())||""==e.data.Obj.getValue()||e.data.Obj._doCascadeAction(this.id,e.data.Obj,e.data.status)})},_doCascadeAction:function(e,s,n){s._currentValue=s._getField(s.popupListItems[s._activeItem],s.mapFld._value),s.selectDropObj=t("#"+e).ejDropDownList("instance");var l={cascadeModel:s.selectDropObj.model,cascadeValue:s._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",l),s.selectDropObj._setCascadeModel=l.setCascadeModel,i.isNullOrUndefined(s[e])&&(s[e]=s.selectDropObj.model.dataSource),i.DataManager&&s[e]instanceof i.DataManager?s._cascadeOdataInit(s[e],l.requiresDefaultFilter,n,l.cascadeQuery):s._cascadeJsonInit(s.selectDropObj,s[e],s.mapFld._value,l.requiresDefaultFilter,n,l.cascadeQuery)},_cascadeOdataInit:function(e,t,i,s){var n,l=this;l._dQuery=this.selectDropObj._getQuery().clone(),n=l._dQuery.clone(),t?n.where(l.mapFld._value,"equal",l._currentValue):n=s,l.selectDropObj._addLoadingClass(),l._trigger("actionBegin",{requestFrom:"cascade"})||e.executeQuery(n).fail(function(e){l._changedSource=null,l.selectDropObj.setModel({dataSource:l._changedSource,enabled:!1}),l._trigger("actionFailure",{e:e,requestFrom:"cascade"})}).done(function(e){l._trigger("actionSuccess",{e:e,requestFrom:"cascade"}),l._cascadeDataBind(l.selectDropObj,e.result,i),l.selectDropObj._removeLoadingClass()}).always(function(e){l._trigger("actionComplete",{e:e,requestFrom:"cascade"})})},_cascadeJsonInit:function(e,t,s,n,l,o){var r=n?i.Query().where(s,"==",this._currentValue):o,a=i.DataManager(t).executeLocal(r);this._cascadeDataBind(e,a,l)},_cascadeDataBind:function(e,s,n){var l,o,r,a,d,h=e.value();if(this.model.showCheckbox&&n||"none"!=this.model.multiSelectMode&&this.activeItem.hasClass("e-active"))this._changedSource=i.isNullOrUndefined(this._changedSource)?s:this._changedSource.concat(s);else if(this.model.showCheckbox||"none"!=this.model.multiSelectMode){for(l=0;l<s.length;l++)if(this._isPlainType(s)&&this._isPlainType(this._changedSource))this._changedSource.splice(this._changedSource.indexOf(s[l]),1);else for(o=0;o<this._changedSource.length;o++)JSON.stringify(this._changedSource[o])==JSON.stringify(s[l])&&this._changedSource.splice(o,1);e.setModel({dataSource:null})}else this._changedSource=s;if(r=JSON.parse(JSON.stringify(e.model)),e.setModel({dataSource:this._changedSource,enabled:this._changedSource.length>0}),this._isSingleSelect()||e.selectItemByValue(h),(e.model.showCheckbox||"none"!=e.model.multiSelectMode)&&(t("input:hidden[id^='#'][name="+e._id+"]").remove(),e._visibleInput.attr("name",e._name)),e._setSelectedItem)e.setModel(e._setCascadeModel);else{for(a=["value","text","selectedIndex","selectedIndices"],d=0;d<a.length;d++)e.model[a[d]]=r[a[d]];e._finalize()}e._setSelectedItem=!0},_OnMouseEnter:function(e){var i,s;if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover"),t(e.target).is("li:not('.e-category')")&&t(e.target).addClass("e-hover"),t(e.target).hasClass("e-disable")?t(e.target).removeClass("e-hover"):"li"!=e.target.tagName&&(i=t(e.target).parents("li:not('.e-category')"),t(i).addClass("e-hover")),this.ultag.children("li:not('.e-category')").each(function(e){if(t(this).hasClass("e-hover"))return s=e,!1}),this._activeItem=s},_OnMouseLeave:function(){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover")},_OnMouseClick:function(e){var i,s,n;if(this._uiInteract=!0,!this.model.enabled||this.model.readOnly||this._readOnly||this.model.enableFilterSearch&&t(e.target).is("li")&&t(e.target).hasClass("e-nosuggestion"))return!1;(!t(e.target).is("li")||t(e.target).hasClass("e-disable"))&&(t(e.target).is("li")||t(e.target).closest("li").hasClass("e-disable"))||(this._isSingleSelect()?(this._enterTextBoxValue(),this._hideResult()):this.model.showCheckbox?(i="LI"===e.target.nodeName?e.target:t(e.target).parents("li.e-hover"),s=t(i).find(".e-checkwrap")[0],this._onCheckChange({target:s})):(n=t(e.target).is("li")?e.target:t(e.target).closest("li")[0],this._activeItem=t.inArray(n,this._getLi()),t(n).hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue()))},_OnDocumentClick:function(e){if(this.model&&(!this.model.enabled||this.model.readOnly||this._readOnly))return!1;t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper)||t(e.target).is(this._visibleInput)||t(e.target).parents(".e-ddl").is(this.wrapper)?t(e.target).is(this.inputSearch)?this.inputSearch.focus():(t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper))&&this._preventDefaultAction(e):this._hideResult()},_OnKeyPress:function(e){this.model.enableIncrementalSearch&&13!=e.keyCode&&this._OnTextEnter("mozilla"==i.browserInfo().name?e.charCode:e.keyCode),32==e.keyCode&&this._preventDefaultAction(e)},_OnTextEnter:function(e){var i=this;this._incqueryString+=String.fromCharCode(e),this._incqueryString.length>0&&setTimeout(function(){i._incqueryString=""},1e3);var s,n,l=this._getLi(),o=this.model.caseSensitiveSearch,r=this._incqueryString,a=this._incqueryString.length,d=!1;for(o||(r=r.toLowerCase()),s=0;s<l.length&&(n=t(l[s]).text(),(n=o?n:n.toLowerCase()).substr(0,a)==r&&(this._activeItem=s,this._isSingleSelect()?(this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")})):this._isPopupShown()&&(this._removeListHover(),this._addListHover()),d=!0),!d);s++);},_selectItem:function(e){this._isSingle||this._clearTextboxValue(),this._activeItem=e,this._addListHover(),this._enterTextBoxValue()},_focusItem:function(e){this._removeListHover(),this._activeItem=e,this._addListHover()},_selectFocusedItem:function(e){this._focusItem(e),this._enterTextBoxValue()},_selectShiftDown:function(e,i,s){s||this._clearTextboxValue();for(var n=e;n<=i;n++)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&this._selectFocusedItem(n)},_selectShiftUp:function(e,i,s){s||this._clearTextboxValue();for(var n=i;n>=e;n--)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&this._selectFocusedItem(n)},_selectShiftHome:function(e,i,s){if(s||this._clearTextboxValue(),e>=0&&e<=this._listSize-1){if(0==e)this._clearTextboxValue();else for(var n=e;n>=i;n--)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&(this._activeItem=n,this._enterTextBoxValue());this._activeItem=e,0==e&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:0})}},_selectShiftEnd:function(e,i,s){if(s||this._clearTextboxValue(),e<=this._listSize-1){if(e==i)this._clearTextboxValue();else for(var n=e;n<=i;n++)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&(this._activeItem=n,this._enterTextBoxValue());this._activeItem=e,e==i&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this.ultag.outerHeight()})}},_getLastFocusedLi:function(){return this._selectedIndices&&this._selectedIndices.length>0?this._selectedIndices[this._selectedIndices.length-1]:null},_getLastShiftFocusedLi:function(e,i){var s=i?e-1:e+1;return t.inArray(s,this._selectedIndices)<0?e:this._getLastShiftFocusedLi(s,i)},_shiftUp:function(e,t,i){var s,n,l;if(null==e||e<0)this._checkDisableStep(0,t,!1,!1,!0);else if(e>0&&e<=this._listSize-1&&null!=(s=this._disableItemSelectUp(e-t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e-1==this._selectedIndices[this._selectedIndices.length-2])for(n=1;n<=t&&e-n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e+1-n,this._removeTextBoxValue(),this._focusItem(e-n);else l=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!1),this._selectShiftUp(s,l,i);else this._moveUp(e,t,!1)},_shiftDown:function(e,t,i){var s,n,l;if(null==e||e<0)this._checkDisableStep(-1,t,!0,!1,!0);else if(e<this._listSize-1&&null!=(s=this._disableItemSelectDown(e+t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e+1==this._selectedIndices[this._selectedIndices.length-2])for(n=1;n<=t&&e+n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e-1+n,this._removeTextBoxValue(),this._focusItem(e+n);else l=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!0),this._selectShiftDown(l,s,i);else this._moveDown(e,t,!1)},_moveUp:function(e,t,i){null==e||e<=0?this._checkDisableStep(0,t,!1,i):e>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1,i):e>0&&e<=this._listSize-1&&this._checkDisableStep(e,t,!1,i)},_moveDown:function(e,t,i){null==e||e<0?this._checkDisableStep(-1,t,!0,i):0==e?this._checkDisableStep(0,t,!0,i):e>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0,i):e<this._listSize-1&&this._checkDisableStep(e,t,!0,i)},_checkDisableStep:function(e,t,i,s,n){var l,o=i?"_disableItemSelectDown":"_disableItemSelectUp",r=i?e+t:e-t,a=this[o](r);if(null==a)for(l=t;l>=0&&(r=i?e+l:e-l,null==(a=this[o](r)));l--);null!=a&&(s?this._focusItem(a):this._selectItem(a),n&&s&&this._enterTextBoxValue())},_disableItemSelectDown:function(e){return(null==e||e<0)&&(e=0),e<this._listSize?t.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize-1},_disableItemSelectUp:function(e){if((null==e||e<0)&&(e=0),e<this._listSize){if(t.inArray(e,this._disabledItems)<0)return e;if(e>0)return this._disableItemSelectUp(e-1)}},_preventDefaultAction:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},_OnKeyDown:function(e){var t,i,s,n,l;if(this._uiInteract=!0,this.model.enabled)if(this._itemId=null,t=this._getLi(),this._listSize=t.length,s=this.popupList.height(),i=this.ultag.children("li").outerHeight(),n=0!=Math.round(s/i)?Math.round(s/i):5,this._isSingle=this._isSingleSelect(),this._isSingle)switch(e.keyCode){case 38:if(e.altKey){this.ultag.find("li").length>0&&this._hideResult();break}case 33:l=33==e.keyCode?n:1,this._moveUp(this._activeItem,l),this._preventDefaultAction(e,!0);break;case 8:this._preventDefaultAction(e);break;case 40:if(e.altKey){this.ultag.find("li").length>0&&this._showResult();break}case 34:l=34==e.keyCode?n:1,this._moveDown(this._activeItem,l),this._preventDefaultAction(e,!0);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1):this._moveUp(this._activeItem,1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1):this._moveDown(this._activeItem,1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:this._moveDown(this._listSize-1,0),this._preventDefaultAction(e);break;case 36:l=null!=this._activeItem?this._activeItem:this._listSize-1,this._moveUp(l,l),this._preventDefaultAction(e)}else switch(e.keyCode){case 38:e.altKey?this.ultag.find("li").length>0&&this._hideResult():e.shiftKey?this._shiftUp(this._activeItem,1,e.ctrlKey):this._moveUp(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 33:e.shiftKey?this._shiftUp(this._activeItem,n,e.ctrlKey):this._moveUp(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e);break;case 8:this._preventDefaultAction(e);break;case 40:e.altKey?this.ultag.find("li").length>0&&this._showResult():e.shiftKey?this._shiftDown(this._activeItem,1,e.ctrlKey):this._moveDown(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 34:e.shiftKey?this._shiftDown(this._activeItem,n,e.ctrlKey):this._moveDown(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1,!1):this._moveUp(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1,!1):this._moveDown(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:e.shiftKey?this._selectShiftEnd(this._activeItem,this._listSize-1,e.ctrlKey):this._moveDown(this._activeItem,this._listSize,e.ctrlKey),this._preventDefaultAction(e);break;case 36:l=null!=this._activeItem?this._activeItem:this._listSize-1,e.shiftKey?this._selectShiftHome(this._activeItem,0,e.ctrlKey):this._moveUp(this._activeItem,l,e.ctrlKey),this._preventDefaultAction(e)}},_OnKeyUp:function(e){if(this.model.enabled){if(this._preventDefaultAction(e),e.target,null==this._activeItem&&(this._activeItem=this._getLi().index(this.popupList.find("ol,ul").children("li.e-hover"))),""==this._trim(this._visibleInput.val())&&38==e.keyCode&&40==e.keyCode)return this._hideResult(),!1;switch(e.keyCode){case 13:!this._isSingle&&this._isPopupShown()&&(e.ctrlKey||e.shiftKey)&&this._activeItem>=0?this._selectAndUnselect():this._isPopupShown()&&this._hideResult(),this._preventDefaultAction(e);break;case 32:this._isPopupShown()&&this._isSingle&&this._hideResult(),!this._isSingle&&this._isPopupShown()&&this._activeItem>=0&&this._selectAndUnselect(),this._preventDefaultAction(e);break;case 8:"visualmode"==this.model.multiSelectMode&&this._deleteLastBox(),this._preventDefaultAction(e);break;case 46:if("visualmode"==this.model.multiSelectMode||this.model.showCheckbox){this._deleteBox(this._ulBox.children("li.e-active"));break}}}},_isSingleSelect:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode},_selectAndUnselect:function(){this.model.showCheckbox?this._isChecked(this._getActiveItem().find(".e-checkwrap")[0])?this._removeTextBoxValue():this._enterTextBoxValue():"none"!=this.model.MultiSelectMode&&(this._getActiveItem().hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue())},_targetFocus:function(){this.model.enabled&&!this._isFocused&&(this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._isFocused=!0,this._trigger("focusIn"))},_targetBlur:function(){this.model.enabled&&(this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._setWatermark(),this._trigger("focusOut"))},_getLocalizedLabels:function(e){return void 0===this._localizedLabels[e]?i.DropDownList.Locale["en-US"][e]:this._localizedLabels[e]},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"keydown",this._OnKeyDown),this._on(this.popupList,"keydown",this._OnKeyDown),this._on(this.popupList,"keyup",this._OnKeyUp),this._on(this.wrapper,"keyup",this._OnKeyUp),this._on(this.popupList,"keypress",this._OnKeyPress),this._on(this.wrapper,"keypress",this._OnKeyPress)},_unwireEvents:function(){this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"keydown",this._OnKeyDown),this._off(this.popupList,"keydown",this._OnKeyDown),this._off(this.popupList,"keyup",this._OnKeyUp),this._off(this.wrapper,"keyup",this._OnKeyUp),this._off(this.popupList,"keypress",this._OnKeyPress),this._off(this.wrapper,"keypress",this._OnKeyPress),t(window).off("resize",t.proxy(this._OnWindowResize,this))},_multiItemSelection:function(e,t){var i,s;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++)s=t?this._rawList.length-(e.length-i):i,this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"));this._setWatermark()},_appendCheckbox:function(e,t){var i;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i,n=document.createElement("input"),l=document.createElement("span");this._setAttr(n,{type:"checkbox",name:"list"+s,"data-role":"none",id:this._id+"_check"+s})._setClass(n,"e-check-input")._setAttr(l,{name:"list"+s+"_wrap","data-role":"none",id:this._id+"_check"+s+"wrap",unselectable:"on"})._setClass(l,"e-checkwrap e-icon "),l.appendChild(n),e[i].insertBefore(l,e[i].childNodes[0]),this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_onCheckChange:function(e){var i="INPUT"===e.target.nodeName?e.target.parentElement:e.target;this._activeItem=t.inArray(t(i).parents("li")[0],this._getLi()),this._hasClass(i,"e-check-act")?this._removeTextBoxValue():this._enterTextBoxValue()},_isChecked:function(e){return this._hasClass(e,"e-check-act")&&1==t(e).children(".e-check-input")[0].checked},_removeCheck:function(){this._getLi().find(".e-checkwrap").remove()},_resetCheck:function(){var e,t,i=this._getLi();for(i.find(".e-check-act").removeClass("e-check-act").attr("aria-checked",!1),e=i.find(".e-check-input:checked"),t=0;t<e.length;t++)e[t].checked=!1}}),i.DropDownList.Locale=i.DropDownList.Locale||{},i.DropDownList.Locale.default=i.DropDownList.Locale["en-US"]={emptyResultText:"No suggestions",watermarkText:""},i.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},i.VirtualScrollMode={Normal:"normal",Continuous:"continuous"}}),
/*!
*  filename: ej.dialog.min.js
*  version : 2.4.85
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,backgroundScroll:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",backgroundScroll:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(i){var s,n;for(s in i)switch(s){case"closeIconTooltip":this._dialogClose.attr("title",i[s]);break;case"tooltip":this._tooltipText(i[s]);break;case"title":this.model.title=i[s],this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(i[s]),this._updateCaptionWidth();break;case"width":this.model.width=i[s],this._changeSize(),this._updateCaptionWidth(),i[s]=this.model.width;break;case"height":this.model.height=i[s],this._changeSize(),i[s]=this.model.height;break;case"position":this.model.position=i[s],this._dialogPosition();break;case"cssClass":this._changeSkin(i[s]);break;case"showRoundedCorner":this.model.showRoundedCorner=i[s],this._roundedCorner(i[s]);break;case"contentType":this.model.contentType=i[s],this._appendContent(i[s]);break;case"enabled":this.model.enabled=i[s],this._enabledAction(i[s]);break;case"contentUrl":this.model.contentUrl=i[s],this._appendContent(this.model.contentType);break;case"backgroundScroll":this.model.backgroundScroll=i[s],!this.model.backgroundScroll&&this.model.enableModal?e("body").addClass("e-dialog-modal"):e("body").removeClass("e-dialog-modal");break;case"content":case"target":this._ejDialog.appendTo(e(i[s])),this.model.target=this.model.content=i[s],this._dialogPosition();break;case"containment":this._setDragArea(i[s]),t.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target),this.model.position.X=this.model.position.Y="",this._dialogPosition(),this.model.containment=i[s]=this._target,this.model.enableModal&&this._createOverlay(),this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=i[s],this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels,!0),this._tooltipText(this.model.tooltip),this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title),this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=i[s],this._ejDialog.css("minHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"minWidth":this.model.minWidth=i[s],this._ejDialog.css("minWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxHeight":this.model.maxHeight=i[s],this._ejDialog.css("maxHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxWidth":this.model.maxWidth=i[s],this._ejDialog.css("maxWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",i[s]);break;case"faviconCSS":this.model.faviconCSS=i[s],this._favIcon(),this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=i[s],this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize"),this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[s],i[s]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[s],i[s]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove()),this._reRenderScroller();break;case"showHeader":this.model.showHeader=i[s],i[s]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))):(this._ejDialog.find(".e-titlebar").remove(),this._maximize?this.refresh():this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))),this._roundedCorner(this.model.showRoundedCorner),this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=i[s],i[s]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove(),this._enableResize()._enableDrag()._sizeInPercent(),this._reRenderScroller(),this._setContainerSize()._resetScroller(),this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":this.model.footerTemplateId=i[s],this.model.showFooter&&(this._ejDialog.find(".e-footerbar").empty(),n=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(n),this._enableResize());break;case"enableRTL":this.model.enableRTL=i[s],this.model.faviconCSS&&this._favIcon(),i[s]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl"),this.scroller&&this._resetScroller()):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr"),this.scroller&&this._resetScroller());break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[s])),this.model.actionButtons=i[s],this._updateCaptionWidth();break;case"enableModal":this._enableModal(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this._overLay&&this._overLay.remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this.model.enableAnimation&&this._ejDialog.stop(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1,e(window).off("resize",e.proxy(this._reSizeHandler,this))},keyConfigs:[37,38,39,40],_init:function(){this._init=!0,this._widthPercent=null,this._heightPercent=null,this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._initSize={width:this.model.width,height:this.model.height},this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null},this._isOpen=this._maximize=this._minimize=!1,this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._setDimension(),this.model.close||(this.model.close=this.model.Close),this.model.target||(this.model.target=this.model.content),this._responsive(),this._renderControl(),this._wireEvents(),this.scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),this.scrObj&&this.scrObj._resetScroller(),this.hidden=!1,this._init=!1,this._keyNavigation=!1},_responsive:function(){this.width=this.model.width,e(this.element).width(this.width),this.height=this.model.height,e(this.element).height(this.height),e(window).on("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=e(this._dialogTitlebar).outerWidth(),e(this.contentDiv).width(this.width),e(this.contentDiv).children().width(this.width),this.model.height=this.height=e(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-e(this._dialogTitlebar).outerHeight()-e(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height())),t.isNullOrUndefined(this.element)||this._collapsible||this._resetScroller()},_setLocaleCulture:function(e,t){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=e.closeIconTooltip),t&&(this.model.tooltip=this.localizedLabels.tooltip,this.model.title=this.localizedLabels.title),JSON.stringify(this.model.tooltip)===JSON.stringify(this.defaults.tooltip)&&(this.model.tooltip=e.tooltip),this.model.title===this.defaults.title&&(this.model.title=e.title)},_setDragArea:function(i){t.isNullOrUndefined(i)?this._target=null:"string"==typeof i?("parent"==i&&(this._target=e(this.element).parent()),"document"==i.toLowerCase()&&(this._target=e(document)),"window"==i.toLowerCase()?this._target=e(window):e(i).length>0&&(this._target=e(i))):"object"==typeof i?i.length>0&&(this._target=i):this._target=null},_addAttr:function(t){var i=this;e.map(t,function(e,t){if("class"==t)i._ejDialog.addClass(e);else if("disabled"==t&&"disabled"==e)i.model.enabled=!1,i._enabledAction(!1);else if(i._ejDialog[0].hasAttribute("style")){var s=i._ejDialog[0].getAttribute("style")+e;i._ejDialog.attr(t,s)}})},_tooltipText:function(i){e.extend(this.model.tooltip,i),!t.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close),!t.isNullOrUndefined(this._dialogCollapsible)&&(i.collapse||i.expand)&&(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand)),!t.isNullOrUndefined(this._dialogMaximize)&&(i.maximize||i.restore)&&(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogMinimize)&&(i.minimize||i.restore)&&(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogPin)&&(i.pin||i.unPin)&&(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){var i,s,n;this._cloneElement=this.element.clone(),this.element.attr("tabindex",0).attr({role:"dialog","aria-labelledby":this.element.prop("id")+"_title"}),this._ejDialog=t.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(""==this.element.prop("id")?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0}),this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize"),this.wrapper=this._ejDialog,this._addAttr(this.model.htmlAttributes),this._setDragArea(this.model.containment),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,s=t.isNullOrUndefined(i)?document.body:i,(n=e(s).find("#"+this._id+"_wrapper").get(0))&&e(n).remove(),this._ejDialog.appendTo(s),this.model.enableRTL&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon()),this._appendContent(this.model.contentType),this._enableResize()._enableDrag()._setSize(),"auto"!=this.model.height&&this._sizeInPercent(),"ajax"!=this.model.contentType&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize()),this._roundedCorner(this.model.showRoundedCorner),this._enabledAction(this.model.enabled),"auto"==this._sizeType.width&&(this._maxWidth=this.model.width),"auto"==this._sizeType.height&&(this._maxHeight=this.model.height)},_setContainerSize:function(){if("auto"!=this.model.height){var t=this._ejDialog.outerHeight()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1;this.contentDiv.height(t),this.element.outerHeight(t)}return this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height},this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null,this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null,this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){if(this.model.enableResize){this._ejDialog.addClass("e-resizable");var e=t.buildTag("div.e-icon e-resize-handle");this.model.showFooter?e.appendTo(this._dialogFooterbar):e.appendTo(this._ejDialog),this._resizeDialog()}return this},_changeSkin:function(e){this.model.cssClass!=e&&this._ejDialog.removeClass(this.model.cssClass).addClass(e)},_enableModal:function(e){e?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(e){e?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),t.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),t.buildTag("div.e-disable-overlay").appendTo(this.wrapper),t.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),"string"!=typeof this._elementTitle&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog),this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=t.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var e=this.model.faviconCSS&&!t.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&!t.isNullOrUndefined(this._dialogTitlebar)&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-e),this},_iconsRender:function(i){for(var s=0;s<i.length;s++)switch("msie"==t.browserInfo().name&&t.browserInfo().version<=8?e.trim(i[s]):i[s].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(i[s])}},_customIconsRender:function(e){this._customIcon=t.util.buildTag("div#"+this.element[0].id+"_"+e+"button.e-dialog-icon e-icon e-"+e,null,null).attr("tabIndex","0").attr("title",e),this._customIcon.appendTo(this._dialogTitlebar),this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(t){if(!this.element.hasClass("e-disable")){var i={cancel:!1,buttonID:e(t.target).attr("id"),event:t.type,model:this.model,currentTarget:t.currentTarget.title};this._trigger("actionButtonClick",i)}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(i){var s,n,l,o,r;this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box"),s=this,t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(i)?(this.dialogIframeContent=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild)):"ajax"==i?(this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url)):"iframe"==i?(this.element.children(".e-iframe").length>0?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=t.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&e(this.iframe).load(function(){s.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):"image"==i?(n=t.buildTag("img.e-images","","",{src:this.model.contentUrl}),this.element.append(n).show().appendTo(this.contentDiv),e(n).on("load",function(){s._dialogPosition()}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):this.element.show().appendTo(this.contentDiv),this._ejDialog.find("div.e-resize-handle").length>0?0==this._ejDialog.find(".e-footerbar").length&&this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle")):(l=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(l)?0==this._ejDialog.find(".e-footerbar").length?this.contentDiv.appendTo(this._ejDialog):this.contentDiv.insertBefore(this._dialogFooterbar):(this.contentDiv.appendTo(this._ejDialog),o=e("#"+this.contentDiv.find("iframe").attr("id")),e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(l),"mozilla"==t.browserInfo().name&&setTimeout(function(){e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(l)},500))),this.model.showFooter&&0==this._ejDialog.find(".e-footerbar").length&&(this._renderFooterBar(),null!=this.model.footerTemplateId&&(r=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(r)))},_roundedCorner:function(e){this._ejDialog[e?"addClass":"removeClass"]("e-corner"),this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content"),this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):this.model.showHeader||this.model.showFooter||this.contentDiv.addClass("e-dialog-content"))},_reRenderScroller:function(){if(null!=this.scroller&&(this.scroller.refresh(!0),!this.model.enableRTL)){if(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=0,i=0;else e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerHeight();Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=i+t,this.scroller._vScrollbar._scrollData.handle-=i,this.scroller._vScrollbar._scrollData.handleSpace-=i+t,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(e-i-t))}if((!this.scroller._vScrollbar||!this.scroller._vScrollbar._scrollData)&&this.scroller._hScrollbar&&this.scroller._hScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter){var s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width();t=0,i=0}else s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerWidth();this.scroller._hScrollbar.model.width-=i+t,this.scroller._hScrollbar._scrollData.handle-=i+t,this.scroller._hScrollbar._scrollData.handleSpace-=i+t,this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData),this.scroller._hScrollbar.element.find("> div.e-hscroll").width(s-i-t)}}},_dialogMaxZindex:function(){var t,i,s,n=this.element.parents();return t=e("body").children(),e(t).each(function(e,t){n.push(t)}),i=e(this.model.target).children(),e(i).each(function(e,t){n.push(t)}),!(s=Math.max.apply(s,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||s<1e4?s=1e4:s+=1,s},_setZindex:function(){var e=this._dialogMaxZindex();this.model.zIndex<=e&&this._ejDialog.css({zIndex:e+1})},_createOverlay:function(){var i,s=this._ejDialog.css("zIndex");t.isNullOrUndefined(this._overLay)||this._overLay.remove(),this.model.backgroundScroll||e("body").addClass("e-dialog-modal"),this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:s-1}),e(this._overLay).addClass("e-widget"),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,this._overLay.appendTo(t.isNullOrUndefined(i)?document.body:i);var n=t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?"fixed":"absolute",l=t.isNullOrUndefined(i)||"fixed"==n||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().left,o=t.isNullOrUndefined(i)||"fixed"==n||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().top;this._overLay.css({top:o,left:l,position:n})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var s=this,n=this.model.title,l={success:function(e){try{s._ajaxSuccessHandler(e,t,i,n)}catch(e){}},error:function(e){try{s._ajaxErrorHandler({status:e.status,responseText:e.responseText,statusText:e.statusText},t,i,n)}catch(e){}},complete:function(){try{s._setContainerSize(),s._resetScroller(),s.model.showOnInit||s._setHiddenDialogSize()}catch(e){}}};e.extend(!0,l,this.model.ajaxSettings),this._sendAjaxRequest(l)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(e,t,i){t.removeClass("e-load"),t.html(e).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.model.showOnInit&&this.open(),this._trigger("ajaxSuccess",{data:e,url:i})},_ajaxErrorHandler:function(e,t,i){t.addClass("e-dialog-loaded").appendTo(this.contentDiv),this._dialogPosition().open(),this._trigger("ajaxError",{data:e,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0"),"close"==this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):"close"!=this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):("close"==this.model.closeIconTooltip&&this.model.tooltip.close,this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close)),this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down"),this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore"),this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore"),this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin"),this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){if(this._dialogFavIcon)e=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom");else{this._dialogFavIcon=t.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")});var e=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});e.appendTo(this._dialogFavIcon),this._dialogFavIcon.appendTo(this._dialogTitlebar)}this.model.faviconCSS?e.addClass(this.model.faviconCSS):this._dialogFavIcon.remove(),this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),i=parseInt(this.model.maxWidth),s=parseInt(this.model.maxHeight),n=parseInt(this.model.width),l=parseInt(this.model.height),o=this._getParentObj();isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(e=this._convertPercentageToPixel(o.outerWidth(),e)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(t=this._convertPercentageToPixel(o.outerHeight(),t)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(i=this._convertPercentageToPixel(o.innerWidth(),i)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(s=this._convertPercentageToPixel(o.innerHeight(),s)),isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(n=this._convertPercentageToPixel(o.innerWidth(),n)),isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(l=this._convertPercentageToPixel(o.innerHeight(),l)),(i&&n>i||e&&n<e)&&(this.model.width=n>i?i:e),(s&&l>s||t&&l<t)&&(this.model.height=l>s?s:t)},_setSize:function(){var e=this.model;return this._minMaxValidation(),this._ejDialog.css({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}),this._ejDialog.css({height:e.height,minHeight:e.minHeight,maxHeight:e.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var i,s=this._ejDialog.outerHeight(!0)-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),n={width:"0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?Math.round(this._ejDialog.width()):Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:"0px"==this.contentDiv.css("border-width")?s:s-1,enableTouchScroll:!1};"auto"==this.model.height&&(this.element.height()<this.model.maxHeight||!this.model.maxHeight)&&!this._maximize&&(n.height="auto"),"auto"!=this.model.width||this._maximize||(n.width=this.model.width),this.contentDiv.ejScroller(n),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._padding=parseInt(e(this.element).css("padding-top"))+parseInt(e(this.element).css("padding-bottom")),"none"==e(this._ejDialog).css("display")&&(this.hidden=!0,this._ejDialog.css({display:"block"})),!t.isNullOrUndefined(this.contentDiv.height())&&this.contentDiv.height()>0&&(i=t.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:!this.scroller._hScrollbar&&this.scroller._vScrollbar?this.contentDiv.outerHeight():this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),"auto"!=this.model.height&&"100%"!=this.model.height?this.element.css({height:i-1}):this.element.css("height",this.model.height),"auto"!=this.model.height&&"100%"!=this.model.height||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||"auto"==this.model.width||"100%"==this.model.width?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth("0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight})),this.hidden&&this._ejDialog.css({display:"none"}),this.hidden=!1},_updateScroller:function(e,t){this.contentDiv.ejScroller({width:t,height:e,enableRTL:this.model.enableRTL,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._changeSize()},_dragDialog:function(){var i=this;this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(e){return e.element.attr("aria-grabbed",!0),i._clickHandler(),!i.dialogPin&&i.model.allowDraggable&&i.model.enabled?i._trigger("dragStart",{event:e})?(e.cancel=!0,!1):void 0:(e.cancel=!0,!1)},drag:function(e){i._trigger("drag",{event:e})},dragStop:function(s){var n,l;i._ejDialog.focus(),s.element.attr("aria-grabbed",!1),i.element.find("> .e-draggable.e-titlebar")&&((n=e("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&n.option("cursorAt",i.element.offset())),l=this.helper.offsetParent().offset(),i._trigger("dragStop",{event:s}),i.model.position.X=t.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[l.left+parseFloat(this.helper.offsetParent().css("border-left-width"))],i.model.position.Y=t.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[l.top+parseFloat(this.helper.offsetParent().css("border-top-width"))],i._positionChanged=!0,i.dlgresized=!0},helper:function(){return e(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var t,i=this,s=!1,n=parseInt(this.model.minWidth),l=parseInt(this.model.minHeight),o=parseInt(this.model.maxWidth),r=parseInt(this.model.maxHeight);return t=this._getParentObj(),isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(n=this._convertPercentageToPixel(t.outerWidth(),n)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(l=this._convertPercentageToPixel(t.outerHeight(),l)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(o=this._convertPercentageToPixel(t.innerWidth(),o)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(r=this._convertPercentageToPixel(t.innerHeight(),r)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:l,minWidth:n,maxHeight:r,maxWidth:o,handle:"e-widget-content",resizeStart:function(e){if(i.dlgresized=!0,!i.model.enabled)return!1;s||i._trigger("resizeStart",{event:e}),s=!0,i.model.position={X:i._ejDialog.css("left"),Y:i._ejDialog.css("top")},i._dialogPosition()},resize:function(t){i.dlgresized=!0;var s=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(s).outerHeight(),i.model.width=e(s).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),i._updateCaptionWidth(),i._trigger("resize",{event:t}),i._sizeType={width:"px",height:"px"},this.scrObj&&this.scrObj._resetScroller()},resizeStop:function(t){i.dlgresized=!0,i._ejDialog.focus(),i._sizeInPercent();var n=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(n).outerHeight(),i.model.width=e(n).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),s&&i._trigger("resizeStop",{event:t}),s=!1,i._setDimension()},helper:function(){return e(i._ejDialog)}}),this}},_dialogPosition:function(){if(this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.containment)&&t.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),""!=this.model.position.X||""!=this.model.position.Y)if(this._ejDialog.css("position","absolute"),t.isNullOrUndefined(this.model.target)&&t.isNullOrUndefined(this.model.containment))this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y);else{var i=t.isNullOrUndefined(this.model.containment)?this.model.target:this.model.containment;this.dlgresized||this._keyNavigation?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(this._ejDialog.css("left",e(i).offset().left+parseInt(this.model.position.X)),this._ejDialog.css("top",e(i).offset().top+parseInt(this.model.position.Y)))}else this._centerPosition();return this},_centerPosition:function(){var i,s,n,l,o=0,r=0;t.isNullOrUndefined(this.model.target)&&(t.isNullOrUndefined(this._target)||e(this._target).is(e(document))||e(this._target).is(e(window)))?(l=document.documentElement,o=(e(window).outerWidth()>this._ejDialog.width()?(e(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||l.scrollLeft),r=(e(window).outerHeight()>this._ejDialog.height()?(e(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||l.scrollTop)):("static"==(i=t.isNullOrUndefined(this._target)?e(this.model.target):e(this._target)).css("position")&&(s=i.offsetParent().offset(),o=(n=i.offset()).left-s.left,r=n.top-s.top),i.outerWidth()>this._ejDialog.width()&&(o+=(i.outerWidth()-this._ejDialog.width())/2),i.outerHeight()>this._ejDialog.height()&&(r+=(i.outerHeight()-this._ejDialog.height())/2)),this._ejDialog.css({top:r,left:o}),this._ejDialog.css("position","absolute")},_closeClick:function(e){"touchstart"==e.type&&e.preventDefault(),this.model.enabled&&(e.stopPropagation(),this.close(e))},_collapsibleClick:function(t){this.model.enabled&&(e(t.target).hasClass("e-arrowhead-up")?this._actionCollapse(t):e(t.target).hasClass("e-arrowhead-down")&&this._actionExpand(t))},_actionCollapse:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:!!e}),this._collapsible=!0)},_actionExpand:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:!!e}),this._collapsible=!1)},_maximizeClick:function(i){if(this.model.enabled){var s=e(i.target),n=this._dialogMaximize;s.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),s.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),this._maximize=!0,this._minimize=!1;var i=this;this._dialogCollapsible&&!t.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0),1==this._collapseValue&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){i.refresh(),i._reRenderScroller()}),this._resetScroller(),e(this.contentDiv).is(":hidden")&&this.contentDiv.show()},_actionRestore:function(){this.element.height("").width(""),this.contentDiv.height("").width(""),this._restoreDialog(),this._maximize=this._minimize=!1},_minimizeClick:function(i){if(this.model.enabled){var s=e(i.target),n=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize;s.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}},_actionMinimize:function(){var t;e(window).height(),this._ejDialog.height(),this.element.height();this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css("minHeight","0"),this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?t=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),t=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",t+2),this._hideIcon(!1)):this._ejDialog.css("height",""),this.contentDiv.hide(),this.model.showFooter&&this._dialogFooterbar.hide(),this._maximize=!1,this._minimize=!0},_hideIcon:function(i){var s=this._dialogCollapsible?this._dialogCollapsible:null;i?(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(t){if(this.model.enabled){var i=e(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin))}},_restoreDialog:function(){this.contentDiv.show(),this.model.showFooter&&this._dialogFooterbar.show(),this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow"),this._setSize()._resetScroller(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(){var e=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<e&&this._ejDialog.css({zIndex:e+1})},_mouseClick:function(t){t.currentTarget==this._id&&(e(t.target).hasClass("e-dialog")||e(t.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),e(t.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(t){var i;i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,this.model.allowKeyboardNavigation&&this.model.enabled&&e(t.target).hasClass("e-dialog")&&e.inArray(i,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(i,t.ctrlKey),t.preventDefault()),this.model.closeOnEscape&&27===i&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(t),t.preventDefault())),13===i&&this.model.enabled&&(e(t.target).hasClass("e-close")?this.close(t):(e(t.target).hasClass("e-arrowhead-up")||e(t.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(t),e(t.target).hasClass("e-maximize")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMaximize)?this._maximizeClick(t):(e(t.target).hasClass("e-minus")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMinimize))&&this._minimizeClick(t),(e(t.target).hasClass("e-pin")||e(t.target).hasClass("e-unpin"))&&this._pinClick(t)),9==i&&this.model.enableModal&&this._focusOnTab(t)},_focusOnTab:function(t){var i=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')");i=e(i).find("a, button, :input, select, [tabindex]:not('')"),t.shiftKey?i[i.index(t.target)-1]||(t.preventDefault(),i.last().focus()):i[i.index(t.target)+1]||(t.preventDefault(),i[0].focus())},_keyPressed:function(e,t){switch(this._keyNavigation=!0,e){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:0==this._ejDialog.position().left?0:this._ejDialog.position().left,Y:this._ejDialog.position().top>3?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:this._ejDialog.position().left>3?this._ejDialog.position().left-3:0,Y:0==this._ejDialog.position().top?0:this._ejDialog.position().top})}},_resizing:function(e,t){this.model.enableResize&&this.option(e,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var e=this._getParentObj();return this._widthPercent="%"==this._sizeType.width?parseFloat(this.model.width):this._convertPixelToPercentage(e.outerWidth(),this._ejDialog.outerWidth()),this._heightPercent="%"==this._sizeType.height?parseFloat(this.model.height):this._convertPixelToPercentage(e.outerHeight(),this._ejDialog.outerHeight()),this._widthPercent>=100&&(this._widthPercent=100,this._ejDialog.outerWidth(e.outerWidth()),this.model.width=this._ejDialog.width()),this._heightPercent>=100&&(this._heightPercent=100,this._ejDialog.outerHeight(e.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return t.isNullOrUndefined(this.model.containment)?t.isNullOrUndefined(this.model.target)?e(document):e(this.model.target):e(this.model.containment)},_convertPercentageToPixel:function(e,t){return Math.round(t*e/100)},_convertPixelToPercentage:function(e,t){return Math.round(t/e*100)},_reSizeHandler:function(){var t;this._maximize?this._resetScroller():(""!=this.model.position.X&&(""!=this.model.position.Y||this._minimize)||this._centerPosition(),t=this._getParentObj(),this._change=!1,this._windowSize.outerWidth!=e(window).outerWidth()?"%"==this._sizeType.width?this._percentageWidthDimension(t):this._pixelsWidthDimension(t):this._windowSize.outerHeight!=e(window).outerHeight()&&("%"==this._sizeType.height?this._percentageHeightDimension(t):this._pixelsHeightDimension(t)),this._change&&this._resizeContainer(t),this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._centerPosition())},_setDimension:function(){t.isNullOrUndefined(this.model.maxWidth)?t.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:("px"==this._sizeType.width||"auto"==this._sizeType.width)&&(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth,t.isNullOrUndefined(this.model.maxHeight)?t.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:("px"==this._sizeType.height||"auto"==this._sizeType.height)&&(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(e){this._ejDialog.outerWidth(this._convertPercentageToPixel(e.outerWidth(),this._widthPercent)),this._change=!0},_percentageHeightDimension:function(e){this._ejDialog.outerHeight(this._convertPercentageToPixel(e.outerHeight(),this._heightPercent)),this._change=!0},_pixelsWidthDimension:function(t){e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<e(t).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(t.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(t){e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<e(t).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(t.outerHeight()),this._change=!0)},_setWidth:function(e){this._ejDialog.outerWidth(e.outerWidth()),this._change=!0},_setHeight:function(e){this._ejDialog.outerHeight(e.outerHeight()),this._change=!0},_resizeContainer:function(){this.contentDiv.width(this._ejDialog.width()),this.element.outerWidth(this.contentDiv.width());var i=this._ejDialog.height()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.element.outerHeight(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.scroller=this.contentDiv.ejScroller({width:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this._ejDialog.width():this._ejDialog.width()-2),height:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this.element.outerHeight():this.element.outerHeight()-2),rtl:this.model.rtl,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),""==this.model.position.X||""==this.model.position.Y&&!this._minimize||this._positionChanged?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight()),this._updateCaptionWidth(),this._change=!1},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return!!(this.model.isResponsive||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&"auto"!=this.model.height)},_wireResizing:function(){e(window)[this._enableWindowResize()?"on":"off"]("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown),this._on(this._ejDialog,"click",this._mouseClick),this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){var i,s,n,l,o;return!!this._isOpen||1!=this._trigger("beforeOpen")&&(this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition(),i=this,s={},this._ejDialog.show(),this.model.enableAnimation&&(this._ejDialog.css({opacity:0}),"slide"==this.model.animation.show.effect?(l=this._ejDialog.css("left"),this._ejDialog.css({left:-this._ejDialog.width()}),s={left:l,opacity:1}):s={opacity:1}),this._ejDialog.animate(s,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){i.model&&("none"==i._ejDialog.css("display")&&i._ejDialog.show(),i._ejDialog.eq(0).focus(),i._ejDialog.css({opacity:""}),i.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),i._trigger("open"),i._updateCaptionWidth(),i.model.enableModal&&!i.model.backgroundScroll&&(i._ejDialog.height()>e(window).height()&&i._ejDialog.css("height",e(window).height()),i.model.height=e(window).height(),i._overLay.css("position","fixed"),i.scroller.refresh(!0),i.refresh()),(i.model.maxHeight||i.model.maxWidth)&&(n=i._ejDialog.outerHeight(!0)-(i._dialogTitlebar?i._dialogTitlebar.outerHeight(!0):0),("auto"==i.model.height||"100%"==i.model.height)&&(n=i.model.height),i._updateScroller(t.isNullOrUndefined(this.contentDiv)?n-2:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?i._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width")),i.scroller.refresh()))}),1==this.model.enableModal&&this._createOverlay(),this._isOpen=!0,this.element.find("> .e-draggable.e-titlebar")&&((o=e("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&o.option("cursorAt",this.element.offset())),this)},close:function(t){var i,s,n;return!this._isOpen||!this.model.enabled||(i=!!t,1!=this._trigger("beforeClose",{event:t,isInteraction:i})&&(this._isOpen=!1,s=this,n={},this.model.enableAnimation&&(n="slide"==this.model.animation.hide.effect?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(n,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){s._trigger("close",{event:t,isInteraction:i}),s._ejDialog.hide()}),this.model.enableModal&&(this._overLay&&this._overLay.remove(),this.model.backgroundScroll||e("body").removeClass("e-dialog-modal")),this))},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(e){return this.model.title=e,this._titleText.text(e),this._updateCaptionWidth(),this},setContent:function(e){return!!this.model.enabled&&(this.element.html(e),this._resetScroller(),this)},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),e(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),e(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),e(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var t=this._minimize;return this._actionRestore(),e(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(t?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,e(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,e(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}}),t.Dialog.Locale=t.Dialog.Locale||{},t.Dialog.Locale.default=t.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion),
/*!
*  filename: ej.button.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejButton","ej.Button",{element:null,model:null,validTags:["button","input"],_setFirst:!1,_rootCSS:"e-button",_requiresID:!0,defaults:{size:"normal",type:"submit",height:"",width:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",showRoundedCorner:!1,cssClass:"",prefixIcon:null,suffixIcon:null,enableRTL:!1,repeatButton:!1,timeInterval:"150",create:null,click:null,destroy:null},dataTypes:{size:"enum",enabled:"boolean",type:"enum",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",prefixIcon:"string",suffixIcon:"string",cssClass:"string",repeatButton:"boolean",enableRTL:"boolean",timeInterval:"string",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},_init:function(){this._cloneElement=this.element.clone(),this._initialize(),this._render(),this._controlStatus(this.model.enabled),this._wireEvents(this.model.repeatButton),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e),"disabled"==t&&"disabled"==e&&i.disable()})},_destroy:function(){this.element.removeClass(this.model.cssClass+"e-ntouch e-btn e-select e-disable e-corner e-widget").removeAttr("role aria-describedby aria-disabled"),this.element.removeClass("e-btn-"+this.model.size),this.model.contentType&&"textonly"!=this.model.contentType&&this.element.append(this._cloneElement.text())&&this.imgtxtwrap[0].remove()},_setModel:function(e){for(var t in e)switch(t){case"size":this._setSize(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this._setMajorIcon(e[t]);break;case"suffixIcon":this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"timeInterval":this.model.timeInterval=e[t];break;case"htmlAttributes":this._addAttr(e[t])}},_setSize:function(e){this.element.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal"),this.element.addClass("e-btn-"+e)},_setType:function(e){this.element.prop({type:e})},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(e){this.element.css("width",e)},_setText:function(e){"inputButton"==this.buttonType?this.element.val(e):this.model.contentType==t.ContentType.TextOnly?this.element.html(e):this.textspan.html(e),this.model.text=e},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e),this.model.prefixIcon=e},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e),this.model.suffixIcon=e},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this._renderButtonNormal())},_setImagePosition:function(e){this.model.contentType==t.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this._renderButtonNormal())},_setRTL:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass),this.element.addClass(e))},_initialize:function(){t.isTouchDevice()||this.element.addClass("e-ntouch"),this.element.is("input")?this.buttonType="inputButton":this.element.is("a")||this.element.is("button")?this.buttonType="tagButton":this.element.removeClass("e-button"),this.element.attr("type")?this.model.type=this.element.attr("type"):this._setType(this.model.type),this._timeout=null},_render:function(){this._setSize(this.model.size),this._setHeight(this.model.height),this._setWidth(this.model.width),this._setRTL(this.model.enableRTL),this.element.addClass(this.model.cssClass+" e-btn e-select e-widget").attr("role","button"),"inputButton"==this.buttonType?(this.element.addClass("e-txt"),null!=this.model.text&&""!=this.model.text?this.element.val(this.model.text):this.model.text=this.element.val()):this._renderButtonNormal(),this._roundedCorner(this.model.showRoundedCorner),this.model.text&&this.element.attr("aria-describedby",this.model.text)},_renderButtonNormal:function(){if((null==this.model.text||""==this.model.text)&&(this.model.text=this.element.html()),this.element.empty(),this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.model.contentType.indexOf("image")>-1&&(this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("div")),this.model.contentType==t.ContentType.TextAndImage){switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}this.element.append(this.imgtxtwrap)}else this.model.contentType==t.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageBoth?(this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageOnly?(this.imgtxtwrap.append(this.majorimgtag),this.element.append(this.imgtxtwrap)):(this.element.addClass("e-txt"),this.element.html(this.model.text))},_roundedCorner:function(e){1==e?this.element.addClass("e-corner"):this.element.removeClass("e-corner")},_wireEvents:function(t){t&&(this._on(this.element,"mousedown",this._btnRepatMouseClickEvent),this._on(e(document),"mouseup",this._mouseUpClick),this._on(this.element,"keyup",this._btnRepatKeyUpEvent),this._on(e(document),"keypress",this._btnRepatKeyDownEvent)),this._on(this.element,"click",this._btnMouseClickEvent)},_btnMouseClickEvent:function(e){var t,i=this;if(!i.model.enabled)return!1;i.element.hasClass("e-disable")||(t={target:e.currentTarget,e:e,status:i.model.enabled},i._trigger("click",t))},_btnRepatMouseClickEvent:function(e){var t=this;if(!t.model.enabled)return!1;t.element.hasClass("e-disable")||(t.model.enabled,(0==e.button||1==e.which)&&(t._timeout=setInterval(function(){t._trigger("click",{target:e.currentTarget,status:t.model.enabled})},this.model.timeInterval)))},_mouseUpClick:function(){clearTimeout(this._timeout)},_btnRepatKeyDownEvent:function(e){var t,i=this;i.element.hasClass("e-disable")||(t={status:i.model.enabled},(32==e.keyCode||13==e.keyCode)&&i._trigger("click",t))},_btnRepatKeyUpEvent:function(e){(32==e.keyCode||13==e.keyCode)&&clearTimeout(this._timeout)}}),t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},t.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"},t.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}),
/*!
*  filename: ej.autocomplete.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min"],e):e()}(function(){!function(e,t,i){t.widget("ejAutocomplete","ej.Autocomplete",{element:null,model:null,validTags:["input"],_ignoreOnPersist:["fields","dataSource","query","focusIn","focusOut","change","select","create","destroy","open","close","actionComplete","actionSuccess","actionFailure"],_setFirst:!1,_rootCSS:"e-autocomplete",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{dataSource:null,query:null,fields:{text:null,key:null,category:null,groupBy:null,htmlAttributes:null},locale:"en-US",template:null,allowGrouping:!1,enableDistinct:!1,allowSorting:!0,sortOrder:"ascending",htmlAttributes:{},multiSelectMode:"none",delimiterChar:",",allowAddNew:!1,addNewText:"Add New",showRoundedCorner:!1,readOnly:!1,cssClass:"",watermarkText:null,value:"",selectValueByKey:null,filterType:"startswith",caseSensitiveSearch:!1,showLoadingIcon:!0,showResetIcon:!1,itemsCount:0,minCharacter:1,delaySuggestionTimeout:200,showPopupButton:!1,highlightSearch:!1,enableAutoFill:!1,enableRTL:!1,enabled:!0,visible:!0,height:"",width:"",emptyResultText:"No suggestions",animateType:"slide",showEmptyResultText:!0,enablePersistence:!1,popupHeight:"152px",popupWidth:"auto",autoFocus:!1,multiColumnSettings:{enable:!1,showHeader:!0,stringFormat:"{0}",columns:[{field:null,headerText:null,textAlign:"left",headerTextAlign:"left",cssClass:"",type:"string",filterType:"startswith"}]},validationRules:null,validationMessage:null,focusIn:null,focusOut:null,change:null,select:null,create:null,open:null,close:null,destroy:null,actionBegin:null,actionComplete:null,actionSuccess:null,actionFailure:null},dataTypes:{autoFocus:"boolean",watermarkText:"string",locale:"string",cssClass:"string",filterType:"enum",caseSensitiveSearch:"boolean",showLoadingIcon:"boolean",template:"string",allowGrouping:"boolean",enableDistinct:"boolean",allowSorting:"boolean",sortOrder:"enum",allowAddNew:"boolean",addNewText:"string",showRoundedCorner:"boolean",showResetIcon:"boolean",readOnly:"boolean",itemsCount:"number",animateType:"enum",minCharacter:"number",showPopupButton:"boolean",highlightSearch:"boolean",enableAutoFill:"boolean",enableRTL:"boolean",multiSelectMode:"enum",delimiterChar:"string",emptyResultText:"string",showEmptyResultText:"boolean",enabled:"boolean",visible:"boolean",enablePersistence:"boolean",dataSource:"data",query:"data",fields:"data",validationRules:"data",validationMessage:"data",htmlAttributes:"data",multiColumnSettings:"data"},observables:["value","selectValueByKey"],value:t.util.valueFunction("value"),_selectValueByKey:t.util.valueFunction("selectValueByKey"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.target.disabled=!1,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.removeAttr("disabled"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-disable").attr({"aria-disabled":!1}),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable").attr({"aria-disabled":!1}))},disable:function(){this.model.enabled&&(this._hideResult(),this.model.enabled=!1,this.target.disabled=!0,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.model.showPopupButton&&this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),"visualmode"==this.model.multiSelectMode&&this._ulBox&&this._ulBox.addClass("e-disable").attr({"aria-disabled":!0}))},clearText:function(){"visualmode"==this.model.multiSelectMode&&this._deleteBox(this._ulBox.children("li")),this.element.val(""),this._valueChange(),this._isFocused?this.element.blur():this._focusOutAction(),this._hideResult()},getValue:function(){var e=this.value();return null==e?"":e},getSelectedItems:function(){return this._isFocused&&"visualmode"!=this.model.multiSelectMode&&this._updateSelectedItemArray(this.getValue()),this._selectedItems},_setValue:function(i){var s,n,l;if(this._isWatermark||this._hiddenSpan.css("display","none"),("object"==typeof i||"number"==typeof i&&isNaN(i)||""==e.trim(i))&&(i=""),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(""),this.element.val(""),i)if("visualmode"==this.model.multiSelectMode)if(this._selectedItems=[],this._modelValue=i,this._deleteBox(this._ulBox.children("li")),s=i.split(this.model.delimiterChar),this.element.width(1).val("").removeAttr("placeholder"),this._hiddenInput||(this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),t.DataManager&&this.model.dataSource instanceof t.DataManager)this._createBoxForObjectType(s);else if(this.suggestionListItems=this.model.dataSource,this.suggestionListItems&&"object"!=typeof this.suggestionListItems[0])for(this._hiddenInput.val(i),n=0,l=s.length;n<l;n++)s[n]&&(this._ulBox.append(this._createBox(s[n])),this._selectedItems.push(s[n]));else this._createBoxForObjectType(s);else this.element.val(i),this._updateSelectedItemArray(i);return"visualmode"!=this.model.multiSelectMode&&this.value(this.element.val()),this._preVal=this.element.val(),this._isWatermark||this._setWatermarkTxt(),i},_createBoxForObjectType:function(i){for(var s,n=this,l=this._declareVariable(),o=0,r=i.length;o<r;o++)""!=(s=e.trim(i[o]))&&(t.DataManager&&this.model.dataSource instanceof t.DataManager?(this._dataQuery=this._getQuery().where(l[0],"equal",s,!1),this._promise=this.model.dataSource.executeQuery(this._dataQuery),this._promise.done(function(e){var i=e.result;n._strData=i instanceof Array&&i.length?i[0]:s,t.isNullOrUndefined(n._strData[l[1]])||n._selectKeyInit(),n._selectedItems.push(n._strData)}).fail(function(){n._selectedItems.push(s)})):(this._dataQuery=t.Query().where(l[0],"equal",s,!1),this._promise=t.DataManager(this.suggestionListItems).executeLocal(this._dataQuery),this._strData=this._promise instanceof Array&&this._promise.length?this._promise[0]:s,t.isNullOrUndefined(this._strData[l[1]])||this._selectKeyInit(),this._selectedItems.push(this._strData)),"visualmode"==this.model.multiSelectMode&&this._ulBox.append(this._createBox(s)))},_selectKeyInit:function(){var e,i=this._declareVariable();delimiterChar=this._delimiterChar(),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(this._hiddenInput.val()+(t.isNullOrUndefined(this._strData[i[1]]||this._strData[i[0]])?"":(this._strData[i[1]]||this._strData[i[0]])+this.model.delimiterChar)),t.isNullOrUndefined(this._strData[i[1]])||("none"!=this.model.multiSelectMode?(e=(e=null!=this._selectValueByKey()?this._selectValueByKey()+this._strData[i[1]]+delimiterChar:this._strData[i[1]]+delimiterChar).split(delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),this._selectValueByKey(e.join(delimiterChar))):this._selectValueByKey(this._strData[i[1]]))},_declareVariable:function(){var e=this.model.fields,i={_key:null,_text:null,_attr:null},s=[];if(!t.isNullOrUndefined(e))return i._text=e&&e.text?e.text:"text",i._key=e&&e.key?e.key:"key",s.push(i._text,i._key),s},selectValueByKey:function(t){var i,s=this;t=t.toString(),i="none"!=this.model.multiSelectMode?t.split(this.model.delimiterChar):t.split(","),"[object Array]"===Object.prototype.toString.call(i)&&e.each(i,function(t,i){s._setOperation(e.trim(i),"key")})},selectValueByText:function(e){this._setOperation(e,"text")},setValue:function(e){this._setText(e)},_setOperation:function(e,i){var s,n,l,o="",r=this,a=this.model.dataSource;if(t.isNullOrUndefined(a))return!1;if("object"==typeof a[0]||a instanceof t.DataManager)o=(l=this.model.fields)&&l[i]?l[i]:i;else if("key"==i)return!1;if(t.DataManager&&a instanceof t.DataManager)n=this._getQuery().where(o,"equal",e,!this.model.caseSensitiveSearch),(s=a.executeQuery(n)).done(function(e){r._setText(e.result[0])});else{if(!a||!a.length||a.length<1)return!1;n=t.Query().where(o,"equal",e,!this.model.caseSensitiveSearch),s=t.DataManager(a).executeLocal(n),this._setText(s[0])}},_setText:function(e){var t,i,s;if(!e)return!1;if(i=this.model.fields,t="object"==typeof this.model.dataSource[0]||"object"==typeof e?"string"==typeof e?e:i&&i.text?e[i.text]:e.text:e){if("visualmode"==this.model.multiSelectMode&&this._removeDuplicates(e))return!1;this._valueToTextBox(t,e,!0),s="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val(),this.value(s),this.model.showResetIcon&&this._showReset()}},_textFormateString:function(e){var i,s,n=this.model.multiColumnSettings.stringFormat;if(this._columnsIndex(),t.isNullOrUndefined(e)||"object"!=typeof e)n=t.isNullOrUndefined(e)||"object"==typeof e?this._currList[this._activeItem-1]:n.replace("{"+this._columnIndex[0]+"}",e);else for(i=0,s=this._columnIndex.length;i<s;i++)n=n.replace("{"+this._columnIndex[i]+"}",e[this.model.multiColumnSettings.columns[parseInt(this._columnIndex[i])].field]);return n},_columnsIndex:function(){var t=this;this._columnIndex=[],e.each(this.model.multiColumnSettings.stringFormat.match(/\{.+?\}/g),function(e,i){t._columnIndex[e]=i.slice(1,-1)})},_valueToTextBox:function(e,i,s){var n,l,o;!this._addNewTemplate&&this.model.multiColumnSettings.enable&&"string"!=typeof i&&(e=this._textFormateString(i)),"visualmode"==this.model.multiSelectMode?(i="string"==typeof i&&this._addNewTemplate&&i.substr(i.length-this._addNewTemplate.length)==this._addNewTemplate?i.replace(this._addNewTemplate,""):i,n=e.indexOf(this._addNewTemplate),this._addNewTemplate&&(e=e.substr(0,e.length-this._addNewTemplate.length)),o=this.model.delimiterChar,l=(l=this._getUniqueKey())||(this.model.fields&&this.model.fields.key?i[this.model.fields.key]:t.isNullOrUndefined(i.key)?l:i.key),(!(this._selectValueByKey()==l||null==l)||n>-1)&&this._selectValueByKey(null!=this._selectValueByKey()?this._selectValueByKey()+(n>-1?e:l)+o:(n>-1?e:l)+o),(!(this._hiddenInput.val()==l||null==l)||n>-1)&&this._hiddenInput.val(this._hiddenInput.val()+(l||e)+o),this._modelValue=t.isNullOrUndefined(this.value())?e+o:this.value()+e+o,this.element.val("").removeAttr("placeholder").width(1),this._ulBox.append(this._createBox(e)),this._addNewTemplate=null):"delimiter"==this.model.multiSelectMode?(o=this.target.value.lastIndexOf(this.model.delimiterChar),this._typed||""==this.element.val()||s||!this.model.showPopupButton?s?this.element.val(""==this.element.val()?e+this.model.delimiterChar:this.element.val()+e+this.model.delimiterChar):-1==o?this.element.val(this._queryString.substr(0,o+1)+e+this.model.delimiterChar):this.element.val(this._queryString.substr(0,o+this.model.delimiterChar.length)+e+this.model.delimiterChar):!this.model.enableAutoFill||this.showSuggestionBox?this._checkDeli()?this.element.val(this._queryString.substr(0,o)+this.model.delimiterChar+e+this.model.delimiterChar):this.element.val(this.element.val()+this.model.delimiterChar):this._checkDeli()||this.element.val(this.element.val()+this.model.delimiterChar),this._typed=!1):(this.element.val(e),this._selectedItems=[]),this._selectedItems.push(i),this._originalval.push(e),this._moveCaretToEnd(this.element[0])},_removeDuplicates:function(e){return 0!=this._selectedItems.length&&(-1!=this._selectedItems.indexOf(e)||void 0)},search:function(){this.model.enabled&&this._checkDelimiter()&&(this._hideResult(),this._autoFill=!1,this._queryString=e.trim(this._queryString),this._queryString.length>0&&this._OnTextEnter())},setVisible:function(e){e?this.wrapper.show():this.wrapper.hide()},hide:function(){this._hideResult()},open:function(){this._showFullList()},_changeWatermark:function(e){this._isWatermark?this.element.attr("placeholder",e):this._hiddenSpan.text(e)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.suggestionList.removeClass(this.model.cssClass).addClass(e)},_setDropdown:function(e){this.model.showPopupButton=e,e?this._renderDropdown():this._destroyDropdown()},_changeHeight:function(e){this.wrapper.height(e)},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setCulture:function(){this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.addNewText)||(this._localizedLabels.addNewText=this._options.addNewText),t.isNullOrUndefined(this._options.emptyResultText)||(this._localizedLabels.emptyResultText=this._options.emptyResultText)),this.model.addNewText=this._localizedLabels.addNewText,this.model.emptyResultText=this._localizedLabels.emptyResultText},_init:function(e){if(this._options=e,this._setCulture(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category,this._initialize(),this._render(),this._wireEvents(),this.initialRender=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation())},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l,o;if(this.model.validationRules)for(n in(i="visualmode"==this.model.multiSelectMode?this._hiddenInput:this.element).rules("add",this.model.validationRules),s=(s=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=i.attr("name"),s.settings.messages[name]={},this.model.validationRules)if(l=null,!t.isNullOrUndefined(this.model.validationRules[n])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[n]))for(o in s.settings.messages[name][n]=e.validator.messages[n],this.model.validationMessage)n==o&&(l=this.model.validationMessage[n]);else l=this.model.validationRules.messages[n];s.settings.messages[name][n]=null!=l?l:e.validator.messages[n]}},_removeDuplicateValue:function(e){return e.split(this.model.delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]).join(this.model.delimiterChar)},_delimiterChar:function(){return"none"!=this.model.multiSelectMode?this.model.delimiterChar:""},_setModel:function(e){var i,s,n,l,o,r,a;for(i in e){switch(i){case"dataSource":this.model.dataSource=null;break;case"watermarkText":this._changeWatermark(e[i]);break;case"delaySuggestionTimeout":this.model.delaySuggestionTimeout=parseInt(e[i]);break;case"value":deli=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(a=e[i].substr(e[i].length-deli.length)==deli?e[i]:e[i]+deli,e[i]=""==e[i]?this.value():(this.value()?this.value():"")+a,"visualmode"==this.model.multiSelectMode&&(e[i]=e[i].split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),e[i]=e[i].join(deli))),this.value(this._setValue(e[i])),this._modelValue=this.value(),s="visualmode"==this.model.multiSelectMode?this._hiddenInput.val():this.element.val(),this._changeEvtTrigger(s),this.model.showResetIcon&&this._showReset();break;case"showPopupButton":this._setDropdown(e[i]);break;case"enableRTL":this._RightToLeft(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"readOnly":this._checkReadOnly(e[i]);break;case"delimiterChar":n=this.model.delimiterChar,e[i]=this._validateDelimiter(e[i]),this.model.delimiterChar=e[i],this.element.val(this.value().replace(new RegExp(n,"g"),this.model.delimiterChar)),this.value(this.element.val());break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[i],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[i],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"locale":t.Autocomplete.Locale[e[i]]?(this.model.locale=e[i],this._setCulture()):e[i]=this.model.locale;break;case"filterType":for(r in l=[],t.filterType)t.filterType.hasOwnProperty(r)&&l.push(t.filterType[r]);l.indexOf(e[i])>-1?this.model.filterType=e[i]:e[i]=this.model.filterType;break;case"multiSelectMode":this.model.multiSelectMode=e[i],o=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(r=this._selectValueByKey(),(a=this.value())&&(a=a.substr(a.length-o.length)==o?a:a+o,this.value(a),"visualmode"==this.model.multiSelectMode&&this.value(this._removeDuplicateValue(this.value()))),r&&(this._selectValueByKey(r.substr(r.length-o.length)==o?r:r+o),"visualmode"==this.model.multiSelectMode&&this._selectValueByKey(this._removeDuplicateValue(this._selectValueByKey())))),"visualmode"==e[i]?(null!=this.model.validationRules&&this.element.rules("remove"),""!=this.element.val()&&this._isWatermark&&this.element.removeAttr("placeholder"),this._renderBoxModel()):this.element.hasClass("e-visual-mode")&&this._destroyBoxModel(),this._setValue(this.value()),this._setValidation(),t.isNullOrUndefined(this.element.attr("placeholder"))&&this._isWatermark&&this._setWatermark();break;case"enabled":this._disabled(!e[i]);break;case"visible":this.setVisible(e[i]);break;case"height":this._changeHeight(e[i]);break;case"width":this._changeWidth(e[i]);break;case"cssClass":this._changeSkin(e[i]);break;case"itemsCount ":(e[i]<=0||isNaN(e[i]))&&(e[i]=0);break;case"popupHeight":this.suggestionList.css({"max-height":isNaN(e[i])?e[i]:e[i]+"px"});break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"selectValueByKey":deli=this._delimiterChar(),r=t.util.getVal(e[i]),this.selectValueByKey(r),keyValue="none"!=this.model.multiSelectMode?this._selectValueByKey()+e[i]:e[i],keyValue=keyValue.split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),keyValue=keyValue.join(deli),e[i]=keyValue.substr(keyValue.length-deli.length)==deli?keyValue:keyValue+deli;break;case"htmlAttributes":this._addAttr(e[i]);break;case"emptyResultText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.emptyResultText=this.model.emptyResultText=e[i],this._setCulture();break;case"addNewText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.addNewText=this.model.emptyResultText=e[i],this._setCulture();break;case"multiColumnSettings":t.isNullOrUndefined(e[i].enable)||(this.model.multiColumnSettings.enable=e[i].enable),t.isNullOrUndefined(e[i].showHeader)||(this.model.multiColumnSettings.showHeader=e[i].showHeader),t.isNullOrUndefined(e[i].stringFormat)||(this.model.multiColumnSettings.stringFormat=e[i].stringFormat),t.isNullOrUndefined(e[i].columns)||(this.model.multiColumnSettings.columns=e[i].columns),this.suggestionList.remove(),this._renderSuggestionList();break;case"showResetIcon":this.model.showResetIcon=e[i],e[i]?this._showReset():this._removeReset()}this._hideResult()}},_destroy:function(){this.element.width("").removeAttr("role aria-label aria-expanded aria-haspopup aria-autocomplete autocomplete placeholder aria-owns aria-disabled disabled"),this.element.insertAfter(this.wrapper),"visualmode"==this.model.multiSelectMode&&this.element.removeClass("e-visual-mode").attr("name",this._hiddenInput.attr("name")),this.model.enabled||this.element.removeClass("e-disable"),this.wrapper.remove(),this.element.removeClass("e-input").val(""),this._isWatermark&&this.element.removeAttr("placeholder"),this._hideResult(),this.suggestionList.remove()},_initialize:function(){this.value(""===this.value()?this.element[0].value:this.value()),this.element.attr("role","combobox").attr("aria-label","Autocomplete textbox").attr("aria-expanded",!1).attr("tabindex",0).attr("aria-autocomplete","list"),/Edge\/12./i.test(navigator.userAgent)&&this.element.addClass("edge-browser"),this.target=this.element[0],this.dropdownbutton=null,this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this.showSuggestionBox=!1,this.noresult=!0,this._queryString=null,this.suggLen=0,this._selectedItems=[],this._modelValue="",this._activeItem=0,this._originalval=[],this.ctrlKeyPressed=!1,this._isFocused=!1,this._isOpened=!1,this._typed=!1,this._cancelEvent=!1,this._isWatermark=this._checkWatermarkSupport(),this._selectedObj=[]},_render:function(){this._renderWrapper(),this._addAttr(this.model.htmlAttributes),this._setDimentions(),this._renderDropdown(),this._checkProperties(),this._isWatermark?this._setWatermark():this._setWatermarkTxt(),this._renderSuggestionList(),this._RightToLeft(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this.setVisible(this.model.visible),this._setListPosition()},_renderWrapper:function(){var e,i;this.element.addClass("e-input").attr("autocomplete","off"),this.wrapper=t.buildTag("span.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),document.activeElement==this.element[0]&&(e=!0),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),i=this,this._hiddenSpan.click(function(){this._isFocused||i.element.focus()})),e&&this.element.focus()},_renderDropdown:function(){if(this.model.showPopupButton){var i=t.buildTag("span.e-icon e-search").attr(this._isIE8?{unselectable:"on"}:{});this.dropdownbutton=t.buildTag("span.e-select#"+this.target.id+"_dropdown").attr(this._isIE8?{unselectable:"on"}:{}).append(i),this.container.append(this.dropdownbutton).addClass("e-padding"),this.model.enabled||this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),this.dropdownbutton.on("mousedown",e.proxy(this._OnDropdownClick,this))}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"required"==t&&i.element.attr(t,e),"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._disabled(!0):"readOnly"==t&&!0===e?i._checkReadOnly(!0):i.wrapper.attr(t,e)})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderBoxModel:function(){this._ulBox=t.buildTag("ul.e-ul e-boxes");var i=this.model.enabled?"":"e-disable";this._ulBox.addClass(i),this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._hiddenInput.attr("name",this.element.attr("name")),this.element.val("").removeAttr("name").addClass("e-visual-mode"),this._isWatermark||this.element.width(1),this.container.prepend(this._hiddenInput,this._ulBox),this.wrapper.height("auto"),this._on(this.container,"mousedown",function(t){if(!this.model.enabled)return!1;var i=e(t.target);i.is(this.element)||(t.preventDefault(),this._isFocused||this.element.focus(),i.hasClass("e-options")?(!t.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")):this._moveCaretToEnd(this.element[0])),!t.ctrlKey&&(i.hasClass("e-boxes")||i.hasClass("e-input"))&&this._removeActive()})},_destroyBoxModel:function(){this.container.prepend(this.element),this.element.attr({name:this._hiddenInput.attr("name")}).removeAttr("style").removeClass("e-visual-mode"),this.wrapper.height(this.model.height),this._hiddenInput.remove(),this._hiddenInput=null,this._ulBox.remove(),this._off(this.container,"mousedown")},_deleteLastBox:function(){var e=this._ulBox.children().last(),t=e.hasClass("e-active");this._removeActive(),t?this._deleteBox(e):e.addClass("e-active")},_deleteBox:function(t){for(var i,s,n,l,o=0,r=t.length;o<r;o++)i=this._ulBox.children().index(t[o]),this._selectedItems.splice(i,1),s=this.model.delimiterChar,(n=this._hiddenInput.val().split(s)).splice(i,1),this._hiddenInput.val(n.join(s)),this._selectValueByKey(n.join(s)),(l=this._modelValue.split(s)).splice(i,1),this._modelValue=l.join(s),e(t[o]).remove();this.showSuggestionBox&&this._refreshPopup(),this._valueChange(),""==this._hiddenInput.val()&&this._setWatermark()},_removeActive:function(){this._ulBox.children("li.e-active").removeClass("e-active")},_adjustWidth:function(){var e,i=t.buildTag("span",this.element.val());this.container.append(i),e=i.width()+30,this.element.width()!=e&&this.element.width(e),""==this._hiddenInput.val()&&this._setWatermark(),i.remove()},_checkProperties:function(){var i,s;this._checkReadOnly(this.model.readOnly),this.model.delimiterChar=this._validateDelimiter(this.model.delimiterChar),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&(this.model.enabled=!1,this._disabled(!1)):(this.model.enabled=!0,this._disabled(!0)),this._checkNameAttr(),"visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),null!=this._selectValueByKey()&&""==this.value()?(i=this._selectValueByKey().toString(),"none"!=this.model.multiSelectMode&&(i=i.substr(i.length-this.model.delimiterChar.length)==this.model.delimiterChar?i:i+this.model.delimiterChar,"visualmode"==this.model.multiSelectMode?this._selectValueByKey(null):this._selectValueByKey(i)),this.selectValueByKey(i),this.model.showResetIcon&&this._showReset()):(s=this.value(),"none"!=this.model.multiSelectMode&&(t.isNullOrUndefined(s)||""!=s)&&(s=s.substr(s.length-this.model.delimiterChar.length)==this.model.delimiterChar?s:s+this.model.delimiterChar),this.value(this._setValue(s)),this.model.showResetIcon&&""!=this.value()&&this._showReset())},_checkNameAttr:function(){this.element.attr("name")||this.element.attr("name",this.element[0].id)},_disabled:function(e){e?this.disable():this.enable()},_destroyDropdown:function(){this.dropdownbutton.off("mousedown",e.proxy(this._OnDropdownClick,this)),this.dropdownbutton.remove(),this.dropdownbutton=null,this.container.removeClass("e-padding")},_validateDelimiter:function(t){return e.trim(t).length!=t.length&&null==t.length||/^[a-zA-Z0-9]+$/.test(t)?",":t},_checkWatermarkSupport:function(){return"placeholder"in document.createElement("input")},_setWatermark:function(){(this.model.watermarkText&&(""==this.value()||t.isNullOrUndefined(this.value()))||"visualmode"!=this.model.multiSelectMode)&&this.element.attr("placeholder",this.model.watermarkText).width("")},_setWatermarkTxt:function(){null!=this.model.watermarkText&&""==e.trim(this.element.val())&&("visualmode"!=this.model.multiSelectMode||""==e.trim(this._hiddenInput.val()))&&this._hiddenSpan.css("display","block").text(this.model.watermarkText)},_renderSuggestionList:function(){var i,s,n,l,o,r,a=e("#"+this.element[0].id+"_suggestion").get(0);if(a&&e(a).remove(),this.suggestionList=t.buildTag("div.e-atc-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_suggestion","",{display:"none"}).attr("role","listbox"),this.element.attr("aria-owns",this.target.id+"_suggestion"),this.popup=this.suggestionList,i=t.buildTag("div"),this.model.multiColumnSettings.enable){if(this._tableColumn=t.buildTag("table","",{},{role:"listbox","border-collapse":"separate",border:0,cellspacing:0,cellpadding:0,class:"e-atc-tableContent"}),this._listEventBind(this._tableColumn,"tr"),this._headerColGroup=document.createElement("colgroup"),this.model.multiColumnSettings.showHeader){for(this._tableHeaderDiv=t.buildTag("div",{},{},{class:"e-atc-tableHeader "+(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll")}),s=t.buildTag("div",{},{},{class:"e-atc-tableHeaderContent e-atc-tableHeaderBorder"}),n=document.createElement("tr"),this._tableHeader=t.buildTag("table","",{},{cellspacing:"0.25px"}),l=0,o=this.model.multiColumnSettings.columns.length;l<o;l++)e(n).append(t.buildTag("th",this.model.multiColumnSettings.columns[l].headerText?this.model.multiColumnSettings.columns[l].headerText:"column"+l,{"text-align":this.model.multiColumnSettings.columns[l].headerTextAlign?this.model.multiColumnSettings.columns[l].headerTextAlign:"left"},{class:l==this.model.multiColumnSettings.columns.length-1?"":this.model.enableRTL?"e-atc-thleft":"e-atc-thright"})),e(this._headerColGroup).append(document.createElement("col"));e(this._tableHeaderDiv).append(e(s).append(e(this._tableHeader).append(n).append(this._headerColGroup))),this.suggestionList.append(this._tableHeaderDiv)}else{for(l=0,o=this.model.multiColumnSettings.columns.length;l<o;l++)e(this._headerColGroup).append(document.createElement("col"));this._tableColumn.append(this._headerColGroup)}(r=t.buildTag("div")).append(this._tableColumn),i.append(r)}else this.ul=t.buildTag("ul.e-ul").attr("role","listbox"),this._listEventBind(this.ul,"li:not('.e-category')"),i.append(this.ul);this.suggestionList.append(i),e("body").append(this.suggestionList),this._setListWidth(),this._setListHeight(),this.model.multiColumnSettings.enable?(i.ejScroller({height:i.height(),width:0,scrollerSize:20}),this.scrollerObj=i.ejScroller("instance")):(this.suggestionList.ejScroller({height:this.suggestionList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.suggestionList.ejScroller("instance"))},_listEventBind:function(t,i){t.on({mouseenter:e.proxy(this._OnMouseEnter,this),mouseleave:e.proxy(this._OnMouseLeave,this),click:e.proxy(this._OnMouseClick,this)},i)},_checkEmptyList:function(){"visualmode"==this.model.multiSelectMode&&this._removeRepeated(),0==this.suggestionListItems.length?(this.suggestionListItems.push(this.model.emptyResultText),this.noresult=!0):this.noresult=!1},_showSuggestionList:function(e){this.suggestionListItems=this.model.enableDistinct?t.dataUtil.distinct(this.suggestionListItems,"object"!=typeof this.suggestionListItems[0]?"":this.model.fields&&this.model.fields.text?this.model.fields.text:"text",!0):this.suggestionListItems,this.model.itemsCount>0&&(this.suggestionListItems=t.DataManager(this.suggestionListItems).executeLocal(t.Query().take(this.model.itemsCount))),this._checkEmptyList(),this._addNewTemplate=null,this.noresult&&"visualmode"==this.model.multiSelectMode&&this.model.allowAddNew&&""!=this.element.val()&&!this._repeatRemove&&(this.noresult=!1,this.suggestionListItems.pop(),this._addNewTemplate="   ("+this.model.addNewText+")",this.suggestionListItems.push(this.element.val()+this._addNewTemplate),this._checkEmptyList()),(!this.noresult||this.model.showEmptyResultText)&&this._generateSuggestionList(e)},_generateSuggestionList:function(i){var s,n,l,o,r,a,d,h,c,u,m,p=this.suggestionListItems;if(this.model.multiColumnSettings.enable?this._tableColumn.empty()&&this.model.multiColumnSettings.showHeader&&this._tableHeaderDiv.css("display",""):this.ul.empty(),s=this,n=document.createDocumentFragment(),"object"!=typeof p[0]){if(s.model.multiColumnSettings.enable){var g=t.buildTag("tbody"),f=t.buildTag("tr").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}),_=t.buildTag("td",{},{},{role:"option"});for(o=0,r=p.length;r>o;o++){var v=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(p[o]):p[o],b=f.clone(),C=_.clone();e(C).attr(s._isIE8?{unselectable:"on"}:{}).attr(p[o]!=p.length-1?{class:"e-atc-tdbottom"}:{}).html(v),b[0].appendChild(C[0]),g[0].appendChild(b[0]),n.appendChild(g[0]),s.model.showEmptyResultText&&s.model.emptyResultText==v&&s.model.multiColumnSettings.showHeader&&s._tableHeaderDiv.css("display","none")&&e(C).removeClass("e-atc-tdbottom"),s._addNewTemplate&&!t.isNullOrUndefined(s._tableHeaderDiv)&&s._tableHeaderDiv.css("display","none")}s._tableColumn[0].appendChild(n)}else{for(l=t.buildTag("li",{},{},{role:"option"}).attr(s._isIE8?{unselectable:"on"}:{}),o=0,r=p.length;r>o;o++)v=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(p[o]):p[o],(a=l.clone())[0].innerHTML=v,n.appendChild(a[0]);s.ul[0].appendChild(n)}this._currList=p,this._mapper={txt:null,key:null}}else d=this.model.fields,(h={_key:null,_text:null,_attr:null})._key=d&&d.key?d.key:"key",h._text=d&&d.text?d.text:"text",h._attr=d&&d.htmlAttributes?d.htmlAttributes:"htmlAttributes",this._mapper={txt:h._text,key:h._key},this._currList=[],this.model.fields.groupBy?(c=d&&d.groupBy?d.groupBy:"groupBy",m=t.Query().group(c),this._addSortingQuery(m,"key"),u=t.DataManager(p).executeLocal(m),this._swapUnCategorized(u),u.forEach(function(e,i){if(e.key)if(s.model.multiColumnSettings.enable){var n=t.buildTag("tr.e-category").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{});n.append(t.buildTag("td",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}).attr(i!=p.length-1?{class:"e-atc-tdbottom"}:{})),s._tableColumn.append(n)}else s.ul.append(t.buildTag("li.e-category",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}));s._generateLi(e.items,h)})):this._generateLi(p,h);this._getLiTags().length>0&&(e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),this._showResult(i))},_swapUnCategorized:function(e){for(var t,i=e.length,s=0;s<i;s++)if(!e[s].key){for(t=s;t>0;t--)e[t]=e[t-1];return e[t]=e[s],!1}},_generateLi:function(i,s){var n,l,o,r,a,d,h,c,u,m,p,g=this,f=document.createDocumentFragment(),_=document.createDocumentFragment();if(g.model.multiColumnSettings.enable){for(n=g.model.multiColumnSettings.columns.length,this._tableColumn.append(t.buildTag("tbody")),l=t.buildTag("tr"),o=t.buildTag("td"),h=0,c=i.length;c>h;h++)if(u=i[h][s._text],m=i[h][s._key],!t.isNullOrUndefined(u)||g.model.multiColumnSettings.enable){for(g._getField(i[h]),(r=l.clone())[0].className=h%2?"e-atc-trbgcolor":"",a=0;a<n;a++)(d=o.clone())[0].innerHTML=g.model.highlightSearch&&e.inArray(a.toString(),g._columnIndex)>-1?g._highlightSuggestion(g._getField(i[h],g.model.multiColumnSettings.columns[a].field).toString()):g._getField(i[h],g.model.multiColumnSettings.columns[a].field),d[0].className=(h!=i.length-1?"e-atc-tdbottom ":"")+(a!=g.model.multiColumnSettings.columns.length-1?g.model.enableRTL?"e-atc-tdleft ":"e-atc-tdright ":"")+(g.model.multiColumnSettings.columns[a].cssClass?g.model.multiColumnSettings.columns[a].cssClass:""),d[0].style.textAlign=g.model.multiColumnSettings.columns[a].textAlign?g.model.multiColumnSettings.columns[a].textAlign:"left",_.appendChild(d[0]);r[0].appendChild(_),m&&r.attr("id",m),g._setAttributes(g._getField(i[h],s._attr),r[0]),f.appendChild(r[0]),g._currList=g._currList.concat([i[h]])}e(g._tableColumn).find("tbody")[0].appendChild(f)}else{for(h=0,c=i.length;c>h;h++)u=i[h][s._text],m=i[h][s._key],t.isNullOrUndefined(u)||(g.model.highlightSearch&&(u=g._highlightSuggestion(u)),g.model.template&&(u=g._getTemplatedString(i[h],s._text,u)),(p=document.createElement("li")).innerHTML+=u,m&&p.setAttribute("id",m),g._setAttributes(g._getField(i[h],s._attr),p),f.appendChild(p),g._currList=g._currList.concat([i[h]]));g.ul[0].appendChild(f)}},_getLiTags:function(){return this.model.multiColumnSettings.enable?this._tableColumn.find("tbody tr:not('.e-category')"):this.ul.children("li:not('.e-category')")},_getTemplatedString:function(e,t,i){for(var s=this.model.template,n=s.indexOf("${"),l=s.indexOf("}");-1!=n&&-1!=l;){var o=s.substring(n,l+1),r=o.replace("${","").replace("}",""),a=this._getField(e,r);t==r&&(a=i),a||(a=""),n=(s=s.split(o).join(a)).indexOf("${"),l=s.indexOf("}")}return s},_getField:function(e,i){return t.pvt.getObject(i,e)},_setAttributes:function(t,i){if(t)for(var s in"string"==typeof t&&(t=e.parseJSON(t)),t)i.setAttribute(s,t[s])},_setListWidth:function(){var e=this.model.popupWidth;e&&"auto"!=e?this.suggestionList.css({width:e}):this.suggestionList.css({width:this.wrapper.width()})},_setListHeight:function(){this.suggestionList.css({"max-height":this.model.popupHeight})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.wrapper.outerWidth()!=this.suggestionList.outerWidth()&&(this.suggestionList.css({width:this.wrapper.width()}),this._refreshScroller()),this._setListPosition()},_showResult:function(s){var n,l,o,r;this._refreshScroller(),this._refreshPopup(),this._isOpened?e(document).on("mousedown",e.proxy(this._OnDocumentClick,this)):(this.suggestionList.css("display","none"),n=this,clearTimeout(this._typing),this._typing=setTimeout(function(){n.suggestionList["slide"==n.model.animateType?"slideDown":"fadeIn"]("none"==n.model.animateType?0:300,function(){e(document).on("mousedown",e.proxy(n._OnDocumentClick,n))})},this.model.delaySuggestionTimeout),l=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("open",l),this.wrapper.addClass("e-active")),this._isOpened=!0,this.showSuggestionBox=!0,o=this._getLiTags(),this._listSize=o.length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),(r=t.getScrollableParents(this.wrapper))[0]!=window&&this._on(r,"scroll",this._hideResult)},_hideResult:function(s){var n,l;this.showSuggestionBox&&(this.showSuggestionBox=!1,this._activeItem=0,clearTimeout(this._hiding),this.element.attr("aria-expanded",!1),n=this,this._isOpened?(this.suggestionList.css("display","none"),l=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("close",l)):this._hiding=setTimeout(function(){n.model&&n.suggestionList["slide"==n.model.animateType?"slideUp":"fadeOut"]("none"==n.model.animateType?0:100),n._activeItem=0},this.model.delaySuggestionTimeout),e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_refreshScroller:function(){this.suggestionList.css("height","auto"),this.suggestionList.find(".e-content , .e-scroller").removeAttr("style"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(e(this._tableColumn).attr("width","auto"),e(this._tableHeader).attr("width","auto")),this.suggestionList.css("display","block"),this.model.multiColumnSettings.enable&&(this.scrollerObj.option("height","auto"),this._columnBorderAlign());var i=this.suggestionList.height()>parseInt(e.isNumeric(this.model.popupHeight)?this.model.popupHeight:this.model.popupHeight.replace("px",""))-4;i||this.model.multiColumnSettings.enable&&(this.suggestionList.height()<=this._tableColumn.height()||this.suggestionList.width()<=this._tableColumn.width()||this.model.multiColumnSettings.showHeader&&this.suggestionList.width()<=this._tableHeader.width())?(i&&(this.scrollerObj.model.height=this.model.multiColumnSettings.showHeader&&this._tableHeader?parseInt(this.suggestionList.height())-parseInt(this._tableHeader.height()):this.suggestionList.height()),!this.model.multiColumnSettings.enable&&this.suggestionList.width()<this.suggestionList.find(".e-ul").width()&&this.suggestionList.find(".e-ul").width(this.suggestionList.find(".e-ul").width()),this.scrollerObj.model.width=this.suggestionList.width(),this.scrollerObj.refresh(),this.scrollerObj.option({enableRTL:this.model.enableRTL,scrollTop:0,scrollLeft:0}),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._addThBorder(),this.suggestionList.addClass("e-scroller"),!this.scrollerObj._vScroll&&this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()):(this.suggestionList.removeClass("e-scroller"),this.scrollerObj.refresh(),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()),this.suggestionList.css("height","auto"),this._isIE8&&this.suggestionList.find(".e-vscroll div, .e-hscroll div").attr("unselectable","on"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this.suggestionList.find(".e-content").scroll(t.proxy(function(t){this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(e(t.currentTarget).scrollLeft())},this)),this.suggestionList.find(".e-content").length>0&&this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(this.model.enableRTL?this.suggestionList.find(".e-content")[0].scrollWidth-this.suggestionList.find(".e-content")[0].clientWidth:0))},_columnBorderAlign:function(){var t,i,s;if(this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&"none"!=this._tableHeaderDiv.css("display")){for(this._tableWid=this._tableHeader.outerWidth()>this._tableColumn.outerWidth()?this._tableHeader.outerWidth():this._tableColumn.outerWidth(),this._tableColumn.find("colgroup").remove(),e(this._headerColGroup.children).removeAttr("style"),i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:parseInt(e(this._tableColumn).find("tr:first td").eq(i).outerWidth())>parseInt(this._tableHeader.find("tr:first th").eq(i).outerWidth())?e(this._tableColumn).find("tr:first td").eq(i).outerWidth():this._tableHeader.find("tr:first th").eq(i).outerWidth()});this._tableColumn.append(e(this._headerColGroup).clone()),t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%",e(this._tableColumn).attr("width",t),e(this._tableHeader).attr("width",t)}else if(this.model.multiColumnSettings.enable&&!this.model.multiColumnSettings.showHeader){if(e(this._tableColumn).attr("width","auto"),this._tableWid=this._tableColumn.outerWidth(),e(this._headerColGroup.children).removeAttr("style"),"100%"!=(t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%")){for(i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:e(this._tableColumn).find("tr:first td").eq(i).outerWidth()});this._tableColumn.append(this._headerColGroup)}e(this._tableColumn).attr("width",t)}else e(this._tableColumn).attr("width","100%")},_removeThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").removeClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.parent(".e-atc-tableHeaderContent").removeClass("e-atc-tableHeaderBorder")},_addThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").addClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll").removeClass(this.model.enableRTL?"e-atc-tableHeaderScroll":"e-atc-tableHeaderRTL"),this._tableHeader.parent(".e-atc-tableHeaderContent").addClass("e-atc-tableHeaderBorder")},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),n=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),l=s.top-e(document).scrollTop(),o=this.suggestionList.outerHeight(),r=this.suggestionList.outerWidth(),a=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<n||o>l?s.top+d+3:s.top-o-3)-h;t=e(document).scrollLeft()+e(window).width()-a,(this.model.enableRTL||r>t&&r<a+i.outerWidth())&&(a-=this.suggestionList.outerWidth()-i.outerWidth()),this.suggestionList.css({left:a+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.suggestionList)},_targetFocus:function(e){"visualmode"==this.model.multiSelectMode&&this._setWatermarkWidth(30),this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._isFocused=!0,this._trigger("focusIn",{event:e,isInteraction:!0,value:this.value()})},_focusOutAction:function(e){var i,s;this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._isWatermark||this._setWatermarkTxt(),this._removeSelection(),"visualmode"==this.model.multiSelectMode&&this.model.showResetIcon&&""!=this.element.val()&&this._removeReset(),"visualmode"==this.model.multiSelectMode?(this._removeActive(),this.element.val(""),this._setWatermarkWidth(1),this._preVal="",this._addNewTemplate=null):("delimiter"==this.model.multiSelectMode&&this._valueChange(e),this._updateSelectedItemArray(this.getValue())),t.isNullOrUndefined(this.value())||""==this.value()||(i=this.value().split(this.model.delimiterChar),("delimiter"==this.model.multiSelectMode||"none"==this.model.multiSelectMode)&&(s=this._removeDuplicateVal(i),this._keyProcess(s))),""==this.element.val()&&(""==this.value()||null==this.value())&&this._selectValueByKey(null)},_targetBlur:function(e){this._focusOutAction(e),this._trigger("focusOut",{event:e,isInteraction:!0,value:this.value()})},_setWatermarkWidth:function(e){this.model.watermarkText&&this.element.attr("placeholder")?this.element.width(""):this.element.val("").width(e)},_checkDeli:function(){var e=this.element.val(),t=this.model.delimiterChar;return e.substr(e.length-t.length,e.length)==t&&(this.element.val(e.substr(0,e.length-t.length)),!0)},_removeSelection:function(){if(this.model.enableAutoFill){this.element.attr("aria-autocomplete","both");var e=this._getCaretSelection();e.end-e.start!=0&&e.end-e.start!=this.element.val().length&&(this.target.value=this.target.value.substr(0,e.start))}},_removeListHover:function(){this._getLiTags().removeClass("e-hover")},_addListHover:function(){var t=e(this._getLiTags()[this._activeItem-1]);t.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop()}),t.focus()},_calcScrollTop:function(){this.model.multiColumnSettings.enable?this.model.multiColumnSettings.showHeader?(this._tableColumn.outerHeight(),this._tableHeader.outerHeight()):this._tableColumn.outerHeight():this.ul.outerHeight();var e,t=this.model.multiColumnSettings.enable?this._tableColumn.find("tr"):this.ul.find("li");return e=this.model.multiColumnSettings.enable?this._tableColumn.find("tr.e-hover").index():this.ul.find("li.e-hover").index(),t.eq(1).outerHeight()*e-((this.model.multiColumnSettings.enable?this._tableColumn.parent().outerHeight():this.suggestionList.outerHeight())-t.eq(e).outerHeight())/2},getActiveText:function(){if(this._activeItem>0)return this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):!t.isNullOrUndefined(this._mapper)&&this._mapper.txt?this._getField(this._currList[this._activeItem-1],this._mapper.txt):this._currList[this._activeItem-1]},_getUniqueKey:function(){var e=null;return t.isNullOrUndefined(this._mapper)||(this._mapper.key&&(e=this._getField(this._currList[this._activeItem-1],this._mapper.key)),t.isNullOrUndefined(e)&&(e=null)),e},_setTextBoxValue:function(){var t,i,s,n,l,o;this._activeItem&&!this.noresult&&(t=this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):this.getActiveText(),i=this._getCaretSelection(),this.suggLen=i.start,s=this.target.value.substr(0,this.suggLen),o=-1==(l=this.target.value.lastIndexOf(this.model.delimiterChar))?e.trim(s.substr(l+1,this.suggLen)):e.trim(s.substr(l+this.model.delimiterChar.length,this.suggLen)),!s||s.toLowerCase()!=t.substr(0,this.suggLen).toLowerCase()&&o.toLowerCase()!=t.substr(0,this.suggLen-(l+this.model.delimiterChar.length)).toLowerCase()?("delimiter"==this.model.multiSelectMode&&t&&o?this.element.val(this.element.val().replace(o,t)):t&&this.element.val(t),this._removeSelection()):(n="delimiter"==this.model.multiSelectMode?s+t.substr(o.length,t.length):s+t.substr(s.length,t.length),this.element.val(n),this._autofilSelection(),"visualmode"==this.model.multiSelectMode&&(this._adjustWidth(),this.model.enableAutoFill&&this._refreshPopup()),this.model.autoFocus&&!this.noresult&&this._addListHover()))},_enterTextBoxValue:function(e){var t,i,s;!this._activeItem||this.noresult||this.model.readOnly||(t=this.getActiveText(),i=this._currList[this._activeItem-1],this._preVal=t+("delimiter"==this.model.multiSelectMode?this.model.delimiterChar:""),this._valueToTextBox(t,i,!1),s="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val(),this._trigger("select",{event:e,isInteraction:!0,value:s,text:t,key:this._getUniqueKey(),item:i}),this._valueChange(e),this.model.showResetIcon&&this._showReset()),this._isOpened&&this._trigger("close",{event:e,isInteraction:!0})},_createBox:function(i){var s=t.buildTag("span.e-icon e-close"),n=t.buildTag("li.e-options",i).append(s);return this._on(s,"click",function(t){if(!this.model.enabled)return!1;this._deleteBox(e(t.target).parent())}),n},_addLoadingClass:function(){this.model.showLoadingIcon&&this.element.addClass("e-load")},_removeLoadingClass:function(){this.element.removeClass("e-load")},_highlightSuggestion:function(t){var i,s,n,l,o,r,a,d,h;if(""!=e.trim(this._queryString)&&(i=this.model.caseSensitiveSearch?"g":"gi",r=e.trim(this._queryString),r=/^[a-zA-Z0-9- ]*$/.test(r)?r:r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s="startswith"==this.model.filterType?"^"+r:"endswith"==this.model.filterType?r+"$":r,(n=new RegExp(s,i)).test(t)))for(l=t.match(n),a=t.replace(n,"~^"),t="",d=0,h=(o=a.split("~^")).length;h>d;d++)t+=l[d]?o[d]+"<span class='e-hilight-txt'>"+l[d]+"</span>":o[d];return t},_RightToLeft:function(e){e?(this.wrapper.addClass("e-rtl"),this.suggestionList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.suggestionList.removeClass("e-rtl")),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this._tableHeaderDiv.removeClass(e?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.find("tr :not(th:last)").addClass(e?"e-atc-thleft":"e-atc-thright").removeClass(e?"e-atc-thright":"e-atc-thleft"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.suggestionList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.suggestionList.removeClass("e-corner"))},_checkReadOnly:function(e){this.model.readOnly=e,this.model.readOnly?(this.element.attr({readonly:"readonly","aria-readonly":!0}),this._off(this.element,"keydown",this._OnKeyDown),this._off(this.element,"keyup",this._OnKeyUp),this._off(this.element,"paste",this._OnPaste),this._off(this.element,"keypress",this._onkeyPress)):(this.element.removeAttr("readonly aria-readonly"),this._on(this.element,"keydown",this._OnKeyDown),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"paste",this._OnPaste),this._on(this.element,"keypress",this._onkeyPress))},_onkeyPress:function(e){13==e.keyCode&&this._PreventDefaultAction(e)},_OnPaste:function(e){var t=this;setTimeout(function(){t._OnKeyUp(e)},0)},_OnKeyDown:function(t){var i;switch("startswith"!=this.model.filterType&&(this.model.enableAutoFill=!1),t.keyCode){case 37:case 35:case 36:this._removeSelection();break;case 38:this.showSuggestionBox&&this.suggestionList&&(this._removeListHover(),this._activeItem>1?this._activeItem-=1:this._activeItem=this._listSize,this._navigationHover()),this._PreventDefaultAction(t);break;case 40:this.showSuggestionBox&&this.suggestionList?(this._removeListHover(),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=1,this._navigationHover()):t.ctrlKey&&""==this.element.val()?this._showFullList(t):t.ctrlKey&&this._showSuggestionList(t),this._PreventDefaultAction(t);break;case 33:case 34:if(this.showSuggestionBox&&this.suggestionList){this._removeListHover();var s=this.model.multiColumnSettings.enable?this._tableColumn.parent().height():this.suggestionList.height(),n=this.model.multiColumnSettings.enable?this._tableColumn.find("tr").outerHeight():this.ul.children("li").outerHeight(),l=0!=Math.round(s/n)?Math.round(s/n):this._listSize;this._activeItem=33==t.keyCode?this._activeItem-l:this._activeItem+l,this._activeItem<1&&(this._activeItem=1),this._activeItem>this._listSize&&(this._activeItem=this._listSize),this._navigationHover()}this._PreventDefaultAction(t);break;case 8:""==e.trim(this.element.val())&&(this._isOpened=!1),"visualmode"==this.model.multiSelectMode&&""==this.element.val()&&this._deleteLastBox();break;case 17:this.ctrlKeyPressed=!0;break;case 9:this.showSuggestionBox&&(this._queryString=this.element.val(),this._enterTextBoxValue(t),this._hideResult(t),this._isOpened=!1,this._PreventDefaultAction(t));break;case 27:this._isOpened=!1,i=this.showSuggestionBox,this._hideResult(t),this._PreventDefaultAction(t),i&&this._trigger("close",{event:t,isInteraction:!0})}"visualmode"==this.model.multiSelectMode&&(17!=t.keyCode&&8!=t.keyCode&&46!=t.keyCode&&this._removeActive(),this._adjustWidth())},_PreventDefaultAction:function(e){e.preventDefault(),this._cancelEvent||(e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!0)},_bubbleEvent:function(e){return"boolean"==typeof e&&(this._cancelEvent=e),this._cancelEvent},_navigationHover:function(){this._addListHover(),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this._queryString=this.target.value,this._setTextBoxValue())},_OnKeyUp:function(t){if(this._keyDownComplete(t),this.ctrlKeyPressed&&"paste"!=t.type)return 17==t.keyCode&&(this.ctrlKeyPressed=!1),!1;if(""==e.trim(this.element.val())&&38==t.keyCode&&40==t.keyCode)return this._hideResult(t),!1;if(!this._checkDelimiter())return!1;switch(this._queryString=e.trim(this._queryString),t.keyCode){case 34:case 33:case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 9:case 27:break;case 13:t.preventDefault(),this._queryString=this.element.val(),this._enterTextBoxValue(t),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this.suggLen=this.element.val().length,this._autofilSelection()),this._isOpened=!1,this._hideResult(t);break;case 46:if("visualmode"==this.model.multiSelectMode&&""==this.element.val()){this._deleteBox(this._ulBox.children("li.e-active"));break}case 8:this._queryString.length>=this.model.minCharacter?(this._autoFill=!1,this._OnTextEnter(t)):(this.noresult=!0,this._hideResult(t),""==e.trim(this.element.val())&&(this._isOpened=!1)),this._typed=!0;break;default:this._queryString.length>=this.model.minCharacter?(this._autoFill=!0,this._OnTextEnter(t)):this.noresult=!0,this._typed=!0}},_getFilteredList:function(e,i){var s,n;clearTimeout(this.timeDelay),t.isNullOrUndefined(e)||"object"!=typeof e[0]||(s=this.model.fields.text?this.model.fields.text:"text",this.model.actionFailure&&t.isNullOrUndefined(t.DataManager(e).executeLocal(t.Query().select(s))[0])&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})),!e||!e.length||e.length<1?(this.suggestionListItems=[],this.model.actionFailure&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})):(n=t.Query(),this._addQuery(n,"object"==typeof e[0]),this.suggestionListItems=t.DataManager(e).executeLocal(n),this.model.actionSuccess&&this._trigger("actionSuccess")),this._doneRemaining(i),this.model.actionComplete&&this._trigger("actionComplete")},_performSearch:function(e){var i,s;this.model.actionBegin&&this._trigger("actionBegin"),i=this.model.dataSource,t.DataManager&&i instanceof t.DataManager?i.dataSource.offline||i.dataSource.json&&i.dataSource.json.length>0?(this._getFilteredList(i.dataSource.json,e),this._selectedObj.push(i.dataSource.json)):(window.clearTimeout(this.timer),s=this,this.timer=window.setTimeout(function(){s._fetchRemoteDat(i)},700)):this._getFilteredList(i,e)},_fetchRemoteDat:function(e){var t=this,i=this._getQuery();this._addQuery(i,!0),e.executeQuery(i).fail(function(e){t.suggestionListItems=null,t._removeLoadingClass(),t._trigger("actionFailure",e)}).done(function(e){t.suggestionListItems=e.result,"none"==t.model.multiSelectMode?t._selectedObj=e.result:"delimiter"==t.model.multiSelectMode&&(t._selectedObj=t._selectedObj.concat(e.result)),t._doneRemaining(e),t._trigger("actionSuccess",e)}).always(function(e){t._trigger("actionComplete",e)})},_addSortingQuery:function(e,t){if(this.model.allowSorting){var i="descending"==this.model.sortOrder;e.sortBy(t,i)}},_addQuery:function(e,t){var i,s,n,l,o="";if(t&&(o=(s=this.model.fields)&&s.text?s.text:"text"),this._queryString)if(this.model.multiColumnSettings.enable)if(this._columnsIndex(),t){for(o=[],n=0,l=this._columnIndex.length;n<l;n++)o.push(this.model.multiColumnSettings.columns[this._columnIndex[n]].field),i=this._predicateConvertion(i,this.model.multiColumnSettings.columns[this._columnIndex[n]].field,this.model.multiColumnSettings.columns[this._columnIndex[n]].filterType?this.model.multiColumnSettings.columns[this._columnIndex[n]].filterType:"startswith",this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._columnIndex[n]].type?this.model.multiColumnSettings.columns[this._columnIndex[n]].type:"string");e.where(i)}else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);this._addSortingQuery(e,o)},_predicateConvertion:function(e,s,n,l,o,r){var a;return"number"==r?a=Number(l):"boolean"==r?"true"==l||"yes"==l||"1"==l?a=!0:("false"==l||"no"==l||"0"==l)&&(a=!1):a="date"==r?new Date(l):l,"number"==r&&isNaN(a)||"boolean"==r&&a==i?e:e!=i?e.or(s,n,a,o):t.Predicate(s,n,a,o)},_getQuery:function(){var e;if(t.isNullOrUndefined(this.model.query)){var i=[],s=t.Query(),n=this.model.fields;for(e in n)"tableName"!==e&&n[e]&&i.push(n[e]);i.length>0&&s.select(i),t.isNullOrUndefined(this.model.dataSource.dataSource.url)||this.model.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||s.from(n.tableName)}else s=this.model.query.clone();return s},_OnTextEnter:function(e){var i=this;t.isDevice()?(clearTimeout(this.timeDelay),this.timeDelay=setTimeout(function(){i._onTextProcess(e)},i.model.delaySuggestionTimeout)):i._onTextProcess(e)},_onTextProcess:function(e){this._addLoadingClass(),this.element.attr("aria-expanded",!1),this._performSearch(e),this.model.showResetIcon&&this._showReset()},_showReset:function(){t.isNullOrUndefined(this.resetSpan)&&(this.resetSpan=t.buildTag("span.e-icon e-iclose"),this.model.showPopupButton?(this.dropdownbutton.before(this.resetSpan),this.container.addClass("e-popup e-reset")):this.container.append(this.resetSpan).addClass("e-reset")),this._on(this.resetSpan,"mousedown",this._refreshSearch)},_refreshSearch:function(){this.resetSpan=null,this.clearText(),this._refreshPopup()},_removeReset:function(){this.resetSpan=this.resetSpan&&this.resetSpan[0].remove(),this._refreshPopup()},_doneRemaining:function(e){this._showSuggestionList(e),this.element.attr({"aria-expanded":!0,"aria-haspopup":!0}),(this.model.enableAutoFill&&this._autoFill&&!this.noresult||this.model.autoFocus)&&(this.element.attr("aria-autocomplete","both"),this._activeItem=1,this._queryString=this.target.value),this.model.enableAutoFill&&this._autoFill&&!this.noresult&&this._setTextBoxValue(),this.model.autoFocus&&!this.noresult&&this._addListHover(),this._removeLoadingClass(),this.noresult&&!this.model.showEmptyResultText&&this._hideResult(e)},_removeRepeated:function(){var e,t,i,s=this.suggestionListItems;if(!s||0==s.length||0==this._selectedItems.length||1==this.suggestionListItems.length&&this.suggestionListItems[0]==this.element.val()+this._addNewTemplate)return!1;for(this._repeatRemove=!1,e=0,t=this._selectedItems.length;e<t;e++)-1!=(i=s.indexOf(this._selectedItems[e]))&&this.suggestionListItems.splice(i,1),this.element.val()==this._selectedItems[e]&&(this._repeatRemove=!0)},_checkDelimiter:function(){this._queryString=this.element.val();var e="delimiter"!=this.model.multiSelectMode?-1:this._queryString.lastIndexOf(this.model.delimiterChar);return-1==e||(this._queryString=this._queryString.substr(e+this.model.delimiterChar.length,this._queryString.length)),!0},_autofilSelection:function(){var e=this.element[0],t=this.element.val().length;e.setSelectionRange?e.setSelectionRange(this.suggLen,t):e.createTextRange&&((e=e.createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",this.suggLen),e.select())},_OnDropdownClick:function(e){this.model.enabled&&!this.model.readOnly&&(e.preventDefault(),(e.which&&1==e.which||e.button&&0==e.button)&&(this._addLoadingClass(),this.showSuggestionBox?(this._hideResult(e),this._isOpened=!1,this._removeLoadingClass()):this._showFullList(e)))},_showFullList:function(e){this._isFocused||this.element.focus(),this._queryString=null,this._autoFill=!1,this._performSearch(e)},_OnMouseEnter:function(e){this._getActiveItemIndex(e)},_getActiveItemIndex:function(t){var i=t.target;this.model.multiColumnSettings.enable&&"tr"!=t.target.tagName.toLowerCase()?i=e(t.target).parents("tr"):"li"!=t.target.tagName.toLowerCase()&&(i=e(t.target).parents("li")),this._getLiTags().removeClass("e-hover"),e(i).addClass("e-hover"),this._queryString=this.element.val(),this._activeItem=this._getLiTags().index(e(i))+1},_OnMouseLeave:function(){this._getLiTags().removeClass("e-hover"),this.model.highlightSearch&&this._getLiTags().find(".e-hilight-txt").removeClass("e-hover")},_OnMouseClick:function(e){this._getActiveItemIndex(e),this.noresult||(this._enterTextBoxValue(e),this._isOpened=!1,this._hideResult(e))},_OnDocumentClick:function(t){e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList)||e(t.target).is(this.element)||e(t.target).parents(".e-atc").is(this.wrapper)?(e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList))&&t.preventDefault():(this._isOpened=!1,this._hideResult(t),this._trigger("close",{event:t,isInteraction:!0}))},_OnWindowResize:function(){this._refreshPopup()},_keyProcess:function(e){var i,s,n,l,o=this._declareVariable();if(i=this._delimiterChar(),!t.isNullOrUndefined(e))for(s=0,n=e.length;s<n;s++)l=e[s],t.DataManager&&this.model.dataSource instanceof t.DataManager?this._selectValueByKey(null):(this._dataQuery=this.model.multiColumnSettings.enable?t.Query():t.Query().where(o[0],this.model.filterType,l,!1),this._promise=t.DataManager(this.model.dataSource).executeLocal(this._dataQuery),this.model.multiColumnSettings.enable?this._formatStringKey(e,o,i):this._promise instanceof Array&&0==this._promise.length?null!=this._selectValueByKey()&&this._selectValueByKey():this._getFieldKey(this._promise[0],o[1],i))},_formatStringKey:function(e,t,i){var s,n,l,o,r,a;for(this._selectValueByKey(null),s=0,n=e.length;s<n;s++)if(""!=e[s]){for(l=e[s],r=0,a=this._promise.length;r<a;r++)l==this._textFormateString(this._promise[r])&&(o=r);o?this._getFieldKey(this._promise[o],t[1],i):null!=this._selectValueByKey()&&this._selectValueByKey()}},_getFieldKey:function(i,s,n){if((t.isNullOrUndefined(this.model.template)||!t.isNullOrUndefined(this._getField(i,s)))&&!t.isNullOrUndefined(this._getField(i,s))){if(r=this._getField(i,s).toString(),"none"!=this.model.multiSelectMode){var l,o,r=this._selectValueByKey();delimiterChar=this.model.delimiterChar,l=this._getField(i,s).toString(),null!=r?(o=r.toString().split(n).filter(function(e){return""!==e}),-1==e.inArray(l,o)?(o.push(l),r=o.join(delimiterChar)+delimiterChar):r=l+delimiterChar):r=l+delimiterChar}this._selectValueByKey(r)}},_removeDuplicateVal:function(i){var s=[];return e.each(i,function(t,i){-1==e.inArray(i,s)&&s.push(i)}),1!=i.length||t.isNullOrUndefined(this._originalval)||-1==e.inArray(i[0],this._originalval)&&this._selectValueByKey(null),s},_valueChange:function(e){var t="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();(this.value()!=t||""==t&&""!=this.element.val())&&(this.value(t),this._changeEvtTrigger(t,e)),this.model.showResetIcon&&!t&&(this.wrapper.find("span.e-iclose").remove(),this.resetSpan=null)},_changeEvtTrigger:function(e,t){var s=t!=i?{event:t,isInteraction:!0,value:e}:{isInteraction:!1,value:e};this.initialRender||(this._trigger("_change",{value:e}),this._trigger("change",s))},_updateSelectedItemArray:function(i){var s,n,l,o=[];if(this._selectedItems=[],this.suggestionListItems=this.model.dataSource,"delimiter"==this.model.multiSelectMode&&i)if(o=i.split(this.model.delimiterChar),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]){for(s=0,n=o.length;s<n;s++)if(o[s]){var r=this,a=this._selectedObj.length,d={};for(l=0;l<a;l++)this._selectedObj[l][r.model.fields.text]==o[s]&&(d=this._selectedObj[l],l=a);this._selectedItems.push(e.isEmptyObject(d)?o[s]:d)}}else this._createBoxForObjectType(o);else"none"==this.model.multiSelectMode&&i&&(o.push(i),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]?(r=this,d=e.grep(this._selectedObj,function(e){if(e[r.model.fields.text]==i)return e}),this._selectedItems.push(d.length>0?d:i)):this._createBoxForObjectType(o))},_keyDownComplete:function(e){var t=this.element.val();this._preVal!=t&&(this._preVal=t,"visualmode"==this.model.multiSelectMode&&this._adjustWidth(),this._valueChange(e))},_moveCaretToEnd:function(e){var t,i;e.scrollLeft=e.scrollWidth,e.createTextRange&&((t=e.createTextRange()).moveEnd("textedit"),t.moveStart("textedit"),t.select()),"number"==typeof e.selectionStart?e.selectionStart=e.selectionEnd=e.value.length:void 0!==e.createTextRange&&((i=e.createTextRange()).collapse(!1),i.select())},_getCaretSelection:function(){var e,t,i,s,n=this.element[0],l=0,o=0;return isNaN(n.selectionStart)?(e=document.selection.createRange().getBookmark(),(t=n.createTextRange()).moveToBookmark(e),(i=n.createTextRange()).collapse(!0),i.setEndPoint("EndToStart",t),{start:s=i.text.length,end:s+t.text.length}):(l=n.selectionStart,o=n.selectionEnd,{start:Math.abs(l),end:Math.abs(o)})},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur)}}),t.Autocomplete.Locale=t.Autocomplete.Locale||{},t.Autocomplete.Locale.default=t.Autocomplete.Locale["en-US"]={addNewText:"Add New",emptyResultText:"No suggestions",actionFailure:"The specified field doesn't exist in given data source"},t.filterType={StartsWith:"startswith",Contains:"contains",EndsWith:"endswith",LessThan:"lessthan",GreaterThan:"greaterthan",LessThanOrEqual:"lessthanorequal",GreaterThanOrEqual:"greaterthanorequal",Equal:"equal",NotEqual:"notequal"},t.SortOrder={Ascending:"ascending",Descending:"descending"},t.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},t.Animation={None:"none",Slide:"slide",Fade:"fade"},t.Type={Number:"number",String:"string",Boolean:"boolean",Date:"date"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.checkbox.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",checkState:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._isIE8="msie"==e.name&&"8.0"==e.version,this._isDevice=this._checkDevice(),this._setValue(),this._renderControl(),this.model.enableRTL&&this._setRTL(),this.model.enabled&&this._wireEvents(),this._setEnabled(this.model.enabled),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._addAttr(this.model.htmlAttributes)},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_setRTL:function(){e(this.maindiv).addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").data("validator")||this.wrapper.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.wrapper.find("input").rules("add",this.model.validationRules),i=(i=this.wrapper.closest("form").data("validator"))||this.wrapper.closest("form").validate(),name=this.wrapper.find("input").attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"name"==t||"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._setEnabled(!1):"checked"==t&&"checked"==e?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,e)})},_triggerBeforeChange:function(){var e={isChecked:this._isChecked,isInteraction:!1};if(1==this._trigger("beforeChange",e))return!1},_triggerChange:function(){var e={isChecked:this._isChecked,checkState:this.model.checkState,isInteraction:!1};this._trigger("change",e)},_setModel:function(i){var s,n,l;for(s in i)switch(s){case"checked":if(this.model.beforeChange)return this._triggerBeforeChange();this.checked()instanceof Array?(l=(n=t.util.getVal(i[s]))[n.length-1],this.model.value==l&&(this._isChecked=!0)):(this._isChecked=t.util.getVal(i[s]),this.checked(this._isChecked)),this._isChecked?this._checked():this._unChecked(),this.model.change&&this._triggerChange();break;case"enableTriState":i[s]&&(this.model.enableTriState=i[s],this._indeterminateState=i[s]);break;case"checkState":if(this.model.enableTriState){if(this.model.beforeChange)return this._triggerBeforeChange();this.model.checkState=i[s],this._changeState(this.model.checkState),this.checked()instanceof Array?this._updateCheckedItem():(i[s]="check")?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked="uncheck"!=this.model.checkState),this._triggerChange())}break;case"cssClass":this._changeSkin(i[s]);break;case"enableRTL":i[s]?this._setRTL():e(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.wrapper.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(i[s]);break;case"name":this.element.attr("name",i[s]),(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.setAttribute("name",i[s]),this.model.name=i[s];break;case"value":this.element.attr("value",i[s]);break;case"size":this._setSize(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":this._setEnabled(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this.element.removeClass("e-checkbox e-input"),this.element.insertBefore(this.wrapper),this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),e("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1,this._isChecked=!1;var e=this.element[0].getAttribute("id"),i=this.element[0].getAttribute("name"),s=this.element[0].getAttribute("value");t.isNullOrUndefined(e)||(this.model.id=e),t.isNullOrUndefined(i)||(this.model.name=i),t.isNullOrUndefined(s)||""==s||(this.model.value=s),this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0),t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id),this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(i){i==t.CheckboxSize.Medium?e(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"):e(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small")},_setRoundedCorner:function(e){e?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(e){e?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?"indeterminate"==this.model.checkState?this._indeterminateState=!0:"check"==this.model.checkState?this._isChecked=!0:"uncheck"==this.model.checkState&&(this._isChecked=!1):"indeterminate"==this.model.checkState&&(this.model.checkState="uncheck")},_createElement:function(e,t){var i=document.createElement(e);return this._setAttributes(i,t),i},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState(),this.maindiv=this._createElement("span",{class:"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0}),this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id)),this.innerdiv=document.createElement("div"),this._setSize(this.model.size),this.span=document.createElement("span"),this.span=e(this.span),this.spanImg=this._createElement("span",{class:"e-chk-image e-icon",role:"presentation"}),this.spanImg=e(this.spanImg),this.element.addClass("e-input"),this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name,this.model.value=!!t.isNullOrUndefined(this.model.value)||this.model.value,this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value}),this._hiddenInput=this._createElement("input",{type:"checkbox",value:!1,style:"display:none"}),this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden"),this._setRoundedCorner(this.model.showRoundedCorner),this.checked()&&this._setCheckedItem(this.checked()),this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name)),this.checked()instanceof Array||this.checked(this._isChecked),this.span[0].appendChild(this.spanImg[0]),this.innerdiv.appendChild(this.span[0]),this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]),this.maindiv.appendChild(this.element[0]),this.maindiv.appendChild(this._hiddenInput),this.maindiv.appendChild(this.innerdiv),this.wrapper=e(this.maindiv),this._setTextWrapper(this.model.text),this.chkbx=this.element,1==this.model.enableTriState&&1==this._indeterminateState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(e){"indeterminate"==e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):"check"==e?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):"uncheck"==e&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(e){e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.model.checkState="indeterminate",this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(e){""!=e&&(this.txtSpan=t.buildTag("div.e-text",e),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),this.element[0].setAttribute("id",t)},_isValid:function(e){return!t.isNullOrUndefined(e)&&""!=e},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler),this._isIE8&&this._isValid(this.model.id)&&this._on(e("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()}),this._on(this.wrapper,"focus",this._focusIn),this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click"),this._isIE8&&this._isValid(this.model.id)&&this._off(e("label[for="+this.model.id+"]"),"click"),this._off(this.wrapper,"focus"),this._off(this.wrapper,"focusout")},_focusIn:function(){e(this.wrapper).addClass("e-focus"),e(this.wrapper).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.wrapper).removeClass("e-focus"),e(this.wrapper).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){32==e.keyCode&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(e){var t={isChecked:this._isChecked,isInteraction:!0,event:e};return 1!=this._trigger("beforeChange",t)&&(this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0)):this.span.hasClass("e-chk-act")?1==this.model.enableTriState&&1==this._indeterminateState?(this._setIndeterminate(!0),this.checked()instanceof Array||this.checked(!0)):(this._unChecked(),this.checked()instanceof Array||this.checked(!1)):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),t={isChecked:this._isChecked,checkState:this.model.checkState,isInteraction:!0,event:e},this._trigger("change",t),!0)},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act"),this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.wrapper[0].setAttribute("aria-checked",!0),this.wrapper.find("input[type=checkbox]").prop("checked",!0),this.model.checkState="check",this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1),this.spanImg.removeClass("e-checkmark e-stop"),this.wrapper.find("input[type=checkbox]").prop("checked",!1),this.model.checkState="uncheck",this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(e){if(t.isNullOrUndefined(e)||""==e||e instanceof Array){if(e instanceof Array&&!t.isNullOrUndefined(this.model.value)&&""!=this.model.value)for(var i=0;i<e.length;i++)e[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||""==this.model.value||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(e.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):e.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(e.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(null!=this._isChecked&&null!=this._isChecked)return this._isChecked}}),t.CheckboxSize={Small:"small",Medium:"medium"},t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}),
/*!
*  filename: ej.excelfilter.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.menu.min"],e):e()}(function(){!function(e,t,i){t.ExcelFilter=t.ExcelFilter||{},t.excelFilter=function(e){return this._ctrlInstance=e.instance,this.id=this._ctrlInstance._id,this._dialogContainer=null,this._showSort=e.showSortOptions||!1,this._interDeterminateState=e.interDeterminateState||!1,this._maxCount=e.maxFilterLimit||1e3,this._formatFiltering=!0,this._locale=this._ctrlInstance.model.locale||"en-US",this.localizedLabels=this._getLocalizedLabel(),this._filterHandler=e.filterHandler||null,this._cancelHandler=e.cancelHandler||null,this._customFilterHandler=e.customFilterHandler||null,this._cssClass=e.cssClass||null,this._matchCase=e.allowCaseSensitive||!1,this._title=e.title||this.localizedLabels.title,this._complexBlankCriteria=e.enableComplexBlankFilter,this._blankValue=e.blankValue,this.fName=e.initFilterCol||null,this._spliter=e.valueDelimiter||t.ExcelFilter.valueDelimiter,this._initialFName=this.fName,this._displayName=null,this._dataSource=null,this._isUrlAdaptor=!1,this._$tableID=null,this._$blankVal=null,this._$selectedColors=[],this._$enableColor=!1,this._$filteredByColor="",this._$colType=null,this._$key=0,this.filteredColumn=null,this.sortedColumns=null,this._chkList=null,this._listsWrap=null,this._menuWrap=null,this._localJSON=null,this._actualCount=0,this._totalRcrd=0,this._enableResponsiveRow=!1,this._searchCount=0,this._currentData=null,this._openedFltr=null,this._predicates=[],this.cFilteredCols=null!=this.fName?[this.fName]:[],this._columnsFiltered=[],this.guid=t.getGuid("excelfilter"),this._noDlg=[],this._sepAftr=["sortDesc","notequal","between","top10","endswith","contains"],this._posType=["number","date","datetime","string","boolean","guid"],this._empties=this._complexBlankCriteria?["null","undefined",""]:[this.guid],this._reqInProgess=!1,this._isFiltered=!1,this._onActionBegin=e.actionBegin||null,this._onActionComplete=e.actionComplete||null,this.maxItemOnQuery=0,this.enableNormalize=!0,this.enableSelect=!1,this._onDemandSearch=!1,this._searchRequest=!1,this._isIndeterminate=!1,this._selectAll="<div class='e-ftrchk'><input type='checkbox' class='e-selectall' value='selectall' class='e-ftrchk' /><label class='e-ftrchk'>("+this.localizedLabels.SelectAll+")</label></div>",this._blanks="<div class='e-ftrchk'><input type='checkbox' id='blanks' class='e-ftrchk' value='"+this._empties.join(this._spliter)+"' @@/><label class='e-ftrchk' for='blanks' value=''>("+this.localizedLabels.Blanks+")</label></div>",this._blank=i,this._addAtLast=!1,this.guidMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.GuidFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.GuidMenuOptions}],this.numberMenuOpt=this.booleanMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.NumberFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.NumberMenuOptions}],this.stringMenuOpt=[{id:1,text:this.localizedLabels.SortTextAscending,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortTextDescending,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.TextFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.StringMenuOptions}],this.dateMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DateMenuOptions}],this.datetimeMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateTimeFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DatetimeMenuOptions}],this},t.excelFilter.prototype={isNotBlank:function(e,i){var s=t.isNullOrUndefined(e)||""===e||null===e;return i||""!==e&&null!==e||(this._addAtLast=!0),!s},_checkBlank:function(e){if(this.isNotBlank(e))return!0;var t=this._blank==i&&!this._addAtLast;return t&&(this._blank=!0),t},_getValueData:function(e,i){var s=this._empties;return this.isNotBlank(e,!0)&&(s=t.distinct(i,this._$foreignKey||this.fName,!1)),s.join(this._spliter)},getPredicate:function(e,s,n){var l,o,r,a,d;for(this._isUrlAdaptor=this._ctrlInstance._dataSource()instanceof t.DataManager&&(this._ctrlInstance._dataSource().adaptor instanceof t.UrlAdaptor||this._ctrlInstance._dataSource().adaptor instanceof t.WebMethodAdaptor),r={},a=0,d=(l=s!=i?[s]:t.distinct(e,"field",!1)).length;a<d;a++)o=new t.DataManager(e).executeLocal((new t.Query).where("field","equal",l[a])),r[l[a]]=this.generatePredicate(o),n&&(this._predicates[this._$key]=this._predicates[this._$key]||{},this._predicates[this._$key][l[a]]=r[l[a]]);return r},generatePredicate:function(e){var i,s,n,l=e?e.length:0;if(l){for(s=this._updateDateFilter(e[0]),i=!this._isUrlAdaptor||"date"!=s.type&&"datetime"!=s.type?s.ejpredicate?s.ejpredicate:t.Predicate(s.field,s.operator,s.value,s.ignoreCase||!s.matchcase):this._getDatePredicate(s),n=1;n<l;n++)e[n]=this._updateDateFilter(e[n]),this._isUrlAdaptor&&l>2&&n>1&&"or"==e[n].predicate?"date"==e[n].type||"datetime"==e[n].type?i.predicates.push(this._getDatePredicate(e[n])):i.predicates.push(t.Predicate(e[n].field,e[n].operator,e[n].value,e[n].ignoreCase||!e[n].matchcase)):i=!this._isUrlAdaptor||"date"!=e[n].type&&"datetime"!=e[n].type?e[n].ejpredicate?i[e[n].predicate](e[n].ejpredicate):i[e[n].predicate](e[n].field,e[n].operator,e[n].value,e[n].ignoreCase||!e[n].matchcase):i[e[n].predicate](this._getDatePredicate(e[n]));return i||null}},_getDatePredicate:function(e){return t.Predicate(e.field,e.operator,e.value,e.ignoreCase||!e.matchcase)},getFilterFrom:function(e,i){i=t.distinct(i,this.fName,!1);return this.maxItemOnQuery>0&&(i=i.slice(0,this.maxItemOnQuery)),t.UrlAdaptor.prototype.getFiltersFrom(i,(new t.Query).foreignKey(this._$foreignKey))},renderDialog:function(e){this._$colType=e;var i=this.id+e+"_excelDlg",s=t.buildTag("div#"+i+".e-excelfilter e-dlgcontainer e-shadow"),n=t.buildTag("ul#"+this.id+e+"_MenuItem"),l=this._getMenuData(e);n=this._createLiTag(n,l,!1);var o=t.buildTag("span.e-searchbox e-fields").append(t.buildTag("input#"+this.id+"_SearchBox.e-ejinputtext e-searchinput",{},{},{type:"text",placeholder:this.localizedLabels.Search})).append(t.buildTag("span.e-search e-icon")),r=t.buildTag("div#"+this.id+e+"_CheckBoxList.e-checkboxlist e-fields").append(t.buildTag("div")),a=this._createBtn(),d=t.buildTag("div.e-searchcontainer"),h=t.buildTag("div.e-status e-fields e-hide",this.localizedLabels.CheckBoxStatusMsg);s.append(n),d.append(o),d.append(h),d.append(r),d.append(a),s.append(d),s.appendTo(this._ctrlInstance.element),s.css("display","none"),this._renderCustomFDlg(e),this._dialogContainer=s,null!=this._cssClass&&s.addClass(this._cssClass),this._showSort||(n.find(".e-fnsort").closest("li").css("display","none"),n.find("li.e-separator:first").css("display","none")),this._lsitBoxTemplate(),this._renderSubCtrls(e),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&t.ieClearRemover(o.find("input")[0]),this._wireEvents()},_renderSubCtrls:function(i){e("#"+this.id+i+"_MenuItem").ejMenu({orientation:"vertical",width:266,click:t.proxy(this._menuHandler,this),enableRTL:this._ctrlInstance.model.enableRTL,enableSeparator:!1}),e("#"+this.id+i+"_OkBtn").ejButton({text:this.localizedLabels.Ok,showRoundedCorner:!0,width:60,click:t.proxy(this._fltrBtnHandler,this),enabled:!0}),e("#"+this.id+i+"_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:60,click:t.proxy(this.closeXFDialog,this)}),e("#"+this.id+i+"_CheckBoxList").ejScroller({height:130,width:234,scroll:t.proxy(this._virtualize,this)}),e("#"+this.id+i+"_CheckBoxList").ejWaitingPopup({showOnInit:!1})},openXFDialog:function(s){var n,l,o;this.fName=s.field,this._dataSource=s.dataSource,this._$colType=s.type||"string",this._$format=s.format||"",this._enableResponsiveRow=s.enableResponsiveRow,this.filteredColumn=s.filteredColumns||this._ctrlInstance.model.filterSettings.filteredColumns,this.sortedColumns=s.sortedColumns||this._ctrlInstance.model.sortSettings.sortedColumns,this._displayName=s.displayName,this._$key=s.key||0,this._$tableID=s.tableID,this._$blankVal=t.isNullOrUndefined(this._$tableID)?this._$blankVal:s.blank,this._$selectedColors=s.selectedColors||[],this._$enableColor=s.enableColor||!1,this._$filteredByColor=s.filteredByColor||this._$filteredByColor,this._$foreignField=s.foreignKeyValue,this._$foreignData=s.foreignDataSource,this._$foreignKey=s.foreignKey,this._$foreignKeyType=s.foreignKeyType,this._$foreignData instanceof t.DataManager&&(this._$foreignData.adaptor instanceof t.ODataAdaptor||this._$foreignData.adaptor instanceof t.ODataV4Adaptor||this._$foreignData.adaptor instanceof t.WebApiAdaptor)&&(this.maxItemOnQuery=50),e.extend(this.localizedLabels,s.localizedStrings||{}),o={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType},this._ctrlInstance._trigger(this._onActionBegin,o)||(null!=this._openedFltr&&this._openedFltr.is(e("#"+this.id+this._$colType+"_excelDlg"))||(this.closeXFDialog(),this._openedFltr=e("#"+this.id+this._$colType+"_excelDlg")),this._listsWrap=e("#"+this.id+this._$colType+"_CheckBoxList"),this._menuWrap=e("#"+this.id+this._$colType+"_MenuItem"),this._searchBox=this._openedFltr.find(".e-searchbox input"),this._setPosition(this._openedFltr,s.position),this._openedFltr.addClass(s.cssClass),this._openedFltr.fadeIn(300,function(){}),l=e("#"+this.id+this._$colType+"_MenuItem").find("li[ejfnrole='popup']"),this._$enableColor?(this._createDivTag(l.eq(0).find(".e-shadow"),this._$selectedColors,!1,"sort"),-1==this._$filteredByColor||this._$filteredByColor.length<1||this._$filteredByColor===this.fName?this._createDivTag(l.eq(1).find(".e-shadow"),this._$selectedColors,!1,"filter"):l.eq(1).addClass("e-disable-item")):l.hide(),this._isFiltered=this._predicates[this._$key]!=i&&this._predicates[this._$key][this.fName]!=i,this._isFiltered=s.isFiltered||this._isFiltered,("date"==this._$colType||"datetime"==this._$colType)&&""==this._$format&&(this._$format="date"==this._$colType?"{0:MM/dd/yyyy}":"{0:MM/dd/yyyy hh:mm:ss}"),this._processListData(),n=this._listsWrap.data("ejScroller"),this._ctrlInstance.model.enableRTL&&n.isHScroll()&&(n.scrollLeft(n.content()[0].scrollWidth-n.content()[0].clientWidth),n.refresh()),this._setDisable(),o={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType},this._ctrlInstance._trigger(this._onActionComplete,o))},closeXFDialog:function(i){if(null!=i){var s=e(i.target);if(!(s.closest("#"+this.id+this._$colType+"_CustomFDlg").length>0||s.closest("#"+this.id+this._$colType+"_excelDlg").length>0))return}this._openedFltr&&(this._openedFltr.hasClass("e-dlgcustom")?this._openedFltr.ejDialog("close"):(this._openedFltr.fadeOut(300,function(){}),this._listsWrap.ejWaitingPopup("hide")),t.isNullOrUndefined(this._cancelHandler)||this._cancelHandler(),this.resetFilterModel(),this._ctrlInstance._$fDlgIsOpen=!1)},_setPosition:function(e,t){e.css("position","absolute"),e.css("left",t.X).css("top",t.Y)},_setDisable:function(){var i,s,n,l=this._menuWrap.find("li[ejfnrole='clearfilter']"),o=this._menuWrap.find("li[ejfnrole='filterpopup']"),r=this._menuWrap.find("li[ejfnrole *= 'sort']");this._listsWrap.find("input").filter(":checked:not(.e-selectall)").length;if(this._isFiltered?l.removeClass("e-disable-item"):l.addClass("e-disable-item"),this._showSort&&((i=t.DataManager(this.sortedColumns).executeLocal((new t.Query).where("field","equal",this.fName))).length&&"ascending"==i[0].direction?r.filter("[ejfnrole='sortAsc']").addClass("e-disable-item"):r.filter("[ejfnrole='sortAsc']").removeClass("e-disable-item"),i.length&&"descending"==i[0].direction?r.filter("[ejfnrole='sortDesc']").addClass("e-disable-item"):r.filter("[ejfnrole ='sortDesc']").removeClass("e-disable-item")),s=o.find(".aschild"),0!=this.cFilteredCols.length&&-1!=e.inArray(this.fName,this.cFilteredCols)){for(n=0;n<this.filteredColumn.length;n++)if(this.filteredColumn[n].field==this.fName){0==s.find("#ejFiltercheck").length&&(s.append("<input type='checkbox' id='ejFiltercheck' />"),s.find("#ejFiltercheck").ejCheckBox({checked:!0}),s.find("#ejFiltercheck").ejCheckBox("disable")),o.find(".e-shadow .e-exceltick").length>0&&o.find(".e-shadow .e-exceltick").remove(),this.filteredColumn[n].field==this.fName&&!t.isNullOrUndefined(this.filteredColumn[n+1])&&this.filteredColumn[n+1].field==this.fName&&(this._$foreignField&&this.filteredColumn[n+1].customFilter||!this._$foreignField)?"greaterthanorequal"==this.filteredColumn[n].operator&&"lessthanorequal"==this.filteredColumn[n+1].operator?o.find(".e-shadow .e-list[ejvalue=between]").find("a").append("<span class='e-exceltick e-icon' />"):o.find(".e-shadow .e-list[ejvalue=customfilter]").find("a").append("<span class='e-exceltick e-icon' />"):this._$foreignField?o.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[n].actualFilterOperator+"]").find("a").append("<span class='e-exceltick e-icon' />"):o.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[n].operator+"]").find("a").append("<span class='e-exceltick e-icon' />");break}}else for(n=0;n<this.filteredColumn.length;n++)if(this.filteredColumn[n].field==this.fName){this._removeTick(o,s);break}this._isFiltered||0==s.find("#ejFiltercheck").length||this._removeTick(o,s),"boolean"==this._$colType&&this._menuWrap.find("li[aria-haspopup=true]").addClass("e-hide"),this._searchBox.val(""),this._searchBox.siblings().addClass("e-search").removeClass("e-cancel")},_removeTick:function(e,t){t.find("#ejFiltercheck").ejCheckBox("destroy"),e.find(".aschild #ejFiltercheck").remove(),e.find(".e-shadow .e-exceltick.e-icon").remove()},_createBtn:function(e){var i=e?this.id+this._$colType+"Custom":this.id+this._$colType,s=t.buildTag("div.e-btncontainer e-fields"),n=t.buildTag("div");return n.append(t.buildTag("input#"+i+"_OkBtn.e-fltrbtn",{},{},{type:"button"})).append(t.buildTag("input#"+i+"_CancelBtn.e-fltrbtn",{},{},{type:"button"})),s.append(n)},_menuHandler:function(t){var i,s,n,l,o,r,a=e(t.element),d=a.attr("ejfnrole"),h={};if("filterbgcolor"===d||"filterfgcolor"===d)i={field:this.fName,operation:d,color:e(t.element).css("background-color")},h={originalEvent:t.event,action:"filterbycolor",filterDetails:i,tableID:this._$tableID},this._isFiltered=!1;else if("clearfilter"==d)s={field:this.fName,operator:"",value:"",predicate:"or"},h={originalEvent:t.event,fieldName:this.fName,action:"clearfiltering",filterDetails:s,tableID:this._$tableID},-1!=(n=e.inArray(this.fName,this.cFilteredCols))&&this.cFilteredCols.splice(n,1),-1!=(l=e.inArray(this.fName,this._columnsFiltered))&&this._columnsFiltered.splice(l,1),this._initialFName==this.fName&&(this._initialFName=null);else{if("popup"==d||"filterpopup"==d)return;"operator"==d?this._openCustomFilter(a.attr("ejvalue")):"sortAsc"==d||"sortDesc"==d?(o="sortAsc"==d?"ascending":"descending",r={field:this.fName,direction:o},h={originalEvent:t.event,action:"sorting",sortDetails:r,tableID:this._$tableID}):(r={field:this.fName,direction:o,operation:d,color:e(t.element).css("background-color")},h={originalEvent:t.event,action:"sortbycolor",sortDetails:r,tableID:this._$tableID})}"operator"!=d&&(this._filterHandler(h),this.closeXFDialog())},_searchBoxFocus:function(t){var i=e(t.target);i.hasClass("e-cancel")&&(i.prev().val(""),i.next().addClass("e-cancel"),i.addClass("e-search"),i.prev().trigger("keyup")),"focusin"==t.type&&(i.next().addClass("e-cancel"),i.next().removeClass("e-search"))},_search:function(s){var n,l,o=s.target.value,r=e(s.target);l="contains",n=""==(n="string"!=this.getType()&&parseFloat(o)?parseFloat(o):o)||n==i?i:n,"boolean"==this._$colType&&(n!=i&&-1!=this.localizedLabels.True.toLocaleLowerCase().indexOf(n.toLowerCase())?n="true":n!=i&&-1!=this.localizedLabels.False.toLocaleLowerCase().indexOf(n.toLowerCase())&&(n="false")),("date"!=this._$colType&&"datetime"!=this._$colType||(n=t.parseDate(o,this.replacer(this._$format,/{0:|}/g,"")),l="equal",null!=this._previousValue||null!=n))&&(this._previousValue=n,delay=this._dataSource instanceof t.DataManager&&this._ctrlInstance.model.pageSettings.totalRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices?1500:0,sender={type:"filterchoicesearch",value:n,operator:l,matchcase:-1==["date","datetime"].indexOf(this._$colType)&&this._matchCase},this._processSearch(sender,delay),""==r.val()?(r.next().addClass("e-search"),r.next().removeClass("e-cancel")):(r.next().addClass("e-cancel"),r.next().removeClass("e-search")))},_processSearch:function(e,t){this._alreadySearchProcessed?(this._stopTimer(),this._startTimer(e,t)):(this._alreadySearchProcessed=!0,this._startTimer(e,t))},_startTimer:function(e,t){this._timer=window.setTimeout(function(){proxy._processListData(e)},t)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_getLocalizedLabel:function(){return t.getLocalizedConstants("ej.ExcelFilter",this._locale)},_getMenuData:function(e){return e!=i?this[e+"MenuOpt"]:[]},_lsitBoxTemplate:function(){var i,s={},n={};s[this.id+"isNotBlank"]=t.proxy(this.isNotBlank,this),s[this.id+"checkBlank"]=t.proxy(this._checkBlank,this),s[this.id+"_getValueData"]=t.proxy(this._getValueData,this),s[this.id+"_checkBoxState"]=t.proxy(this._setCheckState,this),s[this.id+"_genId"]=this._genCheckID,e.views.helpers(s),i=this.id+this._$colType+"{{:~"+this.id+"_genId()}}",n[this.id+this._$colType+"_listBox_Template"]="{{if ~"+this.id+"checkBlank(key)}}<div class='e-ftrchk'><input type='checkbox' id='"+i+"' value='{{html:~"+this.id+"_getValueData(key, items)}}' class='e-ftrchk' {{:~"+this.id+"_checkBoxState(~"+this.id+"_getValueData(key, items))}}/><label class='e-ftrchk' for='"+i+"'>{{if ~"+this.id+"isNotBlank(key,'true')}} {{>key}} {{else}} (Blanks) {{/if}}</label></div>{{/if}}",e.templates(n)},_processListData:function(e){var s,n,l,o,r,a={},d=new t.Query,h=(new t.Query).requiresCount(),c={};this._searchCount=0;var u,m=this._predicates[this._$key],p=null,g=null,f=null;for(n in t.isNullOrUndefined(this._$foreignField&&this._$foreignData)?(p=this._dataSource,g=this.fName,this._localJSON):(p=this._$foreignData,this._dataSource instanceof t.DataManager&&!(p instanceof t.DataManager)&&(p=t.DataManager(p)),g=this._$foreignField),m)n!=this.fName&&((o=(l=m[n]).from)?d.skip("top"==o?0:p.length-(p.length-l.take)).take(l.take):u=u!=i?u.and(l):l);a.columnName=g,d.requiresCount(),this._dataSource instanceof t.DataManager&&!this._dataSource.dataSource.offline&&this._ctrlInstance.model.pageSettings.totalRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices&&(d.take(this.maxFilterChoices),this._onDemandSearch=!0),u&&d.where(u),c.requestType=e?e.type:"filterchoicerequest",c.filterModel=this,c.query=d,c.dataSource=p,this._ctrlInstance._trigger(this._onActionBegin,c)||(this.enableSelect&&d.select(this.fName),e&&"filterchoicesearch"==e.type?(a.type=e.type,this._$foreignField&&(d=h),e.value&&d.where(g,e.operator,e.value,!e.matchcase),this._dataSource instanceof t.DataManager&&this._ctrlInstance.model.pageSettings.totalRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices?(this._searchRequest=!0,this._listsWrap.ejWaitingPopup("show"),this._$foreignField?(r=this._$foreignData instanceof t.DataManager?this._$foreignData:t.DataManager(this._$foreignData),this._dataProcessing(r,d,a)):this._dataProcessing(this._dataSource,d,a)):this._dataProcessing(t.DataManager(this._localJSON),d,a)):this._dataSource instanceof t.DataManager?(proxy=this,a.type="filterchoicerequest",this._listsWrap.ejWaitingPopup("show"),this._reqInProgess||(this._reqInProgess=!0,this._$foreignField&&(p=this._dataSource),(s=p.executeQuery(d)).done(function(e){proxy._$foreignField?proxy._filterForeignData(e,a):(f=e.result,a.data=proxy._localJSON=proxy._currentData=f,proxy._totalRcrd=e.count,proxy._listsWrap.ejWaitingPopup("hide"),proxy._setCheckBoxList(a),proxy._reqInProgess=!1)}))):(f=[],s=t.DataManager(this._dataSource).executeLocal(d),a.type="filterchoicerequest",this._$foreignField?this._filterForeignData(s,a):(f=s.result,a.data=this._localJSON=this._currentData=f,this._totalRcrd=s.count,this._setCheckBoxList(a))))},_dataProcessing:function(e,t,i){e.executeQuery(t).done(function(e){i.data=proxy._currentData=e.result,proxy._totalRcrd=proxy._searchCount=e.result.length,proxy._setCheckBoxList(i)})},_filterForeignData:function(i,s){var n,l,o,r,a,d,h,c="boolean"==typeof s,u=this._$foreignKey,m=this._$foreignField,p=this._$foreignKeyType,g=this,f={},_=new t.Query,v=this._$foreignData instanceof t.DataManager?this._$foreignData:t.DataManager(this._$foreignData);if(c){for(d=i[0],f=i[0],r=i.slice(),!d||this.closeXFDialog(),o=new t.Predicate(m,d.operator,d.value,!d.matchcase),a=1,h=i.length;a<h;a++)o=o[(d=i[a]).predicate](m,d.operator,d.value,!d.matchcase);_.where(o)}else n=i.result,!(l=i.count)||_.where(this.getFilterFrom(this._$foreignData,n)),this._listsWrap.ejWaitingPopup("model.showOnInit")||this._listsWrap.ejWaitingPopup("show");_.select([u,m]),v.executeQuery(_).done(function(i){if(c){var n,o=(n=0 in(n=t.distinct(i.result,u,!0))?n:[{}]).map(function(t){return e.extend({},f,{value:t[u],operator:"equal",actuals:r,type:p})});g.initiateFilter(o)}else s.data=g._localJSON=g._currentData=i.result,g._totalRcrd=l,g._listsWrap.ejWaitingPopup("hide"),g._setCheckBoxList(s),g._reqInProgess=!1})},_setCheckBoxList:function(i){var s,n,l={},o=this._blanks;l.requestType=i.type,l.dataSource=this._dataSource,l.filterModel=this,0!=this._currentData.length?(s=this.getDistinct(i.data,i.columnName,!0,!!this._$foreignKey),this._isFiltered,this._actualCount=s.length,s.length=this._maxCount>this._actualCount?this._actualCount:this._maxCount,this._onDemandSearch&&1e3==this._actualCount||this._actualCount>this._maxCount?this._openedFltr.find("div.e-status").removeClass("e-hide"):this._openedFltr.find("div.e-status").addClass("e-hide"),this._filterdCol=t.DataManager(this.filteredColumn).executeLocal(t.Query().where("field","equal",this.fName)),this._listsWrap.find("div:first").html([this._selectAll,e.render[this.id+this._$colType+"_listBox_Template"](s),this._addAtLast?this.replacer(o,/@@/g,this._setCheckState,this._empties.join(this._spliter)):""].join("")),this._chkList=this._listsWrap.find("input:checkbox").not(".e-selectall"),$inView=this._chkList.slice(0,20),$inView.ejCheckBox({change:t.proxy(this._checkHandler,this)}),$inView.siblings().height(14).width(14),this._listsWrap.find(".e-selectall").ejCheckBox({change:t.proxy(this._selectAllHandler,this),enableTriState:this._interDeterminateState}),this._listsWrap.find(".e-selectall").attr("id",this.id+this._$colType+"SelectAll"),this._listsWrap.find(".e-selectall").siblings().height(14).width(14),this._listsWrap.find(".e-selectall").closest("span").siblings("label").attr("for",this.id+this._$colType+"SelectAll")):(this._listsWrap.find("div").first().html(t.buildTag("div.e-ftrchk",this.localizedLabels.NoResult,{},{})),e("#"+this.id+this._$colType+"_OkBtn").ejButton("disable")),t.isNullOrUndefined(this._chkList)||(n=this._chkList.filter(":checked").length),this._isFiltered&&this._searchRequest&&0==n&&this._checkIsIndeterminate(i.columnName,this.filteredColumn),this._isFiltered&&this._actualCount!=n?(n>0||this._isIndeterminate&&this._interDeterminateState)&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checkState","indeterminate"):this._listsWrap.find(".e-selectall").ejCheckBox({checked:!0}),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=n}),this._listsWrap.ejScroller({scrollTop:0}).ejScroller("refresh"),this._listsWrap.hasClass("e-waitingpopup")&&this._listsWrap.ejWaitingPopup("hide"),this._ctrlInstance._trigger(this._onActionComplete,l)||(this._isIndeterminate=!1)},_checkIsIndeterminate:function(e,t){for(var i=0;i<t.length;i++)e==t[i].field&&(this._isIndeterminate=!0)},_createLiTag:function(s,n,l){return proxy=this,e.each(n,function(n,o){var r,a=t.buildTag("li",{},{},o.htmlAttribute||l&&{ejfnrole:"operator",ejvalue:o.value}||{}),d=l&&-1==e.inArray(o.value,proxy._noDlg)?"...":"",h=t.buildTag("a",o.text+d,{},{});o.sprite!=i&&h.append(t.buildTag("span",{},{},{class:o.sprite})),o.child!=i&&(r=3!=o.id&&5!=o.id?proxy._createLiTag(t.buildTag("ul.e-shadow"),o.child,!0):3===o.id?proxy._createDivTag(t.buildTag("ul.e-shadow"),o.child,!0,"sort"):proxy._createDivTag(t.buildTag("ul.e-shadow"),o.child,!0,"filter")),o.child==i?s.append(a.append(h)):s.append(a.append(h).append(r)),-1!=e.inArray(o.value||o.htmlAttribute&&o.htmlAttribute.ejfnrole,proxy._sepAftr)&&s.append(t.buildTag("li.e-separator"))}),s},_createDivTag:function(e,i,s,n){var l,o,r,a,d,h,c,u,m=[],p=[],g=!1,f="",_="";if("sort"==n?(f=this.localizedLabels.SortByCellColor,_=this.localizedLabels.SortByFontColor):(f=this.localizedLabels.FilterByCellColor,_=this.localizedLabels.FilterByFontColor),r=n+"colorhdr",d=n+"fonthdr",a=n+"bgcolor",h=n+"fgcolor",e.length>0&&e.children().remove(),i.length>0){for(u=0;u<i.length;u++){for(c=0;c<m.length;c++)if(m[c]==i[u].background){g=!0;break}for(g||t.isNullOrUndefined(i[u].background)||i[u].background.startsWith("#6n")||m.push(i[u].background),g=!1,c=0;c<p.length;c++)if(p[c]==i[u].foreground){g=!0;break}g||t.isNullOrUndefined(i[u].foreground)||i[u].foreground.startsWith("#6n")||p.push(i[u].foreground),g=!1}if(m.length>0)for(l=t.buildTag("li.e-list e-bghdrcolor","","",{ejfnrole:r}),o=t.buildTag("a.e-menulink",f,{}),l.append(o),e.append(l),u=0;u<m.length;u++)l=t.buildTag("li.e-list e-valcolor",{},{"background-color":m[u]},{ejfnrole:a}),e.append(l);if(p.length>0)for(l=t.buildTag("li.e-list e-fghdrcolor","","",{ejfnrole:d}),o=t.buildTag("a.e-menulink",_,{}),l.append(o),e.append(l),u=0;u<p.length;u++)l=t.buildTag("li.e-list e-valcolor",{},{"background-color":p[u]},{ejfnrole:h}),e.append(l);m.length<1&&p.length<1?e.parent().addClass("e-disable-item"):e.parent().removeClass("e-disable-item")}else e.parent().addClass("e-disable-item");return e},_setCheckState:function(e){var i,s,n,l=e,o=e.split(this._spliter),r=o.length;if(!this._isFiltered||this._searchCount)return"checked";for(;r--;)if(l=this.processValue(o[r]),"date"==this._$colType||"datetime"==this._$colType||"boolean"==this._$colType){for(i=0,s=this._filterdCol.length;i<s;i++)if(("boolean"!=this._$colType||l===this._filterdCol[i].value)&&("date"!=this._$colType&&"datetime"!=this._$colType||("date"==this._$colType&&l instanceof Date?this._formatting(this._$format,new Date(l.getFullYear(),l.getMonth(),l.getDate()),this._locale):this._formatting(this._$format,l,this._locale))===this._formatting(this._$format,this._filterdCol[i].value,this._locale)))return"checked"}else if(0!=(n=t.DataManager(this._filterdCol).executeLocal(t.Query().where("value","equal",l).where("operator","equal","equal"))).length)return"equal"==n[0].operator&&1==n[0].isCustom&&this._ctrlInstance.model.currentViewData.length>0?"checked":!0===n[0].isCustom?"":"checked"},_genCheckID:function(){return"CheckBox"+this.getIndex()},_formatting:function(e,t,i){if("date"==this._$colType&&""==e&&(e="{0:MM/dd/yyyy hh:mm:ss}"),"boolean"==this._$colType)return""===t?"":this.localizedLabels[1==t?"True":0==t?"False":""];if(this._formatFiltering||"date"==this._$colType){var s=this._ctrlInstance.formatting;return""!=e?s(e,t,i):t}},_updateDateFilter:function(e){return"date"==e.type||e.value instanceof Date?(e.value=e.value instanceof Date?e.value:t.parseJSON({val:e.value}).val,-1==["equal","notequal"].indexOf(e.operator)?e:this._setDateObject(e)):e},_checkHandler:function(t){e("#"+t.model.id).prop("checked",t.isChecked);var i,s=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)").length,n=this._listsWrap.find(".e-selectall");s==this._chkList.length?(n.prop("checked",!0),i=!0):0!=s&&this._interDeterminateState?t.isInteraction&&n.ejCheckBox("model.checkState","indeterminate"):(n.prop("checked",!1),i=!1),n.ejCheckBox({checked:i}),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=s})},_selectAllHandler:function(t){"check"==t.checkState?(this._chkList.filter(":not(:checked)").ejCheckBox({checked:t.isChecked}),this._chkList.prop("checked",!0)):"uncheck"==t.checkState&&(this._chkList.filter(function(){if(e(this).hasClass("e-checkbox")&&e(this).prop("checked"))return this}).ejCheckBox({checked:t.isChecked}),this._chkList.prop("checked",!1),this._chkList.removeAttr("checked")),e("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:t.isChecked})},_renderCustomFDlg:function(i){var s,n=this.id+i+"_CustomFDlg";e("#"+n).length||((s=t.buildTag("div#"+n+".e-excelfilter e-dlgcustom")).addClass(this._cssClass),this._renderCDlgContent(s,i),s.ejDialog({showOnInit:!1,enableResize:!1,enableModal:!0,allowKeyboardNavigation:!1,title:this._title,width:370,content:"#"+this.id,enableRTL:this._ctrlInstance.model.enableRTL,closeIconTooltip:"Close"}),"ej.Grid"==this._ctrlInstance.sfType&&s.ejDialog({position:{Y:this._ctrlInstance._gridContentTable.offset().top}}),s.ejDialog("refresh"))},_renderCDlgContent:function(i,s){var n,l=t.buildTag("div.e-dlgfields",this.localizedLabels.Showrowswhere,{},{}),o=this.id+this._$colType,r=t.buildTag("fieldset.e-fieldset"),a=t.buildTag("tr.e-fields"),d=t.buildTag("tr.e-fields"),h=t.buildTag("tr.e-fields e-top"),c=t.buildTag("input#"+o+"_CustomDrop1"),u=t.buildTag("input#"+o+"_CustomDrop2"),m=t.buildTag("input#"+o+"_CustomDrop3"),p=t.buildTag("input#"+o+"_CustomValue1.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),g=t.buildTag("input#"+o+"_CustomValue2.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),f=t.buildTag("input#"+o+"_CustomValue3.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),_=t.buildTag("tr.e-predicate"),v=t.buildTag("input#"+o+"_CustomAndPredicate",{},{},{type:"radio",name:"predicate",value:"and"}),b=t.buildTag("input#"+o+"_CustomOrPredicate",{},{},{type:"radio",name:"predicate",value:"or"}),C=t.buildTag("input#"+o+"_CustomMatchPredicate",{},{},{type:"checkbox"});i.append(l),n=t.buildTag("table.e-optable"),a.append(t.buildTag("td.e-operator").append(c)).append(t.buildTag("td.e-value").append(p)),_.append(t.buildTag("td",{},{},{}).append(v).append(t.buildTag("label.e-caption",this.localizedLabels.PredicateAnd,{},{for:o+"_CustomAndPredicate"})).append(b).append(t.buildTag("label.e-caption",this.localizedLabels.PredicateOr,{},{for:o+"_CustomOrPredicate"}))),d.append(t.buildTag("td.e-operator").append(u)).append(t.buildTag("td.e-value").append(g)),n.append(a).append(_).append(d),"string"==s&&_.append(t.buildTag("td",{},{},{}).append(C).append(t.buildTag("label.e-caption",this.localizedLabels.MatchCase,{},{for:o+"_CustomMatchPredicate"}))),("number"==s||"guid"==s)&&(h.append(t.buildTag("td.e-operator").append(m)).append(t.buildTag("td.e-value").append(f)),n.append(h)),r.append(t.buildTag("legend")).append(n),i.append(t.buildTag("div.e-dlgfields").append(r)),i.append(t.buildTag("div.e-dlgfields").append(this._createBtn(!0))),i.appendTo("body"),s.replace(s.charAt(0),s.charAt(0).toUpperCase()),e([c,u]).ejDropDownList({fields:{text:"text",value:"value"},height:27,width:120,enableRTL:this._ctrlInstance.model.enableRTL}),"number"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e([p,g]).ejNumericTextbox({showSpinButton:!1,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.NumericTextboxWaterMark,focusOut:function(){0==this.model.decimalPlaces&&this.element.prev(".e-input").val(this.model.value)}})):"guid"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e(p).css({height:"22px",width:"175px"}),e(g).css({height:"22px",width:"177px"})):"date"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e([p,g]).ejDatePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this._locale})):"datetime"==s?(e([c,u]).ejDropDownList({popupWidth:"170px"}),e([p,g]).ejDateTimePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DateTimePickerWaterMark})):"string"==s&&e([p,g]).ejAutocomplete({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL,enableDistinct:!0,width:"177px",height:"27px",locale:this._locale}),e([v,b]).ejRadioButton({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL}),C.ejCheckBox({}),e("#"+o+"Custom_OkBtn").ejButton({text:this.localizedLabels.Ok,showRoundedCorner:!0,width:"23.6%",click:t.proxy(this._fltrBtnHandler,this),enabled:!0}),e("#"+o+"Custom_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:"23.6%",click:t.proxy(this.closeXFDialog,this)})},_openCustomFilter:function(i){var s,n,l,o,r,a,d="top10"!=i?this._$colType:i,h=d.replace(d.charAt(0),d.charAt(0).toUpperCase()),c=this.id+this._$colType;this.closeXFDialog(),this._openedFltr=e("#"+c+"_CustomFDlg"),a={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0},this._ctrlInstance._trigger(this._onActionBegin,a)||(this._openedFltr.ejDialog("open"),this._openedFltr.ejDialog({open:function(){e("#"+c+"_CustomValue1").hasClass("e-autocomplete")?e("#"+c+"_CustomValue1").focus():e("#"+c+"_CustomValue1").prev().focus()}}),this._openedFltr.find("legend").html(this._displayName),s=-1!=["Number","Date"].indexOf(h)?6:5,(n=this.localizedLabels[h+"MenuOptions"].slice(0,s)).unshift({text:"",value:""}),e("#"+c+"_CustomDrop1").ejDropDownList({dataSource:n}),e("#"+c+"_CustomDrop2").ejDropDownList({dataSource:n}),"number"==this._$colType?(l=0,"top10"==i?(this._openedFltr.find(".e-optable tr").not(".e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr.e-top").removeClass("e-hide"),e("#"+c+"_CustomDrop3").ejDropDownList({dataSource:this.localizedLabels[h+"MenuOptions"]})):(l=0!=this._$format.length?parseInt(this._$format.replace(/\D/g,"")):0,this._openedFltr.find(".e-optable tr.e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr").not(".e-top").removeClass("e-hide"),e("#"+c+"_CustomValue1").ejNumericTextbox("model.decimalPlaces",l),e("#"+c+"_CustomValue2").ejNumericTextbox("model.decimalPlaces",l))):(this._openedFltr.find(".e-optable tr.e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr").not(".e-top").removeClass("e-hide")),"string"==this._$colType&&(o=this._$foreignField?this._$foreignField:this.fName,r=this._$foreignData&&this._$foreignField?this._$foreignData:this._dataSource,this._openedFltr.find(".e-autocomplete").ejAutocomplete({fields:{text:o},dataSource:r,focusIn:function(){var e=this.element.closest("td").siblings().find(".e-dropdownlist").ejDropDownList("getSelectedValue"),t=this.element.closest(".e-dialog-scroller").find(".e-checkbox").prop("checked");this.model.caseSensitiveSearch=t,this.model.filterType=""==e?this.model.filterType:e}})),"date"==this._$colType&&""!=this._$format?this._openedFltr.find(".e-datepicker").ejDatePicker({dateFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}):"datetime"==this._$colType&&""!=this._$format&&this._openedFltr.find(".e-datetimepicker").ejDateTimePicker({dateTimeFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}),this._setFilteredData(c,i),t.isNullOrUndefined(this._customFilterHandler)||this._customFilterHandler(),a={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0},this._ctrlInstance._trigger(this._onActionComplete,a))},_setFilteredData:function(s,n){var l,o,r,a,d,h,c=e.inArray(this.fName,this.cFilteredCols),u=[],m=[];if("top10"!=n){-1!=c&&(u=t.DataManager(this.filteredColumn).executeLocal(t.Query().where("field","equal",this.fName))),-1!=c&&this._$foreignField&&(u=u[0].actuals),null!=this._initialFName&&this._initialFName==this.fName&&(u[0].isCustom=!0),l=u.length;var p=this._openedFltr.find(".e-dropdownlist"),g=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),f=this._openedFltr.find(".e-predicate");for(m=-1!=c&&l&&u[0].from!=i?[n,""]:"between"==n&&-1!=c&&l?[u[0].operator,t.isNullOrUndefined(u[1])?"":u[1].operator]:-1!=c&&l&&u[0].isCustom?["customfilter"!=n&&-1!=c?n:u[0].operator,"customfilter"==n&&u[1]?u[1].operator:""]:-1==c&&"customfilter"==n?["equal",""]:"between"==n||"customfilter"==n?"customfilter"!=n?["greaterthanorequal","lessthanorequal"]:["",""]:[n,""],o=0;o<(-1!=c?l:2);o++)r=/\D*/.exec(m[o])[0],e(p[o]).prop("value",r),e(p[o]).ejDropDownList("setSelectedValue",r),e(p[o]).ejDropDownList({change:function(){this.element.closest(".e-fields").find(".e-autocomplete").val("")}}),a=-1!=c&&l&&u[o].isCustom&&(r==(this._$foreignField?u[o].actualFilterOperator:u[o].operator)||"customfilter"==r||"between"==r)?this._$foreignField?""!=r?u[o].actualFilterValue:"":u[o].value:"",e(g[o]).hasClass("e-datepicker")?e("#"+g[o].id).ejDatePicker("model.value",-1!=c&&l&&u[o].isCustom?u[o].value:null):e(g[o]).hasClass("e-numerictextbox")?e("#"+g[o].id).ejNumericTextbox("model.value",a):e(g[o]).hasClass("e-datetimepicker")?e(g[o]).ejDateTimePicker("model.value",a):e(g[o]).val(a),d=-1!=c&&l&&u[o].isCustom&&u[o].predicate!=i?this._$foreignField?u[o].actualPredicate:u[o].predicate:"and",f.find("input[value="+d+"]").ejRadioButton({checked:!0}),"string"==this._$colType&&(h=-1!=c&&l&&u[o].isCustom?u[o].matchcase:this._matchCase,f.find("input.e-js[type='checkbox']").ejCheckBox({checked:h})),this._openedFltr.find(".e-value input:visible:eq(0)").select()}},_setDateObject:function(i){var s;if(null!=i.value){i.value;var n=e.extend(!0,{},i),l=e.extend(!0,{},i),o=new Date(n.value.setSeconds(n.value.getSeconds()-1)),r=new Date(l.value.setSeconds(l.value.getSeconds()+2));return i.value=new Date(i.value.setSeconds(l.value.getSeconds()-1)),n.value=o,l.value=r,"equal"==i.operator?(n.operator="greaterthan",n.predicate="and",l.operator="lessthan",l.predicate="and"):"notequal"==i.operator&&(n.operator="lessthanorequal",n.predicate="or",l.operator="greaterthanorequal",l.predicate="or"),s=(s=t.Predicate(n.field,n.operator,n.value,!n.matchcase))[l.predicate](l.field,l.operator,l.value,!l.matchcase),i.ejpredicate=s,i.type="date",i}return i},_getCDlgFields:function(){var t,s,n,l,o,r,a,d,h=this._openedFltr.find(".e-dropdownlist"),c=this._openedFltr.find(".e-checkbox"),u=!0,m=[],p=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),g=this._openedFltr.find(".e-value input"),f=this._openedFltr.find(".e-predicate input[type='radio']:checked").val();for(-1==e.inArray(this.fName,this.cFilteredCols)&&this.cFilteredCols.push(this.fName),s=0,n=h.length;s<n;s++)if(l=e(h[s]).ejDropDownList("getSelectedValue"),"number"==this._$colType&&(o=parseFloat(p.eq(s).ejNumericTextbox("model.value"))),"guid"==this._$colType&&(o=g.eq(s).val()),"string"==this._$colType&&(o=p.eq(s).val(),u=c.is(":checked")),"date"==this._$colType&&(o=p.eq(s).ejDatePicker("model.value")),"datetime"==this._$colType&&(o=p.eq(s).ejDateTimePicker("model.value")),t={field:this.fName,predicate:1==s?f:"or",matchcase:u,isCustom:!0},"top"==l||"bottom"==l)m.push(e.extend(!0,{value:"",operator:"notequal",take:o,from:l},t));else{if(""==l)break;this._empties.indexOf(o+"")>-1||"number"==this._$colType&&isNaN(o)?(r=this.iterateAndGetCollection(this._empties.join(this._spliter),e.extend({},t,{predicate:"notequal"===l.toLowerCase()?"and":"or",operator:l.toLowerCase()})),a=this.generatePredicate(r),m.push(e.extend({},t,{ejpredicate:a,operator:l.toLowerCase()}))):(d={},e.extend(!0,d,{value:o,operator:l.toLowerCase(),isCustom:!0,actualFilterOperator:l.toLowerCase(),actualFilterValue:o,actualPredicate:t.predicate},t),"date"==this._$colType&&(d.type="date"),m.push("date"==this._$colType&&-1!=["equal","notequal"].indexOf(l.toLowerCase())?this._setDateObject(d):d))}this._$foreignField==i?this.initiateFilter(m):this._filterForeignData(m,!0)},_fltrBtnHandler:function(){var i,s,n=[],l={};if(this._openedFltr.hasClass("e-dlgcustom"))n=this._getCDlgFields(),-1==e.inArray(this.fName,this.cFilteredCols)&&n[0]&&this.cFilteredCols.push(this.fName);else{if(!this._isFiltered&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")&&0==this._searchCount)return this.closeXFDialog();var o,r=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)"),a=r.length,d=this.getType(),h="string"==this._colType?"startswith":"equal",c="string"!=this._colType||this._matchCase,u={field:this.fName,predicate:"or",operator:h,matchcase:c};for(i=0;i<a;i++)o=r[i].value,this.enableNormalize&&-1!=o.indexOf(this._spliter)?t.merge(n,this.iterateAndGetCollection(o,u)):(o=this.processValue(o,d),e.extend(!0,l,{value:o},u),n.push("date"==d?this._setDateObject(l):l),l={});-1!=(s=e.inArray(this.fName,this.cFilteredCols))&&this.cFilteredCols.splice(s,1),this._isFiltered&&this._searchRequest&&(this._checkIsIndeterminate(this.fName,this.filteredColumn),this._isIndeterminate&&(t.merge(n,this.filteredColumn),n=t.distinct(n,"value",!0),this._searchRequest=!1)),this.initiateFilter(n)}},initiateFilter:function(s){var n,l,o,r=s[0];if(!t.isNullOrUndefined(r)){for(isTake=r.from,n=r.ejpredicate?r.ejpredicate:t.Predicate(r.field,r.operator,r.value,!r.matchcase),l=1,o=s.length;l<o;l++)n=s[l].ejpredicate!=i?n[s[l].predicate](s[l].ejpredicate):n[s[l].predicate](s[l].field,s[l].operator,s[l].value,!s[l].matchcase);arg={action:"filtering",filterCollection:s,fieldName:this.fName,ejpredicate:n,tableID:this._$tableID},this._predicates[this._$key]==i&&(this._predicates[this._$key]={}),this._predicates[this._$key][this.fName]=isTake?{from:r.from,take:r.take}:n,this._openedFltr.hasClass("e-dlgcustom")||!this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")||this._searchCount||-1==e.inArray(this.fName,this._columnsFiltered)||(arg={action:"clearfiltering",filterDetails:{field:this.fName,operator:"",predicate:"or",value:""},fieldName:this.fName,tableID:this._$tableID}),-1==e.inArray(this.fName,this._columnsFiltered)&&this._columnsFiltered.push(this.fName),this._filterHandler(arg)}this.closeXFDialog()},getDistinct:function(e,i,s,n){for(var l,o,r,a={},d=e.length,h=[];d--;)l=e[d],r=o=t.getObject(i,l),this.enableNormalize&&(r=this._formatting(this._$format,o,this._locale)),l.ejvalue=r,!n&&o in a||h.push(s?l:o),a[o]=!0;return t.group(t.mergeSort(h,i),"ejvalue")},iterateAndGetCollection:function(t,i){for(var s,n=t.split(this._spliter),l=n.length,o=[];l--;)s=this.processValue(n[l]),o.push(e.extend(!0,{value:s},i));return o},processValue:function(e,s){switch(s=s||this.getType(),s=-1!=this._empties.indexOf(e)?"empty":s,e=e===this.guid?this._blankValue+"":e,s){case"empty":e="null"==e?null:"undefined"==e?i:"";break;case"date":case"datetime":e=new Date(e);break;case"number":e=+e;break;case"boolean":e=isNaN(e)||"string"!=typeof e?"true"===e:0!=t.parseInt(e)}return e},getType:function(){return t.isNullOrUndefined(this._$foreignField)?this._$colType:this._$foreignKeyType},replacer:function(e,t,i,s){return"function"==typeof i&&(i=i.call(this,s)),e.replace(t,i)},_virtualize:function(i){var s=e("#"+this.id+this._$colType+"_CheckBoxList").height(),n=this._chkList.not(".e-checkbox").filter(function(){if(this.offsetTop>i.scrollTop-this.offsetHeight&&i.scrollTop+s+70>this.offsetTop+this.offsetHeight)return this});0!=n.length&&(n.filter(":checked").ejCheckBox({checked:!0}),n.filter(":not(:checked)").ejCheckBox({checked:!1}),n.ejCheckBox({change:t.proxy(this._checkHandler,this)}),this._listsWrap.ejScroller("instance").refresh())},resetFilterModel:function(){this._blank=i,this._addAtLast=!1,this._isFiltered=!1,this._searchCount=0},resetExcelFilter:function(){var t,i,s,n,l,o=this.id;for(this._predicates=[],this.cFilteredCols=[],this.resetFilterModel(),t=0,s=this._posType.length;t<s;t++)i=this._posType[t],l=e("#"+(n=o+i)+"_CustomFDlg"),e("#"+n+"_CheckBoxList").ejWaitingPopup("destroy"),e("#"+n+"_excelDlg").remove(),l.find(".e-dropdownlist").ejDropDownList("destroy"),l.find(".e-button").ejButton("destroy"),("string"==i||"boolean"==i)&&l.find(".e-autocomplete").ejAutocomplete("destroy"),"number"==i&&l.find(".e-numerictextbox").ejNumericTextbox("destroy"),"date"==i&&l.find(".e-datepicker").ejDatePicker("destroy"),l.ejDialog("destroy"),e("#"+n+"_CustomFDlg").remove()},_wireEvents:function(){this._ctrlInstance._on(this._dialogContainer,"focus click",".e-searchbox",t.proxy(this._searchBoxFocus,this)),this._ctrlInstance._on(this._dialogContainer,"keyup",".e-searchbox input",t.proxy(this._search,this))}},t.ExcelFilter.valueDelimiter="@|@",t.ExcelFilter.Locale=t.ExcelFilter.Locale||{},t.ExcelFilter.Locale.default=t.ExcelFilter.Locale["en-US"]={SortNoSmaller:"Sort Smallest to Largest",SortNoLarger:"Sort Largest to Smallest",SortTextAscending:"Sort A to Z",SortTextDescending:"Sort Z to A",SortDateOldest:"Sort by Oldest",SortDateNewest:"Sort by Newest",SortByColor:"Sort By Color",SortByCellColor:"Sort by Cell Color",SortByFontColor:"Sort by Font Color",FilterByColor:"Filter By Color",CustomSort:"Custom Sort",FilterByCellColor:"Filter by Cell Color",FilterByFontColor:"Filter by Font Color",ClearFilter:"Clear Filter",NumberFilter:"Number Filters",GuidFilter:"Guid Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"Date Time Filters",SelectAll:"Select All",Blanks:"Blanks",Search:"Search",Showrowswhere:"Show rows where",NumericTextboxWaterMark:"Enter value",StringMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Starts With",value:"startswith"},{text:"Ends With",value:"endswith"},{text:"Contains",value:"contains"},{text:"Custom Filter",value:"customfilter"}],NumberMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],GuidMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Custom Filter",value:"customfilter"}],DateMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],DatetimeMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],Top10MenuOptions:[{text:"Top",value:"top"},{text:"Bottom",value:"bottom"}],title:"Custom Filter",PredicateAnd:"AND",PredicateOr:"OR",Ok:"OK",MatchCase:"Match Case",Cancel:"Cancel",NoResult:"No Matches Found",CheckBoxStatusMsg:"Not all items showing",DatePickerWaterMark:"Select date",DateTimePickerWaterMark:"Select date time",True:"true",False:"false"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.datepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){var e,t,n;e=jQuery,(t=Syncfusion).widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date(1900,0,1),maxDate:new Date(2099,11,31),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(i){var s,n,l=!1,o=!1,r=!1;for(s in i)switch(s){case"dayHeaderFormat":this.model.dayHeaderFormat=i[s],l=o=!0;break;case"showPopupButton":this._renderDateIcon(i[s],!0);break;case"displayInline":this._setDisplayInline(i[s]),this.model.allowEdit||i[s]||!this._isInputBox()||this.element.on("mousedown",e.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[s])&&(i[s]=null),t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),i[s]=this.model.value):this._updateDateValue(i[s]),r=l=o=!0;break;case"specialDates":this.model.specialDates=i[s],this._createSpecialDateObject(),l=o=!0;break;case"fields":this.model.fields=i[s],this._mapField=this._getMapper(),l=o=!0;break;case"showTooltip":this.model.showTooltip=i[s],l=o=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[s],l=o=!0;break;case"highlightSection":this.model.highlightSection=i[s],l=o=!0;break;case"dateFormat":this.model.dateFormat=i[s],this._ensureValue();break;case"minDate":this._setMinDate(i[s]),i[s]=this.model.minDate,this._ensureValue(),r=l=o=!0;break;case"maxDate":this._setMaxDate(i[s]),i[s]=this.model.maxDate,this._ensureValue(),r=l=o=!0;break;case"locale":this.model.locale=i[s],this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(i[s]),this.model.value&&this._setDateValue(this.model.value),i[s]=this.model.locale,l=o=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[s],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[s],r=l=o=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[s],this._disbleMaualInput();break;case"width":this._setWidth(i[s]);break;case"height":this._setHeight(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":i[s]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(i[s]);break;case"showFooter":this._enableFooter(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":n=i[s],(parseInt(i[s])<0||parseInt(i[s])>6)&&(i[s]=this.culture.calendar.firstDay,n=-1),this.model.startDay=i[s],t.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=n,l=o=!0;break;case"startLevel":this.model.startLevel=i[s],l=o=!0;break;case"headerFormat":this.model.headerFormat=i[s],l=o=!0;break;case"depthLevel":this.model.depthLevel=i[s],l=o=!0;break;case"htmlAttributes":this._addAttr(i[s]);break;case"allowEdit":this._changeEditable(i[s]);break;case"tooltipFormat":this.model.tooltipFormat=i[s],l=o=!0;break;case"allowDrillDown":this._allowQuickPick(i[s]),l=o=!0;break;case"showDisabledRange":this._setRestrictDateState(i[s]);break;case"blackoutDates":this.model.blackoutDates=i[s],this._initDisableObj(this.model.blackoutDates),l=o=!0}r&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate),this._setWaterMark(),l&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),o&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isSupport=document.createElement("input").placeholder!=n,this._checkAttribute(),this._setValues(),this._createDatePicker(),this._setRestrictDateState(this.model.showDisabledRange),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=n&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_checkAttribute:function(){for(var e,i,s=["min","max","readonly","disabled"],n=["minDate","maxDate","readOnly","enabled"],l=0;l<s.length;l++)e=this.element.attr(s[l]),i=n[l],t.isNullOrUndefined(e)||(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options[i]))&&(this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this[i](this.element,"blur",this._onFocusOut),this[i](this.element,"focus",this._onFocusIn),this[i](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(t){e(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",e.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){var t=e?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s.disable():"readOnly"==n&&"readOnly"==e?s.model.readOnly=!0:"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox()){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr(),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&e("#e-"+this._id).remove(),this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._resizeCalender(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this._createCalender(),this._setDisplayInline(this.model.displayInline),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?this.wrapper?this.wrapper.width(e):this.element.width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?this.wrapper?this.wrapper.height(e):this.element.height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var t,i;this._stopRefresh?this._stopRefresh=!1:(t=this.element.val(),i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t?this._parseDate(t,!0):this._parseDate(t),i=this._validateYearValue(i),this._setDateValue(i),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged())},_validateYearValue:function(e){if(null!=e){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>i&&e.setFullYear(this._calendarDate.getFullYear())}return e},_setFooterText:function(t){e(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(t){this.model.displayInline=t,t&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),e("body").append(this.sfCalendar),this._isOpen=!1),t?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(e(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&e(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?null:(e instanceof Date||(e=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||((t=this._checkJSONString(e))?t:null)),!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null)},_checkJSONString:function(e){if(isNaN(Date.parse(e))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e)return new Date(e);if("string"==typeof e)return this._dateFromISO(e)}},_dateFromISO:function(e){var t,i,s,n,l,o,r,a,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",u="",m="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){u=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(m="Z"),s=(c+u+m).match(this._tokens),l=[],r=0;r<s.length;r++)a=s[r],o=this._checkLiteral(s[r]),d=this._numberRegex[o?s[r].toLowerCase():a.length]||new RegExp("^\\d{1,"+a.length+"}"),(n=e.match(d))&&(e.substr(0,e.indexOf(n))>=0&&!o&&(s[r].indexOf("M")>=0?l.push(parseInt(n[0])-1):l.push(parseInt(n[0]))),e=e.slice(e.indexOf(n[0])+n[0].length));return new Date(l[0],l[1],l[2],l[3],l[4],l[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){if("string"==typeof e){var i=t.parseDate(e,this.model.dateFormat,this.model.locale);e=null!=i?i:new Date(e)}return e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=t.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox()){var i,s,n=this.element.is("input")?this.wrapper:this.element,l=this._getOffset(n),o=e(document).scrollTop()+e(window).height()-(l.top+e(n).outerHeight()),r=l.top-e(document).scrollTop(),a=this.sfCalendar.outerHeight(),d=this.sfCalendar.outerWidth(),h=l.left,c=n.outerHeight(),u=(n.height(),this._getZindexPartial()),m=a<o||a>r?l.top+c+3:l.top-a-3;i=e(document).scrollLeft()+e(window).width()-h,s=e(document).scrollLeft()+h+n.width(),(this.model.enableRTL||d>i&&d<h+n.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(h+=this.wrapper.width()-this.sfCalendar.width()),d>s&&(h=l.left),this.sfCalendar.css({left:h+"px",top:m+"px","z-index":u})}},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,i){var s=this._checkDateObject(e,i);null!=s?(this.isValidState=!0,this.model.value=new Date(s.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!t.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){(null!=this._validateValue()||!this.model.enableStrictMode)&&this.sfCalendar.find(".e-datepicker-days").is(":visible")&&this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0))},_validateValue:function(){var e;return e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e>=7&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_parseDate:function(e,i){var s=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=n&&""!=e&&1!=i&&t.format(t.parseDate(DateValue,s,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:t.parseDate(e,s,this.model.locale)},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){var t="string"==typeof e?this._parseDate(e):new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=e&&e.date?e.date:"date",t._tooltip=e&&e.tooltip?e.tooltip:"tooltip",t._icon=e&&e.iconClass?e.iconClass:"iconClass",t._custom=e&&e.cssClass?e.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return e?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,l,o,r,a,d;this.model.minDate!=n&&this.model.maxDate!=n&&((s=new Date(this.model.minDate.getTime())).setDate(1),(l=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(o=this._zeroTime(new Date)).setDate(1):o=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),o.getTime()<s.getTime()?o=s:o.getTime()>l.getTime()&&(o=l),r=this.displayedMonth,a=this.displayedYear,this.displayedMonth=o.getMonth(),this.displayedYear=o.getFullYear(),d=o,i&&(this.displayedMonth!=r||this.displayedYear!=a)&&(this._renderCalendar(this,d),this._dateValue=d,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&e("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){e("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){e("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i),this._renderCalendar(this),this._startLevel(this.model.startLevel),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),e(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?e(".e-header",this.sfCalendar).show():e(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?e(".e-footer",this.sfCalendar).show():e(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){e>=t?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){var i,s,n,l;if(this.model.readOnly||!this.model.enabled||e(t.target).hasClass("e-disable"))return!1;switch(t.preventDefault(),i=e("table",this.sfCalendar),s=this._navigateFrom(i),n=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev"),this._processNextPrevDate(n),e("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":l="month";break;case"e-dp-viewmonths":l="year";break;case"e-dp-viewyears":l="decade";break;case"e-dp-viewallyears":l="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:l,navigateFrom:s})},_processNextPrevDate:function(t){var i,n,l,o,r,a,d;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch((i=e("table",this.sfCalendar)).get(0).className){case"e-dp-viewdays":if(l=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0,this._addMonths(this._dateValue,t?-l:l),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),o=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(o.firstDay,this.model.minDate),this._nextArrowCondition(o.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if((r=this._dateValue).setFullYear(e(".e-datepicker-headertext",this.sfCalendar).text()),t){if(r.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(r.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,this._addYears(r,t?-1:1),this._renderCalendar(this,r),n=r.getFullYear(),e(".e-datepicker-headertext",this.sfCalendar).text(n),e("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide(),e(e(i).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(n,n);break;case"e-dp-viewyears":if((a=this._dateValue).setFullYear(e(i).find(".e-state-hover").text()),t){if(parseInt(e("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(e("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,e(i).find(".e-state-hover").hasClass("e-year-first")&&t||e(i).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(a.getFullYear()):e(i).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(a.getFullYear()+11):e(i).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(a.getFullYear()-11):this._dateValue.setFullYear(a.getFullYear()+(t?-10:10)),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+(d+10)),e("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide(),e(e(i).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(e(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,d+10);break;case"e-dp-viewallyears":if(t){if(parseFloat(e("td.e-allyear-first",i.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),n=parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+n),e("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide(),e(e(i).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(e(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,n)}this._layoutChanged()},_addFocus:function(t,i){var s,n,l="e-current-"+t;return"day"==t&&(l="current-month"),s=this.sfCalendar.find("tbody tr td."+l),"month"==t&&e(s).each(function(t,s){parseInt(e(s).attr("index"))!=parseInt(i)||(i=t)}),(n=s[i])||(n=s.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(n).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){var i,s,n;if(this.model.value instanceof Date){var l,o=this.sfCalendar.find("tbody tr td.e-current-"+t),r=this,a=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(e(".e-text",this.sfCalendar).text())&&e(o).each(function(t,i){parseInt(e(i).attr("index"))!=parseInt(r.model.value.getMonth())||(a=t)});break;case"year":i=this.model.value.getFullYear(),e(o).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(a=e)});break;case"allyear":s=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),n=s+1+" - "+(s+10),e(o).each(function(e,t){parseInt(t.innerHTML)!=parseInt(n)||(a=e)})}(l=o[a])&&(this.sfCalendar.find("table td").removeClass("e-active"),e(l).hasClass("e-hidedate")||e(l).addClass("e-active"))}},_setFocusByName:function(t,i){var s,n,l=this.sfCalendar.find("tbody tr td.e-current-"+t);return e(l).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(s=e)}),(n=l[s])||(n=l.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(n).addClass("e-state-hover"),this._setActiveState(t),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var i,s,n=e("table",this.sfCalendar),l=e("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(n),l){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(n.find(".e-state-hover")).getMonth()||this._getDateObj(n.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),s="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt(),this._startLevel("decade"),s="decade",this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt(),this._startLevel("century"),s="century",this._hoverAllYear=this._setFocusByName("allyear",i)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var t,i;switch(e("table",this.sfCalendar),e("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=t,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=t,i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var i,s,n=this.sfCalendar.find("tbody tr td.e-current-"+t),l=this._dateValue.getFullYear();e(n).each(function(e,t){parseInt(t.innerHTML)!=parseInt(l)||(i=e)}),(s=n[i])&&(e(s).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):e(s).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){var s,n;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),s=e(i.currentTarget)):s=i;var l,o,r=e("table",this.sfCalendar),a=e("table",this.sfCalendar).get(0).className,d=this;switch(navFrom=this._navigateFrom(r),a){case"e-dp-viewmonths":r.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(e(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate()),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget}),this._renderCalendar(this,this._dateValue),e("tbody",r).not(".e-datepicker-days,.e-week-header").hide(),e(e(r).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){d._addFocus("day",d._hoverDate||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),o="month";break;case"e-dp-viewyears":r.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),e("tbody,tr.e-week-header",r).not(".e-datepicker-months").hide(),t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),e(e(r).find(".e-datepicker-months")).fadeIn("fast",function(){d._addFocus("month",d._hoverMonth||0),d._animating=!1}),l=s.text(),e(".e-datepicker-headertext",this.sfCalendar).text(l),this._checkArrows(l,l),o="year";break;case"e-dp-viewallyears":n=s.text().split("-"),r.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),n[0]<this.model.minDate.getFullYear()?n[0]=this.model.minDate.getFullYear().toString():n[0]>this.model.maxDate.getFullYear()&&(n[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(n[0],0,1)),e("tbody,tr.e-week-header",r).not(".e-datepicker-years").hide(),e(e(r).find(".e-datepicker-years")).fadeIn("fast",function(){d._addFocus("year",d._hoverYear||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(n[0]+" - "+n[1]),this._checkArrows(n[0],n[1]),o="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.trim(n[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:o,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(t){var i,s,n,l,o=e("table",this.sfCalendar),r=e(".e-datepicker-headertext",this.sfCalendar),a=this._dateValue;switch(t){case"decade":o.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-years").hide(),e(e(o).find(".e-datepicker-years")).show(),a=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:a,i=1+(l=parseInt(a.getFullYear())-(parseInt(a.getFullYear())%10+1)),s=l+10,r.text(i+" - "+s),this._checkArrows(i,s),this._hoverYear=this._setFocusByName("year",a.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,a),o.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-allyears").hide(),e(e(o).find(".e-datepicker-allyears")).show(),n=(i=parseFloat(e("td.e-allyear-first",o.get(0)).text().split("-")[1])+1)+" - "+(s=parseFloat(e("td.e-allyear-last",o.get(0)).prev().text().split("-")[1])),r.text(n),this._checkArrows(i,s),l=parseInt(a.getFullYear())-(parseInt(a.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",l+1+" - "+(l+10));break;case"year":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),e("tbody,tr.e-week-header",o).hide(),e(e(o).find(".e-datepicker-months")).show(),i=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():a.getFullYear(),r.text(i),this._checkArrows(i,i),this._hoverMonth=a.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":e(i.find(".e-current-year,.e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),this._on(e(".e-current-month",this.sfCalendar),"click",e.proxy(this._onDepthSelectHandler,this));break;case"decade":e(i.find(".e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),e(".e-current-year",this.sfCalendar).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"century":e(i.find(".e-current-allyear")).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;e(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):(e(t.target).hasClass("e-current-year")||e(t.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML)))),this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,s){for(var n,l,o,r,a=function(e){return document.createElement(e)},d=0,h=0;h<3;h++){for(n=e(a("tr")),l=0;l<4;l++)o=e(a("td")).addClass("e-current-month e-state-default").attr({index:d}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[d++]),(s.getFullYear()<this.model.minDate.getFullYear()||s.getFullYear()>this.model.maxDate.getFullYear()||s.getFullYear()<=this.model.minDate.getFullYear()&&d<this.model.minDate.getMonth()+1||s.getFullYear()>=this.model.maxDate.getFullYear()&&d>this.model.maxDate.getMonth()+1)&&(o.addClass("e-hidedate"),o.removeClass("e-current-month")),n.append(o);t.append(n)}i.append(t),r=s.getFullYear(),this._checkArrows(r,r)},_datepickerYears:function(t,i,s){for(var n,l,o,r,a=function(e){return document.createElement(e)},d=parseInt(s)-(parseInt(s)%10+1),h=[],c=0;c<12;c++)h.push(d+c);for(n=0,l=0;l<3;l++){for(o=e(a("tr")),c=0;c<4;c++)(r=e(a("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==n?r.addClass("e-year-first e-current-year "):11==n?r.addClass("e-year-last e-current-year "):r.addClass("e-current-year e-state-default"),(h[n]<this.model.minDate.getFullYear()||h[n]>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-year")),r.html(h[n++]),o.append(r);t.append(o)}i.append(t),this._checkArrows(h[0],h[h.length])},_datepickerAllYears:function(t,i,s){for(var n,l,o,r,a=parseInt(s)-(parseInt(s)%100+10),d=[],h=this._isIE8||this._isIE9?"":"\n",c=0;c<12;c++)d.push(parseInt(a)+" -"+h+parseInt(a+9)),a+=10;for(n=0,l=0;l<3;l++){for(o=e(document.createElement("tr")),c=0;c<4;c++)(r=e(document.createElement("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==n?r.addClass("e-allyear-first e-current-allyear "):11==n?r.addClass("e-allyear-last e-current-allyear "):r.addClass("e-current-allyear e-state-default"),(parseInt(d[n].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(d[n].split("-\n")[0])>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-allyear")),r.html(d[n++]),o.append(r);t.append(o)}i.append(t)},_renderHeader:function(i){var s,n,l,o,r,a,d=e(document.createElement("thead")),h=t.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=i.model.dayHeaderFormat)for(s=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),n=this.Date.firstDayOfWeek;n<this.Date.firstDayOfWeek+7;n++)l=n%7,o=h.names[l],r="short"==i.model.dayHeaderFormat?h.namesAbbr[l]:"long"==i.model.dayHeaderFormat?o:h.namesShort[l],a=t.buildTag("th","",{},{scope:"col",abbr:o,date:o,title:this._formatter(o,"dddd"),class:0==l||6==l?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(r),s.append(a);return d.append(s)},_renderCalendar:function(i,s){var l,o,r,a,d,h,c,u,m;i=e.extend({},t.DatePicker.prototype.defaults,i),this.Date.firstDayOfWeek=this.model.startDay,l=s||(this._calendarDate?this._calendarDate:this._zeroTime(new Date)),(o=e("table",this.sfCalendar)).empty(),o.append(this._renderHeader(i)),r=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(r,o,l.getFullYear()),r=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(r,o,l.getFullYear());var p=i.model.month==n?l.getMonth():i.model.month,g=i.model.year||l.getFullYear(),f=new Date(g,p,1,0,0,0),_=this.Date.firstDayOfWeek-f.getDay()+1;_>1&&(_-=7),a=Math.ceil((-1*_+1+this._getDaysInMonth(f))/7),this._addDays(f,_-1),d=this._zeroTime(new Date),h=this._calendarDate,r=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(r,o,l),r=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var v=0,b=!0,C=!0;v++<a;){for(c=jQuery(document.createElement("tr")),u=0;u<7;u++){var w=f.getMonth()==p,y=this._isSpecialDates(f),S=this._checkDisableRange(f),x=this._getIndex,T=e(document.createElement("td")).html(y?"<span></span>"+f.getDate():f.getDate()+"").attr({date:f.toDateString(),title:this.model.showTooltip?y&&this.model.specialDates[x][this._mapField._tooltip]?this.model.specialDates[x][this._mapField._tooltip]:this._formatter(f,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((w?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(f)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(w&&f.getTime()==d.getTime()?"today ":""));T.find("span:first-of-type").addClass(y?this.model.specialDates[x][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[x][this._mapField._icon]+" ":"e-special-day":""),T.addClass(y&&this.model.specialDates[x][this._mapField._custom]?this.model.specialDates[x][this._mapField._custom]:""),S&&this._disableDates({date:f,element:T}),h.getTime()==f.getTime()&&w&&(T.hasClass("e-hidedate")||(this.model.value?(T.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&c.addClass("e-selected-week"),"month"==this.model.highlightSection&&r.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&c.addClass("e-work-week")):T.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(T.hasClass("e-hidedate")||T.addClass("e-state-hover"),this._hoverDate=f.getDate()-1)),m=!0,(f<this.model.minDate||f>this.model.maxDate)&&(T.addClass("e-hidedate"),T.removeClass("current-month"),this.model.showOtherMonths&&T.removeClass("other-month"),m=C=!1),w&&(m&&b&&(this._tempMinDate=f,b=!1,C=!0),C&&(this._tempMaxDate=f)),this._trigger("beforeDateCreate",{date:f,value:this._formatter(f,this.model.dateFormat),element:T}),c.append(T),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0)}r.append(c)}o.append(r),this._DRPdisableFade?(e(r).css("display","block"),e(r).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?e(r).css("display","block"):e(r).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(o.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(o.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!t.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(){var e,s,n;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(e=this._checkInstanceType(this.model.blackoutDates[i]))&&(s=e.getFullYear(),n=e.getMonth(),t.isNullOrUndefined(this._disableCollection[s])&&(this._disableCollection[s]=[]),-1==jQuery.inArray(n,this._disableCollection[s])&&this._disableCollection[s].push(n))},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;(t={row:null,col:null}).col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=3,n=4;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,s,n,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,s,n,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,s,n,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,n=7,i=this._changeRowCol(t,e.keyCode,s,n,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(t,i,s,n,l,o){var r,a,d,h,c,u={parent:null,child:null};switch(l){case"day":r="tbody.e-datepicker-days tr td.current-month",u.parent=".e-datepicker-days",u.child=".current-month";break;case"month":r="tbody.e-datepicker-months tr td.e-current-month",u.parent=".e-datepicker-months",u.child=".e-current-month";break;case"year":r="tbody.e-datepicker-years tr td.e-current-year",u.parent=".e-datepicker-years",u.child=".e-current-year";break;case"yearall":r="tbody.e-datepicker-allyears tr td.e-current-allyear",u.parent=".e-datepicker-allyears",u.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(r+":first");switch(i){case 36:return this.sfCalendar.find(r+":first");case 35:return this.sfCalendar.find(r+":last");case 38:if(o&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":nth-child("+t.col+"):last");t.row-=1}if((a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"up")))return a;this._processNextPrevDate(!0),a=this.sfCalendar.find(r+":nth-child("+t.col+"):last")}return a;case 37:if(o)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":last");t={row:t.row-1,col:n}}if((a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"left")))return a;this._processNextPrevDate(!0),a=this.sfCalendar.find(r+":last")}return a;case 39:if(o)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<n)t.col+=1;else{if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":first");t={row:t.row+1,col:1}}if((a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"right")))return a;this._processNextPrevDate(!1),a=this.sfCalendar.find(r+":first")}return a;case 40:if(!o){if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":nth-child("+t.col+"):first");if(t.row+=1,(a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"down")))return a;this._processNextPrevDate(!1),a=this.sfCalendar.find(r+":nth-child("+t.col+"):first")}return a}case 13:d=e("table",this.sfCalendar).get(0).className,h=this._getCell(t,u),c=e(h)[0],"e-dp-viewmonths"==d&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(c.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewyears"==d&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==d&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(c.innerHTML))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewdays"==d?(this._backwardNavHandler(h),this._onSetCancelDateHandler({type:null,target:h})):this._backwardNavHandler(h)}return this._getCell(t,u)},_findVisible:function(e,t,s){var n=e.col,l=e.row,o=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+l+") td:nth-child("+n+")"),nextElement.length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?n++:n--:"down"==s?l++:l--,l<=0||l>this.sfCalendar.find("tbody"+t.parent+" tr").length||(n>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+l+") td").length&&(l++,n=1),n<=0&&(l--,n=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+l+") td").length),l<=0||l>this.sfCalendar.find("tbody"+t.parent+" tr").length))return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(o))return e.col=n,e.row=l,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){var s,n;if(this._isOpen)return!1;if(s=this,this._popupOpen=!0,n=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),s._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){s.model&&!s.model.displayInline&&e(document).on("mousedown",e.proxy(s._onDocumentClick,s))}),this._updateInputVal(),this._refreshLevel(n),this._trigger("open",{prevDate:n,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(i){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var s=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&i!=n&&"click"!=i.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){s._isOpen=!1,e(document).off("mousedown",e.proxy(s._onDocumentClick,s)),s._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(e(".e-next",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this._on(e(".e-prev",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))),this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this.model.showFooter&&this._on(e(".e-footer",this.sfCalendar),"click",this._setCurrDate),this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",e.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",e.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_onFocusOut:function(t){var i,s,n;this._isFocused=!1,i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),t),this.wrapper.removeClass("e-focus"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(i),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this.element.off("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),s=this.element.val(),n={prevDate:this._prevDate,value:s},this._specificFormat()?this._prevDate!=s&&this._setDateValue(s,!0):this._setDateValue(s),this.model.value||this._clearSelected(),this._trigger("focusOut",n),this._checkErrorClass()},_onFocusIn:function(t){this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(t),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){if(this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel){var t=this._stringToObject(this.element.val());(t=this._validateYearValue(t))&&(this._compareDate(e,t)||this._refreshPopup())}},_validateOnFocusOut:function(e,i){var s,n,l=null!=this._preValue?this._calendarDate:this._preValue,o=this._formatter(l,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=l:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),s=!1,n=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(this.isValidState=!1,n=!0,this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),n&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(o),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(e){if(13===e.keyCode){var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(t),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this._checkErrorClass()}},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(s=!1,this.isValidState=!1)}return s},_triggerChangeEvent:function(e){var t,i,s=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),i={prevDate:this._prevDate,value:s,isInteraction:!!e},t=this._specificFormat()&&e!=n&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=n&&"blur"==e.type?this.model.value:this._parseDate(s),t=this._validateYearValue(t),this._validateDate(t)||(t=null),this._compareDate(this._preValue,t)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(i.value=this.element.val(),this._trigger("_change",i)):(this._preValue=this.model.value=t,i.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",s),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),i.value=s,this._trigger("_change",i),i.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",i),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown&&this._trigger("dt_drilldown",e))},_onDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datewidget").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault(),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&(e(t.target).hasClass("e-disable")||e(t.target).hasClass("e-hidedate")))return!1;t&&t.type&&t.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(t),this._triggerChangeEvent(t),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t),t&&e(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DatePicker.Locale=t.DatePicker.Locale||{},t.DatePicker.Locale.default=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}),
/*!
*  filename: ej.datetimepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},enabled:!0,value:"",minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null},dataTypes:{cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",headerFormat:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(i){var s,n,l,o,r=!1;for(s in i)switch(s){case"cssClass":this._changeSkin(i[s]);break;case"locale":this._localize(i[s]);break;case"readOnly":this._readOnly(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enableRTL":this._setRtl(i[s]);break;case"enabled":this._enabled(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"value":i[s]=this._setValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),r=!0;break;case"enableStrictMode":this.model.enableStrictMode=i[s],r=!0;break;case"minDateTime":l=this._stringToObject(i[s]),n=this._getFormat(l,this.timePicker.model.timeFormat),this._isValidDate(l)?(this.datePicker.option("minDate",l),this.timePicker.option("minTime",n),i[s]=l,this.model.minDateTime=l):i[s]=this.model[s],r=!0;break;case"maxDateTime":l=this._stringToObject(i[s]),o=this._getFormat(i[s],this.timePicker.model.timeFormat),this._isValidDate(l)?(this.datePicker.option("maxDate",l),this.timePicker.option("maxTime",o),i[s]=l,this.model.maxDateTime=l):i[s]=this.model[s],r=!0;break;case"height":this.wrapper.height(i[s]);break;case"width":this.wrapper.width(i[s]);break;case"dateTimeFormat":this.model.dateTimeFormat=i[s],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options[s]=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(i[s]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",i[s]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",i[s]);break;case"timePopupWidth":this._updateTimeHeight(),this.timePicker.option("popupWidth",i[s]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",i[s]);break;case"startLevel":this.datePicker.option("startLevel",i[s]);break;case"depthLevel":this.datePicker.option("depthLevel",i[s]);break;case"startDay":this.datePicker.option("startDay",i[s]),this.model.startDay=this.datePicker.model.startDay,i[s]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",i[s]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",i[s]);break;case"headerFormat":this.datePicker.option("headerFormat",i[s]);break;case"htmlAttributes":this._addAttr(i[s]);break;case"popupPosition":this.model.popupPosition=i[s],this._setListPosition();break;case"timeDrillDown":t.isNullOrUndefined(i[s].enabled)||(this.model.timeDrillDown.enabled=i[s].enabled,this._changeDesign()),t.isNullOrUndefined(i[s].interval)||(this.model.timeDrillDown.interval=i[s].interval,this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),t.isNullOrUndefined(i[s].showMeridian)||(this.model.timeDrillDown.showMeridian=i[s].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),t.isNullOrUndefined(i[s].showFooter)||(this.model.timeDrillDown.showFooter=i[s].showFooter,this._changeDesign())}r&&this._validateMinMax(),this._valueChange(!0),"value"==s&&(i[s]=this.model.value),this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove(),t.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),t.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup.remove()},_init:function(e){if(!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=s,this._validateMeridian(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._changeDesign(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){if(this.model.timeDrillDown.enabled){var t=this.model.timeDrillDown.showFooter?"block":"none";this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),e(".e-footer",this._sfTimeHour).css("display",t),e(".e-footer",this._sfTimeMins).css("display",t)}else this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s._enabled(!1):"readOnly"==n&&"readOnly"==e?s._readOnly(!0):"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],n)?s.element.attr(n,e):s.wrapper.attr(n,e)})},_validateMeridian:function(){var e=t.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.timeDrillDown)||t.isNullOrUndefined(this._options.timeDrillDown.showMeridian))&&(this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){var i,s,n,l;this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this.model.value=""===this.model.value?this.element[0].value:this.model.value,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),(i=!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value)?null:this.model.value instanceof Date?this.model.value:(s=t.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale))||((s=this._checkJSONString(this.model.value))?s:null))&&(this.model.value=i),(n=this.model.minDateTime=this._stringToObject(this.model.minDateTime))&&this._isValidDate(n)||(this.model.minDateTime=this.defaults.minDateTime),(l=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime))&&this._isValidDate(l)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var t=new Date(e);if(isNaN(Date.parse(t))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(t.toJSON()===this.model.value||t.toGMTString()===this.model.value||t.toISOString()===this.model.value||t.toLocaleString()===this.model.value||t.toString()===this.model.value||t.toUTCString()===this.model.value)return t;if("string"==typeof e)return this._dateFromISO(e)}},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._renderDropdown(),this._checkProperties()},_renderWrapper:function(){if(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",value:this.model.value}),this.wrapper=t.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),!this._isSupport){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1;this.datetimeIcon=t.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=t.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderDropdown:function(){var i,s,n,l,o,r=e("#"+this.element[0].id+"_popup").get(0);r&&e(r).remove(),this.popup=t.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),t.isTouchDevice()||this.popup.addClass("e-ntouch"),e("body").append(this.popup),this._renderControls(),i=t.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=t.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=t.buildTag("div.e-timecontainer").append(i,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=t.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),s=t.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),n=t.buildTag("div.e-dt-button e-dt-today",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),l=t.buildTag("div.e-dt-button e-dt-now",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),o=t.buildTag("div.e-dt-button e-dt-done",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=t.buildTag("div.e-button-container").append(n,l,o).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(s,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(n,"click",this._todayClick),this._on(l,"click",this._nowClick),this._on(o,"click",this._doneClick)},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=t.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){var s,n,l,o,r,a,d;if(t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;o=6e4*this._interval,r=this.model.timeDrillDown.showMeridian?2:1,rowCount=this.model.timeDrillDown.showMeridian?6:4;var h=this.model.timeDrillDown.showMeridian?"hh":"HH:00",c=["AM","PM"],u=0,m="";for(s=this.timePicker._createObject("12:00:00 AM"),n=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM"),i=0;i<r;i++){for(this.model.timeDrillDown.showMeridian&&(m=c[i].toLowerCase(),a=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[c[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[c[i]][0],t.buildTag("div.e-header-"+m).attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-meridiantxt-"+m).text(a).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)),table=t.buildTag("table.e-dp-viewhours","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(table),tbody=t.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{}),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(n,s,!0);)l=this._localizeTime(s,h),d=t.buildTag("td.e-hour e-state-default",l),this.model.timeDrillDown.showMeridian&&d.addClass("e-hour-"+m),this._isIE8&&d.attr("unselectable","on"),tr.append(d),++u>=rowCount&&(u=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;table.append(tbody),this.model.timeDrillDown.showMeridian&&(s=this.timePicker._createObject("12:00:00 PM"),n=this.timePicker._createObject("11:59:59 PM"))}t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),e(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",e.proxy(this._hourNavHandler,this)),this._on(e(".e-next",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-prev",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-footer",this._sfTimeHour),"click",this._todayBtn),e(".e-hours-headertext",this._sfTimeHour).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(i,s){return e.trim(t.format(this.timePicker._createObject(i),s,this.model.locale))},_renderMinsPopup:function(){var i,s,n,l,o,r,a;if(this._sfTimeMins=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),t.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),i=t.buildTag("table.e-dp-viewmins","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeMins.append(i),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),this._intervall<1)return!1;for(o=6e4*this._interval,s=this.timePicker._createObject("12:00:00 AM"),n=this.timePicker._createObject("11:59:59 PM"),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),r=0;this.timePicker._compareTime(n,s,!0);)l=this._localizeTime(s,"HH:00"),a=t.buildTag("td.e-mins e-state-default",l),this._isIE8&&a.attr("unselectable","on"),tr.append(a),++r>=4&&(r=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;i.append(tbody),e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),e(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this.model.timeDrillDown.showMeridian||e(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(i.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this)),this._on(e(".e-next",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-prev",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-footer",this._sfTimeMins),"click",this._todayBtn),e(".e-minitues-headertext",this._sfTimeMins).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(i){var s,n;if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeHour).find("td").removeClass("e-active"),e(i.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),this.model.timeDrillDown.showMeridian?(n=e(i.target).hasClass("e-hour-am")?"AM":"PM",s=e(i.target).text()+":00 "+n):s=e(i.target).text(),this._generateMins(s);var l=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),o=e.trim(t.format(this.timePicker._createObject(l),"HH:mm",this.model.locale)),r=e.trim(t.format(this.timePicker._createObject(l),"HH:00",this.model.locale));index=(this.timePicker._parse(o)-this.timePicker._parse(r))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins)},_minsNavHandler:function(i){if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),e(i.target).addClass("e-active"),this.model.timeDrillDown.showMeridian?(value=e(i.target).text()+" "+t.format(this._datetimeValue,"tt","en-US"),value=this.timePicker._localizeTime(value)):value=e(i.target).text(),this.timePicker.option("value",value),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this.model.timeDrillDown.autoClose&&this._hideResult(i),this._updateInput()},_generateMins:function(i){var s,n,l,o,r,a,d,h=e("table",this._sfTimeMins);for(h.empty(),this.model.timeDrillDown.showMeridian?e(".e-mins-header",this._sfTimeMins).show():e(".e-mins-header",this._sfTimeMins).hide(),s=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm",e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),r=0,a=6e4*this.model.timeDrillDown.interval,n=this.timePicker._createObject(i),this._datetimeValue.setHours(n.getHours()),l=this.timePicker._createObject(n).getTime()+354e4,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr);this.timePicker._compareTime(l,n,!0);)r>=4&&(r=0,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr)),o=this._localizeTime(n,s),d=t.buildTag("td.e-mins e-state-default",o),this._isIE8&&d.attr("unselectable","on"),tr.append(d),r++,n=this.timePicker._createObject(n).getTime()+a;h.append(tbody),e(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(t.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(h.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeHour)},_prevNextMinsHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeMins)},_processNextPrev:function(i,s){if(i&&s.find(".e-arrow-sans-left").hasClass("e-disable")||!i&&s.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(e("table",s).get(0).className){case"e-dp-viewhours":incVal=i?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+incVal),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":incVal=i?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+incVal),this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var n=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),l=e.trim(t.format(this.timePicker._createObject(n),"HH:mm",this.model.locale)),o=e.trim(t.format(this.timePicker._createObject(n),"HH:00",this.model.locale));index=(this.timePicker._parse(l)-this.timePicker._parse(o))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(i,s){var n;if(this.model.readOnly||!this.model.enabled)return!1;switch(i&&i.preventDefault(),i?e(i.currentTarget).get(0).className:s.find(".e-text>span").get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),n=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.datePicker=e.data("ejDatePicker"),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e,i,s=t.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(s),s.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:this.model.timePopupWidth,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.timePicker=s.data("ejTimePicker"),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0,this.timePicker.popup.css({position:"static",display:"block"}),e=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,""==this.model.value&&(this.timePicker.option("minTime",this._getFormat(e,this.timePicker.model.timeFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)))},_updateTimeHeight:function(){var e=this.datePicker.popup.height()-this.popup.find(".e-header").height();e=this.popup.hasClass("e-dt-responsive")?"98px":e,this.timePicker.option("popupHeight",e)},_bindOperations:function(){var e=this;this.datePicker.option("layoutChange",function(){e._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){e.isValidState=!1}),this.timePicker.option("outOfRange",function(){e.isValidState=!1}),this.datePicker.option("change",function(t){e._refreshTimes(t)}),this.datePicker.option("select",function(t){e._updateInput(t)}),this.datePicker.option("dt_drilldown",function(t){e.model.timeDrillDown.enabled&&(e._updateInput(t),e._switchToDrilDown(t))}),this.timePicker.option("select",function(){e._updateInput()})},_switchToDrilDown:function(){var i,s;this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour),i=new Date(this.model.value.toString()),this._datetimeValue=new Date(i.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),s=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(s)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(s){var n,l,o,r="hour"==s?this._interval:this.model.timeDrillDown.interval,a="hour"==s?this._sfTimeHour:this._sfTimeMins,d="hour"==s?"e-hide-hour e-disable":"e-hide-mins e-disable";if(a.find("tbody tr td.e-"+s).removeClass(d),a.find(".e-arrow-sans-left").removeClass("e-disable"),a.find(".e-arrow-sans-right").removeClass("e-disable"),start="hour"==s?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00"),this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==s&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(n=e.trim(t.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*r),indx="hour"==s?Math.floor(indx):Math.ceil(indx),i=0;i<indx;i++)o=a.find("tbody tr td.e-"+s)[i],e(o).addClass(d);a.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==s&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(n=e.trim(t.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*r),indx=Math.floor(indx)+1,l=a.find("tbody tr td.e-"+s).length,i=indx;i<l;i++)o=a.find("tbody tr td.e-"+s)[i],e(o).addClass(d);a.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(t,i,s){var n,l,o=s.find("tbody tr td.e-"+t);return e(o).each(function(e,t){t.innerHTML!=i||(n=e)}),(l=o[n])||(l=o.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(l).hasClass("e-hide-"+t)||e(l).addClass("e-state-hover"),this._setActiveState(t,s),n},_setFocusByIndex:function(t,i,s){var n,l=s.find("tbody tr td.e-"+t);return(n=l[i])||(n=l.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(n).hasClass("e-hide-"+t)||e(n).addClass("e-state-hover"),this._setActiveState(t,s),i},_setActiveState:function(i,s){var n,l=s.find("tbody tr td.e-"+i),o=-1;switch(i){case"hour":this._compareDate(this.model.value,this._datetimeValue)&&(start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),a=e.trim(t.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale)),o=(this.timePicker._parse(a)-this.timePicker._parse(start))/(6e4*this._interval),o=Math.floor(o));break;case"mins":if(this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()){var r=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),a=e.trim(t.format(this.timePicker._createObject(r),"HH:mm",this.model.locale)),d=e.trim(t.format(this.timePicker._createObject(r),"HH:00",this.model.locale));o=(this.timePicker._parse(a)-this.timePicker._parse(d))/(6e4*this.model.timeDrillDown.interval),o=Math.ceil(o)}}(n=l[o])&&(s.find("table td").removeClass("e-active"),e(n).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=(new Date).setHours(0,0,0,0),i=this._getDate()||new Date,s=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),this._preVal=this._objectToString(this.model.value),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var t,i,s=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!s)return!1;this.isValidState=!0,this._compare(s,this._setEmptyTime(this.model.minDateTime))?(t=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("minTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("minTime",this._defaultMinVal()),this._compare(s,this._setEmptyTime(this.model.maxDateTime))?(i=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("maxTime",i),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("maxTime",this._defaultMaxVal()),this.timePicker._changeActiveEle()},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode()):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t,i,s,n,l,o,r,a,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",u="",m="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){u=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(m="Z"),s=(c+u+m).match(this._tokens),l=[],r=0;r<s.length;r++)a=s[r],o=this._checkLiteral(s[r]),d=this._numberRegex[o?s[r].toLowerCase():a.length]||new RegExp("^\\d{1,"+a.length+"}"),(n=e.match(d))&&(e.substr(0,e.indexOf(n))>=0&&!o&&(s[r].indexOf("M")>=0?l.push(parseInt(n[0])-1):l.push(parseInt(n[0]))),e=e.slice(e.indexOf(n[0])+n[0].length));return new Date(l[0],l[1],l[2],l[3],l[4],l[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_validateValue:function(e){var i=t.parseDate(e,this.model.dateTimeFormat);!i||i<this.model.minDateTime||i>this.model.maxDateTime?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e,t,i;if(e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,!e||!t||!i)return!1;t>i&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),e>i&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||e>i||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.element.attr("name")||this.element.attr({name:this.element[0].id}),this._checkStrictMode(),this._checkErrorClass(),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),t.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode||this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime,this.isValidState=!0):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime,this.isValidState=!0):(this.model.value="",this.element.val(""),this.isValidState=!0))},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value})},_targetBlur:function(){var e;this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult(),(e=t.parseDate(this.element.val(),this.model.dateTimeFormat))&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),null!=t.parseDate(this.element.val(),this.model.dateTimeFormat)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value})},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:if(!this.model.timeDrillDown.enabled){this._valueChange();break}}},_addFocus:function(t){t.hasClass("e-focus")||(this._removeFocus(),t.addClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).on("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).on("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).on("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).on("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).on("keydown",e.proxy(this._buttonClick,this)))},_removeFocus:function(){var t=this._getFocusedElement();t.length>0&&(t.removeClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).off("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).off("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).off("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).off("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).off("keydown",e.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();i.length>0?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeHour.find("tbody tr td.e-active").index()+1,-1!=t.row?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2)),this._sfTimeHour.find("table")[0].className,rowLength=this._sfTimeHour.find("tbody.e-timepicker-hours tr").length,colLength=this.model.timeDrillDown.showMeridian?6:4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(i)),e.ctrlKey||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_changeRowCol:function(t,i,s,n,l,o){var r,a,d,h,c={parent:null,child:null};switch(l){case"hours":r="tbody.e-timepicker-hours tr td.e-hour",c.parent=".e-timepicker-hours",c.child=".e-hour",hiddenClass=".e-hide-hour",a=this._sfTimeHour;break;case"mins":r="tbody.e-timepicker-mins tr td.e-mins",c.parent=".e-timepicker-mins",c.child=".e-mins",hiddenClass=".e-hide-mins",n=(a=this._sfTimeMins).find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length}if(t.row<=0&&t.col<=0)return a.find(r+":not(.e-disable):first");switch(i){case 36:return a.find(r+":not(.e-disable):first");case 35:return a.find(r+":not(.e-disable):last");case 38:if(o)this._forwardNavHandler(null,a);else{if(!(t.row>1))return this._processNextPrev(!0,a),a.find(r+":nth-child("+t.col+"):last");t.row-=1}if((d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"up",a)))return d;this._processNextPrev(!0,a),d=a.find(r+":nth-child("+t.col+"):last")}return d;case 37:if(o)return this._processNextPrev(!0,a),a.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrev(!0,a),a.find(r+":not(.e-disable):last");t={row:t.row-1,col:n},"mins"==l&&(t.col=n=a.find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length)}if((d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"left",a)))return d;this._processNextPrev(!0,a),d=a.find(r+":not(.e-disable):last")}return d;case 39:if(o)return this._processNextPrev(!1,a),a.find("tbody tr td.e-state-hover");if(t.col<n)t.col+=1;else{if(!(t.row<s))return this._processNextPrev(!1,a),a.find(r+":not(.e-disable):first");t={row:t.row+1,col:1}}if((d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"right",a)))return d;this._processNextPrev(!1,a),d=a.find(r+":not(.e-disable):first")}return d;case 40:if(!o){if(!(t.row<s))return this._processNextPrev(!1,a),a.find(r+":nth-child("+t.col+"):first");if(t.row+=1,(d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"down",a)))return d;this._processNextPrev(!1,a),d=a.find(r+":nth-child("+t.col+"):first")}return d}case 13:h=this._getCell(t,c,a),e(h)[0],args={type:null,target:h},"hours"==l&&this._hourNavHandler(args),"mins"==l&&this._minsNavHandler(args)}return this._getCell(t,c,a).not(hiddenClass)},_getCell:function(t,i,s){var n,l=t.row;return this.model.timeDrillDown.showMeridian&&t.row>2&&s.hasClass("e-time-hours")&&(l-=2),n=s.find("tbody"+i.parent+" tr:nth-child("+l+") td"+i.child+":nth-child("+t.col+")"),this.model.timeDrillDown.showMeridian&&n.length>0&&s.hasClass("e-time-hours")&&(n=t.row<=2?e(n[0]):e(n[1])),n},_findVisible:function(e,t,s,n){var l=e.col,o=e.row,r=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this._getCell({row:o,col:l},t,n),nextElement.length<=0)return null;if(nextElement.hasClass("e-disable")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?l++:l--:"down"==s?o++:o--,o<=0||o>n.find("tbody"+t.parent+" tr").length||(l>n.find("tbody"+t.parent+" tr:nth-child("+o+") td").length&&(o++,l=1),l<=0&&(o--,l=n.find("tbody"+t.parent+" tr:nth-child("+o+") td").length),o<=0||o>n.find("tbody"+t.parent+" tr").length))return null}else if(nextElement.hasClass(r))return e.col=l,e.row=o,nextElement=this._getCell(e,t,n)}},_keyDownOnMinutes:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1,this._sfTimeMins.find("table")[0].className,rowLength=this._sfTimeMins.find("tbody.e-timepicker-mins tr").length,colLength=4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(i)),e.ctrlKey||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e){var i,n;this._stopRefresh?this._stopRefresh=!1:""==(i=this.element.val())?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!0):(n=e!=s&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:t.parseDate(i,this.model.dateTimeFormat,this.model.locale))?(this.model.value=n,this.isValidState=!0,this._refreshPopup(),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1)},_refreshPopup:function(){if(this.isValidState&&this.isPopupOpen){var e=this._setEmptyTime(this.model.value),t=this._setEmptyDate(this.model.value),i=this._getDate(),s=this._getTime();i&&this._compare(i,e)||this.datePicker.option("value",e),s&&this._compare(s,t)||this.timePicker.option("value",t)}},_buttonClick:function(e){if(13==e.keyCode){e.preventDefault();var t=this._getFocusedElement();t.hasClass("e-dt-today")?this._todayClick():t.hasClass("e-dt-now")?this._nowClick():t.hasClass("e-dt-done")&&this._doneClick()}},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){var e;if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var i=this.model.minDateTime,s=this.model.maxDateTime,n=this.datePicker.model.value,l=new Date;n=t.isNullOrUndefined(n)?new Date:n,(e=new Date(n.getFullYear(),n.getMonth(),n.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()))<i?this.timePicker.option("value",this.timePicker._localizeTime(i)):e>s&&this.timePicker.option("value",this.timePicker._localizeTime(s)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||t.isTouchDevice()||this.element.focus(),this._showhidePopup(),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var t,i,s,n,l=this.timePicker.ul.find("li");l.hasClass("e-hover")||(i=t=this.timePicker._setEmptyDate(new Date),this.timePicker.minTime&&!this._compareTime(this._createObject(t),this.timePicker.minTime,!0)&&(i=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(t),!0)&&(i=this.timePicker.maxTime),s=l.first().html(),n=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this.timePicker.model.interval),n=Math.round(n),activeItem=n==l.length?n:n+1,(activeItem<0||activeItem>l.length||isNaN(activeItem))&&(activeItem=1),e(this.timePicker.ul.find("li")[activeItem-1]).addClass("e-hover"),this._calcScrollTop())},_calcScrollTop:function(){this.timePicker.ul.outerHeight();var e,t=this.timePicker.ul.find("li").outerHeight();e=t*this.timePicker.ul.find("li.e-hover").index()-(this.timePicker.popupList.outerHeight()-t)/2,this.timePicker.scrollerObj.setModel({scrollTop:e})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.isPopupOpen||!this.model.enabled||this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this._setListPosition(),this._checkForResponsive();var i=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){i._on(e(document),"mousedown",i._OnDocumentClick),i.model.timeDrillDown.enabled&&i._addFocus(i._dateContainer.find(".e-datepicker")),i.timePicker.model.value||i._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(e(window),"resize",this._OnWindowResize),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(i){var s=this;if(!this.isPopupOpen||this._trigger("beforeClose",{element:this.popup}))return!1;this.isPopupOpen=!1,this._removeFocus(),this._popClose&&i&&"click"!=i.type?this.isPopupOpen=!0:(this.popup.slideUp(this.model.enableAnimation?100:0,function(){s.model&&(s.model.timeDrillDown.enabled&&(s._sfTimeHour.hide(),s._sfTimeMins.hide(),s._dateContainer.show()),t.isNullOrUndefined(s.model.value)||(s._datetimeValue=new Date(s.model.value.toString())))}),this._raiseEvent("close"),this._off(e(document),"mousedown",this._OnDocumentClick),this._off(e(window),"resize",this._OnWindowResize),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_setListPosition:function(){var i,s,n=this.wrapper,l=this._getOffset(n),o=e(document).scrollTop()+e(window).height()-(l.top+e(n).outerHeight()),r=l.top-e(document).scrollTop(),a=this.popup.outerHeight(),d=this.popup.outerWidth(),h=l.left,c=n.outerHeight(),u=(c-n.height())/2,m=this._getZindexPartial();this.model.popupPosition,s=this.model.popupPosition==t.PopupPosition.Bottom?(a<o||a>r?l.top+c+3:l.top-a-3)-u:(a>r?l.top+c+3:l.top-a-3)-u,i=e(document).scrollLeft()+e(window).width()-h,(this.model.enableRTL||d>i&&d<h+n.outerWidth())&&(h-=this.popup.outerWidth()-n.outerWidth()),this.popup.css({left:h+"px",top:s+"px","z-index":m})},_getOffset:function(e){return t.util.getOffset(e)},_OnDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datetime-wrap").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup))&&(t.preventDefault(),e(t.target).parents(".e-datepicker").length>0?this._addFocus(e(t.target).parents(".e-datepicker")):e(t.target).parents(".e-timecontainer").length>0?this._addFocus(e(t.target).parents(".e-timecontainer")):e(t.target).hasClass("e-dt-button")?this._addFocus(e(t.target)):e(t.target).parents(".e-time-hours").length>0?this._addFocus(e(t.target).parents(".e-time-hours")):e(t.target).parents(".e-time-minitues").length>0?this._addFocus(e(t.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(i){var s;+t.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat)==+t.parseDate(this.element.val(),this.model.dateTimeFormat)?this._prevDateTimeVal!=this.element.val()&&(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState},this._prevDateTimeVal=this.element.val(),this._trigger("_change",s)):(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!i,isValidState:this.isValidState},this._trigger("_change",s),s.value=""==e.trim(this.element.val())?null:this.element.val(),this._trigger("change",s),this._prevDateTimeVal=this.element.val())},_raiseEvent:function(e){return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:this._preVal,value:this.element.val()})},_getDateTimeFormat:function(){var e=t.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){var t=new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,i){if(e instanceof Date){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)}return e},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},_getDateObj:function(e,i){var s,n;if("string"!=typeof e)return e;if(s=this._checkFormat(i),null!=(n=t.parseDate(e,s,this.model.locale)))return n;if(""==e||null==e)return null;var l,o=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/.exec(e),r=new Date;return o&&(r=new Date,l=+o[2],r.setUTCFullYear(o[1],l-1,o[3]),r.setUTCHours(o[4],o[5],o[6]),l!=r.getUTCMonth()+1&&r.setTime()),this._isValidDate(r)?r:void 0},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.datePicker.option(e,t),this.timePicker.option(e,t)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(s){var n,l;if(this.model.locale=s,this.model.dateTimeFormat=this.model.timeDisplayFormat="",n=["AM","PM"],this._getDateTimeFormat(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",s),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(i=0;i<2;i++)l=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[n[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[n[i]][0],e("span.e-hours-meridiantxt-"+n[i].toLowerCase(),this._sfTimeHour).text(l)},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){this.model.readOnly=e,e?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup.removeClass("e-corner")),this.datePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){this.model.showPopupButton=e,e?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){if(e(window).outerWidth()>200&&e(window).outerWidth()<=500)this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle());else if(this.popup.hasClass("e-dt-responsive")){this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth);var t=this.datePicker.popup.height()-this.popup.find(".e-header").height();this.timePicker.option("popupHeight",t),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()}},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this._hideResult(),this._change("enabled",!1),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput),this.popup.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DateTimePicker.Locale=t.DateTimePicker.Locale||{},t.DateTimePicker.Locale.default=t.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},t.PopupPosition={Bottom:"bottom",Top:"top"}}),
/*!
*  filename: ej.editor.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(e){var i=!1;for(var s in e)switch(s){case"value":t.isNullOrUndefined(e.minValue)&&t.isNullOrUndefined(e.maxValue)?(this._setValue(e[s],!0),e[s]=this.model.value):(this.model.value=this._checkNumValue(e[s]),this._localizedFormat(),this._raiseChangeEvent(!0),i=!0);break;case"enableRTL":this._enableRTL(e[s]);break;case"width":this._setWidth(e[s]);break;case"height":this._setHeight(e[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(e[s]))return;this.model.minValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"maxValue":if(isNaN(e[s]))return;this.model.maxValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"incrementStep":if(isNaN(e[s]))return;this.model.incrementStep=parseFloat(e[s].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=e[s];break;case"showSpinButton":this._showSpin(e[s]);break;case"showRoundedCorner":this._roundedCorner(e[s]);break;case"locale":this.model.decimalPlaces=t.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals||-1===this._options.decimalPlaces?-1:this.model.decimalPlaces,this._setLocalize(e[s]),this._options.decimalPlaces=this.model.decimalPlaces,e[s]=this.model.locale;break;case"decimalPlaces":this._setDecimal(e[s]),t.isNullOrUndefined(this._options)&&(this._options={}),this._options.decimalPlaces=e[s];break;case"cssClass":this._setSkin(e[s]);break;case"readOnly":this._setReadOnly(e[s]);break;case"enabled":e[s]?this.enable():this.disable();break;case"watermarkText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.watermarkText=this.model.watermarkText=e[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._changeWatermark(e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"groupSeparator":this._checkSeparator(e[s]),e[s]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":this.model[s]=e[s],this._options[s]=e[s],this._initCustomValue(),e[s]=this.model[s],this._setValue(this.model.value,!0)}i&&(this._validateMinMaxValue(!0,!0),e.value=this.model.value,e.maxValue=this.model.maxValue,e.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this.element.attr({"aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value})),this._checkSeparator(this.model.groupSeparator),this.element.val(this._removeSeparator(this.model.value)),this._updateSeparator(),this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove()),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.val("").removeClass("e-input e-disable").empty(),this.element.removeAttr("disabled aria-disabled aria-valuemin aria-valuemax aria-valuenow aria-live"),this._cloneElement.attr("role")||this.element.removeAttr("role"),this.element.css("display","block")},_init:function(e){if(this._cloneElement=this.element.clone(),this._options=t.isNullOrUndefined(e)?{}:e,!this.element.is("input")||!this.element.is("input[type=text]")&&this.element.attr("type"))return this._destroy(),!1;this._isWatermark="placeholder"in document.createElement("input"),this.model.locale="en"==t.preferredCulture(this.model.locale).name?"en-US":t.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._updateSeparator(),e&&e.value!=i&&this._trigger("_change",{value:this.model.value})},_checkAttribute:function(){for(var e,i,s=["min","max","step","readonly","disabled","placeholder"],n=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],l=0;l<s.length;l++)e=this.element.attr(s[l]),i=n[l],t.isNullOrUndefined(e)||t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options[i])||("watermarkText"==i?this._options[i]=e:this.model[i]="disabled"!=i&&"readOnly"!=i?t.parseFloat(e,this.model.locale):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"accesskey"==n?s._hiddenInput.attr(i,e):"disabled"==n&&"disabled"==e?s.disable():"readonly"==n&&"readOnly"==e?s._setReadOnly(!0):"tabindex"==n?(s._hiddenInput.attr(i,e),s.element.attr(i,e)):"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_setValues:function(){this._id=this.element[0].id,this._textBox=this._hiddenInput[0],this._error=!1,this._timeout=null,this.isValidState=!0,this._allowkeyboard=!0,this._validateOnType=!1,this._focused=!1,this._startValue=0,"ej.CurrencyTextbox"===this.sfType&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0),(t.isNullOrUndefined(this.model.decimalPlaces)||this.model.decimalPlaces<0)&&(this.model.decimalPlaces="ej.CurrencyTextbox"===this.sfType?t.preferredCulture(this.model.locale).numberFormat.currency.decimals:t.preferredCulture(this.model.locale).numberFormat.decimals),this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces)),this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._localizedFormat(),this._validateMinMaxValue(!0),this._updateSymbol(this.model.locale),value=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l,o=this.model.validationRules;for(s in this.element.rules("add",o),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},o)if(n=null,!t.isNullOrUndefined(o[s])){if(t.isNullOrUndefined(o.messages&&o.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=o.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_renderControl:function(){this.wrapper=t.buildTag("span.e-widget e-pinch"),this.innerWrap=t.buildTag("span.e-in-wrap e-box "),this.wrapper.attr("style",this.element.attr("style")),"ej.NumericTextbox"===this.sfType?this.wrapper.addClass("e-numeric"):"ej.PercentageTextbox"===this.sfType?this.wrapper.addClass("e-percent"):"ej.CurrencyTextbox"===this.sfType&&this.wrapper.addClass("e-currency"),this.wrapper.append(this.innerWrap).insertAfter(this.element),this.innerWrap.append(this.element),this._hiddenInput=t.buildTag("input","",{},{type:"text"}).insertBefore(this.element),this._hiddenInput.attr("data-role","none"),this._hiddenInput[0].tabIndex=this.element[0].tabIndex,this._hiddenInput.attr("accesskey",this.element[0].accessKey),this.element[0].accessKey="",this._hiddenInput.css("display","block"),this.element.css("display","none"),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel)),this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null==this.element.attr("name")&&this.element.attr("name",this.model.name),this.element.addClass("e-input"),this.model.value=t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value?this._checkNumValue(this.element[0].value):this._checkNumValue(this.model.value),this._hiddenInput.attr({value:this.model.value}).addClass("e-input"),this.element.attr({role:"spinbutton","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value,"aria-live":"assertive",value:this.model.value});var i=e('<span class="e-select"><span class="e-spin e-spin-up " role="button" "aria-label"="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" "aria-label"="Decrease Value" unselectable="on" /></span>');i.find(".e-spin-up").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"})),i.find(".e-spin-down").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"})),this.innerWrap.append(i),this.spin=this.wrapper.find(".e-select"),this.spinUp=this.wrapper.find(".e-spin-up"),this.spinDown=this.wrapper.find(".e-spin-down"),this._setWidth(this.model.width),this._setHeight(this.model.height),""!=this.model.cssClass&&this._setSkin(this.model.cssClass),this._showSpin(this.model.showSpinButton),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._enableRTL(this.model.enableRTL),this.model.readOnly&&this._setReadOnly(this.model.readOnly),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value,null===this.model.value?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1),this._checkErrorClass(),this._setWaterMark()},_showSpin:function(e){e?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(e){e&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(e){e?this.spin?this.wrapper.addClass("e-rtl"):this.element.addClass("e-rtl"):this.spin?this.wrapper.removeClass("e-rtl"):this.element.removeClass("e-rtl")},_setWidth:function(e){""!=e?this.wrapper.width(e):this.model.width=this.wrapper.outerWidth()},_setHeight:function(e){""!=e?this.wrapper.height(e):this.model.height=this.wrapper.outerHeight()},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setValue:function(e,t){this._isWatermark||this._hiddenSpan.css("display","none"),this.model.value=this._checkNumValue(e),this._validateMinMaxValue(!1),this._checkErrorClass(),this._localizedFormat(),this._raiseChangeEvent(t),this._setWaterMark()},_setLocalize:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];this.model.locale="en"==t.preferredCulture(e).name?"en-US":t.preferredCulture(e).name,this.model.groupSeparator=t.isNullOrUndefined(this._options.groupSeparator)&&i===this.model.groupSeparator?t.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._updateSymbol(this.model.locale),this._localizedFormat(),this._changeWatermark(this.model.watermarkText),value=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(e){this._percentSymbol=t.preferredCulture(e).numberFormat.percent.symbol,this._currencySymbol=t.preferredCulture(e).numberFormat.currency.symbol},_setDecimal:function(e){this.model.decimalPlaces=e,this._localizedFormat()},_validateMinMaxValue:function(e,i){var s,n=!1;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue),!t.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,n=!0):!t.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,n=!0):this.isValidState=!0,this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue),n&&e&&(s=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(s),s=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(s),this._localizedFormat(),this._raiseChangeEvent(i))},_convertToExponetial:function(e){var i,s,n,l="",o=e<0;for(e=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat,e=e.replace(".",s["."]),unformattedValue=e,null,"ej.NumericTextbox"===this.sfType?(i=o?s.pattern[0]:"n",e=o?e.replace("-",""):e,symbol=""):"ej.PercentageTextbox"===this.sfType?(i=o?s.percent.pattern[0]:s.percent.pattern[1],e=o?e.replace("-",""):e,symbol=s.percent.symbol):"ej.CurrencyTextbox"===this.sfType&&(i=o?s.currency.pattern[0]:s.currency.pattern[1],e=o?e.replace("-",""):e,symbol=s.currency.symbol),idx=0,n=i.length;idx<n;idx++)ch=i.charAt(idx),l+="n"===ch?e:"$"===ch||"%"===ch?symbol:ch;return{formattedValue:l,unformattedValue:unformattedValue}},_localizedFormat:function(){if(this.culture=t.preferredCulture(this.model.locale),t.isNullOrUndefined(this.model.value))this._textBox.value="";else if(-1==this.model.value.toString().indexOf("e"))this._textBox.value=this._removeSeparator(this.model.value),this._focused||""==this._textBox.value||(this._textBox.value=this._formatValue(this.model.value,"n",!0),"ej.PercentageTextbox"===this.sfType?this._appendPercentSymbol(this._textBox.value):"ej.CurrencyTextbox"===this.sfType&&this._appendCurrencySymbol(this._textBox.value));else{var e=this._convertToExponetial(this.model.value);this._textBox.value=e.unformattedValue,this._focused||""==this._textBox.value||(this._textBox.value=e.formattedValue)}},_checkNumValue:function(e){return"string"==typeof e&&(e=this._changeSeparator?this._replaceSeparator(e,this.model.groupSeparator,t.preferredCulture(this.model.locale).numberFormat[","]):e),"string"!=typeof e||isNaN(this._parseValue(e))?"number"!=typeof e||isNaN(e)?null:e:(e=this._parseValue(e),parseFloat(e))},_setReadOnly:function(e){this.model.readOnly=e,e?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){null!=this._localizedLabels.watermarkText&&""===this._textBox.value&&""===e.trim(this._hiddenInput.val())&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",e),this.element.attr("placeholder",e)):this._hiddenSpan.text(e)},_setSelectionRange:function(e,t){function i(i){i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}var s,n=this._textBox;try{n.setSelectionRange?n.setSelectionRange(e,t):n.createTextRange&&i(n.createTextRange())}catch(e){s=this,window.setTimeout(function(){document.body.focus(),s._textBox.select(),i(document.selection.createRange())},1)}},_getSelection:function(e){var t=null;return document.selection?""===(t=document.selection.createRange()).text?t.text:this._removeFormats(t.text):null==e?this.model.value:this._removeFormats(e.substring(this._textBox.selectionStart,this._textBox.selectionEnd))},_caretPosition:function(){var e,t=this._textBox,i=0;return document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),i=e.text.length):(t.selectionStart||"0"==t.selectionStart)&&(i=t.selectionEnd),i},_appendPercentSymbol:function(e){this._percentSymbol&&(e=e.replace(this._percentSymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e)/100,"p",!0)),this._percentSymbol=t.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(e){this._currencySymbol&&(e=e.replace(this._currencySymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e),"c",!0)),this._currencySymbol=t.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];return null!=e?"."==i?e.toString().replace(/["."]/g,""):e.toString().match(new RegExp(i,"g"))?e.toString().replace(new RegExp(i,"g"),""):e:null},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0,this.element[0].disabled=!1,this.element.prop("disabled",!1),this._hiddenInput.prop("disabled",!1),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable"),this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1,this.element[0].disabled=!0,this.element.attr("disabled","disabled"),this._hiddenInput.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable"),this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){this._on(this._hiddenInput,"focus",this._focusIn),this._on(this.element,"blur",this._focusOut),this._on(this.element,"keydown",this._keyDown),this._on(this.element,"keypress",this._keyPress),this._on(this.element,"mousewheel",this._mouseWheel),this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(e){this[e](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick),this[e](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var e=!1,i=t.browserInfo();return"msie"==i.name&&"8.0"==i.version&&(e=!0),e},_spinUpClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active"),i=this,"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("increment")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_spinDownClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("decrement")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_mouseUpClick:function(e){e.stopPropagation(),clearTimeout(this._timeout),this._off(this.spinUp,"mouseleave",this._mouseUpClick),this._off(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.removeClass("e-active"),this.spinUp.removeClass("e-active")},_mouseWheel:function(e){if(e.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly){var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._updateInputField("increment"):t<0&&this._updateInputField("decrement"),this._cancelEvent(e)}},_numberValue:function(){var e=this._textBox.value;return"ej.NumericTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),("ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType)&&(e=this._formatValue(this.model.value,"n",!0)),"string"!=typeof e||isNaN(this._parseValue(e))?"":e},_formatValue:function(e,i,s){s&&this._updateCultureInfo();e=t.format(e,i+this.model.decimalPlaces,this.model.locale);return s&&this._restCultureInfo(),e},_parseValue:function(e){this._updateCultureInfo();e=t.parseFloat(e,this.model.locale);return this._restCultureInfo(),e},_initCustomValue:function(){var e,i="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";switch(i){case"percent":case"currency":e=this.culture.numberFormat[i],t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=e.pattern[1]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0]);break;case"numeric":e=this.culture.numberFormat,t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0])}},_updateCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t],this._oldNegativePattern=e.pattern[0],this._oldGroupSize=e.groupSizes[0],e.pattern[0]=this.model.negativePattern,e.groupSizes[0]=this.model.groupSize,"numeric"!=t&&(this._oldPositivePattern=e.pattern[1],e.pattern[1]=this.model.positivePattern)},_restCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";(e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t]).pattern[0]=this._oldNegativePattern,e.groupSizes[0]=this._oldGroupSize,"numeric"!=t&&(e.pattern[1]=this._oldPositivePattern)},_toggleTextbox:function(e){this._hiddenInput.toggle(e),this.element.toggle(!e)},_focusIn:function(){if(!this.model.readOnly){if(this._focused=!0,t.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),!this._error){if(""!=this._textBox.value){var e=this._formatValue(this._textBox.value,"n",!0);this._textBox.value=e,this._hiddenInput.val(e)}this._setSelectionRange(0,this._textBox.value.length)}this._trigger("focusIn",{value:this.model.value})}},_focusOut:function(){var e;this._focused=!1,this.wrapper.removeClass("e-focus"),this._error||(""!=this._textBox.value?((e=t.parseFloat(this._textBox.value,this.model.locale))<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!0):e>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!0)),this.model.value=t.parseFloat(this._textBox.value,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()):(e=""==this._textBox.value?null:this._textBox.value,this.model.value=e,this._hiddenInput.val(e),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]),null===this.model.value||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),e=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(e),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value})),this._checkErrorClass()},_cancelEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault(),!1},_updateInputField:function(i){var s,n,l;this.isValidState=!0,this._focused||e(this._hiddenInput[0]).focus(),s=this.model.incrementStep,this.model.value,""===this._textBox.value?(this._textBox.value=this._formatValue(this._startValue,"n",!0),s=0):this._textBox.value.indexOf(" ")>=0&&(this._textBox.value=this._textBox.value.replace(" ","")),"ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType?(l=n=this._textBox.value,n.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)>-1&&(l=n.substring(0,n.length-1)),this.model.value=this._parseValue(l)):"ej.NumericTextbox"==this.sfType&&(this.model.value=t.parseFloat(this._textBox.value,this.model.locale)),isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue),this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&((l="increment"==i?this.model.value+s:this.model.value-s)>=this.model.minValue&&l<=this.model.maxValue&&this._setValue(l)),this._checkErrorClass()},_validateDecimal:function(e){var i=String.fromCharCode(e.keyCode);return i=188==e.keyCode?",":190==e.keyCode?".":110==e.keyCode?t.preferredCulture(this.model.locale).numberFormat["."]:i,t.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==i.charCodeAt(0)},_allowKeyCodes:function(e){for(var t=[38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67],i=0;i<t.length;i++)if(e.keyCode==t[i]||this._validateDecimal(e)&&0!=this.model.decimalPlaces)return!0;return!1},_raiseChangeEvent:function(e){var i,s=this.model.value;this._checkNumValue(this._preVal)!==this._checkNumValue(s)&&(this._preVal=s,this.model.value=this._checkNumValue(this._formatValue(this._preVal,"n",!1)),this._updateHiddenField(),i=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(i),this.element.attr("aria-valuenow",i),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!e}),this._trigger("change",{value:this.model.value,isInteraction:!e}))},_updateHiddenField:function(){var e=this._textBox;this._textBox=this._hiddenInput[0],this._localizedFormat(),this._textBox=e},_removeSeparator:function(e){var i,s;if(!t.isNullOrUndefined(e))return i=(e=this._checkNumValue(this._formatValue(e,"n",!1))).toString(),s=t.preferredCulture(this.model.locale).numberFormat,i.replace(".",s["."])},_updateSeparator:function(){var e;this._changeSeparator&&this.model.value&&("ej.NumericTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value/100,"p",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"c",!0)),this._hiddenInput.val(this._replaceSeparator(e,t.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator)))},_replaceSeparator:function(e,i,s){var n,l,o=""===i?new RegExp("\\s","g"):new RegExp("\\"+i,"g");return this.model.groupSeparator==t.preferredCulture(this.model.locale).numberFormat["."]?(n=this.model.decimalPlaces,l=e.length-n-1,e.substring(0,l).replace(o,s)+e.substring(l,e.length)):e.replace(o,s)},_checkSeparator:function(e){this.model.groupSeparator=null!=e?this._validateSeparator(e):t.preferredCulture(this.model.locale).numberFormat[","],this._changeSeparator=t.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator,this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(e){var i=e.toString(),s=new RegExp("[a-zA-Z0-9]");return i=i.length>1?i[0]:i,s.test(i)?null!=this._prevSeparator?this._prevSeparator:t.preferredCulture(this.model.locale).numberFormat[","]:i},_keyPress:function(e){var i,s;if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&8!==e.keyCode&&13!==e.keyCode){return cursor=this._caretPosition(),beforeCursor=this._textBox.value.toString().substring(0,cursor),afterCursor=this._textBox.value.toString().substring(cursor),numberFormat=t.preferredCulture(this.model.locale).numberFormat,i=String.fromCharCode(e.which),value=beforeCursor+i+afterCursor,s="."===(s=numberFormat["."])?"\\"+s:s,!!(0===this.model.decimalPlaces?/^(-)?(\d*)$/:new RegExp("^(-)?(((\\d+("+s+"\\d*)?)|("+s+"\\d*)))?$")).test(value)&&void 0}},_validateDecimalOnType:function(e){var i,s,n,l,o,r;return i=this._caretPosition(),this._textBox.value.toString().substring(0,i),this._textBox.value.toString().substring(i),n=this._getSelection(this._textBox.value),o=t.preferredCulture(this.model.locale).numberFormat["."],l=t.isNullOrUndefined(this.model.value)?"":this.model.value.toString(),0!=this.model.decimalPlaces?(r=this._textBox.value.split(o)[1],s=l.indexOf(o)>0&&l.substring(l.indexOf(o)+1,l.length).length>this.model.decimalPlaces||!!(0==n.length&&i>this._textBox.value.indexOf(o)&&r&&r.length>=this.model.decimalPlaces)):s=!1,s?(this._keypressFlag=!1,this._cancelEvent(e),!1):void 0},_keyDown:function(s){var n,l,o,r,a,d,h,c;if(!this.model.readOnly)if(this._CurrentCultureInfo=JSON.parse(JSON.stringify(t.preferredCulture())),s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||this._allowKeyCodes(s)){if(s.shiftKey&&(35==s.keyCode||36==s.keyCode||37==s.keyCode||39==s.keyCode||46==s.keyCode||127==s.keyCode)||s.ctrlKey&&(86==s.keyCode||118==s.keyCode||67==s.keyCode||88==s.keyCode))return!0;if(1==s.ctrlKey&&9!=s.keyCode&&17!=s.keyCode&&86!=s.keyCode&&67!=s.keyCode||67==s.keyCode||86==s.keyCode||88==s.keyCode)return this._keypressFlag=!1,this._cancelEvent(s),!1;if((s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||110==s.keyCode)&&(n=this._caretPosition(),this._textBox.value.toString().substring(0,n),this._textBox.value.toString().substring(n),o=this._getSelection(this._textBox.value),s.keyCode>=96&&s.keyCode<=105&&(s.keyCode-=48),this.model.validateOnType&&this._validateDecimalOnType(s),this._validateOnType)){var u=t.preferredCulture(this.model.locale).numberFormat["."],m=this.model.value.toString(),p=m.indexOf(u),g=this.model.value,f=this.model.minValue.toFixed(this.model.decimalPlaces),_=this.model.maxValue.toFixed(this.model.decimalPlaces),v=!1;if((f.toString().indexOf("e")>0||_.toString().indexOf("e")>0)&&(v=!0),v)0!=this.model.decimalPlaces?(r=this._textBox.value.split(".")[1],l=(m.indexOf(u)>0||Number(m)<Number(f)||Number(m)>Number(_))&&m.substring(m.indexOf(u)+1,m.length).length>this.model.decimalPlaces||!!(0==o.length&&n>this._textBox.value.indexOf(u)&&r&&r.length>=this.model.decimalPlaces)):l=!1;else if("."!=u&&(m=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(f=this.model.minValue.toString().replace(/["."]/g,u)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(_=this.model.maxValue.toString().replace(/["."]/g,u))),d=f.toString().indexOf(u)>0?Number(f.toString().substring(0,f.toString().indexOf(u))):this.model.minValue,h=_.toString().indexOf(u)>0?Number(_.toString().toString().substring(0,_.toString().indexOf(u))):this.model.maxValue,p>0){g=Number(m.substring(m.indexOf(u)+1,m.toString().length)),d=f.toString().indexOf(u)>0?Number(f.toString().substring(f.toString().indexOf(u)+1,f.toString().length)):0,h=_.toString().indexOf(u)>0?Number(_.toString().substring(_.toString().indexOf(u)+1,_.toString().length)):0;var b=Number(m.substring(0,m.indexOf(u))),C=Number(f.toString().substring(0,f.toString().indexOf(u))),w=Number(_.toString().substring(0,_.toString().indexOf(u)));l=!this._validateValue(g,d,h,!0,b,C,w)}else l=!this._validateValue(g,d,h,!1);if(l)return this._keypressFlag=!1,this._cancelEvent(s),!1}if(38==s.keyCode&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(s)),40==s.keyCode&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(s)),8==s.keyCode&&(n=this._caretPosition(),this._textBox.value.substring(0,n),this._textBox.value.substring(n),o=this._getSelection(this._textBox.value)),(46==s.keyCode||127==s.keyCode)&&(n=this._caretPosition(),this._textBox.value.substring(0,n),this._textBox.value.substring(n),o=this._getSelection(this._textBox.value)),this._validateDecimal(s)&&0!=this.model.decimalPlaces&&46!=s.keyCode){if(a=t.preferredCulture(this.model.locale).numberFormat["."],(c=this._textBox.value.split(a))[1]==i){var y=this._caretPosition(),S=c[0].substring(0,y),x=c[0].substring(y);if((this.model.minValue.toString().indexOf("e")>0||this.model.maxValue.toString().indexOf("e")>0)&&(v=!0),x.length>this.model.decimalPlaces&&1==this.model.validateOnType)return this._keypressFlag=!1,this._cancelEvent(s),!1;if(this._validateOnType&&!v){if(this.model.minValue.toString().match(new RegExp(".","g"))&&(d=this.model.minValue.toString().replace(/["."]/g,a)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(h=this.model.maxValue.toString().replace(/["."]/g,a)),d=d.indexOf(a)>0?Number(d.substring(0,d.indexOf(a))):Number(d),h=h.indexOf(a)>0?Number(h.substring(0,h.indexOf(a))):Number(h),!this._validateValue(this.model.value,d,h,"DecimalKeyPressed"))return this._keypressFlag=!1,this._cancelEvent(s),!1;this._textBox.value=S+a+x}else this._textBox.value=S+a+x;this._setSelectionRange(y+1,y+1)}this._cancelEvent(s)}else(190==s.keyCode||110==s.keyCode)&&this._cancelEvent(s);(109==s.keyCode||189==s.keyCode||173==s.keyCode)&&(0!=this._caretPosition()&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||this.model.minValue>=0&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&""===this._getSelection(this._textBox.value)?this._cancelEvent(s):this._getSelection()==this.model.value&&(this.model.value=null)),13==s.keyCode&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(27!=s.keyCode&&!s.ctrlKey||s.ctrlKey&&90==s.keyCode&&""===e.trim(this._textBox.value))&&(this._keypressFlag=!1,this._cancelEvent(s))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.NumericTextbox.Locale=t.NumericTextbox.Locale||{},t.NumericTextbox.Locale.default=t.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.PercentageTextbox.Locale=t.PercentageTextbox.Locale||{},t.PercentageTextbox.Locale.default=t.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.CurrencyTextbox.Locale=t.CurrencyTextbox.Locale||{},t.CurrencyTextbox.Locale.default=t.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.toolbar.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.tooltip.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,disabledItemIndices:[],enabledItemIndices:[],enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,query:null,fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group"},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5}},isBalloon:!1},cssClass:"",targetID:null,create:null,click:null,itemHover:null,itemLeave:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",disabledItemIndices:"data",enabledItemIndices:"data",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data",targetID:"string"},hide:function(){if(!this.model.enabled&&"none"==this.element.css("display"))return!1;this.element.css("display","none"),this.model.hide=!0},show:function(){if(!this.model.enabled&&"none"!=this.element.css("display"))return!1;this.element.css("display","block"),this.model.hide=!1},_init:function(){null!=this.model.targetID&&this.element.html(e("#"+this.model.targetID).find("ul,ol")),this._cloneElement=e(this.element).clone(),this._localDataSource=null,null!=this.model.dataSource&&this._generateTemplate(),this.model.dataSource instanceof t.DataManager||this._initialize(),this._renderTooltip(this.model.tooltipSettings)},_setModel:function(t){for(var i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this.model.width=t[i],this._setWidth(),this._bindUnbindWidth();break;case"enabled":this._controlStatus(t[i]);break;case"disabledItemIndices":this._disableItemByIndex(t[i]),t[i]=this.model.disabledItemIndices;break;case"enabledItemIndices":this._enableItemByIndex(t[i]);break;case"isResponsive":this.model.isResponsive=t[i],this.model.isResponsive?(this._responsiveLayout(),this._renderTooltip(this.model.tooltipSettings)):this._removeResponsive();break;case"hide":this._controlVisibleOptions(t[i]);break;case"orientation":this._setOrientation(t[i]),this.model.orientation=t[i],this._wireResizing();break;case"tooltipSettings":this.model.tooltipSettings=e.extend(!0,this.model.tooltipSettings,t[i]),this._renderTooltip(this.model.tooltipSettings);break;case"enableRTL":this._enableRTL(t[i]);break;case"showRoundedCorner":this._roundedCorner(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableSeparator":this.model.enableSeparator=t[i],this._renderToolbarSeparator();break;case"fields":e.extend(this.model.fields,t[i]);break;case"query":this.model.query=t[i];break;case"dataSource":for(optio in t)"fields"==optio&&e.extend(this.model.fields,t[optio]),"query"==optio&&(this.model.query=t[optio]);this._refreshTagItems(i,t[i]);break;case"targetID":this.model.targetID=t[i],this._setTargetID()}},_setTargetID:function(){this.element.removeAttr("role tabindex aria-disabled style"),e(this._spantag).remove(),e(this._liTemplte).remove(),this._liTemplte=this._tipRes=null,this.element.removeClass("e-widget e-box e-toolbarspan e-rtl"),this.element.find("ul,ol").removeClass("e-ul e-horizontal e-vertical e-separator e-comnrtl"),this.element.find("li").removeClass("e-tooltxt e-comnrtl"),this.element.find("li").removeAttr("aria-label"),this._init()},_refreshTagItems:function(e,t){this.model[e]=t,this.element.empty(),this._generateTemplate(),this._initialize()},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(){var t,i;if("auto"==this.model.width){var s=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),n=this.element.find("ul").children("li"),l=this.element.find("ul"),o=this.element.find(".e-toolbar-res-arrow");for(t=0,i=l.length;t<i;t++)null!=l[t]&&e(l[t]).hasClass("e-separator")&&(s+=parseFloat(l.eq(t).css("border-right-width"))+parseFloat(l.eq(t).css("border-left-width")));for(null!=o[0]&&(s+=Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8),t=0,i=n.length;t<i;t++)null!=n[t]&&(s+=Math.round(n.eq(t).outerWidth()));this.element.css("width",Math.ceil(s))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){"auto"!=this.model.width?this._off(e(window),"resize",this._widthHandler):this._on(e(window),"resize",this._widthHandler)},_widthHandler:function(){this._setWidth(this.model.width)},_setOrientation:function(e){e!=t.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical")),this.items.addClass("e-tooltxt")},_reSizeHandler:function(){this._isResized&&this._liTemplte.children().length>0&&(e(this.element).append(this._liTemplte.children()),this._renderToolbarSeparator(),this._liTemplte.addClass("e-display-none"),this._contstatus=!1),this._elementWidth="function"==typeof getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth,this._spantag.removeClass("e-display-block").addClass("e-display-none");for(var t=0;t<this.itemsContainer.length;t++)this._liWidth+=e(this.itemsContainer[t]).outerWidth(!0),this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.append(this.itemsContainer[t]));this._isResized=!0},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_getOffset:function(e){return t.util.getOffset(e)},_btnMouseClick:function(i){var s,n,l,o=this.element.outerWidth(),r=this.element.outerHeight(),a=e(this._liTemplte).outerWidth(),d=e(window).width(),h=e(window).scrollLeft();e(i.currentTarget).hasClass("e-disable")||(maxZ=this._getZindexPartial(),s=this._getOffset(this.element),n=this.model.enableRTL?s.left:s.left+o-a,l=s.top+r-1+2,n=n<h?h+1:n+a>d+h?d-a+h-1:n,this._contstatus?(this._liTemplte.addClass("e-display-none"),this._contstatus=!1):(this._liTemplte.removeClass("e-display-none").css({top:l+"px",left:n+"px","z-index":maxZ}),this._contstatus=!0,this._on(t.getScrollableParents(this.element),"scroll",this._hidecontext),this.element.bind("click",e.proxy(this._hidecontext,this))),this._contstatus&&this._on(e(document),"mouseup",this._documentClick),this._removeListHover())},_hidecontext:function(i){e(i.target).is(e("#"+this.element[0].id+"_target"))||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",e.proxy(this._hidecontext,this)),this._off(t.getScrollableParents(this.element),"scroll",this._hidecontext),this._off(e(document),"mouseup",this._documentClick))},_documentClick:function(t){e(t.target).is(e("#"+this.element[0].id+"_target"))||0!=e(t.target).closest("div#"+this.element[0].id+"_hiddenlist").length||e(t.target).parents().hasClass("e-ddl-popup")||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this._off(e(document),"mouseup",this._documentClick))},_setSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e);var t="e-toolbarTooltip "+e;this._subControlsSetModel("cssClass",t)},_subControlsSetModel:function(i,s){t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("option",i,s),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("option",i,s)},_destroy:function(){this.element.html(""),t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("destroy"),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy"),this._cloneElement.removeClass("e-toolbar e-js"),this.element.replaceWith(this._cloneElement),this._liTemplte&&this._liTemplte.remove(),this._unWireResizing()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"}),this.element.children().find("li"),this._focusEnable=!0,this._renderControl(),this._responsiveLayout(),this._wireEvents()},_responsiveLayout:function(){this._roundedCorner(this.model.showRoundedCorner),this.model.isResponsive&&"horizontal"==this.model.orientation&&(this._spantag=e("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block' unselectable='on'></span>"),this._spantag.appendTo(this.element),this._spanWidth=this._spantag.outerWidth(!0)+8,this._liTemplte=e("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+e(this.element)[0].className+"'></div>"),this.model.enableRTL&&this._liTemplte.addClass("e-rtl"),this._isResized=!1,this._reSizeHandler(),e("body").append(this._liTemplte)),this._on(e("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick),this._wireResizing(),this._controlVisibleOptions(this.model.hide),this._enableRTL(this.model.enableRTL),this._disabledItems=this.model.disabledItemIndices,this._controlStatus(this.model.enabled),this.model.disabledItemIndices=this._disabledItems,0!=this.model.disabledItemIndices.length&&this._disableItemByIndex(this.model.disabledItemIndices),0!=this.model.enabledItemIndices.length&&this._enableItemByIndex(this.model.enabledItemIndices),this._setWidth()},_removeResponsive:function(){e(this._spantag).remove(),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy");var i=e(this._liTemplte).children("ul");e(this._liTemplte).detach(),e(this.element).append(i),this.itemsContainer=this.element.children("ol,ul"),this.items=this.itemsContainer.children("li"),this._off(this.items,"mouseup"),this._off(this.items,"mousedown"),this._off(this.element),this._wireEvents(),this._wireResizing(),this._setWidth()},_controlVisibleOptions:function(e){0!=e?this.hide():this.show()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_roundedCorner:function(e){e?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner")),this._subControlsSetModel("showRoundedCorner",e)},_generateTemplate:function(){var e=this;this.element.css("visibility","hidden"),this.model.dataSource instanceof t.DataManager?this.model.dataSource.executeQuery(this.model.query).done(function(t){e._generateGroup(t.result),e._initialize(),e.element.css("visibility","visible")}):(e._generateGroup(e.model.dataSource),e.element.css("visibility","visible"))},_generateGroup:function(e){var t,i,s,n,l,o=this;for(this._localDataSource=e,t=-1,i=[],s=0;s<e.length;s++)if(this._isNewGroup(e[s].group,i)){for(i[++t]=e[s].group,n=-1,o.itemsSource=[],l=s;l<e.length;l++)e[s].group==e[l].group&&(o.itemsSource[++n]=e[l]);o.element.append(o._generateTagitems())}},_isNewGroup:function(e,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(e==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box"),this._renderToolbarItems(),this._addAttr(this.model.htmlAttributes),this._setOrientation(this.model.orientation),this._renderToolbarSeparator(),this._setHeight(this.model.height),this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0],this.itemsContainer=this.element.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)t.isNullOrUndefined(e(this.items[i]).attr("title"))&&e(this.items[i]).attr("aria-label",this.items[i].id);this._liCount=this.items.length},_generateTagitems:function(){var e,i;for(e=this.itemsSource,this.ultag=t.buildTag("ul"),i=0;i<e.length;i++)this.ultag.append(this._generateLi(e[i]));return this.ultag},_generateLi:function(e){var i,s,n;return i=t.buildTag("li"),e[this.model.fields.id]?i.attr("id",e[this.model.fields.id]):e[this.model.fields.text]&&i.attr("id",e[this.model.fields.text]),e[this.model.fields.tooltipText]&&i.attr("title",e[this.model.fields.tooltipText]),e[this.model.fields.imageUrl]&&""!=e[this.model.fields.imageUrl]&&(s=t.buildTag("img.e-align","",{},{src:e[this.model.fields.imageUrl],alt:e[this.model.fields.text]}),e[this.model.fields.imageAttributes]&&this._setAttributes(e[this.model.fields.imageAttributes],s),i.append(s)),e[this.model.fields.spriteCssClass]&&""!=e[this.model.fields.spriteCssClass]&&(n=t.buildTag("div.e-align "+e[this.model.fields.spriteCssClass]+" e-spriteimg"),i.append(n)),e[this.model.fields.text]&&""!=e[this.model.fields.text]&&i.append(e[this.model.fields.text]),e[this.model.fields.htmlAttributes]&&this._setAttributes(e[this.model.fields.htmlAttributes],i),i},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_renderToolbarSeparator:function(){var t,i;if(this.model.enableSeparator){for(t=0,i=this.itemsContainer.length-1;t<i;t++)e(this.itemsContainer[t]).addClass("e-separator");if(1==this.itemsContainer.length)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==i-1?e(this.itemsContainer[0].children[t]).removeClass("e-separator"):e(this.itemsContainer[0].children[t]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_enableRTL:function(e){e?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl")),this.model.enableRTL=e,this._subControlsSetModel("enableRTL",e),this._renderToolbarSeparator()},_renderTooltip:function(i){var s=e.extend(!0,{},i);s.cssClass=t.isNullOrUndefined(s.cssClass)?"e-toolbarTooltip "+this.model.cssClass:s.cssClass+" e-toolbarTooltip "+this.model.cssClass,s.enableRTL=this.model.enableRTL,s.showRoundedCorner=this.model.showRoundedCorner,s.target="li[data-content], li[title]",s.beforeOpen=this._showTooltip,this._tipToolbar=e(this.target).ejTooltip(s).data("ejTooltip"),this.model.isResponsive&&!t.isNullOrUndefined(this._liTemplte)&&(this._tipRes=e(this._liTemplte).ejTooltip(s).data("ejTooltip"))},_showTooltip:function(t){var i=e(t.event.currentTarget);t.event.target,i.hasClass("e-disable")&&(t.cancel=!0)},_hideTooltip:function(){t.isNullOrUndefined(this._tipToolbar)||(this._tipToolbar.hide(),this._tipToolbar._isHidden=!1),t.isNullOrUndefined(this._tipRes)||(this._tipRes.hide(),this._tipRes._isHidden=!1)},_addOverlay:function(i){for(var s,n=0;n<i.length;n++)e(i[n]).hasClass("e-disable")||(e(i[n]).addClass("e-disable"),s=t.buildTag("div.e-item-overlay"),e(i[n]).append(s))},_removeOverlay:function(t){for(var i=0;i<t.length;i++)e(t[i]).children(".e-item-overlay").remove()},disableItem:function(t){var i=e(t);null==i||i.length<=0||(i.hasClass("e-disable")||(i.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(i)),i.removeClass("e-hover e-active").attr("aria-selected",!1))},enableItem:function(t){var i=e(t);null==i||i.length<=0||(i.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(i))},disableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.disableItem(t)},enableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.enableItem(t)},_enableItemByIndex:function(t){var i,s;if(!this.model.enabled)return!1;if(0!=t.length)for(s=0;s<t.length;s++)e.inArray(t[s],this.model.disabledItemIndices)>-1&&(i=e.inArray(t[s],this.model.disabledItemIndices),this.enableItem(this.items[this.model.disabledItemIndices[i]]),this.model.disabledItemIndices.splice(i,1))},_disableItemByIndex:function(t){var i;if(!this.model.enabled)return!1;for(this._disabledItems=this.model.disabledItemIndices,i=0;i<t.length;i++)e.inArray(t[i],this.model.disabledItemIndices)<0&&this._disabledItems.push(parseInt(t[i]));for(i=0;i<this.items.length;i++)e.inArray(i,this.model.disabledItemIndices)>-1&&this.disableItem(this.items[i]);this.model.disabledItemIndices=this._disabledItems},disable:function(){if("true"==this.element.attr("aria-disabled"))return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(this.items),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.addClass("e-disable"),this.model.enabled=!1,this._subControlsSetModel("enabled",!1)},enable:function(){if(this.model.disabledItemIndices=[],"false"==this.element.attr("aria-disabled"))return!1;this.items.removeClass("e-disable"),this._removeOverlay(this.items),this.element.attr("aria-disabled",!1),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.removeClass("e-disable"),this.model.enabled=!0,this._subControlsSetModel("enabled",!0)},selectItem:function(t){var i=e(t);null==i||i.length<=0||(i.addClass("e-active").attr("aria-selected",!0),this._activeItem=e(this.items).index(i))},deselectItem:function(t){var i=e(t);null==i||i.length<=0||i.removeClass("e-active").attr("aria-selected",!1)},selectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.selectItem(t)},deselectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.deselectItem(t)},removeItem:function(t){var i,s,n;if(this.model.disabledItemIndices=[],s=0,null!=(i=e(t))&&!(i.length<=0))for(i.remove(),this.items=this.itemsContainer.children("li"),n=0;n<this.items.length;n++)e(this.items[n]).hasClass("e-disable")&&(this.model.disabledItemIndices[s++]=n)},removeItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.removeItem(t)},_wireResizing:function(){this.model.isResponsive&&"horizontal"==this.model.orientation?e(window).bind("resize",e.proxy(this._reSizeHandler,this)):this._unWireResizing()},_unWireResizing:function(){e(window).unbind("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler),this._on(this.element,"focus",this._focusElement),this._on(this.element,"blur",this._targetBlur),this._on(this.items,"mouseenter",this._onItemHover),this._on(this.items,"mouseleave",this._onItemLeave),this._on(this.items,"mousedown",this._onItemClick),this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this.items.removeClass("e-hover"),i.addClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemHover",args))},_onItemClick:function(t){if(e(t.currentTarget).hasClass("e-disable")||1!=t.which)return!1;var i=t.currentTarget,s=t.target;this._hideTooltip(),"mousedown"==t.type?(this._focusEnable=!1,e(i).addClass("e-active"),this._focusedItem=this._currentItem=e(i)):"mouseup"==t.type&&(this._removeSelection(),e(i).hasClass("e-disable")||(args={currentTarget:i,text:e(i).attr("data-content"),target:s,status:this.model.enabled,event:t},this._activeItem=this.model.isResponsive&&this._contstatus&&e(i).closest(".e-responsive-toolbar").length>0?this._liTemplte.find(".e-tooltxt").index(i):e(this.items).index(i),this._trigger("click",args)))},_onItemLeave:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this._removeSelection(),i.removeClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemLeave",args))},_onKeyPress:function(i){var s,n,l,o;if(s=i.keyCode?i.keyCode:i.which?i.which:i.charCode,this.model.isResponsive&&this._liTemplte.find(".e-tooltxt").length>0?(this._keyPressed=!0,this._items=this._contstatus?this._liTemplte.find(".e-tooltxt"):this.element.find(".e-tooltxt"),n=this._items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")):(this._keyPressed=!1,n=this.items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")),this._focusedItem?(l=this._focusedItem,this._focusedItem=null):l=n.filter(".e-hover"),"keydown"==i.type)(38==s||39==s)&&this.model.orientation!=t.Orientation.Vertical||(39==s||40==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(n[n.index(l)+1]).length>0?e(n[n.index(l)+1]):n.first()):(37==s||40==s)&&this.model.orientation!=t.Orientation.Vertical||(37==s||38==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(n[n.index(l)-1]).length>0?e(n[n.index(l)-1]):n.last()):33==s||36==s?(i.preventDefault(),o=n.first()):(34==s||35==s)&&(i.preventDefault(),o=n.last()),o&&(this._removeListHover(),o.addClass("e-hover"));else switch(s){case 13:case 32:if(i.preventDefault(),!l[0])break;args={currentTarget:l[0],target:e(l)[0],status:this.model.enabled,event:i},this._trigger("click",args),this._removeListHover();break;case 27:i.preventDefault(),this.element.blur();break;case 9:i.preventDefault(),this._activeItem=e(this.items).filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)").first().index(),this._addListHover()}},_removeListHover:function(){e(this.items).removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.hasClass("e-disable")||e.addClass("e-hover").focus()},_getActiveItem:function(){return this.model.isResponsive&&this._keyPressed?e(this._items[this._activeItem]):e(this.items[this._activeItem])},_targetBlur:function(e){e.preventDefault(),this.element.focusout().removeClass("e-focus"),this._removeListHover(),this._off(this.element,"keyup",this._onKeyPress)._off(this.element,"keydown",this._onKeyPress),this._trigger("focusOut")},_clickEventHandler:function(){this._clicked=!0},_removeSelection:function(){this._currentItem&&"true"!=this._currentItem.attr("aria-selected")&&this._currentItem.removeClass("e-active")},_focusElement:function(){this.element.hasClass("e-focus")||(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._onKeyPress)._on(this.element,"keydown",this._onKeyPress),this._focusEnable)?(this._removeListHover(),this._activeItem=this._clicked?-1:0,(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=e(this.items).filter('li:not([class*="e-disable"])').first().index()),this._addListHover()):this._focusEnable=!0}})}),
/*!
*  filename: ej.menu.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./ej.checkbox.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejMenu","ej.Menu",{element:null,model:null,validTags:["ul"],_setFirst:!1,_rootCss:"e-menu",angular:{terminal:!1},defaults:{height:"",width:"",animationType:"default",orientation:t.Orientation.Horizontal,menuType:"normalmenu",isResponsive:!0,contextMenuTarget:null,htmlAttributes:{},cssClass:"",openOnClick:!1,subMenuDirection:"none",enableCenterAlign:!1,showRootLevelArrows:!0,showSubLevelArrows:!0,enableAnimation:!0,enableSeparator:!0,enabled:!0,fields:{child:null,dataSource:null,query:null,tableName:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",url:"url",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",linkAttribute:"linkAttribute",imageUrl:"imageUrl"},enableRTL:!1,titleText:"Menu",excludeTarget:null,beforeOpen:null,open:null,close:null,mouseover:null,mouseout:null,click:null,keydown:null,create:null,destroy:null},dataTypes:{animationType:"enum",cssClass:"string",titleText:"string",openOnClick:"boolean",enabled:"boolean",enableCenterAlign:"boolean",showArrow:"boolean",showRootLevelArrows:"boolean",showSubLevelArrows:"boolean",enableSeparator:"boolean",isResponsive:"boolean",enableRTL:"boolean",enableAnimation:"boolean",fields:{dataSource:"data",query:"data",child:"data"},excludeTarget:"string",htmlAttributes:"data"},_setModel:function(i){for(var s in i)switch(s){case"menuType":i[s]=this.model.menuType;break;case"fields":this._wireEvents("_off"),this.element.empty().insertBefore(this.wrapper),this.wrapper.remove(),e.extend(this.model.fields,i[s]),this._intializeData(),this.model.enabled||this._wireEvents("_off");break;case"orientation":this._setOrientation(i[s]);break;case"showRootLevelArrows":this._addArrow(i[s],this.model.showSubLevelArrows);break;case"showSubLevelArrows":this._addArrow(this.model.showRootLevelArrows,i[s]);break;case"enableSeparator":this._setSeparator(i[s]);break;case"height":this._setHeight(i[s]);break;case"width":this._setWidth(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"isResponsive":this.model.isResponsive?this._responsiveLayout():(e(this.resWrap).remove(),e(this.wrapper).removeClass("e-menu-responsive"),e(this.element).removeClass("e-menu-responsive"),this.resWrap=null);break;case"htmlAttributes":this._addAttr(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"enableCenterAlign":this._centerAlign(i[s]);break;case"excludeTarget":this.model.excludeTarget=i[s];break;case"enabled":this.model.enabled=i[s],this._controlStatus(i[s]);break;case"animationType":this._setAnimation(i[s]);break;case"enableAnimation":this.model.enableAnimation=i[s];break;case"openOnClick":this._hoverOpen=!i[s],this._hoverClose=!i[s];break;case"subMenuDirection":this._setSubMenuDirection(this.model.subMenuDirection);break;case"titleText":this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e(this.label).text(i[s])}},_destroy:function(){this.model.menuType==t.MenuType.ContextMenu?this._referenceElement.append(this._cloneElement):this._cloneElement.insertBefore(this.wrapper),this._cloneElement.removeClass("e-menu e-js"),this.wrapper.remove()},_init:function(){this._cloneElement=this.element.clone(),this.element.css("visibility","hidden"),this._setValues(),this._intializeData(),this.element.css("visibility","visible")},_setValues:function(){this._mouseOver=!0,this._hoverOpen=!0,this._hoverClose=!0,this._isMenuOpen=!1,this._hideSpeed=100,this._showSpeed=100,this._isSubMenuOpen=!1,this._isContextMenuOpen=!1,this._disabledMenuItems=[],this._hiddenMenuItems=[],this._delayMenuHover=0,this._delaySubMenuHover=0,this._delaySubMenuShow=0,this._preventContextOpen=!0,this._setAnimation(this.model.animationType),this._isFocused=!0},_intializeData:function(){t.isNullOrUndefined(this.model.fields)||null==this.model.fields.dataSource?(this._renderMenu(),this._wireEvents("_on")):(this._generateTemplate(this.model.fields.dataSource),this._renderMenu())},_renderMenu:function(){this._renderControl(),this._addArrow(this.model.showRootLevelArrows,this.model.showSubLevelArrows),this._renderArrow(),this._intializeMenu()},_renderControl:function(){"normalmenu"==this.model.menuType?(this.wrapper=t.buildTag("div"),this.wrapper.addClass(this.model.cssClass+" e-menu-wrap")):this.wrapper=t.buildTag("div.e-menu-wrap"),this.model.isResponsive&&this._responsiveLayout(),this.model.menuType!=t.MenuType.ContextMenu&&(this.wrapper.insertBefore(this.element),this.wrapper.append(this.element),null!=this.checkBox&&this.checkBox.ejCheckBox({size:"medium",change:this._oncheck})),this.element.addClass("e-menu e-widget e-box").attr({role:"menu",tabindex:0}),this._addAttr(this.model.htmlAttributes),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this._setSubMenuDirection(this.model.subMenuDirection),"normalmenu"==this.model.menuType?"horizontal"==this.model.orientation?this.element.addClass("e-horizontal"):this.element.addClass("e-vertical"):this._contextMenu_Template(),this._addClass(),this.model.enableCenterAlign&&this._centerAlign(this.model.enableCenterAlign),this.model.enableSeparator&&this._setSeparator(!0),this.model.enabled||this.disable()},_responsiveLayout:function(){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(this.wrapper.addClass("e-menu-responsive"),this.element.addClass("e-menu-responsive"),this.resWrap=t.buildTag("span.e-menu-res-wrap e-menu-responsive"),this.inResWrap=t.buildTag("span.e-in-wrap e-box e-menu-res-in-wrap"),this.label=t.buildTag("span.e-res-title",this.model.titleText),this.check=t.buildTag("span.e-check-wrap e-icon"),this.checkBox=t.buildTag("input#responsive.e-res-icon","",{opacity:0},{type:"checkbox"}),this.wrapper.append(this.resWrap),this.resWrap.append(this.inResWrap),this.inResWrap.append(this.label).append(this.check),this.check.append(this.checkBox))},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_oncheck:function(e){var t=this.element.parents(".e-menu-wrap").children(".e-menu");e.isChecked?t.removeClass("e-res-hide").addClass("e-res-show"):t.removeClass("e-res-show").addClass("e-res-hide")},_addClass:function(){this.element.find('li:has("> ul")').find("> a,> span").addClass("aschild"),this.element.find(">li").addClass("e-list").attr({role:"menuitem"}),this.element.find("li").find(">a, >span").addClass("e-menulink");var t,s,n=this.element.find(".e-list a.aschild"),l=this.element.find(".e-list span.aschild");for(i=0;i<n.length;i++)(t=e(n[i])).siblings().attr({"aria-hidden":!0}),t.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),t.siblings("ul").children("li").addClass("e-list").attr("role","menuitem");for(i=0;i<l.length;i++)(s=e(l[i])).siblings().attr({"aria-hidden":!0}),s.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),s.siblings("ul").children("li").addClass("e-list").attr("role","menuitem")},_renderArrow:function(){if(this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&0==e(e(this.element).find("span.e-menu-arrow")).length){var i=t.buildTag("span.e-menu-arrow e-menu-left");e(i).append("<span class='e-arrowMenuOuter'></span>").append("<span class='e-arrowMenuInner'></span>"),this.element.find(">li.e-list.e-haschild").append(i)}},_generateTemplate:function(e){var i=this;e instanceof t.DataManager?e.executeQuery(this._columnToSelect(this.model.fields)).done(function(e){i._odataFlag=!0,i._generateItemTemplate(e.result),i._wireEvents("_on")}):(i._odataFlag=!1,this._generateItemTemplate(i.model.fields.dataSource),this._wireEvents("_on"))},_generateItemTemplate:function(e){for(var t,i=0;i<e.length;i++)(null==e[i][this.model.fields.parentId]||0==e[i][this.model.fields.parentId])&&(t=this._menuTemplate(e[i],e,this.model.fields),this.element.append(t))},_menuTemplate:function(i,s,n){var l,o,r,a,d,h,c,u,m,p,g;if((l=e(document.createElement("li"))).attr("class","e-list"),i[n.htmlAttribute]&&this._setAttributes(i[n.htmlAttribute],l),(o=e(document.createElement("a"))).attr("class","e-menulink"),i[n.imageUrl]&&""!=i[n.imageUrl]?((r=e(document.createElement("img"))).attr("src",i[n.imageUrl]),i[n.imageAttribute]&&this._setAttributes(i[n.imageAttribute],r),o.append(r)):i[n.spriteCssClass]&&""!=i[n.spriteCssClass]&&((a=e(document.createElement("span"))).addClass(i[n.spriteCssClass]),o.append(a)),o.append(i[n.text]),i[n.linkAttribute]&&this._setAttributes(i[n.linkAttribute],o),i[n.url]&&o.attr("href",i[n.url]),l.append(o),i[n.id]&&l.prop("id",i[n.id]),t.isNullOrUndefined(n.child)){if(!this._odataFlag&&(u=t.DataManager(n.dataSource).executeLocal(t.Query().where(n.parentId,t.FilterOperators.equal,i[n.id])))&&u.length>0){for(m=t.buildTag("ul"),p=0;p<u.length;p++)g=this._menuTemplate(u[p],n.dataSource,n),m.append(g);l.append(m)}}else if(this._odataFlag=!0,n.child.dataSource instanceof t.DataManager)d=this,h=t.Query(),e(l).attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),(h=this._columnToSelect(n.child)).where(n.child.parentId,t.FilterOperators.equal,i[n.id]),(c=n.child.dataSource.executeQuery(h)).done(function(t){var i,s,o,r=t.result;if(r&&r.length>0){for(i=e(document.createElement("ul")),s=0;s<r.length;s++)o=d._menuTemplate(r[s],n.child.dataSource,n.child),i.append(o);l.append(i),e(l).children("a").addClass("aschild"),e(l).parent().hasClass("e-menu")&&d.model.showRootLevelArrows?e(l).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):d.model.showSubLevelArrows&&e(l).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space")}}),c.then(function(){d._renderArrow()});else if(t.isNullOrUndefined(i.child)||(t.isPlainObject(i.child)?u=t.DataManager(n.child.dataSource).executeLocal(t.Query().where(n.child.parentId,t.FilterOperators.equal,i[n.id])):i.child instanceof Array&&(u=i.child)),u&&u.length>0){for(m=e(document.createElement("ul")),p=0;p<u.length;p++)g=this._menuTemplate(u[p],n.child.dataSource,n.child),m.append(g);l.append(m)}return l},_setAttributes:function(e,t){for(var i in e)"class"==i?t.addClass(e[i]):t.attr(i,e[i])},_addArrow:function(t,i){if(t){var s="horizontal"==this.model.orientation?"e-arrowhead-down":"e-arrowhead-right";this.element.find('>li.e-list:has("> ul")').children("a,span").append(e("<span>").addClass("e-icon "+s)).addClass("e-arrow-space")}else this.element.find('>li.e-list:has("> ul")').children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove();i?this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove()},_intializeMenu:function(){0!=this.model.height&&this._setHeight(this.model.height),0!=this.model.width&&this._setWidth(this.model.width),"contextmenu"==this.model.menuType&&(this.model.openOnClick=!1),this.model.openOnClick&&(this._hoverOpen=!1,this._hoverClose=!1)},_setOrientation:function(e){"horizontal"==e?this.element.removeClass("e-vertical e-horizontal").addClass("e-horizontal"):this.element.removeClass("e-horizontal e-vertical").addClass("e-vertical")},_setHeight:function(e){"horizontal"==this.model.orientation&&"auto"!==e?(e="number"==typeof e?e+"px":e,this.element.find("> li").find(">a:first").css("line-height",e),this.model.showRootLevelArrows&&this.element.find("> li").find(">a:first").find("> span:first").css({"line-height":e,top:"0px"})):this.element.height(e)},_setWidth:function(e){this.element.css("width",e),"horizontal"===this.model.orientation&&this.model.isResponsive&&this.resWrap.css("width",e)},_setRTL:function(e){e?this.element.removeClass("e-rtl").addClass("e-rtl"):this.element.removeClass("e-rtl"),e&&"horizontal"===this.model.orientation?this.wrapper.removeClass("e-menu-rtl").addClass("e-menu-rtl"):this.wrapper.removeClass("e-menu-rtl"),this.model.subMenuDirection=e?"left":"right"},_setSubMenuDirection:function(e){"left"!=e&&"right"!=e&&(this.model.subMenuDirection=this.model.enableRTL?"left":"right")},_setAnimation:function(e){"none"===e?(this._showAnim="none",this._hideAnim="none"):(this._showAnim="slideDown",this._hideAnim="slideUp")},_controlStatus:function(e){1!=e?this.disable():this.enable()},_centerAlign:function(e){"horizontal"==this.model.orientation&&e?this.element.css("text-align","center"):this.element.css("text-align","inherit")},_columnToSelect:function(e){var i,s=[],n=t.Query();if(t.isNullOrUndefined(e.query)){for(i in e)"tableName"!==i&&"child"!==i&&"dataSource"!==i&&e[i]&&s.push(e[i]);s.length>0&&n.select(s),this.model.fields.dataSource.dataSource.url.match(e.tableName+"$")||t.isNullOrUndefined(e.tableName)||n.from(e.tableName)}else n=e.query;return n},_max_zindex:function(){var t,i,s;return"contextmenu"==this.model.menuType?(t=e(this._targetElement).parents()).push(this._targetElement):t=e(this.element).parents(),i=e("body").children(),index=i.index(this.popup),i.splice(index,1),e(i).each(function(e,i){t.push(i)}),!(s=Math.max.apply(s,e.map(t,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||s<1e4?s=1e4:s+=1,s},_recursiveFunction:function(t,i){var s=this,n=!1;e.each(t,function(e,t){return t.Text==i?(s.selectedItem=t,n=!0,!1):(null!=t.ChildItems&&s._recursiveFunction(t.ChildItems,i),!n&&void 0)})},_contextMenu_Template:function(){var t=e(".e-menu-wrap #"+this.element[0].id).get(0);t&&e(t.parentElement).remove(),this.model.orientation="vertical",this.element.addClass(this.model.cssClass+" e-context"),this.element.css("display","none"),this._referenceElement=this.element.parent(),e("body").append(this.element),this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)},_closeMenu:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim)},_onMenuIntent:function(e,t,i){t._delayMenuHover=window.setTimeout(function(){if(1==t._mouseOver&&i){var s=t._showAnim,n=t._hideAnim;t._showSpeed,t._hideSpeed,t._show(e,s,n)}},this._showSpeed)},_onHide:function(e,t,i){t._delaySubMenuHover=window.setTimeout(function(){0==t._mouseOver&&i&&(t._id,t._hideAnim,t._hideSpeed,t._closeAll())},t._hideSpeed)},_subMenuPos:function(t,i){var n,l,o,r,a,d,h,c,u,m=e(t).offset(),p=m.left,g=e("ul:first",t),f=e(t).outerWidth();if(null==m||m==s)return!1;o=g.outerWidth()+1,r=document.documentElement.clientWidth+e(document).scrollLeft(),"normalmenu"==this.model.menuType?e(t.parentNode).is(this.element)?"horizontal"==this.model.orientation?(g.css("top",e(t).outerHeight()+"px"),this.model.enableRTL?(l=p+f-o<0?p+f-o:1,g.css({left:"auto",right:l+"px"})):(n=r<p+o?p+o-r:1,g.css("left",-1*n+"px"))):"left"==i&&p>o||"right"==i&&r<=m.left+f+o?g.css("left",-(o+4)+"px"):g.css("left",e(t).outerWidth()+4+"px"):"left"==i&&p>o||"right"==i&&r<=m.left+f+o?g.css("left",-(o+4)+"px"):(g.css("left",e(t).outerWidth()+4+"px"),c=g.outerHeight(),(a=e(window).height())<c?(d=m.top-e(window).scrollTop(),g.css("top",4-d+"px")):a-m.top<c&&(d=a-m.top-c,g.css("top",d-2+"px"))):((r-=m.left+2*o+4)<0?(h=null==o?"-206.5px":"-"+(o+5)+"px",g.css("left",h)):g.parent("li.e-list").parent("ul").width()&&"right"==i?g.css("left",g.parent("li.e-list").parent("ul").width()+4+"px"):m.left>o&&g.css("left",-(o+4)+"px"),c=g.outerHeight(),m.top+c>e(window).height()?(u=-c+e(t).outerHeight(),c>m.top+e(t).outerHeight()/2?g.css("top",-c/2+"px"):g.css("top",u+"px")):g.css("top","0px"))},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e+" e-menu-wrap")},_setSeparator:function(e){e?this.element.addClass("e-separator"):this.element.removeClass("e-separator")},_contextMenuEvents:function(t){this[t](e(this.model.contextMenuTarget),"mouseup taphold",this._ContextMenuHandler),this[t](this.element,"contextmenu",this._onDefaultPreventer),this[t](e(this.model.contextMenuTarget),"contextmenu",this._onDefaultPreventer),this[t](e(document),"mousedown",this._onContextClose)},_show:function(t,i,s){var n,l=e("> ul",t),o=this._max_zindex();l.attr({"aria-hidden":!1}),this._hideAnimation(e(t).siblings().find(" > ul:visible"),s),e.inArray(this._disabledMenuItems,t)>-1||("none"!=l.css("display")?(n=this.model.openOnClick?e(l):l.children().find("> ul"),this._hideAnimation(n,s)):e("> ul",t).children().find("> ul").hide(),this._subMenuPos(t,this.model.subMenuDirection),l.css({"z-index":o+1}),e(t).children("span.e-menu-arrow").css({"z-index":o+2}),"block"==e("> ul",t).css("display")||e(t).hasClass("e-disable-item")||(this._showAnimation(l,i),l.closest("li").addClass("e-active e-mfocused")),e(t).siblings("li.e-active").length>0&&e(t).siblings("li.e-active").removeClass("e-active e-mfocused"))},_closeAll:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this._hideAnimation(this.element.find("> ul:visible"),this._hideAnim)},_showAnimation:function(e,t){switch(t){case"slideDown":e.slideDown(this.model.enableAnimation?200:0);break;case"none":e.css("display","block")}},_hideAnimation:function(t,i){switch(i){case"slideUp":e(t).attr({"aria-hidden":!0}),t.slideUp(this.model.enableAnimation?100:0);break;case"none":t.css("display","none")}t.closest("li").removeClass("e-active e-mfocused")},_removeValue:function(i,s){for(var n=t.browserInfo(),l="8.0"===n.version&&"msie"===n.name?i[0].outerText:i[0].textContent,o=e(s).length,r=0,a=0==e(s).children("a").length?e(s).children("span"):e(s).children("a");r<=o;){if(e(a[r]).text()===l)return r;r++}},_createSubLevelItem:function(t,i){var s;(s=e(document.createElement("ul"))).append(i),t.append(s),t.attr({role:"menu","aria-haspopup":"true"}),t.addClass("e-haschild"),this.element.find('li:has("> ul")').find("> a,>span").addClass("aschild e-arrow-space"),this._insertArrows(s)},_insertArrows:function(t){this.model.showRootLevelArrows?t.find(">a,>span").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):t.find(">a,>span").removeClass("e-arrow-space").find(">span.e-icon").remove(),this.model.showSubLevelArrows?t.parent("li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):t.parent("li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").find(">span.e-icon").remove()},_createMenuItem:function(t){var i,s,n,l;return(i=e(document.createElement("li"))).attr({class:"e-list",role:"menuitem"}),t.htmlAttribute&&this._setAttributes(t.htmlAttribute,i),t.text&&""!=t.text&&((s=e(document.createElement("a"))).attr({class:"e-menulink"}),t.imageUrl&&""!=t.imageUrl?((n=e(document.createElement("img"))).attr("src",t.imageUrl),t.imageAttribute&&this._setAttributes(t.imageAttribute,n),s.append(n)):t.spriteCssClass&&""!=t.spriteCssClass&&((l=e(document.createElement("span"))).addClass(t.spriteCssClass),s.append(l)),s.append(t.text),t.linkAttribute&&this._setAttributes(t.linkAttribute,s),t.url&&s.attr("href",t.url),i.append(s)),t.id&&i.prop("id",t.id),this.model.enabled||i.addClass("e-disable-item"),i},_insertNode:function(i,s,n){var l=0,o=0,r=0,a=[];for(e(s).is(this.element)?a.push(this.element):"string"==typeof s?a.push(this.element.find(s)):void 0===s?a.push(this.element):a.push(s),o=0;o<a.length;o++)for(r=0;r<a[o].length;r++)for(l=0;l<i.length&&!t.isNullOrUndefined(i[l]);l++)this._addItem(i[l],a[o][r],n)},_addItem:function(t,i,s){var n,l;switch(this._wireEvents("_off"),n=this._createMenuItem(t),i=e("default"===i?"#"+t.parentId:i),s){case"insert":0!=(l=e(i).is(this.element)?i:i.children("ul")).length?l.append(n):this._createSubLevelItem(i,n);break;case"insertBefore":e(i).is(this.element)?i.prepend(n):n.insertBefore(i);break;case"insertAfter":e(i).is(this.element)?i.append(n):n.insertAfter(i)}this._wireEvents("_on")},_removeItem:function(e){0==e.siblings("li").length?(e.closest("ul").siblings("a.aschild").removeClass("aschild e-arrow-space").children("span.e-icon").remove(),e.closest("ul").hasClass("e-menu")?e.remove():e.closest("ul").remove()):e.remove()},_hiddenElement:function(t){t.length>0&&-1==e.inArray(t[0],this._hiddenMenuItems)&&(t.addClass("e-hidden-item"),this._hiddenMenuItems.push(t[0]))},_showElement:function(t){t.length>0&&e.inArray(t[0],this._hiddenMenuItems)>-1&&(t.removeClass("e-hidden-item"),this._hiddenMenuItems.splice(this._hiddenMenuItems.indexOf(t[0]),1))},_getNodeByID:function(t){return"object"!=typeof t&&""!=t&&(t=this.element.find(".e-list"+t)),e(t)},_processItems:function(t,i){for(var s=this._getNodeByID(t),n=0;n<s.length;n++)i?this._showElement(e(s[n])):this._hiddenElement(e(s[n]))},insert:function(e,t){this._insertNode(e,t,"insert")},insertBefore:function(e,t){this._insertNode(e,t,"insertBefore")},insertAfter:function(e,t){this._insertNode(e,t,"insertAfter")},remove:function(t){var i=0,s=0;for(i=0;i<t.length;i++)for(t[i]="string"==typeof t[i]?this.element.find(t[i]):t[i],s=0;s<t[i].length;s++)"LI"===t[i][s].tagName||"UL"===t[i][s].tagName?this._removeItem(e(t[i][s])):t[i][s].remove()},showContextMenu:function(i,s,n,l,o){if(this._closeMenu(),this._eventArgs=l,t.isNullOrUndefined(l)||!this._checkForExclusion(l.target)){if(this._trigger("beforeOpen",{target:n,events:l}))return!1;if(this._preventContextOpen){if(this._targetElement=t.isNullOrUndefined(n)?t.isNullOrUndefined(target)?this.element:target:n,o){var r=this._calculateContextMenuPosition(l);i=r.X,s=r.Y}this.element.css({left:i,top:s}),this.element.css({"z-index":this._max_zindex()+1}),this._showAnimation(this.element,this._showAnim),this._isContextMenuOpen=!0,this.element.focus(),this._trigger("open",{target:n}),this._on(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)}return!1}},_checkForExclusion:function(i){var s,n;if(!t.isNullOrUndefined(this.model.excludeTarget))for(s=this.model.excludeTarget.split(","),n=0;n<s.length;n++)if(e(i).closest(this.model.excludeTarget).is(e.trim(s[n])))return!0},hideContextMenu:function(i){this._closeMenu(),this.element.find(".e-mhover").removeClass("e-mhover"),this.element.find(".e-mfocused").removeClass("e-mfocused"),this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)},disableItem:function(t){var i=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});i.length>0&&!(e.inArray(i.parent()[0],this._disabledMenuItems)>-1)&&(i.parent().addClass("e-disable-item").attr({"aria-disabled":!0}),i.parent().find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i.parent()[0]))},disableItemByID:function(t){if(t&&""!=t){var i=this.element.find("#"+t)?this.element.find("#"+t)[0]:s;!i||e.inArray(i,this._disabledMenuItems)>-1||(e(i).addClass("e-disable-item").attr({"aria-disabled":!0}),e(i).find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i))}},getHiddenItems:function(){return this._hiddenMenuItems},hideItems:function(e){if("object"==typeof e&&e.length!==s)for(var t=0;t<e.length;t++)this._processItems(e[t],!1);else this._processItems(e,!1)},showItems:function(e){if("object"==typeof e&&e.length!==s)for(var t=0;t<e.length;t++)this._processItems(e[t],!0);else this._processItems(e,!0)},enableItem:function(t){var i,s=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});s.length>0&&e.inArray(s.parent()[0],this._disabledMenuItems)>-1&&(s.parent().removeClass("e-disable-item").attr({"aria-disabled":!1}),s.parent().find(">a.aschild span.e-icon").removeClass("e-disable"),i=this._removeValue(s,this._disabledMenuItems),this._disabledMenuItems.splice(i,1))},enableItemByID:function(t){var i,s;if(t&&""!=t&&(i=this.element.find("#"+t)[0])&&e.inArray(i,this._disabledMenuItems)>-1)for(e(i).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(i).find(">a.aschild span.e-icon").removeClass("e-disable"),s=this._disabledMenuItems.length-1;s>=0;s--)this._disabledMenuItems[s].id==t&&this._disabledMenuItems.splice(s,1)},disable:function(){this.model.enabled=!1;var t=this.element.find(">li[class~=e-list]"),i=this;e.each(t,function(t,s){e.inArray(s,i._disabledMenuItems)>-1||(e(s).addClass("e-disable-item").attr({"aria-disabled":!0}),e(s).find(">a.aschild span.e-icon").addClass("e-disable"),i._disabledMenuItems.push(s))})},enable:function(){var t,i=this;this.model.enabled=!0,t=this.element.find("li.e-disable-item"),e.each(t,function(t,s){e(s).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(s).find(">a.aschild span.e-icon").removeClass("e-disable"),i._disabledMenuItems.pop(s)})},show:function(e,t,i,s){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.showContextMenu(e,t,i,s,!1):this.element.css("display","block")},hide:function(e){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.hideContextMenu(e):(this._closeMenu(),this.element.css("display","none"))},_wireEvents:function(t){this[t](this.element.find("li.e-list"),"mouseout",this._mouseOutHandler),this[t](this.element.find("li.e-list"),"mouseover",this._mouseOverHandler),this[t](this.element,"click",this._onClickHandler),this[t](this.element,"keydown",this._onKeyDownHandler),this[t](this.element,"focus",this._OnFocusHandler),this[t](this.element,"blur",this._OnFocusOutHandler),"contextmenu"==this.model.menuType&&null!=e(this.model.contextMenuTarget)[0]&&this._contextMenuEvents(t),"contextmenu"!=this.model.menuType&&(this[t](e(document),"click",this._onDocumentClick),this[t](this.element,"mousedown",this._onMouseDownHandler))},_mouseOverHandler:function(i){var s,n;if(this.element.find(".e-mhover").removeClass("e-mhover"),i.currentTarget=e(i.target).closest("li")[0],e(i.currentTarget).hasClass("e-disable-item")?this._isFocused=!1:e(i.currentTarget).addClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!0,this._isMenuOpen=!0,this._isSubMenuOpen=!e(i.currentTarget.parentNode.parentNode).is(this.element),"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}e(i.currentTarget).hasClass("e-disable-item")||this._onMenuIntent(s,this,this._hoverOpen),e.inArray(s,this._disabledMenuItems)>-1||(n={text:e(s).children("a,span").text(),element:s,event:i,ID:t.isNullOrUndefined(s)?"":e(s)[0].id},this._trigger("mouseover",e.extend({events:n},n)))},_onMouseDownHandler:function(t){e(t.target).hasClass("e-menu")&&(this._isFocused=!1)},_mouseOutHandler:function(i){var s,n;if(e(i.currentTarget).removeClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!1,this._isMenuOpen=!1,"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}this._onHide(s,this,this._hoverClose),e.inArray(s,this._disabledMenuItems)>-1||(n={text:e(s).children("a,span").text(),element:s,event:i,ID:t.isNullOrUndefined(s)?"":e(s)[0].id},this._trigger("mouseout",e.extend({events:n},n)))},_onClickHandler:function(i){var s,n,l,o,r,a="";this._isFocused=!0,n=!1,!e(i.target).closest("li.e-list").hasClass("e-disable-item")&&e(i.target).closest("li.e-list").length>0?(s=e(i.target).closest("li.e-list")[0],e(s).is(this.element.find(">li.e-list"))&&(this._activeElement=s),e(i.target).is("a")&&e(s).find(">a,>span").hasClass("aschild")&&this.model.openOnClick&&(this._isFocused=!1),!this._hoverOpen&&e(s).find(">a,>span").hasClass("aschild")&&(this._show(s,this._showAnim,this._hideAnim),this._hoverOpen=!1,n=!0),e.inArray(s,this._disabledMenuItems)>-1||("contextmenu"==this.model.menuType&&this._isContextMenuOpen&&!e(s).hasClass("e-haschild")&&(this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),n||e(s).find(">a,>span").hasClass("aschild")||(this._closeMenu(),this.model.openOnClick&&(this._hoverOpen=!1)),l=e(s).children("a,span").text(),0!=(o=e(s).closest("ul").parent("li")).length?(parentId=t.isNullOrUndefined(o.attr("id"))?null:o.attr("id"),parentText=o.children("a,span").text()):(parentId=null,parentText=null),a=t.isNullOrUndefined(s)?"":e(s)[0].id,r={text:l,element:s,event:i,selectedItem:this.selectedItem,ID:a,parentId:parentId,parentText:parentText},this._trigger("click",e.extend({events:r},r)),this.selectedItem=null,this.model.openOnClick&&"contextmenu"!=this.model.menuType&&this.element.focus())):e(i.target).is(this.element)&&(this._activeElement=this.element.find(">li:first"))},_onKeyDownHandler:function(i){var s,n,l;if("contextmenu"!=this.model.menuType||this._isContextMenuOpen){var o,r,a,d="",h=this.element.find(".e-mhover"),c=this.element.find(".e-mfocused");if(!e(h).length>0&&e(this._activeElement).length>0&&(h=c=e(this._activeElement)),9==i.keyCode?(this._isFocused=!1,this._OnFocusOutHandler()):(37==i.keyCode||38==i.keyCode||39==i.keyCode||40==i.keyCode)&&i.preventDefault(),40==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-mhover").children("ul").length>0||e(this._activeElement).length>0?("none"===e(h).children("ul").css("display")&&this._show(h[h.length-1],this._showAnim,this._hideAnim),h.removeClass("e-mhover e-mfocused").children("ul:first").find("li:first").addClass("e-mhover"),null==this._activeElement?h.addClass("e-mfocused"):e(this._activeElement).addClass("e-mfocused")):(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e(h[h.length-1]).removeClass("e-mfocused e-mhover"),(r=e(liVisible[liVisible.index(h)+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()).addClass("e-mhover")):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mfocused"),h.length>0?(h.removeClass("e-mhover"),r=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()):r=liVisible.first(),r.addClass("e-mhover"))),39==i.keyCode&&("horizontal"==this.model.orientation&&(this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0)?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()).addClass("e-mhover")):e(h).children("ul").length>0?(h.removeClass("e-mfocused e-mhover"),s=h.children("ul:first").find("li:first"),this._show(h[h.length-1],this._showAnim,this._hideAnim),liVisible=h.addClass("e-mfocused").children("ul:first").children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(s)]).length>0?e(liVisible[liVisible.index(s)]):liVisible.first()).addClass("e-mhover")):h.children("ul").length<=0&&"horizontal"==this.model.orientation&&h.parent().closest(".e-list").parent().hasClass("e-menu")&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(c[c.length-1])+1]).length>0?e(liVisible[liVisible.index(c[c.length-1])+1]):e(liVisible[liVisible.index(c.first())])).addClass("e-mhover"))),38==i.keyCode&&("horizontal"==this.model.orientation?(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mhover"),r=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.length>0?(h.removeClass("e-mfocused e-mhover"),r=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):r=liVisible.last()),r.addClass("e-mhover")),37==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.find("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()).addClass("e-mhover")):(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused e-active"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=h.parent().closest(".e-list").parent(".e-menu").length>0?e(liVisible[liVisible.index(c[c.length-1])-1]).length>0?e(liVisible[liVisible.index(c[c.length-1])-1]):liVisible.last():e(liVisible[liVisible.index(c[c.length-1])]).length>0?e(liVisible[liVisible.index(c[c.length-1])]):liVisible.last()).addClass("e-mhover")):(0==h.parent("ul.e-menu").length||"contextmenu"==this.model.menuType&&0==h.parent("ul.e-context").length)&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(c[c.length-1])]).length>0?e(liVisible[liVisible.index(c[c.length-1])]):e(liVisible[liVisible.index(c.last())])).addClass("e-mhover"))),13==i.keyCode&&(n=e(h).children("a,span").text(),d=t.isNullOrUndefined(e(h)[0])?"":e(h)[0].id,l={menuId:this.element[0].id,text:n,selectedItem:c,ID:d},"contextmenu"==this.model.menuType?this._isContextMenuOpen&&h.length>0&&!c.hasClass("e-disable-item")&&(this.model.click&&this._trigger("click",e.extend({events:l},l)),this.selectedItem=null,this.hideContextMenu(i)):h.length>0&&!h.hasClass("e-disable-item")&&(e(h).find(">a,>span").hasClass("aschild")&&"none"===e(h).children("ul").css("display")?(this._show(h[0],this._showAnim,this._hideAnim),h.removeClass("e-mhover").children("ul:first").find("li:first").addClass("e-mhover")):(this.element.find(".e-mhover >a,.e-mhover >span ").focus(),this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),t.isNullOrUndefined(e(h).find(">a").attr("href"))&&this._trigger("click",e.extend({events:l},l)))),27==i.keyCode&&("contextmenu"==this.model.menuType?this.hideContextMenu(i):this.element.find("li.e-list").removeClass("e-mhover"),this.element.find('li.e-list:has("> ul")').find("> ul:visible").parents("li.e-list").addClass("e-mhover"),this._closeAll()),!e(i.target).is(this.element)||!i.target.parentNode)return!1;h.length&&(o=h),e.inArray(o,this._disabledMenuItems)>-1||(n=e(o).children("a,span").text(),d=t.isNullOrUndefined(o)?"":e(o)[0].id,(this.element.find("li.e-mfocused.e-mhover").length||13==i.keyCode)&&(a=13==i.keyCode?h:this.element.find("li.e-mfocused.e-mhover")),l={text:n,element:o,targetElement:a,event:i,ID:d},this._trigger("keydown",e.extend({events:l},l))),this._activeElement=null,c=this.element.find(".e-mfocused")}},_OnFocusHandler:function(){"contextmenu"!=this.model.menuType&&!this.element.find(">li:first").hasClass("e-disable-item")&&this._isFocused&&0==this.element.find(".e-mhover").length?this.element.find(">li:first").addClass("e-mhover"):this._isFocused=!0,"contextmenu"!=this.model.menuType&&(this._activeElement=this.element.find(">li:first"))},_OnFocusOutHandler:function(){this._isFocused||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),this._isFocused=!1},_onDocumentClick:function(t){this.model.openOnClick&&(this._hoverOpen=!1),e(t.target).parents("ul.e-menu").is(this.element)||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll(),this._isFocused=!0)},_ContextMenuHandler:function(e){var t,i,s,n,l=!1;"taphold"==e.type?l=!0:e.button?l=2==e.button:e.which&&(l=3==e.which),t=e.target,l?(i=e,"taphold"==e.type&&(i="touchstart"==e.options.type?e.options.touches[0]:e.options),this._showSpeed,this.showContextMenu(null,null,t,i,!0)):this._isContextMenuOpen&&(s=this._hideAnim,n=this._hideSpeed,this.hideContextMenu(e,s,n))},_calculateContextMenuPosition:function(t){locationX=t.clientX+this.element.width()<e(window).width()?t.pageX:t.pageX-this.element.width(),locationY=t.clientY+this.element.height()<e(window).height()?t.pageY:t.clientY>this.element.height()?t.pageY-this.element.height():e(window).height()-this.element.outerHeight();var i="static"!=e("body").css("position")?e("body").offset():{left:0,top:0};return locationX-=i.left,locationY-=i.top,{X:locationX,Y:locationY}},_onDefaultPreventer:function(e){return e.preventDefault(),e.stopPropagation(),!1},_onContextClose:function(t){var i,s,n,l,o=this;this._isContextMenuOpen&&(i=!1,(e(t.target).is(this.element)||e(t.target).parents(".e-context").is(this.element))&&(i=!0),i||(s=this._hideAnim,n=this._hideSpeed,this.hideContextMenu(t,s,n),l=e(t.target).parents(),e.each(l,function(e,t){t.id,o._ContextTargetId})))}}),t.MenuType={NormalMenu:"normalmenu",ContextMenu:"contextmenu"},t.Direction={Left:"left",Right:"right",None:"none"},t.AnimationType={None:"none",Default:"default"}}),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
