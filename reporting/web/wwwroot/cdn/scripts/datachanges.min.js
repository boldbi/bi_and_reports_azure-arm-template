/*!
*  filename: ej.core.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";var s,a,n,l;t.version="14.4.0.15",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==i}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,s,a,n){if(!e||!a)return i;for(var l=e.split("."),r=window,o=0;o<l.length-1;o++)t.isNullOrUndefined(r[l[o]])&&(r[l[o]]={}),r=r[l[o]];return(n||t.isNullOrUndefined(r[l[o]]))&&(s="function"==typeof s?s:function(){},r[l[o]]=s,r[l[o]].prototype=a),r[l[o]]},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,s){var a,n,l;if(!s)return i;for(a=s,n=e.split("."),l=0;l<n.length&&!t.util.isNullOrUndefined(a);l++)a=a[n[l]];return a},createObject:function(e,s,a){for(var n,l=e.split("."),r=a||window,o=r,h=l.length,d=0;d<h;d++)n=l[d],d+1==h?o[n]=s===i?{}:s:t.isNullOrUndefined(o[n])&&(o[n]={}),o=o[n];return r},isNullOrUndefined:function(e){return e===i||null===e},print:function(i,s){var a,n,l=t.buildTag("div"),r=i.clone();l.append(r),s||(s=window.open("","print","height=452,width=1024,tabbar=no")),s.document.write("<!DOCTYPE html>"),a=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(n="",a.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),n+=i.outerHTML}),s.document.write("<html><head></head><body>"+n+l[0].innerHTML+"</body></html>")):(n="",s.document.write("<html><head>"),a.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),n+=i.outerHTML}),s.document.writeln(n+"</head><body>"),s.document.writeln(l[0].innerHTML+"</body></html>")),s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,s,a,n){var l,r=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],o=/#([_a-z]+[-_0-9a-z]+)/gi.exec(t);return o=o?o[o.length-1]:i,l=(l=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t))?l[l.length-1]:i,e(document.createElement(r)).attr(o?{id:o}:{}).addClass(l||"").css(a||{}).attr(n||{}).html(s||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return((t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))==i||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,a,n,l=e(t).parents().andSelf().filter(":hidden");return l&&(a={visibility:"hidden",display:"block"},n=[],l.each(function(){var e={};for(var t in a)e[t]=this.style[t],this.style[t]=a[t];n.push(e)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),l.each(function(e){var t=n[e];for(var i in a)this.style[i]=t[i]})),s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var a=e(t).attr(i);return null!=a?"true"==a.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),a=e.height(),n=e.offset().left,l=e.offset().left+s,r=e.offset().top,o=e.offset().top+a,h=.3*s,d=.3*a;return t<n+h&&i<r+d?"e-m-skew-topleft":t>l-h&&i<r+d?"e-m-skew-topright":t>l-h&&i>o-d?"e-m-skew-bottomright":t<n+h&&i>o-d?"e-m-skew-bottomleft":t>n+h&&i<r+d&&t<l-h?"e-m-skew-top":t<n+h?"e-m-skew-left":t>l-h?"e-m-skew-right":i>o-d?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,s,a=e.touches?e.touches[0]:e,n=a.pageX-t._pointX,l=a.pageY-t._pointY;Date.now();return t._pointX=a.pageX,t._pointY=a.pageY,t._distX+=n,t._distY+=l,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,a,n,l){for(var r=0;r<e.length;r++)t.listenTouchEvent(e[r],i[r],s[r],a,n,l)},listenTouchEvent:function(i,s,a,n,l,r){for(var o,h=n?"removeEventListener":"addEventListener",d=n?"off":"on",m=e(i),c=0;c<m.length;c++)switch(o=m[c],s){case"touchstart":t._bindEvent(o,h,s,a,"mousedown","MSPointerDown","pointerdown",r);break;case"touchmove":t._bindEvent(o,h,s,a,"mousemove","MSPointerMove","pointermove",r);break;case"touchend":t._bindEvent(o,h,s,a,"mouseup","MSPointerUp","pointerup",r);break;case"touchcancel":t._bindEvent(o,h,s,a,"mousecancel","MSPointerCancel","pointercancel",r);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(o)[d](s,a);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?l._on(e(o),s,a):o[h](s,a,!0)}},_bindEvent:function(t,i,s,a,n,l,r){e.support.hasPointer?t[i](window.navigator.pointerEnabled?r:l,a,!0):t[i](s,a,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),a=s.data("ejWidgets");a&&s[a]("destroy")})},getAttrVal:function(t,i,s){var a=e(t).attr(i);return null!=a?a:s},getOffset:function(t){var i,s={},a=t.offset()||{left:0,top:0};return e.extend(!0,s,a),"static"!=e("body").css("position")&&(i=e("body").offset(),s.left-=i.left,s.top-=i.top),s},getZindexPartial:function(i,s){var a,n,l;if(!t.isNullOrUndefined(i)&&i.length>0)return a=i.parents(),n=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&n.splice(n.index(s),1),e(n).each(function(e,t){a.push(t)}),l=Math.max.apply(l,e.map(a,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!l||l<1e4?l=1e4:l+=1,l},isValidAttr:function(t,i){var s;return void 0!==(t=e(t)[0])[i]||(s=!1,e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s)}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,a,n){var l=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(l=e(i).attr("type")),l&&(l=l.toLowerCase(),t.template[l])?t.template[l](this,i,s,a,n):t.template.render(this,i,s,a,n)},destroy:function(){var i,s,a,n;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(i=this.element.data("ejWidgets")||[],n=0;n<i.length;n++)i[n]==this.pluginName&&i.splice(n,1);for(i.length||this.element.removeData("ejWidgets");this._events&&(a=[],s=this._events.pop());){for(n=0;n<s[1].length;n++)e.isPlainObject(s[1][n])||a.push(s[1][n]);e.fn.off.apply(s[0],a)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),a={},n=s.length;a&&"function"!=typeof a;)a=s[--n];return s[n]=t.proxy(s[n],this),this._events.push([i,s,a,s[n]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,a){var n,l,r,o,h=this._events;if(!h||!h.length)return this;for("function"==typeof s&&(n=a,a=s,s=n),l=i.match(/\S+/g)||[""],r=0;r<h.length;r++)if((o=h[r])[0].length&&(!a||o[2]===a)&&(o[1][0]===i||l[0])&&(!s||o[1][1]===s)&&e.inArray(t[0],o[0])>-1){e.fn.off.apply(t,a?[i,s,o[3]]:[i,s]),h.splice(r,1);break}return this},_trigger:function(i,s){var a,n,l,r,o=null,h={};return e.extend(h,s),i in this.model&&(o=this.model[i]),o&&("string"==typeof o&&(o=t.util.getObject(o,window)),e.isFunction(o)&&(n=t.event(i,this.model,s),a=o.call(this,n),(l=this.model._applyScope)&&l.call(),s&&e.extend(s,n),n.cancel||!t.isNullOrUndefined(a)))?!1===a||n.cancel:(r=Boolean(s),(s=s||{}).originalEventType=i,s.type=this.pluginName+i,n=e.Event(s.type,t.event(s.type,this.model,s)),this.element.trigger(n),r&&e.extend(s,n),t.isOnWebForms&&0==n.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,h),n.cancel)},setModel:function(t,i){var a,n,l,r;if(!this._trigger("modelChange",{changes:t})){for(a in t){if(!i){if(this.model[a]===t[a]){delete t[a];continue}if(e.isPlainObject(t[a])&&(s(this.model[a],t[a]),e.isEmptyObject(t[a]))){delete t[a];continue}}if(this.dataTypes&&!0!==(n=this._isValidModelValue(a,this.dataTypes,t)))throw"setModel - Invalid input for property :"+a+" - "+n;this.model.notifyOnEachPropertyChanges&&this.model[a]!==t[a]&&(l={oldValue:this.model[a],newValue:t[a]},t[a]=this._trigger(a+"Change",l)?this.model[a]:l.newValue)}e.isEmptyObject(t)||(this._setFirst?((r=t.dataSource)&&delete t.dataSource,e.extend(!0,this.model,t),r&&(this.model.dataSource=r instanceof Array?r.slice():r,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(s,a,n){if(!s)return this.model;if(e.isPlainObject(s))return this.setModel(s,n);if("string"==typeof s){s=s.replace(/^model\./,"");var l=t.getObject(s,this.model);if(a===i&&!n)return l;if("enablePersistence"===s)return this._setState(a);if(n&&a===t.extensions.modelGUID)return this._setModel(t.createObject(s,t.getObject(s,this.model),{}));if(n||t.getObject(s,this.model)!==a)return this.setModel(t.createObject(s,a,{}),n)}return i},_isValidModelValue:function(e,t,i){var s,a,n,l=t[e],r=i[e];if(!l)return!0;if("string"==typeof l){if("enum"==l&&(i[e]=r?r.toString().toLowerCase():r,l="string"),"array"===l){if("[object Array]"===Object.prototype.toString.call(r))return!0}else if("data"===l||"parent"===l||typeof r===l)return!0;return"Expected type - "+l}if(r instanceof Array){for(a=0;a<r.length;a++)if(!0!==(s=this._isValidModelValue(e,t,r[a])))return" ["+a+"] - "+s;return!0}for(n in r)if(!0!==(s=this._isValidModelValue(n,l,r)))return n+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var i,s=this.observables,a=0;a<s.length;a++)i=t.getObject(s[a],e),t.isNullOrUndefined(i)||"function"!=typeof i||this._returnFn(e,s[a]);return JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e,i;if(this._ignoreOnPersist){for(e=r({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=r({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var s,a,n=null;if(window.localStorage?n=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(n=t.cookie.get("$ej$"+this.pluginName+this._id)),n&&(s=JSON.parse(n),this._restoreState&&(this._restoreState(s.customPersists),delete s.customPersists),!1===t.isNullOrUndefined(s)&&(t.isNullOrUndefined(s.ignoreOnPersist)?t.isNullOrUndefined(s.addToPersist)||(this._addToPersist=s.addToPersist,delete s.addToPersist):(this._ignoreOnPersist=s.ignoreOnPersist,delete s.ignoreOnPersist))),t.isNullOrUndefined(s)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,s);else{for(a in this._ignoreOnPersist)-1!==this._ignoreOnPersist[a].indexOf(".")?t.createObject(this._ignoreOnPersist[a],t.getObject(this._ignoreOnPersist[a],this.model),s):s[this._ignoreOnPersist[a]]=this.model[this._ignoreOnPersist[a]];this.model=s}!i&&n&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,s,a=[];if("object"==typeof e?a=e:"string"==typeof e&&a.push(e),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<a.length;t++)this._ignoreOnPersist.push(a[t]);else for(t=0;t<a.length;t++)s=this._addToPersist.indexOf(a[t]),this._addToPersist.splice(s,1)},addToPersist:function(t){var s,a,n=[];if("object"==typeof t?n=t:"string"==typeof t&&n.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],a=0;a<n.length;a++)s=this._ignoreOnPersist.indexOf(n[a]),this._ignoreOnPersist.splice(s,1);else for(a=0;a<n.length;a++)-1===e.inArray(n[a],this._addToPersist)&&this._addToPersist.push(n[a])},formatting:function(i,s,a){var n,l,r,o,h,d,m,c;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),a=t.preferredCulture(a)?a:"en-US",n=i,l=i.split("{0:"),h=i.split("}"),r=l[0],o=h[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:"))return null!=(d=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(i))&&null!=s?null!=r&&null!=o?r+t.format(s,d[2],a)+o:t.format(s,d[2],a):null!=s?s:"";if(n.startsWith("{")&&!n.startsWith("{0:")){var u=n.split(""),p=(s=(s||"")+"").split(""),_=/[0aA\*CN<>\?]/gm;for(m=0,c=0;m<u.length;m++)u[m]=_.test(u[m])?"{"+c+++"}":u[m];return String.format.apply(String,[u.join("")].concat(p)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),n):this.data.Value}},t.WidgetBase=function(){},s=function(t,i){for(var a in t)t[a]===i[a]&&delete i[a],e.isPlainObject(i[a])&&e.isPlainObject(t[a])&&s(t[a],i[a])},t.widget=function(s,n,h){var m,c,u;if("object"!=typeof s)u=h._rootCSS||t.getNameSpace(n),h=t.defineClass(n,function(i,l){var d,m,c,p,_,f,g,v,b,y;if(this.sfType=n,this.pluginName=s,this.instance=o,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(d in l)if(!0!==(m=this._isValidModelValue(d,this.dataTypes,l)))throw"setModel - Invalid input for property :"+d+" - "+m;for((c=i.data("ejWidgets")||[]).push(s),i.data("ejWidgets",c),_=0;t.widget.observables&&this.observables&&_<this.observables.length;_++)(p=t.getObject(this.observables[_],l))&&t.createObject(this.observables[_],t.widget.observables.register(p,this.observables[_],this,i),l);if(this.element=i.jquery?i:e(i),this.model=r(!0,{},h.prototype.defaults,l),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(u+" e-js").data(s,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(_ in window.localStorage)-1!=_.indexOf("$ej$")&&window.localStorage.removeItem(_);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion)for(f in document.cookie.split(/; */))-1!=f.indexOf("$ej$")&&t.cookie.set(f.split("=")[0],model,new Date);this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(l),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(v in g=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==v){g=!0;break}g&&this._keyPressed&&(b=i,y="keydown",this.keySettings&&(b=this.keySettings.getElement&&this.keySettings.getElement()||b,y=this.keySettings.event||y),this._on(b,y,function(e){if(this.model.keyConfigs){var t=a.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}}))}this._trigger("create")},h),e.fn[s]=function(a){for(var r,o,m=a,c=0;c<this.length;c++){var p=e(this[c]),_=p.data(s),f=_&&p.hasClass(u),g=null;if(this.length>0&&e.isPlainObject(m)&&(a=t.copyObject({},m)),f){if(a)if(o=[].slice.call(arguments,1),this.length>0&&o[0]&&"option"===m&&e.isPlainObject(o[0])&&(o[0]=t.copyObject({},o[0])),e.isPlainObject(a))_.setModel(a);else if(0!==a.indexOf("_")&&!t.isNullOrUndefined(g=t.getObject(a,_))||0===a.indexOf("model.")){if(!g||!e.isFunction(g)){if(1==arguments.length)return g;_.option(a,arguments[1]);continue}if((r=g.apply(_,o))!==i)return r}else l(n+": function/property - "+a+" does not exist")}else!0!==h.prototype._requiresID||e(this[c]).attr("id")||p.attr("id",d("ejControl_")),a&&"object"!=typeof a?l(s+": methods/properties can be accessed only after plugin creation"):(h.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in h.prototype.defaults&&"ejChart"!=s&&(!a||"locale"in a?t.isNullOrUndefined(a)&&((a={}).locale=t.setCulture().name):a.locale=t.setCulture().name),new h(p,a))}return-1!=s.indexOf("ejm")&&t.widget.registerInstance(p,s,n,h.prototype),this},t.widget.register(s,n,h.prototype);else for(m in h=n,s)(c=s[m])instanceof Array&&(h._rootCSS=c[1],c=c[0]),t.widget(m,c,h),s[m]instanceof Array&&(h._rootCSS="")},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,a){t.isNullOrUndefined(e[i])||l("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:a},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,a){i.push({element:e,pluginName:t,className:s,proto:a})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){var t,i,s,a;if(e&&e.length)for(t=0;t<e.length;t++)if((s=(i=e.eq(t).data()).ejWidgets)&&s.length)for(a=0;a<s.length;a++)i[s[a]]&&i[s[a]].destroy&&i[s[a]].destroy()},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},a={getActionFromCode:function(e,t,i,s,n){var l,r,o;for(l in i=i||!1,s=s||!1,n=n||!1,e)if("focus"!==l)for(r=a.getKeyObject(e[l]),o=0;o<r.length;o++)if(t===r[o].code&&i==r[o].isCtrl&&s==r[o].isShift&&n==r[o].isAlt)return l;return null},getKeyObject:function(t){for(var i,s,n,l={isCtrl:!1,isShift:!1,isAlt:!1},r=e.extend(!0,{},l),o=t.split(","),h=[],d=0;d<o.length;d++){if(i=null,-1!=o[d].indexOf("+"))for(s=o[d].split("+"),n=0;n<s.length;n++)i=a.getResult(e.trim(s[n]),l);else i=a.getResult(e.trim(o[d]),e.extend(!0,{},r));h.push(i)}return h},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i,s,a,n,l={},r=[],o={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(i in o)if(o.hasOwnProperty(i)&&(r=navigator.userAgent.match(o[i]))){if(l.name="opr"==r[1].toLowerCase()?"opera":r[1].toLowerCase(),l.version=r[2],l.culture={},l.culture.name=l.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(s=t.preferredCulture().name,a=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),n=0;navigator.languages&&n<navigator.languages.length&&(a=t.preferredCulture(navigator.languages[n])).language!=navigator.languages[n];n++);t.preferredCulture(s),e.extend(!0,l.culture,a)}!navigator.userAgent.match(/Trident\/7\./)||(l.name="msie");break}return l.isMSPointerEnabled="msie"==l.name&&l.version>9&&window.navigator.msPointerEnabled,l.pointerEnabled=window.navigator.pointerEnabled,l},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t,i,s=document.documentElement.style;if(e in s)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in s)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var r=t.copyObject=function(e,s){var a,n,l,o,h,d,m=2;for("boolean"!=typeof e&&(m=1),l=[].slice.call(arguments,m),1===m&&(s=e,e=i),o=0;o<l.length;o++)for(h in l[o])if(a=s[h],(n=l[o][h])!==i&&a!==n&&l[o]!==n&&s!==n)if(n instanceof Array)if(0===o&&e)for(s[h]=[],d=0;d<n.length;d++)r(!0,s[h],n);else s[h]=n.slice();else t.isPlainObject(n)?(s[h]=a||{},e?r(e,s[h],n):r(s[h],n)):s[h]=n;return s},o=function(){return this},h=0,d=function(e){return e+h++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,a,n){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var l={prop:n,index:a};return e(i).render(s,l)},t.isPlainObject=function(e){if(!e||t.DataManager!==i&&e instanceof t.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var s,a=t.support.isOwnLast;for(s in e)if(a)break;return s===i||e.hasOwnProperty(s)},n=!1,t.util.valueFunction=function(e){return function(s,a){var l=t.getObject(e,this.model);if(!1===n&&(n=t.getObject("observables.getValue",t.widget)),s===i)return t.isNullOrUndefined(n)?"function"==typeof l?l.call(this):l:n(l,a);"function"==typeof l?(this["ob.values"][e]=s,l.call(this,s)):t.createObject(e,s,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e,t=function(){this.a=1};for(e in t.prototype.b=1,new t)return"b"===e}(),outerHTML:document.createElement("div").outerHTML!==i},l=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},t.getRandomValue=function(e,s){var a,n;return e===i||s===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(n=new Uint16Array(1),window.crypto.getRandomValues(n),a=n[0]%(s-e)+e):a=Math.random()*(s-e)+e,0|a)},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,s=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;s.push(t[i])}return s},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,a=0;a<s.length;a++)if(0===s[a].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}()}),
/*!
*  filename: ej.datepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){var e,t,a;e=jQuery,(t=Syncfusion).widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date(1900,0,1),maxDate:new Date(2099,11,31),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(i){var s,a,n=!1,l=!1,r=!1;for(s in i)switch(s){case"dayHeaderFormat":this.model.dayHeaderFormat=i[s],n=l=!0;break;case"showPopupButton":this._renderDateIcon(i[s],!0);break;case"displayInline":this._setDisplayInline(i[s]),this.model.allowEdit||i[s]||!this._isInputBox()||this.element.on("mousedown",e.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[s])&&(i[s]=null),t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),i[s]=this.model.value):this._updateDateValue(i[s]),r=n=l=!0;break;case"specialDates":this.model.specialDates=i[s],this._createSpecialDateObject(),n=l=!0;break;case"fields":this.model.fields=i[s],this._mapField=this._getMapper(),n=l=!0;break;case"showTooltip":this.model.showTooltip=i[s],n=l=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[s],n=l=!0;break;case"highlightSection":this.model.highlightSection=i[s],n=l=!0;break;case"dateFormat":this.model.dateFormat=i[s],this._ensureValue();break;case"minDate":this._setMinDate(i[s]),i[s]=this.model.minDate,this._ensureValue(),r=n=l=!0;break;case"maxDate":this._setMaxDate(i[s]),i[s]=this.model.maxDate,this._ensureValue(),r=n=l=!0;break;case"locale":this.model.locale=i[s],this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(i[s]),this.model.value&&this._setDateValue(this.model.value),i[s]=this.model.locale,n=l=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[s],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[s],r=n=l=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[s],this._disbleMaualInput();break;case"width":this._setWidth(i[s]);break;case"height":this._setHeight(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":i[s]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(i[s]);break;case"showFooter":this._enableFooter(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":a=i[s],(parseInt(i[s])<0||parseInt(i[s])>6)&&(i[s]=this.culture.calendar.firstDay,a=-1),this.model.startDay=i[s],t.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=a,n=l=!0;break;case"startLevel":this.model.startLevel=i[s],n=l=!0;break;case"headerFormat":this.model.headerFormat=i[s],n=l=!0;break;case"depthLevel":this.model.depthLevel=i[s],n=l=!0;break;case"htmlAttributes":this._addAttr(i[s]);break;case"allowEdit":this._changeEditable(i[s]);break;case"tooltipFormat":this.model.tooltipFormat=i[s],n=l=!0;break;case"allowDrillDown":this._allowQuickPick(i[s]),n=l=!0;break;case"showDisabledRange":this._setRestrictDateState(i[s]);break;case"blackoutDates":this.model.blackoutDates=i[s],this._initDisableObj(this.model.blackoutDates),n=l=!0}r&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate),this._setWaterMark(),n&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),l&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isSupport=document.createElement("input").placeholder!=a,this._checkAttribute(),this._setValues(),this._createDatePicker(),this._setRestrictDateState(this.model.showDisabledRange),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=a&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,a,n;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(a=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(a=this.model.validationMessage[s]);else a=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=a?a:e.validator.messages[s]}},_checkAttribute:function(){for(var e,i,s=["min","max","readonly","disabled"],a=["minDate","maxDate","readOnly","enabled"],n=0;n<s.length;n++)e=this.element.attr(s[n]),i=a[n],t.isNullOrUndefined(e)||(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options[i]))&&(this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this[i](this.element,"blur",this._onFocusOut),this[i](this.element,"focus",this._onFocusIn),this[i](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(t){e(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",e.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){var t=e?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a&&"disabled"==e?s.disable():"readOnly"==a&&"readOnly"==e?s.model.readOnly=!0:"style"==a||"id"==a?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox()){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr(),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&e("#e-"+this._id).remove(),this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._resizeCalender(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this._createCalender(),this._setDisplayInline(this.model.displayInline),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?this.wrapper?this.wrapper.width(e):this.element.width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?this.wrapper?this.wrapper.height(e):this.element.height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var t,i;this._stopRefresh?this._stopRefresh=!1:(t=this.element.val(),i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t?this._parseDate(t,!0):this._parseDate(t),i=this._validateYearValue(i),this._setDateValue(i),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged())},_validateYearValue:function(e){if(null!=e){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>i&&e.setFullYear(this._calendarDate.getFullYear())}return e},_setFooterText:function(t){e(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(t){this.model.displayInline=t,t&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),e("body").append(this.sfCalendar),this._isOpen=!1),t?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(e(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&e(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?null:(e instanceof Date||(e=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||((t=this._checkJSONString(e))?t:null)),!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null)},_checkJSONString:function(e){if(isNaN(Date.parse(e))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e)return new Date(e);if("string"==typeof e)return this._dateFromISO(e)}},_dateFromISO:function(e){var t,i,s,a,n,l,r,o,h,d=this._extISORegex.exec(e)||this._basicISORegex.exec(e),m="",c="",u="";if(d){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(d[1])){m=this._dates[t][0];break}if(d[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(d[3])){c=(d[2]||" ")+this._times[i][0];break}for(d[4]&&this._zeroRegex.exec(d[4])&&(u="Z"),s=(m+c+u).match(this._tokens),n=[],r=0;r<s.length;r++)o=s[r],l=this._checkLiteral(s[r]),h=this._numberRegex[l?s[r].toLowerCase():o.length]||new RegExp("^\\d{1,"+o.length+"}"),(a=e.match(h))&&(e.substr(0,e.indexOf(a))>=0&&!l&&(s[r].indexOf("M")>=0?n.push(parseInt(a[0])-1):n.push(parseInt(a[0]))),e=e.slice(e.indexOf(a[0])+a[0].length));return new Date(n[0],n[1],n[2],n[3],n[4],n[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){if("string"==typeof e){var i=t.parseDate(e,this.model.dateFormat,this.model.locale);e=null!=i?i:new Date(e)}return e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=t.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox()){var i,s,a=this.element.is("input")?this.wrapper:this.element,n=this._getOffset(a),l=e(document).scrollTop()+e(window).height()-(n.top+e(a).outerHeight()),r=n.top-e(document).scrollTop(),o=this.sfCalendar.outerHeight(),h=this.sfCalendar.outerWidth(),d=n.left,m=a.outerHeight(),c=(a.height(),this._getZindexPartial()),u=o<l||o>r?n.top+m+3:n.top-o-3;i=e(document).scrollLeft()+e(window).width()-d,s=e(document).scrollLeft()+d+a.width(),(this.model.enableRTL||h>i&&h<d+a.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(d+=this.wrapper.width()-this.sfCalendar.width()),h>s&&(d=n.left),this.sfCalendar.css({left:d+"px",top:u+"px","z-index":c})}},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,i){var s=this._checkDateObject(e,i);null!=s?(this.isValidState=!0,this.model.value=new Date(s.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!t.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){(null!=this._validateValue()||!this.model.enableStrictMode)&&this.sfCalendar.find(".e-datepicker-days").is(":visible")&&this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0))},_validateValue:function(){var e;return e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e>=7&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_parseDate:function(e,i){var s=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=a&&""!=e&&1!=i&&t.format(t.parseDate(DateValue,s,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:t.parseDate(e,s,this.model.locale)},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){var t="string"==typeof e?this._parseDate(e):new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=e&&e.date?e.date:"date",t._tooltip=e&&e.tooltip?e.tooltip:"tooltip",t._icon=e&&e.iconClass?e.iconClass:"iconClass",t._custom=e&&e.cssClass?e.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return e?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,n,l,r,o,h;this.model.minDate!=a&&this.model.maxDate!=a&&((s=new Date(this.model.minDate.getTime())).setDate(1),(n=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(l=this._zeroTime(new Date)).setDate(1):l=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),l.getTime()<s.getTime()?l=s:l.getTime()>n.getTime()&&(l=n),r=this.displayedMonth,o=this.displayedYear,this.displayedMonth=l.getMonth(),this.displayedYear=l.getFullYear(),h=l,i&&(this.displayedMonth!=r||this.displayedYear!=o)&&(this._renderCalendar(this,h),this._dateValue=h,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&e("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){e("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){e("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i),this._renderCalendar(this),this._startLevel(this.model.startLevel),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),e(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?e(".e-header",this.sfCalendar).show():e(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?e(".e-footer",this.sfCalendar).show():e(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){e>=t?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){var i,s,a,n;if(this.model.readOnly||!this.model.enabled||e(t.target).hasClass("e-disable"))return!1;switch(t.preventDefault(),i=e("table",this.sfCalendar),s=this._navigateFrom(i),a=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev"),this._processNextPrevDate(a),e("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":n="month";break;case"e-dp-viewmonths":n="year";break;case"e-dp-viewyears":n="decade";break;case"e-dp-viewallyears":n="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:n,navigateFrom:s})},_processNextPrevDate:function(t){var i,a,n,l,r,o,h;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch((i=e("table",this.sfCalendar)).get(0).className){case"e-dp-viewdays":if(n=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0,this._addMonths(this._dateValue,t?-n:n),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),l=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(l.firstDay,this.model.minDate),this._nextArrowCondition(l.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if((r=this._dateValue).setFullYear(e(".e-datepicker-headertext",this.sfCalendar).text()),t){if(r.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(r.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,this._addYears(r,t?-1:1),this._renderCalendar(this,r),a=r.getFullYear(),e(".e-datepicker-headertext",this.sfCalendar).text(a),e("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide(),e(e(i).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(a,a);break;case"e-dp-viewyears":if((o=this._dateValue).setFullYear(e(i).find(".e-state-hover").text()),t){if(parseInt(e("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(e("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,e(i).find(".e-state-hover").hasClass("e-year-first")&&t||e(i).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(o.getFullYear()):e(i).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(o.getFullYear()+11):e(i).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(o.getFullYear()-11):this._dateValue.setFullYear(o.getFullYear()+(t?-10:10)),this._renderCalendar(this,this._dateValue),h=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),e(".e-datepicker-headertext",this.sfCalendar).text(h+1+" - "+(h+10)),e("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide(),e(e(i).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(e(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(h+1,h+10);break;case"e-dp-viewallyears":if(t){if(parseFloat(e("td.e-allyear-first",i.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),h=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),a=parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),e(".e-datepicker-headertext",this.sfCalendar).text(h+1+" - "+a),e("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide(),e(e(i).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(e(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(h+1,a)}this._layoutChanged()},_addFocus:function(t,i){var s,a,n="e-current-"+t;return"day"==t&&(n="current-month"),s=this.sfCalendar.find("tbody tr td."+n),"month"==t&&e(s).each(function(t,s){parseInt(e(s).attr("index"))!=parseInt(i)||(i=t)}),(a=s[i])||(a=s.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(a).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){var i,s,a;if(this.model.value instanceof Date){var n,l=this.sfCalendar.find("tbody tr td.e-current-"+t),r=this,o=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(e(".e-text",this.sfCalendar).text())&&e(l).each(function(t,i){parseInt(e(i).attr("index"))!=parseInt(r.model.value.getMonth())||(o=t)});break;case"year":i=this.model.value.getFullYear(),e(l).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(o=e)});break;case"allyear":s=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),a=s+1+" - "+(s+10),e(l).each(function(e,t){parseInt(t.innerHTML)!=parseInt(a)||(o=e)})}(n=l[o])&&(this.sfCalendar.find("table td").removeClass("e-active"),e(n).hasClass("e-hidedate")||e(n).addClass("e-active"))}},_setFocusByName:function(t,i){var s,a,n=this.sfCalendar.find("tbody tr td.e-current-"+t);return e(n).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(s=e)}),(a=n[s])||(a=n.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(a).addClass("e-state-hover"),this._setActiveState(t),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var i,s,a=e("table",this.sfCalendar),n=e("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(a),n){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(a.find(".e-state-hover")).getMonth()||this._getDateObj(a.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),s="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt(),this._startLevel("decade"),s="decade",this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt(),this._startLevel("century"),s="century",this._hoverAllYear=this._setFocusByName("allyear",i)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var t,i;switch(e("table",this.sfCalendar),e("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=t,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=t,i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var i,s,a=this.sfCalendar.find("tbody tr td.e-current-"+t),n=this._dateValue.getFullYear();e(a).each(function(e,t){parseInt(t.innerHTML)!=parseInt(n)||(i=e)}),(s=a[i])&&(e(s).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):e(s).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){var s,a;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),s=e(i.currentTarget)):s=i;var n,l,r=e("table",this.sfCalendar),o=e("table",this.sfCalendar).get(0).className,h=this;switch(navFrom=this._navigateFrom(r),o){case"e-dp-viewmonths":r.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(e(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate()),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget}),this._renderCalendar(this,this._dateValue),e("tbody",r).not(".e-datepicker-days,.e-week-header").hide(),e(e(r).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){h._addFocus("day",h._hoverDate||0),h._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),l="month";break;case"e-dp-viewyears":r.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),e("tbody,tr.e-week-header",r).not(".e-datepicker-months").hide(),t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),e(e(r).find(".e-datepicker-months")).fadeIn("fast",function(){h._addFocus("month",h._hoverMonth||0),h._animating=!1}),n=s.text(),e(".e-datepicker-headertext",this.sfCalendar).text(n),this._checkArrows(n,n),l="year";break;case"e-dp-viewallyears":a=s.text().split("-"),r.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),a[0]<this.model.minDate.getFullYear()?a[0]=this.model.minDate.getFullYear().toString():a[0]>this.model.maxDate.getFullYear()&&(a[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(a[0],0,1)),e("tbody,tr.e-week-header",r).not(".e-datepicker-years").hide(),e(e(r).find(".e-datepicker-years")).fadeIn("fast",function(){h._addFocus("year",h._hoverYear||0),h._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(a[0]+" - "+a[1]),this._checkArrows(a[0],a[1]),l="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.trim(a[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:l,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(t){var i,s,a,n,l=e("table",this.sfCalendar),r=e(".e-datepicker-headertext",this.sfCalendar),o=this._dateValue;switch(t){case"decade":l.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),e("tbody,tr.e-week-header",l).not(".e-datepicker-years").hide(),e(e(l).find(".e-datepicker-years")).show(),o=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:o,i=1+(n=parseInt(o.getFullYear())-(parseInt(o.getFullYear())%10+1)),s=n+10,r.text(i+" - "+s),this._checkArrows(i,s),this._hoverYear=this._setFocusByName("year",o.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,o),l.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),e("tbody,tr.e-week-header",l).not(".e-datepicker-allyears").hide(),e(e(l).find(".e-datepicker-allyears")).show(),a=(i=parseFloat(e("td.e-allyear-first",l.get(0)).text().split("-")[1])+1)+" - "+(s=parseFloat(e("td.e-allyear-last",l.get(0)).prev().text().split("-")[1])),r.text(a),this._checkArrows(i,s),n=parseInt(o.getFullYear())-(parseInt(o.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",n+1+" - "+(n+10));break;case"year":l.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),e("tbody,tr.e-week-header",l).hide(),e(e(l).find(".e-datepicker-months")).show(),i=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():o.getFullYear(),r.text(i),this._checkArrows(i,i),this._hoverMonth=o.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":l.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":e(i.find(".e-current-year,.e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),this._on(e(".e-current-month",this.sfCalendar),"click",e.proxy(this._onDepthSelectHandler,this));break;case"decade":e(i.find(".e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),e(".e-current-year",this.sfCalendar).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"century":e(i.find(".e-current-allyear")).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;e(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):(e(t.target).hasClass("e-current-year")||e(t.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML)))),this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,s){for(var a,n,l,r,o=function(e){return document.createElement(e)},h=0,d=0;d<3;d++){for(a=e(o("tr")),n=0;n<4;n++)l=e(o("td")).addClass("e-current-month e-state-default").attr({index:h}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[h++]),(s.getFullYear()<this.model.minDate.getFullYear()||s.getFullYear()>this.model.maxDate.getFullYear()||s.getFullYear()<=this.model.minDate.getFullYear()&&h<this.model.minDate.getMonth()+1||s.getFullYear()>=this.model.maxDate.getFullYear()&&h>this.model.maxDate.getMonth()+1)&&(l.addClass("e-hidedate"),l.removeClass("e-current-month")),a.append(l);t.append(a)}i.append(t),r=s.getFullYear(),this._checkArrows(r,r)},_datepickerYears:function(t,i,s){for(var a,n,l,r,o=function(e){return document.createElement(e)},h=parseInt(s)-(parseInt(s)%10+1),d=[],m=0;m<12;m++)d.push(h+m);for(a=0,n=0;n<3;n++){for(l=e(o("tr")),m=0;m<4;m++)(r=e(o("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==a?r.addClass("e-year-first e-current-year "):11==a?r.addClass("e-year-last e-current-year "):r.addClass("e-current-year e-state-default"),(d[a]<this.model.minDate.getFullYear()||d[a]>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-year")),r.html(d[a++]),l.append(r);t.append(l)}i.append(t),this._checkArrows(d[0],d[d.length])},_datepickerAllYears:function(t,i,s){for(var a,n,l,r,o=parseInt(s)-(parseInt(s)%100+10),h=[],d=this._isIE8||this._isIE9?"":"\n",m=0;m<12;m++)h.push(parseInt(o)+" -"+d+parseInt(o+9)),o+=10;for(a=0,n=0;n<3;n++){for(l=e(document.createElement("tr")),m=0;m<4;m++)(r=e(document.createElement("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==a?r.addClass("e-allyear-first e-current-allyear "):11==a?r.addClass("e-allyear-last e-current-allyear "):r.addClass("e-current-allyear e-state-default"),(parseInt(h[a].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(h[a].split("-\n")[0])>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-allyear")),r.html(h[a++]),l.append(r);t.append(l)}i.append(t)},_renderHeader:function(i){var s,a,n,l,r,o,h=e(document.createElement("thead")),d=t.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=i.model.dayHeaderFormat)for(s=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),a=this.Date.firstDayOfWeek;a<this.Date.firstDayOfWeek+7;a++)n=a%7,l=d.names[n],r="short"==i.model.dayHeaderFormat?d.namesAbbr[n]:"long"==i.model.dayHeaderFormat?l:d.namesShort[n],o=t.buildTag("th","",{},{scope:"col",abbr:l,date:l,title:this._formatter(l,"dddd"),class:0==n||6==n?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(r),s.append(o);return h.append(s)},_renderCalendar:function(i,s){var n,l,r,o,h,d,m,c,u;i=e.extend({},t.DatePicker.prototype.defaults,i),this.Date.firstDayOfWeek=this.model.startDay,n=s||(this._calendarDate?this._calendarDate:this._zeroTime(new Date)),(l=e("table",this.sfCalendar)).empty(),l.append(this._renderHeader(i)),r=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(r,l,n.getFullYear()),r=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(r,l,n.getFullYear());var p=i.model.month==a?n.getMonth():i.model.month,_=i.model.year||n.getFullYear(),f=new Date(_,p,1,0,0,0),g=this.Date.firstDayOfWeek-f.getDay()+1;g>1&&(g-=7),o=Math.ceil((-1*g+1+this._getDaysInMonth(f))/7),this._addDays(f,g-1),h=this._zeroTime(new Date),d=this._calendarDate,r=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(r,l,n),r=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var v=0,b=!0,y=!0;v++<o;){for(m=jQuery(document.createElement("tr")),c=0;c<7;c++){var w=f.getMonth()==p,D=this._isSpecialDates(f),C=this._checkDisableRange(f),k=this._getIndex,x=e(document.createElement("td")).html(D?"<span></span>"+f.getDate():f.getDate()+"").attr({date:f.toDateString(),title:this.model.showTooltip?D&&this.model.specialDates[k][this._mapField._tooltip]?this.model.specialDates[k][this._mapField._tooltip]:this._formatter(f,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((w?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(f)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(w&&f.getTime()==h.getTime()?"today ":""));x.find("span:first-of-type").addClass(D?this.model.specialDates[k][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[k][this._mapField._icon]+" ":"e-special-day":""),x.addClass(D&&this.model.specialDates[k][this._mapField._custom]?this.model.specialDates[k][this._mapField._custom]:""),C&&this._disableDates({date:f,element:x}),d.getTime()==f.getTime()&&w&&(x.hasClass("e-hidedate")||(this.model.value?(x.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&m.addClass("e-selected-week"),"month"==this.model.highlightSection&&r.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&m.addClass("e-work-week")):x.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(x.hasClass("e-hidedate")||x.addClass("e-state-hover"),this._hoverDate=f.getDate()-1)),u=!0,(f<this.model.minDate||f>this.model.maxDate)&&(x.addClass("e-hidedate"),x.removeClass("current-month"),this.model.showOtherMonths&&x.removeClass("other-month"),u=y=!1),w&&(u&&b&&(this._tempMinDate=f,b=!1,y=!0),y&&(this._tempMaxDate=f)),this._trigger("beforeDateCreate",{date:f,value:this._formatter(f,this.model.dateFormat),element:x}),m.append(x),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0)}r.append(m)}l.append(r),this._DRPdisableFade?(e(r).css("display","block"),e(r).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?e(r).css("display","block"):e(r).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(l.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(l.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!t.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(){var e,s,a;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(e=this._checkInstanceType(this.model.blackoutDates[i]))&&(s=e.getFullYear(),a=e.getMonth(),t.isNullOrUndefined(this._disableCollection[s])&&(this._disableCollection[s]=[]),-1==jQuery.inArray(a,this._disableCollection[s])&&this._disableCollection[s].push(a))},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;(t={row:null,col:null}).col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=3,a=4;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,s,a,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,s,a,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,s,a,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,a=7,i=this._changeRowCol(t,e.keyCode,s,a,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(t,i,s,a,n,l){var r,o,h,d,m,c={parent:null,child:null};switch(n){case"day":r="tbody.e-datepicker-days tr td.current-month",c.parent=".e-datepicker-days",c.child=".current-month";break;case"month":r="tbody.e-datepicker-months tr td.e-current-month",c.parent=".e-datepicker-months",c.child=".e-current-month";break;case"year":r="tbody.e-datepicker-years tr td.e-current-year",c.parent=".e-datepicker-years",c.child=".e-current-year";break;case"yearall":r="tbody.e-datepicker-allyears tr td.e-current-allyear",c.parent=".e-datepicker-allyears",c.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(r+":first");switch(i){case 36:return this.sfCalendar.find(r+":first");case 35:return this.sfCalendar.find(r+":last");case 38:if(l&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":nth-child("+t.col+"):last");t.row-=1}if((o=this._getCell(t,c)).length<=0){if(null!==(o=this._findVisible(t,c,"up")))return o;this._processNextPrevDate(!0),o=this.sfCalendar.find(r+":nth-child("+t.col+"):last")}return o;case 37:if(l)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":last");t={row:t.row-1,col:a}}if((o=this._getCell(t,c)).length<=0){if(null!==(o=this._findVisible(t,c,"left")))return o;this._processNextPrevDate(!0),o=this.sfCalendar.find(r+":last")}return o;case 39:if(l)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<a)t.col+=1;else{if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":first");t={row:t.row+1,col:1}}if((o=this._getCell(t,c)).length<=0){if(null!==(o=this._findVisible(t,c,"right")))return o;this._processNextPrevDate(!1),o=this.sfCalendar.find(r+":first")}return o;case 40:if(!l){if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":nth-child("+t.col+"):first");if(t.row+=1,(o=this._getCell(t,c)).length<=0){if(null!==(o=this._findVisible(t,c,"down")))return o;this._processNextPrevDate(!1),o=this.sfCalendar.find(r+":nth-child("+t.col+"):first")}return o}case 13:h=e("table",this.sfCalendar).get(0).className,d=this._getCell(t,c),m=e(d)[0],"e-dp-viewmonths"==h&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(m.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:d})):"e-dp-viewyears"==h&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==h&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(m.innerHTML))),this._onSetCancelDateHandler({type:null,target:d})):"e-dp-viewdays"==h?(this._backwardNavHandler(d),this._onSetCancelDateHandler({type:null,target:d})):this._backwardNavHandler(d)}return this._getCell(t,c)},_findVisible:function(e,t,s){var a=e.col,n=e.row,l=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td:nth-child("+a+")"),nextElement.length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?a++:a--:"down"==s?n++:n--,n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length||(a>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length&&(n++,a=1),a<=0&&(n--,a=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length),n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length))return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(l))return e.col=a,e.row=n,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){var s,a;if(this._isOpen)return!1;if(s=this,this._popupOpen=!0,a=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),s._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){s.model&&!s.model.displayInline&&e(document).on("mousedown",e.proxy(s._onDocumentClick,s))}),this._updateInputVal(),this._refreshLevel(a),this._trigger("open",{prevDate:a,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(i){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var s=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&i!=a&&"click"!=i.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){s._isOpen=!1,e(document).off("mousedown",e.proxy(s._onDocumentClick,s)),s._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(e(".e-next",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this._on(e(".e-prev",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))),this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this.model.showFooter&&this._on(e(".e-footer",this.sfCalendar),"click",this._setCurrDate),this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",e.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",e.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_onFocusOut:function(t){var i,s,a;this._isFocused=!1,i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),t),this.wrapper.removeClass("e-focus"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(i),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this.element.off("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),s=this.element.val(),a={prevDate:this._prevDate,value:s},this._specificFormat()?this._prevDate!=s&&this._setDateValue(s,!0):this._setDateValue(s),this.model.value||this._clearSelected(),this._trigger("focusOut",a),this._checkErrorClass()},_onFocusIn:function(t){this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(t),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){if(this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel){var t=this._stringToObject(this.element.val());(t=this._validateYearValue(t))&&(this._compareDate(e,t)||this._refreshPopup())}},_validateOnFocusOut:function(e,i){var s,a,n=null!=this._preValue?this._calendarDate:this._preValue,l=this._formatter(n,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=n:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),s=!1,a=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(this.isValidState=!1,a=!0,this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),a&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(l),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(e){if(13===e.keyCode){var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(t),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this._checkErrorClass()}},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(s=!1,this.isValidState=!1)}return s},_triggerChangeEvent:function(e){var t,i,s=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),i={prevDate:this._prevDate,value:s,isInteraction:!!e},t=this._specificFormat()&&e!=a&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=a&&"blur"==e.type?this.model.value:this._parseDate(s),t=this._validateYearValue(t),this._validateDate(t)||(t=null),this._compareDate(this._preValue,t)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(i.value=this.element.val(),this._trigger("_change",i)):(this._preValue=this.model.value=t,i.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",s),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),i.value=s,this._trigger("_change",i),i.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",i),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown&&this._trigger("dt_drilldown",e))},_onDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datewidget").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault(),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&(e(t.target).hasClass("e-disable")||e(t.target).hasClass("e-hidedate")))return!1;t&&t.type&&t.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(t),this._triggerChangeEvent(t),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t),t&&e(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DatePicker.Locale=t.DatePicker.Locale||{},t.DatePicker.Locale.default=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}),
/*!
*  filename: ej.timepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,open:null,close:null},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},show:function(){this.showDropdown||this._getInternalEvents||this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(e){var i,s;return e||(e=t.preferredCulture(this.model.locale).calendars.standard.patterns.t),(i=this._validateTimeFormat(e))&&(this.model.timeFormat=i,this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value?(this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value)):(this._setModelOption=!1,(s=this._localizeTime(this.element.val()))&&this._checkMinMax(s)&&(this.model.value=s,this.element.val(s)))),i},_getTimeFormat:function(){this.model.timeFormat=t.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt",this.seperator=this._getSeperator()},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(e)},_localize:function(e){var i=this._createObject(this.model.value,!0);this.model.locale=e,this._getTimeFormat(),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),i?(this.model.value=this._localizeTime(i),this.element.val(this.model.value)):(i=this._localizeTime(this.element.val()))&&this._checkMinMax(i)&&(this.model.value=i,this.element.val(i)),this._getAmPm()},_setLocalize:function(e){(e=t.preferredCulture(e))&&(this.model.locale="en"==e.name?"en-US":e.name,t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=t.preferredCulture(this.model.locale).calendars.standard.patterns.t))},_updateInput:function(){if(!t.isNullOrUndefined(this._options)){var e=this._localizeTime(this._options.value);t.isNullOrUndefined(e)||"string"==typeof e&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=""==this.element.val(),this._checkErrorClass())}},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime),this._minTimeObj||(this.model.minTime=t.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale)),this._maxTimeObj=this._createObject(this.model.maxTime),this._maxTimeObj||(this.model.maxTime=t.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var e=(new Date).setHours(0,0,0,0),i=(new Date).setHours(23,59,59,59);!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=t.format(this._createObject(e),this.model.timeFormat,this.model.locale)),!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=t.format(this._createObject(i),this.model.timeFormat,this.model.locale)),this._createMinMaxObj()},_init:function(e){if(this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._initialize(),this._render(),this._wireEvents(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()}),this._updateInput(),this._updateTextbox(),null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){this._options!==s&&(this._options.value!==s||this.model.value)||this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(i,s){!t.isNullOrUndefined(s.minTime)&&e.trim(s.minTime)&&this._isValid(s.minTime)&&(this.model.minTime=s.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes()),!t.isNullOrUndefined(s.maxTime)&&e.trim(s.maxTime)&&this._isValid(s.maxTime)&&(this.model.maxTime=s.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes()),this._validateMinMax(),this._createMinMaxObj(),t.isNullOrUndefined(s.minTime)||(s.minTime=this.model.minTime),t.isNullOrUndefined(s.maxTime)||(s.maxTime=this.model.maxTime),this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime))),i!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(e){var i,s,a,n,l=!1,r=this.model.value;for(i in e)switch(i){case"timeFormat":a=this._createObject(this.model.value),this._preTimeformat=this.model.timeFormat,s=this._timeFormat(e[i]),e[i]=this.model.timeFormat,s&&(this.seperator=this._getSeperator()),l=+a!=+this._createObject(this.model.value);break;case"locale":a=this._createObject(this.model.value),this._localize(e[i]),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),l=+a!=+this._createObject(this.model.value);break;case"interval":this.model.interval=e[i];break;case"cssClass":this._changeSkin(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"enableRTL":this._setRtl(e[i]);break;case"height":this._setHeight(e[i]);break;case"width":this.wrapper.width(e[i]),this._setListWidth();break;case"value":t.isPlainObject(e[i])&&(e[i]=null),this.model.value=t.format(this._createObject(e[i],!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e[i],!0)&&(n=this._isValid(e[i])?this._localizeTime(e[i]):e[i],this.element.val(n)),e[i]=this.model.value,l=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[i];break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=jsondata[key],null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=jsondata[key],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"popupHeight":this.model.popupHeight=e[i],this._setListHeight();break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"enabled":e[i]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(e[i]);break;case"disableTimeRanges":this.model.disableTimeRanges=e[i],this._initStartEnd(),this.model.value=t.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val()),l=!0}t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)||(this._setMinMaxTime(r,e),l=!0),t.isNullOrUndefined(e.showPopupButton)?!this.model.showPopupButton||!s&&t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)&&t.isNullOrUndefined(e.locale)&&t.isNullOrUndefined(e.interval)&&t.isNullOrUndefined(e.disableTimeRanges)||this._reRenderDropdown():this._showButton(e[i]),l&&(this._raiseChangeEvent(r,!0),e.value=this.model.value),this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value")),this._cloneElement.attr("name")||this.element.removeAttr("name"),this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0],this.timeIcon=null,this._disabledItems=[],this.popupList=null,this.focused=!1,this.start=0,this.end=0,this.min=null,this.max=null,this.incomplete=!1,this.downPosition=0,this._setLocalize(this.model.locale),this._setMinMax(),this._getAmPm(),this.showDropdown=!1,this._activeItem=0,this.isValidState=!0,this._manualFocus=!1,this._isIE7=this._checkIE7(),this._initStartEnd(),t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._getInternalEvents=!1,this._dateTimeInternal=!1,this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper(),this._setDimentions(),this._renderTimeIcon(),this._validateTimes(),this._createMinMaxObj(),this._renderDropdown(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this._enableMask(),this._checkErrorClass(),this.element.attr({"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value}),(this.model.showPopupButton||!t.isNullOrUndefined(this.popupList))&&this.ul.find("li").attr({tabindex:-1,"aria-selected":!1})},_renderWrapper:function(){this.element.addClass("e-input").attr("tabindex","0"),this.wrapper=t.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container)},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a&&"disabled"==e?s.disable():"readOnly"==a&&"readOnly"==e?s.model.readOnly=!0:"style"==a||"id"==a?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_initTimeValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setTimeValidation:function(){var i,s,a,n;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(a=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessages)s==n&&(a=this.model.validationMessages[s]);else a=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=a?a:e.validator.messages[s]}},_renderTimeIcon:function(){if(this.model.showPopupButton){this.timeIcon=t.buildTag("span.e-select").attr({role:"button","aria-label":"select"});var e=t.buildTag("span.e-icon e-arrow-sans-down").attr("role","presentation");this._isIE8&&(this.timeIcon.attr("unselectable","on"),e.attr("unselectable","on")),this.timeIcon.append(e),this.container.append(this.timeIcon).addClass("e-padding"),this._on(this.timeIcon,"mousedown",this._timeIconClick)}},_elementClick:function(){this.showDropdown||this._showResult()},_renderDropdown:function(){var i,s=e("#"+this.element[0].id+"_popup").get(0);if(s&&e(s).remove(),!this.model.showPopupButton||this.popupList)return!1;this.popupList=t.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,"aria-activedescendant":""}),t.isTouchDevice()||this.popupList.addClass("e-ntouch"),this.popup=this.popupList,this.ul=t.buildTag("ul.e-ul"),this._isIE8&&this.ul.attr("unselectable","on"),i=t.buildTag("div").append(this.ul),e("body").append(this.popupList.append(i)),this._renderLiTags(),this._setListHeight(),this._setListWidth(),this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css("display","none"),this._listSize=this.ul.find("li").length},_renderLiTags:function(){var i,s,a,n,l,r,o,h;for(this._disabledItems=[],n=6e4*this.model.interval,l=!t.isNullOrUndefined(this.model.disableTimeRanges)&&this.model.disableTimeRanges.length>0,i=this._minTimeObj,s=this._maxTimeObj,r=0;this._compareTime(s,i,!0);)a=this._localizeTime(i),(o=e(document.createElement("li")))[0].appendChild(document.createTextNode(a)),this._isIE8&&o.attr("unselectable","on"),l&&(this._ensureTimeRange(a)?(o.addClass("e-disable"),this._disabledItems.push(r)):o.removeClass("e-disable")),this.ul[0].appendChild(o[0]),i=new Date(i).getTime()+n,r++;h=this.ul.find("li"),t.isTouchDevice()||(this._on(h,"mouseenter",e.proxy(this._OnMouseEnter,this)),this._on(h,"mouseleave",e.proxy(this._OnMouseLeave,this))),this._on(h,"click",e.proxy(this._OnMouseClick,this))},_ensureTimeRange:function(e){if(!t.isNullOrUndefined(this.model.disableTimeRanges)){var s=this._makeDateTimeObj(e);for(i=0;i<this.model.disableTimeRanges.length;i++)if(+s>=+this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime)&&+s<=+this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime))return!0}return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)this._startTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime),this._endTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime)},_makeDateTimeObj:function(e){var i;if("string"==typeof e){var s=t.preferredCulture(this.model.locale).calendar.patterns.d,a=t.format(new Date("1/1/2000"),s,this.model.locale),n=t.parseDate(a+" "+e,s+" "+this.model.timeFormat);if(!n){if(i=new Date(e),!isNaN(Date.parse(i))&&!t.isNullOrUndefined(e))return this._setEmptyDate(e);n=new Date("1/1/2000 "+e)}return n}return e instanceof Date?this._setEmptyDate(e):null},_reRenderDropdown:function(){this.ul.empty(),this._renderLiTags(),this._refreshScroller(),this._changeActiveEle()},_refreshScroller:function(){var t="none"==this.popupList.css("display");this.popupList.css("height","auto"),this.popupList.find(".e-content, .e-vscroll").removeAttr("style"),this.popupList.find(".e-vscroll div").removeAttr("style"),t&&this.popupList.css("display","block"),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this._isIE8&&(e("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),e("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on")),t&&this.popupList.css("display","none")},_setListWidth:function(){if(this.popupList){var e=this.model.popupWidth;e&&"auto"!=e?this.popupList.css({width:e}):this.popupList.css({width:this.wrapper.width()})}this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"}),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.popupList.css({width:this.wrapper.width()}),this._setListPosition(),this._refreshScroller()},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),a=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),n=s.top-e(document).scrollTop(),l=this.popupList.outerHeight(),r=this.popupList.outerWidth(),o=s.left,h=i.outerHeight(),d=(h-i.height())/2,m=this._getZindexPartial(),c=(l<a||l>n?s.top+h+3:s.top-l-3)-d;t=e(document).scrollLeft()+e(window).width()-o,(this.model.enableRTL||r>t&&r<o+i.outerWidth())&&(o-=this.popupList.outerWidth()-i.outerWidth()),this.popupList.css({left:o+"px",top:c+"px","z-index":m})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.isValidState=!(this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)),this._setTime(this.model.value),this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange"),this._changeActiveEle(),this._preVal=this.element.val()},_setTime:function(e){var t=this._localizeTime(e);this.element.val(t),this.model.value=t},_timeFromISO:function(e){var t,i,s,a,n,l,r,o,h,d=this._extISORegex.exec(e)||this._basicISORegex.exec(e),m="",c="",u="";if(d){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(d[1])){m=this._dates[t][0];break}if(d[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(d[3])){c=(d[2]||" ")+this._times[i][0];break}for(d[4]&&this._zeroRegex.exec(d[4])&&(u="Z"),s=(m+c+u).match(this._tokens),n=[],r=0;r<s.length;r++)o=s[r],l=this._checkLiteral(s[r]),h=this._numberRegex[l?s[r].toLowerCase():o.length]||new RegExp("^\\d{1,"+o.length+"}"),(a=e.match(h))&&(e.substr(0,e.indexOf(a))>=0&&!l&&(s[r].indexOf("M")>=0?n.push(parseInt(a[0])-1):n.push(parseInt(a[0]))),e=e.slice(e.indexOf(a[0])+a[0].length));return new Date(n[0],n[1],n[2],n[3],n[4],n[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_setMask:function(){this.model.value=new Date,this._enableMask()},_validateTimes:function(){var e=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=e||"h:mm tt",this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM"),this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM"),this._isValid(this.model.value,!0)||(this.model.value=null),this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)),this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable()),this._addProperty(),this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(t){this.model.showPopupButton=t,t?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id}),"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"}),"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var t=new Date;t.setHours(0),this.ttAM=e.trim(this._localizeMeridian(t)),t.setHours(23),this.ttPM=e.trim(this._localizeMeridian(t))},_setDimentions:function(){this._setHeight(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(e){e&&this.wrapper.height(e),this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(t){var i=t.split(" "),s="";return 1==i.length||2==i.length?(e(i).each(function(t,i){s+=e.trim(i)+" "}),e.trim(s)):null},_getSeperator:function(){for(var e=this._getElePlace(),t=this.model.timeFormat.split(" ")[e.time],i=new RegExp("^[a-zA-Z0-9]+$"),s=0;s<t.length;s++)if(!i.test(t.charAt(s)))return t.charAt(s)},_checkInComplete:function(){var e=this._getCaretSelection(),t=this._getStartEnd(e),i="00",s=this._getSelectedValue(t),a=this._getCategory(t);e.end-e.start==this.element.val().length&&this._checkAll(),a&&"tt"!=a&&(this._findCategoryPosition(a),"__"==s?(("h"==a||"hh"==a)&&(i="12"),this._changeToDefault(i)):1!=a.length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))))},_checkAll:function(){for(var e,t=this._getElePlace(),i=this.model.timeFormat.split(" ")[t.time].split(this.seperator),s=0;s<i.length;s++)this._findCategoryPosition(i[s]),e=this._getSelectedValue({start:this.start,end:this.end}),1!=i[s].length&&1==e.length&&(e=this._changeWhole(e),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,e)))},_changeToDefault:function(e){var t,i;this.incomplete=!0,t=this.element[0].value,this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,e),!(i=this._checkExceedRange(this.target.value))||this._setTime(this.model[i]),this._setSelection(this.start,this.end),this._raiseChangeEvent(t)},_setSelection:function(e,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(e,t):i.createTextRange&&((i=i.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())},_getSelectedValue:function(e){return this.target.value.substring(e.start,e.end)},_getMinMax:function(e,t){"hh"==e||"h"==e?(this.min=1,this.max=11,t&&(this.max=12)):"HH"==e||"H"==e?(this.min=0,this.max=23):("mm"==e||"m"==e||"ss"==e||"s"==e)&&(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0,this.element.focus()},_targetFocus:function(t){this._clearRange(),t.preventDefault(),this.focused=!0,this.element.on("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false"),this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end)),this._manualFocus=!1,this._prevTimeVal=this.element.val(),this._raiseEvent("focusIn")},_targetBlur:function(){this.focused=!1,this.element.off("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.wrapper.removeClass("e-focus"),this.model.enableStrictMode||this.target.value.indexOf("_")>-1&&this.element.val(""),!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0):this.isValidState=!0,this._ensureValue(),this._raiseChangeEvent(),this._checkErrorClass(),this._raiseEvent("focusOut"),this.model.enableStrictMode||this._checkInComplete()},_clearRange:function(){var e=this.element[0];isNaN(e.selectionStart)||(e.selectionStart=0,e.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getCaretSelection:function(){var e,t,i,s,a=this.element[0],n=0,l=0;return isNaN(a.selectionStart)?(e=document.selection.createRange().getBookmark(),(t=a.createTextRange()).moveToBookmark(e),(i=a.createTextRange()).collapse(!0),i.setEndPoint("EndToStart",t),{start:s=i.text.length,end:s+t.text.length}):(n=a.selectionStart,l=a.selectionEnd,{start:Math.abs(n),end:Math.abs(l)})},_mouseDownOnInput:function(){this.focused||t.isTouchDevice()||this._focusElement(),this.downPosition=this._getCaretSelection(),e(document).on("mouseup",e.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(t){t.preventDefault(),e(document).off("mouseup",e.proxy(this._mouseUpOnInput,this));var i=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,i=this.downPosition),this.target.value!=this._getSelectedText()&&(i=this._getStartEnd(i),this._setSelection(i.start,i.end))},_getCategoryPosition:function(e){var t,i,s=0,a=0,n=this.target.value.split(" "),l=this._getElePlace(),r=this.seperator,o=!1,h=this.model.timeFormat.split(" ")[l.time].split(r),d=n[l.time].split(r);if(h.length>d.length)return{start:s,end:a,isValid:o};if("tt"==e)(n[l.tt]==this.ttAM||n[l.tt]==this.ttPM)&&(a=(s=0==l.tt?0:n[l.time].length+1)+n[l.tt].length,o=!0);else if(s=0==l.time?0:n[l.tt].length+1,-1!=(t=h.indexOf(e))){for(i=0;i<h.length&&(a=d[i].length+1,i!=t);i++)s+=a;a+=s-1,o=!0}return{start:s,end:a,isValid:o}},_getCategory:function(e){var t=this.model.timeFormat.split(" "),i=this.seperator,s=this._getElePlace();return e.isTT?t[s.tt]:t[s.time].split(i)[e.index]},_getStartEnd:function(e){for(var t,i=this.seperator,s=this.element.val().split(" "),a=0,n=0,l=tt=null,r=0;r<s.length;r++)if(s[r]!=this.ttAM&&s[r]!=this.ttPM){var o=s[r].split(i),h=a,d=a+o[0].length;for(t=0;t<o.length;t++){if(n=o[t].length+a,e.start<=n){l=t,tt=!1,r=s.length;break}a+=o[t].length+1}}else{if(e.start<=a+s[r].length){n=s[r].length+a,l=0,tt=!0,r=s.length;break}a+=s[r].length+1}return null==l&&(a=h,n=d,l=0,tt=!1),{start:a,end:n,index:l,isTT:tt}},_modifyValue:function(e){var t,i,s,a;this._isValid(this.target.value)&&(this.model.enableStrictMode||this._checkInComplete(),(t=this._getCaretSelection()).start==t.end?(s=this._getLeast(!0),a=this._getCategoryPosition(s),i=this._getStartEnd(a)):i=this._getStartEnd(t),this.start=i.start,this.end=i.end,this._changeValue(i,e))},_keyUpOnInput:function(e){e.preventDefault(),this._preVal!=this.element.val()&&(this._preVal=this.element.val())},_getNextCategory:function(t,i){var s,a,n=[],l=this.seperator,r=this.model.timeFormat.split(" ");return e(r).each(function(e,t){if("tt"==t)n.push(t);else{var i=t.split(l);n=i.concat(n)}}),-1!=(s=n.indexOf(t))?(a=i?0==s?n.length-1:s-1:s==n.length-1?0:s+1,n[a]):t},_getElePlace:function(){var e,t;return"tt"==this.model.timeFormat.split(" ")[0]?(e=1,t=0):(e=0,t=1),{time:e,tt:t}},_movePosition:function(e,t){var i,s=this._getStartEnd(e),a=this._getCategory(s);a||(a=this._getLeast(t)),i=this._getNextCategory(a,t),(s=this._getCategoryPosition(i)).isValid&&this._setSelection(s.start,s.end)},_findActiveIndex:function(){var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(e){var t,i,s,a,n,l,r,o,h,d,m,c,u,p,_,f,g,v,b,y;if(this.model.readOnly&&!this._readOnlyKeys(e)||(s=e.keyCode,this._getInternalEvents&&38!=s&&40!=s&&36!=s&&35!=s&&9!=s))return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&38!=s&&40!=s&&27!=s&&!this._readOnlyKeys(e))return!1;this.showDropdown&&(37==s||39==s)&&(e.keyCode=37==s?38:40)}switch(t=this._getCaretSelection(),y=this._getStartEnd(t),i=this._getCategory(y),e.keyCode){case 38:e.preventDefault(),this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),activeItem=this._getActiveItem(),activeItem.length&&this._selectTimeItem(activeItem)):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:e.preventDefault(),e.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:e.preventDefault(),t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:e.preventDefault(),t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:e.preventDefault(),this.showDropdown?(this._activeItem=0,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):(a=this._firstlastVal(!0),(n=this._getCategoryPosition(a)).isValid&&this._setSelection(n.start,n.end));break;case 35:e.preventDefault(),this.showDropdown?(this._activeItem=this._listSize+1,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),this._selectTimeItem(this._getActiveItem())):(l=this._firstlastVal(!1),(r=this._getCategoryPosition(l)).isValid&&this._setSelection(r.start,r.end));break;case 9:if(this._getInternalEvents)break;this._hideResult(),o=null,e.shiftKey&&t.start>0?o=!0:!e.shiftKey&&t.end<this.element.val().length&&(o=!1),null!=o&&(e.preventDefault(),this._checkInComplete(),this._movePosition(t,o));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:e.preventDefault(),this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;this.target.value!=this._getSelectedText()&&(e.preventDefault(),i&&"tt"!=i&&(this._findCategoryPosition(i),h=8==s&&t.start!=this.start,d=46==s&&t.end!=this.end,m=this.end-this.start,t.start==t.end&&1!=m||!h&&!d&&t.start==t.end?h?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):d&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end)):(c=this.start,u=this.end,this.element[0].value=this._replaceAt(this.target.value,c,u,"__"),p=u-c!=2?u+1:u,this._setSelection(c,p))))}_=this._getSelectedValue(y),f=e.keyCode?e.keyCode:e.charCode,e.keyCode>47&&e.keyCode<58?g=String.fromCharCode(f):e.keyCode>95&&e.keyCode<106&&(g=String.fromCharCode(f-48)),"tt"==i&&(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>64&&e.keyCode<91||e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)&&(e.preventDefault(),v=this._getCategoryPosition(i),this.start=v.start,this.end=v.end,this._changeAmPm(_),this._raiseChangeEvent()),this.target.value!=this._getSelectedText()||e.shiftKey||e.ctrlKey||e.altKey||(e.keyCode>64&&e.keyCode<91&&!this.model.enableStrictMode&&e.preventDefault(),(e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)&&(y=this._getStartEnd(t),this._setSelection(y.start,y.end))),!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106?"tt"!=i&&(this._getMinMax(i,!0),t.start==t.end?(this._findCategoryPosition(i),t.start==this.start?(b=g+_,this.element.val(this.model.minTime),y=this._getStartEnd(t),this._setSelection(y.start,y.end)):b=_+g,(b.length>2||!(Number(b)>=this.min&&this.max>=Number(b)))&&(this.model.enableStrictMode||e.preventDefault())):Number(g)>=this.min&&this.max>=Number(g)||this.model.enableStrictMode||e.preventDefault()):this._allowKeyCodes(e)||(this.model.enableStrictMode||8==e.keyCode||46==e.keyCode?e.stopPropagation():e.preventDefault())},_getSelectedText:function(){if(window.getSelection){var t=e("#"+this.element[0].id).get(0);return t.value.substring(t.selectionStart,t.selectionEnd)}return document.selection.createRange().text},_allowKeyCodes:function(e){return!((!e.ctrlKey||65!=e.keyCode&&67!=e.keyCode&&90!=e.keyCode&&89!=e.keyCode)&&9!=e.keyCode&&116!=e.keyCode&&13!=e.keyCode)},_readOnlyKeys:function(e){return!(35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&!this._allowKeyCodes(e))},_firstlastVal:function(e){var t,i=this.model.timeFormat.split(" "),s=this.seperator;return e?"tt"!=i[0]?i[0].split(s)[0]:"tt":"tt"!=i[0]?"tt":i[1]&&(t=i[1].split(s)).length?t[t.length-1]:"tt"},_mouseWheel:function(e){if(e.preventDefault(),this.model.readOnly)return!1;var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected(),this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var e=this._getActiveItem();e.length&&!e.hasClass("e-disable")&&e.addClass("e-active")},_disableItemSelectDown:function(t){return(null==t||t<0)&&(t=0),t<this._listSize?e.inArray(t,this._disabledItems)<0?t:this._disableItemSelectDown(t+1):this._listSize},_disableItemSelectUp:function(t){if((null==(t-=1)||t<0)&&(t=0),t<this._listSize){if(e.inArray(t,this._disabledItems)<0)return t+1;if(t>0)return this._disableItemSelectUp(t)}return 0},_getActiveItem:function(){return e(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(e){var i,s=!1;if(e.button?s=2==e.button:e.which&&(s=3==e.which),!s){if(e.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup(),i=this.element.val().length,t.isTouchDevice()||this._setSelection(i,i)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){this._raiseEvent("beforeOpen"),this._refreshPopup(),this.focused||t.isTouchDevice()||this._focusElement(),this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var i=this,s=this._vissibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){e(document).on("mousedown",e.proxy(i._OnDocumentClick,i))}),this.scrollerObj.setModel({scrollTop:s}),this.showDropdown=!0,this._listSize=this.ul.find("li").length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this.wrapper.addClass("e-active")},_hideResult:function(){this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_vissibleAndCalculateTop:function(){this.popupList.css({display:"block"});var e=this._calcScrollTop();return this.popupList.css({display:"none"}),e},_calcScrollTop:function(){this.ul.outerHeight();var e=this.ul.find("li").outerHeight();return e*this.ul.find("li.e-active").index()-(this.popupList.outerHeight()-e)/2},_changeActiveEle:function(){if(!this.model.showPopupButton||!this.popupList)return!1;var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem)||this._ensureTimeRange(i))&&(this._activeItem=0),this._addListHover()},_OnDocumentClick:function(t){e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-timewidget").is(this.wrapper)?(e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList))&&t.preventDefault():this._hideResult()},_OnWindowResize:function(){this._refreshPopup()},_OnMouseEnter:function(t){var i=t.target;this.ul.find("li").removeClass("e-hover"),e(i).hasClass("e-disable")||e(i).addClass("e-hover")},_OnMouseLeave:function(){(!this._dateTimeInternal||this.model.value)&&this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(t){t.preventDefault(),e(t.target).hasClass("e-disable")||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=e(t.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),e(t.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(e(t.target))),this._showhidePopup())},_selectTimeItem:function(e){this._beforeChange(e),this._raiseChangeEvent()&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(e){"least"==e&&(e=this._getLeast(!0));var t=this._getCategoryPosition(e);this.start=t.start,this.end=t.end},_getLeast:function(t){var i=this.model.timeFormat.split(" "),s=this.seperator,a=null;return e(i).each(function(e,i){if("tt"!=i){var n=i.split(s);a=t?n[n.length-1]:n[0]}}),a},_changeValue:function(e,s){this.target.value;var a,n,l=this._getCategory(e);if(!l)return!1;if(this._setSelection(this.start,this.end),a=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(a!=this.ttAM&&a!=this.ttPM){if(a=this._changeCurrentValue(a,l,s),1!=l.length&&(a=this._changeWhole(a)),this._findCategoryPosition(l),this.element.val(this._replaceAt(this.target.value,this.start,this.end,a)),this.end=this.start+a.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var r=this._createObject(this.target.value),o=r.getHours(),h=s?this._startTime:this._endTime,d=s?this._endTime:this._startTime;if(!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)(h[i].getHours()===o||+r>=+this._startTime[i]&&+r<=+this._endTime[i])&&(this.target.value=this._localizeTime(d[i]),this._setSelection(this.start,this.end),this._changeValue(e,s))}}else this._changeAmPm(a);else n=this._checkExceedRange(this.target.value),this._setTime(this.model[n]),this._findCategoryPosition(l),this._setSelection(this.start,this.end);this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(l),this._setSelection(this.start,this.end))},_checkMinMax:function(e){var t=this._checkExceedRange(e);return null==t&&(t=!1),!t},_checkExceedRange:function(e){if(e){if(this.model.minTime&&!this._compareTime(e,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,e,!0))return"maxTime"}return null},_changeWhole:function(e){return e>9?""+e:"0"+e},_changeAmPm:function(e){e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)),this._setSelection(this.start,this.end)},_changeMinute:function(e){var t,i=this._getExactFormat(["mm","m"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t=this.min,this._changeHour(e)):t+=1:t==this.min?(t=this.max,this._changeHour(e)):t-=1,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_changeHour:function(e){var t,i=this._getExactFormat(["hh","h","HH","H"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t+=1,this._changeMeridian()):t>this.max?t=this.min:t+=1:t==this.min?t=this.max+1:t>this.max?(t=this.max,this._changeMeridian()):t-=1,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_getExactFormat:function(e){for(var t=this.model.timeFormat,i=0;i<e.length;i++)if(-1!=t.indexOf(e[i]))return e[i];return null},_changeMeridian:function(){var e;-1!=this.model.timeFormat.indexOf("tt")&&(this._findCategoryPosition("tt"),e=(e=this.target.value.substring(this.start,this.end))==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)))},_changeCurrentValue:function(e,t,i){e=Number(e);var s=t,a=1,n=!0;return this._getMinMax(s),"hh"==s||"h"==s||"HH"==s||"H"==s?a=this.model.hourInterval:"mm"==s||"m"==s?a=this.model.minutesInterval:("ss"==s||"s"==s)&&(a=this.model.secondsInterval),a<=0||(i?(("hh"==s||"h"==s)&&e>this.max?e=this.min-1+a:e<this.max?e+=a:(n=!1,"hh"!=s&&"h"!=s?e=this.min-1+a:e+=a,this._changeAdjacent(s,i)),"hh"!=s&&"h"!=s||e!=this.max+1?e>this.max+1&&(e-=this.max+1,n&&this._changeAdjacent(s,i)):n&&this._changeAdjacent(s,i),"hh"!=s&&"h"!=s&&e==this.max+1&&(e=this.min,n&&this._changeAdjacent(s,i))):("hh"!=s&&"h"!=s&&e>this.min||("hh"==s||"h"==s)&&e>this.min&&e<=this.max?e-=a:"hh"!=s&&"h"!=s||e!=this.min?(n=!1,e=this.max+1-a,this._changeAdjacent(s,i)):e=this.max+2-a,e<this.min&&(e+=this.max+1,n&&this._changeAdjacent(s,i)))),e},_changeAdjacent:function(e,t){"ss"==e||"s"==e?this._changeMinute(t):"mm"==e||"m"==e?this._changeHour(t):("hh"==e||"h"==e||"HH"==e||"H"==e)&&this._changeMeridian()},_valueChange:function(){this._raiseChangeEvent()},_beforeChange:function(e){return this._raiseEvent("beforeChange")||this.element.val(e.text()),!0},_raiseChangeEvent:function(e,t){return e=e===s?this.model.value:e,this._previousValue=e,current=this.target.value?this.target.value:null,e!=current&&(this.isValidState=!!(this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value),this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value!=this._previousValue&&(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0))},_raiseEvent:function(e,t){var i={value:this.model.value,prevTime:this._previousValue};return"change"==e&&(i.isInteraction=!t),this._trigger(e,i)},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e>=7&&e<8)return!0}return!1},_replaceAt:function(e,t,i,s){return e.substring(0,t)+s+e.substring(i)},_localizeTime:function(i){return i?e.trim(t.format(this._createObject(i),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(i){return e.trim(t.format(i,"tt",this.model.locale))},_compareTime:function(e,t,i){return(i=!!i)?this._parse(e)>=this._parse(t):this._parse(e)>this._parse(t)},_isValid:function(e,t){return(e=this._createObject(e,t))&&"function"==typeof e.getTime&&isFinite(e.getTime())},_parse:function(e){return Date.parse(this._createObject(e))},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_createObject:function(e,i){var s,a,n=null;if("string"==typeof e){var l=this._setModelOption?this._preTimeformat:this.model.timeFormat,r=t.preferredCulture(this.model.locale).calendar.patterns.d,o=t.format(new Date("1/1/2000"),r,this.model.locale);n=t.parseDate(o+" "+e,r+" "+l,this.model.locale),(this._extISORegex.exec(e)||this._basicISORegex.exec(e))&&(this.model.value=n=this._timeFromISO(e)),this._setModelOption=!1,n||(s=new Date(e),n=isNaN(Date.parse(s))||t.isNullOrUndefined(e)?this._dateTimeInternal&&""!=e?new Date("1/1/2000 "+e):null:this._setEmptyDate(e))}else"number"==typeof e?n=new Date(e):e instanceof Date&&(n=this._setEmptyDate(e));return n&&!this._dateTimeInternal&&i&&(a=this._localizeTime(n),this._ensureTimeRange(a)&&(n=null)),n},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"mousedown",this._mouseDownOnInput),this._on(this.element,"keydown",this._keyDownOnInput),this._on(this.element,"keyup",this._keyUpOnInput)}})}),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
