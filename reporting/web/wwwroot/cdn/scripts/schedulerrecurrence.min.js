/*!
*  filename: ej.core.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";var s,a,n,r;t.version="14.4.0.15",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==i}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,s,a,n){if(!e||!a)return i;for(var r=e.split("."),o=window,l=0;l<r.length-1;l++)t.isNullOrUndefined(o[r[l]])&&(o[r[l]]={}),o=o[r[l]];return(n||t.isNullOrUndefined(o[r[l]]))&&(s="function"==typeof s?s:function(){},o[r[l]]=s,o[r[l]].prototype=a),o[r[l]]},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,s){var a,n,r;if(!s)return i;for(a=s,n=e.split("."),r=0;r<n.length&&!t.util.isNullOrUndefined(a);r++)a=a[n[r]];return a},createObject:function(e,s,a){for(var n,r=e.split("."),o=a||window,l=o,d=r.length,h=0;h<d;h++)n=r[h],h+1==d?l[n]=s===i?{}:s:t.isNullOrUndefined(l[n])&&(l[n]={}),l=l[n];return o},isNullOrUndefined:function(e){return e===i||null===e},print:function(i,s){var a,n,r=t.buildTag("div"),o=i.clone();r.append(o),s||(s=window.open("","print","height=452,width=1024,tabbar=no")),s.document.write("<!DOCTYPE html>"),a=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(n="",a.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),n+=i.outerHTML}),s.document.write("<html><head></head><body>"+n+r[0].innerHTML+"</body></html>")):(n="",s.document.write("<html><head>"),a.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),n+=i.outerHTML}),s.document.writeln(n+"</head><body>"),s.document.writeln(r[0].innerHTML+"</body></html>")),s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,s,a,n){var r,o=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],l=/#([_a-z]+[-_0-9a-z]+)/gi.exec(t);return l=l?l[l.length-1]:i,r=(r=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t))?r[r.length-1]:i,e(document.createElement(o)).attr(l?{id:l}:{}).addClass(r||"").css(a||{}).attr(n||{}).html(s||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return((t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))==i||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,a,n,r=e(t).parents().andSelf().filter(":hidden");return r&&(a={visibility:"hidden",display:"block"},n=[],r.each(function(){var e={};for(var t in a)e[t]=this.style[t],this.style[t]=a[t];n.push(e)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),r.each(function(e){var t=n[e];for(var i in a)this.style[i]=t[i]})),s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var a=e(t).attr(i);return null!=a?"true"==a.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),a=e.height(),n=e.offset().left,r=e.offset().left+s,o=e.offset().top,l=e.offset().top+a,d=.3*s,h=.3*a;return t<n+d&&i<o+h?"e-m-skew-topleft":t>r-d&&i<o+h?"e-m-skew-topright":t>r-d&&i>l-h?"e-m-skew-bottomright":t<n+d&&i>l-h?"e-m-skew-bottomleft":t>n+d&&i<o+h&&t<r-d?"e-m-skew-top":t<n+d?"e-m-skew-left":t>r-d?"e-m-skew-right":i>l-h?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,s,a=e.touches?e.touches[0]:e,n=a.pageX-t._pointX,r=a.pageY-t._pointY;Date.now();return t._pointX=a.pageX,t._pointY=a.pageY,t._distX+=n,t._distY+=r,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,a,n,r){for(var o=0;o<e.length;o++)t.listenTouchEvent(e[o],i[o],s[o],a,n,r)},listenTouchEvent:function(i,s,a,n,r,o){for(var l,d=n?"removeEventListener":"addEventListener",h=n?"off":"on",c=e(i),m=0;m<c.length;m++)switch(l=c[m],s){case"touchstart":t._bindEvent(l,d,s,a,"mousedown","MSPointerDown","pointerdown",o);break;case"touchmove":t._bindEvent(l,d,s,a,"mousemove","MSPointerMove","pointermove",o);break;case"touchend":t._bindEvent(l,d,s,a,"mouseup","MSPointerUp","pointerup",o);break;case"touchcancel":t._bindEvent(l,d,s,a,"mousecancel","MSPointerCancel","pointercancel",o);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(l)[h](s,a);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?r._on(e(l),s,a):l[d](s,a,!0)}},_bindEvent:function(t,i,s,a,n,r,o){e.support.hasPointer?t[i](window.navigator.pointerEnabled?o:r,a,!0):t[i](s,a,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),a=s.data("ejWidgets");a&&s[a]("destroy")})},getAttrVal:function(t,i,s){var a=e(t).attr(i);return null!=a?a:s},getOffset:function(t){var i,s={},a=t.offset()||{left:0,top:0};return e.extend(!0,s,a),"static"!=e("body").css("position")&&(i=e("body").offset(),s.left-=i.left,s.top-=i.top),s},getZindexPartial:function(i,s){var a,n,r;if(!t.isNullOrUndefined(i)&&i.length>0)return a=i.parents(),n=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&n.splice(n.index(s),1),e(n).each(function(e,t){a.push(t)}),r=Math.max.apply(r,e.map(a,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!r||r<1e4?r=1e4:r+=1,r},isValidAttr:function(t,i){var s;return void 0!==(t=e(t)[0])[i]||(s=!1,e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s)}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,a,n){var r=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(r=e(i).attr("type")),r&&(r=r.toLowerCase(),t.template[r])?t.template[r](this,i,s,a,n):t.template.render(this,i,s,a,n)},destroy:function(){var i,s,a,n;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(i=this.element.data("ejWidgets")||[],n=0;n<i.length;n++)i[n]==this.pluginName&&i.splice(n,1);for(i.length||this.element.removeData("ejWidgets");this._events&&(a=[],s=this._events.pop());){for(n=0;n<s[1].length;n++)e.isPlainObject(s[1][n])||a.push(s[1][n]);e.fn.off.apply(s[0],a)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),a={},n=s.length;a&&"function"!=typeof a;)a=s[--n];return s[n]=t.proxy(s[n],this),this._events.push([i,s,a,s[n]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,a){var n,r,o,l,d=this._events;if(!d||!d.length)return this;for("function"==typeof s&&(n=a,a=s,s=n),r=i.match(/\S+/g)||[""],o=0;o<d.length;o++)if((l=d[o])[0].length&&(!a||l[2]===a)&&(l[1][0]===i||r[0])&&(!s||l[1][1]===s)&&e.inArray(t[0],l[0])>-1){e.fn.off.apply(t,a?[i,s,l[3]]:[i,s]),d.splice(o,1);break}return this},_trigger:function(i,s){var a,n,r,o,l=null,d={};return e.extend(d,s),i in this.model&&(l=this.model[i]),l&&("string"==typeof l&&(l=t.util.getObject(l,window)),e.isFunction(l)&&(n=t.event(i,this.model,s),a=l.call(this,n),(r=this.model._applyScope)&&r.call(),s&&e.extend(s,n),n.cancel||!t.isNullOrUndefined(a)))?!1===a||n.cancel:(o=Boolean(s),(s=s||{}).originalEventType=i,s.type=this.pluginName+i,n=e.Event(s.type,t.event(s.type,this.model,s)),this.element.trigger(n),o&&e.extend(s,n),t.isOnWebForms&&0==n.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,d),n.cancel)},setModel:function(t,i){var a,n,r,o;if(!this._trigger("modelChange",{changes:t})){for(a in t){if(!i){if(this.model[a]===t[a]){delete t[a];continue}if(e.isPlainObject(t[a])&&(s(this.model[a],t[a]),e.isEmptyObject(t[a]))){delete t[a];continue}}if(this.dataTypes&&!0!==(n=this._isValidModelValue(a,this.dataTypes,t)))throw"setModel - Invalid input for property :"+a+" - "+n;this.model.notifyOnEachPropertyChanges&&this.model[a]!==t[a]&&(r={oldValue:this.model[a],newValue:t[a]},t[a]=this._trigger(a+"Change",r)?this.model[a]:r.newValue)}e.isEmptyObject(t)||(this._setFirst?((o=t.dataSource)&&delete t.dataSource,e.extend(!0,this.model,t),o&&(this.model.dataSource=o instanceof Array?o.slice():o,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(s,a,n){if(!s)return this.model;if(e.isPlainObject(s))return this.setModel(s,n);if("string"==typeof s){s=s.replace(/^model\./,"");var r=t.getObject(s,this.model);if(a===i&&!n)return r;if("enablePersistence"===s)return this._setState(a);if(n&&a===t.extensions.modelGUID)return this._setModel(t.createObject(s,t.getObject(s,this.model),{}));if(n||t.getObject(s,this.model)!==a)return this.setModel(t.createObject(s,a,{}),n)}return i},_isValidModelValue:function(e,t,i){var s,a,n,r=t[e],o=i[e];if(!r)return!0;if("string"==typeof r){if("enum"==r&&(i[e]=o?o.toString().toLowerCase():o,r="string"),"array"===r){if("[object Array]"===Object.prototype.toString.call(o))return!0}else if("data"===r||"parent"===r||typeof o===r)return!0;return"Expected type - "+r}if(o instanceof Array){for(a=0;a<o.length;a++)if(!0!==(s=this._isValidModelValue(e,t,o[a])))return" ["+a+"] - "+s;return!0}for(n in o)if(!0!==(s=this._isValidModelValue(n,r,o)))return n+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var i,s=this.observables,a=0;a<s.length;a++)i=t.getObject(s[a],e),t.isNullOrUndefined(i)||"function"!=typeof i||this._returnFn(e,s[a]);return JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e,i;if(this._ignoreOnPersist){for(e=o({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=o({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var s,a,n=null;if(window.localStorage?n=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(n=t.cookie.get("$ej$"+this.pluginName+this._id)),n&&(s=JSON.parse(n),this._restoreState&&(this._restoreState(s.customPersists),delete s.customPersists),!1===t.isNullOrUndefined(s)&&(t.isNullOrUndefined(s.ignoreOnPersist)?t.isNullOrUndefined(s.addToPersist)||(this._addToPersist=s.addToPersist,delete s.addToPersist):(this._ignoreOnPersist=s.ignoreOnPersist,delete s.ignoreOnPersist))),t.isNullOrUndefined(s)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,s);else{for(a in this._ignoreOnPersist)-1!==this._ignoreOnPersist[a].indexOf(".")?t.createObject(this._ignoreOnPersist[a],t.getObject(this._ignoreOnPersist[a],this.model),s):s[this._ignoreOnPersist[a]]=this.model[this._ignoreOnPersist[a]];this.model=s}!i&&n&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,s,a=[];if("object"==typeof e?a=e:"string"==typeof e&&a.push(e),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<a.length;t++)this._ignoreOnPersist.push(a[t]);else for(t=0;t<a.length;t++)s=this._addToPersist.indexOf(a[t]),this._addToPersist.splice(s,1)},addToPersist:function(t){var s,a,n=[];if("object"==typeof t?n=t:"string"==typeof t&&n.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],a=0;a<n.length;a++)s=this._ignoreOnPersist.indexOf(n[a]),this._ignoreOnPersist.splice(s,1);else for(a=0;a<n.length;a++)-1===e.inArray(n[a],this._addToPersist)&&this._addToPersist.push(n[a])},formatting:function(i,s,a){var n,r,o,l,d,h,c,m;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),a=t.preferredCulture(a)?a:"en-US",n=i,r=i.split("{0:"),d=i.split("}"),o=r[0],l=d[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:"))return null!=(h=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(i))&&null!=s?null!=o&&null!=l?o+t.format(s,h[2],a)+l:t.format(s,h[2],a):null!=s?s:"";if(n.startsWith("{")&&!n.startsWith("{0:")){var u=n.split(""),p=(s=(s||"")+"").split(""),_=/[0aA\*CN<>\?]/gm;for(c=0,m=0;c<u.length;c++)u[c]=_.test(u[c])?"{"+m+++"}":u[c];return String.format.apply(String,[u.join("")].concat(p)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),n):this.data.Value}},t.WidgetBase=function(){},s=function(t,i){for(var a in t)t[a]===i[a]&&delete i[a],e.isPlainObject(i[a])&&e.isPlainObject(t[a])&&s(t[a],i[a])},t.widget=function(s,n,d){var c,m,u;if("object"!=typeof s)u=d._rootCSS||t.getNameSpace(n),d=t.defineClass(n,function(i,r){var h,c,m,p,_,f,v,g,y,b;if(this.sfType=n,this.pluginName=s,this.instance=l,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(h in r)if(!0!==(c=this._isValidModelValue(h,this.dataTypes,r)))throw"setModel - Invalid input for property :"+h+" - "+c;for((m=i.data("ejWidgets")||[]).push(s),i.data("ejWidgets",m),_=0;t.widget.observables&&this.observables&&_<this.observables.length;_++)(p=t.getObject(this.observables[_],r))&&t.createObject(this.observables[_],t.widget.observables.register(p,this.observables[_],this,i),r);if(this.element=i.jquery?i:e(i),this.model=o(!0,{},d.prototype.defaults,r),this.model.keyConfigs=o(this.keyConfigs),this.element.addClass(u+" e-js").data(s,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(_ in window.localStorage)-1!=_.indexOf("$ej$")&&window.localStorage.removeItem(_);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion)for(f in document.cookie.split(/; */))-1!=f.indexOf("$ej$")&&t.cookie.set(f.split("=")[0],model,new Date);this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(r),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(g in v=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==g){v=!0;break}v&&this._keyPressed&&(y=i,b="keydown",this.keySettings&&(y=this.keySettings.getElement&&this.keySettings.getElement()||y,b=this.keySettings.event||b),this._on(y,b,function(e){if(this.model.keyConfigs){var t=a.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}}))}this._trigger("create")},d),e.fn[s]=function(a){for(var o,l,c=a,m=0;m<this.length;m++){var p=e(this[m]),_=p.data(s),f=_&&p.hasClass(u),v=null;if(this.length>0&&e.isPlainObject(c)&&(a=t.copyObject({},c)),f){if(a)if(l=[].slice.call(arguments,1),this.length>0&&l[0]&&"option"===c&&e.isPlainObject(l[0])&&(l[0]=t.copyObject({},l[0])),e.isPlainObject(a))_.setModel(a);else if(0!==a.indexOf("_")&&!t.isNullOrUndefined(v=t.getObject(a,_))||0===a.indexOf("model.")){if(!v||!e.isFunction(v)){if(1==arguments.length)return v;_.option(a,arguments[1]);continue}if((o=v.apply(_,l))!==i)return o}else r(n+": function/property - "+a+" does not exist")}else!0!==d.prototype._requiresID||e(this[m]).attr("id")||p.attr("id",h("ejControl_")),a&&"object"!=typeof a?r(s+": methods/properties can be accessed only after plugin creation"):(d.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in d.prototype.defaults&&"ejChart"!=s&&(!a||"locale"in a?t.isNullOrUndefined(a)&&((a={}).locale=t.setCulture().name):a.locale=t.setCulture().name),new d(p,a))}return-1!=s.indexOf("ejm")&&t.widget.registerInstance(p,s,n,d.prototype),this},t.widget.register(s,n,d.prototype);else for(c in d=n,s)(m=s[c])instanceof Array&&(d._rootCSS=m[1],m=m[0]),t.widget(c,m,d),s[c]instanceof Array&&(d._rootCSS="")},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,a){t.isNullOrUndefined(e[i])||r("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:a},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,a){i.push({element:e,pluginName:t,className:s,proto:a})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){var t,i,s,a;if(e&&e.length)for(t=0;t<e.length;t++)if((s=(i=e.eq(t).data()).ejWidgets)&&s.length)for(a=0;a<s.length;a++)i[s[a]]&&i[s[a]].destroy&&i[s[a]].destroy()},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},a={getActionFromCode:function(e,t,i,s,n){var r,o,l;for(r in i=i||!1,s=s||!1,n=n||!1,e)if("focus"!==r)for(o=a.getKeyObject(e[r]),l=0;l<o.length;l++)if(t===o[l].code&&i==o[l].isCtrl&&s==o[l].isShift&&n==o[l].isAlt)return r;return null},getKeyObject:function(t){for(var i,s,n,r={isCtrl:!1,isShift:!1,isAlt:!1},o=e.extend(!0,{},r),l=t.split(","),d=[],h=0;h<l.length;h++){if(i=null,-1!=l[h].indexOf("+"))for(s=l[h].split("+"),n=0;n<s.length;n++)i=a.getResult(e.trim(s[n]),r);else i=a.getResult(e.trim(l[h]),e.extend(!0,{},o));d.push(i)}return d},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i,s,a,n,r={},o=[],l={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(i in l)if(l.hasOwnProperty(i)&&(o=navigator.userAgent.match(l[i]))){if(r.name="opr"==o[1].toLowerCase()?"opera":o[1].toLowerCase(),r.version=o[2],r.culture={},r.culture.name=r.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(s=t.preferredCulture().name,a=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),n=0;navigator.languages&&n<navigator.languages.length&&(a=t.preferredCulture(navigator.languages[n])).language!=navigator.languages[n];n++);t.preferredCulture(s),e.extend(!0,r.culture,a)}!navigator.userAgent.match(/Trident\/7\./)||(r.name="msie");break}return r.isMSPointerEnabled="msie"==r.name&&r.version>9&&window.navigator.msPointerEnabled,r.pointerEnabled=window.navigator.pointerEnabled,r},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t,i,s=document.documentElement.style;if(e in s)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in s)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var o=t.copyObject=function(e,s){var a,n,r,l,d,h,c=2;for("boolean"!=typeof e&&(c=1),r=[].slice.call(arguments,c),1===c&&(s=e,e=i),l=0;l<r.length;l++)for(d in r[l])if(a=s[d],(n=r[l][d])!==i&&a!==n&&r[l]!==n&&s!==n)if(n instanceof Array)if(0===l&&e)for(s[d]=[],h=0;h<n.length;h++)o(!0,s[d],n);else s[d]=n.slice();else t.isPlainObject(n)?(s[d]=a||{},e?o(e,s[d],n):o(s[d],n)):s[d]=n;return s},l=function(){return this},d=0,h=function(e){return e+d++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,a,n){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var r={prop:n,index:a};return e(i).render(s,r)},t.isPlainObject=function(e){if(!e||t.DataManager!==i&&e instanceof t.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var s,a=t.support.isOwnLast;for(s in e)if(a)break;return s===i||e.hasOwnProperty(s)},n=!1,t.util.valueFunction=function(e){return function(s,a){var r=t.getObject(e,this.model);if(!1===n&&(n=t.getObject("observables.getValue",t.widget)),s===i)return t.isNullOrUndefined(n)?"function"==typeof r?r.call(this):r:n(r,a);"function"==typeof r?(this["ob.values"][e]=s,r.call(this,s)):t.createObject(e,s,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e,t=function(){this.a=1};for(e in t.prototype.b=1,new t)return"b"===e}(),outerHTML:document.createElement("div").outerHTML!==i},r=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},t.getRandomValue=function(e,s){var a,n;return e===i||s===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(n=new Uint16Array(1),window.crypto.getRandomValues(n),a=n[0]%(s-e)+e):a=Math.random()*(s-e)+e,0|a)},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,s=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;s.push(t[i])}return s},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,a=0;a<s.length;a++)if(0===s[a].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}()}),
/*!
*  filename: ej.culture.de-DE.min.js
*  version : 17.4.0.49
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
ej.addCulture("de-DE",{name:"de-DE",englishName:"German (Germany)",nativeName:"Deutsch (Deutschland)",language:"de",numberFormat:{pattern:["-n"],",":".",".":",",groupSizes:[3],negativeInfinity:"-unendlich",positiveInfinity:"+unendlich",percent:{pattern:["-n%","n%"],groupSizes:[3],",":".",".":",",symbol:"%"},currency:{pattern:["-n $","n $"],groupSizes:[3],",":".",".":",",symbol:"€"}},calendars:{standard:{"/":".",firstDay:1,days:{names:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],namesAbbr:["So","Mo","Di","Mi","Do","Fr","Sa"],namesShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},months:{names:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],namesAbbr:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"dddd, d. MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, d. MMMM yyyy HH:mm",F:"dddd, d. MMMM yyyy HH:mm:ss",M:"d. MMMM"}}}}),
/*!
*  filename: ej.datetimepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},enabled:!0,value:"",minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null},dataTypes:{cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",headerFormat:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(i){var s,a,n,r,o=!1;for(s in i)switch(s){case"cssClass":this._changeSkin(i[s]);break;case"locale":this._localize(i[s]);break;case"readOnly":this._readOnly(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enableRTL":this._setRtl(i[s]);break;case"enabled":this._enabled(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"value":i[s]=this._setValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),o=!0;break;case"enableStrictMode":this.model.enableStrictMode=i[s],o=!0;break;case"minDateTime":n=this._stringToObject(i[s]),a=this._getFormat(n,this.timePicker.model.timeFormat),this._isValidDate(n)?(this.datePicker.option("minDate",n),this.timePicker.option("minTime",a),i[s]=n,this.model.minDateTime=n):i[s]=this.model[s],o=!0;break;case"maxDateTime":n=this._stringToObject(i[s]),r=this._getFormat(i[s],this.timePicker.model.timeFormat),this._isValidDate(n)?(this.datePicker.option("maxDate",n),this.timePicker.option("maxTime",r),i[s]=n,this.model.maxDateTime=n):i[s]=this.model[s],o=!0;break;case"height":this.wrapper.height(i[s]);break;case"width":this.wrapper.width(i[s]);break;case"dateTimeFormat":this.model.dateTimeFormat=i[s],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options[s]=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(i[s]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",i[s]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",i[s]);break;case"timePopupWidth":this._updateTimeHeight(),this.timePicker.option("popupWidth",i[s]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",i[s]);break;case"startLevel":this.datePicker.option("startLevel",i[s]);break;case"depthLevel":this.datePicker.option("depthLevel",i[s]);break;case"startDay":this.datePicker.option("startDay",i[s]),this.model.startDay=this.datePicker.model.startDay,i[s]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",i[s]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",i[s]);break;case"headerFormat":this.datePicker.option("headerFormat",i[s]);break;case"htmlAttributes":this._addAttr(i[s]);break;case"popupPosition":this.model.popupPosition=i[s],this._setListPosition();break;case"timeDrillDown":t.isNullOrUndefined(i[s].enabled)||(this.model.timeDrillDown.enabled=i[s].enabled,this._changeDesign()),t.isNullOrUndefined(i[s].interval)||(this.model.timeDrillDown.interval=i[s].interval,this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),t.isNullOrUndefined(i[s].showMeridian)||(this.model.timeDrillDown.showMeridian=i[s].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),t.isNullOrUndefined(i[s].showFooter)||(this.model.timeDrillDown.showFooter=i[s].showFooter,this._changeDesign())}o&&this._validateMinMax(),this._valueChange(!0),"value"==s&&(i[s]=this.model.value),this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove(),t.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),t.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup.remove()},_init:function(e){if(!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=s,this._validateMeridian(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._changeDesign(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){if(this.model.timeDrillDown.enabled){var t=this.model.timeDrillDown.showFooter?"block":"none";this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),e(".e-footer",this._sfTimeHour).css("display",t),e(".e-footer",this._sfTimeMins).css("display",t)}else this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,a,n;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(a=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(a=this.model.validationMessage[s]);else a=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=a?a:e.validator.messages[s]}},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a&&"disabled"==e?s._enabled(!1):"readOnly"==a&&"readOnly"==e?s._readOnly(!0):"style"==a||"id"==a?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],a)?s.element.attr(a,e):s.wrapper.attr(a,e)})},_validateMeridian:function(){var e=t.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.timeDrillDown)||t.isNullOrUndefined(this._options.timeDrillDown.showMeridian))&&(this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){var i,s,a,n;this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this.model.value=""===this.model.value?this.element[0].value:this.model.value,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),(i=!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value)?null:this.model.value instanceof Date?this.model.value:(s=t.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale))||((s=this._checkJSONString(this.model.value))?s:null))&&(this.model.value=i),(a=this.model.minDateTime=this._stringToObject(this.model.minDateTime))&&this._isValidDate(a)||(this.model.minDateTime=this.defaults.minDateTime),(n=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime))&&this._isValidDate(n)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var t=new Date(e);if(isNaN(Date.parse(t))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(t.toJSON()===this.model.value||t.toGMTString()===this.model.value||t.toISOString()===this.model.value||t.toLocaleString()===this.model.value||t.toString()===this.model.value||t.toUTCString()===this.model.value)return t;if("string"==typeof e)return this._dateFromISO(e)}},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._renderDropdown(),this._checkProperties()},_renderWrapper:function(){if(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",value:this.model.value}),this.wrapper=t.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),!this._isSupport){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1;this.datetimeIcon=t.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=t.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderDropdown:function(){var i,s,a,n,r,o=e("#"+this.element[0].id+"_popup").get(0);o&&e(o).remove(),this.popup=t.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),t.isTouchDevice()||this.popup.addClass("e-ntouch"),e("body").append(this.popup),this._renderControls(),i=t.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=t.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=t.buildTag("div.e-timecontainer").append(i,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=t.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),s=t.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),a=t.buildTag("div.e-dt-button e-dt-today",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),n=t.buildTag("div.e-dt-button e-dt-now",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),r=t.buildTag("div.e-dt-button e-dt-done",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=t.buildTag("div.e-button-container").append(a,n,r).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(s,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(a,"click",this._todayClick),this._on(n,"click",this._nowClick),this._on(r,"click",this._doneClick)},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=t.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){var s,a,n,r,o,l,d;if(t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;r=6e4*this._interval,o=this.model.timeDrillDown.showMeridian?2:1,rowCount=this.model.timeDrillDown.showMeridian?6:4;var h=this.model.timeDrillDown.showMeridian?"hh":"HH:00",c=["AM","PM"],m=0,u="";for(s=this.timePicker._createObject("12:00:00 AM"),a=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM"),i=0;i<o;i++){for(this.model.timeDrillDown.showMeridian&&(u=c[i].toLowerCase(),l=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[c[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[c[i]][0],t.buildTag("div.e-header-"+u).attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-meridiantxt-"+u).text(l).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)),table=t.buildTag("table.e-dp-viewhours","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(table),tbody=t.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{}),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(a,s,!0);)n=this._localizeTime(s,h),d=t.buildTag("td.e-hour e-state-default",n),this.model.timeDrillDown.showMeridian&&d.addClass("e-hour-"+u),this._isIE8&&d.attr("unselectable","on"),tr.append(d),++m>=rowCount&&(m=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+r;table.append(tbody),this.model.timeDrillDown.showMeridian&&(s=this.timePicker._createObject("12:00:00 PM"),a=this.timePicker._createObject("11:59:59 PM"))}t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),e(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",e.proxy(this._hourNavHandler,this)),this._on(e(".e-next",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-prev",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-footer",this._sfTimeHour),"click",this._todayBtn),e(".e-hours-headertext",this._sfTimeHour).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(i,s){return e.trim(t.format(this.timePicker._createObject(i),s,this.model.locale))},_renderMinsPopup:function(){var i,s,a,n,r,o,l;if(this._sfTimeMins=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),t.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),i=t.buildTag("table.e-dp-viewmins","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeMins.append(i),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),this._intervall<1)return!1;for(r=6e4*this._interval,s=this.timePicker._createObject("12:00:00 AM"),a=this.timePicker._createObject("11:59:59 PM"),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),o=0;this.timePicker._compareTime(a,s,!0);)n=this._localizeTime(s,"HH:00"),l=t.buildTag("td.e-mins e-state-default",n),this._isIE8&&l.attr("unselectable","on"),tr.append(l),++o>=4&&(o=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+r;i.append(tbody),e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),e(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this.model.timeDrillDown.showMeridian||e(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(i.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this)),this._on(e(".e-next",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-prev",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-footer",this._sfTimeMins),"click",this._todayBtn),e(".e-minitues-headertext",this._sfTimeMins).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(i){var s,a;if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeHour).find("td").removeClass("e-active"),e(i.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),this.model.timeDrillDown.showMeridian?(a=e(i.target).hasClass("e-hour-am")?"AM":"PM",s=e(i.target).text()+":00 "+a):s=e(i.target).text(),this._generateMins(s);var n=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),r=e.trim(t.format(this.timePicker._createObject(n),"HH:mm",this.model.locale)),o=e.trim(t.format(this.timePicker._createObject(n),"HH:00",this.model.locale));index=(this.timePicker._parse(r)-this.timePicker._parse(o))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins)},_minsNavHandler:function(i){if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),e(i.target).addClass("e-active"),this.model.timeDrillDown.showMeridian?(value=e(i.target).text()+" "+t.format(this._datetimeValue,"tt","en-US"),value=this.timePicker._localizeTime(value)):value=e(i.target).text(),this.timePicker.option("value",value),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this.model.timeDrillDown.autoClose&&this._hideResult(i),this._updateInput()},_generateMins:function(i){var s,a,n,r,o,l,d,h=e("table",this._sfTimeMins);for(h.empty(),this.model.timeDrillDown.showMeridian?e(".e-mins-header",this._sfTimeMins).show():e(".e-mins-header",this._sfTimeMins).hide(),s=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm",e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),o=0,l=6e4*this.model.timeDrillDown.interval,a=this.timePicker._createObject(i),this._datetimeValue.setHours(a.getHours()),n=this.timePicker._createObject(a).getTime()+354e4,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr);this.timePicker._compareTime(n,a,!0);)o>=4&&(o=0,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr)),r=this._localizeTime(a,s),d=t.buildTag("td.e-mins e-state-default",r),this._isIE8&&d.attr("unselectable","on"),tr.append(d),o++,a=this.timePicker._createObject(a).getTime()+l;h.append(tbody),e(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(t.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(h.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeHour)},_prevNextMinsHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeMins)},_processNextPrev:function(i,s){if(i&&s.find(".e-arrow-sans-left").hasClass("e-disable")||!i&&s.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(e("table",s).get(0).className){case"e-dp-viewhours":incVal=i?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+incVal),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":incVal=i?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+incVal),this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var a=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),n=e.trim(t.format(this.timePicker._createObject(a),"HH:mm",this.model.locale)),r=e.trim(t.format(this.timePicker._createObject(a),"HH:00",this.model.locale));index=(this.timePicker._parse(n)-this.timePicker._parse(r))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(i,s){var a;if(this.model.readOnly||!this.model.enabled)return!1;switch(i&&i.preventDefault(),i?e(i.currentTarget).get(0).className:s.find(".e-text>span").get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),a=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(a)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.datePicker=e.data("ejDatePicker"),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e,i,s=t.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(s),s.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:this.model.timePopupWidth,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.timePicker=s.data("ejTimePicker"),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0,this.timePicker.popup.css({position:"static",display:"block"}),e=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,""==this.model.value&&(this.timePicker.option("minTime",this._getFormat(e,this.timePicker.model.timeFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)))},_updateTimeHeight:function(){var e=this.datePicker.popup.height()-this.popup.find(".e-header").height();e=this.popup.hasClass("e-dt-responsive")?"98px":e,this.timePicker.option("popupHeight",e)},_bindOperations:function(){var e=this;this.datePicker.option("layoutChange",function(){e._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){e.isValidState=!1}),this.timePicker.option("outOfRange",function(){e.isValidState=!1}),this.datePicker.option("change",function(t){e._refreshTimes(t)}),this.datePicker.option("select",function(t){e._updateInput(t)}),this.datePicker.option("dt_drilldown",function(t){e.model.timeDrillDown.enabled&&(e._updateInput(t),e._switchToDrilDown(t))}),this.timePicker.option("select",function(){e._updateInput()})},_switchToDrilDown:function(){var i,s;this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour),i=new Date(this.model.value.toString()),this._datetimeValue=new Date(i.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),s=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(s)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(s){var a,n,r,o="hour"==s?this._interval:this.model.timeDrillDown.interval,l="hour"==s?this._sfTimeHour:this._sfTimeMins,d="hour"==s?"e-hide-hour e-disable":"e-hide-mins e-disable";if(l.find("tbody tr td.e-"+s).removeClass(d),l.find(".e-arrow-sans-left").removeClass("e-disable"),l.find(".e-arrow-sans-right").removeClass("e-disable"),start="hour"==s?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00"),this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==s&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(a=e.trim(t.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(a)-this.timePicker._parse(start))/(6e4*o),indx="hour"==s?Math.floor(indx):Math.ceil(indx),i=0;i<indx;i++)r=l.find("tbody tr td.e-"+s)[i],e(r).addClass(d);l.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==s&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(a=e.trim(t.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(a)-this.timePicker._parse(start))/(6e4*o),indx=Math.floor(indx)+1,n=l.find("tbody tr td.e-"+s).length,i=indx;i<n;i++)r=l.find("tbody tr td.e-"+s)[i],e(r).addClass(d);l.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(t,i,s){var a,n,r=s.find("tbody tr td.e-"+t);return e(r).each(function(e,t){t.innerHTML!=i||(a=e)}),(n=r[a])||(n=r.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(n).hasClass("e-hide-"+t)||e(n).addClass("e-state-hover"),this._setActiveState(t,s),a},_setFocusByIndex:function(t,i,s){var a,n=s.find("tbody tr td.e-"+t);return(a=n[i])||(a=n.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(a).hasClass("e-hide-"+t)||e(a).addClass("e-state-hover"),this._setActiveState(t,s),i},_setActiveState:function(i,s){var a,n=s.find("tbody tr td.e-"+i),r=-1;switch(i){case"hour":this._compareDate(this.model.value,this._datetimeValue)&&(start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),l=e.trim(t.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale)),r=(this.timePicker._parse(l)-this.timePicker._parse(start))/(6e4*this._interval),r=Math.floor(r));break;case"mins":if(this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()){var o=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),l=e.trim(t.format(this.timePicker._createObject(o),"HH:mm",this.model.locale)),d=e.trim(t.format(this.timePicker._createObject(o),"HH:00",this.model.locale));r=(this.timePicker._parse(l)-this.timePicker._parse(d))/(6e4*this.model.timeDrillDown.interval),r=Math.ceil(r)}}(a=n[r])&&(s.find("table td").removeClass("e-active"),e(a).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=(new Date).setHours(0,0,0,0),i=this._getDate()||new Date,s=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),this._preVal=this._objectToString(this.model.value),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var t,i,s=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!s)return!1;this.isValidState=!0,this._compare(s,this._setEmptyTime(this.model.minDateTime))?(t=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("minTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("minTime",this._defaultMinVal()),this._compare(s,this._setEmptyTime(this.model.maxDateTime))?(i=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("maxTime",i),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("maxTime",this._defaultMaxVal()),this.timePicker._changeActiveEle()},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode()):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t,i,s,a,n,r,o,l,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",m="",u="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){m=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(u="Z"),s=(c+m+u).match(this._tokens),n=[],o=0;o<s.length;o++)l=s[o],r=this._checkLiteral(s[o]),d=this._numberRegex[r?s[o].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(a=e.match(d))&&(e.substr(0,e.indexOf(a))>=0&&!r&&(s[o].indexOf("M")>=0?n.push(parseInt(a[0])-1):n.push(parseInt(a[0]))),e=e.slice(e.indexOf(a[0])+a[0].length));return new Date(n[0],n[1],n[2],n[3],n[4],n[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_validateValue:function(e){var i=t.parseDate(e,this.model.dateTimeFormat);!i||i<this.model.minDateTime||i>this.model.maxDateTime?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e,t,i;if(e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,!e||!t||!i)return!1;t>i&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),e>i&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||e>i||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.element.attr("name")||this.element.attr({name:this.element[0].id}),this._checkStrictMode(),this._checkErrorClass(),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),t.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode||this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime,this.isValidState=!0):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime,this.isValidState=!0):(this.model.value="",this.element.val(""),this.isValidState=!0))},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value})},_targetBlur:function(){var e;this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult(),(e=t.parseDate(this.element.val(),this.model.dateTimeFormat))&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),null!=t.parseDate(this.element.val(),this.model.dateTimeFormat)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value})},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:if(!this.model.timeDrillDown.enabled){this._valueChange();break}}},_addFocus:function(t){t.hasClass("e-focus")||(this._removeFocus(),t.addClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).on("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).on("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).on("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).on("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).on("keydown",e.proxy(this._buttonClick,this)))},_removeFocus:function(){var t=this._getFocusedElement();t.length>0&&(t.removeClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).off("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).off("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).off("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).off("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).off("keydown",e.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();i.length>0?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeHour.find("tbody tr td.e-active").index()+1,-1!=t.row?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2)),this._sfTimeHour.find("table")[0].className,rowLength=this._sfTimeHour.find("tbody.e-timepicker-hours tr").length,colLength=this.model.timeDrillDown.showMeridian?6:4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(i)),e.ctrlKey||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_changeRowCol:function(t,i,s,a,n,r){var o,l,d,h,c={parent:null,child:null};switch(n){case"hours":o="tbody.e-timepicker-hours tr td.e-hour",c.parent=".e-timepicker-hours",c.child=".e-hour",hiddenClass=".e-hide-hour",l=this._sfTimeHour;break;case"mins":o="tbody.e-timepicker-mins tr td.e-mins",c.parent=".e-timepicker-mins",c.child=".e-mins",hiddenClass=".e-hide-mins",a=(l=this._sfTimeMins).find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length}if(t.row<=0&&t.col<=0)return l.find(o+":not(.e-disable):first");switch(i){case 36:return l.find(o+":not(.e-disable):first");case 35:return l.find(o+":not(.e-disable):last");case 38:if(r)this._forwardNavHandler(null,l);else{if(!(t.row>1))return this._processNextPrev(!0,l),l.find(o+":nth-child("+t.col+"):last");t.row-=1}if((d=this._getCell(t,c,l).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"up",l)))return d;this._processNextPrev(!0,l),d=l.find(o+":nth-child("+t.col+"):last")}return d;case 37:if(r)return this._processNextPrev(!0,l),l.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrev(!0,l),l.find(o+":not(.e-disable):last");t={row:t.row-1,col:a},"mins"==n&&(t.col=a=l.find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length)}if((d=this._getCell(t,c,l).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"left",l)))return d;this._processNextPrev(!0,l),d=l.find(o+":not(.e-disable):last")}return d;case 39:if(r)return this._processNextPrev(!1,l),l.find("tbody tr td.e-state-hover");if(t.col<a)t.col+=1;else{if(!(t.row<s))return this._processNextPrev(!1,l),l.find(o+":not(.e-disable):first");t={row:t.row+1,col:1}}if((d=this._getCell(t,c,l).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"right",l)))return d;this._processNextPrev(!1,l),d=l.find(o+":not(.e-disable):first")}return d;case 40:if(!r){if(!(t.row<s))return this._processNextPrev(!1,l),l.find(o+":nth-child("+t.col+"):first");if(t.row+=1,(d=this._getCell(t,c,l).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"down",l)))return d;this._processNextPrev(!1,l),d=l.find(o+":nth-child("+t.col+"):first")}return d}case 13:h=this._getCell(t,c,l),e(h)[0],args={type:null,target:h},"hours"==n&&this._hourNavHandler(args),"mins"==n&&this._minsNavHandler(args)}return this._getCell(t,c,l).not(hiddenClass)},_getCell:function(t,i,s){var a,n=t.row;return this.model.timeDrillDown.showMeridian&&t.row>2&&s.hasClass("e-time-hours")&&(n-=2),a=s.find("tbody"+i.parent+" tr:nth-child("+n+") td"+i.child+":nth-child("+t.col+")"),this.model.timeDrillDown.showMeridian&&a.length>0&&s.hasClass("e-time-hours")&&(a=t.row<=2?e(a[0]):e(a[1])),a},_findVisible:function(e,t,s,a){var n=e.col,r=e.row,o=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this._getCell({row:r,col:n},t,a),nextElement.length<=0)return null;if(nextElement.hasClass("e-disable")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?n++:n--:"down"==s?r++:r--,r<=0||r>a.find("tbody"+t.parent+" tr").length||(n>a.find("tbody"+t.parent+" tr:nth-child("+r+") td").length&&(r++,n=1),n<=0&&(r--,n=a.find("tbody"+t.parent+" tr:nth-child("+r+") td").length),r<=0||r>a.find("tbody"+t.parent+" tr").length))return null}else if(nextElement.hasClass(o))return e.col=n,e.row=r,nextElement=this._getCell(e,t,a)}},_keyDownOnMinutes:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1,this._sfTimeMins.find("table")[0].className,rowLength=this._sfTimeMins.find("tbody.e-timepicker-mins tr").length,colLength=4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(i)),e.ctrlKey||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e){var i,a;this._stopRefresh?this._stopRefresh=!1:""==(i=this.element.val())?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!0):(a=e!=s&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:t.parseDate(i,this.model.dateTimeFormat,this.model.locale))?(this.model.value=a,this.isValidState=!0,this._refreshPopup(),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1)},_refreshPopup:function(){if(this.isValidState&&this.isPopupOpen){var e=this._setEmptyTime(this.model.value),t=this._setEmptyDate(this.model.value),i=this._getDate(),s=this._getTime();i&&this._compare(i,e)||this.datePicker.option("value",e),s&&this._compare(s,t)||this.timePicker.option("value",t)}},_buttonClick:function(e){if(13==e.keyCode){e.preventDefault();var t=this._getFocusedElement();t.hasClass("e-dt-today")?this._todayClick():t.hasClass("e-dt-now")?this._nowClick():t.hasClass("e-dt-done")&&this._doneClick()}},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){var e;if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var i=this.model.minDateTime,s=this.model.maxDateTime,a=this.datePicker.model.value,n=new Date;a=t.isNullOrUndefined(a)?new Date:a,(e=new Date(a.getFullYear(),a.getMonth(),a.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()))<i?this.timePicker.option("value",this.timePicker._localizeTime(i)):e>s&&this.timePicker.option("value",this.timePicker._localizeTime(s)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||t.isTouchDevice()||this.element.focus(),this._showhidePopup(),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var t,i,s,a,n=this.timePicker.ul.find("li");n.hasClass("e-hover")||(i=t=this.timePicker._setEmptyDate(new Date),this.timePicker.minTime&&!this._compareTime(this._createObject(t),this.timePicker.minTime,!0)&&(i=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(t),!0)&&(i=this.timePicker.maxTime),s=n.first().html(),a=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this.timePicker.model.interval),a=Math.round(a),activeItem=a==n.length?a:a+1,(activeItem<0||activeItem>n.length||isNaN(activeItem))&&(activeItem=1),e(this.timePicker.ul.find("li")[activeItem-1]).addClass("e-hover"),this._calcScrollTop())},_calcScrollTop:function(){this.timePicker.ul.outerHeight();var e,t=this.timePicker.ul.find("li").outerHeight();e=t*this.timePicker.ul.find("li.e-hover").index()-(this.timePicker.popupList.outerHeight()-t)/2,this.timePicker.scrollerObj.setModel({scrollTop:e})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.isPopupOpen||!this.model.enabled||this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this._setListPosition(),this._checkForResponsive();var i=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){i._on(e(document),"mousedown",i._OnDocumentClick),i.model.timeDrillDown.enabled&&i._addFocus(i._dateContainer.find(".e-datepicker")),i.timePicker.model.value||i._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(e(window),"resize",this._OnWindowResize),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(i){var s=this;if(!this.isPopupOpen||this._trigger("beforeClose",{element:this.popup}))return!1;this.isPopupOpen=!1,this._removeFocus(),this._popClose&&i&&"click"!=i.type?this.isPopupOpen=!0:(this.popup.slideUp(this.model.enableAnimation?100:0,function(){s.model&&(s.model.timeDrillDown.enabled&&(s._sfTimeHour.hide(),s._sfTimeMins.hide(),s._dateContainer.show()),t.isNullOrUndefined(s.model.value)||(s._datetimeValue=new Date(s.model.value.toString())))}),this._raiseEvent("close"),this._off(e(document),"mousedown",this._OnDocumentClick),this._off(e(window),"resize",this._OnWindowResize),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_setListPosition:function(){var i,s,a=this.wrapper,n=this._getOffset(a),r=e(document).scrollTop()+e(window).height()-(n.top+e(a).outerHeight()),o=n.top-e(document).scrollTop(),l=this.popup.outerHeight(),d=this.popup.outerWidth(),h=n.left,c=a.outerHeight(),m=(c-a.height())/2,u=this._getZindexPartial();this.model.popupPosition,s=this.model.popupPosition==t.PopupPosition.Bottom?(l<r||l>o?n.top+c+3:n.top-l-3)-m:(l>o?n.top+c+3:n.top-l-3)-m,i=e(document).scrollLeft()+e(window).width()-h,(this.model.enableRTL||d>i&&d<h+a.outerWidth())&&(h-=this.popup.outerWidth()-a.outerWidth()),this.popup.css({left:h+"px",top:s+"px","z-index":u})},_getOffset:function(e){return t.util.getOffset(e)},_OnDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datetime-wrap").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup))&&(t.preventDefault(),e(t.target).parents(".e-datepicker").length>0?this._addFocus(e(t.target).parents(".e-datepicker")):e(t.target).parents(".e-timecontainer").length>0?this._addFocus(e(t.target).parents(".e-timecontainer")):e(t.target).hasClass("e-dt-button")?this._addFocus(e(t.target)):e(t.target).parents(".e-time-hours").length>0?this._addFocus(e(t.target).parents(".e-time-hours")):e(t.target).parents(".e-time-minitues").length>0?this._addFocus(e(t.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(i){var s;+t.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat)==+t.parseDate(this.element.val(),this.model.dateTimeFormat)?this._prevDateTimeVal!=this.element.val()&&(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState},this._prevDateTimeVal=this.element.val(),this._trigger("_change",s)):(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!i,isValidState:this.isValidState},this._trigger("_change",s),s.value=""==e.trim(this.element.val())?null:this.element.val(),this._trigger("change",s),this._prevDateTimeVal=this.element.val())},_raiseEvent:function(e){return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:this._preVal,value:this.element.val()})},_getDateTimeFormat:function(){var e=t.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){var t=new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,i){if(e instanceof Date){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)}return e},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},_getDateObj:function(e,i){var s,a;if("string"!=typeof e)return e;if(s=this._checkFormat(i),null!=(a=t.parseDate(e,s,this.model.locale)))return a;if(""==e||null==e)return null;var n,r=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/.exec(e),o=new Date;return r&&(o=new Date,n=+r[2],o.setUTCFullYear(r[1],n-1,r[3]),o.setUTCHours(r[4],r[5],r[6]),n!=o.getUTCMonth()+1&&o.setTime()),this._isValidDate(o)?o:void 0},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.datePicker.option(e,t),this.timePicker.option(e,t)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(s){var a,n;if(this.model.locale=s,this.model.dateTimeFormat=this.model.timeDisplayFormat="",a=["AM","PM"],this._getDateTimeFormat(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",s),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(i=0;i<2;i++)n=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[a[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[a[i]][0],e("span.e-hours-meridiantxt-"+a[i].toLowerCase(),this._sfTimeHour).text(n)},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){this.model.readOnly=e,e?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup.removeClass("e-corner")),this.datePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){this.model.showPopupButton=e,e?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){if(e(window).outerWidth()>200&&e(window).outerWidth()<=500)this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle());else if(this.popup.hasClass("e-dt-responsive")){this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth);var t=this.datePicker.popup.height()-this.popup.find(".e-header").height();this.timePicker.option("popupHeight",t),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()}},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this._hideResult(),this._change("enabled",!1),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput),this.popup.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DateTimePicker.Locale=t.DateTimePicker.Locale||{},t.DateTimePicker.Locale.default=t.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},t.PopupPosition={Bottom:"bottom",Top:"top"}}),
/*!
*  filename: ej.datepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){var e,t,a;e=jQuery,(t=Syncfusion).widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date(1900,0,1),maxDate:new Date(2099,11,31),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(i){var s,a,n=!1,r=!1,o=!1;for(s in i)switch(s){case"dayHeaderFormat":this.model.dayHeaderFormat=i[s],n=r=!0;break;case"showPopupButton":this._renderDateIcon(i[s],!0);break;case"displayInline":this._setDisplayInline(i[s]),this.model.allowEdit||i[s]||!this._isInputBox()||this.element.on("mousedown",e.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[s])&&(i[s]=null),t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),i[s]=this.model.value):this._updateDateValue(i[s]),o=n=r=!0;break;case"specialDates":this.model.specialDates=i[s],this._createSpecialDateObject(),n=r=!0;break;case"fields":this.model.fields=i[s],this._mapField=this._getMapper(),n=r=!0;break;case"showTooltip":this.model.showTooltip=i[s],n=r=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[s],n=r=!0;break;case"highlightSection":this.model.highlightSection=i[s],n=r=!0;break;case"dateFormat":this.model.dateFormat=i[s],this._ensureValue();break;case"minDate":this._setMinDate(i[s]),i[s]=this.model.minDate,this._ensureValue(),o=n=r=!0;break;case"maxDate":this._setMaxDate(i[s]),i[s]=this.model.maxDate,this._ensureValue(),o=n=r=!0;break;case"locale":this.model.locale=i[s],this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(i[s]),this.model.value&&this._setDateValue(this.model.value),i[s]=this.model.locale,n=r=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[s],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[s],o=n=r=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[s],this._disbleMaualInput();break;case"width":this._setWidth(i[s]);break;case"height":this._setHeight(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":i[s]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(i[s]);break;case"showFooter":this._enableFooter(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":a=i[s],(parseInt(i[s])<0||parseInt(i[s])>6)&&(i[s]=this.culture.calendar.firstDay,a=-1),this.model.startDay=i[s],t.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=a,n=r=!0;break;case"startLevel":this.model.startLevel=i[s],n=r=!0;break;case"headerFormat":this.model.headerFormat=i[s],n=r=!0;break;case"depthLevel":this.model.depthLevel=i[s],n=r=!0;break;case"htmlAttributes":this._addAttr(i[s]);break;case"allowEdit":this._changeEditable(i[s]);break;case"tooltipFormat":this.model.tooltipFormat=i[s],n=r=!0;break;case"allowDrillDown":this._allowQuickPick(i[s]),n=r=!0;break;case"showDisabledRange":this._setRestrictDateState(i[s]);break;case"blackoutDates":this.model.blackoutDates=i[s],this._initDisableObj(this.model.blackoutDates),n=r=!0}o&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate),this._setWaterMark(),n&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),r&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isSupport=document.createElement("input").placeholder!=a,this._checkAttribute(),this._setValues(),this._createDatePicker(),this._setRestrictDateState(this.model.showDisabledRange),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=a&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,a,n;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(a=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(a=this.model.validationMessage[s]);else a=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=a?a:e.validator.messages[s]}},_checkAttribute:function(){for(var e,i,s=["min","max","readonly","disabled"],a=["minDate","maxDate","readOnly","enabled"],n=0;n<s.length;n++)e=this.element.attr(s[n]),i=a[n],t.isNullOrUndefined(e)||(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options[i]))&&(this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this[i](this.element,"blur",this._onFocusOut),this[i](this.element,"focus",this._onFocusIn),this[i](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(t){e(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",e.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){var t=e?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a&&"disabled"==e?s.disable():"readOnly"==a&&"readOnly"==e?s.model.readOnly=!0:"style"==a||"id"==a?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox()){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr(),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&e("#e-"+this._id).remove(),this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._resizeCalender(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this._createCalender(),this._setDisplayInline(this.model.displayInline),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?this.wrapper?this.wrapper.width(e):this.element.width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?this.wrapper?this.wrapper.height(e):this.element.height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var t,i;this._stopRefresh?this._stopRefresh=!1:(t=this.element.val(),i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t?this._parseDate(t,!0):this._parseDate(t),i=this._validateYearValue(i),this._setDateValue(i),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged())},_validateYearValue:function(e){if(null!=e){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>i&&e.setFullYear(this._calendarDate.getFullYear())}return e},_setFooterText:function(t){e(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(t){this.model.displayInline=t,t&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),e("body").append(this.sfCalendar),this._isOpen=!1),t?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(e(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&e(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?null:(e instanceof Date||(e=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||((t=this._checkJSONString(e))?t:null)),!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null)},_checkJSONString:function(e){if(isNaN(Date.parse(e))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e)return new Date(e);if("string"==typeof e)return this._dateFromISO(e)}},_dateFromISO:function(e){var t,i,s,a,n,r,o,l,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",m="",u="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){m=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(u="Z"),s=(c+m+u).match(this._tokens),n=[],o=0;o<s.length;o++)l=s[o],r=this._checkLiteral(s[o]),d=this._numberRegex[r?s[o].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(a=e.match(d))&&(e.substr(0,e.indexOf(a))>=0&&!r&&(s[o].indexOf("M")>=0?n.push(parseInt(a[0])-1):n.push(parseInt(a[0]))),e=e.slice(e.indexOf(a[0])+a[0].length));return new Date(n[0],n[1],n[2],n[3],n[4],n[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){if("string"==typeof e){var i=t.parseDate(e,this.model.dateFormat,this.model.locale);e=null!=i?i:new Date(e)}return e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=t.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox()){var i,s,a=this.element.is("input")?this.wrapper:this.element,n=this._getOffset(a),r=e(document).scrollTop()+e(window).height()-(n.top+e(a).outerHeight()),o=n.top-e(document).scrollTop(),l=this.sfCalendar.outerHeight(),d=this.sfCalendar.outerWidth(),h=n.left,c=a.outerHeight(),m=(a.height(),this._getZindexPartial()),u=l<r||l>o?n.top+c+3:n.top-l-3;i=e(document).scrollLeft()+e(window).width()-h,s=e(document).scrollLeft()+h+a.width(),(this.model.enableRTL||d>i&&d<h+a.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(h+=this.wrapper.width()-this.sfCalendar.width()),d>s&&(h=n.left),this.sfCalendar.css({left:h+"px",top:u+"px","z-index":m})}},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,i){var s=this._checkDateObject(e,i);null!=s?(this.isValidState=!0,this.model.value=new Date(s.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!t.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){(null!=this._validateValue()||!this.model.enableStrictMode)&&this.sfCalendar.find(".e-datepicker-days").is(":visible")&&this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0))},_validateValue:function(){var e;return e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e>=7&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_parseDate:function(e,i){var s=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=a&&""!=e&&1!=i&&t.format(t.parseDate(DateValue,s,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:t.parseDate(e,s,this.model.locale)},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){var t="string"==typeof e?this._parseDate(e):new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=e&&e.date?e.date:"date",t._tooltip=e&&e.tooltip?e.tooltip:"tooltip",t._icon=e&&e.iconClass?e.iconClass:"iconClass",t._custom=e&&e.cssClass?e.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return e?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,n,r,o,l,d;this.model.minDate!=a&&this.model.maxDate!=a&&((s=new Date(this.model.minDate.getTime())).setDate(1),(n=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(r=this._zeroTime(new Date)).setDate(1):r=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),r.getTime()<s.getTime()?r=s:r.getTime()>n.getTime()&&(r=n),o=this.displayedMonth,l=this.displayedYear,this.displayedMonth=r.getMonth(),this.displayedYear=r.getFullYear(),d=r,i&&(this.displayedMonth!=o||this.displayedYear!=l)&&(this._renderCalendar(this,d),this._dateValue=d,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&e("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){e("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){e("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i),this._renderCalendar(this),this._startLevel(this.model.startLevel),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),e(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?e(".e-header",this.sfCalendar).show():e(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?e(".e-footer",this.sfCalendar).show():e(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){e>=t?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){var i,s,a,n;if(this.model.readOnly||!this.model.enabled||e(t.target).hasClass("e-disable"))return!1;switch(t.preventDefault(),i=e("table",this.sfCalendar),s=this._navigateFrom(i),a=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev"),this._processNextPrevDate(a),e("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":n="month";break;case"e-dp-viewmonths":n="year";break;case"e-dp-viewyears":n="decade";break;case"e-dp-viewallyears":n="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:n,navigateFrom:s})},_processNextPrevDate:function(t){var i,a,n,r,o,l,d;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch((i=e("table",this.sfCalendar)).get(0).className){case"e-dp-viewdays":if(n=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0,this._addMonths(this._dateValue,t?-n:n),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),r=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(r.firstDay,this.model.minDate),this._nextArrowCondition(r.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if((o=this._dateValue).setFullYear(e(".e-datepicker-headertext",this.sfCalendar).text()),t){if(o.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(o.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,this._addYears(o,t?-1:1),this._renderCalendar(this,o),a=o.getFullYear(),e(".e-datepicker-headertext",this.sfCalendar).text(a),e("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide(),e(e(i).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(a,a);break;case"e-dp-viewyears":if((l=this._dateValue).setFullYear(e(i).find(".e-state-hover").text()),t){if(parseInt(e("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(e("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,e(i).find(".e-state-hover").hasClass("e-year-first")&&t||e(i).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(l.getFullYear()):e(i).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(l.getFullYear()+11):e(i).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(l.getFullYear()-11):this._dateValue.setFullYear(l.getFullYear()+(t?-10:10)),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+(d+10)),e("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide(),e(e(i).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(e(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,d+10);break;case"e-dp-viewallyears":if(t){if(parseFloat(e("td.e-allyear-first",i.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),a=parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+a),e("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide(),e(e(i).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(e(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,a)}this._layoutChanged()},_addFocus:function(t,i){var s,a,n="e-current-"+t;return"day"==t&&(n="current-month"),s=this.sfCalendar.find("tbody tr td."+n),"month"==t&&e(s).each(function(t,s){parseInt(e(s).attr("index"))!=parseInt(i)||(i=t)}),(a=s[i])||(a=s.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(a).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){var i,s,a;if(this.model.value instanceof Date){var n,r=this.sfCalendar.find("tbody tr td.e-current-"+t),o=this,l=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(e(".e-text",this.sfCalendar).text())&&e(r).each(function(t,i){parseInt(e(i).attr("index"))!=parseInt(o.model.value.getMonth())||(l=t)});break;case"year":i=this.model.value.getFullYear(),e(r).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(l=e)});break;case"allyear":s=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),a=s+1+" - "+(s+10),e(r).each(function(e,t){parseInt(t.innerHTML)!=parseInt(a)||(l=e)})}(n=r[l])&&(this.sfCalendar.find("table td").removeClass("e-active"),e(n).hasClass("e-hidedate")||e(n).addClass("e-active"))}},_setFocusByName:function(t,i){var s,a,n=this.sfCalendar.find("tbody tr td.e-current-"+t);return e(n).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(s=e)}),(a=n[s])||(a=n.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(a).addClass("e-state-hover"),this._setActiveState(t),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var i,s,a=e("table",this.sfCalendar),n=e("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(a),n){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(a.find(".e-state-hover")).getMonth()||this._getDateObj(a.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),s="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt(),this._startLevel("decade"),s="decade",this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt(),this._startLevel("century"),s="century",this._hoverAllYear=this._setFocusByName("allyear",i)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var t,i;switch(e("table",this.sfCalendar),e("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=t,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=t,i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var i,s,a=this.sfCalendar.find("tbody tr td.e-current-"+t),n=this._dateValue.getFullYear();e(a).each(function(e,t){parseInt(t.innerHTML)!=parseInt(n)||(i=e)}),(s=a[i])&&(e(s).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):e(s).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){var s,a;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),s=e(i.currentTarget)):s=i;var n,r,o=e("table",this.sfCalendar),l=e("table",this.sfCalendar).get(0).className,d=this;switch(navFrom=this._navigateFrom(o),l){case"e-dp-viewmonths":o.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(e(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate()),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget}),this._renderCalendar(this,this._dateValue),e("tbody",o).not(".e-datepicker-days,.e-week-header").hide(),e(e(o).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){d._addFocus("day",d._hoverDate||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),r="month";break;case"e-dp-viewyears":o.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),e("tbody,tr.e-week-header",o).not(".e-datepicker-months").hide(),t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),e(e(o).find(".e-datepicker-months")).fadeIn("fast",function(){d._addFocus("month",d._hoverMonth||0),d._animating=!1}),n=s.text(),e(".e-datepicker-headertext",this.sfCalendar).text(n),this._checkArrows(n,n),r="year";break;case"e-dp-viewallyears":a=s.text().split("-"),o.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),a[0]<this.model.minDate.getFullYear()?a[0]=this.model.minDate.getFullYear().toString():a[0]>this.model.maxDate.getFullYear()&&(a[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(a[0],0,1)),e("tbody,tr.e-week-header",o).not(".e-datepicker-years").hide(),e(e(o).find(".e-datepicker-years")).fadeIn("fast",function(){d._addFocus("year",d._hoverYear||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(a[0]+" - "+a[1]),this._checkArrows(a[0],a[1]),r="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.trim(a[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:r,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(t){var i,s,a,n,r=e("table",this.sfCalendar),o=e(".e-datepicker-headertext",this.sfCalendar),l=this._dateValue;switch(t){case"decade":r.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),e("tbody,tr.e-week-header",r).not(".e-datepicker-years").hide(),e(e(r).find(".e-datepicker-years")).show(),l=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:l,i=1+(n=parseInt(l.getFullYear())-(parseInt(l.getFullYear())%10+1)),s=n+10,o.text(i+" - "+s),this._checkArrows(i,s),this._hoverYear=this._setFocusByName("year",l.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,l),r.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),e("tbody,tr.e-week-header",r).not(".e-datepicker-allyears").hide(),e(e(r).find(".e-datepicker-allyears")).show(),a=(i=parseFloat(e("td.e-allyear-first",r.get(0)).text().split("-")[1])+1)+" - "+(s=parseFloat(e("td.e-allyear-last",r.get(0)).prev().text().split("-")[1])),o.text(a),this._checkArrows(i,s),n=parseInt(l.getFullYear())-(parseInt(l.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",n+1+" - "+(n+10));break;case"year":r.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),e("tbody,tr.e-week-header",r).hide(),e(e(r).find(".e-datepicker-months")).show(),i=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():l.getFullYear(),o.text(i),this._checkArrows(i,i),this._hoverMonth=l.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":r.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":e(i.find(".e-current-year,.e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),this._on(e(".e-current-month",this.sfCalendar),"click",e.proxy(this._onDepthSelectHandler,this));break;case"decade":e(i.find(".e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),e(".e-current-year",this.sfCalendar).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"century":e(i.find(".e-current-allyear")).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;e(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):(e(t.target).hasClass("e-current-year")||e(t.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML)))),this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,s){for(var a,n,r,o,l=function(e){return document.createElement(e)},d=0,h=0;h<3;h++){for(a=e(l("tr")),n=0;n<4;n++)r=e(l("td")).addClass("e-current-month e-state-default").attr({index:d}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[d++]),(s.getFullYear()<this.model.minDate.getFullYear()||s.getFullYear()>this.model.maxDate.getFullYear()||s.getFullYear()<=this.model.minDate.getFullYear()&&d<this.model.minDate.getMonth()+1||s.getFullYear()>=this.model.maxDate.getFullYear()&&d>this.model.maxDate.getMonth()+1)&&(r.addClass("e-hidedate"),r.removeClass("e-current-month")),a.append(r);t.append(a)}i.append(t),o=s.getFullYear(),this._checkArrows(o,o)},_datepickerYears:function(t,i,s){for(var a,n,r,o,l=function(e){return document.createElement(e)},d=parseInt(s)-(parseInt(s)%10+1),h=[],c=0;c<12;c++)h.push(d+c);for(a=0,n=0;n<3;n++){for(r=e(l("tr")),c=0;c<4;c++)(o=e(l("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==a?o.addClass("e-year-first e-current-year "):11==a?o.addClass("e-year-last e-current-year "):o.addClass("e-current-year e-state-default"),(h[a]<this.model.minDate.getFullYear()||h[a]>this.model.maxDate.getFullYear())&&(o.addClass("e-hidedate"),o.removeClass("e-current-year")),o.html(h[a++]),r.append(o);t.append(r)}i.append(t),this._checkArrows(h[0],h[h.length])},_datepickerAllYears:function(t,i,s){for(var a,n,r,o,l=parseInt(s)-(parseInt(s)%100+10),d=[],h=this._isIE8||this._isIE9?"":"\n",c=0;c<12;c++)d.push(parseInt(l)+" -"+h+parseInt(l+9)),l+=10;for(a=0,n=0;n<3;n++){for(r=e(document.createElement("tr")),c=0;c<4;c++)(o=e(document.createElement("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==a?o.addClass("e-allyear-first e-current-allyear "):11==a?o.addClass("e-allyear-last e-current-allyear "):o.addClass("e-current-allyear e-state-default"),(parseInt(d[a].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(d[a].split("-\n")[0])>this.model.maxDate.getFullYear())&&(o.addClass("e-hidedate"),o.removeClass("e-current-allyear")),o.html(d[a++]),r.append(o);t.append(r)}i.append(t)},_renderHeader:function(i){var s,a,n,r,o,l,d=e(document.createElement("thead")),h=t.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=i.model.dayHeaderFormat)for(s=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),a=this.Date.firstDayOfWeek;a<this.Date.firstDayOfWeek+7;a++)n=a%7,r=h.names[n],o="short"==i.model.dayHeaderFormat?h.namesAbbr[n]:"long"==i.model.dayHeaderFormat?r:h.namesShort[n],l=t.buildTag("th","",{},{scope:"col",abbr:r,date:r,title:this._formatter(r,"dddd"),class:0==n||6==n?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(o),s.append(l);return d.append(s)},_renderCalendar:function(i,s){var n,r,o,l,d,h,c,m,u;i=e.extend({},t.DatePicker.prototype.defaults,i),this.Date.firstDayOfWeek=this.model.startDay,n=s||(this._calendarDate?this._calendarDate:this._zeroTime(new Date)),(r=e("table",this.sfCalendar)).empty(),r.append(this._renderHeader(i)),o=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(o,r,n.getFullYear()),o=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(o,r,n.getFullYear());var p=i.model.month==a?n.getMonth():i.model.month,_=i.model.year||n.getFullYear(),f=new Date(_,p,1,0,0,0),v=this.Date.firstDayOfWeek-f.getDay()+1;v>1&&(v-=7),l=Math.ceil((-1*v+1+this._getDaysInMonth(f))/7),this._addDays(f,v-1),d=this._zeroTime(new Date),h=this._calendarDate,o=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(o,r,n),o=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var g=0,y=!0,b=!0;g++<l;){for(c=jQuery(document.createElement("tr")),m=0;m<7;m++){var w=f.getMonth()==p,D=this._isSpecialDates(f),k=this._checkDisableRange(f),C=this._getIndex,T=e(document.createElement("td")).html(D?"<span></span>"+f.getDate():f.getDate()+"").attr({date:f.toDateString(),title:this.model.showTooltip?D&&this.model.specialDates[C][this._mapField._tooltip]?this.model.specialDates[C][this._mapField._tooltip]:this._formatter(f,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((w?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(f)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(w&&f.getTime()==d.getTime()?"today ":""));T.find("span:first-of-type").addClass(D?this.model.specialDates[C][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[C][this._mapField._icon]+" ":"e-special-day":""),T.addClass(D&&this.model.specialDates[C][this._mapField._custom]?this.model.specialDates[C][this._mapField._custom]:""),k&&this._disableDates({date:f,element:T}),h.getTime()==f.getTime()&&w&&(T.hasClass("e-hidedate")||(this.model.value?(T.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&c.addClass("e-selected-week"),"month"==this.model.highlightSection&&o.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&c.addClass("e-work-week")):T.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(T.hasClass("e-hidedate")||T.addClass("e-state-hover"),this._hoverDate=f.getDate()-1)),u=!0,(f<this.model.minDate||f>this.model.maxDate)&&(T.addClass("e-hidedate"),T.removeClass("current-month"),this.model.showOtherMonths&&T.removeClass("other-month"),u=b=!1),w&&(u&&y&&(this._tempMinDate=f,y=!1,b=!0),b&&(this._tempMaxDate=f)),this._trigger("beforeDateCreate",{date:f,value:this._formatter(f,this.model.dateFormat),element:T}),c.append(T),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0)}o.append(c)}r.append(o),this._DRPdisableFade?(e(o).css("display","block"),e(o).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?e(o).css("display","block"):e(o).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(r.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(r.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!t.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(){var e,s,a;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(e=this._checkInstanceType(this.model.blackoutDates[i]))&&(s=e.getFullYear(),a=e.getMonth(),t.isNullOrUndefined(this._disableCollection[s])&&(this._disableCollection[s]=[]),-1==jQuery.inArray(a,this._disableCollection[s])&&this._disableCollection[s].push(a))},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;(t={row:null,col:null}).col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=3,a=4;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,s,a,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,s,a,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,s,a,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,a=7,i=this._changeRowCol(t,e.keyCode,s,a,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(t,i,s,a,n,r){var o,l,d,h,c,m={parent:null,child:null};switch(n){case"day":o="tbody.e-datepicker-days tr td.current-month",m.parent=".e-datepicker-days",m.child=".current-month";break;case"month":o="tbody.e-datepicker-months tr td.e-current-month",m.parent=".e-datepicker-months",m.child=".e-current-month";break;case"year":o="tbody.e-datepicker-years tr td.e-current-year",m.parent=".e-datepicker-years",m.child=".e-current-year";break;case"yearall":o="tbody.e-datepicker-allyears tr td.e-current-allyear",m.parent=".e-datepicker-allyears",m.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(o+":first");switch(i){case 36:return this.sfCalendar.find(o+":first");case 35:return this.sfCalendar.find(o+":last");case 38:if(r&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(o+":nth-child("+t.col+"):last");t.row-=1}if((l=this._getCell(t,m)).length<=0){if(null!==(l=this._findVisible(t,m,"up")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":nth-child("+t.col+"):last")}return l;case 37:if(r)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(o+":last");t={row:t.row-1,col:a}}if((l=this._getCell(t,m)).length<=0){if(null!==(l=this._findVisible(t,m,"left")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":last")}return l;case 39:if(r)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<a)t.col+=1;else{if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(o+":first");t={row:t.row+1,col:1}}if((l=this._getCell(t,m)).length<=0){if(null!==(l=this._findVisible(t,m,"right")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":first")}return l;case 40:if(!r){if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(o+":nth-child("+t.col+"):first");if(t.row+=1,(l=this._getCell(t,m)).length<=0){if(null!==(l=this._findVisible(t,m,"down")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":nth-child("+t.col+"):first")}return l}case 13:d=e("table",this.sfCalendar).get(0).className,h=this._getCell(t,m),c=e(h)[0],"e-dp-viewmonths"==d&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(c.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewyears"==d&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==d&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(c.innerHTML))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewdays"==d?(this._backwardNavHandler(h),this._onSetCancelDateHandler({type:null,target:h})):this._backwardNavHandler(h)}return this._getCell(t,m)},_findVisible:function(e,t,s){var a=e.col,n=e.row,r=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td:nth-child("+a+")"),nextElement.length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?a++:a--:"down"==s?n++:n--,n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length||(a>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length&&(n++,a=1),a<=0&&(n--,a=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length),n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length))return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(r))return e.col=a,e.row=n,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){var s,a;if(this._isOpen)return!1;if(s=this,this._popupOpen=!0,a=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),s._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){s.model&&!s.model.displayInline&&e(document).on("mousedown",e.proxy(s._onDocumentClick,s))}),this._updateInputVal(),this._refreshLevel(a),this._trigger("open",{prevDate:a,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(i){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var s=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&i!=a&&"click"!=i.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){s._isOpen=!1,e(document).off("mousedown",e.proxy(s._onDocumentClick,s)),s._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(e(".e-next",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this._on(e(".e-prev",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))),this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this.model.showFooter&&this._on(e(".e-footer",this.sfCalendar),"click",this._setCurrDate),this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",e.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",e.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_onFocusOut:function(t){var i,s,a;this._isFocused=!1,i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),t),this.wrapper.removeClass("e-focus"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(i),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this.element.off("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),s=this.element.val(),a={prevDate:this._prevDate,value:s},this._specificFormat()?this._prevDate!=s&&this._setDateValue(s,!0):this._setDateValue(s),this.model.value||this._clearSelected(),this._trigger("focusOut",a),this._checkErrorClass()},_onFocusIn:function(t){this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(t),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){if(this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel){var t=this._stringToObject(this.element.val());(t=this._validateYearValue(t))&&(this._compareDate(e,t)||this._refreshPopup())}},_validateOnFocusOut:function(e,i){var s,a,n=null!=this._preValue?this._calendarDate:this._preValue,r=this._formatter(n,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=n:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),s=!1,a=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(this.isValidState=!1,a=!0,this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),a&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(r),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(e){if(13===e.keyCode){var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(t),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this._checkErrorClass()}},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(s=!1,this.isValidState=!1)}return s},_triggerChangeEvent:function(e){var t,i,s=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),i={prevDate:this._prevDate,value:s,isInteraction:!!e},t=this._specificFormat()&&e!=a&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=a&&"blur"==e.type?this.model.value:this._parseDate(s),t=this._validateYearValue(t),this._validateDate(t)||(t=null),this._compareDate(this._preValue,t)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(i.value=this.element.val(),this._trigger("_change",i)):(this._preValue=this.model.value=t,i.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",s),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),i.value=s,this._trigger("_change",i),i.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",i),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown&&this._trigger("dt_drilldown",e))},_onDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datewidget").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault(),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&(e(t.target).hasClass("e-disable")||e(t.target).hasClass("e-hidedate")))return!1;t&&t.type&&t.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(t),this._triggerChangeEvent(t),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t),t&&e(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DatePicker.Locale=t.DatePicker.Locale||{},t.DatePicker.Locale.default=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}),
/*!
*  filename: ej.timepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,open:null,close:null},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},show:function(){this.showDropdown||this._getInternalEvents||this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(e){var i,s;return e||(e=t.preferredCulture(this.model.locale).calendars.standard.patterns.t),(i=this._validateTimeFormat(e))&&(this.model.timeFormat=i,this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value?(this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value)):(this._setModelOption=!1,(s=this._localizeTime(this.element.val()))&&this._checkMinMax(s)&&(this.model.value=s,this.element.val(s)))),i},_getTimeFormat:function(){this.model.timeFormat=t.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt",this.seperator=this._getSeperator()},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(e)},_localize:function(e){var i=this._createObject(this.model.value,!0);this.model.locale=e,this._getTimeFormat(),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),i?(this.model.value=this._localizeTime(i),this.element.val(this.model.value)):(i=this._localizeTime(this.element.val()))&&this._checkMinMax(i)&&(this.model.value=i,this.element.val(i)),this._getAmPm()},_setLocalize:function(e){(e=t.preferredCulture(e))&&(this.model.locale="en"==e.name?"en-US":e.name,t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=t.preferredCulture(this.model.locale).calendars.standard.patterns.t))},_updateInput:function(){if(!t.isNullOrUndefined(this._options)){var e=this._localizeTime(this._options.value);t.isNullOrUndefined(e)||"string"==typeof e&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=""==this.element.val(),this._checkErrorClass())}},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime),this._minTimeObj||(this.model.minTime=t.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale)),this._maxTimeObj=this._createObject(this.model.maxTime),this._maxTimeObj||(this.model.maxTime=t.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var e=(new Date).setHours(0,0,0,0),i=(new Date).setHours(23,59,59,59);!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=t.format(this._createObject(e),this.model.timeFormat,this.model.locale)),!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=t.format(this._createObject(i),this.model.timeFormat,this.model.locale)),this._createMinMaxObj()},_init:function(e){if(this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._initialize(),this._render(),this._wireEvents(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()}),this._updateInput(),this._updateTextbox(),null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){this._options!==s&&(this._options.value!==s||this.model.value)||this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(i,s){!t.isNullOrUndefined(s.minTime)&&e.trim(s.minTime)&&this._isValid(s.minTime)&&(this.model.minTime=s.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes()),!t.isNullOrUndefined(s.maxTime)&&e.trim(s.maxTime)&&this._isValid(s.maxTime)&&(this.model.maxTime=s.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes()),this._validateMinMax(),this._createMinMaxObj(),t.isNullOrUndefined(s.minTime)||(s.minTime=this.model.minTime),t.isNullOrUndefined(s.maxTime)||(s.maxTime=this.model.maxTime),this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime))),i!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(e){var i,s,a,n,r=!1,o=this.model.value;for(i in e)switch(i){case"timeFormat":a=this._createObject(this.model.value),this._preTimeformat=this.model.timeFormat,s=this._timeFormat(e[i]),e[i]=this.model.timeFormat,s&&(this.seperator=this._getSeperator()),r=+a!=+this._createObject(this.model.value);break;case"locale":a=this._createObject(this.model.value),this._localize(e[i]),this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),r=+a!=+this._createObject(this.model.value);break;case"interval":this.model.interval=e[i];break;case"cssClass":this._changeSkin(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"enableRTL":this._setRtl(e[i]);break;case"height":this._setHeight(e[i]);break;case"width":this.wrapper.width(e[i]),this._setListWidth();break;case"value":t.isPlainObject(e[i])&&(e[i]=null),this.model.value=t.format(this._createObject(e[i],!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e[i],!0)&&(n=this._isValid(e[i])?this._localizeTime(e[i]):e[i],this.element.val(n)),e[i]=this.model.value,r=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[i];break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=jsondata[key],null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=jsondata[key],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"popupHeight":this.model.popupHeight=e[i],this._setListHeight();break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"enabled":e[i]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(e[i]);break;case"disableTimeRanges":this.model.disableTimeRanges=e[i],this._initStartEnd(),this.model.value=t.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val()),r=!0}t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)||(this._setMinMaxTime(o,e),r=!0),t.isNullOrUndefined(e.showPopupButton)?!this.model.showPopupButton||!s&&t.isNullOrUndefined(e.minTime)&&t.isNullOrUndefined(e.maxTime)&&t.isNullOrUndefined(e.locale)&&t.isNullOrUndefined(e.interval)&&t.isNullOrUndefined(e.disableTimeRanges)||this._reRenderDropdown():this._showButton(e[i]),r&&(this._raiseChangeEvent(o,!0),e.value=this.model.value),this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value")),this._cloneElement.attr("name")||this.element.removeAttr("name"),this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0],this.timeIcon=null,this._disabledItems=[],this.popupList=null,this.focused=!1,this.start=0,this.end=0,this.min=null,this.max=null,this.incomplete=!1,this.downPosition=0,this._setLocalize(this.model.locale),this._setMinMax(),this._getAmPm(),this.showDropdown=!1,this._activeItem=0,this.isValidState=!0,this._manualFocus=!1,this._isIE7=this._checkIE7(),this._initStartEnd(),t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._getInternalEvents=!1,this._dateTimeInternal=!1,this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper(),this._setDimentions(),this._renderTimeIcon(),this._validateTimes(),this._createMinMaxObj(),this._renderDropdown(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this._enableMask(),this._checkErrorClass(),this.element.attr({"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value}),(this.model.showPopupButton||!t.isNullOrUndefined(this.popupList))&&this.ul.find("li").attr({tabindex:-1,"aria-selected":!1})},_renderWrapper:function(){this.element.addClass("e-input").attr("tabindex","0"),this.wrapper=t.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container)},_addAttr:function(i){var s=this;e.map(i,function(e,i){var a=i.toLowerCase();"class"==a?s.wrapper.addClass(e):"disabled"==a&&"disabled"==e?s.disable():"readOnly"==a&&"readOnly"==e?s.model.readOnly=!0:"style"==a||"id"==a?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_initTimeValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setTimeValidation:function(){var i,s,a,n;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(a=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessages)s==n&&(a=this.model.validationMessages[s]);else a=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=a?a:e.validator.messages[s]}},_renderTimeIcon:function(){if(this.model.showPopupButton){this.timeIcon=t.buildTag("span.e-select").attr({role:"button","aria-label":"select"});var e=t.buildTag("span.e-icon e-arrow-sans-down").attr("role","presentation");this._isIE8&&(this.timeIcon.attr("unselectable","on"),e.attr("unselectable","on")),this.timeIcon.append(e),this.container.append(this.timeIcon).addClass("e-padding"),this._on(this.timeIcon,"mousedown",this._timeIconClick)}},_elementClick:function(){this.showDropdown||this._showResult()},_renderDropdown:function(){var i,s=e("#"+this.element[0].id+"_popup").get(0);if(s&&e(s).remove(),!this.model.showPopupButton||this.popupList)return!1;this.popupList=t.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,"aria-activedescendant":""}),t.isTouchDevice()||this.popupList.addClass("e-ntouch"),this.popup=this.popupList,this.ul=t.buildTag("ul.e-ul"),this._isIE8&&this.ul.attr("unselectable","on"),i=t.buildTag("div").append(this.ul),e("body").append(this.popupList.append(i)),this._renderLiTags(),this._setListHeight(),this._setListWidth(),this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css("display","none"),this._listSize=this.ul.find("li").length},_renderLiTags:function(){var i,s,a,n,r,o,l,d;for(this._disabledItems=[],n=6e4*this.model.interval,r=!t.isNullOrUndefined(this.model.disableTimeRanges)&&this.model.disableTimeRanges.length>0,i=this._minTimeObj,s=this._maxTimeObj,o=0;this._compareTime(s,i,!0);)a=this._localizeTime(i),(l=e(document.createElement("li")))[0].appendChild(document.createTextNode(a)),this._isIE8&&l.attr("unselectable","on"),r&&(this._ensureTimeRange(a)?(l.addClass("e-disable"),this._disabledItems.push(o)):l.removeClass("e-disable")),this.ul[0].appendChild(l[0]),i=new Date(i).getTime()+n,o++;d=this.ul.find("li"),t.isTouchDevice()||(this._on(d,"mouseenter",e.proxy(this._OnMouseEnter,this)),this._on(d,"mouseleave",e.proxy(this._OnMouseLeave,this))),this._on(d,"click",e.proxy(this._OnMouseClick,this))},_ensureTimeRange:function(e){if(!t.isNullOrUndefined(this.model.disableTimeRanges)){var s=this._makeDateTimeObj(e);for(i=0;i<this.model.disableTimeRanges.length;i++)if(+s>=+this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime)&&+s<=+this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime))return!0}return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)this._startTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime),this._endTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime)},_makeDateTimeObj:function(e){var i;if("string"==typeof e){var s=t.preferredCulture(this.model.locale).calendar.patterns.d,a=t.format(new Date("1/1/2000"),s,this.model.locale),n=t.parseDate(a+" "+e,s+" "+this.model.timeFormat);if(!n){if(i=new Date(e),!isNaN(Date.parse(i))&&!t.isNullOrUndefined(e))return this._setEmptyDate(e);n=new Date("1/1/2000 "+e)}return n}return e instanceof Date?this._setEmptyDate(e):null},_reRenderDropdown:function(){this.ul.empty(),this._renderLiTags(),this._refreshScroller(),this._changeActiveEle()},_refreshScroller:function(){var t="none"==this.popupList.css("display");this.popupList.css("height","auto"),this.popupList.find(".e-content, .e-vscroll").removeAttr("style"),this.popupList.find(".e-vscroll div").removeAttr("style"),t&&this.popupList.css("display","block"),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this._isIE8&&(e("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),e("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on")),t&&this.popupList.css("display","none")},_setListWidth:function(){if(this.popupList){var e=this.model.popupWidth;e&&"auto"!=e?this.popupList.css({width:e}):this.popupList.css({width:this.wrapper.width()})}this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"}),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.popupList.css({width:this.wrapper.width()}),this._setListPosition(),this._refreshScroller()},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),a=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),n=s.top-e(document).scrollTop(),r=this.popupList.outerHeight(),o=this.popupList.outerWidth(),l=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),m=(r<a||r>n?s.top+d+3:s.top-r-3)-h;t=e(document).scrollLeft()+e(window).width()-l,(this.model.enableRTL||o>t&&o<l+i.outerWidth())&&(l-=this.popupList.outerWidth()-i.outerWidth()),this.popupList.css({left:l+"px",top:m+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.isValidState=!(this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)),this._setTime(this.model.value),this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange"),this._changeActiveEle(),this._preVal=this.element.val()},_setTime:function(e){var t=this._localizeTime(e);this.element.val(t),this.model.value=t},_timeFromISO:function(e){var t,i,s,a,n,r,o,l,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",m="",u="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){m=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(u="Z"),s=(c+m+u).match(this._tokens),n=[],o=0;o<s.length;o++)l=s[o],r=this._checkLiteral(s[o]),d=this._numberRegex[r?s[o].toLowerCase():l.length]||new RegExp("^\\d{1,"+l.length+"}"),(a=e.match(d))&&(e.substr(0,e.indexOf(a))>=0&&!r&&(s[o].indexOf("M")>=0?n.push(parseInt(a[0])-1):n.push(parseInt(a[0]))),e=e.slice(e.indexOf(a[0])+a[0].length));return new Date(n[0],n[1],n[2],n[3],n[4],n[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_setMask:function(){this.model.value=new Date,this._enableMask()},_validateTimes:function(){var e=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=e||"h:mm tt",this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM"),this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM"),this._isValid(this.model.value,!0)||(this.model.value=null),this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)),this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable()),this._addProperty(),this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(t){this.model.showPopupButton=t,t?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id}),"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"}),"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var t=new Date;t.setHours(0),this.ttAM=e.trim(this._localizeMeridian(t)),t.setHours(23),this.ttPM=e.trim(this._localizeMeridian(t))},_setDimentions:function(){this._setHeight(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(e){e&&this.wrapper.height(e),this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(t){var i=t.split(" "),s="";return 1==i.length||2==i.length?(e(i).each(function(t,i){s+=e.trim(i)+" "}),e.trim(s)):null},_getSeperator:function(){for(var e=this._getElePlace(),t=this.model.timeFormat.split(" ")[e.time],i=new RegExp("^[a-zA-Z0-9]+$"),s=0;s<t.length;s++)if(!i.test(t.charAt(s)))return t.charAt(s)},_checkInComplete:function(){var e=this._getCaretSelection(),t=this._getStartEnd(e),i="00",s=this._getSelectedValue(t),a=this._getCategory(t);e.end-e.start==this.element.val().length&&this._checkAll(),a&&"tt"!=a&&(this._findCategoryPosition(a),"__"==s?(("h"==a||"hh"==a)&&(i="12"),this._changeToDefault(i)):1!=a.length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))))},_checkAll:function(){for(var e,t=this._getElePlace(),i=this.model.timeFormat.split(" ")[t.time].split(this.seperator),s=0;s<i.length;s++)this._findCategoryPosition(i[s]),e=this._getSelectedValue({start:this.start,end:this.end}),1!=i[s].length&&1==e.length&&(e=this._changeWhole(e),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,e)))},_changeToDefault:function(e){var t,i;this.incomplete=!0,t=this.element[0].value,this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,e),!(i=this._checkExceedRange(this.target.value))||this._setTime(this.model[i]),this._setSelection(this.start,this.end),this._raiseChangeEvent(t)},_setSelection:function(e,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(e,t):i.createTextRange&&((i=i.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())},_getSelectedValue:function(e){return this.target.value.substring(e.start,e.end)},_getMinMax:function(e,t){"hh"==e||"h"==e?(this.min=1,this.max=11,t&&(this.max=12)):"HH"==e||"H"==e?(this.min=0,this.max=23):("mm"==e||"m"==e||"ss"==e||"s"==e)&&(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0,this.element.focus()},_targetFocus:function(t){this._clearRange(),t.preventDefault(),this.focused=!0,this.element.on("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false"),this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end)),this._manualFocus=!1,this._prevTimeVal=this.element.val(),this._raiseEvent("focusIn")},_targetBlur:function(){this.focused=!1,this.element.off("mousewheel DOMMouseScroll",e.proxy(this._mouseWheel,this)),this.wrapper.removeClass("e-focus"),this.model.enableStrictMode||this.target.value.indexOf("_")>-1&&this.element.val(""),!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0):this.isValidState=!0,this._ensureValue(),this._raiseChangeEvent(),this._checkErrorClass(),this._raiseEvent("focusOut"),this.model.enableStrictMode||this._checkInComplete()},_clearRange:function(){var e=this.element[0];isNaN(e.selectionStart)||(e.selectionStart=0,e.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getCaretSelection:function(){var e,t,i,s,a=this.element[0],n=0,r=0;return isNaN(a.selectionStart)?(e=document.selection.createRange().getBookmark(),(t=a.createTextRange()).moveToBookmark(e),(i=a.createTextRange()).collapse(!0),i.setEndPoint("EndToStart",t),{start:s=i.text.length,end:s+t.text.length}):(n=a.selectionStart,r=a.selectionEnd,{start:Math.abs(n),end:Math.abs(r)})},_mouseDownOnInput:function(){this.focused||t.isTouchDevice()||this._focusElement(),this.downPosition=this._getCaretSelection(),e(document).on("mouseup",e.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(t){t.preventDefault(),e(document).off("mouseup",e.proxy(this._mouseUpOnInput,this));var i=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,i=this.downPosition),this.target.value!=this._getSelectedText()&&(i=this._getStartEnd(i),this._setSelection(i.start,i.end))},_getCategoryPosition:function(e){var t,i,s=0,a=0,n=this.target.value.split(" "),r=this._getElePlace(),o=this.seperator,l=!1,d=this.model.timeFormat.split(" ")[r.time].split(o),h=n[r.time].split(o);if(d.length>h.length)return{start:s,end:a,isValid:l};if("tt"==e)(n[r.tt]==this.ttAM||n[r.tt]==this.ttPM)&&(a=(s=0==r.tt?0:n[r.time].length+1)+n[r.tt].length,l=!0);else if(s=0==r.time?0:n[r.tt].length+1,-1!=(t=d.indexOf(e))){for(i=0;i<d.length&&(a=h[i].length+1,i!=t);i++)s+=a;a+=s-1,l=!0}return{start:s,end:a,isValid:l}},_getCategory:function(e){var t=this.model.timeFormat.split(" "),i=this.seperator,s=this._getElePlace();return e.isTT?t[s.tt]:t[s.time].split(i)[e.index]},_getStartEnd:function(e){for(var t,i=this.seperator,s=this.element.val().split(" "),a=0,n=0,r=tt=null,o=0;o<s.length;o++)if(s[o]!=this.ttAM&&s[o]!=this.ttPM){var l=s[o].split(i),d=a,h=a+l[0].length;for(t=0;t<l.length;t++){if(n=l[t].length+a,e.start<=n){r=t,tt=!1,o=s.length;break}a+=l[t].length+1}}else{if(e.start<=a+s[o].length){n=s[o].length+a,r=0,tt=!0,o=s.length;break}a+=s[o].length+1}return null==r&&(a=d,n=h,r=0,tt=!1),{start:a,end:n,index:r,isTT:tt}},_modifyValue:function(e){var t,i,s,a;this._isValid(this.target.value)&&(this.model.enableStrictMode||this._checkInComplete(),(t=this._getCaretSelection()).start==t.end?(s=this._getLeast(!0),a=this._getCategoryPosition(s),i=this._getStartEnd(a)):i=this._getStartEnd(t),this.start=i.start,this.end=i.end,this._changeValue(i,e))},_keyUpOnInput:function(e){e.preventDefault(),this._preVal!=this.element.val()&&(this._preVal=this.element.val())},_getNextCategory:function(t,i){var s,a,n=[],r=this.seperator,o=this.model.timeFormat.split(" ");return e(o).each(function(e,t){if("tt"==t)n.push(t);else{var i=t.split(r);n=i.concat(n)}}),-1!=(s=n.indexOf(t))?(a=i?0==s?n.length-1:s-1:s==n.length-1?0:s+1,n[a]):t},_getElePlace:function(){var e,t;return"tt"==this.model.timeFormat.split(" ")[0]?(e=1,t=0):(e=0,t=1),{time:e,tt:t}},_movePosition:function(e,t){var i,s=this._getStartEnd(e),a=this._getCategory(s);a||(a=this._getLeast(t)),i=this._getNextCategory(a,t),(s=this._getCategoryPosition(i)).isValid&&this._setSelection(s.start,s.end)},_findActiveIndex:function(){var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(e){var t,i,s,a,n,r,o,l,d,h,c,m,u,p,_,f,v,g,y,b;if(this.model.readOnly&&!this._readOnlyKeys(e)||(s=e.keyCode,this._getInternalEvents&&38!=s&&40!=s&&36!=s&&35!=s&&9!=s))return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&38!=s&&40!=s&&27!=s&&!this._readOnlyKeys(e))return!1;this.showDropdown&&(37==s||39==s)&&(e.keyCode=37==s?38:40)}switch(t=this._getCaretSelection(),b=this._getStartEnd(t),i=this._getCategory(b),e.keyCode){case 38:e.preventDefault(),this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),activeItem=this._getActiveItem(),activeItem.length&&this._selectTimeItem(activeItem)):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:e.preventDefault(),e.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:e.preventDefault(),t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:e.preventDefault(),t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:e.preventDefault(),this.showDropdown?(this._activeItem=0,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):(a=this._firstlastVal(!0),(n=this._getCategoryPosition(a)).isValid&&this._setSelection(n.start,n.end));break;case 35:e.preventDefault(),this.showDropdown?(this._activeItem=this._listSize+1,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=prevActiveItem),this._addListHover(),this._selectTimeItem(this._getActiveItem())):(r=this._firstlastVal(!1),(o=this._getCategoryPosition(r)).isValid&&this._setSelection(o.start,o.end));break;case 9:if(this._getInternalEvents)break;this._hideResult(),l=null,e.shiftKey&&t.start>0?l=!0:!e.shiftKey&&t.end<this.element.val().length&&(l=!1),null!=l&&(e.preventDefault(),this._checkInComplete(),this._movePosition(t,l));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:e.preventDefault(),this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;this.target.value!=this._getSelectedText()&&(e.preventDefault(),i&&"tt"!=i&&(this._findCategoryPosition(i),d=8==s&&t.start!=this.start,h=46==s&&t.end!=this.end,c=this.end-this.start,t.start==t.end&&1!=c||!d&&!h&&t.start==t.end?d?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):h&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end)):(m=this.start,u=this.end,this.element[0].value=this._replaceAt(this.target.value,m,u,"__"),p=u-m!=2?u+1:u,this._setSelection(m,p))))}_=this._getSelectedValue(b),f=e.keyCode?e.keyCode:e.charCode,e.keyCode>47&&e.keyCode<58?v=String.fromCharCode(f):e.keyCode>95&&e.keyCode<106&&(v=String.fromCharCode(f-48)),"tt"==i&&(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>64&&e.keyCode<91||e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)&&(e.preventDefault(),g=this._getCategoryPosition(i),this.start=g.start,this.end=g.end,this._changeAmPm(_),this._raiseChangeEvent()),this.target.value!=this._getSelectedText()||e.shiftKey||e.ctrlKey||e.altKey||(e.keyCode>64&&e.keyCode<91&&!this.model.enableStrictMode&&e.preventDefault(),(e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106)&&(b=this._getStartEnd(t),this._setSelection(b.start,b.end))),!e.shiftKey&&!e.ctrlKey&&!e.altKey&&e.keyCode>47&&e.keyCode<58||e.keyCode>95&&e.keyCode<106?"tt"!=i&&(this._getMinMax(i,!0),t.start==t.end?(this._findCategoryPosition(i),t.start==this.start?(y=v+_,this.element.val(this.model.minTime),b=this._getStartEnd(t),this._setSelection(b.start,b.end)):y=_+v,(y.length>2||!(Number(y)>=this.min&&this.max>=Number(y)))&&(this.model.enableStrictMode||e.preventDefault())):Number(v)>=this.min&&this.max>=Number(v)||this.model.enableStrictMode||e.preventDefault()):this._allowKeyCodes(e)||(this.model.enableStrictMode||8==e.keyCode||46==e.keyCode?e.stopPropagation():e.preventDefault())},_getSelectedText:function(){if(window.getSelection){var t=e("#"+this.element[0].id).get(0);return t.value.substring(t.selectionStart,t.selectionEnd)}return document.selection.createRange().text},_allowKeyCodes:function(e){return!((!e.ctrlKey||65!=e.keyCode&&67!=e.keyCode&&90!=e.keyCode&&89!=e.keyCode)&&9!=e.keyCode&&116!=e.keyCode&&13!=e.keyCode)},_readOnlyKeys:function(e){return!(35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&!this._allowKeyCodes(e))},_firstlastVal:function(e){var t,i=this.model.timeFormat.split(" "),s=this.seperator;return e?"tt"!=i[0]?i[0].split(s)[0]:"tt":"tt"!=i[0]?"tt":i[1]&&(t=i[1].split(s)).length?t[t.length-1]:"tt"},_mouseWheel:function(e){if(e.preventDefault(),this.model.readOnly)return!1;var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected(),this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var e=this._getActiveItem();e.length&&!e.hasClass("e-disable")&&e.addClass("e-active")},_disableItemSelectDown:function(t){return(null==t||t<0)&&(t=0),t<this._listSize?e.inArray(t,this._disabledItems)<0?t:this._disableItemSelectDown(t+1):this._listSize},_disableItemSelectUp:function(t){if((null==(t-=1)||t<0)&&(t=0),t<this._listSize){if(e.inArray(t,this._disabledItems)<0)return t+1;if(t>0)return this._disableItemSelectUp(t)}return 0},_getActiveItem:function(){return e(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(e){var i,s=!1;if(e.button?s=2==e.button:e.which&&(s=3==e.which),!s){if(e.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup(),i=this.element.val().length,t.isTouchDevice()||this._setSelection(i,i)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){this._raiseEvent("beforeOpen"),this._refreshPopup(),this.focused||t.isTouchDevice()||this._focusElement(),this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var i=this,s=this._vissibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){e(document).on("mousedown",e.proxy(i._OnDocumentClick,i))}),this.scrollerObj.setModel({scrollTop:s}),this.showDropdown=!0,this._listSize=this.ul.find("li").length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this.wrapper.addClass("e-active")},_hideResult:function(){this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_vissibleAndCalculateTop:function(){this.popupList.css({display:"block"});var e=this._calcScrollTop();return this.popupList.css({display:"none"}),e},_calcScrollTop:function(){this.ul.outerHeight();var e=this.ul.find("li").outerHeight();return e*this.ul.find("li.e-active").index()-(this.popupList.outerHeight()-e)/2},_changeActiveEle:function(){if(!this.model.showPopupButton||!this.popupList)return!1;var e,t=this.ul.find("li"),i=this.element.val(),s=t.first().html();e=(this._parse(i)-this._parse(s))/(6e4*this.model.interval),e=Math.round(e),this._activeItem=e==t.length?e:e+1,(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem)||this._ensureTimeRange(i))&&(this._activeItem=0),this._addListHover()},_OnDocumentClick:function(t){e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-timewidget").is(this.wrapper)?(e(t.target).is(this.popupList)||e(t.target).parents(".e-time-popup").is(this.popupList))&&t.preventDefault():this._hideResult()},_OnWindowResize:function(){this._refreshPopup()},_OnMouseEnter:function(t){var i=t.target;this.ul.find("li").removeClass("e-hover"),e(i).hasClass("e-disable")||e(i).addClass("e-hover")},_OnMouseLeave:function(){(!this._dateTimeInternal||this.model.value)&&this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(t){t.preventDefault(),e(t.target).hasClass("e-disable")||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=e(t.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),e(t.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(e(t.target))),this._showhidePopup())},_selectTimeItem:function(e){this._beforeChange(e),this._raiseChangeEvent()&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(e){"least"==e&&(e=this._getLeast(!0));var t=this._getCategoryPosition(e);this.start=t.start,this.end=t.end},_getLeast:function(t){var i=this.model.timeFormat.split(" "),s=this.seperator,a=null;return e(i).each(function(e,i){if("tt"!=i){var n=i.split(s);a=t?n[n.length-1]:n[0]}}),a},_changeValue:function(e,s){this.target.value;var a,n,r=this._getCategory(e);if(!r)return!1;if(this._setSelection(this.start,this.end),a=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(a!=this.ttAM&&a!=this.ttPM){if(a=this._changeCurrentValue(a,r,s),1!=r.length&&(a=this._changeWhole(a)),this._findCategoryPosition(r),this.element.val(this._replaceAt(this.target.value,this.start,this.end,a)),this.end=this.start+a.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var o=this._createObject(this.target.value),l=o.getHours(),d=s?this._startTime:this._endTime,h=s?this._endTime:this._startTime;if(!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)(d[i].getHours()===l||+o>=+this._startTime[i]&&+o<=+this._endTime[i])&&(this.target.value=this._localizeTime(h[i]),this._setSelection(this.start,this.end),this._changeValue(e,s))}}else this._changeAmPm(a);else n=this._checkExceedRange(this.target.value),this._setTime(this.model[n]),this._findCategoryPosition(r),this._setSelection(this.start,this.end);this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(r),this._setSelection(this.start,this.end))},_checkMinMax:function(e){var t=this._checkExceedRange(e);return null==t&&(t=!1),!t},_checkExceedRange:function(e){if(e){if(this.model.minTime&&!this._compareTime(e,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,e,!0))return"maxTime"}return null},_changeWhole:function(e){return e>9?""+e:"0"+e},_changeAmPm:function(e){e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)),this._setSelection(this.start,this.end)},_changeMinute:function(e){var t,i=this._getExactFormat(["mm","m"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t=this.min,this._changeHour(e)):t+=1:t==this.min?(t=this.max,this._changeHour(e)):t-=1,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_changeHour:function(e){var t,i=this._getExactFormat(["hh","h","HH","H"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t+=1,this._changeMeridian()):t>this.max?t=this.min:t+=1:t==this.min?t=this.max+1:t>this.max?(t=this.max,this._changeMeridian()):t-=1,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_getExactFormat:function(e){for(var t=this.model.timeFormat,i=0;i<e.length;i++)if(-1!=t.indexOf(e[i]))return e[i];return null},_changeMeridian:function(){var e;-1!=this.model.timeFormat.indexOf("tt")&&(this._findCategoryPosition("tt"),e=(e=this.target.value.substring(this.start,this.end))==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)))},_changeCurrentValue:function(e,t,i){e=Number(e);var s=t,a=1,n=!0;return this._getMinMax(s),"hh"==s||"h"==s||"HH"==s||"H"==s?a=this.model.hourInterval:"mm"==s||"m"==s?a=this.model.minutesInterval:("ss"==s||"s"==s)&&(a=this.model.secondsInterval),a<=0||(i?(("hh"==s||"h"==s)&&e>this.max?e=this.min-1+a:e<this.max?e+=a:(n=!1,"hh"!=s&&"h"!=s?e=this.min-1+a:e+=a,this._changeAdjacent(s,i)),"hh"!=s&&"h"!=s||e!=this.max+1?e>this.max+1&&(e-=this.max+1,n&&this._changeAdjacent(s,i)):n&&this._changeAdjacent(s,i),"hh"!=s&&"h"!=s&&e==this.max+1&&(e=this.min,n&&this._changeAdjacent(s,i))):("hh"!=s&&"h"!=s&&e>this.min||("hh"==s||"h"==s)&&e>this.min&&e<=this.max?e-=a:"hh"!=s&&"h"!=s||e!=this.min?(n=!1,e=this.max+1-a,this._changeAdjacent(s,i)):e=this.max+2-a,e<this.min&&(e+=this.max+1,n&&this._changeAdjacent(s,i)))),e},_changeAdjacent:function(e,t){"ss"==e||"s"==e?this._changeMinute(t):"mm"==e||"m"==e?this._changeHour(t):("hh"==e||"h"==e||"HH"==e||"H"==e)&&this._changeMeridian()},_valueChange:function(){this._raiseChangeEvent()},_beforeChange:function(e){return this._raiseEvent("beforeChange")||this.element.val(e.text()),!0},_raiseChangeEvent:function(e,t){return e=e===s?this.model.value:e,this._previousValue=e,current=this.target.value?this.target.value:null,e!=current&&(this.isValidState=!!(this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value),this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value!=this._previousValue&&(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0))},_raiseEvent:function(e,t){var i={value:this.model.value,prevTime:this._previousValue};return"change"==e&&(i.isInteraction=!t),this._trigger(e,i)},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e>=7&&e<8)return!0}return!1},_replaceAt:function(e,t,i,s){return e.substring(0,t)+s+e.substring(i)},_localizeTime:function(i){return i?e.trim(t.format(this._createObject(i),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(i){return e.trim(t.format(i,"tt",this.model.locale))},_compareTime:function(e,t,i){return(i=!!i)?this._parse(e)>=this._parse(t):this._parse(e)>this._parse(t)},_isValid:function(e,t){return(e=this._createObject(e,t))&&"function"==typeof e.getTime&&isFinite(e.getTime())},_parse:function(e){return Date.parse(this._createObject(e))},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_createObject:function(e,i){var s,a,n=null;if("string"==typeof e){var r=this._setModelOption?this._preTimeformat:this.model.timeFormat,o=t.preferredCulture(this.model.locale).calendar.patterns.d,l=t.format(new Date("1/1/2000"),o,this.model.locale);n=t.parseDate(l+" "+e,o+" "+r,this.model.locale),(this._extISORegex.exec(e)||this._basicISORegex.exec(e))&&(this.model.value=n=this._timeFromISO(e)),this._setModelOption=!1,n||(s=new Date(e),n=isNaN(Date.parse(s))||t.isNullOrUndefined(e)?this._dateTimeInternal&&""!=e?new Date("1/1/2000 "+e):null:this._setEmptyDate(e))}else"number"==typeof e?n=new Date(e):e instanceof Date&&(n=this._setEmptyDate(e));return n&&!this._dateTimeInternal&&i&&(a=this._localizeTime(n),this._ensureTimeRange(a)&&(n=null)),n},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"mousedown",this._mouseDownOnInput),this._on(this.element,"keydown",this._keyDownOnInput),this._on(this.element,"keyup",this._keyUpOnInput)}})}),
/*!
* Globalize
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*/
function(e){var t,i,s,a,n,r,o,l,d,h,c,m,u,p,_,f,v,g,y,b,w,D,k,C;t=function(e){return new t.prototype.init(e)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=t:e.Globalize=t,t.cultures={},t.prototype={constructor:t,init:function(e){return this.cultures=t.cultures,this.cultureSelector=e,this}},t.prototype.init.prototype=t.prototype,t.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},t.cultures.default.calendar=t.cultures.default.calendars.standard,t.cultures.en=t.cultures.default,t.cultureSelector="en",i=/^0x[a-f0-9]+$/i,s=/^[+\-]?infinity$/i,a=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,n=/^\s+|\s+$/g,r=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},o=function(e,t){return e.substr(e.length-t.length)===t},l=function(){var e,t,i,s,a,n,r=arguments[0]||{},o=1,m=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[1]||{},o=2),"object"==typeof r||h(r)||(r={});o<m;o++)if(null!=(e=arguments[o]))for(t in e)i=r[t],r!==(s=e[t])&&(u&&s&&(c(s)||(a=d(s)))?(a?(a=!1,n=i&&d(i)?i:[]):n=i&&c(i)?i:{},r[t]=l(u,n,s)):undefined!==s&&(r[t]=s));return r},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=function(e){return"[object Function]"===Object.prototype.toString.call(e)},c=function(e){return"[object Object]"===Object.prototype.toString.call(e)},m=function(e,t){return 0===e.indexOf(t)},u=function(e){return(e+"").replace(n,"")},p=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},_=function(e,t,i){for(var s=e.length;s<t;s+=1)e=i?"0"+e:e+"0";return e},f=function(e,t){for(var i,s=0,a=!1,n=0,r=e.length;n<r;n++)switch(i=e.charAt(n)){case"'":a?t.push("'"):s++,a=!1;break;case"\\":a&&t.push("\\"),a=!a;break;default:t.push(i),a=!1}return s},v=function(e,t){t=t||"F";var i,s=e.patterns,a=t.length;if(1===a){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===a&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},g=function(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=M[t-2]+s).substr(i.length-t,t):i=s}function a(){return C||T||(C=S.test(t),T=!0),C}function n(e,t){if(x)return x[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var r,o,l,d,h,c,m,u,p,_=i.calendar,y=_.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?y?r=g(e,_.patterns.F,i):(o=new Date(e.getTime()),l=w(e,_.eras),o.setFullYear(D(e,_,l)),r=o.toLocaleString()):r=e.toString(),r;d=_.eras,h="s"===t,t=v(_,t),r=[];var k,C,T,x,M=["0","00","000"],S=/([^d]|^)(d|dd)([^d]|$)/g,O=0,I=b();for(!h&&y&&(x=y.fromGregorian(e));;){var P=I.lastIndex,F=I.exec(t),V=t.slice(P,F?F.index:t.length);if(O+=f(V,r),!F)break;if(O%2)r.push(F[0]);else switch(m=(c=F[0]).length,c){case"ddd":case"dddd":u=3===m?_.days.namesAbbr:_.days.names,r.push(u[e.getDay()]);break;case"d":case"dd":C=!0,r.push(s(n(e,2),m));break;case"MMM":case"MMMM":p=n(e,1),r.push(_.monthsGenitive&&a()?_.monthsGenitive[3===m?"namesAbbr":"names"][p]:_.months[3===m?"namesAbbr":"names"][p]);break;case"M":case"MM":r.push(s(n(e,1)+1,m));break;case"y":case"yy":case"yyyy":p=x?x[0]:D(e,_,w(e,d),h),m<4&&(p%=100),r.push(s(p,m));break;case"h":case"hh":0===(k=e.getHours()%12)&&(k=12),r.push(s(k,m));break;case"H":case"HH":r.push(s(e.getHours(),m));break;case"m":case"mm":r.push(s(e.getMinutes(),m));break;case"s":case"ss":r.push(s(e.getSeconds(),m));break;case"t":case"tt":p=e.getHours()<12?_.AM?_.AM[0]:" ":_.PM?_.PM[0]:" ",r.push(1===m?p.charAt(0):p);break;case"f":case"ff":case"fff":r.push(s(e.getMilliseconds(),3).substr(0,m));break;case"z":case"zz":k=e.getTimezoneOffset()/60,r.push((k<=0?"+":"-")+s(Math.floor(Math.abs(k)),m));break;case"zzz":k=e.getTimezoneOffset()/60,r.push((k<=0?"+":"-")+s(Math.floor(Math.abs(k)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":_.eras&&r.push(_.eras[w(e,d)].name);break;case"/":r.push(_["/"]);break;default:throw"Invalid date format pattern '"+c+"'."}}return r.join("")},function(){var e;e=function(e,t,i){var s=i.groupSizes,a=s[0],n=1,r=Math.pow(10,t),o=Math.round(e*r)/r;isFinite(o)||(o=e);var l=(e=o)+"",d="",h=l.split(/e/i),c=h.length>1?parseInt(h[1],10):0;h=(l=h[0]).split("."),l=h[0],d=h.length>1?h[1]:"",c>0?(l+=(d=_(d,c,!1)).slice(0,c),d=d.substr(c)):c<0&&(d=(l=_(l,(c=-c)+1,!0)).slice(-c,l.length)+d,l=l.slice(0,-c)),d=t>0?i["."]+(d.length>t?d.slice(0,t):_(d,t)):"";for(var m=l.length-1,u=i[","],p="";m>=0;){if(0===a||a>m)return l.slice(0,m+1)+(p.length?u+p+d:d);p=l.slice(m-a+1,m+1)+(p.length?u+p:""),m-=a,n<s.length&&(a=s[n],n++)}return l.slice(0,m+1)+u+p+d},y=function(t,i,s){var a,n,r,o,l,d;if(!isFinite(t))return t===1/0?s.numberFormat.positiveInfinity:t===-1/0?s.numberFormat.negativeInfinity:s.numberFormat.NaN;if(!i||"i"===i)return s.name.length?t.toLocaleString():t.toString();i=i||"D";var h,c=s.numberFormat,m=Math.abs(t),u=-1;switch(i.length>1&&(u=parseInt(i.slice(1),10)),a=i.charAt(0).toUpperCase()){case"D":h="n",m=p(m),-1!==u&&(m=_(""+m,u,!0)),t<0&&(m="-"+m);break;case"N":n=c;case"C":n=n||c.currency;case"P":n=n||c.percent,h=t<0?n.pattern[0]:n.pattern[1]||"n",-1===u&&(u=n.decimals),m=e(m*("P"===a?100:1),u,n);break;default:throw"Bad number format specifier: "+a}for(r=/n|\$|-|%/g,o="";l=r.lastIndex,d=r.exec(h),o+=h.slice(l,d?d.index:h.length),d;)switch(d[0]){case"n":o+=m;break;case"$":o+=c.currency.symbol;break;case"-":/[1-9]/.test(m)&&(o+=c["-"]);break;case"%":o+=c.percent.symbol}return o}}(),b=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},w=function(e,t){var i,s,a,n;if(!t)return 0;for(s=e.getTime(),a=0,n=t.length;a<n;a++)if(null===(i=t[a].start)||s>=i)return a;return 0},D=function(e,t,i,s){var a=e.getFullYear();return!s&&t.eras&&(a-=t.eras[i].offset),a},function(){var e,t,i,s,a,n,o;e=function(e,t){if(t<100){var i=new Date,s=w(i),a=D(i,e,s),n=e.twoDigitYearMax;(t+=a-a%100)>(n="string"==typeof n?(new Date).getFullYear()%100+parseInt(n,10):n)&&(t-=100)}return t},t=function(e,t,i){var s,a=e.days,l=e._upperDays;return l||(e._upperDays=l=[o(a.names),o(a.namesAbbr),o(a.namesShort)]),t=n(t),i?-1===(s=r(l[1],t))&&(s=r(l[2],t)):s=r(l[0],t),s},i=function(e,t,i){var s,a=e.months,l=e.monthsGenitive||e.months,d=e._upperMonths,h=e._upperMonthsGen;return d||(e._upperMonths=d=[o(a.names),o(a.namesAbbr)],e._upperMonthsGen=h=[o(l.names),o(l.namesAbbr)]),t=n(t),(s=r(i?d[1]:d[0],t))<0&&(s=r(i?h[1]:h[0],t)),s},s=function(e,t){var i,s,a,n,r,o,l=e._parseRegExp;if(l){if(i=l[t])return i}else e._parseRegExp=l={};for(var d,h=v(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],m=[],u=0,p=0,_=b();null!==(d=_.exec(h));)if(s=h.slice(u,d.index),u=_.lastIndex,(p+=f(s,c))%2)c.push(d[0]);else{switch(n=(a=d[0]).length,a){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":r="(\\D+)";break;case"tt":case"t":r="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":r="(\\d{"+n+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":r="(\\d\\d?)";break;case"zzz":r="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":r="([+-]?\\d\\d?)";break;case"/":r="(\\/)";break;default:throw"Invalid date format pattern '"+a+"'."}r&&c.push(r),m.push(d[0])}return f(h.slice(u),c),c.push("$"),o={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:m},l[t]=o},a=function(e,t,i){return e<t||e>i},n=function(e){return e.split(" ").join(" ").toUpperCase()},o=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=n(e[i]);return t},k=function(n,r,o){var l,d,h,c,p,_,f,v,g,y,b,w;n=u(n);var D=o.calendar,k=s(D,r),C=new RegExp(k.regExp).exec(n);if(null===C)return null;var T,x=k.groups,M=null,S=null,O=null,I=null,P=null,F=0,V=0,H=0,E=0,L=null,A=!1;for(l=0,d=x.length;l<d;l++)if(h=C[l+1]){var R=x[l],N=R.length,j=parseInt(h,10);switch(R){case"dd":case"d":if(a(I=j,1,31))return null;break;case"MMM":case"MMMM":if(O=i(D,h,3===N),a(O,0,11))return null;break;case"M":case"MM":if(a(O=j-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(S=N<4?e(D,j):j,a(S,0,9999))return null;break;case"h":case"hh":if(12===(F=j)&&(F=0),a(F,0,11))return null;break;case"H":case"HH":if(a(F=j,0,23))return null;break;case"m":case"mm":if(a(V=j,0,59))return null;break;case"s":case"ss":if(a(H=j,0,59))return null;break;case"tt":case"t":if(!(A=D.PM&&(h===D.PM[0]||h===D.PM[1]||h===D.PM[2]))&&(!D.AM||h!==D.AM[0]&&h!==D.AM[1]&&h!==D.AM[2]))return null;break;case"f":case"ff":case"fff":if(E=j*Math.pow(10,3-N),a(E,0,999))return null;break;case"ddd":case"dddd":if(P=t(D,h,3===N),a(P,0,6))return null;break;case"zzz":if(2!==(c=h.split(/:/)).length||(T=parseInt(c[0],10),a(T,-12,13))||(p=parseInt(c[1],10),a(p,0,59)))return null;L=60*T+(m(h,"-")?-p:p);break;case"z":case"zz":if(a(T=j,-12,13))return null;L=60*T;break;case"g":case"gg":if(!(_=h)||!D.eras)return null;for(_=u(_.toLowerCase()),f=0,v=D.eras.length;f<v;f++)if(_===D.eras[f].name.toLowerCase()){M=f;break}if(null===M)return null}}if(g=new Date,y=(b=D.convert)?b.fromGregorian(g)[0]:g.getFullYear(),null===S?S=y:D.eras&&(S+=D.eras[M||0].offset),null===O&&(O=0),null===I&&(I=1),b){if(null===(g=b.toGregorian(S,O,I)))return null}else if(g.setFullYear(S,O,I),g.getDate()!==I||null!==P&&g.getDay()!==P)return null;return A&&F<12&&(F+=12),g.setHours(F,V,H,E),null!==L&&(w=g.getMinutes()-(L+g.getTimezoneOffset()),g.setHours(g.getHours()+parseInt(w/60,10),w%60)),g}}(),C=function(e,t,i){var s,a=t["-"],n=t["+"];switch(i){case"n -":a=" "+a,n=" "+n;case"n-":o(e,a)?s=["-",e.substr(0,e.length-a.length)]:o(e,n)&&(s=["+",e.substr(0,e.length-n.length)]);break;case"- n":a+=" ",n+=" ";case"-n":m(e,a)?s=["-",e.substr(a.length)]:m(e,n)&&(s=["+",e.substr(n.length)]);break;case"(n)":m(e,"(")&&o(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},t.prototype.findClosestCulture=function(e){return t.findClosestCulture.call(this,e)},t.prototype.format=function(e,i,s){return t.format.call(this,e,i,s)},t.prototype.localize=function(e,i){return t.localize.call(this,e,i)},t.prototype.parseInt=function(e,i,s){return t.parseInt.call(this,e,i,s)},t.prototype.parseFloat=function(e,i,s){return t.parseFloat.call(this,e,i,s)},t.prototype.culture=function(e){return t.culture.call(this,e)},t.addCultureInfo=function(e,t,i){var s={},a=!1;"string"!=typeof e?(i=e,e=this.culture().name,s=this.cultures[e]):"string"!=typeof t?(i=t,a=null==this.cultures[e],s=this.cultures[e]||this.cultures.default):(a=!0,s=this.cultures[t]),this.cultures[e]=l(!0,{},s,i),a&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},t.findClosestCulture=function(e){var t,i,s,a,n,r;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),d(e)){for(var o,l=this.cultures,h=e,c=h.length,m=[],p=0;p<c;p++)s=(e=u(h[p])).split(";"),o=u(s[0]),1===s.length?i=1:0===(e=u(s[1])).indexOf("q=")?(e=e.substr(2),i=parseFloat(e),i=isNaN(i)?0:i):i=1,m.push({lang:o,pri:i});for(m.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),p=0;p<c;p++)if(t=l[o=m[p].lang])return t;for(p=0;p<c;p++)for(o=m[p].lang;;){if(-1===(a=o.lastIndexOf("-")))break;if(t=l[o=o.substr(0,a)])return t}for(p=0;p<c;p++)for(n in o=m[p].lang,l)if((r=l[n]).language==o)return r}else if("object"==typeof e)return e;return t||null},t.format=function(e,t,i){var s=this.findClosestCulture(i);return e instanceof Date?e=g(e,t,s):"number"==typeof e&&(e=y(e,t,s)),e},t.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},t.parseDate=function(e,t,i){var s,a,n,r,o,l;if(i=this.findClosestCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(r=0,o=t.length;r<o&&(!(l=t[r])||!(s=k(e,l,i)));r++);}else for(a in n=i.calendar.patterns)if(s=k(e,n[a],i))break;return s||null},t.parseInt=function(e,i,s){return p(t.parseFloat(e,i,s))},t.parseFloat=function(e,t,n){var r,o,l,d,h,c,m,p,_,f,v;"number"!=typeof t&&(n=t,t=10);var g=this.findClosestCulture(n),y=NaN,b=g.numberFormat;if(e.indexOf(g.numberFormat.currency.symbol)>-1&&(e=(e=e.replace(g.numberFormat.currency.symbol,"")).replace(g.numberFormat.currency["."],g.numberFormat["."])),e=u(e),s.test(e))y=parseFloat(e);else if(!t&&i.test(e))y=parseInt(e,16);else{var w=C(e,b,b.pattern[0]),D=w[0],k=w[1];""===D&&"(n)"!==b.pattern[0]&&(D=(w=C(e,b,"(n)"))[0],k=w[1]),""===D&&"-n"!==b.pattern[0]&&(D=(w=C(e,b,"-n"))[0],k=w[1]),D=D||"+",(l=k.indexOf("e"))<0&&(l=k.indexOf("E")),l<0?(o=k,r=null):(o=k.substr(0,l),r=k.substr(l+1)),c=b["."],(m=o.indexOf(c))<0?(d=o,h=null):(d=o.substr(0,m),h=o.substr(m+c.length)),p=b[","],d=d.split(p).join(""),_=p.replace(/\u00A0/g," "),p!==_&&(d=d.split(_).join("")),f=D+d,null!==h&&(f+="."+h),null!==r&&(f+="e"+((v=C(r,b,"-n"))[0]||"+")+v[1]),a.test(f)&&(y=parseFloat(f))}return y},t.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this);var addScheduleDetail="";$("#StartDate_popup").remove(),$("#EndDate_popup").remove(),$("#popup-container_wrapper").remove(),$("#PopupContainer_overLay").remove(),$("#editpopup-container_wrapper").remove();var recurrenceTypeList="",days="",weeks="",months="",zoneDateTime="",sysTime="",time=new Date;"True"==timeFormat?sysTime=DateCustomFormat(dateFormat+" HH:mm",time,timeFormat):(sysTime=DateCustomFormat(dateFormat+" hh:mm",time,timeFormat),sysTime+=time.getHours()>=12?" PM":" AM"),$.ajax({type:"POST",data:{date:sysTime},url:getRecurrenceTypeUrl,async:!1,success:function(e){ShowWaitingProgress(".share-popup-header","hide"),null!=e.RecurrenceType&&e.RecurrenceType.length>0&&(recurrenceTypeList="<option value= "+e.RecurrenceType[4]+">"+window.Server.App.LocalizationContent.Hourly+"</option><option value= "+e.RecurrenceType[0]+">"+window.Server.App.LocalizationContent.Daily+"</option><option value= "+e.RecurrenceType[1]+">"+window.Server.App.LocalizationContent.Weekly+"</option><option value= "+e.RecurrenceType[2]+">"+window.Server.App.LocalizationContent.Monthly+"</option><option value= "+e.RecurrenceType[3]+">"+window.Server.App.LocalizationContent.Yearly+"</option>");for(var t=0;t<e.Days.length;t++)"weekendday"!=e.Days[t].toString().toLowerCase()&&"day"!=e.Days[t].toString().toLowerCase()&&"weekday"!=e.Days[t].toString().toLowerCase()||("weekendday"==e.Days[t].toString().toLowerCase()?days+="<option value= "+e.Days[t]+">weekendday</option>":("weekday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.WeekDay+"</option>"),"day"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Day+"</option>")));for(t=0;t<e.Days.length;t++)"weekendday"!=e.Days[t].toString().toLowerCase()&&"day"!=e.Days[t].toString().toLowerCase()&&"weekday"!=e.Days[t].toString().toLowerCase()&&("sunday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Sunday+"</option>"),"monday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Monday+"</option>"),"tuesday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Tuesday+"</option>"),"wednesday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Wednesday+"</option>"),"thursday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Thursday+"</option>"),"friday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Friday+"</option>"),"saturday"==e.Days[t].toString().toLowerCase()&&(days+="<option value= "+e.Days[t]+">"+window.Server.App.LocalizationContent.Saturday+"</option>"));weeks="<option value= "+e.Weeks[0]+">"+window.Server.App.LocalizationContent.First+"</option><option value= "+e.Weeks[1]+">"+window.Server.App.LocalizationContent.Second+"</option><option value= "+e.Weeks[2]+">"+window.Server.App.LocalizationContent.Third+"</option><option value= "+e.Weeks[3]+">"+window.Server.App.LocalizationContent.Fourth+"</option><option value= "+e.Weeks[4]+">"+window.Server.App.LocalizationContent.Last+"</option>",months="<option value= "+e.Months[0]+">"+window.Server.App.LocalizationContent.January+"</option><option value= "+e.Months[1]+">"+window.Server.App.LocalizationContent.February+"</option><option value= "+e.Months[2]+">"+window.Server.App.LocalizationContent.March+"</option><option value= "+e.Months[3]+">"+window.Server.App.LocalizationContent.April+"</option><option value= "+e.Months[4]+">"+window.Server.App.LocalizationContent.May+"</option><option value= "+e.Months[5]+">"+window.Server.App.LocalizationContent.June+"</option><option value= "+e.Months[6]+">"+window.Server.App.LocalizationContent.July+"</option><option value= "+e.Months[7]+">"+window.Server.App.LocalizationContent.August+"</option><option value= "+e.Months[8]+">"+window.Server.App.LocalizationContent.September+"</option><option value= "+e.Months[9]+">"+window.Server.App.LocalizationContent.October+"</option><option value= "+e.Months[10]+">"+window.Server.App.LocalizationContent.November+"</option><option value= "+e.Months[11]+">"+window.Server.App.LocalizationContent.December+"</option>";var i=e.TimeZoneDateTime.toString();if("dd/MM/yyyy"==dateFormat||"dd.MM.yyyy"==dateFormat)var s=i.split(/[/.]/),a=s[0],n=s[1],r=s[2],o=new Date(n+"/"+a+"/"+r);else o=new Date(i);if("True"==timeFormat)var l=DateCustomFormat(dateFormat+" HH:mm",o,timeFormat);else{l=DateCustomFormat(dateFormat+" hh:mm",o,timeFormat);l+=o.getHours()>=12?" PM":" AM"}zoneDateTime=l,$("#time").html(sysTime),$("#zone").html(String(String(time).split("(")[1]).split(")")[0]),$("#hour-difference").val(e.HourDifference),$("#minute-difference").val(e.MinuteDifference)}}),$("#recurrence-type").append(recurrenceTypeList),$("#monthly-dow-week").append(weeks),$("#monthly-dow-day").append(days),$("#yearly-month").append(months),$("#yearly-dow-week").append(weeks),$("#yearly-dow-day").append(days),$("#yearly-dow-month").append(months),$("#popup-container_wrapper").ejWaitingPopup("hide"),$("#daily-every-x-days").prop("checked",!0),$("#monthly").prop("checked",!0),$("#yearly").prop("checked",!0);var everyXDays=new ejs.inputs.NumericTextBox({value:1,min:1,max:31,width:"110px",format:"#",cssClass:"numeric-text-box-height"});everyXDays.appendTo("#every-x-days");var monthlyDate=new ejs.inputs.NumericTextBox({value:1,min:1,max:31,width:"110px",format:"#",cssClass:"numeric-text-box-height"});monthlyDate.appendTo("#monthly-date");var yearlyDay=new ejs.inputs.NumericTextBox({value:1,min:1,max:31,width:"110px",format:"#",cssClass:"numeric-text-box-height"});yearlyDay.appendTo("#yearly-day");var everyXWeeks=new ejs.inputs.NumericTextBox({value:1,min:1,max:99,width:"110px",format:"#",cssClass:"numeric-text-box-height"});everyXWeeks.appendTo("#every-x-weeks");var monthlyEveryXMonths=new ejs.inputs.NumericTextBox({value:1,min:1,max:12,width:"110px",format:"#",cssClass:"numeric-text-box-height"});monthlyEveryXMonths.appendTo("#monthly-every-x-months");var monthlydowEveryXMonths=new ejs.inputs.NumericTextBox({value:1,min:1,max:12,width:"110px",format:"#",cssClass:"numeric-text-box-height"});monthlydowEveryXMonths.appendTo("#monthly-dow-every-x-months");var everyXYears=new ejs.inputs.NumericTextBox({value:1,min:1,max:99,width:"110px",format:"#",cssClass:"numeric-text-box-height"});everyXYears.appendTo("#every-x-years");var occurenceCount=new ejs.inputs.NumericTextBox({value:1,min:1,max:999,width:"110px",format:"#",cssClass:"numeric-text-box-height"});function validateDateTimePicker(){$("#start-date").data("ejDateTimePicker"),$("#end-date").data("ejDateTimePicker");var e=$("#start-date").data("ejDateTimePicker").getValue();if("dd/MM/yyyy"==dateFormat||"dd.MM.yyyy"==dateFormat)var t=e.split(/[/.]/),i=t[0],s=t[1],a=t[2],n=(a=t[2],new Date(s+"/"+i+"/"+a));else n=new Date(e);var r="";$("#end-date").ejDateTimePicker({minDateTime:new Date(n.getFullYear(),n.getMonth(),n.getDate()),value:new Date(e)});var o=parseInt($("#hour-difference").val()),l=parseInt($("#minute-difference").val());n.setHours(n.getHours()+o),n.setMinutes(n.getMinutes()+l),"True"==timeFormat?r=DateCustomFormat(dateFormat+" HH:mm",n,timeFormat):(r=DateCustomFormat(dateFormat+" hh:mm",n,timeFormat),r+=n.getHours()>=12?" PM":" AM"),$("#time").html(r)}function createScheduleMessage(e){var t={},i=window.Server.App.LocalizationContent.Occurs;switch(t.RecurrenceFactor=$("#occurence-count").val(),$("#recurrence-type").val().toString().toLowerCase()){case"daily":$("#daily-every-x-days").prop("checked")?(t.RecurrenceType="Daily",t.RecurrenceInterval=$("#every-x-days").val(),addScheduleDetail=1==t.RecurrenceInterval?window.Server.App.LocalizationContent.EveryDay:window.Server.App.LocalizationContent.EveryMessage+t.RecurrenceInterval.toString()+window.Server.App.LocalizationContent.Days):(t.RecurrenceType="DailyWeekDay",addScheduleDetail=window.Server.App.LocalizationContent.EveryWeekDay);break;case"weekly":t.RecurrenceType="Weekly",t.RecurrenceInterval=$("#every-x-weeks").val(),t.Sunday=$("#sun").prop("checked"),t.Monday=$("#mon").prop("checked"),t.Tuesday=$("#tues").prop("checked"),t.Wednesday=$("#wed").prop("checked"),t.Thursday=$("#thu").prop("checked"),t.Friday=$("#fri").prop("checked"),t.Saturday=$("#sat").prop("checked");for(var s="",a=$(".daygroup:checked"),n=0;n<a.length;n++)s=1==a.length||0==n?$(a[n]).parent().text().trim():n>0&&n!=a.length-1?s+", "+$(a[n]).parent().text().trim():s+window.Server.App.LocalizationContent.And+$(a[n]).parent().text().trim();addScheduleDetail=1==t.RecurrenceInterval?window.Server.App.LocalizationContent.EveryWeek:window.Server.App.LocalizationContent.EveryMessage+t.RecurrenceInterval.toString()+window.Server.App.LocalizationContent.Weeks,addScheduleDetail+=""!=s?window.Server.App.LocalizationContent.On+s:"";break;case"monthly":$("#monthly").prop("checked")?(t.RecurrenceType="Monthly",t.DaysOfMonth=$("#monthly-date").val(),t.RecurrenceInterval=$("#monthly-every-x-months").val(),addScheduleDetail=window.Server.App.LocalizationContent.Day+t.DaysOfMonth.toString()+window.Server.App.LocalizationContent.Every+t.RecurrenceInterval.toString()+window.Server.App.LocalizationContent.Month):(t.RecurrenceType="MonthlyDOW",t.WeekOfMonth=$("#monthly-dow-week").find("option:selected").val(),t.DayOfWeek=$("#monthly-dow-day").find("option:selected").val(),t.RecurrenceInterval=$("#monthly-dow-every-x-months").val(),addScheduleDetail=window.Server.App.LocalizationContent.The+t.WeekOfMonth.toString()+" "+$("#monthly-dow-day").find("option:selected").val()+window.Server.App.LocalizationContent.Every+t.RecurrenceInterval.toString()+window.Server.App.LocalizationContent.Month);break;case"yearly":t.RecurrenceInterval=$("#every-x-years").val(),$("#yearly").prop("checked")?(t.RecurrenceType="Yearly",t.DaysOfMonth=$("#yearly-day").val(),t.MonthOfYear=$("#yearly-month").find("option:selected").val(),addScheduleDetail=1==t.RecurrenceInterval?window.Server.App.LocalizationContent.EveryMessage+t.MonthOfYear.toString()+" "+t.DaysOfMonth.toString():window.Server.App.LocalizationContent.EveryMessage+t.RecurrenceInterval.toString()+window.Server.App.LocalizationContent.Year+t.MonthOfYear.toString()+" "+t.DaysOfMonth.toString()):(t.RecurrenceType="YearlyDOW",t.WeekOfMonth=$("#yearly-dow-week").find("option:selected").val(),t.DayOfWeek=$("#yearly-dow-day").find("option:selected").val(),t.MonthOfYear=$("#yearly-dow-month").find("option:selected").val(),addScheduleDetail=1==t.RecurrenceInterval?window.Server.App.LocalizationContent.The+t.WeekOfMonth.toString()+" "+$("#yearly-dow-day option:selected").val()+window.Server.App.LocalizationContent.Of+t.MonthOfYear.toString():window.Server.App.LocalizationContent.EveryMessage+t.RecurrenceInterval.toString()+window.Server.App.LocalizationContent.Year+t.WeekOfMonth.toString()+" "+$("#yearly-dow-day option:selected").val()+window.Server.App.LocalizationContent.Of+t.MonthOfYear.toString());break;case"hourly":t.RecurrenceType="Hourly",t.Frequency=$(".time-width").val(),t.RecurrenceInterval=$("#every-x-hours-value").val();var r=t.Frequency.split(":"),o=(r[0],r[1],"");parseInt(r[0])>0&&(o+=r[0]+" hour(s) "),parseInt(r[1])>0&&(o+=r[1]+" minute(s)"),addScheduleDetail=window.Server.App.LocalizationContent.EveryMessage+o}var l=$("#start-date").val(),d=$("#end-date").val();switch($("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":addScheduleDetail=addScheduleDetail+" "+window.Server.App.LocalizationContent.EffectiveFrom+l;break;case"endafter":addScheduleDetail=addScheduleDetail+" "+window.Server.App.LocalizationContent.EffectiveFrom+l+window.Server.App.LocalizationContent.EndsAfter+t.RecurrenceFactor+window.Server.App.LocalizationContent.Occurrence;break;case"endBy":addScheduleDetail=addScheduleDetail+" "+window.Server.App.LocalizationContent.EffectiveFrom+l+window.Server.App.LocalizationContent.Until+d}return 2==alertChange&&e?addScheduleDetail:i+addScheduleDetail}function validateScheduleRecurrence(e){var t=$("#start-date").data("ejDateTimePicker"),i=$("#schedule-name").val();if("block"==$("#schedule-name-error-container").css("display")||$("body .loader-gif").length||""==$("#selected_category option:selected").val()||""==$("#selected_dashboard option:selected").val()||!i)return""==$("#selected_category option:selected").val()&&$("#category-message").css("display","block"),""==$("#selected_dashboard option:selected").val()&&$("#dashboard-message").css("display","block"),i||($("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.LocalizationContent.ScheduleValidator)),""!=$("#export-filename").val()&&"null"!=$("#export-filename").val()||$("#export-filename").prop("disabled",!0),!1;if(!parent.IsValidName("name",i))return $("#schedule-name-error-container").css("display","block"),$("#schedule-name-validator").html(window.Server.App.LocalizationContent.AvoidSpecialCharactors),!1;if($(e).hasClass("subscribe-body")||$(e).hasClass("schedule-settings-password-body")){switch($("#recurrence-type").val().toString().toLowerCase()){case"daily":case"monthly":break;case"weekly":if(!$('#days-check-box input[type="checkbox"]').is(":checked"))return $("#weekly-day-error-container").css("display","block"),$("#weekly-days-validator").html(window.Server.App.LocalizationContent.WeekDaysValidator),!1;$("#weekly-day-error-container").css("display","none");break;case"yearly":var s=$("#yearly-month").val().toString(),a=parseInt($("#yearly-day").val()),n=document.getElementById("yearly-day").ej2_instances[0];switch(s.toLowerCase()){case"february":a>28&&(n.value=28);break;case"april":case"june":case"september":case"november":a>30&&(n.value=30);break;case"january":case"march":case"may":case"july":case"august":case"october":case"december":a>31&&(n.value=31)}break;case"hourly":if(""==$(".time-width").val())return $(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error"),!1;var r=$(".time-width").val().split(":");if(!(60*r[0]+r[1]>3))return $(".frequency-error").css("display","inline"),$(".time-width").parent("span").addClass("validation-error"),!1;$(".frequency-error").css("display","none"),$(".time-width").parent("span").removeClass("validation-error")}if("M/d/yyyy h:mm tt"==!t.model.dateTimeFormat)return $("#start-date-error-container").css("display","block"),$("#start-date-validator").html(window.Server.App.LocalizationContent.ScheduleValidator),!1;if($("#start-date-error-container").css("display","none"),"endby"===$("input[name=end-type]:checked","#schedule-end-type").val().toLowerCase()){if("M/d/yyyy h:mm tt"==!$("#end-date").data("ejDateTimePicker").model.dateTimeFormat)return $("#end-date-error-container").css("display","block"),$("#end-date-validator").html(window.Server.App.LocalizationContent.ScheduleValidator),!1;$("#end-date-error-container").css("display","none")}return!0}return!0}function DateTimeParser(e){if(null==e)return"";var t=/Date\(([^)]+)\)/.exec(e);return null!=t?new Date(parseInt(t[1])):e}function validateNextSchedule(){var e={};switch(e.ScheduleName=$("#schedule-name").val(),e.ItemId=createdItemId,e.StartDate=$("#start-date").val(),e.ExportFileName=$("#export-filename").val(),$("#recurrence-type").val().toString().toLowerCase()){case"daily":$("#daily-every-x-days").prop("checked")?(e.RecurrenceType="Daily",e.RecurrenceInterval=$("#every-x-days").val()):e.RecurrenceType="DailyWeekDay";break;case"weekly":e.RecurrenceType="Weekly",e.RecurrenceInterval=$("#every-x-weeks").val(),e.Sunday=$("#sun").prop("checked"),e.Monday=$("#mon").prop("checked"),e.Tuesday=$("#tues").prop("checked"),e.Wednesday=$("#wed").prop("checked"),e.Thursday=$("#thu").prop("checked"),e.Friday=$("#fri").prop("checked"),e.Saturday=$("#sat").prop("checked");break;case"monthly":$("#monthly").prop("checked")?(e.RecurrenceType="Monthly",e.DaysOfMonth=$("#monthly-date").val(),e.RecurrenceInterval=$("#monthly-every-x-months").val()):(e.RecurrenceType="MonthlyDOW",e.WeekOfMonth=$("#monthly-dow-week").find("option:selected").val(),e.DayOfWeek=$("#monthly-dow-day").find("option:selected").val(),e.RecurrenceInterval=$("#monthly-dow-every-x-months").val());break;case"yearly":e.RecurrenceInterval=$("#every-x-years").val(),$("#yearly").prop("checked")?(e.RecurrenceType="Yearly",e.DaysOfMonth=$("#yearly-day").val(),e.MonthOfYear=$("#yearly-month").find("option:selected").val()):(e.RecurrenceType="YearlyDOW",e.WeekOfMonth=$("#yearly-dow-week").find("option:selected").val(),e.DayOfWeek=$("#yearly-dow-day").find("option:selected").val(),e.MonthOfYear=$("#yearly-dow-month").find("option:selected").val());break;case"hourly":e.RecurrenceType="Hourly",e.Frequency=$(".time-width").val(),e.RecurrenceInterval=$("#every-x-hours-value").val()}switch(e.IsEnabled=$("#enable-schedule").prop("checked"),$("input[name=end-type]:checked","#schedule-end-type").val().toString()){case"never":e.ScheduleEndType="NoEnd";break;case"endafter":e.ScheduleEndType="EndAfter",e.RecurrenceFactor=$("#occurence-count").val();break;case"endBy":e.ScheduleEndType="EndBy",e.EndDate=$("#end-date").val()}$.ajax({type:"POST",url:getNextScheduleUrl,async:!1,data:{scheduleList:JSON.stringify({ScheduleItem:e,alert:alertChange})},beforeSend:function(e){parent.$("#popup-container_wrapper").ejWaitingPopup("show"),e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())},success:function(e){parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),""==e?($("#end-date-validator").html(window.Server.App.LocalizationContent.InvaliEndDate).css("display","inline"),$("#schedule-next").prop("disabled",!0)):($("#end-date-validator").hide(),enablePasswordOption())}})}function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}occurenceCount.appendTo("#occurence-count"),Globalize.addCultureInfo("en-US","default",{name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",language:"en",calendars:{standard:{"/":".",firstDay:1,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}}}}),"True"==timeFormat?($("#start-date").ejDateTimePicker({dateTimeFormat:dateFormat+" HH:mm",timeDisplayFormat:" HH:mm"}),$("#end-date").ejDateTimePicker({dateTimeFormat:dateFormat+" HH:mm",timeDisplayFormat:" HH:mm"})):($("#start-date").ejDateTimePicker({dateTimeFormat:dateFormat+" hh:mm tt",timeDisplayFormat:" hh:mm tt"}),$("#end-date").ejDateTimePicker({dateTimeFormat:dateFormat+" hh:mm tt",timeDisplayFormat:" hh:mm tt"})),$("#start-date").ejDateTimePicker({interval:10,value:zoneDateTime,change:validateDateTimePicker,enableStrictMode:!1,locale:"dd.MM.yyyy"==dateFormat?"de-DE":"en-US",timePopupWidth:108,buttonText:{today:window.Server.App.LocalizationContent.Today,timeNow:window.Server.App.LocalizationContent.Now,done:window.Server.App.LocalizationContent.Done,timeTitle:window.Server.App.LocalizationContent.Time},change:function(e){var t=createScheduleMessage(!1);$("#schedule-message").text(t)}}),$("#end-date").ejDateTimePicker({interval:10,value:zoneDateTime,enableStrictMode:!1,locale:"dd.MM.yyyy"==dateFormat?"de-DE":"en-US",timePopupWidth:108,buttonText:{today:window.Server.App.LocalizationContent.Today,timeNow:window.Server.App.LocalizationContent.Now,done:window.Server.App.LocalizationContent.Done,timeTitle:window.Server.App.LocalizationContent.Time},change:function(e){var t=createScheduleMessage(!1);$("#schedule-message").text(t)}}),$("#start-date,#end-date").attr("disabled","disabled"),$("#start-date,#end-date").css({cursor:"default"}),$(document).on("change","#recurrence-type",function(){var e=$(this).find("option:selected").val();switch($("#daily-schedule-option, #weekly-schedule-option, #monthly-schedule-option, #yearly-schedule-option,#frequency").css("display","none"),e.toString().toLowerCase()){case"daily":$("#daily-schedule-option").show(),$("#no-view-start,#no-view-end,#time-zone").addClass("display-inline");break;case"weekly":$("#weekly-schedule-option").show(),$("#no-view-start,#no-view-end,#time-zone").addClass("display-inline");break;case"monthly":$("#monthly-schedule-option").show(),$("#no-view-start,#no-view-end,#time-zone").addClass("display-inline");break;case"yearly":$("#yearly-schedule-option").show(),$("#no-view-start,#no-view-end,#time-zone").addClass("display-inline");break;case"hourly":$("#frequency").show(),$("#no-view-start,#no-view-end,#time-zone").addClass("display-inline")}var t=createScheduleMessage(!1);$("#schedule-message").text(t)}),$(document).on("click",".css-radio",function(){$(this).siblings("label").removeClass("notransition")}),$(document).on("change",".change-event, input[type=radio][name=daily-recurrence-type], input[type=radio][name=end-type], input[type=radio][name=monthly], input[type=radio][name=yearly]",function(){var e=createScheduleMessage(!1);$("#schedule-message").text(e)}),$(document).ready(function(){if($(".schedule-dialog #time-intervals-div").css("display","inline"),$(".time-width").ejTimePicker({timeFormat:"HH:mm",minutesInterval:5,minTime:"00:15",change:function(e){var t=createScheduleMessage(!1);$("#schedule-message").text(t)}}),$("#weekly-schedule-option,#monthly-schedule-option,#yearly-schedule-option,#daily-schedule-option").css("display","none"),"Create"===actionType)scheduleMessage=createScheduleMessage(!1),$("#schedule-message").text(scheduleMessage);else{switch($("#frequency").css("display","none"),recurrence.toLowerCase()){case"hourly":recurrenceType="Hourly",$("#frequency").show(),$("#hourly-schedule-option").show();var e=frequency%60<10?"0"+frequency%60:frequency%60,t=parseInt(frequency/60)<10?"0"+parseInt(frequency/60):parseInt(frequency/60);conversionToMinutes=t+":"+e,$("#frequency").find("input").val(conversionToMinutes);break;case"daily":recurrence="Daily",$("#daily-schedule-option").show(),$("#daily-every-x-days").prop("checked",!0),document.getElementById("every-x-days").ej2_instances[0].value=itemRecurrence.DailySchedule.DaysInterval;break;case"dailyweekday":recurrence="Daily",$("#daily-schedule-option").show(),$("#daily-weekdays").prop("checked",!0);break;case"weekly":recurrence="Weekly",$("#weekly-schedule-option").show(),document.getElementById("every-x-weeks").ej2_instances[0].value=itemRecurrence.WeeklySchedule.WeeksInterval,$("#sun").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Sunday),$("#mon").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Monday),$("#tues").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Tuesday),$("#wed").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Wednesday),$("#thu").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Thursday),$("#fri").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Friday),$("#sat").prop("checked",itemRecurrence.WeeklySchedule.DaysOfWeek.Saturday);break;case"monthly":recurrence="Monthly",$("#monthly-schedule-option").show(),$("#monthly").prop("checked",!0),document.getElementById("monthly-date").ej2_instances[0].value=itemRecurrence.MonthlySchedule.DayOfMonth,document.getElementById("monthly-every-x-months").ej2_instances[0].value=itemRecurrence.MonthlySchedule.Months;break;case"monthlydow":recurrence="Monthly",$("#monthly-schedule-option").css("display","block"),$("#monthly-dow").prop("checked",!0),$("#monthly-dow-week option[value='"+itemRecurrence.MonthlyDowSchedule.WeeksOfTheMonth+"']").attr("selected",!0),$("#monthly-dow-week").selectpicker("destroy"),$("#monthly-dow-week").selectpicker(),$("#monthly-dow-day option[value='"+itemRecurrence.MonthlyDowSchedule.DaysOfTheWeek+"']").attr("selected",!0),$("#monthly-dow-day").selectpicker("destroy"),$("#monthly-dow-day").selectpicker(),document.getElementById("monthly-dow-every-x-months").ej2_instances[0].value=itemRecurrence.MonthlyDowSchedule.Months;break;case"yearly":recurrence="Yearly",$("#yearly-schedule-option").show(),$("#yearly").prop("checked",!0),document.getElementById("every-x-years").ej2_instances[0].value=itemRecurrence.YearlySchedule.YearsInterval,$("#yearly-month option[value='"+itemRecurrence.YearlySchedule.MonthsOfTheYear+"']").attr("selected",!0),$("#yearly-month").selectpicker("destroy"),$("#yearly-month").selectpicker(),document.getElementById("yearly-day").ej2_instances[0].value=itemRecurrence.YearlySchedule.DayOfMonth;break;case"yearlydow":recurrence="Yearly",$("#yearly-schedule-option").show(),$("#yearly-dow").prop("checked",!0),document.getElementById("every-x-years").ej2_instances[0].value=itemRecurrence.YearlyDowSchedule.YearsInterval,$("#yearly-dow-week option[value='"+itemRecurrence.YearlyDowSchedule.WeeksOfTheMonth+"']").attr("selected",!0),$("#yearly-dow-week").selectpicker("destroy"),$("#yearly-dow-week").selectpicker(),$("#yearly-dow-day option[value='"+itemRecurrence.YearlyDowSchedule.DaysOfTheWeek+"']").attr("selected",!0),$("#yearly-dow-day").selectpicker("destroy"),$("#yearly-dow-day").selectpicker(),$("#yearly-dow-month option[value='"+itemRecurrence.YearlyDowSchedule.MonthsOfTheYear+"']").attr("selected",!0),$("#yearly-dow-month").selectpicker("destroy"),$("#yearly-dow-month").selectpicker()}switch($("#enable-sunday,#enable-monday,#enable-tuesday,#enable-wednesday,#enable-thursday,#enable-friday,#enable-saturday").on("click",function(){isSafari&&$(this).find("label").toggleClass("check")}),$("#recurrence-type option[value='"+recurrence+"']").attr("selected",!0),$("#recurrence-type").selectpicker("destroy"),$("#recurrence-type").selectpicker(),$("#start-date").ejDateTimePicker({value:startDate}),endType.toString().toLowerCase()){case"noenddate":$("#no-end-date").prop("checked",!0);$("#start-date").data("ejDateTimePicker").model.value;break;case"enddate":$("#endBy").prop("checked",!0),$("#end-date").ejDateTimePicker({value:endDate});break;case"endafter":$("#end-after").prop("checked",!0),document.getElementById("occurence-count").ej2_instances[0].value=endAfter}}addTitleForRecurrenceType(),parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")}),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
