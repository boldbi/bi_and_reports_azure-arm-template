/*!
*  filename: ej.core.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";var s,n,l,o;t.version="14.4.0.15",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==i}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,s,n,l){if(!e||!n)return i;for(var o=e.split("."),r=window,a=0;a<o.length-1;a++)t.isNullOrUndefined(r[o[a]])&&(r[o[a]]={}),r=r[o[a]];return(l||t.isNullOrUndefined(r[o[a]]))&&(s="function"==typeof s?s:function(){},r[o[a]]=s,r[o[a]].prototype=n),r[o[a]]},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,s){var n,l,o;if(!s)return i;for(n=s,l=e.split("."),o=0;o<l.length&&!t.util.isNullOrUndefined(n);o++)n=n[l[o]];return n},createObject:function(e,s,n){for(var l,o=e.split("."),r=n||window,a=r,d=o.length,h=0;h<d;h++)l=o[h],h+1==d?a[l]=s===i?{}:s:t.isNullOrUndefined(a[l])&&(a[l]={}),a=a[l];return r},isNullOrUndefined:function(e){return e===i||null===e},print:function(i,s){var n,l,o=t.buildTag("div"),r=i.clone();o.append(r),s||(s=window.open("","print","height=452,width=1024,tabbar=no")),s.document.write("<!DOCTYPE html>"),n=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(l="",n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),l+=i.outerHTML}),s.document.write("<html><head></head><body>"+l+o[0].innerHTML+"</body></html>")):(l="",s.document.write("<html><head>"),n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),l+=i.outerHTML}),s.document.writeln(l+"</head><body>"),s.document.writeln(o[0].innerHTML+"</body></html>")),s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,s,n,l){var o,r=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],a=/#([_a-z]+[-_0-9a-z]+)/gi.exec(t);return a=a?a[a.length-1]:i,o=(o=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t))?o[o.length-1]:i,e(document.createElement(r)).attr(a?{id:a}:{}).addClass(o||"").css(n||{}).attr(l||{}).html(s||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return((t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))==i||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,n,l,o=e(t).parents().andSelf().filter(":hidden");return o&&(n={visibility:"hidden",display:"block"},l=[],o.each(function(){var e={};for(var t in n)e[t]=this.style[t],this.style[t]=n[t];l.push(e)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),o.each(function(e){var t=l[e];for(var i in n)this.style[i]=t[i]})),s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var n=e(t).attr(i);return null!=n?"true"==n.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),n=e.height(),l=e.offset().left,o=e.offset().left+s,r=e.offset().top,a=e.offset().top+n,d=.3*s,h=.3*n;return t<l+d&&i<r+h?"e-m-skew-topleft":t>o-d&&i<r+h?"e-m-skew-topright":t>o-d&&i>a-h?"e-m-skew-bottomright":t<l+d&&i>a-h?"e-m-skew-bottomleft":t>l+d&&i<r+h&&t<o-d?"e-m-skew-top":t<l+d?"e-m-skew-left":t>o-d?"e-m-skew-right":i>a-h?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,s,n=e.touches?e.touches[0]:e,l=n.pageX-t._pointX,o=n.pageY-t._pointY;Date.now();return t._pointX=n.pageX,t._pointY=n.pageY,t._distX+=l,t._distY+=o,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,n,l,o){for(var r=0;r<e.length;r++)t.listenTouchEvent(e[r],i[r],s[r],n,l,o)},listenTouchEvent:function(i,s,n,l,o,r){for(var a,d=l?"removeEventListener":"addEventListener",h=l?"off":"on",c=e(i),u=0;u<c.length;u++)switch(a=c[u],s){case"touchstart":t._bindEvent(a,d,s,n,"mousedown","MSPointerDown","pointerdown",r);break;case"touchmove":t._bindEvent(a,d,s,n,"mousemove","MSPointerMove","pointermove",r);break;case"touchend":t._bindEvent(a,d,s,n,"mouseup","MSPointerUp","pointerup",r);break;case"touchcancel":t._bindEvent(a,d,s,n,"mousecancel","MSPointerCancel","pointercancel",r);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(a)[h](s,n);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?o._on(e(a),s,n):a[d](s,n,!0)}},_bindEvent:function(t,i,s,n,l,o,r){e.support.hasPointer?t[i](window.navigator.pointerEnabled?r:o,n,!0):t[i](s,n,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),n=s.data("ejWidgets");n&&s[n]("destroy")})},getAttrVal:function(t,i,s){var n=e(t).attr(i);return null!=n?n:s},getOffset:function(t){var i,s={},n=t.offset()||{left:0,top:0};return e.extend(!0,s,n),"static"!=e("body").css("position")&&(i=e("body").offset(),s.left-=i.left,s.top-=i.top),s},getZindexPartial:function(i,s){var n,l,o;if(!t.isNullOrUndefined(i)&&i.length>0)return n=i.parents(),l=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&l.splice(l.index(s),1),e(l).each(function(e,t){n.push(t)}),o=Math.max.apply(o,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!o||o<1e4?o=1e4:o+=1,o},isValidAttr:function(t,i){var s;return void 0!==(t=e(t)[0])[i]||(s=!1,e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s)}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,n,l){var o=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(o=e(i).attr("type")),o&&(o=o.toLowerCase(),t.template[o])?t.template[o](this,i,s,n,l):t.template.render(this,i,s,n,l)},destroy:function(){var i,s,n,l;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(i=this.element.data("ejWidgets")||[],l=0;l<i.length;l++)i[l]==this.pluginName&&i.splice(l,1);for(i.length||this.element.removeData("ejWidgets");this._events&&(n=[],s=this._events.pop());){for(l=0;l<s[1].length;l++)e.isPlainObject(s[1][l])||n.push(s[1][l]);e.fn.off.apply(s[0],n)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),n={},l=s.length;n&&"function"!=typeof n;)n=s[--l];return s[l]=t.proxy(s[l],this),this._events.push([i,s,n,s[l]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,n){var l,o,r,a,d=this._events;if(!d||!d.length)return this;for("function"==typeof s&&(l=n,n=s,s=l),o=i.match(/\S+/g)||[""],r=0;r<d.length;r++)if((a=d[r])[0].length&&(!n||a[2]===n)&&(a[1][0]===i||o[0])&&(!s||a[1][1]===s)&&e.inArray(t[0],a[0])>-1){e.fn.off.apply(t,n?[i,s,a[3]]:[i,s]),d.splice(r,1);break}return this},_trigger:function(i,s){var n,l,o,r,a=null,d={};return e.extend(d,s),i in this.model&&(a=this.model[i]),a&&("string"==typeof a&&(a=t.util.getObject(a,window)),e.isFunction(a)&&(l=t.event(i,this.model,s),n=a.call(this,l),(o=this.model._applyScope)&&o.call(),s&&e.extend(s,l),l.cancel||!t.isNullOrUndefined(n)))?!1===n||l.cancel:(r=Boolean(s),(s=s||{}).originalEventType=i,s.type=this.pluginName+i,l=e.Event(s.type,t.event(s.type,this.model,s)),this.element.trigger(l),r&&e.extend(s,l),t.isOnWebForms&&0==l.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,d),l.cancel)},setModel:function(t,i){var n,l,o,r;if(!this._trigger("modelChange",{changes:t})){for(n in t){if(!i){if(this.model[n]===t[n]){delete t[n];continue}if(e.isPlainObject(t[n])&&(s(this.model[n],t[n]),e.isEmptyObject(t[n]))){delete t[n];continue}}if(this.dataTypes&&!0!==(l=this._isValidModelValue(n,this.dataTypes,t)))throw"setModel - Invalid input for property :"+n+" - "+l;this.model.notifyOnEachPropertyChanges&&this.model[n]!==t[n]&&(o={oldValue:this.model[n],newValue:t[n]},t[n]=this._trigger(n+"Change",o)?this.model[n]:o.newValue)}e.isEmptyObject(t)||(this._setFirst?((r=t.dataSource)&&delete t.dataSource,e.extend(!0,this.model,t),r&&(this.model.dataSource=r instanceof Array?r.slice():r,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(s,n,l){if(!s)return this.model;if(e.isPlainObject(s))return this.setModel(s,l);if("string"==typeof s){s=s.replace(/^model\./,"");var o=t.getObject(s,this.model);if(n===i&&!l)return o;if("enablePersistence"===s)return this._setState(n);if(l&&n===t.extensions.modelGUID)return this._setModel(t.createObject(s,t.getObject(s,this.model),{}));if(l||t.getObject(s,this.model)!==n)return this.setModel(t.createObject(s,n,{}),l)}return i},_isValidModelValue:function(e,t,i){var s,n,l,o=t[e],r=i[e];if(!o)return!0;if("string"==typeof o){if("enum"==o&&(i[e]=r?r.toString().toLowerCase():r,o="string"),"array"===o){if("[object Array]"===Object.prototype.toString.call(r))return!0}else if("data"===o||"parent"===o||typeof r===o)return!0;return"Expected type - "+o}if(r instanceof Array){for(n=0;n<r.length;n++)if(!0!==(s=this._isValidModelValue(e,t,r[n])))return" ["+n+"] - "+s;return!0}for(l in r)if(!0!==(s=this._isValidModelValue(l,o,r)))return l+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var i,s=this.observables,n=0;n<s.length;n++)i=t.getObject(s[n],e),t.isNullOrUndefined(i)||"function"!=typeof i||this._returnFn(e,s[n]);return JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e,i;if(this._ignoreOnPersist){for(e=r({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=r({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var s,n,l=null;if(window.localStorage?l=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(l=t.cookie.get("$ej$"+this.pluginName+this._id)),l&&(s=JSON.parse(l),this._restoreState&&(this._restoreState(s.customPersists),delete s.customPersists),!1===t.isNullOrUndefined(s)&&(t.isNullOrUndefined(s.ignoreOnPersist)?t.isNullOrUndefined(s.addToPersist)||(this._addToPersist=s.addToPersist,delete s.addToPersist):(this._ignoreOnPersist=s.ignoreOnPersist,delete s.ignoreOnPersist))),t.isNullOrUndefined(s)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,s);else{for(n in this._ignoreOnPersist)-1!==this._ignoreOnPersist[n].indexOf(".")?t.createObject(this._ignoreOnPersist[n],t.getObject(this._ignoreOnPersist[n],this.model),s):s[this._ignoreOnPersist[n]]=this.model[this._ignoreOnPersist[n]];this.model=s}!i&&l&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,s,n=[];if("object"==typeof e?n=e:"string"==typeof e&&n.push(e),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<n.length;t++)this._ignoreOnPersist.push(n[t]);else for(t=0;t<n.length;t++)s=this._addToPersist.indexOf(n[t]),this._addToPersist.splice(s,1)},addToPersist:function(t){var s,n,l=[];if("object"==typeof t?l=t:"string"==typeof t&&l.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],n=0;n<l.length;n++)s=this._ignoreOnPersist.indexOf(l[n]),this._ignoreOnPersist.splice(s,1);else for(n=0;n<l.length;n++)-1===e.inArray(l[n],this._addToPersist)&&this._addToPersist.push(l[n])},formatting:function(i,s,n){var l,o,r,a,d,h,c,u;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),n=t.preferredCulture(n)?n:"en-US",l=i,o=i.split("{0:"),d=i.split("}"),r=o[0],a=d[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:"))return null!=(h=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(i))&&null!=s?null!=r&&null!=a?r+t.format(s,h[2],n)+a:t.format(s,h[2],n):null!=s?s:"";if(l.startsWith("{")&&!l.startsWith("{0:")){var m=l.split(""),p=(s=(s||"")+"").split(""),g=/[0aA\*CN<>\?]/gm;for(c=0,u=0;c<m.length;c++)m[c]=g.test(m[c])?"{"+u+++"}":m[c];return String.format.apply(String,[m.join("")].concat(p)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){l=l.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),l):this.data.Value}},t.WidgetBase=function(){},s=function(t,i){for(var n in t)t[n]===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(t[n])&&s(t[n],i[n])},t.widget=function(s,l,d){var c,u,m;if("object"!=typeof s)m=d._rootCSS||t.getNameSpace(l),d=t.defineClass(l,function(i,o){var h,c,u,p,g,f,_,v,b,w;if(this.sfType=l,this.pluginName=s,this.instance=a,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(h in o)if(!0!==(c=this._isValidModelValue(h,this.dataTypes,o)))throw"setModel - Invalid input for property :"+h+" - "+c;for((u=i.data("ejWidgets")||[]).push(s),i.data("ejWidgets",u),g=0;t.widget.observables&&this.observables&&g<this.observables.length;g++)(p=t.getObject(this.observables[g],o))&&t.createObject(this.observables[g],t.widget.observables.register(p,this.observables[g],this,i),o);if(this.element=i.jquery?i:e(i),this.model=r(!0,{},d.prototype.defaults,o),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(m+" e-js").data(s,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(g in window.localStorage)-1!=g.indexOf("$ej$")&&window.localStorage.removeItem(g);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion)for(f in document.cookie.split(/; */))-1!=f.indexOf("$ej$")&&t.cookie.set(f.split("=")[0],model,new Date);this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(o),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(v in _=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==v){_=!0;break}_&&this._keyPressed&&(b=i,w="keydown",this.keySettings&&(b=this.keySettings.getElement&&this.keySettings.getElement()||b,w=this.keySettings.event||w),this._on(b,w,function(e){if(this.model.keyConfigs){var t=n.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}}))}this._trigger("create")},d),e.fn[s]=function(n){for(var r,a,c=n,u=0;u<this.length;u++){var p=e(this[u]),g=p.data(s),f=g&&p.hasClass(m),_=null;if(this.length>0&&e.isPlainObject(c)&&(n=t.copyObject({},c)),f){if(n)if(a=[].slice.call(arguments,1),this.length>0&&a[0]&&"option"===c&&e.isPlainObject(a[0])&&(a[0]=t.copyObject({},a[0])),e.isPlainObject(n))g.setModel(n);else if(0!==n.indexOf("_")&&!t.isNullOrUndefined(_=t.getObject(n,g))||0===n.indexOf("model.")){if(!_||!e.isFunction(_)){if(1==arguments.length)return _;g.option(n,arguments[1]);continue}if((r=_.apply(g,a))!==i)return r}else o(l+": function/property - "+n+" does not exist")}else!0!==d.prototype._requiresID||e(this[u]).attr("id")||p.attr("id",h("ejControl_")),n&&"object"!=typeof n?o(s+": methods/properties can be accessed only after plugin creation"):(d.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in d.prototype.defaults&&"ejChart"!=s&&(!n||"locale"in n?t.isNullOrUndefined(n)&&((n={}).locale=t.setCulture().name):n.locale=t.setCulture().name),new d(p,n))}return-1!=s.indexOf("ejm")&&t.widget.registerInstance(p,s,l,d.prototype),this},t.widget.register(s,l,d.prototype);else for(c in d=l,s)(u=s[c])instanceof Array&&(d._rootCSS=u[1],u=u[0]),t.widget(c,u,d),s[c]instanceof Array&&(d._rootCSS="")},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,n){t.isNullOrUndefined(e[i])||o("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:n},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,n){i.push({element:e,pluginName:t,className:s,proto:n})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){var t,i,s,n;if(e&&e.length)for(t=0;t<e.length;t++)if((s=(i=e.eq(t).data()).ejWidgets)&&s.length)for(n=0;n<s.length;n++)i[s[n]]&&i[s[n]].destroy&&i[s[n]].destroy()},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},n={getActionFromCode:function(e,t,i,s,l){var o,r,a;for(o in i=i||!1,s=s||!1,l=l||!1,e)if("focus"!==o)for(r=n.getKeyObject(e[o]),a=0;a<r.length;a++)if(t===r[a].code&&i==r[a].isCtrl&&s==r[a].isShift&&l==r[a].isAlt)return o;return null},getKeyObject:function(t){for(var i,s,l,o={isCtrl:!1,isShift:!1,isAlt:!1},r=e.extend(!0,{},o),a=t.split(","),d=[],h=0;h<a.length;h++){if(i=null,-1!=a[h].indexOf("+"))for(s=a[h].split("+"),l=0;l<s.length;l++)i=n.getResult(e.trim(s[l]),o);else i=n.getResult(e.trim(a[h]),e.extend(!0,{},r));d.push(i)}return d},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i,s,n,l,o={},r=[],a={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(i in a)if(a.hasOwnProperty(i)&&(r=navigator.userAgent.match(a[i]))){if(o.name="opr"==r[1].toLowerCase()?"opera":r[1].toLowerCase(),o.version=r[2],o.culture={},o.culture.name=o.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(s=t.preferredCulture().name,n=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),l=0;navigator.languages&&l<navigator.languages.length&&(n=t.preferredCulture(navigator.languages[l])).language!=navigator.languages[l];l++);t.preferredCulture(s),e.extend(!0,o.culture,n)}!navigator.userAgent.match(/Trident\/7\./)||(o.name="msie");break}return o.isMSPointerEnabled="msie"==o.name&&o.version>9&&window.navigator.msPointerEnabled,o.pointerEnabled=window.navigator.pointerEnabled,o},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t,i,s=document.documentElement.style;if(e in s)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in s)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var r=t.copyObject=function(e,s){var n,l,o,a,d,h,c=2;for("boolean"!=typeof e&&(c=1),o=[].slice.call(arguments,c),1===c&&(s=e,e=i),a=0;a<o.length;a++)for(d in o[a])if(n=s[d],(l=o[a][d])!==i&&n!==l&&o[a]!==l&&s!==l)if(l instanceof Array)if(0===a&&e)for(s[d]=[],h=0;h<l.length;h++)r(!0,s[d],l);else s[d]=l.slice();else t.isPlainObject(l)?(s[d]=n||{},e?r(e,s[d],l):r(s[d],l)):s[d]=l;return s},a=function(){return this},d=0,h=function(e){return e+d++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,n,l){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var o={prop:l,index:n};return e(i).render(s,o)},t.isPlainObject=function(e){if(!e||t.DataManager!==i&&e instanceof t.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var s,n=t.support.isOwnLast;for(s in e)if(n)break;return s===i||e.hasOwnProperty(s)},l=!1,t.util.valueFunction=function(e){return function(s,n){var o=t.getObject(e,this.model);if(!1===l&&(l=t.getObject("observables.getValue",t.widget)),s===i)return t.isNullOrUndefined(l)?"function"==typeof o?o.call(this):o:l(o,n);"function"==typeof o?(this["ob.values"][e]=s,o.call(this,s)):t.createObject(e,s,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e,t=function(){this.a=1};for(e in t.prototype.b=1,new t)return"b"===e}(),outerHTML:document.createElement("div").outerHTML!==i},o=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},t.getRandomValue=function(e,s){var n,l;return e===i||s===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(l=new Uint16Array(1),window.crypto.getRandomValues(l),n=l[0]%(s-e)+e):n=Math.random()*(s-e)+e,0|n)},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,s=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;s.push(t[i])}return s},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,n=0;n<s.length;n++)if(0===s[n].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}()}),
/*!
*  filename: ej.draggable.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},helpers={},this._wireEvents(),this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,"msie"==this._browser.name&&this.element.addClass("e-pinch")},_setModel:function(e){for(var t in e)switch(t){case"dragArea":this.model.dragArea=e[t];break;case"dragOnTaphold":this.model.dragOnTaphold=e[t]}},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1),t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var s,n=i;i.preventDefault(),i=this._getCoordinate(i),this.target=e(n.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},e(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler),this.model.clone||(s=this.element.offset(),this._relXposition=i.pageX-s.left,this._relYposition=i.pageY-s.top),e(document.documentElement).trigger(t.eventType.mouseDown,n)},_setDragArea:function(){var i,s,n,l,o,r,a,d=e(this.model.dragArea)[0];if(d){if(l=["left","right","bottom","top"],t.isNullOrUndefined(d.getBoundingClientRect)){for(i=e(this.model.dragArea).outerWidth(),s=e(this.model.dragArea).outerHeight(),a=0;a<l.length;a++)this["border-"+l[a]+"-width"]=0,this["padding-"+l[a]]=0;o=r=0}else{for(i=(n=d.getBoundingClientRect()).width?n.width:n.right-n.left,s=n.height?n.height:n.bottom-n.top,a=0;a<l.length;a++)this["border-"+l[a]+"-width"]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("border-"+l[a]+"-width")))?0:parseFloat(e(e(this.model.dragArea)[0]).css("border-"+l[a]+"-width")),this["padding-"+l[a]]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+l[a])))?0:parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+l[a]));o=e(this.model.dragArea).offset().top,r=e(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:r+this["border-left-width"]+this["padding-left"],this._top=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:o+this["border-top-width"]+this["padding-top"],this._right=r+i-[this["border-right-width"]+this["padding-right"]],this._bottom=o+s-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){var s,n,l,o,r,a=i;i=this._getCoordinate(i),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(a);var d=this._initPosition.x-i.pageX,h=this._initPosition.y-i.pageY;if(Math.sqrt(d*d+h*h)>=this.model.distance){if(!(s=this.model.helper({sender:a,element:this.target}))||t.isNullOrUndefined(s))return;if(n=this.model.handle=this.helper=s,this.model.dragStart&&(l=null,"touchmove"==a.type?(o=a.originalEvent.changedTouches[0],l=document.elementFromPoint(o.clientX,o.clientY)):l=a.originalEvent.target||a.target,this._trigger("dragStart",{event:a,element:this.element,target:l})))return this._destroy(),!1;this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0),r=n.offsetParent().offset(),e(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1),t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:n.css({position:"absolute",left:this.position.left-r.left,top:this.position.top-r.top}),destroy:this._destroyHandler}}},_drag:function(i){var s,n,l,o,r,a,d,h,c;i.preventDefault(),this.position=this._getMousePosition(i),this.position.top<0&&(this.position.top=0),e(document).height()<this.position.top&&(this.position.top=e(document).height()),e(document).width()<this.position.left&&(this.position.left=e(document).width()),h=t.widgetBase.droppables[this.model.scope].helper,this.model.drag&&(r=null,"touchmove"==i.type?(a=i.originalEvent.changedTouches[0],r=document.elementFromPoint(a.clientX,a.clientY)):r=i.originalEvent.target||i.target,this._trigger("drag",{event:i,element:this.target,target:r})),d=this._checkTargetElement(i),t.isNullOrUndefined(d)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=d,d.object._over(i),this._hoverTarget=d),c=(h=t.widgetBase.droppables[this.model.scope].helper).offsetParent().offset(),l=t.isNullOrUndefined(i.pageX)?i.originalEvent.changedTouches[0].pageX:i.pageX,o=t.isNullOrUndefined(i.pageY)?i.originalEvent.changedTouches[0].pageY:i.pageY,this.model.dragArea?(this._pageX!=l&&(s=this._left>this.position.left?this._left:this._right<this.position.left+h.outerWidth(!0)?this._right-h.outerWidth(!0):this.position.left),this._pageY!=o&&(n=this._top>this.position.top?this._top:this._bottom<this.position.top+h.outerHeight(!0)?this._bottom-h.outerHeight(!0):this.position.top)):(s=this.position.left,n=this.position.top),(n<0||n-[c.top+this["border-top-width"]]<0)&&(n=[c.top+this["border-top-width"]]),(s<0||s-[c.left+this["border-left-width"]]<0)&&(s=[c.left+this["border-left-width"]]),h.css({left:s-[c.left+this["border-left-width"]],top:n-[c.top+this["border-top-width"]]}),this.position.left=s,this.position.top=n,this._pageX=l,this._pageY=o},_dragStop:function(e){var t,i;("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e),this.model.dragStop&&(t=null,"touchend"==e.type?(i=e.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=e.originalEvent.target||e.target,this._trigger("dragStop",{event:e,element:this.target,target:t})),this._dragEnd(e)},_dragEnd:function(e){var i=this._checkTargetElement(e);t.isNullOrUndefined(i)||(e.target=e.toElement=i,i.object._drop(e))},_dragMouseEnter:function(t){e(document).off("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(t):this._isIE8?0==t.button&&this._dragManualStop(t):0==t.buttons&&this._dragManualStop(t)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target}),this._destroy(e)},_dragMouseOut:function(){e(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t=e.target;return this.helper&&this._contains(this.helper[0],t)?(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_withDropElement:function(i){if(i&&(dropObj=e(i).data("ejDroppable"),t.isNullOrUndefined(dropObj)&&(dropObj=this._checkParentElement(e(i))),!t.isNullOrUndefined(dropObj)))return e.extend(i,{object:dropObj})},_checkParentElement:function(i){var s=e(i).closest(".e-droppable");if(s.length>0&&(dropObj=e(s).data("ejDroppable"),!t.isNullOrUndefined(dropObj)))return dropObj},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):document.elementFromPoint(e.clientX,e.clientY)},_contains:function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}},_wireEvents:function(){1==t.isDevice()&&1==this.model.dragOnTaphold?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize),this._dragStartHandler=e.proxy(this._dragStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._dragStopHandler=e.proxy(this._dragStop,this),this._dragHandler=e.proxy(this._drag,this),this._dragMouseEnterHandler=e.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=e.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,i=this.model.clone?e.pageY:e.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(e){var i=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type&&"msie"!=t.browserInfo().name)&&(i=e.originalEvent.changedTouches[0]),i}}),function(e,t){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this.model.accept?e(this.element).delegate(this.accept,"mouseup",e.proxy(this._drop,this)):e(this.element).on("mouseup",e.proxy(this._drop,this)),this._on(e(document),"touchend",this._drop),this._mouseOver=!1},_setModel:function(){},_destroy:function(){e(this.element).off("mouseup",e.proxy(this._drop,this))},_over:function(e){this._mouseOver||(this._trigger("over",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("out",e),this._mouseOver=!1)},_drop:function(i){var s=t.widgetBase.droppables[this.model.scope],n=!t.isNullOrUndefined(s.helper)&&s.helper.is(":visible"),l=this._isDropArea(i);s&&!t.isNullOrUndefined(this.model.drop)&&n&&l.canDrop&&this.model.drop(e.extend(i,{dropTarget:l.target},!0),s)},_isDropArea:function(t){var i,s,n,l,o,r={canDrop:!0,target:e(t.target)};if("touchend"==t.type)for(i=t.originalEvent.changedTouches[0],s=document.elementFromPoint(i.clientX,i.clientY),r.canDrop=!1,n=e(s).parents(),l=0;l<this.element.length;l++){if(e(s).is(e(this.element[l])))r={canDrop:!0,target:e(s)};else for(o=0;o<n.length;o++)if(e(this.element[l]).is(e(n[o]))){r={canDrop:!0,target:e(s)};break}if(r.canDrop)break}return r}})}(jQuery,Syncfusion),function(e,t){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?e(this.target).delegate(this.handle,t.eventType.mouseDown,e.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):e(this.target).on("mousedown",e.proxy(this._mousedown,this)),this._resizeStartHandler=e.proxy(this._resizeStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._resizeStopHandler=e.proxy(this._resizeStop,this),this._resizeHandler=e.proxy(this._resize,this),this._resizeMouseEnterHandler=e.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){e(i.target).hasClass("e-resizable")?(e(i.target).css({cursor:"se-resize"}),e(this.target).on(t.eventType.mouseDown,e.proxy(this._mousedown,this))):(e(this.target).off(t.eventType.mouseDown),e(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(){},_mousedown:function(i){var s=i;return i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},this._pageX=i.pageX,this._pageY=i.pageY,e(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler),e(document.documentElement).trigger(t.eventType.mouseDown,s),!1},_resizeStart:function(i){var s;if(e(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var n,l,o=this._initPosition.x-i.pageX,r=this._initPosition.y-i.pageY;if(Math.sqrt(o*o+r*r)>=this.model.distance){if(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:i,element:this.target}))return;s=this.model.helper({element:this.target}),n=i.pageX-this._pageX+s.outerWidth(),l=i.pageY-this._pageY+s.outerHeight(),this._pageX=i.pageX,this._pageY=i.pageY,this.getElementPosition(s),e(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1),t.widgetBase.resizables[this.scope]={resizable:this.target,helper:s.css({width:n,height:l}),destroy:this._destroyHandler}}}},_resize:function(e){var i,s,n,l;e=this._getCoordinate(e),this.getElementPosition(t.widgetBase.resizables[this.scope].helper),l=this.model.helper({element:this.target}),i=e.pageX-this._pageX+l.outerWidth(),s=e.pageY-this._pageY+l.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,i<this.model.minWidth&&(n=this.model.minWidth-i,i=this.model.minWidth,this._pageX=e.pageX+n),s<this.model.minHeight&&(n=this.model.minHeight-s,s=this.model.minHeight,this._pageY=e.pageY+n),null!=this.model.maxHeight&&s>this.model.maxHeight&&(n=s-this.model.maxHeight,s=this.model.maxHeight,this._pageY=e.pageY-n),null!=this.model.maxWidth&&i>this.model.maxWidth&&(n=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=e.pageX-n),t.widgetBase.resizables[this.scope].helper.css({width:i,height:s}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1),t.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&e.length>0?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type)&&(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion)}),
/*!
*  filename: ej.globalize.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){!function(e){function t(e,t){return 0===e.indexOf(t)}function i(e,t){return e.substr(e.length-t.length)===t}function s(e){return(e+"").replace(C,"")}function n(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function l(e,s,n){var l,o=s["-"],r=s["+"];switch(n){case"n -":o=" "+o,r=" "+r;case"n-":i(e,o)?l=["-",e.substr(0,e.length-o.length)]:i(e,r)&&(l=["+",e.substr(0,e.length-r.length)]);break;case"- n":o+=" ",r+=" ";case"-n":t(e,o)?l=["-",e.substr(o.length)]:t(e,r)&&(l=["+",e.substr(r.length)]);break;case"(n)":t(e,"(")&&i(e,")")&&(l=["-",e.substr(1,e.length-2)])}return l||["",e]}function o(e,t,i){var s,l;if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var o,r=i.numberFormat,a=Math.abs(e),d=-1;switch(t.length>1&&(d=parseInt(t.slice(1),10)),s=t.charAt(0).toUpperCase()){case"D":o="n",a=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)}(a),-1!==d&&(a=n(""+a,d,!0)),e<0&&(a=-a);break;case"N":(l=r).pattern=l.pattern||["-n"];case"C":(l=l||r.currency).pattern=l.pattern||["-$n","$n"];case"P":(l=l||r.percent).pattern=l.pattern||["-n %","n %"],o=e<0?l.pattern[0]||"-n":l.pattern[1]||"n",-1===d&&(d=l.decimals),a=function(e,t,i){var s,l=i.groupSizes||[3],o=l[0],r=1,a=Math.pow(10,t),d=Math.round(e*a)/a;isFinite(d)||(d=e);var h=(e=d)+"",c="",u=h.split(/e/i),m=u.length>1?parseInt(u[1],10):0;u=(h=u[0]).split("."),h=u[0],c=u.length>1?u[1]:"",m>0?(h+=(c=n(c,m,!1)).slice(0,m),c=c.substr(m)):m<0&&(c=(h=n(h,1+(m=-m))).slice(-m,h.length)+c,h=h.slice(0,-m)),s=i["."]||".",c=t>0?s+(c.length>t?c.slice(0,t):n(c,t)):"";for(var p=h.length-1,g=i[","]||",",f="";p>=0;){if(0===o||o>p)return h.slice(0,p+1)+(f.length?g+f+c:c);f=h.slice(p-o+1,p+1)+(f.length?g+f:""),p-=o,r<l.length&&(o=l[r],r++)}return h.slice(0,p+1)+g+f+c}(a*("P"===s?100:1),d,l);break;default:throw"Bad number format specifier: "+s}return function(e,t,i){for(var s,n,l=/n|\$|-|%/g,o="";s=l.lastIndex,n=l.exec(t),o+=t.slice(s,n?n.index:t.length),n;)switch(n[0]){case"n":o+=e;break;case"$":o+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(o+=i["-"]||"-");break;case"%":o+=i.percent.symbol||"%"}return o}(a,o,r)}function r(e,t,i){return e<t||e>i}function a(e,t){var i,s,n=new Date;return t<100&&(i="string"==typeof(i=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i,(t+=(s=n.getFullYear())-s%100)>i&&(t-=100)),t}function d(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function h(e){return e.split(" ").join(" ").toUpperCase()}function c(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=h(e[i]);return t}function u(e,t,i){var s,n=e.days,l=e._upperDays;return l||(e._upperDays=l=[c(n.names),c(n.namesAbbr),c(n.namesShort)]),t=h(t),i?-1===(s=d(l[1],t))&&(s=d(l[2],t)):s=d(l[0],t),s}function m(e,t,i){var s,n=e.months,l=e.monthsGenitive||e.months,o=e._upperMonths,r=e._upperMonthsGen;return o||(e._upperMonths=o=[c(n.names),c(n.namesAbbr)],e._upperMonthsGen=r=[c(l.names),c(l.namesAbbr)]),t=h(t),(s=d(i?o[1]:o[0],t))<0&&(s=d(i?r[1]:r[0],t)),s}function p(e,t){for(var i,s=0,n=!1,l=0,o=e.length;l<o;l++)"'"==(i=e.charAt(l))?(n?t.push("'"):s++,n=!1):"\\"==i?(n&&t.push("\\"),n=!n):(t.push(i),n=!1);return s}function g(e,t,i,s){if(!e)return null;var n=0,l=0,o=null;t=t.split(""),length=t.length;for(var r=function(e){for(var i=0;t[n]===e;)i++,n++;return i>0&&(n-=1),i},a=function(t){var i=new RegExp("^\\d{1,"+t+"}"),s=e.substr(l,t).match(i);return s?(s=s[0],l+=s.length,parseInt(s,10)):null},d=function(t,i){for(var s,n,o,r=0,a=t.length;r<a;r++)if(n=(s=t[r]).length,o=e.substr(l,n),i&&(o=o.toLowerCase()),o==s)return l+=n,r+1;return null},h=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s},c=function(e){var t={};for(var i in e)t[i]=h(e[i]);return t};n<length;n++)ch=t[n],"d"===ch&&(count=r("d"),s._lowerDays||(s._lowerDays=c(s.days)),o=count<3?a(2):d(s._lowerDays[3==count?"namesAbbr":"names"],!0));return o}function f(e,t){t=t||"F";var i,s=e.patterns,n=t.length;if(1===n){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function _(e,i,n){var l,o,d,h,c,p,f,_,v;e=s(e),i=s(i);var b=n.calendar,C=ej.globalize._getDateParseRegExp(b,i),y=new RegExp(C.regExp).exec(e);if(null===y)return null;var S,x=C.groups,T=null,k=null,D=null,I=null,O=0,A=0,L=0,R=0,E=null,N=!1;for(l=0,o=x.length;l<o;l++)if(d=y[l+1]){var M=x[l],P=M.length,F=parseInt(d,10);switch(M){case w.DAY_OF_MONTH_DOUBLE_DIGIT:case w.DAY_OF_MONTH_SINGLE_DIGIT:if(r(D=F,1,31))return null;break;case w.MONTH_THREE_LETTER:case w.MONTH_FULL_NAME:if(r(k=m(b,d,3===P),0,11))return null;break;case w.MONTH_SINGLE_DIGIT:case w.MONTH_DOUBLE_DIGIT:if(r(k=F-1,0,11))return null;break;case w.YEAR_SINGLE_DIGIT:case w.YEAR_DOUBLE_DIGIT:case w.YEAR_FULL:if(r(T=P<4?a(b,F):F,0,9999))return null;break;case w.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case w.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(12===(O=F)&&(O=0),r(O,0,11))return null;break;case w.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case w.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(r(O=F,0,23))return null;break;case w.MINUTES_SINGLE_DIGIT:case w.MINUTES_DOUBLE_DIGIT:if(r(A=F,0,59))return null;break;case w.SECONDS_SINGLE_DIGIT:case w.SECONDS_DOUBLE_DIGIT:if(r(L=F,0,59))return null;break;case w.MERIDIAN_INDICATOR_FULL:case w.MERIDIAN_INDICATOR_SINGLE:if(!(N=b.PM&&(d===b.PM[0]||d===b.PM[1]||d===b.PM[2]))&&(!b.AM||d!==b.AM[0]&&d!==b.AM[1]&&d!==b.AM[2]))return null;break;case w.DECISECONDS:case w.CENTISECONDS:case w.MILLISECONDS:if(r(R=F*Math.pow(10,3-P),0,999))return null;break;case w.DAY_OF_WEEK_THREE_LETTER:D=g(e,i,0,b);break;case w.DAY_OF_WEEK_FULL_NAME:if(u(b,d,3===P),r(I,0,6))return null;break;case w.TIME_ZONE_OFFSET_FULL:if(2!==(h=d.split(/:/)).length||r(S=parseInt(h[0],10),-12,13)||r(c=parseInt(h[1],10),0,59))return null;E=60*S+(t(d,"-")?-c:c);break;case w.TIME_ZONE_OFFSET_SINGLE_DIGIT:case w.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(r(S=F,-12,13))return null;E=60*S}}if(p=new Date,f=(_=b.convert)?_.fromGregorian(p)[0]:p.getFullYear(),null===T&&(T=f),null===k&&(k=0),null===D&&(D=1),_){if(null===(p=_.toGregorian(T,k,D)))return null}else if(p.setFullYear(T,k,D),p.getDate()!==D)return null;return N&&O<12&&(O+=12),p.setHours(O,A,L,R),null!==E&&(v=p.getMinutes()-(E+p.getTimezoneOffset()),p.setHours(p.getHours()+parseInt(v/60,10),v%60)),p}function v(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=C[t-2]+s).substr(i.length-t,t):s}function n(){return g||_||(g=y.test(t),_=!0),g}var l,o,r,a,d,h,c=i.calendar,u=c.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?u?v(e,c.patterns.F,i):e.toLocaleString():e.toString();o="s"===t,t=f(c,t),l=[];var m,g,_,b,C=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,S=0,x=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;for(!o&&u&&(b=u.fromGregorian(e));;){var T=x.lastIndex,k=x.exec(t);if(S+=p(t.slice(T,k?k.index:t.length),l),!k)break;if(S%2)l.push(k[0]);else switch(a=(r=k[0]).length,r){case w.DAY_OF_WEEK_THREE_LETTER:case w.DAY_OF_WEEK_FULL_NAME:d=3===a?c.days.namesAbbr:c.days.names,l.push(d[e.getDay()]);break;case w.DAY_OF_MONTH_SINGLE_DIGIT:case w.DAY_OF_MONTH_DOUBLE_DIGIT:g=!0,l.push(s(b?b[2]:e.getDate(),a));break;case w.MONTH_THREE_LETTER:case w.MONTH_FULL_NAME:h=b?b[1]:e.getMonth(),l.push(c.monthsGenitive&&n()?c.monthsGenitive[3===a?"namesAbbr":"names"][h]:c.months[3===a?"namesAbbr":"names"][h]);break;case w.MONTH_SINGLE_DIGIT:case w.MONTH_DOUBLE_DIGIT:l.push(s((b?b[1]:e.getMonth())+1,a));break;case w.YEAR_SINGLE_DIGIT:case w.YEAR_DOUBLE_DIGIT:case w.YEAR_FULL:h=b?b[0]:e.getFullYear(),a<4&&(h%=100),l.push(s(h,a));break;case w.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case w.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:0===(m=e.getHours()%12)&&(m=12),l.push(s(m,a));break;case w.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case w.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:l.push(s(e.getHours(),a));break;case w.MINUTES_SINGLE_DIGIT:case w.MINUTES_DOUBLE_DIGIT:l.push(s(e.getMinutes(),a));break;case w.SECONDS_SINGLE_DIGIT:case w.SECONDS_DOUBLE_DIGIT:l.push(s(e.getSeconds(),a));break;case w.MERIDIAN_INDICATOR_SINGLE:case w.MERIDIAN_INDICATOR_FULL:h=e.getHours()<12?c.AM?c.AM[0]:" ":c.PM?c.PM[0]:" ",l.push(1===a?h.charAt(0):h);break;case w.DECISECONDS:case w.CENTISECONDS:case w.MILLISECONDS:l.push(s(e.getMilliseconds(),3).substr(0,a));break;case w.TIME_ZONE_OFFSET_SINGLE_DIGIT:case w.TIME_ZONE_OFFSET_DOUBLE_DIGIT:m=e.getTimezoneOffset()/60,l.push((m<=0?"+":"-")+s(Math.floor(Math.abs(m)),a));break;case w.TIME_ZONE_OFFSET_FULL:m=e.getTimezoneOffset()/60,l.push((m<=0?"+":"-")+s(Math.floor(Math.abs(m)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case w.DATE_SEPARATOR:l.push(c["/"]||"/");break;default:throw"Invalid date format pattern '"+r+"'."}}return l.join("")}function b(e,t){return t.length?b(e[t[0]],t.slice(1)):e}var w;ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=e.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var C=/^\s+|\s+$/g,y=/^[+-]?infinity$/i,S=/^0x[a-f0-9]+$/i,x=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/;w={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"},ej.globalize._getDateParseRegExp=function(e,t){var i,s,n,l,o,r,a=e._parseRegExp;if(a){if(i=a[t])return i}else e._parseRegExp=a={};for(var d,h=f(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],m=0,g=0,_=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(d=_.exec(h));)if(s=h.slice(m,d.index),m=_.lastIndex,(g+=p(s,c))%2)c.push(d[0]);else{switch(l=(n=d[0]).length,n){case w.DAY_OF_WEEK_THREE_LETTER:case w.DAY_OF_WEEK_FULL_NAME:case w.MONTH_FULL_NAME:case w.MONTH_THREE_LETTER:o="(\\D+)";break;case w.MERIDIAN_INDICATOR_FULL:case w.MERIDIAN_INDICATOR_SINGLE:o="(\\D*)";break;case w.YEAR_FULL:case w.MILLISECONDS:case w.CENTISECONDS:case w.DECISECONDS:o="(\\d{"+l+"})";break;case w.DAY_OF_MONTH_DOUBLE_DIGIT:case w.DAY_OF_MONTH_SINGLE_DIGIT:case w.MONTH_DOUBLE_DIGIT:case w.MONTH_SINGLE_DIGIT:case w.YEAR_DOUBLE_DIGIT:case w.YEAR_SINGLE_DIGIT:case w.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case w.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case w.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case w.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case w.MINUTES_DOUBLE_DIGIT:case w.MINUTES_SINGLE_DIGIT:case w.SECONDS_DOUBLE_DIGIT:case w.SECONDS_SINGLE_DIGIT:o="(\\d\\d?)";break;case w.TIME_ZONE_OFFSET_FULL:o="([+-]?\\d\\d?:\\d{2})";break;case w.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case w.TIME_ZONE_OFFSET_SINGLE_DIGIT:o="([+-]?\\d\\d?)";break;case w.DATE_SEPARATOR:o="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+n+"'."}o&&c.push(o),u.push(d[0])}return p(h.slice(m),c),c.push("$"),r={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:u},a[t]=r},ej.globalize.addCulture=function(t,i){ej.cultures[t]=e.extend(!0,e.extend(!0,{},ej.cultures.default,i),ej.cultures[t]),ej.cultures[t].calendar=ej.cultures[t].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),(e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e)&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(t){var i,s,n,l,o;if(t){if(e.isPlainObject(t)&&t.numberFormat&&(i=t),"string"==typeof t){if((s=ej.cultures)[t])return s[t];if(t.indexOf("-")>-1){if(s[n=t.split("-")[0]])return s[n]}else for(l=e.map(s,function(e){return e}),o=0;o<l.length;o++)if(l[o].name.split("-")[0]===t)return l[o];return ej.cultures.default}}else i=ej.cultures.current||ej.cultures.default;return i},ej.globalize.format=function(e,t,i){var s=ej.globalize.findCulture(i);return"number"==typeof e?e=o(e,t,s):e instanceof Date&&(e=v(e,t,s)),e},ej.globalize.parseInt=function(e,t,i){return Math.floor(this.parseFloat(e,t,i))},ej.globalize.parseFloat=function(e,t,i){var n,o,r,a,d,h,c,u,m,p,g;"string"==typeof t&&(i=t,t=10);var f=NaN,_=(i=ej.globalize.findCulture(i)).numberFormat,v=i.numberFormat.pattern[0];if((e=e.replace(/ /g,"")).indexOf(i.numberFormat.currency.symbol)>-1?(e=(e=e.replace(i.numberFormat.currency.symbol||"$","")).replace(i.numberFormat.currency["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.currency.pattern[0].replace("$",""))):e.indexOf(i.numberFormat.percent.symbol)>-1&&(e=(e=e.replace(i.numberFormat.percent.symbol||"%","")).replace(i.numberFormat.percent["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.percent.pattern[0].replace("%",""))),e=s(e),y.test(e))f=parseFloat(e,t);else if(!t&&S.test(e))f=parseInt(e,16);else{var b=l(e,_,v),w=b[0],C=b[1];""===w&&"-n"!==_.pattern[0]&&(w=(b=l(e,_,"-n"))[0],C=b[1]),w=w||"+",(r=C.indexOf("e"))<0&&(r=C.indexOf("E")),r<0?(o=C,n=null):(o=C.substr(0,r),n=C.substr(r+1)),h=_["."]||".",(c=o.indexOf(h))<0?(a=o,d=null):(a=o.substr(0,c),d=o.substr(c+h.length)),u=_[","]||",",a=a.split(u).join(""),m=u.replace(/\u00A0/g," "),u!==m&&(a=a.split(m).join("")),p=w+a,null!==d&&(p+="."+d),null!==n&&(p+="e"+((g=l(n,_,v))[0]||"+")+g[1]),x.test(p)&&(f=parseFloat(p))}return f},ej.globalize.parseDate=function(e,t,i){var s,n,l,o,r,a;if(i=ej.globalize.findCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(o=0,r=t.length;o<r&&(!(a=t[o])||!(s=_(e,a,i)));o++);}else for(n in l=i.calendar.patterns)if(s=_(e,l[n],i))break;return s||null},ej.globalize.getLocalizedConstants=function(t,i){var s,n=t.replace("ej.","").split(".");return s=b(ej,n),e.extend(!0,{},s.Locale.default,s.Locale[i||this.cultureObject.name])},e.extend(ej,ej.globalize)}(jQuery)}),
/*!
*  filename: ej.scroller.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){(function(e,t,i,s){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||(this._content="horizontal"===this.model.orientation?this.element.find(".e-hhandle"):this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget"),this._ensureScrollers(),this.content(),this._setInitialValues()},_setInitialValues:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):this.element.addClass("e-vscrollbar"),(0!==this.value()||0!==this.model.minimum)&&(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){e.fn.jquery;this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._scrollData||(this._scrollData="vertical"===this.model.orientation?this._createScroller("Height","Y","Top","e-v"):this._createScroller("Width","X","Left","e-h"))},_setModel:function(e){for(var t in e){if("value"!==t){this.refresh();break}this.value()&&this.scroll(this.value(),"none")}},_createScroller:function(t,i,s,n){var l,o={};e.fn.jquery;return o.dimension=t,o.xy=i,o.position=s,o.css=n,o.uDimension=t,this._calculateLayout(o),this._createLayout(o),l=this[o.main].find(".e-button"),this._off(l,"mousedown")._on(l,"mousedown",{d:o,step:1},this._spaceMouseDown),this._off(this[o.scroll],"mousedown")._on(this[o.scroll],"mousedown",{d:o},this._spaceMouseDown),this._off(this[o.handler],"mousedown touchstart")._on(this[o.handler],"mousedown touchstart",{d:o},this._mouseDown),o},_createLayout:function(i){var s,n="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}</div>",l=e.fn.jquery,o={};o[i.dimension]=i.modelDim,s=t.buildTag("div."+i.css+"scroll e-box",String.format(n,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(n,"handlespace",i.handleSpace,String.format(n,"handle e-box e-pinch",i.handle))+String.format(n,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),o),this.element.append(s),this.element.find(".e-vhandle").addClass("e-v-line e-icon"),this.element.find(".e-hhandle").addClass("e-h-line e-icon"),"1.7.1"===l||"1.7.2"===l?i.uDimension.toLowerCase():i.uDimension,this[i.handler]=this.element.find("."+i.handler),this[i.handler].css("transition","none"),this[i.scroll]=this[i.handler].parent(),this[i.main]=this[i.scroll].parent(),this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(e){var i,n;e.scrollDim="scroll"+e.dimension,e.lPosition=e.position.toLowerCase(),e.clientXy="page"+e.xy,e.scrollVal="scroll"+e.position,e.scrollOneStepBy=this.model.smallChange,e.modelDim=this.model[e.dimension=e.dimension.toLowerCase()],e.handler=e.css+"handle",e.buttonSize=this.model.buttonSize,e.main=e.css+"scroll",e.scroll=e.css+"ScrollSpace",e.handleSpace=e.modelDim-2*e.buttonSize,e.scrollable=this.model.maximum-this.model.minimum,i=this.model.height,"horizontal"===this.model.orientation&&(i=this.model.width),e.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize),n=!t.isNullOrUndefined(this.model.elementHeight)&&"string"==typeof this.model.elementHeight&&-1!=this.model.elementHeight.indexOf("%"),e.handle<20&&!n&&(e.handle=20),e.onePx=e.scrollable/(e.handleSpace-e.handle),e.fromScroller=!1,e.up=!0,e.vInterval=s},_updateLayout:function(e){this.element.height(this.model.height),this.element.width(this.model.width);var t=this.element.find("."+e.css+"handle"),i=this.element.find("."+e.css+"handlespace"),n="width"==e.dimension?t.css("left"):t.css("top"),l="width"==e.dimension?i.outerWidth():i.outerHeight();n!==s&&"auto"!==n&&(l>=e.handle+parseFloat(n)||(this.model.enableRTL?t.css("width"===e.dimension?"left":"top",parseFloat(l)-e.handle):t.css("width"===e.dimension?"left":"top",parseFloat(l)-e.handle>0?parseFloat(l)-e.handle:0))),this.element.find("."+e.css+"scroll").css(e.dimension,e.modelDim+"px").find(".e-button").css(e.dimension,this.model.buttonSize).end().find("."+e.css+"handlespace").css(e.dimension,e.handleSpace+"px").find("."+e.css+"handle").css(e.dimension,e.handle+"px")},refresh:function(){this._ensureScrollers(),this.value()&&this.scroll(this.value(),"none"),this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(e,i,s,n){var l,o,r=this._scrollData;if(!s)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:e,originalEvent:n}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:e,originalEvent:n}))return;!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"==t.browserInfo().name?!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"!=t.browserInfo().name?this.value(e):this.value(-1*e):this.value(-r.scrollable+e),this.content().length>0&&(this.model.orientation===t.ScrollBar.Orientation.Horizontal?(e=(l=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth())<(e-this.model.minimum)/this._scrollData.onePx?l:(e-this.model.minimum)/this._scrollData.onePx,this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"!=t.browserInfo().name&&((e=l-e)>0&&(e*=-1)),this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"==t.browserInfo().name&&(e=-e),this._scrollData.enableRTL&&e>0&&!this._scrollData._scrollleftflag&&(e=0),this._scrollData._scrollleftflag&&(e>0&&(e*=-1),this.value(e)),this.content()[0].style.left=e+"px",this._scrollData._scrollleftflag=!1):(e=(o=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight())<(e-this.model.minimum)/this._scrollData.onePx?o:(e-this.model.minimum)/this._scrollData.onePx,this.content()[0].style.top=e+"px"))},_changeTop:function(e,t,i){var s,n;return e.dimension,n=(s=this.value())+t,e.step=t,e.enableRTL&&t<0||t>0&&!e.enableRTL?e.enableRTL?n<-1*this.model.maximum&&(n=-1*this.model.maximum):n>this.model.maximum&&(n=this.model.maximum):e.enableRTL?n>this.model.minimum&&(n=this.model.minimum):n<this.model.minimum&&(n=this.model.minimum),(n!==s||this.model.infiniteScrolling)&&this.scroll(n,i),n!==s},_mouseUp:function(i){if(i.data){var s=i.data.d;clearInterval(s.vInterval),"touchend"==i.type&&e(i.target).removeClass("e-touch"),"mouseup"!==i.type&&"touchend"!==i.type&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(e(document),"mousemove touchmove",this._mouseMove),e(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),s.fromScroller=!1,this[s.scroll].off("mousemove"),this[s.handler].off("mousemove").css("transition",""),"thumb"!==i.data.source||t.isNullOrUndefined(this.model)||e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:s})},this))),s.up=!0}},_mouseDown:function(i){this._enabled&&(this._d=i,this._data=this._d.data.d,this._data.target=this._d.target,this._data.fromScroller=!0,this[this._data.handler].css("transition","none"),this._on(e(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove),this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data}),e(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this)),"touchstart"==i.type&&e(i.target).addClass("e-touch"))},_mouseCall:function(e){e.type="mouseup",this._mouseUp(e)},_mouseMove:function(i){var s,n,l=0,o=parseInt(this[this._data.handler].css(this._data.lPosition))||0;if(i.preventDefault(),t.isNullOrUndefined(i.target.tagName)){if(e(i.target).is(document))return void this._mouseCall(i)}else if("iframe"===i.target.tagName.toLowerCase())return void this._mouseCall(i);n="mousemove"==i.type?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy],this._prevY&&n!==this._prevY&&(l=n-this._prevY,this.model.infiniteScrolling?(o+=l,this._data.step=l,(this._data.enableRTL?o>0:o<0)&&(o=0),o*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(o=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),s=Math.ceil(o*this._data.onePx),this.scroll(s,"thumb")):(s=l*this._data.onePx,this._changeTop(this._data,s,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,scrollData:this._data})),this._prevY=n},_spaceMouseDown:function(i){var s,n,l;i.data&&this._enabled&&(s=i.data.d,1===i.which&&i.target!==this[s.handler][0])&&(n=i.data.step?this.model.smallChange:this.model.largeChange,l=i.data.top||this[s.handler].offset()[s.lPosition],i[s.clientXy]=i[s.clientXy]||0,i[s.clientXy]<l&&(n*=-1),s.target=i.target,this._changeTop(s,n,3===n?"track":"button",i),1!==i.data.step&&this[s.scroll].mousemove(function(){s.up=!0}),s.up=!1,s.vInterval=setInterval(t.proxy(function(){(n<0?l+n/s.onePx<i[s.clientXy]:l+s.handle+n/s.onePx>i[s.clientXy])&&(s.up=!0),s.up?clearInterval(s.vInterval):(this._changeTop(s,n,3===n?"track":"button",i),l=i.data&&i.data.top||this[s.handler].offset()[s.lPosition])},this),150),e(document).one("mouseup",{d:s},t.proxy(this._mouseUp,this)),e(document).mouseout({d:s},t.proxy(this._mouseUp,this)))},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove(),this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove(),this._scrollData=null,this._content=null},_destroy:function(){this.element.remove()}}),t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}})(jQuery,Syncfusion,window),function(e,t,i,s){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:s,enableTouchScroll:!0,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this.model.enableRTL===s&&(this.model.enableRTL="rtl"===this.element.css("direction")),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._on(this.content(),"scroll",this._scroll),null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),(this._prevScrollWidth!==this.content()[0].scrollWidth||this._prevScrollHeight!==this.content()[0].scrollHeight)&&this.refresh()),this._addActionClass()},_addActionClass:function(){"msie"==this._browser&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")||(this._vScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):e(this.content()[0]).height("")),t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")||(this._hScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):e(this.content()[0]).width(""))},_setScrollLeftValue:function(e){this.model.enableRTL&&(e="mozilla"==t.browserInfo().name?e<0?e:-1*e:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&("chrome"==t.browserInfo().name||this._rtlScrollLeftValue>0)?e<0?this._rtlScrollLeftValue+e:this._rtlScrollLeftValue-e:Math.abs(e)),this.content().scrollLeft(e)},_ensureScrollers:function(){var s,n,l,o,r,a=e.fn.jquery;this.model.height="string"==typeof this.model.height&&-1!=this.model.height.indexOf("px")?parseInt(this.model.height):this.model.height,this.model.width="string"==typeof this.model.width&&-1!=this.model.width.indexOf("px")?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0&&(this.isVScroll()?(this._vScrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._hScrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll?(this.content().addClass("e-content"),"1.7.1"===a||"1.7.2"===a?(s="height",n="width"):(s="outerHeight",n="outerWidth"),o=(l=this._exactElementDimension(this.element)).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.content()[s](o-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:0)),r=l.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.content()[n](r-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:0)),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0&&e(i).on("resize",e.proxy(this._resetScroller,this))):this.content().removeClass("e-content"),this._setDimension(),this._parentHeight=e(this.element).parent().height(),this._parentWidth=e(this.element).parent().width())},_convertPercentageToPixel:function(e,t){return Math.floor(e*t/100)},isHScroll:function(){if(t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")){if(this.model.width>0){var i=this.content().find(this.model.targetPane);return null!=this.model.targetPane&&i.length?i[0].scrollWidth+i.siblings().width()>this.model.width:this.content()[0].scrollWidth>this.model.width||this.content()[0].scrollWidth==this.model.width&&e(this.content()[0]).find("> *").length>0&&e(this.content()[0]).find("> *")[0].scrollWidth>this.model.width}return!1}return this.content()[0].scrollWidth>this.element.width()},isVScroll:function(){return t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?!!(this.model.height>0&&(this.content()[0].scrollHeight>this.model.height||this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2)))):this.content()[0].scrollHeight>this.element.outerHeight()},_setModel:function(e){for(var i in e)if("enableRTL"===i)e[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1)),this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));else if("scrollLeft"===i)(parseFloat(e[i])<0||!this._hScroll)&&(e[i]=0),this._externalCall=!0,this._hScrollbar&&(e[i]=parseFloat(e[i])>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e[i])),this._setScrollLeftValue(parseFloat(e[i])),this.scrollLeft(e[i]),!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(e[i]);else if("scrollTop"===i)this._vScrollbar&&(e[i]=parseFloat(e[i])>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e[i])),(parseFloat(e[i])<0||!this._vScroll)&&(e[i]=0),this._externalCall=!0,this.content().scrollTop(parseFloat(e[i])),this.scrollTop(e[i]),this.scrollY(e[i]);else if("touchScroll"===i)this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");else if("scrollOneStepBy"===i)this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=e[i],this._vScrollbar.model.smallChange=e[i]),this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=e[i],this._hScrollbar.model.smallChange=e[i]);else{if("buttonSize"!==i){"height"===i&&(this._eleHeight=e[i]),"width"===i&&(this._eleWidth=e[i]),this.refresh();break}this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize),this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize),this.refresh()}},_createScrollbar:function(i,s){var n,l,o,r,a,d,h,c=this,u=document.createElement("div");return i===t.ScrollBar.Orientation.Vertical?(l=this.model.scrollerSize,o=n=t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?this.model.height-(s?this.model.scrollerSize:0):this.element.height()-(s?this.model.scrollerSize:0),r=this.content()[0].scrollHeight,a=this.scrollTop()):(l=n=this.model.width-(s?this.model.scrollerSize:0),o=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")?(d=this.content().find(this.model.targetPane),r=null!=this.model.targetPane&&d.length?d[0].scrollWidth+d.parent().width()-d.width():this.content()[0].scrollWidth):(l=n=this.element.width()-(s?this.model.scrollerSize:0),r=this.content()[0].scrollWidth),a=this.scrollLeft()),this.element.children(".e-hscrollbar").length>0?e(this.element.children(".e-hscrollbar")).before(u):this.element.append(u),e(u).ejScrollBar({elementHeight:c._eleHeight,elementWidth:c._eleWidth,buttonSize:c.model.buttonSize,orientation:i,viewportSize:n,height:o,width:l,maximum:r-n,value:a,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)}),h=e(u).ejScrollBar("instance"),i!==t.ScrollBar.Orientation.Vertical&&s||this._off(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:h._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=h._scrollData:this._scrollYdata=h._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(h._scrollData.enableRTL=!0),h._enabled=this.model.enabled,h},_updateScrollbar:function(i,s){var n=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;n&&(i===t.ScrollBar.Orientation.Vertical?(n.model.width=this.model.scrollerSize,n.model.height=n.model.viewportSize=this.model.height-(s?this.model.scrollerSize:0),n.model.maximum=this.content()[0].scrollHeight-n.model.viewportSize,n.model.value=this.scrollTop()):(n.model.width=n.model.viewportSize=this.model.width-(s?this.model.scrollerSize:0),n.model.height=this.model.scrollerSize,n.model.maximum=(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-e(this.model.targetPane).outerWidth()):this.content()[0].scrollWidth)-n.model.viewportSize,this.model.enableRTL||(n.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").hide()):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_scrollChanged:function(i){this._updateScroll=!0,i.scrollTop!==s?this.scrollY(i.scrollTop,!0,"",i.source):i.scrollLeft!==s&&this.scrollX(i.scrollLeft,!0,"",i.source),this._updateScroll=!1;var n=this;e.when(this.content()).done(t.proxy(function(){n._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(s,n){this._scrollEle=e(s).data("ejScrollBar"),this._event=n;this._listener=function(){this._scrollEle._off(e(document),"mousemove touchmove",this._scrollEle._mouseMove),e(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle)),this._scrollEle._prevY=null,this._off(e(document),"mousemove touchmove",this._mouseMove),this._off(e(document),"mouseup touchend",this._mouseUp),this._off(e(i),"blur"),this._evtData.handler,this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})},this._on(e(i),"blur",this._listener)},_thumbStart:function(e){this._evtData=e.scrollData;var t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar"));e.scrollData.handler,t=this.element.find("."+e.scrollData.handler).closest(".e-scrollbar");this._bindBlurEvent(t,e),this._trigger("thumbStart",e)},_thumbMove:function(e){this._trigger("thumbMove",e)},_thumbEnd:function(t){this._trigger("thumbEnd",t),this._off(e(i),"blur")},refresh:function(i){var s,n;i||this.element.find(">.e-content").removeAttr("style"),t.isNullOrUndefined(this._eleHeight)||"string"!=typeof this._eleHeight||-1==this._eleHeight.indexOf("%")||this._parentHeight==e(this.element).parent().height()||(s=(s=this._exactElementDimension(this.element.parent())).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),s)),t.isNullOrUndefined(this._eleWidth)||"string"!=typeof this._eleWidth||-1==this._eleWidth.indexOf("%")||this._parentWidth==e(this.element).parent().width()||(s=(s=this._exactElementDimension(this.element.parent())).width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),s)),this._ensureScrollers(),n=this.scrollLeft(),this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),n>0?this.content().scrollLeft(n):this._setScrollLeftValue(n)):this.content().scrollLeft(n),(this.scrollTop()&&null==this._vScrollbar||null!==this._vScrollbar&&null!=this._vScrollbar._scrollData&&!this._vScrollbar._scrollData.skipChange)&&this.content().scrollTop(this.scrollTop()),this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData)),this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData)),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version?this.element.find(".e-hhandle").css("left","0px"):null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this._addActionClass(),this._autohide()},_exactElementDimension:function(e){var t,i,s,n=e.get(0).getBoundingClientRect(),l=["left","right","top","bottom"];for(t=n.width?n.width:n.right-n.left,i=n.height?n.height:n.bottom-n.top,s=0;s<l.length;s++)this["border_"+l[s]]=isNaN(parseFloat(e.css("border-"+l[s]+"-width")))?0:parseFloat(e.css("border-"+l[s]+"-width")),this["padding_"+l[s]]=isNaN(parseFloat(e.css("padding-"+l[s])))?0:parseFloat(e.css("padding-"+l[s]));return{width:t,height:i}},_keyPressed:function(e,i){if(this.model.enabled){if(-1!==["input","select","textarea"].indexOf(i.tagName.toLowerCase()))return!0;var s,n;if(-1!==["up","down","pageUp","pageDown"].indexOf(e))this._vScrollbar&&("msie"==t.browserInfo().name&&this.model.allowVirtualScrolling&&this._content.focus(),s=this._vScrollbar._scrollData),n="o";else{if(-1===["left","right","pageLeft","pageRight"].indexOf(e))return!0;this._hScrollbar&&(s=this._hScrollbar._scrollData),n="i"}return!s||!this._changeTop(s,(e.indexOf(n)<0?-1:1)*("p"!==e[0]?1:3)*s.scrollOneStepBy,"key")}},scrollY:function(e,i,s,n,l){if(""!==e){if(i){l={source:n||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:l};if(this._trigger("scroll",l))return;return e=l.scrollTop,this.scrollTop(e),void this.content().scrollTop(e)}(t.isNullOrUndefined(s)||""===s)&&(s=100),this._vScrollbar&&(e=parseFloat(e)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e)),this.scrollTop(e),this.content().stop().animate({scrollTop:e},s,"linear"),this._trigger("scroll",{source:n||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:l})}},scrollX:function(e,i,s,n,l){var o;if(""!==e){if(this._hScrollbar&&(e=parseFloat(e)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e)),this._externalCall=!0,o=t.browserInfo().name,this.model.enableRTL&&"mozilla"!=o&&(e<0&&(e=Math.abs(e)),null!=this.model.targetPane?this.content().find(this.model.targetPane)[0]:this.content()[0],"mousemove"!=l&&"touchmove"!=l&&"msie"!=o&&"msie"!=o&&(e=this._hScrollbar._scrollData.scrollable-e)),this.scrollLeft(e),i){if(this._trigger("scroll",{source:n||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:l}))return;return void(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(e):this.content().scrollLeft(e))}(t.isNullOrUndefined(s)||""===s)&&(s=100),null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:e},s,"linear"):this.content().stop().animate({scrollLeft:e},s,"linear"),this._trigger("scroll",{source:n||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:l})}},enable:function(){var e=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");e.hasClass("e-disable")&&(e.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0),this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon").addClass("e-disable").attr({"aria-disabled":!0}),this.model.enabled=!1,this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(e,i,s,n){var l,o=null!=this.model.targetPane&&"height"!=e.dimension?this.content().find(this.model.targetPane)[e.scrollVal]():this.content()[e.scrollVal]();return"height"==e.dimension&&0==o&&(o=0!=this.scrollTop()?this.scrollTop():0),l=o+i,(e.enableRTL?l<e.scrollable:l>e.scrollable)&&(l=e.scrollable),(e.enableRTL?l>0:l<0)&&(l=0),l!==o&&(this["scroll"+e.xy](l,!0,"",s,n),"X"!==e.xy||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(l,s,!0,n):this._hScrollbar.scroll(l,s,!0,n)),l!==o},_mouseWheel:function(t){var s;if((this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var n,l=0,o=t.data.d,r=t;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:r.data.d}),this._wheelStart=!1,clearTimeout(e.data(this,"timer")),1!=this._wheelx&&(0==t.wheelDeltaX||0==t.wheelDeltaY)&&(this._wheelx=1),0==navigator.platform.indexOf("Mac")&&0==this._wheelx&&("webkit"==this._browser||"chrome"==this._browser))return!0;"mozilla"==this._browser?t.axis==t.HORIZONTAL_AXIS?o=this._scrollXdata:this._scrollYdata:"msie"==this._browser?("wheel"==t.type&&(l=t.deltaX/120),"mousewheel"==t.type&&t.shiftKey&&(o=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&0!=t.wheelDeltaX&&0==t.wheelDeltaY&&this._scrollXdata&&(o=this._scrollXdata),0==t.wheelDeltaX&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(l=0==navigator.platform.indexOf("Mac")?-t.wheelDelta/3:-t.wheelDelta/120,i.opera&&parseFloat(i.opera.version,10)<10&&(l=-l)):t.detail&&(l=t.detail/3),l&&(r.originalEvent&&(n=r.originalEvent.wheelDelta&&r.originalEvent.wheelDelta>0||r.originalEvent.detail&&r.originalEvent.detail<0?-1:1),this._changeTop(o,l*o.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():r.preventDefault(),r.stopImmediatePropagation(),r.stopPropagation(),this._trigger("wheelMove",{originalEvent:t,scrollData:r.data.d,direction:n})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:r}),this._wheelx=0),s=this,e.data(this,"timer",setTimeout(function(){s._wheelStart=!0,s._trigger("wheelStop",{originalEvent:t,scrollData:r.data.d,direction:n})},250)))}},_scrollerHover:function(e){"mouseenter"!=e.type&&"touchstart"!=e.type||this.content().siblings().is(":visible")?("mouseleave"==e.type||"touchend"==e.type)&&this.content().siblings().hide():this.content().siblings().css("display","block")},_mouseUp:function(s){if(s.data){var n=s.data.d;"mouseup"!==s.type&&"touchend"!==s.type&&(s.toElement||s.relatedTarget)||(this.content().css("cursor","default"),this._off(e(document),"mousemove touchmove"),this._off(e(document),"mouseup touchend",this._mouseUp),n.fromScroller=!1,!0!==this._mouseMoved||"thumb"!==s.data.source||t.isNullOrUndefined(this.model)||(e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:s,scrollData:n})},this)),this._off(e(i),"blur"))),n.up=!0}},_mouseDownOnContent:function(n){var l,o;if(this._velocity=0,this.model.enabled&&(l=n.data.d,this._evtData=n.data,this._startX=n.clientX!=s?n.clientX:n.originalEvent.changedTouches[0][l.clientXy],this._startY=n.clientY!=s?n.clientY:n.originalEvent.changedTouches[0][l.clientXy],this._timeStart=n.timeStamp||Date.now(),l.handler,o=this.element.find("."+l.handler).closest(".e-scrollbar"),this._bindBlurEvent(o,n),!this._trigger("thumbStart",{originalEvent:n,scrollData:l}))&&(3!=n.which||2!=n.button)){l.fromScroller=!0;var r,a=null,d=1;this._document=e(document),this._window=e(i),this._mouseMove=function(e){var i,n,o;if(this._relDisX=(this._startx=e.clientX!=s?e.clientX:e.originalEvent.changedTouches[0][l.clientXy])-this._startX,this._relDisY=(this._starty=e.clientY!=s?e.clientY:e.originalEvent.changedTouches[0][l.clientXy])-this._startY,this._duration=(e.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,e.preventDefault(),"iframe"===e.target.tagName.toLowerCase())return e.type="mouseup",void this._mouseUp(e);if(i="mousemove"==e.type?e[l.clientXy]:e.originalEvent.changedTouches[0][l.clientXy],a&&i!==a&&(this._mouseMoved=!0,n=i-a,o=this.model[l.scrollVal]-n,1==d&&Math.abs(n)>5&&(r=l.position,d=0),0==d&&(a=i),o>=0&&o<=l.scrollable&&r===l.position)){var h=this._velocityY>.5&&this._duration<50&&"Top"==l.position,c=this._velocityX>.5&&this._duration<50&&"Left"==l.position;(this._velocityY>.5||this._velocityX>.5)&&this._duration<50?h?(o=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(o+=this.scrollTop())>l.scrollable&&(o=l.scrollable):o<this.scrollTop()&&(o=Math.abs(o-this.scrollTop())),this.scrollTop()<=l.scrollable&&this.scrollY(o,!1,this.model.animationSpeed,"thumb")):c&&(o=Math.abs(this._relDisX),this._startX>this._startx?(o+=this.scrollLeft())>l.scrollable&&(o=l.scrollable):(o-=this.scrollLeft(),((o=Math.abs(o))>l.scrollable||o>=this.scrollLeft())&&(o=0)),this.scrollLeft()<=l.scrollable&&this.scrollX(o,!1,this.model.animationSpeed,"thumb")):(this["scroll"+l.xy](o,!0,"","thumb",e.type),"X"===l.xy?this._hScrollbar.scroll(o,"thumb",!0,e.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(o,"thumb",!0,e.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:e,scrollData:l}))}null==a&&(a=i)},this._on(e(document),"mousemove touchmove",{d:l,source:"thumb"},this._mouseMove),this._mouseMoved=!1,this._on(e(document),"mouseup touchend",{d:l,source:"thumb"},this._mouseUp)}},_scroll:function(e){for(var i,s,n=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null],l=0;l<2;l++)if((i=n[l])&&!i.skipChange){if(this._externalCall||("height"===i.dimension?this.scrollTop(e.target[i.scrollVal]):this.scrollLeft(e.target[i.scrollVal])),i.sTop=this.model&&null!=this.model.targetPane&&1==l&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0][i.scrollVal]:"scrollTop"==i.scrollVal?this.scrollTop():this.scrollLeft(),this[i.scrollVal](i.sTop),i.fromScroller)return;1===l?(s=this.content()[0],this._rtlScrollLeftValue&&s.scrollWidth-s.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=s.scrollWidth-s.clientWidth),i.sTop=this.model&&"mozilla"!=t.browserInfo().name&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?0==this._rtlScrollLeftValue?-1*i.sTop:i.sTop-this._rtlScrollLeftValue:i.sTop,this._hScrollbar.scroll(i.sTop,"",!0)):this._vScrollbar.scroll(i.sTop,"",!0),(2==n.length&&1==l||1==n.length&&0==l)&&(this._externalScroller=!1)}},_changevHandlerPosition:function(e){var t=this._vScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&e>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(e){var t=this._hScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&top>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_destroy:function(){this.element.css({width:"",height:""}).find(".e-vscrollbar,.e-hscrollbar").remove(),this.content().removeClass("e-content").css({width:"",height:""})}})}(jQuery,Syncfusion,window)}),
/*!
*  filename: ej.dialog.min.js
*  version : 2.4.85
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,backgroundScroll:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",backgroundScroll:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(i){var s,n;for(s in i)switch(s){case"closeIconTooltip":this._dialogClose.attr("title",i[s]);break;case"tooltip":this._tooltipText(i[s]);break;case"title":this.model.title=i[s],this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(i[s]),this._updateCaptionWidth();break;case"width":this.model.width=i[s],this._changeSize(),this._updateCaptionWidth(),i[s]=this.model.width;break;case"height":this.model.height=i[s],this._changeSize(),i[s]=this.model.height;break;case"position":this.model.position=i[s],this._dialogPosition();break;case"cssClass":this._changeSkin(i[s]);break;case"showRoundedCorner":this.model.showRoundedCorner=i[s],this._roundedCorner(i[s]);break;case"contentType":this.model.contentType=i[s],this._appendContent(i[s]);break;case"enabled":this.model.enabled=i[s],this._enabledAction(i[s]);break;case"contentUrl":this.model.contentUrl=i[s],this._appendContent(this.model.contentType);break;case"backgroundScroll":this.model.backgroundScroll=i[s],!this.model.backgroundScroll&&this.model.enableModal?e("body").addClass("e-dialog-modal"):e("body").removeClass("e-dialog-modal");break;case"content":case"target":this._ejDialog.appendTo(e(i[s])),this.model.target=this.model.content=i[s],this._dialogPosition();break;case"containment":this._setDragArea(i[s]),t.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target),this.model.position.X=this.model.position.Y="",this._dialogPosition(),this.model.containment=i[s]=this._target,this.model.enableModal&&this._createOverlay(),this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=i[s],this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels,!0),this._tooltipText(this.model.tooltip),this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title),this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=i[s],this._ejDialog.css("minHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"minWidth":this.model.minWidth=i[s],this._ejDialog.css("minWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxHeight":this.model.maxHeight=i[s],this._ejDialog.css("maxHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxWidth":this.model.maxWidth=i[s],this._ejDialog.css("maxWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",i[s]);break;case"faviconCSS":this.model.faviconCSS=i[s],this._favIcon(),this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=i[s],this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize"),this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[s],i[s]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[s],i[s]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove()),this._reRenderScroller();break;case"showHeader":this.model.showHeader=i[s],i[s]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))):(this._ejDialog.find(".e-titlebar").remove(),this._maximize?this.refresh():this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))),this._roundedCorner(this.model.showRoundedCorner),this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=i[s],i[s]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove(),this._enableResize()._enableDrag()._sizeInPercent(),this._reRenderScroller(),this._setContainerSize()._resetScroller(),this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":this.model.footerTemplateId=i[s],this.model.showFooter&&(this._ejDialog.find(".e-footerbar").empty(),n=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(n),this._enableResize());break;case"enableRTL":this.model.enableRTL=i[s],this.model.faviconCSS&&this._favIcon(),i[s]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl"),this.scroller&&this._resetScroller()):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr"),this.scroller&&this._resetScroller());break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[s])),this.model.actionButtons=i[s],this._updateCaptionWidth();break;case"enableModal":this._enableModal(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this._overLay&&this._overLay.remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this.model.enableAnimation&&this._ejDialog.stop(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1,e(window).off("resize",e.proxy(this._reSizeHandler,this))},keyConfigs:[37,38,39,40],_init:function(){this._init=!0,this._widthPercent=null,this._heightPercent=null,this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._initSize={width:this.model.width,height:this.model.height},this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null},this._isOpen=this._maximize=this._minimize=!1,this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._setDimension(),this.model.close||(this.model.close=this.model.Close),this.model.target||(this.model.target=this.model.content),this._responsive(),this._renderControl(),this._wireEvents(),this.scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),this.scrObj&&this.scrObj._resetScroller(),this.hidden=!1,this._init=!1,this._keyNavigation=!1},_responsive:function(){this.width=this.model.width,e(this.element).width(this.width),this.height=this.model.height,e(this.element).height(this.height),e(window).on("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=e(this._dialogTitlebar).outerWidth(),e(this.contentDiv).width(this.width),e(this.contentDiv).children().width(this.width),this.model.height=this.height=e(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-e(this._dialogTitlebar).outerHeight()-e(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height())),t.isNullOrUndefined(this.element)||this._collapsible||this._resetScroller()},_setLocaleCulture:function(e,t){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=e.closeIconTooltip),t&&(this.model.tooltip=this.localizedLabels.tooltip,this.model.title=this.localizedLabels.title),JSON.stringify(this.model.tooltip)===JSON.stringify(this.defaults.tooltip)&&(this.model.tooltip=e.tooltip),this.model.title===this.defaults.title&&(this.model.title=e.title)},_setDragArea:function(i){t.isNullOrUndefined(i)?this._target=null:"string"==typeof i?("parent"==i&&(this._target=e(this.element).parent()),"document"==i.toLowerCase()&&(this._target=e(document)),"window"==i.toLowerCase()?this._target=e(window):e(i).length>0&&(this._target=e(i))):"object"==typeof i?i.length>0&&(this._target=i):this._target=null},_addAttr:function(t){var i=this;e.map(t,function(e,t){if("class"==t)i._ejDialog.addClass(e);else if("disabled"==t&&"disabled"==e)i.model.enabled=!1,i._enabledAction(!1);else if(i._ejDialog[0].hasAttribute("style")){var s=i._ejDialog[0].getAttribute("style")+e;i._ejDialog.attr(t,s)}})},_tooltipText:function(i){e.extend(this.model.tooltip,i),!t.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close),!t.isNullOrUndefined(this._dialogCollapsible)&&(i.collapse||i.expand)&&(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand)),!t.isNullOrUndefined(this._dialogMaximize)&&(i.maximize||i.restore)&&(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogMinimize)&&(i.minimize||i.restore)&&(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogPin)&&(i.pin||i.unPin)&&(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){var i,s,n;this._cloneElement=this.element.clone(),this.element.attr("tabindex",0).attr({role:"dialog","aria-labelledby":this.element.prop("id")+"_title"}),this._ejDialog=t.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(""==this.element.prop("id")?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0}),this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize"),this.wrapper=this._ejDialog,this._addAttr(this.model.htmlAttributes),this._setDragArea(this.model.containment),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,s=t.isNullOrUndefined(i)?document.body:i,(n=e(s).find("#"+this._id+"_wrapper").get(0))&&e(n).remove(),this._ejDialog.appendTo(s),this.model.enableRTL&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon()),this._appendContent(this.model.contentType),this._enableResize()._enableDrag()._setSize(),"auto"!=this.model.height&&this._sizeInPercent(),"ajax"!=this.model.contentType&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize()),this._roundedCorner(this.model.showRoundedCorner),this._enabledAction(this.model.enabled),"auto"==this._sizeType.width&&(this._maxWidth=this.model.width),"auto"==this._sizeType.height&&(this._maxHeight=this.model.height)},_setContainerSize:function(){if("auto"!=this.model.height){var t=this._ejDialog.outerHeight()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1;this.contentDiv.height(t),this.element.outerHeight(t)}return this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height},this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null,this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null,this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){if(this.model.enableResize){this._ejDialog.addClass("e-resizable");var e=t.buildTag("div.e-icon e-resize-handle");this.model.showFooter?e.appendTo(this._dialogFooterbar):e.appendTo(this._ejDialog),this._resizeDialog()}return this},_changeSkin:function(e){this.model.cssClass!=e&&this._ejDialog.removeClass(this.model.cssClass).addClass(e)},_enableModal:function(e){e?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(e){e?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),t.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),t.buildTag("div.e-disable-overlay").appendTo(this.wrapper),t.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),"string"!=typeof this._elementTitle&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog),this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=t.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var e=this.model.faviconCSS&&!t.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&!t.isNullOrUndefined(this._dialogTitlebar)&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-e),this},_iconsRender:function(i){for(var s=0;s<i.length;s++)switch("msie"==t.browserInfo().name&&t.browserInfo().version<=8?e.trim(i[s]):i[s].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(i[s])}},_customIconsRender:function(e){this._customIcon=t.util.buildTag("div#"+this.element[0].id+"_"+e+"button.e-dialog-icon e-icon e-"+e,null,null).attr("tabIndex","0").attr("title",e),this._customIcon.appendTo(this._dialogTitlebar),this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(t){if(!this.element.hasClass("e-disable")){var i={cancel:!1,buttonID:e(t.target).attr("id"),event:t.type,model:this.model,currentTarget:t.currentTarget.title};this._trigger("actionButtonClick",i)}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(i){var s,n,l,o,r;this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box"),s=this,t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(i)?(this.dialogIframeContent=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild)):"ajax"==i?(this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url)):"iframe"==i?(this.element.children(".e-iframe").length>0?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=t.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&e(this.iframe).load(function(){s.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):"image"==i?(n=t.buildTag("img.e-images","","",{src:this.model.contentUrl}),this.element.append(n).show().appendTo(this.contentDiv),e(n).on("load",function(){s._dialogPosition()}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):this.element.show().appendTo(this.contentDiv),this._ejDialog.find("div.e-resize-handle").length>0?0==this._ejDialog.find(".e-footerbar").length&&this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle")):(l=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(l)?0==this._ejDialog.find(".e-footerbar").length?this.contentDiv.appendTo(this._ejDialog):this.contentDiv.insertBefore(this._dialogFooterbar):(this.contentDiv.appendTo(this._ejDialog),o=e("#"+this.contentDiv.find("iframe").attr("id")),e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(l),"mozilla"==t.browserInfo().name&&setTimeout(function(){e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(l)},500))),this.model.showFooter&&0==this._ejDialog.find(".e-footerbar").length&&(this._renderFooterBar(),null!=this.model.footerTemplateId&&(r=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(r)))},_roundedCorner:function(e){this._ejDialog[e?"addClass":"removeClass"]("e-corner"),this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content"),this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):this.model.showHeader||this.model.showFooter||this.contentDiv.addClass("e-dialog-content"))},_reRenderScroller:function(){if(null!=this.scroller&&(this.scroller.refresh(!0),!this.model.enableRTL)){if(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=0,i=0;else e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerHeight();Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=i+t,this.scroller._vScrollbar._scrollData.handle-=i,this.scroller._vScrollbar._scrollData.handleSpace-=i+t,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(e-i-t))}if((!this.scroller._vScrollbar||!this.scroller._vScrollbar._scrollData)&&this.scroller._hScrollbar&&this.scroller._hScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter){var s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width();t=0,i=0}else s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerWidth();this.scroller._hScrollbar.model.width-=i+t,this.scroller._hScrollbar._scrollData.handle-=i+t,this.scroller._hScrollbar._scrollData.handleSpace-=i+t,this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData),this.scroller._hScrollbar.element.find("> div.e-hscroll").width(s-i-t)}}},_dialogMaxZindex:function(){var t,i,s,n=this.element.parents();return t=e("body").children(),e(t).each(function(e,t){n.push(t)}),i=e(this.model.target).children(),e(i).each(function(e,t){n.push(t)}),!(s=Math.max.apply(s,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||s<1e4?s=1e4:s+=1,s},_setZindex:function(){var e=this._dialogMaxZindex();this.model.zIndex<=e&&this._ejDialog.css({zIndex:e+1})},_createOverlay:function(){var i,s=this._ejDialog.css("zIndex");t.isNullOrUndefined(this._overLay)||this._overLay.remove(),this.model.backgroundScroll||e("body").addClass("e-dialog-modal"),this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:s-1}),e(this._overLay).addClass("e-widget"),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,this._overLay.appendTo(t.isNullOrUndefined(i)?document.body:i);var n=t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?"fixed":"absolute",l=t.isNullOrUndefined(i)||"fixed"==n||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().left,o=t.isNullOrUndefined(i)||"fixed"==n||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().top;this._overLay.css({top:o,left:l,position:n})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var s=this,n=this.model.title,l={success:function(e){try{s._ajaxSuccessHandler(e,t,i,n)}catch(e){}},error:function(e){try{s._ajaxErrorHandler({status:e.status,responseText:e.responseText,statusText:e.statusText},t,i,n)}catch(e){}},complete:function(){try{s._setContainerSize(),s._resetScroller(),s.model.showOnInit||s._setHiddenDialogSize()}catch(e){}}};e.extend(!0,l,this.model.ajaxSettings),this._sendAjaxRequest(l)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(e,t,i){t.removeClass("e-load"),t.html(e).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.model.showOnInit&&this.open(),this._trigger("ajaxSuccess",{data:e,url:i})},_ajaxErrorHandler:function(e,t,i){t.addClass("e-dialog-loaded").appendTo(this.contentDiv),this._dialogPosition().open(),this._trigger("ajaxError",{data:e,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0"),"close"==this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):"close"!=this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):("close"==this.model.closeIconTooltip&&this.model.tooltip.close,this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close)),this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down"),this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore"),this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore"),this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin"),this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){if(this._dialogFavIcon)e=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom");else{this._dialogFavIcon=t.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")});var e=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});e.appendTo(this._dialogFavIcon),this._dialogFavIcon.appendTo(this._dialogTitlebar)}this.model.faviconCSS?e.addClass(this.model.faviconCSS):this._dialogFavIcon.remove(),this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),i=parseInt(this.model.maxWidth),s=parseInt(this.model.maxHeight),n=parseInt(this.model.width),l=parseInt(this.model.height),o=this._getParentObj();isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(e=this._convertPercentageToPixel(o.outerWidth(),e)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(t=this._convertPercentageToPixel(o.outerHeight(),t)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(i=this._convertPercentageToPixel(o.innerWidth(),i)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(s=this._convertPercentageToPixel(o.innerHeight(),s)),isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(n=this._convertPercentageToPixel(o.innerWidth(),n)),isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(l=this._convertPercentageToPixel(o.innerHeight(),l)),(i&&n>i||e&&n<e)&&(this.model.width=n>i?i:e),(s&&l>s||t&&l<t)&&(this.model.height=l>s?s:t)},_setSize:function(){var e=this.model;return this._minMaxValidation(),this._ejDialog.css({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}),this._ejDialog.css({height:e.height,minHeight:e.minHeight,maxHeight:e.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var i,s=this._ejDialog.outerHeight(!0)-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),n={width:"0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?Math.round(this._ejDialog.width()):Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:"0px"==this.contentDiv.css("border-width")?s:s-1,enableTouchScroll:!1};"auto"==this.model.height&&(this.element.height()<this.model.maxHeight||!this.model.maxHeight)&&!this._maximize&&(n.height="auto"),"auto"!=this.model.width||this._maximize||(n.width=this.model.width),this.contentDiv.ejScroller(n),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._padding=parseInt(e(this.element).css("padding-top"))+parseInt(e(this.element).css("padding-bottom")),"none"==e(this._ejDialog).css("display")&&(this.hidden=!0,this._ejDialog.css({display:"block"})),!t.isNullOrUndefined(this.contentDiv.height())&&this.contentDiv.height()>0&&(i=t.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:!this.scroller._hScrollbar&&this.scroller._vScrollbar?this.contentDiv.outerHeight():this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),"auto"!=this.model.height&&"100%"!=this.model.height?this.element.css({height:i-1}):this.element.css("height",this.model.height),"auto"!=this.model.height&&"100%"!=this.model.height||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||"auto"==this.model.width||"100%"==this.model.width?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth("0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight})),this.hidden&&this._ejDialog.css({display:"none"}),this.hidden=!1},_updateScroller:function(e,t){this.contentDiv.ejScroller({width:t,height:e,enableRTL:this.model.enableRTL,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._changeSize()},_dragDialog:function(){var i=this;this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(e){return e.element.attr("aria-grabbed",!0),i._clickHandler(),!i.dialogPin&&i.model.allowDraggable&&i.model.enabled?i._trigger("dragStart",{event:e})?(e.cancel=!0,!1):void 0:(e.cancel=!0,!1)},drag:function(e){i._trigger("drag",{event:e})},dragStop:function(s){var n,l;i._ejDialog.focus(),s.element.attr("aria-grabbed",!1),i.element.find("> .e-draggable.e-titlebar")&&((n=e("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&n.option("cursorAt",i.element.offset())),l=this.helper.offsetParent().offset(),i._trigger("dragStop",{event:s}),i.model.position.X=t.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[l.left+parseFloat(this.helper.offsetParent().css("border-left-width"))],i.model.position.Y=t.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[l.top+parseFloat(this.helper.offsetParent().css("border-top-width"))],i._positionChanged=!0,i.dlgresized=!0},helper:function(){return e(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var t,i=this,s=!1,n=parseInt(this.model.minWidth),l=parseInt(this.model.minHeight),o=parseInt(this.model.maxWidth),r=parseInt(this.model.maxHeight);return t=this._getParentObj(),isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(n=this._convertPercentageToPixel(t.outerWidth(),n)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(l=this._convertPercentageToPixel(t.outerHeight(),l)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(o=this._convertPercentageToPixel(t.innerWidth(),o)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(r=this._convertPercentageToPixel(t.innerHeight(),r)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:l,minWidth:n,maxHeight:r,maxWidth:o,handle:"e-widget-content",resizeStart:function(e){if(i.dlgresized=!0,!i.model.enabled)return!1;s||i._trigger("resizeStart",{event:e}),s=!0,i.model.position={X:i._ejDialog.css("left"),Y:i._ejDialog.css("top")},i._dialogPosition()},resize:function(t){i.dlgresized=!0;var s=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(s).outerHeight(),i.model.width=e(s).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),i._updateCaptionWidth(),i._trigger("resize",{event:t}),i._sizeType={width:"px",height:"px"},this.scrObj&&this.scrObj._resetScroller()},resizeStop:function(t){i.dlgresized=!0,i._ejDialog.focus(),i._sizeInPercent();var n=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(n).outerHeight(),i.model.width=e(n).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),s&&i._trigger("resizeStop",{event:t}),s=!1,i._setDimension()},helper:function(){return e(i._ejDialog)}}),this}},_dialogPosition:function(){if(this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.containment)&&t.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),""!=this.model.position.X||""!=this.model.position.Y)if(this._ejDialog.css("position","absolute"),t.isNullOrUndefined(this.model.target)&&t.isNullOrUndefined(this.model.containment))this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y);else{var i=t.isNullOrUndefined(this.model.containment)?this.model.target:this.model.containment;this.dlgresized||this._keyNavigation?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(this._ejDialog.css("left",e(i).offset().left+parseInt(this.model.position.X)),this._ejDialog.css("top",e(i).offset().top+parseInt(this.model.position.Y)))}else this._centerPosition();return this},_centerPosition:function(){var i,s,n,l,o=0,r=0;t.isNullOrUndefined(this.model.target)&&(t.isNullOrUndefined(this._target)||e(this._target).is(e(document))||e(this._target).is(e(window)))?(l=document.documentElement,o=(e(window).outerWidth()>this._ejDialog.width()?(e(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||l.scrollLeft),r=(e(window).outerHeight()>this._ejDialog.height()?(e(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||l.scrollTop)):("static"==(i=t.isNullOrUndefined(this._target)?e(this.model.target):e(this._target)).css("position")&&(s=i.offsetParent().offset(),o=(n=i.offset()).left-s.left,r=n.top-s.top),i.outerWidth()>this._ejDialog.width()&&(o+=(i.outerWidth()-this._ejDialog.width())/2),i.outerHeight()>this._ejDialog.height()&&(r+=(i.outerHeight()-this._ejDialog.height())/2)),this._ejDialog.css({top:r,left:o}),this._ejDialog.css("position","absolute")},_closeClick:function(e){"touchstart"==e.type&&e.preventDefault(),this.model.enabled&&(e.stopPropagation(),this.close(e))},_collapsibleClick:function(t){this.model.enabled&&(e(t.target).hasClass("e-arrowhead-up")?this._actionCollapse(t):e(t.target).hasClass("e-arrowhead-down")&&this._actionExpand(t))},_actionCollapse:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:!!e}),this._collapsible=!0)},_actionExpand:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:!!e}),this._collapsible=!1)},_maximizeClick:function(i){if(this.model.enabled){var s=e(i.target),n=this._dialogMaximize;s.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),s.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),this._maximize=!0,this._minimize=!1;var i=this;this._dialogCollapsible&&!t.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0),1==this._collapseValue&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){i.refresh(),i._reRenderScroller()}),this._resetScroller(),e(this.contentDiv).is(":hidden")&&this.contentDiv.show()},_actionRestore:function(){this.element.height("").width(""),this.contentDiv.height("").width(""),this._restoreDialog(),this._maximize=this._minimize=!1},_minimizeClick:function(i){if(this.model.enabled){var s=e(i.target),n=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize;s.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}},_actionMinimize:function(){var t;e(window).height(),this._ejDialog.height(),this.element.height();this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css("minHeight","0"),this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?t=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),t=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",t+2),this._hideIcon(!1)):this._ejDialog.css("height",""),this.contentDiv.hide(),this.model.showFooter&&this._dialogFooterbar.hide(),this._maximize=!1,this._minimize=!0},_hideIcon:function(i){var s=this._dialogCollapsible?this._dialogCollapsible:null;i?(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(t){if(this.model.enabled){var i=e(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin))}},_restoreDialog:function(){this.contentDiv.show(),this.model.showFooter&&this._dialogFooterbar.show(),this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow"),this._setSize()._resetScroller(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(){var e=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<e&&this._ejDialog.css({zIndex:e+1})},_mouseClick:function(t){t.currentTarget==this._id&&(e(t.target).hasClass("e-dialog")||e(t.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),e(t.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(t){var i;i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,this.model.allowKeyboardNavigation&&this.model.enabled&&e(t.target).hasClass("e-dialog")&&e.inArray(i,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(i,t.ctrlKey),t.preventDefault()),this.model.closeOnEscape&&27===i&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(t),t.preventDefault())),13===i&&this.model.enabled&&(e(t.target).hasClass("e-close")?this.close(t):(e(t.target).hasClass("e-arrowhead-up")||e(t.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(t),e(t.target).hasClass("e-maximize")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMaximize)?this._maximizeClick(t):(e(t.target).hasClass("e-minus")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMinimize))&&this._minimizeClick(t),(e(t.target).hasClass("e-pin")||e(t.target).hasClass("e-unpin"))&&this._pinClick(t)),9==i&&this.model.enableModal&&this._focusOnTab(t)},_focusOnTab:function(t){var i=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')");i=e(i).find("a, button, :input, select, [tabindex]:not('')"),t.shiftKey?i[i.index(t.target)-1]||(t.preventDefault(),i.last().focus()):i[i.index(t.target)+1]||(t.preventDefault(),i[0].focus())},_keyPressed:function(e,t){switch(this._keyNavigation=!0,e){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:0==this._ejDialog.position().left?0:this._ejDialog.position().left,Y:this._ejDialog.position().top>3?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:this._ejDialog.position().left>3?this._ejDialog.position().left-3:0,Y:0==this._ejDialog.position().top?0:this._ejDialog.position().top})}},_resizing:function(e,t){this.model.enableResize&&this.option(e,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var e=this._getParentObj();return this._widthPercent="%"==this._sizeType.width?parseFloat(this.model.width):this._convertPixelToPercentage(e.outerWidth(),this._ejDialog.outerWidth()),this._heightPercent="%"==this._sizeType.height?parseFloat(this.model.height):this._convertPixelToPercentage(e.outerHeight(),this._ejDialog.outerHeight()),this._widthPercent>=100&&(this._widthPercent=100,this._ejDialog.outerWidth(e.outerWidth()),this.model.width=this._ejDialog.width()),this._heightPercent>=100&&(this._heightPercent=100,this._ejDialog.outerHeight(e.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return t.isNullOrUndefined(this.model.containment)?t.isNullOrUndefined(this.model.target)?e(document):e(this.model.target):e(this.model.containment)},_convertPercentageToPixel:function(e,t){return Math.round(t*e/100)},_convertPixelToPercentage:function(e,t){return Math.round(t/e*100)},_reSizeHandler:function(){var t;this._maximize?this._resetScroller():(""!=this.model.position.X&&(""!=this.model.position.Y||this._minimize)||this._centerPosition(),t=this._getParentObj(),this._change=!1,this._windowSize.outerWidth!=e(window).outerWidth()?"%"==this._sizeType.width?this._percentageWidthDimension(t):this._pixelsWidthDimension(t):this._windowSize.outerHeight!=e(window).outerHeight()&&("%"==this._sizeType.height?this._percentageHeightDimension(t):this._pixelsHeightDimension(t)),this._change&&this._resizeContainer(t),this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._centerPosition())},_setDimension:function(){t.isNullOrUndefined(this.model.maxWidth)?t.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:("px"==this._sizeType.width||"auto"==this._sizeType.width)&&(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth,t.isNullOrUndefined(this.model.maxHeight)?t.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:("px"==this._sizeType.height||"auto"==this._sizeType.height)&&(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(e){this._ejDialog.outerWidth(this._convertPercentageToPixel(e.outerWidth(),this._widthPercent)),this._change=!0},_percentageHeightDimension:function(e){this._ejDialog.outerHeight(this._convertPercentageToPixel(e.outerHeight(),this._heightPercent)),this._change=!0},_pixelsWidthDimension:function(t){e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<e(t).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(t.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(t){e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<e(t).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(t.outerHeight()),this._change=!0)},_setWidth:function(e){this._ejDialog.outerWidth(e.outerWidth()),this._change=!0},_setHeight:function(e){this._ejDialog.outerHeight(e.outerHeight()),this._change=!0},_resizeContainer:function(){this.contentDiv.width(this._ejDialog.width()),this.element.outerWidth(this.contentDiv.width());var i=this._ejDialog.height()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.element.outerHeight(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.scroller=this.contentDiv.ejScroller({width:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this._ejDialog.width():this._ejDialog.width()-2),height:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this.element.outerHeight():this.element.outerHeight()-2),rtl:this.model.rtl,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),""==this.model.position.X||""==this.model.position.Y&&!this._minimize||this._positionChanged?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight()),this._updateCaptionWidth(),this._change=!1},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return!!(this.model.isResponsive||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&"auto"!=this.model.height)},_wireResizing:function(){e(window)[this._enableWindowResize()?"on":"off"]("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown),this._on(this._ejDialog,"click",this._mouseClick),this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){var i,s,n,l,o;return!!this._isOpen||1!=this._trigger("beforeOpen")&&(this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition(),i=this,s={},this._ejDialog.show(),this.model.enableAnimation&&(this._ejDialog.css({opacity:0}),"slide"==this.model.animation.show.effect?(l=this._ejDialog.css("left"),this._ejDialog.css({left:-this._ejDialog.width()}),s={left:l,opacity:1}):s={opacity:1}),this._ejDialog.animate(s,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){i.model&&("none"==i._ejDialog.css("display")&&i._ejDialog.show(),i._ejDialog.eq(0).focus(),i._ejDialog.css({opacity:""}),i.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),i._trigger("open"),i._updateCaptionWidth(),i.model.enableModal&&!i.model.backgroundScroll&&(i._ejDialog.height()>e(window).height()&&i._ejDialog.css("height",e(window).height()),i.model.height=e(window).height(),i._overLay.css("position","fixed"),i.scroller.refresh(!0),i.refresh()),(i.model.maxHeight||i.model.maxWidth)&&(n=i._ejDialog.outerHeight(!0)-(i._dialogTitlebar?i._dialogTitlebar.outerHeight(!0):0),("auto"==i.model.height||"100%"==i.model.height)&&(n=i.model.height),i._updateScroller(t.isNullOrUndefined(this.contentDiv)?n-2:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?i._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width")),i.scroller.refresh()))}),1==this.model.enableModal&&this._createOverlay(),this._isOpen=!0,this.element.find("> .e-draggable.e-titlebar")&&((o=e("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&o.option("cursorAt",this.element.offset())),this)},close:function(t){var i,s,n;return!this._isOpen||!this.model.enabled||(i=!!t,1!=this._trigger("beforeClose",{event:t,isInteraction:i})&&(this._isOpen=!1,s=this,n={},this.model.enableAnimation&&(n="slide"==this.model.animation.hide.effect?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(n,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){s._trigger("close",{event:t,isInteraction:i}),s._ejDialog.hide()}),this.model.enableModal&&(this._overLay&&this._overLay.remove(),this.model.backgroundScroll||e("body").removeClass("e-dialog-modal")),this))},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(e){return this.model.title=e,this._titleText.text(e),this._updateCaptionWidth(),this},setContent:function(e){return!!this.model.enabled&&(this.element.html(e),this._resetScroller(),this)},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),e(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),e(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),e(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var t=this._minimize;return this._actionRestore(),e(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(t?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,e(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,e(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}}),t.Dialog.Locale=t.Dialog.Locale||{},t.Dialog.Locale.default=t.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion),
/*!
*  filename: ej.button.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejButton","ej.Button",{element:null,model:null,validTags:["button","input"],_setFirst:!1,_rootCSS:"e-button",_requiresID:!0,defaults:{size:"normal",type:"submit",height:"",width:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",showRoundedCorner:!1,cssClass:"",prefixIcon:null,suffixIcon:null,enableRTL:!1,repeatButton:!1,timeInterval:"150",create:null,click:null,destroy:null},dataTypes:{size:"enum",enabled:"boolean",type:"enum",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",prefixIcon:"string",suffixIcon:"string",cssClass:"string",repeatButton:"boolean",enableRTL:"boolean",timeInterval:"string",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},_init:function(){this._cloneElement=this.element.clone(),this._initialize(),this._render(),this._controlStatus(this.model.enabled),this._wireEvents(this.model.repeatButton),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e),"disabled"==t&&"disabled"==e&&i.disable()})},_destroy:function(){this.element.removeClass(this.model.cssClass+"e-ntouch e-btn e-select e-disable e-corner e-widget").removeAttr("role aria-describedby aria-disabled"),this.element.removeClass("e-btn-"+this.model.size),this.model.contentType&&"textonly"!=this.model.contentType&&this.element.append(this._cloneElement.text())&&this.imgtxtwrap[0].remove()},_setModel:function(e){for(var t in e)switch(t){case"size":this._setSize(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this._setMajorIcon(e[t]);break;case"suffixIcon":this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"timeInterval":this.model.timeInterval=e[t];break;case"htmlAttributes":this._addAttr(e[t])}},_setSize:function(e){this.element.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal"),this.element.addClass("e-btn-"+e)},_setType:function(e){this.element.prop({type:e})},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(e){this.element.css("width",e)},_setText:function(e){"inputButton"==this.buttonType?this.element.val(e):this.model.contentType==t.ContentType.TextOnly?this.element.html(e):this.textspan.html(e),this.model.text=e},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e),this.model.prefixIcon=e},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e),this.model.suffixIcon=e},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this._renderButtonNormal())},_setImagePosition:function(e){this.model.contentType==t.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this._renderButtonNormal())},_setRTL:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass),this.element.addClass(e))},_initialize:function(){t.isTouchDevice()||this.element.addClass("e-ntouch"),this.element.is("input")?this.buttonType="inputButton":this.element.is("a")||this.element.is("button")?this.buttonType="tagButton":this.element.removeClass("e-button"),this.element.attr("type")?this.model.type=this.element.attr("type"):this._setType(this.model.type),this._timeout=null},_render:function(){this._setSize(this.model.size),this._setHeight(this.model.height),this._setWidth(this.model.width),this._setRTL(this.model.enableRTL),this.element.addClass(this.model.cssClass+" e-btn e-select e-widget").attr("role","button"),"inputButton"==this.buttonType?(this.element.addClass("e-txt"),null!=this.model.text&&""!=this.model.text?this.element.val(this.model.text):this.model.text=this.element.val()):this._renderButtonNormal(),this._roundedCorner(this.model.showRoundedCorner),this.model.text&&this.element.attr("aria-describedby",this.model.text)},_renderButtonNormal:function(){if((null==this.model.text||""==this.model.text)&&(this.model.text=this.element.html()),this.element.empty(),this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.model.contentType.indexOf("image")>-1&&(this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("div")),this.model.contentType==t.ContentType.TextAndImage){switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}this.element.append(this.imgtxtwrap)}else this.model.contentType==t.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageBoth?(this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageOnly?(this.imgtxtwrap.append(this.majorimgtag),this.element.append(this.imgtxtwrap)):(this.element.addClass("e-txt"),this.element.html(this.model.text))},_roundedCorner:function(e){1==e?this.element.addClass("e-corner"):this.element.removeClass("e-corner")},_wireEvents:function(t){t&&(this._on(this.element,"mousedown",this._btnRepatMouseClickEvent),this._on(e(document),"mouseup",this._mouseUpClick),this._on(this.element,"keyup",this._btnRepatKeyUpEvent),this._on(e(document),"keypress",this._btnRepatKeyDownEvent)),this._on(this.element,"click",this._btnMouseClickEvent)},_btnMouseClickEvent:function(e){var t,i=this;if(!i.model.enabled)return!1;i.element.hasClass("e-disable")||(t={target:e.currentTarget,e:e,status:i.model.enabled},i._trigger("click",t))},_btnRepatMouseClickEvent:function(e){var t=this;if(!t.model.enabled)return!1;t.element.hasClass("e-disable")||(t.model.enabled,(0==e.button||1==e.which)&&(t._timeout=setInterval(function(){t._trigger("click",{target:e.currentTarget,status:t.model.enabled})},this.model.timeInterval)))},_mouseUpClick:function(){clearTimeout(this._timeout)},_btnRepatKeyDownEvent:function(e){var t,i=this;i.element.hasClass("e-disable")||(t={status:i.model.enabled},(32==e.keyCode||13==e.keyCode)&&i._trigger("click",t))},_btnRepatKeyUpEvent:function(e){(32==e.keyCode||13==e.keyCode)&&clearTimeout(this._timeout)}}),t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},t.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"},t.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}),
/*!
*  filename: ej.radiobutton.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejRadioButton","ej.RadioButton",{_rootCSS:"e-radiobtn",element:null,_requiresID:!0,model:null,validTags:["input"],_addToPersist:["checked"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,checked:!1,cssClass:"",text:"",enableRTL:!1,htmlAttributes:{},enablePersistence:!1,idPrefix:"ej",size:"small",enabled:!0,validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._cloneElement=this.element.clone(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._setValue(),this._renderControl(),this.isChecked&&this._checkedHandler(),t.isNullOrUndefined(this.radbtn.attr("disabled"))||(this.model.enabled=!1),this._setEnabled(this.model.enabled),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._wireEvents(),this.initialRender=!1},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.div.addClass(e):"name"==t||"required"==t?i.radbtn.attr(t,e):"disabled"==t&&"disabled"==e?i.disable():"checked"==t&&"checked"==e?i._checkedChange(!0,!0):i.div.attr(t,e)})},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.element.find("input").rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.find("input").attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_setModel:function(e){for(var t in e)switch(t){case"cssClass":this._changeSkin(e[t]);break;case"enableRTL":this.model.text?e[t]?this.textWrapDiv.addClass("e-rtl"):this.textWrapDiv.removeClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").hasClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl"):e[t]?this.element.closest(".e-radiobtn-wrap").addClass("e-rtl"):this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl");break;case"text":this._setText(e[t]);break;case"size":this._setSize(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.element.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"checked":"boolean"==typeof this.checked()?(this.model.checked=e[t],this._checkedChange(this.model.checked)):null!=e[t]()&&e[t]()==this.element.find(".e-input").attr("value")&&this._checkedChange(e[t]());break;case"enabled":this._setEnabled(e[t]);break;case"id":this._setIdAttr(e[t]);break;case"name":this.radbtn.attr("name",e[t]);break;case"value":this.radbtn.attr("value",e[t]);break;case"htmlAttributes":this._addAttr(e[t])}},_destroy:function(){this.radbtn.remove(),this._cloneElement.removeClass("e-js e-input e-radiobtn"),this._cloneElement.insertBefore(this.element),this.element.remove()},_changeSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass).addClass(e),this.textWrapDiv.removeClass(this.model.cssClass).addClass(e))},_setValue:function(){t.isNullOrUndefined(this.element.attr("type"))&&this.element.attr("type","radio"),t.isNullOrUndefined(this.element.attr("id"))||(this.model.id=this.element.attr("id")),t.isNullOrUndefined(this.element.attr("name"))||(this.model.name=this.element.attr("name")),t.isNullOrUndefined(this.element.attr("value"))||(this.model.value=this.element.attr("value")),this.element.attr({id:this.model.id,name:this.model.name,value:this.model.value}),"boolean"==typeof this.checked()?this.model.checked=this.isChecked=this.model.checked||"checked"==this.element.attr("checked"):this.isChecked=this.element.attr("value")==this.checked(),this.isChecked&&this.element.attr("checked","checked"),this._hiddenValue=this.element.attr("value"),this._isAngularbind=!1},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),e("#"+this.model.idPrefix+this.model.id).attr("id",this.model.idPrefix+t),this.radbtn.attr("id",t)},_setSize:function(e){e==t.RadioButtonSize.Medium?this.span.removeClass("e-radsmaller").addClass("e-radmedium"):this.span.removeClass("e-radmedium").addClass("e-radsmaller")},_setEnabled:function(e){e?this.enable():this.disable()},_renderControl:function(){this.initialRender=!0;var i=t.browserInfo();this.div="msie"==i.name&&"8.0"==i.version?e('<div class="e-radiobtn-wrap e-widget e-rad-outer" ></div>'):e('<div class="e-radiobtn-wrap e-widget" ></div>'),this.div.attr({id:this.model.idPrefix+this.model.id,role:"radio",tabindex:0,"aria-checked":!1}),this.span=e("<span></span>"),this.span.addClass("e-spanicon"),this._setSize(this.model.size),this.spanImg=e('<span class="e-rad-icon e-icon e-rad-select"></span>',"",{},{role:"presentation"}),this.element.addClass("e-input"),this.div.addClass(this.model.cssClass),this.span.append(this.spanImg),this.div.insertBefore(this.element),this.div.append(this.element),this.div.append(this.span),this._setTextWrapper(this.model.text),this.radbtn=this.element,this.element=this.div},_setTextWrapper:function(i){""!=i?(this.textWrapDiv=t.buildTag("div.e-radiobtn-wrap "+this.model.cssClass+"#"+this.model.idPrefix+this.model.id+"_wrapper"),this.div.wrapAll(this.textWrapDiv),this.txtSpan=t.buildTag("div.e-text",i),this.textWrapDiv=e("#"+this.model.idPrefix+this.model.id+"_wrapper"),this.textWrapDiv.append(this.txtSpan),this.model.enableRTL&&this.textWrapDiv.addClass("e-rtl")):this.model.enableRTL&&this.element.closest(".e-radiobtn-wrap").addClass("e-rtl")},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_wireEvents:function(){this._on(this.element,"click",this._checkedHandler),this._on(this.element,"focus",this._focusIn),this._on(this.element,"focusout",this._focusOut)},_focusIn:function(){e(this.element).addClass("e-focus"),e(this.element).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.element).removeClass("e-focus"),e(this.element).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){(32==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(){this.element.hasClass("e-disable")||(this.isChecked="boolean"==typeof this.checked()?"checked"==this.radbtn.attr("checked"):this.checked()==this.radbtn.attr("value"),e(this.element).find(".e-rad-icon").hasClass("e-circle_01")||this._changeEvent(!0))},_checkedChange:function(e,t){this.isChecked=e,this._changeEvent(t)},_changeEvent:function(t){var i={isChecked:this.isChecked,isInteraction:!!t};if(!this.initialRender&&1==this._trigger("beforeChange",i))return!1;if(e(this.element).find(".e-rad-icon").hasClass("e-circle_01"))this.spanImg.removeClass("e-circle_01").addClass("e-rad-select"),this.span.removeClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!1}),this.radbtn.removeAttr("checked");else{var s=this.element.find(".e-input").attr("name"),n=e('input.e-radiobtn[name="'+s+'"]:radio'),l=this.element.find(".e-input"),o=e(l).data("ejRadioButton");i.isChecked&&(this.spanImg.addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this.radbtn.attr("checked","checked")),e.each(n,function(t,i){e(i).closest(".e-radiobtn-wrap").find(".e-rad-icon").removeClass("e-circle_01").addClass("e-rad-select"),e(i).closest(".e-radiobtn-wrap").find(".e-spanicon").removeClass("e-rad-active"),e(i).closest(".e-radiobtn-wrap").attr({tabindex:0,"aria-checked":!1});var s=e(i).data("ejRadioButton");null!=s&&null!=s.checked()&&"boolean"==typeof s.checked()&&(s.model.checked=!1)}),null!=o&&null!=o.checked()&&"boolean"==typeof o.checked()?o.model.checked=!0:o.checked(o.radbtn.attr("value")),this.element.find(".e-rad-icon").addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this._isAngularbind||this.element.find(".e-input").click(),this.isChecked=!0}i={isChecked:this.isChecked,isInteraction:!!t},this.initialRender||this._trigger("change",i),t&&this._trigger("_change",{value:this._hiddenValue})},disable:function(){this.element.hasClass("e-disable")||(this.element.addClass("e-disable"),this.radbtn.attr("disabled","disabled")),this._isIE8&&this.span.addClass("e-disable"),this.div.attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.hasClass("e-disable")&&(this.element.removeClass("e-disable"),this.radbtn.prop("disabled",!1)),this._isIE8&&this.span.removeClass("e-disable"),this.div.attr("aria-disabled",!1),this.model.enabled=!0}}),t.RadioButtonSize={Small:"small",Medium:"medium"}});var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};!function(e){var t=function(t){function i(i,s){return t.call(this),this._rootCSS="e-tooltip",this._setFirst=!1,this.PluginName="ejTooltip",this.id="null",this.model=null,this.defaults={height:"auto",width:"auto",enabled:!0,content:null,containment:"body",target:null,title:null,closeMode:"none",autoCloseTimeout:4e3,position:{stem:{horizontal:"center",vertical:"bottom"},target:{horizontal:"center",vertical:"top"}},associate:"target",collision:"flipfit",showShadow:!1,cssClass:null,animation:{effect:"none",speed:0},isBalloon:!0,showRoundedCorner:!1,enableRTL:!1,allowKeyboardNavigation:!0,tip:{size:{width:20,height:10},adjust:{xValue:0,yValue:0}},trigger:"hover",create:null,click:null,destroy:null,hover:null,tracking:null,beforeOpen:null,beforeClose:null,open:null,close:null},this.dataTypes={enabled:"boolean",closeMode:"enum",autoCloseTimeout:"number",trigger:"enum",position:{stem:"data",target:"data"},associate:"enum",collision:"enum",showShadow:"boolean",animation:{effect:"enum",speed:"number"},isBalloon:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",tip:{size:{width:"number",height:"number"},adjust:{xValue:"number",yValue:"number"}}},this.isTrack=!0,this._isCancel=!1,this._isHidden=!0,this.arrowValue={left:0,top:0,width:0,height:0,display:null},this.tooltipPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.targetPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.mouseTimer=null,this.positionTarget=null,this.positionTooltip=null,this.containerSize=null,this._createTitle=function(){this.tooltipTitle=ej.buildTag("div.e-def e-header"," ",{},{}),this.tooltipHeader=ej.buildTag("div"," ",{},{}),e(this.tooltipTitle).html(this.model.title).appendTo(this.tooltipHeader)},i&&(i.jquery||(i=e("#"+i)),i.length)?e(i).ejTooltip(s).data(this.PluginName):void 0}return __extends(i,t),i.prototype.setModel=function(e,t){this.setModel(e,t)},i.prototype.option=function(e,t){this.option(e,t)},i.prototype.triggerEvents=function(e,t){var i,s,n,l,o,r,a;switch(e){case"click":s=t,i=this._trigger(e,s);break;case"hover":n=t,i=this._trigger(e,n);break;case"tracking":l=t,i=this._trigger(e,l);break;case"beforeOpen":o=t,i=this._trigger(e,o);break;case"open":r=t,i=this._trigger(e,r);break;case"beforeClose":case"close":a=t,i=this._trigger(e,a)}return i},i.prototype.enable=function(){this.tooltip.hasClass("e-disable")&&(this.model.enabled=!0,this.tooltip.removeClass("e-disable"))},i.prototype.disable=function(){this.tooltip.hasClass("e-disable")||(this.model.enabled=!1,this.tooltip.addClass("e-disable"))},i.prototype.show=function(t,i){if(this.model.enabled){if(ej.isNullOrUndefined(t)){var s=null==this.model.target?this.element:e(this.element).find(this.model.target+":first");this._positionElement(s)}else this._positionElement(t);ej.isNullOrUndefined(i)?this._showTooltip():"string"==typeof i?e(this.tooltip).show(i):"function"==typeof i&&i.call.apply(this.tooltip)}},i.prototype.hide=function(t){this.model.enabled&&(ej.isNullOrUndefined(t)?this._hideTooltip():"string"==typeof t?e(this.tooltip).hide(t):"function"==typeof t&&t.call.apply(this.tooltip))},i.prototype._destroy=function(){this.mouseTimer&&clearTimeout(this.mouseTimer),this.timer&&clearTimeout(this.timer),e(this.tooltip).remove(),this.tooltip=null},i.prototype._setModel=function(t){var i,s;for(i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this._setWidth(t[i]);break;case"enabled":this._enabled(t[i]);break;case"content":this._setContent(t[i]);break;case"title":this.model.title=t[i],null==this.model.title?(e(this.tooltipHeader).remove(),this.tooltipHeader=null,this.tooltipTitle=null,this.model.closeMode===ej.Tooltip.CloseMode.Sticky&&this._iconRender()):ej.isNullOrUndefined(this.tooltipHeader)?this._createHeader():e(this.tooltipTitle).html(this.model.title),this.tooltipPos.height=e(this.tooltip).outerHeight();break;case"associate":this.model.associate=t[i],this._wireMouseEvents(!1),this._wireMouseEvents(!0);break;case"position":this._setPosition(t[i]);break;case"collision":this.model.collision=t[i];break;case"closeMode":void 0!==t[i]&&(this.model.closeMode=t[i],this.model.closeMode==ej.Tooltip.CloseMode.Sticky?this._iconRender():(e(this.tooltipClose).remove(),this.tooltipClose=null),this.tooltipPos.height=e(this.tooltip).outerHeight());break;case"cssClass":this._setSkin(t[i]);break;case"showShadow":this._shadowEffect(t[i],this.model.position);break;case"isBalloon":ej.isNullOrUndefined(t[i])||(this.model.isBalloon=t[i],this.model.isBalloon?this._renderArrow():(e(this.tip).remove(),this.tip=null));break;case"animation":s=t[i],this.model.animation=e.extend(!0,this.model.animation,s),this.model.animation.effect!=ej.Tooltip.Effect.None?(this._off(e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._off(e(this.tooltip),"mouseleave",this._onTooltipMouseLeave)):this.model.animation.effect==ej.Tooltip.Effect.None&&(this._on(e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._on(e(this.tooltip),"mouseleave",this._onTooltipMouseLeave));break;case"enableRTL":this._setRTL(t[i]);break;case"target":this._wireTriggerEvents(!1),this.model.target=t[i],this._wireTriggerEvents(!0),this._renderTarget();break;case"trigger":this._setTrigger(t[i]);break;case"showRoundedCorner":this.model.showRoundedCorner=t[i],this._roundedCorner(t[i]);break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=t[i],this.model.allowKeyboardNavigation?this._on(e(window),"keydown",this._keyDown):this._off(e(window),"keydown",this._keyDown)}},i.prototype._enabled=function(e){e?this.enable(e):this.disable(e),this.model.enabled=e},i.prototype._shadowEffect=function(t,i){this.model.showShadow=t;var s=null;if(e(this.tooltip).removeClass("e-tooltipShadowLeft e-tooltipShadowRight"),this.model.showShadow){if(this.model.isBalloon)switch(i.stem.horizontal){case"center":s="top"==i.stem.vertical?"e-tooltipShadowLeft":"bottom"==i.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft";break;case"right":s="center"==i.target.horizontal&&"top"==i.stem.vertical?"e-tooltipShadowLeft":"e-tooltipShadowRight";break;case"left":s="center"==i.target.horizontal&&"bottom"==i.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft"}else s="e-tooltipShadowLeft";e(this.tooltip).addClass(s)}},i.prototype._setContent=function(t){this.model.content=t,e(this.tooltipContent).html(this.model.content),this.tooltipPos.height=e(this.tooltip).outerHeight(),this.tooltipPos.width=e(this.tooltip).outerWidth()},i.prototype._setPosition=function(t){this.model.position.stem=e.extend(!0,this.model.position.stem,t.stem),this.model.position.target=e.extend(!0,this.model.position.target,t.target)},i.prototype._setTrigger=function(e){this._wireTriggerEvents(!1),this.model.trigger=e,this._wireTriggerEvents(!0)},i.prototype._init=function(){this.id=this.element[0].id,this.positionTarget=e.extend(!0,{},this.model.position.target),this.positionTooltip=e.extend(!0,{},this.model.position.stem),this.tipSize=e.extend(!0,{},this.model.tip.size),this._initialize(),this._render(),this.enable(this.model.enabled),this._wireEvents(!0)},i.prototype._initialize=function(){ej.isNullOrUndefined(this.model.target)?ej.isNullOrUndefined(this.model.content)&&!ej.isNullOrUndefined(this.element.attr("title"))&&(this.model.content=this.element.attr("title"),this.element.attr("data-content",this.model.content),this.element.removeAttr("title")):this._renderTarget()},i.prototype._wireEvents=function(t){var i=t?"_on":"_off";this._wireTriggerEvents(t),this.model.allowKeyboardNavigation&&this[i](e(window),"keydown",this._keyDown),null!=this.model.target?this[i](this.element,"scroll",this.model.target,this._hideTooltip):this[i](this.element,"scroll",this._hideTooltip),this[i](e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this[i](e(this.tooltip),"mouseleave",this._onTooltipMouseLeave),this[i](e(window),"resize",this._hideTooltip),this[i](e(window),"touchend",this._docTouchEndHandler)},i.prototype._wireTriggerEvents=function(e){var t,i=e?"_on":"_off";this.model.trigger==ej.Tooltip.Trigger.Focus?null!=this.model.target?this[i](this.element,"blur",this.model.target,this._hideTooltip):this[i](this.element,"blur",this._hideTooltip):null!=this.model.target?this[i](this.element,ej.isDevice()?"touchstart":"mouseleave",this.model.target,this._onMouseOut):this[i](this.element,ej.isDevice()?"touchstart":"mouseleave",this._onMouseOut),this._wireMouseEvents(e),t=this.model.trigger==ej.Tooltip.Trigger.Click?ej.isDevice()?"touchstart":"click":this.model.trigger==ej.Tooltip.Trigger.Focus?ej.isDevice()?"touchstart":"focus":ej.isDevice()?"touchstart":"mouseenter",null!=this.model.target?this[i](this.element,t,this.model.target,this._targetHover):this[i](this.element,t,this._targetHover)},i.prototype._wireMouseEvents=function(e){var t=e?"_on":"_off";(this.model.associate==ej.Tooltip.Associate.MouseEnter||this.model.associate==ej.Tooltip.Associate.MouseFollow)&&(null!=this.model.target?this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this.model.target,this._tooltipMove):this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this._tooltipMove))},i.prototype._render=function(){this.tooltip=ej.buildTag("div.e-tooltip-wrap e-widget","",{},{role:"tooltip","aria-readonly":"true","aria-hidden":"true","aria-describedby":this.id+"_content",id:this.id+"_Main"}),this.tooltipInter=ej.buildTag("div.e-tipContainer","",{},{}),this.tooltip.append(this.tooltipInter),this.model.isBalloon&&this._renderArrow(),e(this.model.containment).append(this.tooltip),this._setHeight(this.model.height),this._setWidth(this.model.width),this._createHeader(),this._tooltipContent(),this.model.cssClass&&this.tooltip.addClass(this.model.cssClass),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._setRTL(this.model.enableRTL),e(this.tooltip).css({top:"auto",left:"auto"}),this.tooltipPos={width:e(this.tooltip).outerWidth(),height:e(this.tooltip).outerHeight(),left:e(this.tooltip).offset().left,top:e(this.tooltip).offset().top,position:"absolute"},ej.isNullOrUndefined(this.model.target)&&(this._containerCalc(this.element),this._positionElement(this.element))},i.prototype._containerCalc=function(t){ej.isNullOrUndefined(t)&&(t=this.element);var i=e(t).offset();this.containerSize={height:"body"==this.model.containment?e(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight:e(this.model.containment).innerHeight(),width:"body"==this.model.containment?e(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth:e(this.model.containment).innerWidth()},this.containerSize.left="body"!=this.model.containment&&"static"==e(this.model.containment).css("position")?e(this.model.containment).offset().left-e(this.model.containment).offsetParent().offset().left:0,this.containerSize.top="body"!=this.model.containment&&"static"==e(this.model.containment).css("position")?e(this.model.containment).offset().top-e(this.model.containment).offsetParent().offset().top:0,i.left-="body"!=this.model.containment?"static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset().left:e(this.model.containment).offset().left:0,i.top-="body"!=this.model.containment?"static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset().top:e(this.model.containment).offset().top:0,this.targetPos.left=i.left,this.targetPos.top=i.top},i.prototype._setHeight=function(t){this.model.height=t,!isNaN(+t)&&isFinite(t)?e(this.tooltip).css("height",t+"px"):e(this.tooltip).css("height",t),this.tooltipPos.height=e(this.tooltip).outerHeight()},i.prototype._setWidth=function(t){this.model.width=t,"auto"!=this.model.width&&(t=!isNaN(+t)&&isFinite(t)?t+"px":t,e(this.tooltip).css("max-width",t),e(this.tooltip).css("min-width","0px")),e(this.tooltip).css("width",t),this.tooltipPos.height=e(this.tooltip).outerHeight()},i.prototype._setRTL=function(e){this.model.enableRTL=e,e?this.tooltip.addClass("e-rtl"):this.tooltip.removeClass("e-rtl")},i.prototype._setSkin=function(e){this.model.cssClass!=e&&(this.tooltip.removeClass(this.model.cssClass).addClass(e),this.model.cssClass=e)},i.prototype._roundedCorner=function(){this.model.showRoundedCorner?this.tooltip.addClass("e-corner"):this.tooltip.removeClass("e-corner")},i.prototype._renderArrow=function(){ej.isNullOrUndefined(this.tip)&&(this.tip=ej.buildTag("div.e-arrowTip"," ",{id:this.id+"_eTip"},{}),e(this.tip).append("<div class='e-arrowTipOuter'></div>").append("<div class='e-arrowTipInner'></div>"),e(this.tip).insertBefore(this.tooltipInter))},i.prototype._adjustArrow=function(t){var i,s,n=e(this.tooltip).width(),l=e(this.tooltip).height(),o=t.stem,r=t.target,a={tipHeight:0,tipWidth:0};"right"==r.horizontal||"left"==r.horizontal?(i="left"==o.horizontal?-this.model.tip.size.height:"right"==o.horizontal?n:n/2-this.tipSize.width/2,s="center"!=o.horizontal?"top"==o.vertical?5:"center"==o.vertical?l/2-this.tipSize.width/2:l-5-this.tipSize.width:"top"==o.vertical?-this.tipSize.height:"bottom"==o.vertical?l:this.tooltipPos.height/2-this.tipSize.width/2,a=this._arrowBinding(t,"horizontal")):(s="top"==o.vertical?-this.tipSize.height:"bottom"==o.vertical?l:l/2-this.tipSize.width/2,i="center"==o.vertical?"left"==o.horizontal?-this.model.tip.size.height:n:"left"==o.horizontal?10:"center"==o.horizontal?this.tooltipPos.width/2-this.tipSize.width/2:n-10-this.tipSize.width,a=this._arrowBinding(t,"vertical")),this.arrowValue.left=i,this.arrowValue.top=s,e(this.tip).css({height:a.tipHeight+"px",width:a.tipWidth+"px",left:i+"px",top:s+"px",display:"center"==o.horizontal&&"center"==o.vertical?"none":"block"})},i.prototype._arrowBinding=function(t,i){var s,n,l=t.stem,o="horizontal"==i?"center"!=l.horizontal:"center"==l.vertical,r=e(this.tooltip).css("border-top-color"),a=e(this.tooltip).css("background-color"),d=this.model.tip.size.height,h=this.model.tip.size.height-1,c={"border-top":"none","border-bottom":"none","border-right":"none","border-left":"none"};return o?(s=this.model.tip.size.height,n=this.model.tip.size.width,e(this.tip).find(".e-arrowTipOuter").css(this._arrow(t,d,r,c,"horizontal")),e(this.tip).find(".e-arrowTipInner").css(this._arrow(t,h,a,c,"horizontal"))):(s=this.model.tip.size.width,n=this.model.tip.size.height,e(this.tip).find(".e-arrowTipOuter").css(this._arrow(t,d,r,c,"vertical")),e(this.tip).find(".e-arrowTipInner").css(this._arrow(t,h,a,c,"vertical"))),{tipHeight:n,tipWidth:s}},i.prototype._arrow=function(e,t,i,s,n){var l=e.stem,o="horizontal"==n&&"right"==l.horizontal?"0px":"1px",r="horizontal"==n?"1px":"bottom"==l.vertical?"0px":"1px";return s["border-top"]="horizontal"==n?t+"px solid transparent":"bottom"==l.vertical?t+"px solid "+i:"none",s["border-bottom"]="horizontal"==n?t+"px solid transparent":"top"==l.vertical?t+"px solid "+i:"none",s["border-right"]="horizontal"==n?"left"==l.horizontal?t+"px solid "+i:"none":t+"px solid transparent",s["border-left"]="horizontal"==n?"right"==l.horizontal?t+"px solid "+i:"none":t+"px solid transparent",t==this.model.tip.size.height-1&&(s.left=o,s.top=r),s},i.prototype._iconRender=function(){this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&(ej.isNullOrUndefined(this.tooltipClose)||e(this.tooltipClose).remove(),this.tooltipClose=ej.buildTag("div .e-icon"," ",{},{id:"_closeIcon"}),null!=this.model.title?e(this.tooltipClose).insertAfter(this.tooltipTitle).addClass("e-close"):e(this.tooltipClose).insertBefore(this.tooltipInter).addClass("e-cross-circle"),this._on(e(this.tooltipClose),"click",this._hideTooltip))},i.prototype._renderTarget=function(){this.targetElement=e(this.element).find(this.model.target);for(var t=0;t<this.targetElement.length;t++)ej.isNullOrUndefined(e(this.targetElement[t]).attr("title"))||(this.targetElement[t].setAttribute("data-content",this.targetElement[t].title),this.targetElement[t].removeAttribute("title"))},i.prototype._tooltipContent=function(){this.tooltipContent=ej.buildTag("div.e-tipcontent e-def","",{},{id:this.id+"_content"}),e(this.tooltipContent).html(this.model.content).addClass("e-def"),null!=this.model.title?e(this.tooltipContent).insertAfter(this.tooltipHeader):e(this.tooltipContent).appendTo(this.tooltipInter)},i.prototype._positionElement=function(t){this.tooltipPos.width=e(this.tooltip).outerWidth(),this.tooltipPos.height=e(this.tooltip).outerHeight(),this.targetPos.width=e(t).outerWidth(),this.targetPos.height=e(t).outerHeight(),this._containerCalc(t),this.model.associate==ej.Tooltip.Associate.Window?this._browserPosition():this.model.associate==ej.Tooltip.Associate.Axis?this._axisPosition():this.model.associate==ej.Tooltip.Associate.Target&&this._tooltipPosition(this.model.position),this.model.collision!=ej.Tooltip.Collision.None&&this.model.associate==ej.Tooltip.Associate.Target&&this._calcCollision(this.model.position,t)},i.prototype._browserPosition=function(){if("body"==this.model.containment){this.containerSize={height:e(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight,width:e(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth};var t=e.extend(!0,{},this.model.position),i={position:"absolute",left:"auto",top:"auto",bottom:"auto",right:"auto"};ej.isNullOrUndefined(this.tip)||e(this.tip).css({display:"none"}),"right"==this.model.position.target.horizontal?i.right=0:i.left="left"==this.model.position.target.horizontal?0:this.containerSize.width/2-this.tooltipPos.width/2,"top"==this.model.position.target.vertical?i.top=0:"center"==this.model.position.target.vertical?i.top=this.containerSize.height/2-this.tooltipPos.height/2:i.bottom=0,this.model.showShadow&&this._shadowEffect(this.model.showShadow,t),e(this.tooltip).css(i)}},i.prototype._tooltipMove=function(e){if(this.model.closeMode==ej.Tooltip.CloseMode.None&&this.model.enabled){var t=this;if(this._isCancel)return;this.model.associate==ej.Tooltip.Associate.MouseFollow?this._mousePosition(e):this.model.associate==ej.Tooltip.Associate.MouseEnter&&(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){t.isTrack&&t._mousePosition(e)},300))}},i.prototype._mousePosition=function(t){var i,s,n;"touchstart"==t.type?(t.preventDefault(),i=t.touches[0].pageX,s=t.touches[0].pageY):"mousemove"==t.type&&(i=t.pageX,s=t.pageY),this.isCollision=!0,this._containerCalc(t.currentTarget);var l=0,o=0,r=0,a=e.extend(!0,{},this.model.position.stem),d=e.extend(!0,{},this.model.position),h={left:0,top:0},c={left:i,top:s},u={left:i,top:s},m=this.containerSize.left,p=this.containerSize.top,g="body"!=this.model.containment?i-e(this.model.containment).offset().left:i,f="body"!=this.model.containment?s-e(this.model.containment).offset().top:s;for(d.target.horizontal=d.target.vertical="center","body"!=this.model.containment&&(h="static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset():e(this.model.containment).offset()),u.left-=h.left,u.top-=h.top;this.isCollision;)if(c=e.extend(!0,{},u),this.model.isBalloon&&("top"==a.vertical||"bottom"==a.vertical)?5+this.tipSize.height/2:0,n=this.model.isBalloon&&("right"==a.horizontal||"left"==a.horizontal)?10+this.tipSize.width/2:0,l=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:7,o=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:10,r=this.model.isBalloon?"center"!=a.horizontal||"center"!=a.vertical?this.model.tip.size.height:0:2,c.left+="right"==a.horizontal?-this.tooltipPos.width:"left"==a.horizontal?0:-this.tooltipPos.width/2,c.top+="bottom"==a.vertical?-this.tooltipPos.height:"top"==a.vertical?0:-this.tooltipPos.height/2,c.left+="center"!=a.vertical?"right"==a.horizontal?n:"left"==a.horizontal?-n:0:0,c.left+="center"==a.vertical?"right"==a.horizontal?-r:"left"==a.horizontal?+(r+l):0:0,c.top+="top"==a.vertical?+(r+o):"bottom"==a.vertical?-r:0,this.targetElement!=t.currentTarget&&(this.targetElement=t.currentTarget,(c.left<m||c.left+this.tooltipPos.width>m+this.containerSize.width)&&(this.positionTooltip.horizontal=g>=this.tooltipPos.width?"right":this.containerSize.width-g>=this.tooltipPos.width?"left":"center"),(c.top<p||c.top+this.tooltipPos.height>this.containerSize.height+p)&&(this.positionTooltip.vertical=f>=this.tooltipPos.height?"bottom":this.containerSize.height-f>=this.tooltipPos.height?"top":"center")),this.positionTooltip.horizontal!=a.horizontal||this.positionTooltip.vertical!=a.vertical)this.isCollision=!0,a=e.extend(!0,{},this.positionTooltip);else if(this.isCollision=!1,e(this.tooltip).css({top:c.top+"px",left:c.left+"px",position:"absolute",right:"auto",bottom:"auto"}),d.stem=e.extend(!0,{},this.positionTooltip),this.model.showShadow&&this._shadowEffect(this.model.showShadow,d),this.model.isBalloon&&this._adjustArrow(d),this._showTooltip(),this.model.associate==ej.Tooltip.Associate.MouseEnter&&(this.isTrack=!1),this.model.associate==ej.Tooltip.Associate.MouseFollow&&this.triggerEvents("tracking",{position:this.model.position,event:t}))return},i.prototype._axisPosition=function(){var t,i,s,n,l=e.extend(!0,{},this.model.position);"number"==typeof this.model.position.target.horizontal&&(t=this.model.position.target.horizontal.toString()),"number"==typeof this.model.position.target.vertical&&(i=this.model.position.target.vertical.toString()),s=parseInt(t),n=parseInt(i),ej.isNullOrUndefined(this.tip)||e(this.tip).css({display:"none"}),this.model.showShadow&&this._shadowEffect(this.model.showShadow,l),this.model.isBalloon&&this._adjustArrow(l),isFinite(s)&&isFinite(n)&&e(this.tooltip).css({top:n,left:s,position:"absolute"})},i.prototype._tooltipPosition=function(t){var i=e.extend(!0,{},t.stem),s=e.extend(!0,{},t.target),n=e.extend(!0,{},this.targetPos),l="top"===i.vertical||"bottom"===i.vertical?5+this.tipSize.width/2:0,o="right"===i.horizontal||"left"===i.horizontal?10+this.tipSize.width/2:0,r=this.model.isBalloon&&("center"!==i.horizontal||"center"!==i.vertical)?this.model.tip.size.height:0,a=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:this.model.isBalloon?0:2,d=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:this.model.isBalloon?0:2;n.left+="right"===s.horizontal?this.targetPos.width:"left"===s.horizontal?0:this.targetPos.width/2,n.top+="bottom"===s.vertical?this.targetPos.height:"top"===s.vertical?0:this.targetPos.height/2,n.left+="right"===i.horizontal?-this.tooltipPos.width:"left"===i.horizontal?0:-this.tooltipPos.width/2,n.top+="bottom"===i.vertical?-this.tooltipPos.height:"top"===i.vertical?0:-this.tooltipPos.height/2,n.left+="center"!==s.horizontal||"center"===i.vertical?"right"===i.horizontal?-r:"left"===i.horizontal?r:0:0,n.top+="center"===s.horizontal||"center"===i.horizontal?"bottom"===i.vertical?-r:"top"===i.vertical?r:0:0,n.left+="center"===s.horizontal&&"center"!==i.vertical?"right"===i.horizontal?o:"left"===i.horizontal?-o:0:0,n.top+="center"!==s.horizontal&&"center"!==i.horizontal?"top"===i.vertical?-l:"bottom"===i.vertical?l:0:0,n.left+="center"!==s.horizontal||"center"===i.vertical?"right"===i.horizontal?-a:"left"===i.horizontal?a:0:0,n.top+="center"===s.horizontal||"center"===i.horizontal?"bottom"===i.vertical?-d:"top"===i.vertical?d:0:0,this.tooltipPos.left=n.left,this.tooltipPos.top=n.top,this.model.collision===ej.Tooltip.Collision.None&&(this.model.isBalloon&&this._adjustArrow(t),this._shadowEffect(this.model.showShadow,t),e(this.tooltip).css({top:n.top+"px",left:n.left+"px",position:"absolute"}))},i.prototype._calcCollision=function(t,i){t=e.extend(!0,{},t);var s=e.extend(!0,{},t),n=this.model.tip.size.height,l=!0,o="body"!=this.model.containment?e(i).offset().left-e(this.model.containment).offset().left:e(i).offset().left,r="body"!=this.model.containment?e(i).offset().top-e(this.model.containment).offset().top:e(i).offset().top,a={topSpace:r,rightSpace:this.containerSize.width-(o+this.targetPos.width),bottomSpace:this.containerSize.height-(r+this.targetPos.height),leftSpace:o,centerRight:this.containerSize.width-(o+this.targetPos.width/2),centerLeft:o+this.targetPos.width/2,centerTop:r+this.targetPos.height/2,centerBottom:this.containerSize.height-(r+this.targetPos.height/2),tooltipWidth:this.tooltipPos.width+n,tooltipHeight:this.tooltipPos.height+n};if(this.model.collision===ej.Tooltip.Collision.Fit)this._collisionFit(t,a);else{for(;l;)(s=this._collisionFlip(s,a)).target.horizontal!=t.target.horizontal||s.target.vertical!=t.target.vertical||s.stem.horizontal!=t.stem.horizontal||s.stem.vertical!=t.stem.vertical?(this._tooltipPosition(s),t=e.extend(!0,{},s)):l=!1;l||(this.model.collision==ej.Tooltip.Collision.FlipFit?this._collisionFit(s,a):(this._adjustArrow(s),this._shadowEffect(this.model.showShadow,s),e(this.tooltip).css({top:this.tooltipPos.top+"px",left:this.tooltipPos.left+"px",position:"absolute"})))}},i.prototype._collisionFlip=function(t,i){var s=e.extend(!0,{},this.tooltipPos),n=e.extend(!0,{},t),l=e(this.model.containment).scrollLeft(),o=e(this.model.containment).scrollTop(),r=this.containerSize.left,a=this.containerSize.top;return(s.left+s.width>r+this.containerSize.width+l||s.left<r)&&("center"!=t.target.horizontal?n.target.horizontal=i.leftSpace>=i.tooltipWidth?"left":i.rightSpace>=i.tooltipWidth?"right":"center":n.stem.horizontal=i.centerLeft>=i.tooltipWidth?"right":i.centerRight>=i.tooltipWidth?"left":"center"),s.top<a&&(n.target.vertical=i.bottomSpace>=i.tooltipHeight?"bottom":"center"),s.top+s.height>this.containerSize.height+o+a&&(n.target.vertical=i.topSpace>=i.tooltipHeight?"top":"center"),(n.target.horizontal!=t.target.horizontal||n.target.vertical!=t.target.vertical)&&(n.stem.horizontal="center"==n.target.horizontal?i.centerLeft>=i.tooltipWidth?"right":i.centerRight>=i.tooltipWidth?"left":"center":"right"==n.target.horizontal?"left":"right"),(n.target.vertical!=t.target.vertical||n.target.horizontal!=t.target.horizontal)&&(n.stem.vertical="center"==n.target.vertical?i.centerTop>=i.tooltipHeight?"bottom":i.centerBottom>=i.tooltipHeight?"top":i.centerTop>i.centerBottom?"bottom":"top":"top"==n.target.vertical?"bottom":"top"),n},i.prototype._collisionFit=function(t,i){var s,n,l,o,r,a,d=e.extend(!0,{},this.tooltipPos),h=!1,c=!1,u=1,m=1,p=e(this.model.containment).scrollLeft();n="body"==this.model.containment?document.documentElement.scrollTop||document.body.scrollTop:e(this.model.containment).scrollTop(),l=this.containerSize.left,o=this.containerSize.top,(d.left<l||d.left+d.width>this.containerSize.width+p+l)&&(u=d.left<l?l:d.left+d.width>this.containerSize.width+p+l?d.left-(d.left+d.width-(this.containerSize.width+l)):1,h=!0),(d.top<o||d.top+d.height>this.containerSize.height+n+o)&&(m=d.top<o?o:d.top+d.height>this.containerSize.height+n+o?d.top-(d.top+d.height-(this.containerSize.height+o)):1,c=!0),e(this.tooltip).css({top:1!=m?m+"px":d.top+"px",left:1!=u?u+"px":d.left+"px",position:"absolute"}),this._adjustArrow(t),s={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:e(this.tip).css("display")},this.tooltipPos.top=m=1!=m?m:d.top,this.tooltipPos.left=u=1!=u?u:d.left,r=e(this.tooltip).width(),a=e(this.tooltip).height(),(h||c&&"none"!=s.display)&&(this.model.isBalloon&&(h&&(this.arrowValue.left=this._horizontalAdjustment(t,i)),c&&(this.arrowValue.top=this._verticalAdjustment(t,i))),this.arrowValue.left==-this.model.tip.size.height||this.arrowValue.left==r||this.arrowValue.top==-this.model.tip.size.height||this.arrowValue.top==a?e(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):e(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"none"})),this._shadowEffect(this.model.showShadow,t)},i.prototype._horizontalAdjustment=function(t,i){var s,n,l={left:this.arrowValue.left,top:this.arrowValue.top};return e(this.tooltip).css({display:"block"}),t.target.horizontal,s=this.model.tip.size.height,n="center"!=t.target.horizontal&&"left"==t.stem.horizontal?e(this.tip).offset().left:"center"!=t.target.horizontal&&"right"==t.stem.horizontal?e(this.tip).offset().left+s:e(this.tip).offset().left,e(this.tooltip).css({display:"none"}),n>i.leftSpace&&n+s<i.leftSpace+this.targetPos.width||(n>i.leftSpace+this.targetPos.width||n<i.leftSpace)&&(l.left=i.leftSpace+this.targetPos.width/2-parseInt(this.tooltipPos.left.toString())),l.left},i.prototype._verticalAdjustment=function(t,i){var s,n,l={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:this.arrowValue.display};return e(this.tooltip).css({display:"block"}),t.target.horizontal,s=this.model.tip.size.height,n="center"==t.target.horizontal&&"top"==t.stem.vertical?e(this.tip).offset().top:e(this.tip).offset().top+s,e(this.tooltip).css({display:"none"}),n>i.topSpace&&n<i.topSpace+this.targetPos.height||(n<i.topSpace||n+s>i.topSpace+this.targetPos.height)&&(l.top=i.topSpace+this.targetPos.height/2-parseInt(this.tooltipPos.top.toString())),l.top},i.prototype._createHeader=function(){null!=this.model.title&&(ej.isNullOrUndefined(this.tooltipTitle)&&this._createTitle(),ej.isNullOrUndefined(this.tooltipContent)?e(this.tooltipHeader).appendTo(this.tooltipInter).addClass("e-tooltipHeader"):e(this.tooltipHeader).insertBefore(this.tooltipContent).addClass("e-tooltipHeader")),this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&this._iconRender()},i.prototype._hideTooltip=function(){var t;if(this._isHidden=!0,t=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,1==this.model.enabled&&"block"==e(this.tooltip).css("display")){if(this.triggerEvents("beforeClose",{}))return;if(this.model.animation.effect==ej.Tooltip.Effect.Fade?e(this.tooltip).fadeOut(t):this.model.animation.effect==ej.Tooltip.Effect.Slide?e(this.tooltip).slideUp(t):e(this.tooltip).css({display:"none"}),"none"==e(this.tooltip).css("display")&&e(this.tooltip).attr("aria-hidden","true").removeClass("e-customAnimation"),this.triggerEvents("close",{}))return}},i.prototype._showTooltip=function(){var t,i,s,n,l,o;this._isHidden&&(t=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,this._isHidden=!1,"none"==e(this.tooltip).css("display")&&1==this.model.enabled&&(this.model.animation.effect==ej.Tooltip.Effect.Fade?e(this.tooltip).fadeIn(t):this.model.animation.effect==ej.Tooltip.Effect.Slide?e(this.tooltip).slideDown(t):e(this.tooltip).css({display:"block"}),"block"==e(this.tooltip).css("display")&&(i=e(this.tooltip[0]).parents(),s=e("body").children(),e(s).each(function(e,t){i.push(t)}),n=e(this.model.target).parents(),e(n).each(function(e,t){i.push(t)}),!(l=Math.max.apply(l,e.map(i,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||l<1e4?l=1e4:l+=1,e(this.tooltip).attr("aria-hidden","false").css({zIndex:l}),this.model.animation.effect==ej.Tooltip.Effect.None&&e(this.tooltip).addClass("e-customAnimation"),o=this._getScrollableParents(),this._on(o,"scroll",this._hideTooltip)),this.triggerEvents("open",{})))},i.prototype._getScrollableParents=function(){return e(this.element).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},i.prototype._tooltipAuto=function(){var e=this;this.timer=setTimeout(function(){e._hideTooltip()},e.model.autoCloseTimeout)},i.prototype._beforeOpenTooltip=function(t){this.positionTooltip=e.extend(!0,{},this.model.position.stem),this.positionTarget=e.extend(!0,{},this.model.position.target),this.targetElement=this.element,ej.isNullOrUndefined(this.model.target)||ej.isNullOrUndefined(e(t.currentTarget).attr("data-content"))||(this.model.content=e(t.currentTarget).attr("data-content"),this._setContent(this.model.content))},i.prototype._targetHover=function(e){if(this.isTrack=!0,this.model.enabled)if(this._isHidden||("msie"==ej.browserInfo().name||"edge"==ej.browserInfo().name)&&this.model.associate==ej.Tooltip.Associate.MouseFollow){if(this.tooltip.stop(!0,!0),this.triggerEvents("beforeOpen",{event:e}))return void(this._isCancel=!0);this._isCancel=!1,this._beforeOpenTooltip(e),this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow?(ej.isNullOrUndefined(this.model.target)?this._positionElement(this.element):this._positionElement(e.currentTarget),clearTimeout(this.timer),this._showTooltip(),this.model.closeMode==ej.Tooltip.CloseMode.Auto&&this._tooltipAuto(),"click"==e.type?this.triggerEvents("click",{event:e}):this.triggerEvents("hover",{event:e})):this.isTrack=!0}else ej.isNullOrUndefined(this.model.target)||this._positionElement(e.currentTarget)},i.prototype._onMouseOut=function(){this.model.enabled&&!this._isHidden&&(this.model.closeMode==ej.Tooltip.CloseMode.None&&this._hideTooltip(),clearTimeout(this.mouseTimer)),this.isTrack=!1},i.prototype._onTooltipMouseEnter=function(){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&e(this.tooltip).css({display:"block"})},i.prototype._onTooltipMouseLeave=function(){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&this.model.closeMode==ej.Tooltip.CloseMode.None&&e(this.tooltip).css({display:"none"})},i.prototype._docTouchEndHandler=function(t){e(t.target).closest(".e-tooltip").length||this.model.closeMode!=ej.Tooltip.CloseMode.None||this._hideTooltip()},i.prototype._keyDown=function(e){var t=e.keyCode?e.keyCode:e.which?e.which:e.charCode;if(this.model.enabled&&27===t)e.preventDefault(),this._hideTooltip()},i}(ej.WidgetBase);window.ej.widget("ejTooltip","ej.Tooltip",new t),window.ejTooltip=null}(jQuery),ej.Tooltip.CloseMode={Auto:"auto",None:"none",Sticky:"sticky"},ej.Tooltip.Effect={Slide:"slide",Fade:"fade",None:"none"},ej.Tooltip.Trigger={Hover:"hover",Click:"click",Focus:"focus"},ej.Tooltip.Collision={Flip:"flip",FlipFit:"flipfit",None:"none",Fit:"fit"},ej.Tooltip.Associate={Window:"window",MouseFollow:"mousefollow",MouseEnter:"mouseenter",Target:"target",Axis:"axis"},
/*!
*  filename: ej.uploadbox.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.globalize.min","./../common/ej.scroller.min","./ej.tooltip.min","./../common/ej.draggable.min","./ej.dialog.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejUploadbox","ej.Uploadbox",{element:null,_addToPersist:[""],model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-uploadbox",defaults:{buttonText:{browse:"Browse",upload:"Upload",cancel:"Cancel",close:"Close"},width:"100px",height:"35px",htmlAttributes:{},dialogPosition:{X:"",Y:""},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},customFileDetails:{title:!0,name:!0,size:!0,status:!0,action:!0},dialogAction:{modal:!1,closeOnComplete:!1,drag:!0,content:null},locale:"en-US",asyncUpload:!0,pushFile:null,enabled:!0,multipleFilesSelection:!0,autoUpload:!1,showFileDetails:!0,fileSize:31457280,extensionsAllow:"",extensionsDeny:"",saveUrl:"",removeUrl:"",uploadName:"",cssClass:"",dropAreaText:"Drop files or click to upload",allowDragAndDrop:!1,showBrowseButton:!0,showRoundedCorner:!0,dropAreaHeight:"100%",dropAreaWidth:"100%",enableRTL:!1,create:null,fileSelect:null,begin:null,beforeSend:null,cancel:null,inProgress:null,success:null,complete:null,remove:null,error:null,destroy:null},dataTypes:{buttonText:"data",dialogText:"data",disbled:"boolean",customFileDetails:"data",pushFile:"data",dialogAction:"data",multipleFilesSelection:"boolean",autoUpload:"boolean",showFileDetails:"boolean",allowDragAndDrop:"boolean",showBrowseButton:"boolean",showRoundedCorner:"boolean",fileSize:"number",extensionsAllow:"string",extensionsDeny:"string",saveUrl:"string",removeUrl:"string",cssClass:"string",enableRTL:"boolean",htmlAttributes:"data"},disable:function(){this._changeState(!1)},enable:function(){this._changeState(!0)},_changeState:function(t){t?e(this.control).removeClass("e-disable"):e(this.control).addClass("e-disable"),this.model.enabled=t,e(this._currentElement).find(".e-uploadinput")[0].disabled=!t,this.diaObj&&(this.diaObj.option("beforeClose",this._onBeforeClose),this.diaObj.setModel({enabled:t,allowDraggable:t}))},refresh:function(){this.diaObj&&(this.diaObj.isOpened()?this.diaObj.close():this._uploadFileListDelete())},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.Uploadbox",this.model.locale)},_init:function(){this.s=t.browserInfo(),this._updateLocalConstant(),this._initialize(),this._wireEvents(),this.model.asyncUpload||this._initObjectsSyncUpload(),this._controlStatus(this.model.enabled),"en-US"==this.model.locale?this._buttonText(this.model.buttonText):this._setLocale(),this._roundedCorner(this.model.showRoundedCorner)},_setModel:function(e){for(var t in e){switch(t){case"buttonText":this._buttonText(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"dialogText":this._dialogText(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"locale":this.model.locale=e[t],this._updateLocalConstant(),this._setLocale();break;case"height":this.model.height=e[t],this._setHeight(this.model.height);break;case"width":this.model.width=e[t],this._setWidth(this.model.width);break;case"dialogPosition":this.model.dialogPosition=e[t],this._dialogPosition();break;case"allowDragAndDrop":this.model.allowDragAndDrop=e[t],this._dragAndDrop();break;case"dropAreaText":this.model.dropAreaText=e[t],this._dropAreaText(this.model.dropAreaText);break;case"showBrowseButton":this.model.showBrowseButton=e[t],this._hideBrowseButton(),this._refreshUploadDialogParent();break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"dropAreaHeight":this.model.dropAreaHeight=e[t],this._setSize();break;case"dropAreaWidth":this.model.dropAreaWidth=e[t],this._setSize();break;case"pushFile":this.model.pushFile=e[t],null!=this.model.pushFile&&"Xhr"==this.UploadType&&this.model.asyncUpload&&(this._files=this.model.pushFile),this._onXhrSelect();break;case"multipleFilesSelection":this.model.multipleFilesSelection=e[t],0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&(this.model.multipleFilesSelection?this._currentElement.find(".e-uploadinput").attr("multiple","multiple"):this._currentElement.find(".e-uploadinput").removeAttr("multiple"));break;case"uploadName":this.model.uploadName=e[t],this.inputupload.attr("name",this.model.uploadName),this.refresh();break;case"autoUpload":this.model.autoUpload=e[t];break;case"showFileDetails":this.model.showFileDetails=e[t],this.refresh();break;case"fileSize":this.model.fileSize=e[t];break;case"extensionsAllow":this.model.extensionsAllow=e[t],this._currentElement.find(".e-uploadinput").attr("accept",e[t]);break;case"extensionsDeny":this.model.extensionsDeny=e[t];break;case"saveUrl":this.model.saveUrl=e[t];break;case"removeUrl":this.model.removeUrl=e[t]}this._currentElement=this.model.allowDragAndDrop&&!this.model.showBrowseButton?this.dragWrapper:this.element}},_controlStatus:function(e){1!=e?this.disable():this.enable()},_setRTL:function(e){e?this._currentElement.addClass("e-rtl"):this._currentElement.removeClass("e-rtl"),this.updialog&&this.updialog.ejDialog({enableRTL:e})},_getLocalizedLabels:function(e){var i,s="";return i="browse"==e||"upload"==e||"cancel"==e||"close"==e?"buttonText":"dialogText",this._localizedLabels[e]?s=this._localizedLabels[e]:this._localizedLabels[i][e]?s=this._localizedLabels[i][e]:t.Uploadbox.Locale["en-US"][e]?s=t.Uploadbox.Locale["en-US"][e]:t.Uploadbox.Locale["en-US"][i][e]&&(s=t.Uploadbox.Locale["en-US"][i][e]),s},_setLocale:function(){this._buttonText(this._localizedLabels.buttonText),this._dialogText(this._localizedLabels.dialogText),this._dropAreaText(this._localizedLabels.dropAreaText)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.buttondiv.val(this.model.buttonText.browse),this.updialog&&(this.updialog.find(".e-action-container .e-uploadbtn").html(this.model.buttonText.upload),this.updialog.find(".e-action-container .e-uploadclosebtn").html(this.model.buttonText.cancel))},_dialogText:function(t){e.extend(this.model.dialogText,t),this.diaObj==s||this.diaObj.option("title",this.model.dialogText.title),this.updialog&&(this.updialog.find(".e-head-name").html(this.model.dialogText.name),this.updialog.find(".e-head-size").html(this.model.dialogText.size),this.updialog.find(".e-head-status").html(this.model.dialogText.status))},_destroy:function(){this._currentElement.hasClass("e-uploadbox")&&(this._currentElement.removeClass("e-uploadbox e-widget"),this._currentElement.empty(),e(this.dragWrapper).after(this._currentElement),this.element.css({width:"",height:""}),this._bindResizeHandler(!1),this.dragWrapper.remove())},_setSkin:function(e){this._currentElement.removeClass(this.model.cssClass),this._currentElement.addClass(e),this.diaObj&&this.diaObj.setModel({cssClass:this.model.cssClass}),this.model.allowDragAndDrop&&this.dragWrapper.addClass(e)},_initialize:function(){this.control=this.element[0],this.element.addClass("e-widget "+this.model.cssClass),this.innerdiv=t.buildTag("div.e-selectpart e-select e-box"),this.element.append(this.innerdiv),this.buttondiv=t.buildTag("input.e-inputbtn e-btn#"+this.control.id+"_SelectButton","",{},{type:"button","data-role":"none",value:this._getLocalizedLabels("browse")}),this.inputupload=t.buildTag("input.e-uploadinput","",{},{type:"file","data-role":"none",name:""!=this.model.uploadName?this.model.uploadName:this.control.id}).attr("accept",this.model.extensionsAllow),this.model.multipleFilesSelection&&0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&this.inputupload.attr("multiple","multiple"),this.innerdiv.append(this.buttondiv),this.innerdiv.append(this.inputupload),this.model.allowDragAndDrop&&this._dragAndDrop(!0),this._Selector=this.buttondiv[0],this._currentElement=this.model.allowDragAndDrop&&!this.model.showBrowseButton?this.dragWrapper:this.element,this._setRTL(this.model.enableRTL),this._addAttr(this.model.htmlAttributes),this.Uploadframes=[],this.UploadForms=[],this._successFiles=[],this.UploadType=this._isXhrSupported()?"Xhr":"IFrame",""!=this.model.width&&this._setWidth(this.model.width),""!=this.model.height&&this._setHeight(this.model.height),this._hideBrowseButton()},_refreshUploadDialogParent:function(){this.diaObj&&this.diaObj.setModel({target:null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:!this.model.showBrowseButton&&this.model.allowDragAndDrop?"#"+this.control.id+"_dragWrapper":"#"+this.control.id})},_hideBrowseButton:function(){!this.model.showBrowseButton&&this.model.allowDragAndDrop?(this.element.addClass("e-browse-hide"),this._dropAreaSize()):this.element.hasClass("e-browse-hide")&&(this.element.removeClass("e-browse-hide"),this.element.width(this.model.width),this.element.height(this.model.height))},_setSize:function(){this.model.allowDragAndDrop&&(""!=this.model.dropAreaWidth&&this.dragWrapper.outerWidth(this.model.dropAreaWidth),""!=this.model.dropAreaHeight&&this.dragWrapper.outerHeight(this.model.dropAreaHeight),this.model.showBrowseButton||this._dropAreaSize())},_dropAreaSize:function(){""!=this.model.dropAreaWidth&&this.element.width(this.model.dropAreaWidth),""!=this.model.dropAreaHeight&&this.element.height(this.model.dropAreaHeight)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_dragAndDrop:function(){this.model.allowDragAndDrop?(this.dragWrapper=t.buildTag("div.e-drag-wrapper e-widget-wrapper e-upload-box "+this.model.cssClass+"#"+this.control.id+"_dragWrapper"),this.innerWrapper=t.buildTag("div.e-drag-container"),this._spanTag=t.buildTag("span.e-drag-text").html("en-US"==this.model.locale?this.model.dropAreaText:t.Uploadbox.Locale[this.model.locale].dropAreaText),this.innerWrapper.append(this._spanTag),this.innerWrapper.insertBefore(this.element),this.dragWrapper.insertBefore(this.element),this.innerWrapper.append(this.element),this.dragWrapper.append(this.innerWrapper),this._bindDragEvents(),this._refreshUploadDialogParent(),this._setSize()):(this._refreshUploadDialogParent(),this.element.insertBefore(this.dragWrapper),this.dragWrapper.remove(),this._unBindDragEvents()),this._hideBrowseButton()},_resizeHandler:function(){this.diaObj&&(e(window).width()>750?(e(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),this.diaObj.setModel({width:this._getDialogContentWidth(),height:"auto"})):(e(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"),this.diaObj.setModel({width:250,height:"auto"})),this.diaObj.scroller&&this.diaObj.scroller.setModel({height:"auto"}))},_getDialogContentWidth:function(){var e=0;return this.model.customFileDetails.name&&(e+=200),this.model.customFileDetails.size&&(e+=100),this.model.customFileDetails.status?e+=200:this.model.customFileDetails.action&&(e+=45),e+5},_dropAreaText:function(e){this.model.allowDragAndDrop&&this._spanTag.html(e)},_bindDragEvents:function(){this._on(this.dragWrapper,"dragover",this._onDragOverHandler),this._on(this.dragWrapper,"drop",this._onDropHandler)},_unBindDragEvents:function(){this._off(this.dragWrapper,"dragover",this._onDragOverHandler),this._off(this.dragWrapper,"drop",this._onDropHandler)},_setWidth:function(e){this.element.css("width",e)},_setHeight:function(e){this.element.height(e)},_dialogPosition:function(){if(this.diaObj){if((this.diaObj.model.content=="#"+this.control.id||this.diaObj.model.content=="#"+this.control.id+"_dragWrapper")&&""==this.model.dialogPosition.X&&""==this.model.dialogPosition.Y){var t=parseInt(this.diaObj.wrapper.css("left"))-(this.diaObj.wrapper.outerWidth()-e(this.diaObj.model.content).outerWidth())/2;this.model.dialogPosition.X=parseInt(t)>0?t:parseInt(this.diaObj.wrapper.css("left")),this.model.dialogPosition.Y=parseInt(this.diaObj.wrapper.css("top"))+e(this.diaObj.model.content).outerHeight()}""!=this.model.dialogPosition.X&&""!=this.model.dialogPosition.Y&&this.diaObj.setModel({position:this.model.dialogPosition})}},_roundedCorner:function(e){e?this.innerdiv.addClass("e-corner"):this.innerdiv.hasClass("e-corner")&&this.innerdiv.removeClass("e-corner")},_wireEvents:function(){this._on(this.element,"click",this._disableclickselect),this._on(this.element,"keydown",this._keydownselect),this._bindInputChangeEvent(),this._bindResizeHandler(!0)},_bindResizeHandler:function(t){t?e(window).on("resize",e.proxy(this._resizeHandler,this)):e(window).off("resize",e.proxy(this._resizeHandler,this))},_keydownselect:function(e){this.element.hasClass("e-disable")||13!=e.keyCode||this.diaObj&&this.diaObj.isOpened()||this.element.find(".e-uploadinput").click()},_onDropHandler:function(e){if("msie"===t.browserInfo().name&&"8.0"===t.browserInfo().version||"9.0"===t.browserInfo().version||this._currentElement.hasClass("e-disable"))return!1;e.stopPropagation(),e.preventDefault(),this._files=this._getAllFileInfo(e.originalEvent.dataTransfer.files),this._fileSelect(e)},_onDragOverHandler:function(e){if(this._currentElement.hasClass("e-disable"))return!1;e.stopPropagation(),e.preventDefault()},_disableclickselect:function(e){this._currentElement.hasClass("e-disable")&&e.preventDefault()},_bindInputChangeEvent:function(){this._on(this.inputupload,"change",this._inputValueChange)},_inputValueChange:function(t){return this._files=this._getInputFileInfo(e(t.target)),this._fileSelect(t)},_fileSelect:function(e){if(this._trigger("fileSelect",{files:this._files}))return this._resetFileInput(this._currentElement.find(".e-uploadinput")),!1;this._fileUpload(e)},_fileUpload:function(e){var t=this._isAllowed(this._files);this._files=t.files,this.model.asyncUpload?null!=t.files&&t.files.length>0&&("Xhr"==this.UploadType?this._onXhrSelect(e):this._onSelectIFrame(e),this._resetFileInput(this._currentElement.find(".e-uploadinput"))):t.status&&this._onSelectSyncUpload(e),this._renderTooltip()},__uploadButtonClick:function(t){this._currentElement.hasClass("e-disable")||(this._currentElement.find(".e-uploadbtn"),this._currentElement.find(".e-uploadbtn").hasClass("e-disable")?t.preventDefault():"Xhr"==this.UploadType?this._xhrOnUploadButtonClick(t):this._onUploadButtonClickIFrame(t),e(t.target).attr("disabled","disabled").addClass("e-disable"))},_actionClick:function(t){var i,s;this._currentElement.hasClass("e-disable")||(s=(i=e(t.target)).closest(".e-upload-file"),this._file=e(s).data("file"),i.hasClass("e-delete")?"Xhr"==this.UploadType?this._xhrOnRemove(t,s):this._onRemoveIFrame(t,s):i.hasClass("e-file-cancel")?(this._trigger("cancel",{fileStatus:this._file}),this.updialog.find(".e-file-cancel").hasClass("e-disable")?t.preventDefault():this.model.asyncUpload?(this._removeFile(e(s).data("file")),"Xhr"==this.UploadType?this._xhrOnCancel(t,s):this._onCancelIFrame(t,s)):this._onCancelSyncUpload(t,s)):i.hasClass("e-reload")&&("Xhr"==this.UploadType?this._xhrOnRetry(t,s):this._onRetryIFrame(t,s)))},_removeFileEntry:function(e){e.remove()},_removeFile:function(e){for(var t=[],i=0;i<this._files.length;i++)this._files[i]!=e&&t.push(this._files[i]);this._files=t},_isFileUpload:function(t){return!this.model.customFileDetails.action||e(t).find("div.e-icon").is(".e-file-cancel")},_isXhrSupported:function(){return!("msie"==this.s.name&&parseInt(this.s.version)<9||"safari"==this.s.name&&"chrome"==this.s.name&&"536"==this.s.version)&&"undefined"!=typeof FormData&&"undefined"!=typeof File},_getFileName:function(t){return e.map(this._getAllFileInfo(t),function(e){return e.name}).join(", ")},_getFileSize:function(t){var i=this;return e.map(this._getAllFileInfo(t),function(e){return i._formatSize(e.size)}).join(", ")},_pushFile:function(i,s){var n,l,o,r,a,d,h,c,u,m,p;for(d=e("<div class='e-head-content'></div>"),c=e("<div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"</div>"),u=e("<div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"</div>"),m=e("<div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"</div>"),this.model.customFileDetails.name&&e(c).appendTo(d),this.model.customFileDetails.size&&e(u).appendTo(d),this.model.customFileDetails.status&&e(m).appendTo(d),filedialog=this.updialog,filedialog&&0!=filedialog.length?this.model.showFileDetails&&(this.updialog&&this.updialog.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable"),this.diaObj.open()):(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),this.model.allowDragAndDrop&&!this.model.showBrowseButton?(this.dragWrapper.append(this.updialog),DialogContentContainer="#"+this.control.id+"_dragWrapper"):(this.element.append(this.updialog),DialogContentContainer="#"+this.control.id)),n=this.updialog.find(".e-ul"),e(this.updialog.find(".e-head-content"))&&e(this.updialog.find(".e-head-content")).replaceWith(d),0==n.length&&(d.appendTo(this.updialog),n=t.buildTag("ul.e-ul").appendTo(this.updialog)),e(this.updialog).find(".e-file-upload").length>0&&e(this.updialog).find(".e-file-upload").remove(),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog).append(this.model.autoUpload||!this.model.asyncUpload?e(t.buildTag("div.e-action-container")).addClass("sync"):t.buildTag("div.e-action-container")),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(e(this.updialog).find(".e-action-container")),this.model.showRoundedCorner&&dialogActions.addClass("e-corner"),this._on(dialogActions,"click",this._dialogclose),this._on(dialogActions,"keydown",this._keydownDialogClose),p=null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:DialogContentContainer,this.updialog.ejDialog({showOnInit:!1,closeIconTooltip:this._getLocalizedLabels("closeToolTip"),minWidth:240,width:e(window).width()<750?250:this._getDialogContentWidth(),height:"auto",cssClass:"e-uploadbox "+this.model.cssClass,close:e.proxy(this._uploadFileListDelete,this),enableRTL:this.model.enableRTL,target:p,enableResize:!1,allowDraggable:this.model.dialogAction.drag,enableModal:!!this.model.asyncUpload&&this.model.dialogAction.modal,showHeader:this.model.customFileDetails.title,showRoundedCorner:this.model.showRoundedCorner}),e(window).width()<750?e(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"):e(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),this.diaObj=this.updialog.data("ejDialog"),""!=this.model.cssClass&&this.diaObj.setModel({cssClass:this.model.cssClass}),this._dialogPosition(),this.model.multipleFilesSelection||this.updialog.find(".e-ul>.e-upload-file").remove(),r=0;r<i.length;r++)l=e("<li class='e-upload-file'></li>").appendTo(n).data(s),addedlist=e("<div class='e-file-list'></div>"),addedfilename=e("<div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i[r].name+"</span></div>"),h="<div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(i[r].size)+"</span></div>",addedfilestatus=e("<div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'></div></div></div>"),addedfileaction=e("<div class='e-action-perform'><div class='e-icon e-file-view'></div></div>"),this.model.customFileDetails.name&&e(addedfilename).appendTo(addedlist),this.model.customFileDetails.size&&(0==this._getFileSize(i[r]).toString().toLowerCase().match("0.0kb").length||null!=i[r].size?e(h).appendTo(addedlist):e(this.updialog).find(".e-head-size").remove()),this.model.customFileDetails.status&&e(addedfilestatus).appendTo(addedlist),this.model.customFileDetails.action&&(e(addedfileaction).appendTo(addedlist),a="cancel",addedlist.find(".e-icon").remove().addClass(a.toString()),o=t.buildTag("div.e-icon e-file-cancel","",{},{"data-content":this._getLocalizedLabels("cancelToolTip")}),addedlist.find(".e-action-perform").append(o),this._on(o,"click",this._actionClick)),e(addedlist).appendTo(l);return this.model.showFileDetails&&this.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),l},_keydownDialogClose:function(e){this._currentElement.hasClass("e-disable")||13==e.keyCode&&this._dialogclose()},_pushFileDetails:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g;return l=e("<div class='e-head-content'></div>"),o=e("<div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"</div>"),r=e("<div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"</div>"),a=e("</div><div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"</div>"),this.model.customFileDetails.name&&e(o).appendTo(l),this.model.customFileDetails.size&&e(r).appendTo(l),this.model.customFileDetails.status&&e(a).appendTo(l),s=this,filedialog=this.updialog,filedialog&&0!=filedialog.length?this.model.showFileDetails&&(DialogContentContainer="#"+this.control.id,this.updialog&&this.updialog.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable"),s.diaObj.open()):(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),this.model.allowDragAndDrop&&!this.model.showBrowseButton?(this.dragWrapper.append(this.updialog),DialogContentContainer="#"+this.control.id+"_dragWrapper"):(this.element.append(this.updialog),DialogContentContainer="#"+this.control.id)),m=this.updialog.find(".e-ul"),e(this.updialog.find(".e-head-content"))&&e(this.updialog.find(".e-head-content")).replaceWith(l),0==m.length&&(l.appendTo(this.updialog),m=t.buildTag("ul.e-ul").appendTo(this.updialog)),e(this.updialog).find(".e-file-upload").length>0&&e(this.updialog).find(".e-file-upload").remove(),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog).append(this.model.autoUpload||!this.model.asyncUpload?e(t.buildTag("div.e-action-container")).addClass("sync"):t.buildTag("div.e-action-container")),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(e(this.updialog).find(".e-action-container")),this.model.showRoundedCorner&&dialogActions.addClass("e-corner"),this._on(dialogActions,"click",this._dialogclose),this.model.multipleFilesSelection||this.updialog.find(".e-ul>.e-upload-file").remove(),p=e("<li class='e-upload-file'></li>").appendTo(m).data("file",i),n=e("<div class='e-file-list'></div>"),d=e("<div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i.name+"</span></div>"),c=e("<div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(0)+"\\"+this._formatSize(i.size)+"</span></div>"),h=e("<div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'></div></div></div>"),u=e("<div class='e-action-perform'><div class='e-icon e-file-view'></div></div></div>"),this.model.customFileDetails.name&&e(d).appendTo(n),this.model.customFileDetails.size&&e(c).appendTo(n),this.model.customFileDetails.status&&e(h).appendTo(n),this.model.customFileDetails.action&&e(u).appendTo(n),e(n).appendTo(p),g=null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:DialogContentContainer,this.updialog.ejDialog({showOnInit:!1,closeIconTooltip:this._getLocalizedLabels("closeToolTip"),minWidth:240,width:e(window).width()<750?250:this._getDialogContentWidth(),height:"auto",cssClass:"e-uploadbox "+this.model.cssClass,close:e.proxy(this._uploadFileListDelete,this),enableRTL:this.model.enableRTL,target:g,enableResize:!1,allowDraggable:this.model.dialogAction.drag,enableModal:!!this.model.asyncUpload&&this.model.dialogAction.modal,showHeader:this.model.customFileDetails.title,showRoundedCorner:this.model.showRoundedCorner}),e(window).width()<750?e(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"):e(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),s.diaObj=this.updialog.data("ejDialog"),""!=s.model.cssClass&&s.diaObj.setModel({cssClass:this.model.cssClass}),s._dialogPosition(),this.model.showFileDetails&&s.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),p},_setProgress:function(t,i,s){var n,l,o;this.model.customFileDetails.status&&e(t).find(".e-file-progress-status").width(i+"%"),this.model.customFileDetails.size&&(n=e(t).find(".e-file-size .e-file-name-txt"),l=this._formatSize(s.loaded),o=this._formatSize(s.total),n.html(l+"\\"+o))},_setAction:function(e,i){var s;this.model.customFileDetails.action&&(e.find(".e-action-perform .e-icon,.e-file-percentage .e-icon").remove().addClass(i.toString()),"cancel"==i?s=t.buildTag("div.e-icon e-file-cancel","",{},{"data-content":this._getLocalizedLabels("cancelToolTip")}):"remove"==i?s=t.buildTag("div.e-icon e-delete","",{},{"data-content":this._getLocalizedLabels("removeToolTip")}):"retry"==i&&(s=t.buildTag("div.e-icon e-reload","",{},{"data-content":this._getLocalizedLabels("retryToolTip")})),e.find(".e-action-perform").append(s),this._on(s,"click",this._actionClick))},_setStatus:function(e,i){if(this.model.customFileDetails.status){var s=t.buildTag("div");"success"==i&&(e.find(".file-status").addClass("e-file-status-success").html("Completed"),e.find(".e-file-percentage").html(""),s.addClass("e-icon e-checkmark").attr("data-content",this._getLocalizedLabels("completedToolTip")),e.find(".e-file-percentage").append(s)),"failed"==i&&(e.find(".file-status").addClass("e-file-status-failed").html("Failed"),e.find(".e-file-percentage").html(""),s.addClass("e-icon e-file-percentage-failed").attr("data-content",this._getLocalizedLabels("failedToolTip")),e.find(".e-file-percentage").append(s)),"progress"==i&&e.find(".file-status").addClass("file-status-inprogress").html("in progress"),"uploading"==i&&(e.find(".file-status").addClass("file-status-inprogress").html("uploading"),e.find(".e-file-percentage").html(""))}},_renderTooltip:function(){t.isNullOrUndefined(this.updialog)||(this.upTooltip=e(this.updialog).ejTooltip({target:".e-file-cancel, .e-delete, .e-reload, .e-checkmark, .e-close, .e-file-percentage-failed",content:" ",isBalloon:!1,showRoundedCorner:this.model.showRoundedCorner,enableRTL:this.model.enableRTL,position:{target:{horizontal:"center",vertical:"bottom"},stem:{horizontal:"left",vertical:"top"}}}).data("ejTooltip"),e(this.upTooltip.tooltip).css({"min-width":"auto"}))},_createInputandBind:function(){var e=t.buildTag("input","",{},{type:"file","data-role":"none"});e.attr("name",""!=this.model.uploadName?this.model.uploadName:this.control.id).attr("autocomplete","off").attr("class","e-uploadinput").attr("accept",this.model.extensionsAllow),this.model.multipleFilesSelection&&0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&e.attr("multiple","multiple"),e.appendTo(this.element.find(".e-selectpart")),this.inputupload=e,this._bindInputChangeEvent()},_showUploadButton:function(){var i=this.updialog.find(".e-uploadbtn");0==i.length&&(i=t.buildTag("button.e-uploadbtn e-btn e-select",this._getLocalizedLabels("upload"),{},{type:"button","data-role":"none"}),this.model.showRoundedCorner&&i.addClass("e-corner"),this.updialog.find(".e-action-container").append(i),this._on(i,"click",this.__uploadButtonClick),this._on(i,"keydown",this._keydownUpload),e(i).focus()),this._buttonText(this.model.buttonText)},_keydownUpload:function(e){13==e.keyCode&&this.__uploadButtonClick(e)},_resetFileInput:function(e){var t=e.clone(!1,!1);this._on(t,"change",this._inputValueChange),e.replaceWith(t)},_isAllowed:function(t){var i,s,n,l,o,r,a=this,d=[],h=[],c=!0;return i=this.element.find(".e-uploadinput"),s=this,""!=this.model.extensionsAllow?(l=this.model.extensionsAllow.replace(/\s/g,"").toLowerCase().split(","),e(t).each(function(){-1==e.inArray(this.extension.toLowerCase(),l)?(n={action:"Files Processing",error:a._getLocalizedLabels("allowError").replace("#Extension",l.join(", ")),files:this},s._trigger("error",n),a._resetFileInput(i),c=!1):""!=this.extension&&d.push(this)})):""!=this.model.extensionsDeny?(r=this.model.extensionsDeny.replace(/\s/g,"").toLowerCase().split(","),e(t).each(function(){-1!=e.inArray(this.extension.toLowerCase(),r)?(n={action:"Files Processing",error:a._getLocalizedLabels("denyError").replace("#Extension",r.join(", ")),files:this},s._trigger("error",n),a._resetFileInput(i),c=!1):""!=this.extension&&d.push(this)})):e(t).each(function(){""!=this.extension&&d.push(this)}),""!=this.model.fileSize?(o=this.model.fileSize,e(d).each(function(){this.size>o?(n={action:"Files Processing",error:a._getLocalizedLabels("filedetail").replace("#fileSize",o),files:this},s._trigger("error",n),a._resetFileInput(i),c=!1):h.push(this)})):h=d,{files:h,status:c}},_fileListRemove:function(){fileList=this.updialog.find(".e-upload-file .e-delete"),0==fileList.length&&(this.updialog.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"))},_uploadHide:function(){fileList=this.updialog.find(".e-upload-file .e-file-cancel"),0==fileList.length&&(this.updialog.find(".e-ul").empty(),this.updialog.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"),this.upTooltip.hide())},_onBeforeClose:function(i){t.isNullOrUndefined(i.event)||(i.cancel=!!e(i.event.currentTarget).hasClass("e-disable"))},_dialogclose:function(t){if(!this._currentElement.hasClass("e-disable")){var i,s,n=this.updialog.find(".e-uploadclosebtn");s=this.updialog.find(".e-ul").children().first(),i=e(s).data("file"),n.hasClass("e-disable")?t.preventDefault():(this._uploadFileListDelete(),this.updialog.ejDialog("close")),this._trigger("cancel",{fileStatus:i})}},_uploadFileListDelete:function(){this.updialog.find(".e-ul").empty(),this._currentElement.find(".e-uploadinput").val(""),this._resetFileInput(this._currentElement.find(".e-uploadinput")),this.model.asyncUpload||this._formResetSyncUpload()},_onXhrSelect:function(){var t,i;this._xhrBeforeUpload(this._files),t=this,e.each(t._files,function(s,n){i=e(n).data("filelist"),t._setAction(i,"cancel"),t.model.autoUpload?t._xhrPerformUpload(n):t._showUploadButton()})},_xhrBeforeUpload:function(t){var i,s,n,l;return i=t,s=this,e.each(i,function(t,i){n=s._createFormObjectXhr(i),e(i).data("formobject",n),l=s._pushFileDetails(i),e(i).data("filelist",l)}),i},_xhrPerformUpload:function(t){var i,n,l,o,r;return o=new XMLHttpRequest,n=this,r={files:t},this._trigger("begin",r)?(e(t).data("xhr",o),void n._onRequestError(n,s,t)):(i=this.model.saveUrl,(l=e(t).data("formobject")).append((this.model.uploadName&&""!=this.model.uploadName?this.model.uploadName:this.control.id)+"_data",JSON.stringify(r.data)),e(t).data("xhr",o),o.addEventListener("load",function(e){n._onRequestSuccess(n,e,t)},!1),o.addEventListener("error",function(e){n._onRequestError(n,e,t)},!1),o.upload.addEventListener("progress",function(e){n._onRequestProgress(n,e,t)},!1),o.open("POST",i),r={files:t,xhr:o},this._trigger("beforeSend",r)?(e(t).data("xhr",o),void n._onRequestError(n,s,t)):void o.send(l))},_xhrOnUploadButtonClick:function(){var t;for(t=(this.model.showBrowseButton?this.diaObj.wrapper:this.dragWrapper).find(".e-ul li.e-upload-file"),i=0;i<t.length;i++)e(this),this._isFileUpload(t[i])&&this._xhrPerformUpload(e(t[i]).data("file"))},_xhrOnRemove:function(t,i){var s=e(i).find(".e-file-name").text().toString().split(","),n=this;e.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+s,success:function(){e(i).remove(),n._fileListRemove(),n._trigger("remove",{fileStatus:n._file})}}),this.upTooltip.hide()},_xhrOnCancel:function(t,i){var s;s=e(i).data("file"),e(s).data("xhr")&&e(s).data("xhr").abort(),e(s).data("xhr",null),e(i).data("file",null),e(i).remove(),this._uploadHide()},_xhrOnRetry:function(t,i){if(!this._currentElement.hasClass("e-disable")){var s=e(i).data("file");this._xhrPerformUpload(s)}},_onRequestSuccess:function(t,i,s){var n=e(s).data("xhr");n.status>=200&&n.status<=299?t._onXhrUploadSuccess(t,i,s):t._onRequestError(t,i,s)},_onXhrUploadSuccess:function(t,i,s){var n,l,o,r,a;n=e(s).data("filelist"),l=e(s).data("xhr"),t.model.removeUrl?(t._setAction(n,"remove"),t._setStatus(n,"success")):(n.find(".e-action-perform .e-icon,.e-file-percentage .e-icon").remove(),t._setStatus(n,"success")),e(s).length>0&&(e(n).find(".e-file-progress-status").width("100%"),o=e(s)[0].size,r=this._formatSize(o),e(n).find(".e-file-size .e-file-name-txt").html(r+"\\"+r)),a={files:s,responseText:l.responseText,xhr:l,e:i},this.updialog.find(".e-file-upload .e-uploadclosebtn").html(this.model.buttonText.close).focus(),t._trigger("success",a),this._successFiles.push(s),t._files.length==this._successFiles.length&&(a={files:s,responseText:l.responseText,success:this._successFiles,xhr:l,e:i},t._trigger("complete",a),this._successFiles.length=0,this.model.dialogAction.closeOnComplete&&this._dialogclose())},_onRequestError:function(t,i,s){var n,l,o;n=e(s).data("filelist"),l=e(s).data("xhr"),t._setAction(n,"retry"),t._setStatus(n,"failed"),o={action:"File Processing",error:l.status?l.status+" "+l.statusText:"Unable to reach the server.",files:s,xhr:l,e:i},t._trigger("error",o)},_onRequestProgress:function(t,i,s){var n,l,o;n=Math.round(100*i.loaded/i.total),l=e(s).data("filelist"),t._setProgress(l,n,i),t._setStatus(l,"progress"),o={file:s,percentage:n,e:i},this._trigger("inProgress",o)},_createFormObjectXhr:function(e){var t=new FormData;return t.append(""!=this.model.uploadName?this.model.uploadName:this.control.id,e.rawFile),t},_getInputFileInfo:function(e){var t=e[0];return t.files?this._getAllFileInfo(t.files):[{name:this._GetName(t.value),extension:this._getFileExtensionType(t.value),size:this._getFileSizeinIE(t.value)}]},_getFileSizeinIE:function(e){var t,i;t=null,i=null;try{t=new ActiveXObject("Scripting.FileSystemObject")}catch(e){i=null}return t&&(i=t.getFile(e).size),i},_getFileExtensionType:function(e){return e.match&&e.match(/\.([^\.]+)$/)?e.match(/\.([^\.]+)$/)[0]:""},_getAllFileInfo:function(t){var i=this;return e.map(t,function(e){return i._getFileInfo(e||t)})},_GetName:function(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e},_getFileInfo:function(e){var t=e.name||e.fileName||e;return{name:t,extension:this._getFileExtensionType(t),size:e.size||e.fileSize,rawFile:e}},_formatSize:function(e){var t=-1;if(!e)return"0.0KB";do{e/=1024,t++}while(e>99);return Math.max(e,0).toFixed(1)+["KB","MB","GB","TB","PB","EB"][t]},_onSelectIFrame:function(t){var i,s,n;i=e(t.target),s=this._getInputFileInfo(i),(n=this._beforeUploadIFrame(s)).data("iframe"),this.model.autoUpload?this._performUploadIFrame(n):this._showUploadButton(),this._off(this.inputupload,"change"),this._bindInputChangeEvent()},_onRemoveIFrame:function(t,i){var s,n,l;s=i.data("iframe"),n=e(i).data("file")[0].name,l=this,s?(this._removeFileEntry(i),this.model.removeUrl&&e.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+n,success:function(){l._fileListRemove(),l._trigger("remove",{fileStatus:l._file})}})):(this._removeFileEntry(i),this._trigger("remove",{fileStatus:this._file}))},_onCancelIFrame:function(e,t){var i;this._trigger("cancel",{Status:t}),(i=t.data("iframe"))&&(this._removeFileEntry(t),void 0!==i.stop?i.stop():i.document&&(i.document.execCommand("Stop"),i.contentWindow.location.href=i.contentWindow.location.href),this._processServerResponse(i,"")),this._uploadHide()},_onRetryIFrame:function(e,t){this._performUploadIFrame(t)},_beforeUploadIFrame:function(e){var t,i,s;return t=this._createFrame(this.control.id+"_Iframe"+this.Uploadframes.length),this.Uploadframes.push(t),i=this._createForm(this.model.saveUrl,t[0].id),this._currentElement.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(i),this._createInputandBind(),s=this._pushFile(e,{iframe:t,form:i,file:e}),t.data({filelist:s}),this._setAction(s,"cancel"),s},_performUploadIFrame:function(t){var i,s,n,l;n={files:t},this._trigger("begin",n)?this._failureIframeUpload(t,"File upload has been denied"):(t.data("file"),this._setStatus(t,"uploading"),i=t.data("iframe"),s=t.data("form"),l=e("<input>").attr("name",(this.model.uploadName&&""!=this.model.uploadName?this.model.uploadName:this.control.id)+"_data").attr("type","hidden").val(JSON.stringify(n.data)),s.append(l),i.appendTo(document.body),s.appendTo(document.body),this._on(i,"load",this._removeFramesIFrame),s.submit())},_onUploadButtonClickIFrame:function(){var t,i;e(".e-ul li.e-upload-file",(t=this).updialog).each(function(){i=e(this),t._isFileUpload(i)&&t._performUploadIFrame(i)})},_removeFramesIFrame:function(t){var i,s,n;n=(i=e(t.target)).data("filelist");try{s=e.trim(i.context.contentDocument.body.innerText.replace(/\n|\r/g," "))}catch(t){s="Server Error trying to get server response: "+t}"Server Error"!=s.substring(0,12)&&0!=s.indexOf("HTTP Error")?(this._processServerResponse(i,s),this._setIframeProgress(n,100,t),this._setStatus(n,"progress"),this._successIframeUpload(n,s)):this._failureIframeUpload(n,s)},_setIframeProgress:function(t,i){e(t).find(".e-file-progress-status").width(i+"%")},_successIframeUpload:function(e,t){fileEntry=e.data("file"),this.model.removeUrl?(this._setAction(e,"remove"),this._setStatus(e,"success")):(e.find(".file-action").remove(),this._setStatus(e,"success")),args={files:fileEntry,responseText:t},this.updialog.find(".e-file-upload .e-uploadclosebtn").html(this.model.buttonText.close).focus(),this._trigger("success",args),this._successFiles.push(fileEntry),e.length==this._successFiles.length&&(args={files:fileEntry,responseText:t,success:this._successFiles},this._trigger("complete",args),this._successFiles.length=0,this.model.dialogAction.closeOnComplete&&this._dialogclose())},_failureIframeUpload:function(e,t){fileEntry=e.data("file"),this.model.saveUrl&&"File upload has been denied"!=t?(this._setAction(e,"retry"),this._setStatus(e,"failed")):(e.find(".file-action").remove(),this._setStatus(e,"failed")),args=0==t.indexOf("HTTP Error")?{files:fileEntry,responseText:t,status:t.match(/\d+/).toString()}:{files:fileEntry,responseText:t},this._trigger("error",args)},_processServerResponse:function(t){var i;i=e(document.body).find("form[target='"+e(t).attr("id")+"']"),setTimeout(function(){i.remove(),t.remove()},0)},_createDivBlock:function(e){return t.buildTag("div."+e)},_createForm:function(e,i){return t.buildTag("form","",{},{enctype:"multipart/form-data",method:"POST",action:e,target:i})},_createFrame:function(e){return t.buildTag("iframe#"+e,"",{display:"none"},{name:e})},_createInput:function(e){return t.buildTag("input","",{},{type:"file",name:e,"data-role":"none"})},_initObjectsSyncUpload:function(){this._currentElement.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data"),this._wireEventsSyncUpload()},_wireEventsSyncUpload:function(){var t=this._currentElement.closest("form")[0];this._on(e(t),"submit",this._formSubmitSyncUpload),this._on(e(t),"reset",this._formResetSyncUpload)},_onSelectSyncUpload:function(t){var i,s;i=e(t.target),s=e(".e-selectpart",this.control),this._currentElement.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(s),this._createInputandBind(),this._pushFile(this._files,{file:this._files,Input:i})},_onCancelSyncUpload:function(e,t){var i=t.data("Input");t.data("file",null),t.data("Input",null),t.remove(),i.remove(),this._uploadHide()},_formSubmitSyncUpload:function(){var t,i;(t=e(".e-uploadinput",this.control)).attr("name",""),i=""!=this.model.uploadName?this.model.uploadName:this.control.id,setTimeout(function(){t.attr("name",i)},0)},_formResetSyncUpload:function(){e(".e-selectpart",this.control).children('input[type="file"]').each(function(){e(this).hasClass("e-uploadinput")||e(this).remove()})}}),t.Uploadbox.Locale=t.Uploadbox.Locale||{},t.Uploadbox.Locale.default=t.Uploadbox.Locale["en-US"]={buttonText:{upload:"Upload",browse:"Browse",cancel:"Cancel",close:"Close"},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},dropAreaText:"Drop files or click to upload",filedetail:"The selected file size is too large.  Please select a file within #fileSize",denyError:"Files with #Extension extensions are not allowed.",allowError:"Only files with #Extension extensions are allowed.",cancelToolTip:"Cancel",removeToolTip:"Remove",retryToolTip:"Retry",completedToolTip:"Completed",failedToolTip:"Failed",closeToolTip:"Close"}}),
/*!
*  filename: ej.waitingpopup.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,target:null,appendTo:null,showImage:!0,htmlAttributes:{},cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},_isTargetVisible:function(){return"none"!=this.element.css("display")},show:function(){this._isTargetVisible()&&(this._refreshPanel(),this.maindiv.css("display","block"),this.model.showOnInit=!0)},hide:function(){this.maindiv.css("display","none"),this.model.showOnInit=!1},refresh:function(){this._isTargetVisible()&&this._refreshPanel()},_setText:function(e){e?this.popupText?this.popupText.html(e):(this._generateTextTag(e),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(e){e?(this.popupImage=t.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var i=this.model.template;"string"==typeof i&&(i=e(i)),this.templateObj="object"==typeof i&&"function"==typeof i.css?i:t.buildTag("div","",{"text-align":"center"}).append(i),this.templateObj.css({visibility:"visible",display:"block"}),this.maindiv.append(this.templateObj)},_setTheme:function(e){this.maindiv.removeClass(this.model.cssClass).addClass(e)},_init:function(){this._initialize(),this._render(),this._wireEvents()},_wireEvents:function(){e(window).on("resize",e.proxy(this._resizeHandler,this))},_unwireEvents:function(){e(window).off("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this.refresh()},_setModel:function(i){for(var s in i)switch(s){case"text":this._setText(i[s]);break;case"cssClass":this._setTheme(i[s]);break;case"htmlAttributes ":this._addAttr(i[s]);break;case"showOnInit":this._setVisibility(i[s]);break;case"showImage":this._showImage(i[s]),this._setContentPosition();break;case"target":this.model.target=i[s],this._setTarget(),this.refresh();break;case"appendTo":this.model.appendTo=i[s],this._setTarget(),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this.refresh();break;case"template":this.maindiv.empty(),i[s]?(this.model.template=i[s],this._setTemplate()):(this.model.template=i[s]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),this._setContentPosition()}},_setTarget:function(){this.targetElement="document"==this.model.target?e(document):"window"==this.model.target?e(window):this.model.target?e(this.model.target):this.element},_destroy:function(){this.maindiv.remove(),this._unwireEvents()},_initialize:function(){this.maindiv=null,this.popupText=null,this.popupImage=null,this.templateObj=null,this.targetElement=null},_render:function(){this._setTarget();var i=e("#"+this.element[0].id+"_WaitingPopup").get(0);i&&e(i).remove(),this.maindiv=t.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup"),this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this._setVisibility(this.model.showOnInit),this._addAttr(this.model.htmlAttributes)},_refreshPanel:function(){this.maindiv.width(this.targetElement.outerWidth()),this.maindiv.height(this.targetElement.outerHeight()),this._setPanelPosition(),this._setContentPosition()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.maindiv.addClass(e):i.maindiv.attr(t,e)})},_setPanelPosition:function(){var i=t.util.getOffset(this.targetElement);null!=this.model.appendTo&&e(this.model.appendTo).length>0&&("relative"!=this.targetElement.css("position")&&"absolute"!=this.targetElement.css("position")||this.targetElement[0]!==e(this.model.appendTo)[0]?(i.left-=this.targetElement.offsetParent().offset().left,i.top-=this.targetElement.offsetParent().offset().top):i={left:0,top:0}),this.maindiv.css({position:"absolute",left:Math.ceil(i.left)+"px",top:Math.ceil(i.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){if(null==this.model.template){var e,t=0,i=0,s=null;e=this.targetElement.outerHeight(),this.popupText&&(t=this.popupText.outerHeight()),this.popupImage&&(i=this.popupImage.outerHeight()),this.popupImage&&(s=Math.ceil((e-(i+t))/2),this.popupImage.css("top",s+"px")),this.popupText&&(s||(s=Math.ceil((e-t)/2)),this.popupText.css("top",s+"px"))}else this.templateObj.css({position:"relative",left:Math.ceil((this.targetElement.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.targetElement.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(e){this.popupText=t.buildTag("div.e-text",e),this.maindiv.append(this.popupText)},_setVisibility:function(e){e&&this._isTargetVisible()?this.show():this.hide()},_maxZindex:function(){return t.util.getZindexPartial(this.element)}})}),
/*!
*  filename: ej.checkbox.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",checkState:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._isIE8="msie"==e.name&&"8.0"==e.version,this._isDevice=this._checkDevice(),this._setValue(),this._renderControl(),this.model.enableRTL&&this._setRTL(),this.model.enabled&&this._wireEvents(),this._setEnabled(this.model.enabled),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._addAttr(this.model.htmlAttributes)},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_setRTL:function(){e(this.maindiv).addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").data("validator")||this.wrapper.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.wrapper.find("input").rules("add",this.model.validationRules),i=(i=this.wrapper.closest("form").data("validator"))||this.wrapper.closest("form").validate(),name=this.wrapper.find("input").attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"name"==t||"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._setEnabled(!1):"checked"==t&&"checked"==e?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,e)})},_triggerBeforeChange:function(){var e={isChecked:this._isChecked,isInteraction:!1};if(1==this._trigger("beforeChange",e))return!1},_triggerChange:function(){var e={isChecked:this._isChecked,checkState:this.model.checkState,isInteraction:!1};this._trigger("change",e)},_setModel:function(i){var s,n,l;for(s in i)switch(s){case"checked":if(this.model.beforeChange)return this._triggerBeforeChange();this.checked()instanceof Array?(l=(n=t.util.getVal(i[s]))[n.length-1],this.model.value==l&&(this._isChecked=!0)):(this._isChecked=t.util.getVal(i[s]),this.checked(this._isChecked)),this._isChecked?this._checked():this._unChecked(),this.model.change&&this._triggerChange();break;case"enableTriState":i[s]&&(this.model.enableTriState=i[s],this._indeterminateState=i[s]);break;case"checkState":if(this.model.enableTriState){if(this.model.beforeChange)return this._triggerBeforeChange();this.model.checkState=i[s],this._changeState(this.model.checkState),this.checked()instanceof Array?this._updateCheckedItem():(i[s]="check")?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked="uncheck"!=this.model.checkState),this._triggerChange())}break;case"cssClass":this._changeSkin(i[s]);break;case"enableRTL":i[s]?this._setRTL():e(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.wrapper.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(i[s]);break;case"name":this.element.attr("name",i[s]),(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.setAttribute("name",i[s]),this.model.name=i[s];break;case"value":this.element.attr("value",i[s]);break;case"size":this._setSize(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":this._setEnabled(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this.element.removeClass("e-checkbox e-input"),this.element.insertBefore(this.wrapper),this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),e("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1,this._isChecked=!1;var e=this.element[0].getAttribute("id"),i=this.element[0].getAttribute("name"),s=this.element[0].getAttribute("value");t.isNullOrUndefined(e)||(this.model.id=e),t.isNullOrUndefined(i)||(this.model.name=i),t.isNullOrUndefined(s)||""==s||(this.model.value=s),this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0),t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id),this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(i){i==t.CheckboxSize.Medium?e(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"):e(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small")},_setRoundedCorner:function(e){e?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(e){e?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?"indeterminate"==this.model.checkState?this._indeterminateState=!0:"check"==this.model.checkState?this._isChecked=!0:"uncheck"==this.model.checkState&&(this._isChecked=!1):"indeterminate"==this.model.checkState&&(this.model.checkState="uncheck")},_createElement:function(e,t){var i=document.createElement(e);return this._setAttributes(i,t),i},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState(),this.maindiv=this._createElement("span",{class:"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0}),this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id)),this.innerdiv=document.createElement("div"),this._setSize(this.model.size),this.span=document.createElement("span"),this.span=e(this.span),this.spanImg=this._createElement("span",{class:"e-chk-image e-icon",role:"presentation"}),this.spanImg=e(this.spanImg),this.element.addClass("e-input"),this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name,this.model.value=!!t.isNullOrUndefined(this.model.value)||this.model.value,this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value}),this._hiddenInput=this._createElement("input",{type:"checkbox",value:!1,style:"display:none"}),this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden"),this._setRoundedCorner(this.model.showRoundedCorner),this.checked()&&this._setCheckedItem(this.checked()),this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name)),this.checked()instanceof Array||this.checked(this._isChecked),this.span[0].appendChild(this.spanImg[0]),this.innerdiv.appendChild(this.span[0]),this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]),this.maindiv.appendChild(this.element[0]),this.maindiv.appendChild(this._hiddenInput),this.maindiv.appendChild(this.innerdiv),this.wrapper=e(this.maindiv),this._setTextWrapper(this.model.text),this.chkbx=this.element,1==this.model.enableTriState&&1==this._indeterminateState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(e){"indeterminate"==e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):"check"==e?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):"uncheck"==e&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(e){e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.model.checkState="indeterminate",this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(e){""!=e&&(this.txtSpan=t.buildTag("div.e-text",e),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),this.element[0].setAttribute("id",t)},_isValid:function(e){return!t.isNullOrUndefined(e)&&""!=e},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler),this._isIE8&&this._isValid(this.model.id)&&this._on(e("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()}),this._on(this.wrapper,"focus",this._focusIn),this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click"),this._isIE8&&this._isValid(this.model.id)&&this._off(e("label[for="+this.model.id+"]"),"click"),this._off(this.wrapper,"focus"),this._off(this.wrapper,"focusout")},_focusIn:function(){e(this.wrapper).addClass("e-focus"),e(this.wrapper).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.wrapper).removeClass("e-focus"),e(this.wrapper).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){32==e.keyCode&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(e){var t={isChecked:this._isChecked,isInteraction:!0,event:e};return 1!=this._trigger("beforeChange",t)&&(this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0)):this.span.hasClass("e-chk-act")?1==this.model.enableTriState&&1==this._indeterminateState?(this._setIndeterminate(!0),this.checked()instanceof Array||this.checked(!0)):(this._unChecked(),this.checked()instanceof Array||this.checked(!1)):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),t={isChecked:this._isChecked,checkState:this.model.checkState,isInteraction:!0,event:e},this._trigger("change",t),!0)},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act"),this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.wrapper[0].setAttribute("aria-checked",!0),this.wrapper.find("input[type=checkbox]").prop("checked",!0),this.model.checkState="check",this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1),this.spanImg.removeClass("e-checkmark e-stop"),this.wrapper.find("input[type=checkbox]").prop("checked",!1),this.model.checkState="uncheck",this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(e){if(t.isNullOrUndefined(e)||""==e||e instanceof Array){if(e instanceof Array&&!t.isNullOrUndefined(this.model.value)&&""!=this.model.value)for(var i=0;i<e.length;i++)e[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||""==this.model.value||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(e.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):e.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(e.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(null!=this._isChecked&&null!=this._isChecked)return this._isChecked}}),t.CheckboxSize={Small:"small",Medium:"medium"},t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,s,n){return jQuery.easing[jQuery.easing.def](e,t,i,s,n)},easeInQuad:function(e,t,i,s,n){return s*(t/=n)*t+i},easeOutQuad:function(e,t,i,s,n){return-s*(t/=n)*(t-2)+i},easeInOutQuad:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t+i:-s/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,s,n){return s*(t/=n)*t*t+i},easeOutCubic:function(e,t,i,s,n){return s*((t=t/n-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t*t+i:s/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,s,n){return s*(t/=n)*t*t*t+i},easeOutQuart:function(e,t,i,s,n){return-s*((t=t/n-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t*t*t+i:-s/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,s,n){return s*(t/=n)*t*t*t*t+i},easeOutQuint:function(e,t,i,s,n){return s*((t=t/n-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,s,n){return(t/=n/2)<1?s/2*t*t*t*t*t+i:s/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,s,n){return-s*Math.cos(t/n*(Math.PI/2))+s+i},easeOutSine:function(e,t,i,s,n){return s*Math.sin(t/n*(Math.PI/2))+i},easeInOutSine:function(e,t,i,s,n){return-s/2*(Math.cos(Math.PI*t/n)-1)+i},easeInExpo:function(e,t,i,s,n){return 0==t?i:s*Math.pow(2,10*(t/n-1))+i},easeOutExpo:function(e,t,i,s,n){return t==n?i+s:s*(1-Math.pow(2,-10*t/n))+i},easeInOutExpo:function(e,t,i,s,n){return 0==t?i:t==n?i+s:(t/=n/2)<1?s/2*Math.pow(2,10*(t-1))+i:s/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,s,n){return-s*(Math.sqrt(1-(t/=n)*t)-1)+i},easeOutCirc:function(e,t,i,s,n){return s*Math.sqrt(1-(t=t/n-1)*t)+i},easeInOutCirc:function(e,t,i,s,n){return(t/=n/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+i:s/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,s,n){e=1.70158;var l=0,o=s;return 0==t?i:1==(t/=n)?i+s:(l||(l=.3*n),o<Math.abs(s)?(o=s,e=l/4):e=l/(2*Math.PI)*Math.asin(s/o),-o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-e)*Math.PI/l)+i)},easeOutElastic:function(e,t,i,s,n){e=1.70158;var l=0,o=s;return 0==t?i:1==(t/=n)?i+s:(l||(l=.3*n),o<Math.abs(s)?(o=s,e=l/4):e=l/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*n-e)*Math.PI/l)+s+i)},easeInOutElastic:function(e,t,i,s,n){e=1.70158;var l=0,o=s;return 0==t?i:2==(t/=n/2)?i+s:(l||(l=.3*n*1.5),o<Math.abs(s)?(o=s,e=l/4):e=l/(2*Math.PI)*Math.asin(s/o),t<1?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-e)*Math.PI/l)+i:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-e)*Math.PI/l)*.5+s+i)},easeInBack:function(e,t,i,s,n,l){return null==l&&(l=1.70158),s*(t/=n)*t*((l+1)*t-l)+i},easeOutBack:function(e,t,i,s,n,l){return null==l&&(l=1.70158),s*((t=t/n-1)*t*((l+1)*t+l)+1)+i},easeInOutBack:function(e,t,i,s,n,l){return null==l&&(l=1.70158),(t/=n/2)<1?s/2*t*t*((1+(l*=1.525))*t-l)+i:s/2*((t-=2)*t*((1+(l*=1.525))*t+l)+2)+i},easeInBounce:function(e,t,i,s,n){return s-jQuery.easing.easeOutBounce(e,n-t,0,s,n)+i},easeOutBounce:function(e,t,i,s,n){return(t/=n)<1/2.75?7.5625*s*t*t+i:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+i:s*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,s,n){return t<n/2?.5*jQuery.easing.easeInBounce(e,2*t,0,s,n)+i:.5*jQuery.easing.easeOutBounce(e,2*t-n,0,s,n)+.5*s+i}}),
/*!
* Globalize
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*/
function(e,t){var i,s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,w,C,y,S,x,T;i=function(e){return new i.prototype.init(e)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=i:e.Globalize=i,i.cultures={},i.prototype={constructor:i,init:function(e){return this.cultures=i.cultures,this.cultureSelector=e,this}},i.prototype.init.prototype=i.prototype,i.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},i.cultures.default.calendar=i.cultures.default.calendars.standard,i.cultures.en=i.cultures.default,i.cultureSelector="en",s=/^0x[a-f0-9]+$/i,n=/^[+\-]?infinity$/i,l=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,o=/^\s+|\s+$/g,r=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},d=function(){var e,t,i,s,n,l,o=arguments[0]||{},r=1,a=arguments.length,m=!1;for("boolean"==typeof o&&(m=o,o=arguments[1]||{},r=2),"object"==typeof o||c(o)||(o={});r<a;r++)if(null!=(e=arguments[r]))for(t in e)i=o[t],o!==(s=e[t])&&(m&&s&&(u(s)||(n=h(s)))?(n?(n=!1,l=i&&h(i)?i:[]):l=i&&u(i)?i:{},o[t]=d(m,l,s)):undefined!==s&&(o[t]=s));return o},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"[object Function]"===Object.prototype.toString.call(e)},u=function(e){return"[object Object]"===Object.prototype.toString.call(e)},m=function(e,t){return 0===e.indexOf(t)},p=function(e){return(e+"").replace(o,"")},g=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},f=function(e,t,i){for(var s=e.length;s<t;s+=1)e=i?"0"+e:e+"0";return e},_=function(e,t){for(var i,s=0,n=!1,l=0,o=e.length;l<o;l++)switch(i=e.charAt(l)){case"'":n?t.push("'"):s++,n=!1;break;case"\\":n&&t.push("\\"),n=!n;break;default:t.push(i),n=!1}return s},v=function(e,t){t=t||"F";var i,s=e.patterns,n=t.length;if(1===n){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===n&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},b=function(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=D[t-2]+s).substr(i.length-t,t):i=s}function n(){return x||T||(x=I.test(t),T=!0),x}function l(e,t){if(k)return k[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var o,r,a,d,h,c,u,m,p,g=i.calendar,f=g.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?f?o=b(e,g.patterns.F,i):(r=new Date(e.getTime()),a=y(e,g.eras),r.setFullYear(S(e,g,a)),o=r.toLocaleString()):o=e.toString(),o;d=g.eras,h="s"===t,t=v(g,t),o=[];var w,x,T,k,D=["0","00","000"],I=/([^d]|^)(d|dd)([^d]|$)/g,O=0,A=C();for(!h&&f&&(k=f.fromGregorian(e));;){var L=A.lastIndex,R=A.exec(t),E=t.slice(L,R?R.index:t.length);if(O+=_(E,o),!R)break;if(O%2)o.push(R[0]);else switch(u=(c=R[0]).length,c){case"ddd":case"dddd":m=3===u?g.days.namesAbbr:g.days.names,o.push(m[e.getDay()]);break;case"d":case"dd":x=!0,o.push(s(l(e,2),u));break;case"MMM":case"MMMM":p=l(e,1),o.push(g.monthsGenitive&&n()?g.monthsGenitive[3===u?"namesAbbr":"names"][p]:g.months[3===u?"namesAbbr":"names"][p]);break;case"M":case"MM":o.push(s(l(e,1)+1,u));break;case"y":case"yy":case"yyyy":p=k?k[0]:S(e,g,y(e,d),h),u<4&&(p%=100),o.push(s(p,u));break;case"h":case"hh":0===(w=e.getHours()%12)&&(w=12),o.push(s(w,u));break;case"H":case"HH":o.push(s(e.getHours(),u));break;case"m":case"mm":o.push(s(e.getMinutes(),u));break;case"s":case"ss":o.push(s(e.getSeconds(),u));break;case"t":case"tt":p=e.getHours()<12?g.AM?g.AM[0]:" ":g.PM?g.PM[0]:" ",o.push(1===u?p.charAt(0):p);break;case"f":case"ff":case"fff":o.push(s(e.getMilliseconds(),3).substr(0,u));break;case"z":case"zz":w=e.getTimezoneOffset()/60,o.push((w<=0?"+":"-")+s(Math.floor(Math.abs(w)),u));break;case"zzz":w=e.getTimezoneOffset()/60,o.push((w<=0?"+":"-")+s(Math.floor(Math.abs(w)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":g.eras&&o.push(g.eras[y(e,d)].name);break;case"/":o.push(g["/"]);break;default:throw"Invalid date format pattern '"+c+"'."}}return o.join("")},function(){var e;e=function(e,t,i){var s=i.groupSizes,n=s[0],l=1,o=Math.pow(10,t),r=Math.round(e*o)/o;isFinite(r)||(r=e);var a=(e=r)+"",d="",h=a.split(/e/i),c=h.length>1?parseInt(h[1],10):0;h=(a=h[0]).split("."),a=h[0],d=h.length>1?h[1]:"",c>0?(a+=(d=f(d,c,!1)).slice(0,c),d=d.substr(c)):c<0&&(d=(a=f(a,(c=-c)+1,!0)).slice(-c,a.length)+d,a=a.slice(0,-c)),d=t>0?i["."]+(d.length>t?d.slice(0,t):f(d,t)):"";for(var u=a.length-1,m=i[","],p="";u>=0;){if(0===n||n>u)return a.slice(0,u+1)+(p.length?m+p+d:d);p=a.slice(u-n+1,u+1)+(p.length?m+p:""),u-=n,l<s.length&&(n=s[l],l++)}return a.slice(0,u+1)+m+p+d},w=function(t,i,s){var n,l,o,r,a,d;if(!isFinite(t))return t===1/0?s.numberFormat.positiveInfinity:t===-1/0?s.numberFormat.negativeInfinity:s.numberFormat.NaN;if(!i||"i"===i)return s.name.length?t.toLocaleString():t.toString();i=i||"D";var h,c=s.numberFormat,u=Math.abs(t),m=-1;switch(i.length>1&&(m=parseInt(i.slice(1),10)),n=i.charAt(0).toUpperCase()){case"D":h="n",u=g(u),-1!==m&&(u=f(""+u,m,!0)),t<0&&(u="-"+u);break;case"N":l=c;case"C":l=l||c.currency;case"P":l=l||c.percent,h=t<0?l.pattern[0]:l.pattern[1]||"n",-1===m&&(m=l.decimals),u=e(u*("P"===n?100:1),m,l);break;default:throw"Bad number format specifier: "+n}for(o=/n|\$|-|%/g,r="";a=o.lastIndex,d=o.exec(h),r+=h.slice(a,d?d.index:h.length),d;)switch(d[0]){case"n":r+=u;break;case"$":r+=c.currency.symbol;break;case"-":/[1-9]/.test(u)&&(r+=c["-"]);break;case"%":r+=c.percent.symbol}return r}}(),C=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},y=function(e,t){var i,s,n,l;if(!t)return 0;for(s=e.getTime(),n=0,l=t.length;n<l;n++)if(null===(i=t[n].start)||s>=i)return n;return 0},S=function(e,t,i,s){var n=e.getFullYear();return!s&&t.eras&&(n-=t.eras[i].offset),n},function(){var e,t,i,s,n,l,o;e=function(e,t){if(t<100){var i=new Date,s=y(i),n=S(i,e,s),l=e.twoDigitYearMax;(t+=n-n%100)>(l="string"==typeof l?(new Date).getFullYear()%100+parseInt(l,10):l)&&(t-=100)}return t},t=function(e,t,i){var s,n=e.days,a=e._upperDays;return a||(e._upperDays=a=[o(n.names),o(n.namesAbbr),o(n.namesShort)]),t=l(t),i?-1===(s=r(a[1],t))&&(s=r(a[2],t)):s=r(a[0],t),s},i=function(e,t,i){var s,n=e.months,a=e.monthsGenitive||e.months,d=e._upperMonths,h=e._upperMonthsGen;return d||(e._upperMonths=d=[o(n.names),o(n.namesAbbr)],e._upperMonthsGen=h=[o(a.names),o(a.namesAbbr)]),t=l(t),(s=r(i?d[1]:d[0],t))<0&&(s=r(i?h[1]:h[0],t)),s},s=function(e,t){var i,s,n,l,o,r,a=e._parseRegExp;if(a){if(i=a[t])return i}else e._parseRegExp=a={};for(var d,h=v(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],m=0,p=0,g=C();null!==(d=g.exec(h));)if(s=h.slice(m,d.index),m=g.lastIndex,(p+=_(s,c))%2)c.push(d[0]);else{switch(l=(n=d[0]).length,n){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":o="(\\D+)";break;case"tt":case"t":o="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":o="(\\d{"+l+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":o="(\\d\\d?)";break;case"zzz":o="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":o="([+-]?\\d\\d?)";break;case"/":o="(\\/)";break;default:throw"Invalid date format pattern '"+n+"'."}o&&c.push(o),u.push(d[0])}return _(h.slice(m),c),c.push("$"),r={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:u},a[t]=r},n=function(e,t,i){return e<t||e>i},l=function(e){return e.split(" ").join(" ").toUpperCase()},o=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=l(e[i]);return t},x=function(l,o,r){var a,d,h,c,u,g,f,_,v,b,w,C;l=p(l);var y=r.calendar,S=s(y,o),x=new RegExp(S.regExp).exec(l);if(null===x)return null;var T,k=S.groups,D=null,I=null,O=null,A=null,L=null,R=0,E=0,N=0,M=0,P=null,F=!1;for(a=0,d=k.length;a<d;a++)if(h=x[a+1]){var j=k[a],z=j.length,$=parseInt(h,10);switch(j){case"dd":case"d":if(n(A=$,1,31))return null;break;case"MMM":case"MMMM":if(O=i(y,h,3===z),n(O,0,11))return null;break;case"M":case"MM":if(n(O=$-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(I=z<4?e(y,$):$,n(I,0,9999))return null;break;case"h":case"hh":if(12===(R=$)&&(R=0),n(R,0,11))return null;break;case"H":case"HH":if(n(R=$,0,23))return null;break;case"m":case"mm":if(n(E=$,0,59))return null;break;case"s":case"ss":if(n(N=$,0,59))return null;break;case"tt":case"t":if(!(F=y.PM&&(h===y.PM[0]||h===y.PM[1]||h===y.PM[2]))&&(!y.AM||h!==y.AM[0]&&h!==y.AM[1]&&h!==y.AM[2]))return null;break;case"f":case"ff":case"fff":if(M=$*Math.pow(10,3-z),n(M,0,999))return null;break;case"ddd":case"dddd":if(L=t(y,h,3===z),n(L,0,6))return null;break;case"zzz":if(2!==(c=h.split(/:/)).length||(T=parseInt(c[0],10),n(T,-12,13))||(u=parseInt(c[1],10),n(u,0,59)))return null;P=60*T+(m(h,"-")?-u:u);break;case"z":case"zz":if(n(T=$,-12,13))return null;P=60*T;break;case"g":case"gg":if(!(g=h)||!y.eras)return null;for(g=p(g.toLowerCase()),f=0,_=y.eras.length;f<_;f++)if(g===y.eras[f].name.toLowerCase()){D=f;break}if(null===D)return null}}if(v=new Date,b=(w=y.convert)?w.fromGregorian(v)[0]:v.getFullYear(),null===I?I=b:y.eras&&(I+=y.eras[D||0].offset),null===O&&(O=0),null===A&&(A=1),w){if(null===(v=w.toGregorian(I,O,A)))return null}else if(v.setFullYear(I,O,A),v.getDate()!==A||null!==L&&v.getDay()!==L)return null;return F&&R<12&&(R+=12),v.setHours(R,E,N,M),null!==P&&(C=v.getMinutes()-(P+v.getTimezoneOffset()),v.setHours(v.getHours()+parseInt(C/60,10),C%60)),v}}(),T=function(e,t,i){var s,n=t["-"],l=t["+"];switch(i){case"n -":n=" "+n,l=" "+l;case"n-":a(e,n)?s=["-",e.substr(0,e.length-n.length)]:a(e,l)&&(s=["+",e.substr(0,e.length-l.length)]);break;case"- n":n+=" ",l+=" ";case"-n":m(e,n)?s=["-",e.substr(n.length)]:m(e,l)&&(s=["+",e.substr(l.length)]);break;case"(n)":m(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},i.prototype.findClosestCulture=function(e){return i.findClosestCulture.call(this,e)},i.prototype.format=function(e,t,s){return i.format.call(this,e,t,s)},i.prototype.localize=function(e,t){return i.localize.call(this,e,t)},i.prototype.parseInt=function(e,t,s){return i.parseInt.call(this,e,t,s)},i.prototype.parseFloat=function(e,t,s){return i.parseFloat.call(this,e,t,s)},i.prototype.culture=function(e){return i.culture.call(this,e)},i.addCultureInfo=function(e,t,i){var s={},n=!1;"string"!=typeof e?(i=e,e=this.culture().name,s=this.cultures[e]):"string"!=typeof t?(i=t,n=null==this.cultures[e],s=this.cultures[e]||this.cultures.default):(n=!0,s=this.cultures[t]),this.cultures[e]=d(!0,{},s,i),n&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},i.findClosestCulture=function(e){var t,i,s,n,l,o;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),h(e)){for(var r,a=this.cultures,d=e,c=d.length,u=[],m=0;m<c;m++)s=(e=p(d[m])).split(";"),r=p(s[0]),1===s.length?i=1:0===(e=p(s[1])).indexOf("q=")?(e=e.substr(2),i=parseFloat(e),i=isNaN(i)?0:i):i=1,u.push({lang:r,pri:i});for(u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),m=0;m<c;m++)if(t=a[r=u[m].lang])return t;for(m=0;m<c;m++)for(r=u[m].lang;;){if(-1===(n=r.lastIndexOf("-")))break;if(t=a[r=r.substr(0,n)])return t}for(m=0;m<c;m++)for(l in r=u[m].lang,a)if((o=a[l]).language==r)return o}else if("object"==typeof e)return e;return t||null},i.format=function(e,t,i){var s=this.findClosestCulture(i);return e instanceof Date?e=b(e,t,s):"number"==typeof e&&(e=w(e,t,s)),e},i.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},i.parseDate=function(e,t,i){var s,n,l,o,r,a;if(i=this.findClosestCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(o=0,r=t.length;o<r&&(!(a=t[o])||!(s=x(e,a,i)));o++);}else for(n in l=i.calendar.patterns)if(s=x(e,l[n],i))break;return s||null},i.parseInt=function(e,t,s){return g(i.parseFloat(e,t,s))},i.parseFloat=function(e,t,i){var o,r,a,d,h,c,u,m,g,f,_;"number"!=typeof t&&(i=t,t=10);var v=this.findClosestCulture(i),b=NaN,w=v.numberFormat;if(e.indexOf(v.numberFormat.currency.symbol)>-1&&(e=(e=e.replace(v.numberFormat.currency.symbol,"")).replace(v.numberFormat.currency["."],v.numberFormat["."])),e=p(e),n.test(e))b=parseFloat(e);else if(!t&&s.test(e))b=parseInt(e,16);else{var C=T(e,w,w.pattern[0]),y=C[0],S=C[1];""===y&&"(n)"!==w.pattern[0]&&(y=(C=T(e,w,"(n)"))[0],S=C[1]),""===y&&"-n"!==w.pattern[0]&&(y=(C=T(e,w,"-n"))[0],S=C[1]),y=y||"+",(a=S.indexOf("e"))<0&&(a=S.indexOf("E")),a<0?(r=S,o=null):(r=S.substr(0,a),o=S.substr(a+1)),c=w["."],(u=r.indexOf(c))<0?(d=r,h=null):(d=r.substr(0,u),h=r.substr(u+c.length)),m=w[","],d=d.split(m).join(""),g=m.replace(/\u00A0/g," "),m!==g&&(d=d.split(g).join("")),f=y+d,null!==h&&(f+="."+h),null!==o&&(f+="e"+((_=T(o,w,"-n"))[0]||"+")+_[1]),l.test(f)&&(b=parseFloat(f))}return b},i.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this),
/*! JsRender v1.0pre: http://github.com/BorisMoore/jsrender */
function(e,t,i){"use strict";function s(e,t){t&&t.onError&&!1===t.onError(e)||(this.name="JsRender Error",this.message=e||"JsRender error")}function n(e,t){var i;for(i in e=e||{},t)e[i]=t[i];return e}function l(e,t,i){return(!J.rTag||arguments.length)&&(k=e?e.charAt(0):k,D=e?e.charAt(1):D,I=t?t.charAt(0):I,O=t?t.charAt(1):O,e="\\"+k+"(\\"+(A=i||A)+")?\\"+D,t="\\"+I+"\\"+O,x="(?:(?:(\\w+(?=[\\/\\s\\"+I+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+I+"]|\\"+I+"(?!\\"+O+"))*?)",J.rTag=x+")",x=new RegExp(e+x+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),T=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[k,D,I,O,A]}function o(e,t){t||(t=e,e=i);var s,n,l,o,r=this,a=!t||"root"===t;if(e){if(!(o=r.type===t?r:i))if(s=r.views,r._.useKey){for(n in s)if(o=s[n].get(e,t))break}else for(n=0,l=s.length;!o&&n<l;n++)o=s[n].get(e,t)}else if(a)for(;r.parent.parent;)o=r=r.parent;else for(;r&&!o;)o=r.type===t?r:i,r=r.parent;return o}function r(){var e=this.get("item");return e?e.index:i}function a(e){var t,s=this,l=(s.ctx||{})[e];return(l=l===i?s.getRsc("helpers",e):l)&&"function"==typeof l&&(t=function(){return l.apply(s,arguments)},n(t,l)),t||l}function d(e,t){for(var s=this,n=G[e],l=n&&n[t];l===i&&s;)l=(n=s.tmpl[e])&&n[t],s=s.parent;return l}function h(e,t,s,n,l,h,c,u){var m,p,g,f="array"===t,_={key:0,useKey:f?0:1,id:""+V++,onRender:u,bnds:{}},v={data:n,tmpl:l,content:c,views:f?[]:{},parent:s,ctx:e,type:t,get:o,getIndex:r,getRsc:d,hlp:a,_:_,_is:"view"};return s&&(m=s.views,(p=s._).useKey?(m[_.key="_"+p.useKey++]=v,g=p.tag,_.bnd=f&&(!g||!!g._.bnd&&g)):m.splice(_.key=v.index=h!==i?h:m.length,0,v),v.ctx=e||s.ctx),v}function c(e){var t,i,s,n,l;for(t in q)if((l=(n=q[t]).compile)&&(i=e[t+"s"]))for(s in i)i[s]=l(s,i[s],e,t,n)}function u(e,t){var i,s=X.wrapMap||{},l=n({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:p},t);return t.htmlTag||(i=j.exec(e),l.htmlTag=i?i[1].toLowerCase():""),(i=s[l.htmlTag])&&i!==s.div&&(l.markup=y.trim(l.markup),l._elCnt=!0),l}function m(e,t){var s=e+"s";G[s]=function n(l,o,r){var a,d,h,c;if(l&&""+l!==l&&!l.nodeType&&!l.markup){for(h in l)n(h,l[h],o);return G}return c=r?r[s]=r[s]||{}:n,o===i&&(o=l,l=i),d=t.compile,(a=J.onBeforeStoreItem)&&(d=a(c,l,o,d)||d),l?""+l===l&&(null===o?delete c[l]:c[l]=d?o=d(l,o,r,e,t):o):o=d(i,o),o&&(o._is=e),(a=J.onStoreItem)&&a(c,l,o,d),o},q[e]=t}function p(e,t,s,n,l,o){var r,a,d,c,u,m,p,f,_,v,b,C,S,x=this,T=!x.attr||"html"===x.attr,k="";if(!0===n&&(p=!0,n=0),x.tag?(f=x,v=(x=x.tag)._,C=x.tagName,S=f.tmpl,t=w(t,x.ctx),_=f.content,!1===f.props.link&&((t=t||{}).link=!1),s=s||f.view,e=e===i?s:e):S=x.jquery&&(x[0]||g('Unknown template: "'+x.selector+'"'))||x,S&&(!s&&e&&"view"===e._is&&(s=e),s&&(_=_||s.content,o=o||s._.onRender,e===s&&(e=s.data,l=!0),t=w(t,s.ctx)),s&&s.data!==i||((t=t||{}).root=e),S.fn||(S=K[S]||K(S)),S)){if(b=o=!1!==(t&&t.link)&&T&&o,!0===o&&(b=i,o=s._.onRender),y.isArray(e)&&!l)for(c=p?s:n!==i&&s||h(t,"array",s,e,S,n,_,o),r=0,a=e.length;r<a;r++)u=h(t,"item",c,d=e[r],S,(n||0)+r,_,o),m=S.fn(d,u,G),k+=c._.onRender?c._.onRender(m,u):m;else c=p?s:h(t,C||"data",s,e,S,n,_,o),v&&!x.flow&&(c.tag=x),k+=S.fn(e,c,G);return b?b(k,c):k}return""}function g(e){if(X.debugMode)throw new G.sub.Error(e)}function f(e){g("Syntax error\n"+e)}function _(e,t,i,s){function n(t){(t-=d)&&c.push(e.substr(d,t).replace(E,"\\n"))}function l(t){t&&f('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}var o,r=t&&t.allowCode,a=[],d=0,h=[],c=a,u=[,,,a];return e=e.replace(M,"\\$1"),l(h[0]&&h[0][3].pop()[0]),e.replace(x,function(t,a,m,p,g,_,v,w,C,y,S,x){_&&(g=":",p="html");var T,k,D=a&&[],I="",O="",A="",L=!(y=y||i)&&!g&&!v;m=m||g,n(x),d=x+t.length,w?r&&c.push(["*","\n"+C.replace(N,"$1")+"\n"]):m?("else"===m&&(F.test(C)&&f('for "{{else if expr}}" use "{{else expr}}"'),D=u[6],u[7]=e.substring(u[7],x),u=h.pop(),c=u[3],L=!0),C&&(I=b(C=C.replace(E," "),D).replace(P,function(e,t,i){return t?A+=i+",":O+=i+",",""})),O=O.slice(0,-1),I=I.slice(0,-1),T=O&&O.indexOf("noerror:true")+1&&O||"",o=[m,p||!!s||"",I,L&&[],'params:"'+C+'",props:{'+O+"}"+(A?",ctx:{"+A.slice(0,-1)+"}":""),T,D||0],c.push(o),L&&(h.push(u),(u=o)[7]=d)):S&&(l(S!==(k=u[0])&&"else"!==k&&S),u[7]=e.substring(u[7],x),u=h.pop()),l(!u&&S),c=u[3]}),n(e.length),(d=a[a.length-1])&&l(""+d!==d&&+d[7]===d[7]&&d[0]),v(a,t||e,i)}function v(e,i,s){var n,l,o,r,a,d,h,c,m,p,g,_,b,w,C,y,S,x,T,k,D,I,O,A,L=0,R="",N="",M={},P=e.length;for(""+i===i?(w=s?'data-link="'+i.replace(E," ").slice(1,-1)+'"':i,i=0):(w=i.tmplName||"unnamed",i.allowCode&&(M.allowCode=!0),i.debug&&(M.debug=!0),g=i.bnds,b=i.tmpls),n=0;n<P;n++)if(""+(l=e[n])===l)R+='\nret+="'+l+'";';else if("*"===(o=l[0]))R+=""+l[1];else{if(r=l[1],a=l[2],S=l[3],d=l[4],N=l[5],x=l[7],(D="else"===o)||(L=0,g&&(_=l[6])&&(L=g.push(_))),(I=":"===o)?(r&&(o="html"===r?">":r+o),N&&(N="try{var "+(O="prm"+n)+"=["+a+"][0];}catch(e){"+O+'="";}\n',a=O)):(S&&((C=u(x,M)).tmplName=w+"/"+o,v(S,C),b.push(C)),D||(y=o,k=R,R="",n),T=(T=e[n+1])&&"else"===T[0]),d+=",args:["+a+"]}",I&&_||r&&">"!==o){if((A=new Function("data,view,j,u"," // "+w+" "+L+" "+o+"\n"+N+"return {"+d+";")).paths=_,A._ctxs=o,s)return A;p=!0}if(R+=I?"\n"+(_?"":N)+(s?"return ":"ret+=")+(p?(p=!0,'c("'+r+'",view,'+(_?(g[L-1]=A,L):"{"+d)+");"):">"===o?(c=!0,"h("+a+");"):(m=!0,"(v="+a+")!="+(s?"=":"")+'u?v:"";')):(h=!0,"{tmpl:"+(S?b.length:"0")+","+d+","),y&&!T){if(R="["+R.slice(0,-1)+"]",(s||_)&&(R=new Function("data,view,j,u"," // "+w+" "+L+" "+y+"\nreturn "+R+";"),_&&((g[L-1]=R).paths=_),R._ctxs=o,s))return R;R=k+'\nret+=t("'+y+'",view,this,'+(L||R)+");",_=0,y=0}}R="// "+w+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(m?",v":"")+(h?",t=j._tag":"")+(p?",c=j._cnvt":"")+(c?",h=j.converters.html":"")+(s?";\n":',ret="";\n')+(X.tryCatch?"try{\n":"")+(M.debug?"debugger;":"")+R+(s?"\n":"\nreturn ret;\n")+(X.tryCatch?"\n}catch(e){return j._err(e);}":"");try{R=new Function("data,view,j,u",R)}catch(e){f("Compiled template code:\n\n"+R)}return i&&(i.fn=R),R}function b(e,t){var i,s,n={},l={0:-1},o=0,r=!1,a=!1;return(e+" ").replace(R,function(d,h,c,u,m,p,g,_,v,b,w,C,y,S,x,T,k,D,I){if(m=m||"",c=c||h||w,u=u||_,t&&x&&t.push({_jsvOb:I.slice(l[o-1]+1,D+1)}),v=v||T||"",!p)return a?(a=!C)?d:'"':r?(r=!y)?d:'"':(c?(o++,l[o]=D,c):"")+(k?o?"":i?(i=s=!1,"\b"):",":g?(o&&f(e),i=u,s="~"===u.charAt(0),"\b"+u+":"):u?u.split("^").join(".").replace(L,function(e,i,n,l,o,r,a){if(i&&(t&&!s&&t.push(u),"."!==i)){var d=(n?'view.hlp("'+n+'")':l?"view":"data")+(a?(o?"."+o:n||l?"":"."+i)+(r||""):(a=n?"":l?o||"":i,""));return"view.data"===(d+=a?"."+a:"").slice(0,9)?d.slice(5):d}return e})+(v?(n[++o]=!0,v):m):m||(S?(n[o--]=!1,S+(v?(n[++o]=!0,v):"")):b?(n[o]||f(e),","):h?"":(a=C,r=y,'"')));f(e)})}function w(e,t){return e&&e!==t?t?n(n({},t),e):e:t&&n({},t)}function C(e){return U[e]}if(!(t&&t.views||e.jsviews)){var y,S,x,T,k="{",D="{",I="}",O="}",A="^",L=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,R=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*((\))(?=\s*\.|\s*\^)|\)|\])([([]?))|(\s+)/g,E=/\s*\n/g,N=/\\(['"])/g,M=/([\\'"])/g,P=/\x08(~)?([^\x08]+)\x08/g,F=/^if\s/,j=/<(\w+)[>\s]/,z=/[<"'&]/g,$=/[><"'&]/g,H=0,V=0,U={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;"},B="data-jsv-tmpl",W={},q={template:{compile:function s(n,l,o,r,a,d){function h(i){if(""+i===i||i.nodeType>0){try{p=i.nodeType>0?i:!T.test(i)&&t&&t(e.document).find(i)[0]}catch(e){}return p&&(i=p.getAttribute(B),n=n||i,(i=K[i])||(n=n||"_"+H++,p.setAttribute(B,n),i=K[n]=s(n,p.innerHTML,o,r,a,d))),i}}var m,p;return m=h(l=l||""),(d=d||(l.markup?l:{})).tmplName=n,o&&(d._parentTmpl=o),!m&&l.markup&&(m=h(l.markup))&&m.fn&&(m.debug!==l.debug||m.allowCode!==l.allowCode)&&(m=m.markup),m!==i?(n&&!o&&(W[n]=function(){return l.render.apply(l,arguments)}),m.fn||l.fn?m.fn&&(l=n&&n!==m.tmplName?w(d,m):m):_(m,l=u(m,d)),c(d),l):void 0}},tag:{compile:function(e,t,i){var s,n;return"function"==typeof t?t={depends:t.depends,render:t}:((n=t.template)&&(t.template=""+n===n?K[n]||K(n):n),!1!==t.init&&((s=t.init=t.init||function(){}).prototype=t,(s.prototype=t).constructor=s)),i&&(t._parentTmpl=i),t}},helper:{},converter:{}},G={jsviews:"v1.0pre",render:W,View:h,settings:{delimiters:l,debugMode:!0,tryCatch:!0},sub:{Error:s,tmplFn:_,parse:b,extend:n,error:g,syntaxError:f},_cnvt:function(e,t,i){var s,n,l,o=+i===i&&i,r=t.linkCtx;return o&&(i=(o=t.tmpl.bnds[o-1])(t.data,t,G)),l=i.args[0],(e||o)&&((n=r&&r.tag||{_:{inline:!r},tagName:e+":",flow:!0,_is:"tag"})._.bnd=o,r&&(r.tag=n,n.linkCtx=r,i.ctx=w(i.ctx,r.view.ctx)),n.tagCtx=i,i.view=t,n.ctx=i.ctx||{},delete i.ctx,t._.tag=n,(e="true"!==e&&e)&&((s=t.getRsc("converters",e))||g("Unknown converter: {{"+e+":"))&&(n.depends=s.depends,l=s.apply(n,i.args)),l=o&&t._.onRender?t._.onRender(l,t,o):l),l},_tag:function(e,t,s,l){var o,r,a,d,h,c,u,m,f,_,v,b,C,y="",S=+l===l&&l,x=t.linkCtx||0,T=t.ctx,k=s||t.tmpl,D=t._;for("tag"===e._is&&(e=(r=e).tagName),S&&(l=(b=k.bnds[S-1])(t.data,t,G)),u=l.length,r=r||x.tag,c=0;c<u;c++)v=(f=l[c]).tmpl,v=f.content=v&&k.tmpls[v-1],s=f.props.tmpl,c||s&&r||(C=t.getRsc("tags",e)||g("Unknown tag: {{"+e+"}}")),n(f,{tmpl:s=""+(s=s||!c&&C.template||v)===s?t.getRsc("templates",s)||K(s):s,render:p,index:c,view:t,ctx:w(f.ctx,T)}),r||(C.init?(r=new C.init(f,x,T)).attr=r.attr||C.attr||i:r={render:C.render},r._={inline:!x},x&&(x.attr=r.attr=x.attr||r.attr,x.tag=r,r.linkCtx=x),(r._.bnd=b||x)&&(r._.arrVws={}),r.tagName=e,r.parent=h=T&&T.tag,r._is="tag"),D.tag=r,f.tag=r,r.tagCtxs=l,r.rendering={},r.flow||(a=(_=f.ctx=f.ctx||{}).parentTags=T&&w(_.parentTags,T.parentTags)||{},h&&(a[h.tagName]=h),_.tag=r);for(c=0;c<u;c++)f=r.tagCtx=l[c],r.ctx=f.ctx,(o=r.render)&&(m=o.apply(r,f.args)),y+=m!==i?m:f.tmpl?f.render():"";return delete r.rendering,r.tagCtx=r.tagCtxs[0],r.ctx=r.tagCtx.ctx,r._.inline&&(d=r.attr)&&"html"!==d&&(y="text"===d?Y.html(y):""),S&&t._.onRender?t._.onRender(y,t,S):y},_err:function(e){return X.debugMode?"Error: "+(e.message||e)+". ":""}};for(S in(s.prototype=new Error).constructor=s,r.depends=function(){return[this.get("item"),"index"]},q)m(S,q[S]);var K=G.templates,Y=G.converters,Q=(G.helpers,G.tags),J=G.sub,X=G.settings;t?(y=t).fn.render=p:(y=e.jsviews={}).isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},y.render=W,y.views=G,y.templates=K=G.templates,Q({else:function(){},if:{render:function(e){var t=this;return t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(e,t,i){for(var s,n,l=0;(s=this.tagCtxs[l])&&s.args.length;l++)if(n=!(s=s.args[0])!=!i[l].args[0],s||n)return n;return!1},flow:!0},for:{render:function(e){var t=this,s=t.tagCtx,n=!arguments.length,l="",o=n||0;return t.rendering.done||(n?l=i:e!==i&&(l+=s.render(e),o+=y.isArray(e)?e.length:1),(t.rendering.done=o)&&(t.selected=s.index)),l},onUpdate:function(){},onArrayChange:function(e,t){var i,s=t.change;if(this.tagCtxs[1]&&("insert"===s&&e.target.length===t.items.length||"remove"===s&&!e.target.length||"refresh"===s&&!t.oldItems.length!=!e.target.length))this.refresh();else for(i in this._.arrVws)(i=this._.arrVws[i]).data===e.target&&i._.onArrayChange.apply(i,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),Y({html:function(e){return e!=i?String(e).replace($,C):""},attr:function(e){return e!=i?String(e).replace(z,C):null===e?null:""},url:function(e){return e!=i?encodeURI(String(e)):null===e?null:""}}),l()}}(this,this.jQuery),
/*!
*  filename: ej.data.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";var n,l,o,r,a,d,h,c,u;t.DataManager=function(i,n,l){if(!(this instanceof t.DataManager))return new t.DataManager(i,n,l);i||(i=[]),"string"==typeof(l=l||i.adaptor)&&(l=new t[l]);var o=[],r=this;return i instanceof Array?o={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),o={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,jsonp:i.jsonp,dataType:i.dataType,offline:i.offline!==s?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||P(i))&&(o={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(o={url:i,offline:!1,dataType:"json",json:[]}),o.requiresFormat!==s||t.support.cors||(o.requiresFormat=!!c(o.crossDomain)||o.crossDomain),o.dataType===s&&(o.dataType="json"),this.dataSource=o,this.defaultQuery=n,o.url&&o.offline&&!o.json.length?(this.isDataAvailable=!1,this.adaptor=l||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(n||t.Query()).done(function(e){r.dataSource.offline=!0,r.isDataAvailable=!0,o.json=e.result,r.adaptor=new t.JsonAdaptor})):this.adaptor=o.offline?new t.JsonAdaptor:new t.ODataAdaptor,!o.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(o.jsonp="callback"),this.adaptor=l||this.adaptor,o.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,o.timeTillExpiration,o.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,n,l,o){var r,d,h;return"function"==typeof i&&(o=l,l=n,n=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||u("DataManager - executeQuery() : A query is required to execute"),(r=e.Deferred()).then(n,l,o),d={query:i},this.dataSource.offline||this.dataSource.url==s?t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?a(function(){this._localQueryProcess(i,d,r)},this):this._localQueryProcess(i,d,r):(h=this.adaptor.processQuery(this,i),t.isNullOrUndefined(h.url)?a(function(){d=this._getDeferedArgs(i,h,d),r.resolveWith(this,[d])},this):this._makeRequest(h,r,d,i)),r.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=j(e._fromTable,i.result,this),i.getKnockoutModel=z(i.result),i},executeLocal:function(i){var s,n;if(this.defaultQuery||i instanceof t.Query||u("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||u("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery,s=this.adaptor.processQuery(this,i),i._subQuery){var l=i._subQuery._fromTable,o=i._subQuery._lookup,r=i._requiresCount?s.result:s;for(o&&o instanceof Array&&m(i._subQuery._fKey,l,r,o,i._subQuery._key),n=0;n<r.length;n++)r[n][l]instanceof Array&&(r[n]=e.extend({},r[n]),r[n][l]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(r[n][l].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,n,l){var o,r=!!l._subQuerySelector,a=h(function(e){n.error=e,s.rejectWith(this,[n])},this),c=h(function(e,t,i,o,a,d,h){r||(n.xhr=i,n.count=parseInt(t,10),n.result=e,n.request=o,n.aggregates=d,n.getTableModel=j(l._fromTable,e,this),n.getKnockoutModel=z(e),n.actual=a,n.virtualSelectRecords=h,s.resolveWith(this,[n]))},this),u=h(function(t,i){var s,o,d=e.Deferred(),h={parent:n};return l._subQuery._isChild=!0,s=this.adaptor.processQuery(this,l._subQuery,t?this.adaptor.processResponse(t):i),o=this._makeRequest(s,d,h,l._subQuery),r||d.then(function(e){t&&(m(l._subQuery._fKey,l._subQuery._fromTable,t,e,l._subQuery._key),c(t))},a),o},this),p=d(function(e,i,s,n){-1==s.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var o=this.adaptor.processResponse(e,this,l,s,n),a=0,d=null,h=e.virtualSelectRecords;l._requiresCount&&(a=o.count,d=o.aggregates,o=o.result),l._subQuery?r||u(o):c(o,a,s,n,e,d,h)},this),g=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:h(this._beforeSend,this),processData:!1,success:p,error:a},i);return"async"in this.dataSource&&(g.async=this.dataSource.async),g=e.ajax(g),r&&((o=l._subQuerySelector.call(this,{query:l._subQuery,parent:l}))&&o.length?(g=e.when(g,u(null,o))).then(d(function(e,t,i){var s,n=this.adaptor.processResponse(e[0],this,l,e[2],i[0]),o=0;l._requiresCount&&(o=n.count,n=n.result),s=this.adaptor.processResponse(t[0],this,l._subQuery,t[2],i[1]),o=0,l._subQuery._requiresCount&&(o=s.count,s=s.result),m(l._subQuery._fKey,l._subQuery._fromTable,n,s,l._subQuery._key),r=!1,c(n,o,e[2])},this),a):r=!1),g},_beforeSend:function(e,t){var i,s,n,l;for(this.adaptor.beforeSend(this,e,t),i=this.dataSource.headers,n=0;i&&n<i.length;n++)for(l in s=[],i[n])s.push(l),e.setRequestHeader(l,i[n][l])},saveChanges:function(i,s,n,l){var o,r,a;return n instanceof t.Query&&(l=n,n=null),o={url:n,key:s||this.dataSource.key},r=this.adaptor.batchRequest(this,i,o,l),this.dataSource.offline?r:(a=e.Deferred(),e.ajax(e.extend({beforeSend:h(this._beforeSend,this),success:d(function(e,t,s,n){a.resolveWith(this,[this.adaptor.processResponse(e,this,null,s,n,i)])},this),error:function(e){a.rejectWith(this,[{error:e}])}},r)),a.promise())},insert:function(i,s,n){var l,o;return i=w.replacer(i),s instanceof t.Query&&(n=s,s=null),l=this.adaptor.insert(this,i,s,n),this.dataSource.offline?l:(o=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:w.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(w.parseJson(e),this,null,s,n),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},l)),o.promise())},remove:function(i,s,n,l){var o,r;return"object"==typeof s&&(s=s[i]),n instanceof t.Query&&(l=n,n=null),o=this.adaptor.remove(this,i,s,n,l),this.dataSource.offline?o:(r=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:w.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(w.parseJson(e),this,null,s,n),r.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){r.rejectWith(this,[{error:e,dataManager:this}])}},o)),r.promise())},update:function(i,s,n,l){var o,r;return s=w.replacer(s),n instanceof t.Query&&(l=n,n=null),o=this.adaptor.update(this,i,s,n,l),this.dataSource.offline?o:(r=e.Deferred(),e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,n){try{t.isNullOrUndefined(e)?e=[]:w.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(w.parseJson(e),this,null,s,n),r.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){r.rejectWith(this,[{error:e,dataManager:this}])}},o)),r.promise())},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html()));var s=(i=i.jquery?i[0]:i).tagName.toLowerCase();return"table"!==s&&u("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var m=function(e,i,s,n,l){var o,r,a={};for(n.result&&(n=n.result),n.GROUPGUID&&u("ej.DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)(a[r=t.getObject(e,n[o])]||(a[r]=[])).push(n[o]);for(o=0;o<s.length;o++)s[o][i]=a[t.getObject(l||e,s[o])]},p="application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",g="multipart/mixed",f="--changeset_",_="batch_",v="Content-Type: application/http\nContent-Transfer-Encoding: binary ",b="Content-Type: application/json; charset=utf-8 ",w={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,w.jsonReviver):e instanceof Array?w.iterateAndReviveArray(e):"object"===t&&w.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?w.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?w.parseJson(e[t]):w.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var i in e)i.startsWith("__")||("object"==typeof(t=e[i])?t instanceof Array?w.iterateAndReviveArray(t):w.iterateAndReviveJson(t):e[i]=w.jsonReviver(i,t))},jsonReviver:function(e,t){var i,s,n=t;if("string"==typeof t){if(i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t))return w.replacer(new Date(parseInt(i[1])));/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=w.replacer(new Date(t)),isNaN(t)&&(s=n.split(/[^0-9]/),t=w.replacer(new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5]))))}return t},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e){return t.isPlainObject(e)?w.jsonReplacer(e):e instanceof Array?w.arrayReplacer(e):e instanceof Date?w.jsonReplacer({val:e}).val:e},jsonReplacer:function(e){var i;for(var s in e)(i=e[s])instanceof Date&&(e[s]=new Date(+i+36e5*t.serverTimezoneOffset));return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=w.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=w.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=w.isJson,t.parseJSON=w.parseJson,t.dateParse=!0,t.isGUID=w.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):u("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,n){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeQuery(this,i,s,n):u("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeLocal(this):u("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,n){i=(i||t.FilterOperators.equal).toLowerCase();var l=null;return"string"==typeof e?l=new t.Predicate(e,i,s,n):e instanceof t.Predicate?l=e:u("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:l}),this},search:function(e,i,s,n){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):n=i=[],"boolean"==typeof s&&(n=s,s=null),(s=s||t.FilterOperators.contains).length<3&&(s=t.data.operatorSymbols[s]);var l=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:n,comparer:l}}),this},sortBy:function(e,i,s){var n,l,o,r,a=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(o=0;o<e.length;o++)this.sortBy(e[o],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(a="custom"),i&&"string"!=typeof i||(a=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s)for(n=C(this.queries,"onSortBy"),o=0;o<n.length;o++)if("string"==typeof(l=n[o].e.fieldName)){if(l===e)return this}else if(l instanceof Array)for(r=0;r<l.length;r++)if(l[r]===e||e.toLowerCase()===l[r]+" desc")return this;return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:a}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return("number"!=typeof e||"number"!=typeof t)&&u("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&u("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&u("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||u("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||u("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},init:function(){},extend:function(t){var i,s,n=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};for(s in(n.prototype=new this.type).type=n,i=n.prototype.base={},t)n.prototype[s]&&(i[s]=n.prototype[s]);return e.extend(!0,n.prototype,t),n},processQuery:function(){},processResponse:function(e){return e.d?e.d:e},convertToQueryString:function(t){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,l,o,r,a,d,h=C(t.queries,"onSortBy"),u=C(t.queries,"onGroup"),m=C(t.queries,"onWhere"),p=C(t.queries,"onSearch"),g=C(t.queries,"onAggregates"),f=y(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),_=t._params,v=e.dataSource.url,b=null,w=this.options,x={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};for(f.onPage?(s=f.onPage,l=((l=n(s.pageIndex,t))-1)*(b=n(s.pageSize,t))):f.onRange&&(l=(s=f.onRange).start,b=s.end-s.start),o=0;o<h.length;o++)s=n(h[o].e.fieldName,t),x.sorted.push(S(this,"onEachSort",{name:s,direction:h[o].e.direction},t));for(i&&((s=this.getFiltersFrom(i,t))&&x.filters.push(S(this,"onEachWhere",s.toJSON(),t))),o=0;o<m.length;o++)for(a in x.filters.push(S(this,"onEachWhere",m[o].e.toJSON(),t)),x.filters[o])c(x[a])&&delete x[a];for(o=0;o<p.length;o++)s=p[o].e,x.searches.push(S(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(o=0;o<u.length;o++)x.grouped.push(n(u[o].e.fieldName,t));for(o=0;o<g.length;o++)s=g[o].e,x.aggregates.push({type:s.type,field:n(s.field,t)});for(a in(r={})[w.from]=t._fromTable,w.expand&&(r[w.expand]=t._expands),r[w.select]=f.onSelect?S(this,"onSelect",n(f.onSelect.fieldNames,t),t):"",r[w.count]=t._requiresCount?S(this,"onCount",t._requiresCount,t):"",r[w.search]=x.searches.length?S(this,"onSearch",x.searches,t):"",r[w.skip]=f.onSkip?S(this,"onSkip",n(f.onSkip.nos,t),t):"",r[w.take]=f.onTake?S(this,"onTake",n(f.onTake.nos,t),t):"",r[w.where]=x.filters.length||x.searches.length?S(this,"onWhere",x.filters,t):"",r[w.sortBy]=x.sorted.length?S(this,"onSortBy",x.sorted,t):"",r[w.group]=x.grouped.length?S(this,"onGroup",x.grouped,t):"",r[w.aggregates]=x.aggregates.length?S(this,"onAggregates",x.aggregates,t):"",r.param=[],S(this,"addParams",{dm:e,query:t,params:_,reqParams:r}),r)(c(r[a])||""===r[a]||0===r[a].length)&&delete r[a];return w.skip in r&&w.take in r||null===b||(r[w.skip]=S(this,"onSkip",l,t),r[w.take]=S(this,"onTake",b,t)),d=this.pvt,this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(r),url:v,ejPvtData:d,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(r,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?v.replace(/\/*$/,s):v,ejPvtData:d})},convertToQueryString:function(t,i,s){return s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,i,n,l,o,r){var a,d,h,c,u=o.ejPvtData||{},m=e.groupDs;if(l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return n._requiresCount?{result:[],count:0}:[];if((a=JSON.parse(o.data))&&"batch"===a.action&&e.added)return r.added=e.added,r;if(e.d&&(e=e.d),u&&u.aggregates&&u.aggregates.length){var p,g=u.aggregates,f={},_={};for(("count"in e&&(f.count=e.count),e.result&&(f.result=e.result),e.aggregate&&(e=e.aggregate),h=0);h<g.length;h++)(p=t.aggregates[g[h].type])&&(_[g[h].field+" - "+g[h].type]=p(e,g[h].field));f.aggregates=_,e=f}if(u&&u.groups&&u.groups.length){for((d=u.groups,f={},"count"in e&&(f.count=e.count),e.aggregates&&(f.aggregates=e.aggregates),e.result&&(e=e.result),h=0);h<d.length;h++)c=R(d[h],n.queries),t.isNullOrUndefined(m)||(m=t.group(m,d[h],null,c)),e=t.group(e,d[h],u.aggregates,c,null,m);return f.count!=s?f.result=e:f=e,f}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var n={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:n}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n)}},beforeSend:function(){},insert:function(e,t,i,s){var n={value:t,table:i,action:"insert"};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:n}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(n)}},remove:function(e,t,i,s,n){var l={key:i,keyColumn:t,table:s,action:"remove"};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:l}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(l)}},update:function(e,t,i,s,n){var l={value:i,action:"update",keyColumn:t,key:i[t],table:s};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:l}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(l)}},getFiltersFrom:function(e,i){var s;e instanceof Array&&e.length||u("ej.SubQuery: Array of key values required");var n,l=i._fKey,o=l,r=i._key,a=[],d="object"!=typeof e[0];for("object"!=typeof e[0]&&(o=null),s=0;s<e.length;s++)n=d?e[s]:t.pvt.getObject(r||o,e[s]),a.push(new t.Predicate(l,"==",n));return t.Predicate.or(a)},addParams:function(e){var t,i,s=e.dm,n=e.query,l=e.params,o=e.reqParams;for(o.params={},t=0;i=l[t];t++)o[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),o[i.key]=i.value,i.fn&&(o[i.key]=i.fn.call(n,i.key,n,s)),o.params[i.key]=o[i.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var n=t.UrlAdaptor.prototype.processQuery(e,i,s),l=t.parseJSON(n.data),o={};return o.value=l,S(this,"addParams",{dm:e,query:i,params:i._params,reqParams:o}),{data:JSON.stringify(o),url:n.url,ejPvtData:n.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t,i,s,n,l=e.dm,o=e.query,r=e.params,a=e.reqParams;for(a.params={},t=0;i=r[t];t++)a[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),s=i.key,n=i.value,i.fn&&(n=i.fn.call(o,i.key,o,l)),a[s]=n,a.params[s]=a[s]}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){var n,l;t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor"),n={keys:[],results:[]},window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(n)),l=this.guidId,t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(l)),s=[],n=0;n<e.results.length;n++)e.results[n].timeStamp=new Date-new Date(e.results[n].timeStamp),new Date-new Date(e.results[n].timeStamp)>i&&s.push(n);for(n=0;n<s.length;n++)e.results.splice(s[n],1),e.keys.splice(s[n],1);window.localStorage.removeItem(l),window.localStorage.setItem(l,JSON.stringify(e))},i)},generateKey:function(e,t){var i,s,n,l,o=C(t.queries,"onSortBy"),r=C(t.queries,"onGroup"),a=C(t.queries,"onWhere"),d=C(t.queries,"onSearch"),h=(C(t.queries,"onPage"),y(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),c=(t._params,e);for(h.onPage&&(c+=h.onPage.pageIndex),o.forEach(function(e){c+=e.e.direction+e.e.fieldName}),r.forEach(function(e){c+=e.e.fieldName}),d.forEach(function(e){c+=e.e.searchKey}),i=0;i<a.length;i++)if((s=a[i]).e.isComplex){for((n=t.clone()).queries=[],l=0;l<s.e.predicates.length;l++)n.queries.push({fn:"onWhere",e:s.e.predicates[l],filter:t.queries.filter});c+=s.e.condition+this.generateKey(e,n)}else c+=s.e.field+s.e.operator+s.e.value;return c},processQuery:function(e,i){var s,n,l=this.generateKey(e.dataSource.url,i);return window.localStorage&&(s=t.parseJSON(window.localStorage.getItem(this.guidId))),null==(n=s?s.results[s.keys.indexOf(l)]:null)||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):n},processResponse:function(i,s,n,l,o,r){var a;if(this._insertAction||o&&this.cacheAdaptor.options.batch&&o.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,n,l,o,r);i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0));var d=this.generateKey(s.dataSource.url,n),h={};for(window.localStorage&&(h=t.parseJSON(window.localStorage.getItem(this.guidId))),-1!=(a=e.inArray(d,h.keys))&&(h.results.splice(a,1),h.keys.splice(a,1)),h.results[h.keys.push(d)-1]={keys:d,result:i.result,timeStamp:new Date,count:i.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var C=function(e,t){return e.filter(function(e){return e.fn===t})||[]},y=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},S=function(e,t,i,s){if(e[t]){var n=e[t](i,s);c(n)||(i=n)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},onPredicate:function(e,i,s){var n,l,o,r="",a=e.value,d=typeof a,h=this._p(e.field);return a instanceof Date&&(a="datetime'"+w.replacer(a).toJSON()+"'"),"string"===d&&(a="'"+a+"'",s&&(h="cast("+h+", 'Edm.String')"),t.isGUID(a)&&(l="guid"),e.ignoreCase&&(l||(h="tolower("+h+")"),a=a.toLowerCase())),(n=t.data.odBiOperator[e.operator])?(r+=h,r+=n,l&&(r+=l),r+a):(n=t.data.odUniOperator[e.operator])&&"string"===d?("substringof"===n&&(o=a,a=h,h=o),r+=n+"(",r+=h+",",l&&(r+=l),r+(a+")")):""},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){var i,s;for(0===e.fields.length&&u("Query() - Search : oData search requires list of field names to search"),i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t,i=[];if(e.name instanceof Array)for(t=0;t<e.name.length;t++)i.push(this._p(e.name[t]));else i.push(this._p(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",g),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,n,l,o,r){var a,d,h,u,m,p,g,f,_,v;if(!t.isNullOrUndefined(i.d)&&(a=n&&n._requiresCount?i.d.results:i.d,!t.isNullOrUndefined(a)))for(_=0;_<a.length;_++)t.isNullOrUndefined(a[_].__metadata)||delete a[_].__metadata;if(d=o&&o.ejPvtData,l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return n._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(h=(h=l.getResponseHeader("Content-Type")).substring(h.indexOf("=batchresponse")+1),(i=i.split(h)).length<2)return;for(i=i[1],p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(p[0],""),g=p[1],_=(i=i.split(g)).length;_>-1;_--)/\bContent-ID:/i.test(i[_])&&/\bHTTP.+201/.test(i[_])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[_])[1]),r.added[u]&&(m=w.parseJson(/^\{.+\}/m.exec(i[_])[0]),e.extend(r.added[u],this.processResponse(m))));return r}var b=l&&l.getResponseHeader("DataServiceVersion"),C=null,y={};if(b=b&&parseInt(b,10)||2,n&&n._requiresCount&&((i.__count||i["odata.count"])&&(C=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(C=i.__count||i["odata.count"])),3===b&&i.value&&(i=i.value),i.d&&(i=i.d),b<3&&i.results&&(i=i.results),d&&d.aggregates&&d.aggregates.length){var S,x=d.aggregates,T={};for(_=0;_<x.length;_++)(S=t.aggregates[x[_].type])&&(T[x[_].field+" - "+x[_].type]=S(i,x[_].field));y=T}if(d&&d.groups&&d.groups.length)for(f=d.groups,_=0;_<f.length;_++)v=R(f[_],n.queries),i=t.group(i,f[_],d.aggregates,v);return c(C)?i:{result:i,count:C,aggregates:y}},convertToQueryString:function(e,t,i){var s,n=[],l=e.table||"";for(s in delete e.table,i.dataSource.requiresFormat&&(e.$format="json"),e)n.push(s+"="+e[s]);return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!l?n:n.length?l+"?"+n:l||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")",data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,i,s){var n=s.guid=t.getGuid(_),l=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(f)},r="--"+n+"\n";return r+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,r+=this.generateInsertRequest(i.added,o),r+=this.generateUpdateRequest(i.changed,o),r+=this.generateDeleteRequest(i.deleted,o),r+=o.cSet+"--\n",{type:"POST",url:l,contentType:"multipart/mixed; charset=UTF-8;boundary="+n,data:r+="--"+n+"--"}},generateDeleteRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="DELETE ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n";return i+"\n"},generateInsertRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="PUT ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n\n",i+=JSON.stringify(e[s])+"\n\n";return i},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,i,s){var n="",l=e.value instanceof Date;return t.data.odUniOperator.contains="contains",n=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",l&&(n=n.replace(/datetime'(.*)'$/,"$1")),n},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(){return this.pvt.search.join(" OR ")},beforeSend:function(){},processQuery:function(e,i){for(var s,n,l=/\/[\d*\/]*/g,o="",r=i._expands.length-1;r>0;r--)if(o.indexOf(i._expands[r])>=0)i._expands.pop();else if(l.test(i._expands[r])){for(s=(o=i._expands.pop()).replace(l,"($expand="),n=0;n<o.split(l).length-1;n++)s+=")";i._expands.unshift(s),r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,n,l,o,r){var a,d,h,u,m,p,g,f,_,v,b=o&&o.ejPvtData;if(l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return n._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(a=(a=l.getResponseHeader("Content-Type")).substring(a.indexOf("=batchresponse")+1),(i=i.split(a)).length<2)return;for(i=i[1],u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(u[0],""),m=u[1],_=(i=i.split(m)).length;_>-1;_--)/\bContent-ID:/i.test(i[_])&&/\bHTTP.+201/.test(i[_])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(i[_])[1]),r.added[d]&&(h=w.parseJson(/^\{.+\}/m.exec(i[_])[0]),e.extend(r.added[d],this.processResponse(h))));return r}if(p=null,g={},n&&n._requiresCount&&"@odata.count"in i&&(p=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,b&&b.aggregates&&b.aggregates.length){var C,y=b.aggregates,S={};for(_=0;_<y.length;_++)(C=t.aggregates[y[_].type])&&(S[y[_].field+" - "+y[_].type]=C(i,y[_].field));g=S}if(b&&b.groups&&b.groups.length)for(f=b.groups,_=0;_<f.length;_++)v=R(f[_],n.queries),i=t.group(i,f[_],b.aggregates,v);return c(p)?i:{result:i,count:p,aggregates:g}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,n,l=e.dataSource.json.slice(0),o=l.length,r=!0,a={},d=0;d<t.queries.length;d++)i=this[(n=t.queries[d]).fn].call(this,l,n.e,t),"onAggregates"==n.fn?a[n.e.field+" - "+n.e.type]=i:l=i!==s?i:l,("onPage"===n.fn||"onSkip"===n.fn||"onTake"===n.fn||"onRange"===n.fn)&&(r=!1),r&&(o=l.length);return t._requiresCount&&(l={result:l,count:o,aggregates:a}),l},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase))return!0;return!1})):e},onSortBy:function(e,i,s){var l,o,r;if(!e)return e;if(!(o=n(i.fieldName,s)))return e.sort(i.comparer);if(o instanceof Array){for(r=(o=o.slice(0)).length-1;r>=0;r--)o[r]&&(l=i.comparer,o[r].endsWith(" desc")&&(l=t.pvt.fnSort(t.sortOrder.Descending),o[r]=o[r].replace(" desc","")),e=L(e,o[r],l,[]));return e}return L(e,o,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){var l,o,r,a,d;if(!e)return e;if(o=[],(l=C(s.queries,"onAggregates")).length)for(a=0;a<l.length;a++)r=l[a].e,o.push({type:r.type,field:n(r.field,s)});return d=R(i.fieldName,s.queries),t.group(e,n(i.fieldName,s),o,d)},onPage:function(e,t,i){var s=n(t.pageSize,i),l=(n(t.pageIndex,i)-1)*s,o=l+s;return e?e.slice(l,o):e},onRange:function(e,t){return e?e.slice(n(t.start),n(t.end)):e},onTake:function(e,t){return e?e.slice(0,n(t.nos)):e},onSkip:function(e,t){return e?e.slice(n(t.nos)):e},onSelect:function(e,i){return e?t.select(e,n(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s){var n,l=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),n=0;n<l.length&&t.getObject(i,l[n])!==s;n++);return n!==l.length?l.splice(n,1):null},update:function(i,s,n){for(var l=i.dataSource.json,o=t.getObject(s,n),r=0;r<l.length&&t.getObject(s,l[r])!==o;r++);return r<l.length?e.extend(l[r],n):null}}),t.ForeignKeyAdaptor=function(i,n){var l=(new t[n||"JsonAdaptor"]).extend({init:function(){var e,s;for(this.foreignData=[],this.key=[],this.adaptorType=n,this.value=[],this.fValue=[],this.keyField=[],e=i,s=0;s<e.length;s++)this.foreignData[s]=e[s].dataSource,this.key[s]=e[s].foreignKeyField,this.fValue[s]=t.isNullOrUndefined(e[s].field)?e[s].foreignKeyValue:e[s].field+"_"+e[s].foreignKeyValue,this.value[s]=e[s].foreignKeyValue,this.keyField[s]=e[s].field||e[s].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s,n,l,o=e.dataSource.json;if(this.initial){for(s=0;s<o.length;s++)for(n=this,l=0;l<this.foreignData.length;l++)this.foreignData[l].filter(function(e){t.getObject(n.key[l],e)==t.getObject(n.keyField[l],o[s])&&(o[s][n.fValue[l]]=t.getObject(n.value[l],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var n,l,o,r=0;r<this.foreignData.length;r++)n=this,"string"!=typeof(l=i[this.fValue[r]])||isNaN(l)||(l=t.parseFloat(l)),o=e.grep(n.foreignData[r],function(e){return e[n.value[r]]==l})[0],t.isNullOrUndefined(o)&&(o=e.grep(n.foreignData[r],function(e){return e[n.key[r]]==l})[0],t.getObject(this.value[r],o)!=s&&t.createObject(n.value[r],t.getObject(this.value[r],o),i)),t.getObject(this.value[r],o)!=s&&t.createObject(this.keyField[r],t.getObject(this.key[r],o),i)},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert"})}},update:function(e,i,s,n){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,n),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:n})}}});return e.extend(this,new l),this},t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,i,s){for(var n=0;n<i.added.length;n++)t.JsonAdaptor.prototype.insert(e,i.added[n]);for(n=0;n<i.changed.length;n++)t.JsonAdaptor.prototype.update(e,s.key,i.changed[n]);for(n=0;n<i.deleted.length;n++)t.JsonAdaptor.prototype.remove(e,s.key,i.deleted[n]);return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:i.changed,added:i.added,deleted:i.deleted,action:"batch",table:s.url,key:s.key})}}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},processResponse:function(e,i,s,n,l){var o,r,a,d=l&&l.ejPvtData;if(l&&"post"!=l.type.toLowerCase()){var h=n&&n.getResponseHeader("DataServiceVersion"),u=null,m={};if(h=h&&parseInt(h,10)||2,s&&s._requiresCount&&(c(e.Count)||(u=e.Count)),h<3&&e.Items&&(e=e.Items),d&&d.aggregates&&d.aggregates.length){var p,g=d.aggregates,f={};for(r=0;r<g.length;r++)(p=t.aggregates[g[r].type])&&(f[g[r].field+" - "+g[r].type]=p(e,g[r].field));m=f}if(d&&d.groups&&d.groups.length)for(o=d.groups,r=0;r<o.length;r++)a=R(o[r],s.queries),e=t.group(e,o[r],d.aggregates,a);return c(u)?e:{result:e,count:u,aggregates:m}}}}),n=function(e,t){return"function"==typeof e?e.call(t||{}):e},t.TableModel=function(i,s,n,l){var o,r,a,d;if(!F(this,t.TableModel))return new t.TableModel(s);for(F(s,Array)||u("ej.TableModel - Json Array is required"),o=[],a=h(k,this),d=0;d<s.length;d++)(r=new t.Model(s[d],this)).state="unchanged",r.on("stateChange",a),l&&r.computes(l),o.push(r);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=n,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&F(this.dataManager,t.DataManager)||u("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(h(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(h(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){var t;this.key||u("TableModel - update : Primary key should be assigned to TableModel.key");var i,s=e,n=this.key,l=s[n];for(t in i=this.rows.array.filter(function(e){return e.get(n)===l}),i=i[0],s)i.set(t,s[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:i,table:this})},remove:function(e){var t,i,n,l;for(this.key||u("TableModel - update : Primary key should be assigned to TableModel.key"),t=this.key,i=-1,e&&"object"==typeof e&&(e=e[t]!==s?e[t]:e.get(t)),l=0;l<this.rows.length();l++)if(this.rows.array[l].get(t)===e){i=l;break}i>-1&&((n=this.rows.removeAt(i)).markDelete(),this._deleted.push({model:n,position:i}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:n,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s,n=l,r=e(t.html()),a=this.toArray();for(e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(n=o),n.insertBefore(t),t.detach().empty(),s=0;s<a.length;s++)i=r.clone(),a[s].bindTo(i),t.append(i);t.insertAfter(n),n.remove()}},l=i?e(document.createElement("div")):{},o=i?e(document.createElement("tr")):{},t.Model=function(i,s,n){"string"==typeof s&&(n=s,s=null),this.$id=H("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=n||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,n,l=this.json,o=e;for(e=e.split("."),n=0;n<e.length-1;n++)l=l[(e=e[0])[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=l[e],this.actual[e]!==s||e in this.actual||(this.actual[e]=t),l[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:o,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||u("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,n,l,o=e(t),r=o.find("[ej-observe], [ej-computed], [ej-prop]"),a=r.length;for(o.data("ejModel",this),n={fields:[],props:[],computes:[]},l=0;l<a;l++)(s=(i=r.eq(l)).attr("ej-prop"))&&this._processAttrib(s,i,n),(s=i.attr("ej-observe"))&&-1!==this._props.indexOf(s)?this._processField(i,s,n):(s=i.attr("ej-computed"))&&this._processComputed(s,i,n);o.data("ejModelBinding"+this.$id,n)},unbind:function(t){var i,s,n,l,o,r,a,d={props:this._attrEls,computes:this._computeEls},h=!1;for(s in t&&(d=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||d,h=!0),this.computed)i=d.computes[s],s=this.computed[s],i&&s.deps&&(this.off(s.deps.join(" "),i.handle),h&&delete this._computeEls[s]);for(s in h||(this._computeEls={}),d.props)(i=d.props[s])&&(this.off(i.deps.join(" "),i.handle),delete d.props[s],h&&delete this._attrEls[s]);if(h||(this._attrEls={}),d.fields&&d.fields.length)for(n=d.fields.length,a=0;a<n;a++)l=d.fields[a],e(l).off("change",null,this._changeHandler),r=-1!==this.formElements.indexOf(l.tagName.toLowerCase())?"input":"read",-1!==(o=this._updates[r].indexOf(l))&&this._updates[r].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,n,l=T(e),o=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[l]||(this.computed[l]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=l),(s=this.computed[e]).get||(s.get=function(){s.value.call(this.json)}),n=s.deps,s=s.value,this._updateDeps(n),this._updateElement(t,o,s),s={el:t,handle:h(this._computeHandle,this,{value:e,type:o})},this._computeEls[e]=s,i.computes[e]=s,this.on(n.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],n=0;n<i.length;n++)i[n].startsWith("#ej.#")&&((t=i[n].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t));return s},_processAttrib:function(e,t,i){var s,n,l,o,r={};for(e=e.replace(/^ +| +$/g,"").split(";"),l=0;l<e.length;l++)e[l]=e[l].split(":"),e[l].length<2||(r[s=e[l][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,"")]=e[l][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));for(s in o=[],e=r)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),r=H("emak"),n={el:t,handle:h(this._attrHandle,this,r),value:e,deps:o},t.prop("ejmodelattrkey",r),i.props[r]=n,this._attrEls[r]=n,this.on(o.join(" "),n.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,n=this.json,l=this.computed;for(var o in i)(s=i[o])in n?s=n[s]:s in l&&((s=l[s])&&(s=s.value.call(e.extend({},this.json,l)))),c(s)||t.prop(o,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var n=t.length-1;n>-1;n--)t[n].offsetParent?e(t[n])[i](s):t.splice(n,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},n=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(n),this._updates[t].read.push(e[0])):(e.val(n).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var x=/[^\w]+/g,T=function(e){return e.replace(x,"_")},k=function(e){this.setDirty(!0,e.model)};if(t.Predicate=function(e,i,s,n){return this instanceof t.Predicate?("string"==typeof e?(this.field=e,this.operator=i,this.value=s,this.ignoreCase=n,this.isComplex=!1,this._comparer=t.data.fnOperators.processOperator(this.operator)):(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s)),this):new t.Predicate(e,i,s,n)},t.Predicate.and=function(){return r._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return r._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){var t,i,s;if(F(e,Array)){for(t=[],i=0,s=e.length;i<s;i++)t.push(r._fromJSON(e[i]));return t}return r._fromJSON(e)},r={_combinePredicates:function(e,i){if(!e.length)return s;if(1===e.length){if(!F(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))},_combine:function(e,i,s,n,l,o){return i instanceof t.Predicate?t.Predicate[l](e,i):"string"==typeof i?t.Predicate[l](e,new t.Predicate(i,s,n,o)):u("Predicate - "+l+" : invalid arguments")},_fromJSON:function(e){var i;if(!e||F(e,t.Predicate))return e;var s=e.predicates||[],n=s.length,l=[];for(i=0;i<n;i++)l.push(r._fromJSON(s[i]));return e.isComplex?new t.Predicate(l[0],e.condition,l.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase)}},t.Predicate.prototype={and:function(e,t,i,s){return r._combine(this,e,t,i,"and",s)},or:function(e,t,i,s){return r._combine(this,e,t,i,"or",s)},validate:function(e){var i,s,n,l=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase);for(i="and"===this.condition,n=0;n<l.length;n++)if(s=l[n].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t,i;if(this.isComplex)for(e=[],t=this.predicates,i=0;i<t.length;i++)e.push(t[i].toJSON());return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:e}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,n=[],l={},o=0;o<e.length;o++)(s=M(e,t,o))in l||(n.push(i?e[o]:s),l[s]=1);return n},sum:function(e,t){for(var i,s=0,n="number"!=typeof M(e,t,0),l=0;l<e.length;l++)i=M(e,t,l),isNaN(i)||null===i||(n&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],n=0;n<e.length;n++)s.push(t.pvt.extractFields(e[n],i));return s},group:function(i,s,n,l,o,r){var a,d,h,c,u,m,p,g,f,_;if(o=o||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(f=0;f<i.length;f++)t.isNullOrUndefined(r)?(i[f].items=t.group(i[f].items,s,n,l,i.level+1),i[f].count=i[f].items.length):(-1,_=e.grep(r,function(e){return e.key==i[f].key}),a=r.indexOf(_[0]),i[f].items=t.group(i[f].items,s,n,l,i.level+1,r[a].items),i[f].count=r[a].count);return i.childLevels+=1,i}for(d={},(h=[]).GROUPGUID=t.pvt.consts.GROUPGUID,h.level=o,h.childLevels=0,h.records=i,m=0;m<i.length;m++)c=M(i,s,m),t.isNullOrUndefined(l)||(c=l(c,s)),d[c]||(d[c]={key:c,count:0,items:[],aggregates:{},field:s},h.push(d[c]),t.isNullOrUndefined(r)||(u=e.grep(r,function(e){return e.key==d[c].key}),d[c].count=u[0].count)),d[c].count=t.isNullOrUndefined(r)?d[c].count+=1:d[c].count,d[c].items.push(i[m]);if(n&&n.length)for(m=0;m<h.length;m++){for(p={},f=0;f<n.length;f++)g=t.aggregates[n[f].type],t.isNullOrUndefined(r)?g&&(p[n[f].field+" - "+n[f].type]=g(h[m].items,n[f].field)):(_=e.grep(r,function(e){return e.key==h[m].key}),g&&(p[n[f].field+" - "+n[f].type]=g(_[0].items,n[f].field)));h[m].aggregates=p}return h},parseTable:function(i,s,n){var l,o,r,a,d,h,c,u=i.rows,m=[],p=[];if(!u.length)return[];switch(n=n||0,(s||"").toLowerCase()){case t.headerOption.tHead:l=i.tHead.rows[n];break;case t.headerOption.row:default:l=i.rows[n]}for(r=l.cells,o=0;o<r.length;o++)m.push(e.trim(r[o].innerHTML));for(o=n+1;o<u.length;o++){for(a={},d=u[o].cells,h=0;h<d.length;h++)c=d[h].innerHTML,a[m[h]]="string"==typeof c&&e.isNumeric(c)?Number(c):c;p.push(a)}return p}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e){return e.length}},t.pvt={filterQueries:C,mergeSort:function(e,i,s){if(e.length<=1)return e;var n=parseInt(e.length/2,10),l=e.slice(0,n),o=e.slice(n);return l=t.pvt.mergeSort(l,i,s),o=t.pvt.mergeSort(o,i,s),t.pvt.merge(l,o,i,s)},getItemFromComparer:function(e,i,s){var n,l,o,r=0,a="string"==typeof M(e,i,0);if(e.length)for(;t.isNullOrUndefined(n)&&r<e.length;)n=M(e,i,r),o=e[r++];for(;r<e.length;r++)l=M(e,i,r),t.isNullOrUndefined(l)||(a&&(n=+n,l=+l),s(n,l)>0&&(n=l,o=e[r]));return o},quickSelect:function(e,i,s,n,l,o){if(s==n)return e[s];var r=t.pvt.partition(e,i,s,n,o),a=r-s+1;return a==l?e[r]:l<a?t.pvt.quickSelect(e,i,s,r-1,l,o):t.pvt.quickSelect(e,i,r+1,n,l-a,o)},extractFields:function(e,i){var s,n={};if(1==i.length)return t.pvt.getObject(i[0],e);for(s=0;s<i.length;s++)n[i[s].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[s],e);return n},partition:function(e,i,s,n,l){var o,r=parseInt((s+n)/2,10),a=M(e,i,r);for(t.swap(e,r,n),r=s,o=s;o<n;o++)l(M(e,i,o),a)&&(t.swap(e,o,r),r++);return t.swap(e,r,n),r},fnSort:function(e){return(e=e?e.toLowerCase():t.sortOrder.Ascending)==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,n){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,n))}},fnAscending:function(e,t){return null===t||t===s?-1:"string"==typeof e?e.localeCompare(t):null===e||e===s?1:e-t},fnDescending:function(e,t){return null===t||t===s?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===s?-1:t-e},merge:function(e,t,i,s){for(var n,l=[];e.length>0||t.length>0;)n=e.length>0&&t.length>0?s?s(M(e,i,0),M(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,l.push(n.shift());return l},getObject:function(e,t){var i,n,l;if(!t)return s;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(i=t,n=e.split("."),l=0;l<n.length&&null!=i;l++)i=i[n[l]];return i},createObject:function(e,t,i){for(var n=e.split("."),l=i||window,o=l,r=0;r<n.length;r++)r+1==n.length?o[n[r]]=t===s?{}:t:null==o[n[r]]&&(o[n[r]]={}),o=o[n[r]];return l},getFieldList:function(e,i,n){if(n===s&&(n=""),i===s||null===i)return t.pvt.getFieldList(e,[],n);for(var l in e)"object"!=typeof e[l]||e[l]instanceof Array?i.push(n+l):t.pvt.getFieldList(e[l],i,n+l+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.data.fnOperators={equal:function(e,t,i){return i?N(e)==N(t):e==t},notequal:function(e,i,s){return!t.data.fnOperators.equal(e,i,s)},lessthan:function(e,t,i){return i?N(e)<N(t):e<t},greaterthan:function(e,t,i){return i?N(e)>N(t):e>t},lessthanorequal:function(e,t,i){return i?N(e)<=N(t):e<=t},greaterthanorequal:function(e,t,i){return i?N(e)>=N(t):e>=t},contains:function(e,t,i){return i?!c(e)&&!c(t)&&-1!=N(e).indexOf(N(t)):!c(e)&&!c(t)&&-1!=e.toString().indexOf(t)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i){return i?e&&t&&N(e).startsWith(N(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i){return i?e&&t&&N(e).endsWith(N(t)):e&&t&&e.endsWith(t)},processSymbols:function(e){var i,s=t.data.operatorSymbols[e];return s&&(i=t.data.fnOperators[s])?i:u("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.NotifierArray=function(i){return F(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=F(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},Array.prototype.filter=Array.prototype.filter||function(e){var t,i,s,n;if("function"!=typeof e)throw new TypeError;for(t=[],i=arguments[1]||this,s=0;s<this.length;s++)n=this[s],e.call(i,n,s,this)&&t.push(n);return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var D=/^https?:\/\//i,I=/^get|post$/i,O=new RegExp("^"+location.protocol,"i"),A=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t){if(e.crossDomain&&e.async&&I.test(e.type)&&D.test(t.url)&&O.test(t.url)){var i=null,n=(t.dataType||"").toLowerCase();return{send:function(l,o){i=new XDomainRequest,/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout),i.ontimeout=function(){o(500,"timeout")},i.onload=function(){var e,t="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,l={code:200,message:"success"},r={text:i.responseText};try{if("json"===n)try{r.json=JSON.parse(i.responseText)}catch(e){l.code=500,l.message="parseerror"}else if("xml"===n||"text"!==n&&A.test(i.contentType)){(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1;try{e.loadXML(i.responseText)}catch(t){e=s}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw l.code=500,l.message="parseerror","Invalid XML: "+i.responseText;r.xml=e}}catch(e){throw e}finally{o(l.code,l.message,r,t)}},i.onerror=function(){o(500,"error",{text:i.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(i.onprogress=function(){}),i.open(e.type,e.url),i.send(t.data)},abort:function(){i&&i.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"},a=function(e,t){t&&(e=h(e,t)),(window.setImmediate||window.setTimeout)(e,0)},t.support.enableLocalizedSort=!1;var L=function(e,i,s,n){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==n.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):E(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},R=function(i,s){for(var n=e.grep(s,function(e){return"onGroup"==e.fn}),l=0;l<n.length;l++)if(t.getObject("fieldName",n[l].e)==i)return t.getObject("fn",n[l].e)},E=function(e,i,s){var n=Object.prototype.toString;Object.prototype.toString=-1===i.indexOf(".")?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=n,s&&e.reverse()},N=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||!1===e?e.toString():""},M=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},P=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},F=function(e,t){return e instanceof t},j=function(e,i,s,n){return function(l){return"object"==typeof l&&(n=l,l=null),new t.TableModel(l||e,i,s,n)}},z=function(t){return function(i,s){var n,l,o,r,a;for((s=s||window.ko)||u("Knockout is undefined"),l=[],a=0;a<t.length;a++){for(o in n={},t[a])o.startsWith("_")||(n[o]=s.observable(t[a][o]));for(o in i)r=i[o],e.isPlainObject(r)?(r.owner||(r.owner=n),r=s.computed(r)):r=s.computed(r,n),n[o]=r;l.push(n)}return s.observableArray(l)}},$=0,H=function(e){return e+($+=1)};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})},d=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},h=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}},t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)},c=function(e){return e===s||null===e},u=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document)}),
/*!
*  filename: ej.grid.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","jsrender","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.touch.min","./../common/ej.draggable.min","./../common/ej.scroller.min","./ej.button.min","./ej.checkbox.min","./ej.menu.min","./ej.waitingpopup.min","./ej.radiobutton.min","./ej.autocomplete.min","./ej.datepicker.min","./ej.datetimepicker.min","./ej.dropdownlist.min","./ej.dialog.min","./ej.editor.min","./ej.pager.min","./ej.toolbar.min","./ej.excelfilter.min"],e):e()}(function(){var n,t,r;n=jQuery,t=Syncfusion,t.gridFeatures=t.gridFeatures||{},t.gridFeatures.common={refreshContent:function(e){e&&(this.refreshTemplate(),this._refreshHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFilterBarTemplate();var i={};this._initialRenderings(),i.requestType=t.Grid.Actions.Refresh,this._processBindings(i)},rowHeightRefresh:function(){var e,i;if(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.model.currentViewData)&&this.model.currentViewData.length){var s=this.getContentTable().get(0).rows,l=this.getContentTable().get(1).rows,o=0;if(this.getContent().find(".e-frozencontentdiv").is(":visible"))for(e=0;e<s.length;e++)"none"!=n(s[e]).css("display")&&(o=t.max([s[e].getClientRects()[0].height,l[e].getClientRects()[0].height]),n(s[e]).height(o),n(l[e]).height(o),e&&(e==this.model.scrollSettings.frozenRows-1||e==s.length-1)&&(o+=1),this.model.allowTextWrap||e&&e!=this.model.scrollSettings.frozenRows-1||(o-=1),this.model.isEdit&&n(s[e]).find("#"+this._id+"EditForm").length&&e&&n(s[e]).find("#"+this._id+"EditForm td").css("height",o),n(l[e]).find("#"+this._id+"EditForm td").css("height",o));this._getRowHeights(),!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&(null!=this.getScrollObject()._vScrollbar||this.getScrollObject().isVScroll())&&(i=this.getScrollObject()._vScrollbar,(t.isNullOrUndefined(i)||i.value()!=i.model.maximum)&&this._scrollObject.refresh(this.model.scrollSettings.frozenColumns>0))}},dataSource:function(e,t){t&&(this._templateRefresh=!0),this._dataSource(e),this.model.scrollSettings.enableVirtualization||(e.length>0?this._currentPage(1):this._currentPage(0)),this._updateDataSource=!0,this._refreshDataSource(e,t);var i=this._refreshVirtualPagerInfo();(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling)&&this._showPagerInformation(i),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData?this._refreshVirtualView():this._refreshVirtualContent(),this.getContent().ejScroller("isHScroll")&&this.getContent().ejScroller("scrollX",0,!0),this.getContent().ejScroller("isVScroll")?(this.model.scrollSettings.enableVirtualization||this.getContent().ejScroller("scrollY",0,!0),this.element.find(".e-gridheader").addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss")),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow(),this._trigger("dataBound",{})},_refreshDataSource:function(e,i){this._dataManager=e instanceof t.DataManager?e:t.DataManager(e),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataManager.dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._virtualDataRefresh=!0,this._isLocalData&&this._refreshVirtualViewDetails(!0)),this.refreshContent(!!t.isNullOrUndefined(i)||i),t.isNullOrUndefined(this.getPager())||(this.getPager().ejPager("model.currentPage",1),this._refreshGridPager())},hideColumns:function(e){var i,s,l,o,r,a,d,h=0,c={},u=[],m=0;"string"==typeof e?this.getColumnByHeaderText(e):this.getColumnByHeaderText(e[0]),s="string"==typeof e?this.getColumnByField(e):this.getColumnByField(e[0]),this._showHideColumns=!0;var p=this._isDuplicate(n.merge(n.merge([],this._visibleColumns),this._hiddenColumns)),g=p?"_hiddenColumnsField":"_hiddenColumns",f=p?"_visibleColumnsField":"_visibleColumns";if(!p&&null!=s)if(n.isArray(e))for(l=0;l<e.length;l++)o=this.getColumnByField(e[l]),e[l]=null!=o?o.headerText:e[l];else e=s.headerText;if(n.isArray(e))for(l=0;l<e.length;l++)-1!=(i=n.inArray(e[l],this[f]))?(this[g].push(e[l]),this[f].splice(i,1)):-1==i&&"_visibleColumnsField"==f&&-1==n.inArray(e[l],this[g])&&t.isNullOrUndefined(this.getColumnByField(e[l]))&&(this[g].push(this.getColumnByHeaderText(e[l]).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(e[l]).field),this[f].splice(n.inArray(this.getColumnByHeaderText(e[l]).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(e[l],this._visibleColumns),1));else-1!=(i=n.inArray(e,this[f]))?(this[g].push(e),this[f].splice(i,1)):-1==i&&"_visibleColumnsField"==f&&-1==n.inArray(e,this[g])&&t.isNullOrUndefined(this.getColumnByField(e))&&(this[g].push(this.getColumnByHeaderText(e).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(e).field),this[f].splice(n.inArray(this.getColumnByHeaderText(e).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(e,this._visibleColumns),1));for(l=0;l<this.model.columns.length&&(r=p?"field":"headerText",-1!=n.inArray(t.isNullOrUndefined(this.model.columns[l][r])||""==this.model.columns[l][r]?this.model.columns[l].headerText:this.model.columns[l][r],this[g])&&(this.model.columns[l].visible&&u.push(this.model.columns[l]),this.model.columns[l].visible=!1,this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&this.model.columns.indexOf(this.model.columns[l])<this.model.scrollSettings.frozenColumns&&m++,h++),this[g].length!=h);l++);c.requestType="refresh",this._hideHeaderColumn(this[g],p),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(a=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(a[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&(0!=this.model.scrollSettings.frozenColumns||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||(d=this._calculateWidth(),this.getHeaderTable().width(d),this.getContentTable().width(d)),t.isNullOrUndefined(this._scrollObject)||this.getScrollObject().refresh()),this.model.showColumnChooser&&this._refreshColumnChooserList(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(m==this.model.scrollSettings.frozenColumns&&this._frozenPaneRefresh(),this.getScrollObject().refresh()),this._showHideColumns=!1},showColumns:function(e){var i,s,l,o,r,a,d,h=0,c={},u=[];"string"==typeof e?this.getColumnByHeaderText(e):this.getColumnByHeaderText(e[0]),i="string"==typeof e?this.getColumnByField(e):this.getColumnByField(e[0]),this._showHideColumns=!0;var m=this._isDuplicate(n.merge(n.merge([],this._visibleColumns),this._hiddenColumns)),p=m?"_hiddenColumnsField":"_hiddenColumns",g=m?"_visibleColumnsField":"_visibleColumns";if(!m&&null!=i)if(n.isArray(e))for(a=0;a<e.length;a++)s=this.getColumnByField(e[a]),e[a]=null!=s?s.headerText:e[a];else e=i.headerText;if(n.isArray(e))for(a=0;a<e.length;a++)-1!=(r=n.inArray(e[a],this[p]))?(this[p].splice(r,1),this[g].push(e[a])):-1==r&&"_hiddenColumnsField"==p&&-1==n.inArray(e[a],this[g])&&t.isNullOrUndefined(this.getColumnByField(e[a]))&&(this[g].push(this.getColumnByHeaderText(e[a]).field)&&this._visibleColumns.push(e[a]),this[p].splice(n.inArray(this.getColumnByHeaderText(e[a]).field,this[p]),1)&&this._hiddenColumns.splice(n.inArray(e[a],this._hiddenColumns),1));else-1!=(r=n.inArray(e,this[p]))?(this[p].splice(r,1),this[g].push(e)):-1==r&&"_hiddenColumnsField"==p&&-1==n.inArray(e,this[g])&&t.isNullOrUndefined(this.getColumnByField(e))&&(this[g].push(this.getColumnByHeaderText(e).field)&&this._visibleColumns.push(e),this[p].splice(n.inArray(this.getColumnByHeaderText(e).field,this[p]),1)&&this._hiddenColumns.splice(n.inArray(e,this._hiddenColumns),1));for(a=0;a<this.model.columns.length&&(l=m?"field":"headerText",-1!=n.inArray(t.isNullOrUndefined(this.model.columns[a][l])||""==this.model.columns[a][l]?this.model.columns[a].headerText:this.model.columns[a][l],this[g])&&(this.model.columns[a].visible||u.push(this.model.columns[a]),this.model.columns[a].visible=!0,h++),this[g].length!=h);a++);if(this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0){for(o=!1,a=0;a<u.length;a++)(r=this.model.columns.indexOf(u[a]))<this.model.scrollSettings.frozenColumns&&(o=!0);if(o){for(a=0;a<this.model.columns.length;a++)-1!=n.inArray(this.model.columns[a].headerText,this._hiddenColumns)?this.model.columns[a].visible=!1:-1!=n.inArray(this.model.columns[a].headerText,this._visibleColumns)&&(this.model.columns[a].visible=!0);d=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(d[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()}}c.requestType="refresh",this._showHeaderColumn(this[g],m),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&!t.isNullOrUndefined(this._scrollObject)&&this.getScrollObject().refresh(),this.model.showColumnChooser&&this._refreshColumnChooserList(),this._showHideColumns=!1},_virtualShowHide:function(e){this._currentPage(1),this.model.query=this.commonQuery.clone(),this._ensureDataSource(e),this._loadedJsonData=[],this._prevPage=this._currentPage()},resizeColumns:function(e,t){var i,s;if(e instanceof Array)for(i=0;i<e.length;i++)s=t instanceof Array?t[i]:t,this._setWidthColumnCollection(e[i],s);else this._setWidthColumnCollection(e,t);this.setWidthToColumns(),this.model.scrollSettings.frozenColumns&&(this._frozenAlign(),this.rowHeightRefresh())},_setWidthColumnCollection:function(e,t){var i=this.getColumnByHeaderText(e)||this.getColumnByField(e);i.width=t,-1==n.inArray(i.field,this._disabledResizingColumns)&&(this.columnsWidthCollection[n.inArray(i,this.model.columns)]=t)},refreshTemplate:function(){this.addInitTemplate(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.model.allowGrouping&&this.addGroupingTemplate()},_refreshHeader:function(){var e=this.element.find(".e-gridheader");this.element[0].replaceChild(this._renderGridHeader()[0],e[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowGrouping&&this._headerCellgDragDrop(),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.showColumnChooser&&this._renderColumnChooserData(!0),"both"!=this.model.gridLines&&this._showHeaderGridLines()},set_dropColumn:function(e,i){var s,l,o,a,d,h,c,u,m,p,g,f,_,v;if(this.model.allowReordering&&e!=i){this.model.columns.splice(i,0,this.model.columns.splice(e,1)[0]);var b=this.model.columns,w=this.getHeaderTable().find(".e-columnheader:last .e-headercell").not(".e-stackedHeaderCell"),C=w.find(".e-headercelldiv");this.model.scrollSettings.frozenColumns||this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),s=function(e){var t,i,s,l=[];if(e!=r){-1==["",r].indexOf(e.value)&&(l.push({name:"value",value:e.value}),e.value="");for(var o=0,a=e.attributes,d=a.length;o<d;o++)t=/^jQuery[0-9]+$/,a[o].name.match(t)||l.push({name:a[o].name,value:a[o].value});for(i=0,s=l.length;i<s;i++)n(e).removeAttr(l[i].name);return l}},l=function(e,t){if(t!=r)for(var i=0,s=e.length;i<s;i++)"value"==e[i].name&&(t.value=e[i].value),n(t).attr(e[i].name,e[i].value)},this.getHeaderTable().find(".e-filterdiv").length>0&&(o=this.getHeaderTable().find(".e-filterdiv input"));var y=t.isNullOrUndefined(o),S={cellattributes:[],headerattributes:[],filtercellattributes:[],filterThattributes:[]},x=e<i?e:i,T=e<i?i:e;for(f=x,_=0;f<=T;f++)a=null!=this.model.detailsTemplate||null!=this.model.childGrid?f+1:f,S.headerattributes[_]=s(w[a]),S.cellattributes[_]=s(C[f]),S.filtercellattributes[_]=y?[]:s(o[f]),S.filterThattributes[_]=y?[]:s(n(o[f]).closest("th")[0]),_++;for(c in d=e<i?S.cellattributes.length-1:0,h=e<i?0:S.cellattributes.length-1,S)S[c].splice(d,0,S[c].splice(h,1)[0]);for(f=x,_=0;f<=T;f++)u=null!=this.model.detailsTemplate||null!=this.model.childGrid?f+1:f,l(S.headerattributes[_],w[u]),l(S.cellattributes[_],C[f]),y||l(S.filtercellattributes[_],o[f]),y||l(S.filterThattributes[_],n(o[f]).closest("th")[0]),_++;if(this.model.allowFiltering&&-1!=["menu","excel"].indexOf(this.model.filterSettings.filterType)){for(this._$fDlgIsOpen&&this._closeFDialog(),m=this.model.columns,w.find(".e-filtericon").remove(),f=0;f<m.length;f++)(m[f].allowFiltering||t.isNullOrUndefined(m[f].allowFiltering))&&w.find(".e-headercelldiv[ej-mappingname="+m[f].field+"]").closest(".e-headercell").append(t.buildTag("div.e-filtericon e-icon e-filterset"));this._refreshFilterIcon()}for(this.columnsWidthCollection.splice(i,0,this.columnsWidthCollection.splice(e,1)[0]),this._fieldColumnNames=this._headerColumnNames=[],g=0;g<b.length;g++)this._fieldColumnNames[b[g].headerText]=b[g].field,this._headerColumnNames[b[g].field]=b[g].headerText,p=n(C[g]),t.isNullOrUndefined(b[g].headerTemplateID)?"checkbox"==b[g].type?p.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"):b[g].disableHtmlEncode?p.text(b[g].headerText):p.html(b[g].headerText):p.html(n(b[g].headerTemplateID).html()),this.model.groupSettings.showToggleButton&&(t.isNullOrUndefined(b[g].allowGrouping)||b[g].allowGrouping)&&(-1!=n.inArray(b[g].field,this.model.groupSettings.groupedColumns)?p.append(this._getToggleButton().addClass("e-toggleungroup")):p.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.allowGrouping&&1!=this.model.allowSorting)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[f].field,this.model.sortSettings.sortedColumns[f].direction);if(this.model.allowSorting)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++){var k=1,D=this.model.sortSettings.sortedColumns[f],I=this.getsortColumnByField(D.field),O=this.getColumnIndexByField(D.field),A=n.inArray(I,this.model.sortSettings.sortedColumns);if(imageDirection="descending"!=D.direction?"e-rarrowup-2x":"e-rarrowdown-2x",this.model.allowMultiSorting){for(_=1;_<=A;_++)k+=1;"right"==C.eq(O).css("text-align")?(this.model.sortSettings.sortedColumns.length>1&&C.eq(O).prepend(this._createSortNumber(k,C.eq(O)).addClass("e-sortnumber")),C.eq(O).append(this._createSortElement().addClass("e-"+(D.direction||"ascending")+" "+imageDirection))):(C.eq(O).append(this._createSortElement().addClass("e-"+(D.direction||"ascending")+" "+imageDirection)),this.model.sortSettings.sortedColumns.length>1&&C.eq(O).append(this._createSortNumber(k,C.eq(O)).addClass("e-sortnumber")))}else imageDirection="descending"!=D.direction?"e-rarrowup-2x":"e-rarrowdown-2x",C.eq(O).append(this._createSortElement().addClass("e-"+(D.direction||"ascending")+" "+imageDirection))}(v={}).requestType=t.Grid.Actions.Reorder,this._isReorder=!0,this.refreshTemplate(),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(v),this._isAddNew=!1),this.sendDataRenderingRequest(v),this._isReorder=!1}},getPager:function(){return this._gridPager},getFooterTable:function(){return this._gridFooterTable},setGridFooterTable:function(e){this._gridFooterTable=e},getFooterContent:function(){return this._gridFooterContent},setGridFooterContent:function(e){this._gridFooterContent=e},getScrollObject:function(){return(null==this._scrollObject||t.isNullOrUndefined(this._scrollObject.model))&&(this._scrollObject=this.getContent().ejScroller("instance")),this._scrollObject},setGridPager:function(e){this._gridPager=e},getRowHeight:function(){var e,t,i,s=-1;return null!=this.getContentTable()&&(t=(e=this.getContentTable().find("tr:not(.e-virtualrow)")).length>2?1:0,e.length&&(i=e[t].getBoundingClientRect()),e.length>1&&(s=i&&i.height?i.height:e[t].offsetHeight)),-1==s?32:s},getCurrentIndex:function(){return(this._currentPage()-1)*this.model.pageSettings.pageSize},getColumnByIndex:function(e){return e<this.model.columns.length?this.model.columns[e]:null},set_currentPageIndex:function(e){var i,s=this.model.pageSettings,n=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;return null==s.totalPages&&(s.totalPages=Math.ceil(n/s.pageSize)),!(e>s.totalPages||e<1||e==this._currentPage()||(t.isNullOrUndefined(this._prevPageNo)&&(this._prevPageNo=this._currentPage()),this._currentPage(e),this._currentPage()==this._prevPageNo||((i={}).requestType="paging",this.gotoPage(this._currentPage(),i),0)))},set_currentVirtualIndex:function(e){var t,i;return!(e<1||1!=e&&e!=this._totalVirtualViews&&e==this._currentVirtualIndex&&this._checkCurrentVirtualView(this._virtualLoadedRows,e)||(this._prevVirtualIndex=this._currentVirtualIndex,this._currentVirtualIndex=e,(t=this._calculateCurrentViewPage())<=this.model.pageSettings.totalPages&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)?this._prevVirtualIndex<e&&1!=e?(i=this._isThumbScroll&&1!=t?t:t+1,!this._virtualPageRecords[i]&&i<=this.model.pageSettings.totalPages?this._setCurrentViewPage(i):this._renderVirtulViewContent(t)):this._prevVirtualIndex>e?(i=this._isThumbScroll?t:t-1,this._virtualPageRecords[i]&&!this._virtualLoadedRecords[e-1]&&(i=t-1),!this._virtualPageRecords[i]&&i>=1&&this._setCurrentViewPage(i)):this._renderVirtulViewContent(t):this._renderVirtulViewContent(t),0))},_setCurrentViewPage:function(e){this._needPaging=!0,this._prevPageNo=this._currentPage(),this.gotoPage(e)},_renderVirtulViewContent:function(){this._needPaging=!1,this._refreshVirtualView(this._currentVirtualIndex),this.element.ejWaitingPopup("hide")},_checkCurrentVirtualView:function(e,t){var i,s=this._virtualRowCount,l=t-1,o=t+1;if(e instanceof Array){if(e.length&&((0==l||o==this._totalVirtualViews+1)&&-1!=n.inArray(t,e)||-1!=n.inArray(l,e)&&-1!=n.inArray(t,e)&&-1!=n.inArray(o,e)))return!0}else if(i=o==this._totalVirtualViews?this._lastViewData:s,!this.initialRender&&1==t&&this._virtualLoadedRows[t]||t==this._totalVirtualViews&&e==this._virtualLoadedRows&&e[t]||0==l&&e[t]&&e[t].length==s||o==this._totalVirtualViews+1&&e[t]&&e[t].length==this._lastViewData||e[l]&&e[l].length==s&&e[t]&&e[t].length==s&&e[o]&&e[o].length==i)return!0;return!1},expandCollapse:function(e){var i,s,l,o,a,d,h;if("DIV"==e.prop("tagName")&&(e.parent().hasClass("e-recordplusexpand")||e.parent().hasClass("e-recordpluscollapse")||e.parent().hasClass("e-detailrowcollapse")||e.parent().hasClass("e-detailrowexpand"))&&(e=e.parent()),i=-1,this.model.allowGrouping&&(t.isOnWebForms||this.initialRender))for(s=e.attr("ej-mappingname"),fieldValue=e.attr("ej-mappingvalue"),e.parents(".e-tabletd").length&&(l=e.parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand").attr("ej-mappingvalue")),o=this.model._groupingCollapsed,h=0;h<o.length;h++)if(o[h].key==s&&o[h].value==fieldValue&&(o[h].parent==r||o[h].parent==l)){i=h;break}if(e.hasClass("e-recordplusexpand")||e.hasClass("e-recordpluscollapse")||e.hasClass("e-detailrowcollapse")||e.hasClass("e-detailrowexpand")){if(e.hasClass("e-recordplusexpand")&&this.model.groupSettings.groupedColumns.length)u=e.index(),(m=e.closest("tr").next()).hide(),e.removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),(t.isOnWebForms||this.initialRender)&&-1==i&&this.model._groupingCollapsed.push({key:s,value:fieldValue,parent:l});else if(e.hasClass("e-recordpluscollapse")&&this.model.groupSettings.groupedColumns.length){var c,u=e.index(),m=e.closest("tr").next(),p=[];for(n((c=m)[0].cells[u]).hasClass("e-indentcell")&&c.children(".e-indentcell").length==e.parent().children(".e-indentcell").length+1&&(c.show(),null!=(d=c.children(".e-recordplusexpand"))&&d.length>0&&p.push(d)),e.removeClass("e-recordpluscollapse").addClass("e-recordplusexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),h=0;h<p.length;h++)p[h].removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(p[h]);(t.isOnWebForms||this.initialRender)&&-1!=i&&this.model._groupingCollapsed.splice(i,1)}else if(e.hasClass("e-detailrowexpand")){u=e.index();var g=this,f=this.getIndexByRow(e.closest("tr"));(m=e.closest("tr").next()).hide(0,function(){var i={masterRow:e.closest("tr"),detailsRow:m,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(i.masterData);t.isNullOrUndefined(s)||(i.foreignKeyData=s),g._trigger("detailsCollapse",i),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),e.removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").addClass("e-gnextforward").removeClass("e-gdiagonalnext")}else if(e.hasClass("e-detailrowcollapse")){u=e.index(),g=this,f=this.getIndexByRow(e.closest("tr"));var _=e.closest("tr").next();if(_.hasClass("e-detailrow"))m=_;else{var v=t.buildTag("tr.e-detailrow","",{display:"none"},{}),b=t.buildTag("td.e-detailindentcell"),w=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,C=t.buildTag("td.e-detailcell","",{},{colspan:this._visibleColumns.length-w}),y=t.buildTag("div"),S=n(e.closest("tr")).parents(".e-grid").length;y.attr("id","child"+S+"_grid"+f+Math.round(1e3*Math.random())),n(v).append(b),n(v).append(C),a=this._currentJsonData[f],this.model.detailsTemplate&&n(v).append(C.append(this._renderEjTemplate(this.model.detailsTemplate,a))),n(e.closest("tr")).after(v),this.model.childGrid&&(this.model.childGrid.parentDetails={parentID:this._id,parentPrimaryKeys:this.getPrimaryKeyFieldNames(),parentKeyField:this.model.childGrid.queryString,parentKeyFieldValue:a[this.model.childGrid.queryString],parentRowData:a},n(v).append(C.append(y))),m=v}for(this._showGridLines(),p=[],n((c=m)[0].cells[u]).hasClass("e-detailindentcell")&&(c.show(0,function(){var i={masterRow:e.closest("tr"),detailsRow:m,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(i.masterData);t.isNullOrUndefined(s)||(i.foreignKeyData=s),g._trigger("detailsExpand",i),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),_.hasClass("e-detailrow")||(this._trigger("detailsDataBound",{detailsElement:v,data:a}),this._trigger("refresh")),this.model.childGrid&&!t.isNullOrUndefined(y)&&y.ejGrid(this.model.childGrid),null!=(d=c.children(".e-detailrowexpand"))&&d.length>0&&p.push(d)),e.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").addClass("e-gdiagonalnext").removeClass("e-gnextforward"),h=0;h<p.length;h++)p[h].removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(p[h])}!this.model.allowScrolling||t.isNullOrUndefined(this._scrollObject&&this._scrollObject.model)||e.closest(".e-hscroll").length||this.getScrollObject().refresh(),this.model.isResponsive&&this.windowonresize()}},_refreshGridPager:function(){var e,i,s;null!=this.getPager()&&(e=this.getPager().ejPager("model"),(i={}).currentPage=this._currentPage(),0==this._filteredRecordsCount&&0==this.model.currentViewData.length&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)?(i.currentPage=0,this._prevPageNo=e.currentPage,this.model.pageSettings.currentPage=0):0==e.currentPage&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)&&(i.currentPage=this._prevPageNo),s=this.model.editSettings.showAddNewRow&&0==this.model.groupSettings.groupedColumns.length?1:0,i.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount-s:this._searchCount:this._filteredRecordsCount,t.util.isNullOrUndefined(i.currentPage)&&(i.currentPage=this._currentPage()),this.getPager().ejPager("option",i).ejPager("refreshPager"),this.model.pageSettings.totalPages=e.totalPages||null,this.model.pageSettings.totalRecordsCount=e.totalRecordsCount||null)},_showHeaderColumn:function(e,i){for(var s,l,o,r,a,d=this.getHeaderTable().find("thead"),h=d.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),c=d.find(".e-filterbar").find(".e-filterbarcell"),u=this.getHeaderTable().find("colgroup").find("col"),m=0;m<e.length;m++)a=i?t.isNullOrUndefined(this.getColumnByField(e[m]))?this.getColumnByHeaderText(e[m],t.isNullOrUndefined(this.getColumnByField(e[m]))):this.getColumnByField(e[m]):this.getColumnByHeaderText(e[m]),s=n.inArray(a,this.model.columns),s=null!=this.model.detailsTemplate||this.model.childGrid?s+1:s,o=0!=(l=this.model.scrollSettings.frozenColumns)&&s>=l?h.eq(s).removeClass("e-hide").index()+l:h.eq(s).removeClass("e-hide").index(),c.eq(o).removeClass("e-hide"),u.length>this.model.columns.length&&this.model.groupSettings.groupedColumns.length&&(r=u.length-this.model.columns.length,u=u.slice(this.model.detailsTemplate||this.model.childGrid?r+1:r)),u.eq(s).css("display","");this.model.showStackedHeader&&this._refreshStackedHeader()},_hideHeaderColumn:function(e,i){for(var s,l,o=this.getHeaderTable().find("thead"),r=o.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),a=o.find(".e-filterbar").find(".e-filterbarcell"),d=this.getHeaderTable().find("colgroup").find("col"),h=0;h<e.length;h++){l=i?t.isNullOrUndefined(this.getColumnByField(e[h]))?this.getColumnByHeaderText(e[h],t.isNullOrUndefined(this.getColumnByField(e[h]))):this.getColumnByField(e[h]):this.getColumnByHeaderText(e[h]);var c=n.inArray(l,this.model.columns),u=null!=this.model.detailsTemplate||this.model.childGrid?c+1:c,m=this.model.scrollSettings.frozenColumns;s=0!=m&&c>=m?r.eq(u).addClass("e-hide").index()+m:r.eq(u).addClass("e-hide").index(),a.eq(s).addClass("e-hide"),d.length>this.model.columns.length&&(d=d.slice(d.length-this.model.columns.length)),d.eq(c).css("display","none")}this.model.showStackedHeader&&(this._refreshStackedHeader(),this._colgroupRefresh())},_refreshStackedHeader:function(){var e,t,i,s;if(this.model.showStackedHeader){for(e=this.model.stackedHeaderRows,s=0;s<e.length;s++)if(0!=this.model.scrollSettings.frozenColumns){var l=n(this.getHeaderContent().find(".e-frozenheaderdiv")),o=n(this.getHeaderContent().find(".e-movableheader")),r=this._createStackedRow(e[s],!0),a=this._createStackedRow(e[s],!1);n(l.find("tr.e-stackedHeaderRow")[s]).replaceWith(r),n(o.find("tr.e-stackedHeaderRow")[s]).replaceWith(a)}else t=this._createStackedRow(e[s],!1),this.getHeaderTable().find("tr.e-stackedHeaderRow")[s]?n(this.getHeaderTable().find("tr.e-stackedHeaderRow")[s]).replaceWith(t):t.insertBefore(this.getHeaderTable().find("tr.e-columnheader:last"));if((i={}).requestType="refresh",this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0)for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)this.getHeaderTable().find(".e-stackedHeaderRow").prepend(this._getGroupTopLeftCell());this.model.allowScrolling&&this._refreshScroller(i)}},_getStackedColumnByTarget:function(e){var i=(e.get(0)||{}).className,s=/e-row([0-9])-column([0-9])/.exec(i),n=[s[1],"stackedHeaderColumns",s[2]].join(".");return t.getObject(n,this.model.stackedHeaderRows)},_checkSkipAction:function(e){switch(e.requestType){case t.Grid.Actions.Save:case t.Grid.Actions.Delete:return!0}return!1},_unboundTemplateRendering:function(e){return n("#"+e).html()},_processBindings:function(e){var i,s,l;if(this._requestType=e.requestType,this.model.query=this.commonQuery.clone(),!this._checkSkipAction(e)&&this._trigger("actionBegin",e))return!0;if("batch"==this.model.editSettings.editMode&&"batchsave"!=e.requestType&&"cancel"!=e.requestType&&!this._confirmedValue&&this._bulkChangesAcquired()&&this.model.editSettings.showConfirmDialog)return this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveLostChanges),this._confirmDialog.ejDialog("open"),this._requestArgs=e,!1;if(!t.isNullOrUndefined(this.model.dataSource)&&"refresh"==e.requestType&&this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this._scrollValue=0,this._loadedJsonData=[],this._prevPage=this._currentPage()),this._ensureDataSource(e),this.model.scrollSettings.allowVirtualScrolling&&("virtualscroll"==e.requestType?(this._loadedJsonData.push({pageIndex:this._prevPage,data:this._currentJsonData}),this._prevPage=this._currentPage()):this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=t.isNullOrUndefined(this._currentPageData)?this.model.currentViewData:this._currentPageData,this._currentPageData=null),"filtering"==e.requestType&&(this._loadedJsonData=[],this._prevPage=this._currentPage(),n("#"+this._id+"_externalEdit").remove()),(e.requestType==t.Grid.Actions.Delete||e.requestType==t.Grid.Actions.Add)&&this._refreshVirtualViewDetails()),this.model.scrollSettings.allowVirtualScrolling&&"filtering"==e.requestType&&this.model.filterSettings.filteredColumns.length>0&&this.getScrollObject().scrollY(0),this.model.enableRTL?this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"):this.element.hasClass("e-rtl")&&this.element.removeClass("e-rtl"),e.requestType==t.Grid.Actions.Delete&&0==this.model.groupSettings.groupedColumns.length&&(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").remove(),e.tr.remove()),this._editForm=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):n("#"+this._id+"EditForm"),(!this.model.editSettings.showAddNewRow||"beginedit"!=e.requestType)&&0!=this._editForm.length)for(i=0;i<this._editForm.length;i++)n(this._editForm[i]).find("select.e-dropdownlist").ejDropDownList("destroy"),n(this._editForm[i]).find(".e-datepicker").ejDatePicker("destroy"),n(this._editForm[i]).find(".e-datetimepicker").ejDateTimePicker("destroy"),n(this._editForm[i]).find(".e-numerictextbox").ejNumericTextbox("destroy");if(!(this._dataSource()instanceof t.DataManager)||this._isRemoteSaveAdaptor||e.requestType==t.Grid.Actions.BeginEdit||e.requestType==t.Grid.Actions.Cancel||e.requestType==t.Grid.Actions.Add||this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(e.requestType==t.Grid.Actions.Save||e.requestType==t.Grid.Actions.Delete))this._isRelationalRendering(e)?this._setForeignKeyData(e):this.sendDataRenderingRequest(e);else{this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage&&-1==this.virtualLoadedPages.indexOf((this._prevPageNo-1)*this.model.pageSettings.pageSize)&&(s=t.pvt.filterQueries(this.model.query.queries,"onPage"),this.model.query.queries.splice(n.inArray(s[0],this.model.query.queries),1),this.model.query.page(this._currentPage()-1,this.model.pageSettings.pageSize),l=this._dataSource().executeQuery(this.model.query),this.model.query.queries.splice(n.inArray(s[0],this.model.query.queries),1),this.model.query.page(this._currentPage(),this.model.pageSettings.pageSize)),this._virtualSelectedRows&&this._virtualSelectedRows.length>0&&this.model.query.addParams("virtualSelectRecords",this._virtualSelectedRows);var o=this._queryPromise=this._dataSource().executeQuery(this.model.query),r=(this.element.ejWaitingPopup("instance"),this);this.element.ejWaitingPopup("show"),r._dataSource().ready?r._dataSource().ready.done(function(){r._processDataRequest(r,e,o,l)}):r._processDataRequest(r,e,o,l)}},_processDataRequest:function(e,i,s,n){s.done(t.proxy(function(s){var l,o;if(0==e._relationalColumns.length&&e.element.ejWaitingPopup("hide"),n&&!e._previousPageRendered)e._processLastPageData(e,i,s.result,n),e.model.previousViewData&&0!=e.model.previousViewData.length&&(e.model.previousViewData.splice(0,s.result.length),e._previousPageLength=s.result.length,e._currentPageData=s.result,t.merge(e.model.previousViewData,s.result),e.model.currentViewData=e.model.previousViewData,e._remoteLastPageRendered=!0);else if(e._remoteLastPageRendered&&e.model.pageSettings.currentPage==e.model.pageSettings.totalPages-1&&!e.model.scrollSettings.enableVirtualization){for(l=e.model.pageSettings.pageSize-e._previousPageLength,o=0;o<l;o++)e.getRows()[e.getRows().length-(e.model.pageSettings.pageSize-o)].remove();e._tempPageRendered=!0,e.model.currentViewData=s.result}else e._identityKeys.length&&"add"==i.action&&this.adaptor instanceof t.ODataAdaptor&&e._processIdentityField(s.result,i),e.model.pageSettings.currentPage!=e.model.pageSettings.totalPages-1||e._remoteLastPageRendered||(e._previousPageRendered=!0),e.model.currentViewData=null==s.result?[]:s.result,e._$fkColumn&&"excel"==e.model.filterSettings.filterType&&e.model.filterSettings.filteredColumns.length>0&&(e._fkParentTblData=s.result);e.model.currentViewData=null==s.result?[]:s.result,e.model.allowScrolling&&e.model.scrollSettings.allowVirtualScrolling&&e.model.scrollSettings.enableVirtualization&&("filtering"==i.requestType&&(e._gridRecordsCount=e._filteredRecordsCount=s.count,e._refreshVirtualViewDetails()),s.result.length?(e._isInitNextPage||e._isLastVirtualpage?(e._setInitialCurrentIndexRecords(s.result,e._currentPage()),e._isInitNextPage=e._isLastVirtualpage=!1):(e._gridRecordsCount=s.count,e._refreshVirtualViewDetails(),e._setVirtualLoadedRecords(s.result,e._currentPage())),e._isThumbScroll&&!e._checkCurrentVirtualView(e._virtualLoadedRecords,e._currentVirtualIndex)&&e._checkPrevNextViews(),e._remoteRefresh=!0):e.getContent().find(".e-virtualtop, .e-virtualbottom").remove()),t.isNullOrUndefined(s.aggregates)||(e._remoteSummaryData=s.aggregates),e._processData(s,i),t.isNullOrUndefined(e._unboundRow)||i.selectedRow==e._unboundRow||"save"!=i.requestType||(e._unboundRow.find(".e-editbutton").trigger("click"),e._unboundRow=null)})),s.fail(t.proxy(function(s){e.element.ejWaitingPopup("hide"),i.error=s.error,s=[],e.model.currentViewData=[],e._processData(s,i),t.isNullOrUndefined(e.getPager())||e.getPager().ejPager({currentPage:0,totalRecordsCount:0}),e._trigger("actionFailure",i)}))},_processIdentityField:function(e,i){var s=this._primaryKeys[0],l=t.distinct(e,s),o=t.distinct(this.model.currentViewData,s),r=n.grep(l,function(e){return-1==n.inArray(e,o)}),a=t.DataManager(e).executeLocal((new t.Query).where(s,"equal",r))[0];i.data=t.isNullOrUndefined(a)?i.data:a},_processLastPageData:function(e,i,s,n){n.done(t.proxy(function(t){e.model.previousViewData=t.result})),n.fail(t.proxy(function(t){e.element.ejWaitingPopup("hide"),i.error=t.error,t=[],e.model.previousViewData=[],e._processData(t,i),e._trigger("actionFailure",i)}))},_createUnboundElement:function(e,i){var s,l,o,r,a=document.createElement("div");for(e.headerText=t.isNullOrUndefined(e.headerText)?e.field:e.headerText,t.isNullOrUndefined(e.headerText)||(a.id=this._id+e.headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate"),s=t.buildTag("div.e-unboundcelldiv"),l=e.commands,o=0;o<l.length;o++)(r=t.buildTag("button.e-"+l[o].type.replace(/\s+/g,"")+"button","",{},{type:"button"})).val(l[o].type),s.append(r);return n("body").append(n(a).html(s).hide()),a},_refreshUnboundTemplate:function(e){var i,s,l,o,r,a;if(this._isUnboundColumn)for(i=0;i<this.model.columns.length;i++)if(this.model.columns[i].commands)for(s=e.find(".e-unboundcell.e-"+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).find(".e-unboundcelldiv"),l=n.extend(!0,[],this.model.columns[i].commands),o=0;o<l.length;o++){for(t.isNullOrUndefined(l[o].buttonOptions)&&(l[o].buttonOptions={}),l[o].buttonOptions.width=t.isNullOrUndefined(l[o].buttonOptions.width)?"52":l[o].buttonOptions.width,l[o].buttonOptions.height=t.isNullOrUndefined(l[o].buttonOptions.height)?"28":l[o].buttonOptions.height,l[o].buttonOptions.cssClass=t.isNullOrUndefined(l[o].buttonOptions.cssClass)?this.model.cssClass:l[o].buttonOptions.cssClass,l[o].buttonOptions.enableRTL=this.model.enableRTL,r=s.find(".e-"+l[o].type.replace(/\s+/g,"")+"button"),this.model.isEdit&&"cancel"!=this._requestType||(e.closest(".e-editcell").length?"save"==l[o].type||"cancel"==l[o].type?r.show():(r.hasClass("e-deletebutton")&&r.hide(),r.hasClass("e-editbutton")&&r.hide()):"save"==l[o].type||"cancel"==l[o].type?r.hide():(r.hasClass("e-deletebutton")&&r.show(),r.hasClass("e-editbutton")&&r.show())),a=0;a<r.length;a++)n(r[a]).data("ejButton")&&n(r[a]).ejButton("destroy");r.ejButton(l[o].buttonOptions)}},_gridTemplate:function(e,t,i){var s=e.model.columns[i];return e._isGrouping&&(this.index=e._currentJsonData.indexOf(this.data)),e._renderEjTemplate("#"+t,this.data,this.index,s)},_createTemplateElement:function(e,i,s){var l,o=e["templateID"in e?"templateID":"template"],r=/^#([\w-]*)/.exec(o),a=(i=i||n("body"),s?"Pager":e.headerText+n.inArray(e,this.model.columns)+"_Template"),d={name:"SCRIPT",type:"text/x-template",text:o,id:(this._id+a).replace(/[^0-9A-z-_]/g,"")};return(l=r&&r[1]?document.getElementById(r[1]):/^<script/i.test(o)?n(o).get(0):t.buildTag(d.name,d.text).get(0)).id=l.id||d.id,l.type=l.type||d.type,i.append(s?l.innerHTML:l),l},_renderGridPager:function(){var e=n(document.createElement("div")),t={};return this.model.pageSettings.click=this._gPagerClickHandler,this.model.pageSettings.totalRecordsCount=this._gridRecordsCount||null,this.model.pageSettings.enableRTL=this.model.enableRTL,this.model.pageSettings.locale=this.model.locale,this.model.pageSettings.enableQueryString=this.model.pageSettings.enableQueryString,this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(t.enableExternalMessage=this.model.filterSettings.showFilterBarStatus),n.extend(t,this.model.pageSettings),t.currentPage=this._currentPage(),t.masterObject=this,this.setGridPager(e),e.ejPager(t),e.ejPager("refreshPager"),t=e.ejPager("model"),this.model.pageSettings.totalPages=t.totalPages||null,this._currentPage()!==t.currentPage&&this._currentPage(t.currentPage),this._renderPagerTemplate(e),e},_renderPagerTemplate:function(e,i){var s,n=this.model.pageSettings,l=0==e.find(".e-pagercontainer").not(".e-template").length;e.find(".e-pagercontainer.e-template").remove(),(i||!n.enableTemplates)&&l&&e.ejPager("renderPager"),n.enableTemplates&&(n.showDefaults||e.children().remove(),s=t.buildTag("div",null,null,{class:"e-pagercontainer e-template"}),this._createTemplateElement(this.model.pageSettings,s,!0),e.append(s))},_renderContext:function(){var e,i,s,l,o,r,a,d,h,c=this.model.contextMenuSettings.contextMenuItems,u=0,m=t.buildTag("ul","",{},{id:this._id+"_Context"});if(!this.model.contextMenuSettings.disableDefaultItems)for(;u<c.length;u++)e=c[u],i=this._items(e,"contextMenuItem"),m.append(i);for(var p,g,f=this.model.contextMenuSettings.customContextMenuItems,_=this.model.contextMenuSettings.subContextMenu,v=0;v<f.length;v++){for(p=f[v],g=this._items(p,"customContextMenuItem"),s=0;s<_.length;s++)if("string"==typeof p&&p==_[s].contextMenuItem||"object"==typeof p&&p.id==_[s].contextMenuItem){for(l=t.buildTag("ul","",{},{id:this._id+"_subMenuContext"+s}),o=0;o<_[s].subMenu.length;o++)menuItem=_[s].subMenu[o],menuItem1=this._items(menuItem,"subMenuItems"),l.append(menuItem1);g.append(l)}m.append(g)}m.find("li").length>0&&(this.element.append(m),r=this.element.parents("div.e-grid"),a=t.Menu.prototype._showContextMenu,t.Menu.prototype._showContextMenu=function(e,t,i,s){n(this.model.contextMenuTarget).hasClass("e-grid")&&(++e,++t),a.apply(this,[e,t,i,s])},n(m).ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+this._id,click:n.proxy(this._clickevent,this),width:"auto",beforeOpen:n.proxy(this._menu,this)}),r.length&&(h=(d=n("#"+r[0].id+"_Context")).ejMenu("model.excludeTarget"),d.ejMenu({excludeTarget:t.isNullOrUndefined(h)||0==h.length?"#"+this._id:h.concat(",#"+this._id)})),this._conmenu=m.data("ejMenu"))},_clickevent:function(e){var i,s,l=e.events.text,o=n(this._contexttarget.parentNode),r=n(this._contexttarget);if(r.hasClass("e-filterset")?r=r.siblings():(r.hasClass("e-icon")||r.hasClass("e-number"))&&(r=r.parent()),i=r.attr("ej-mappingname")||r.find(".e-headercelldiv").attr("ej-mappingname"),!this._trigger("contextClick",e))switch(l){case this.localizedLabels.AddRecord:this._startAdd();break;case this.localizedLabels.EditRecord:if("batch"==this.model.editSettings.editMode){var a=n(this._contexttarget.parentNode).find(".e-rowcell").index(r),d=this._excludeDetailRows().index(o),h=this.model.columns[a].field;this.editCell(d,h)}else this.startEdit(o);break;case this.localizedLabels.DeleteRecord:this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):this.multiDeleteMode&&this.selectedRowsIndexes.length>1?this._multiRowDelete():this.deleteRow(o);break;case this.localizedLabels.Save:this.endEdit();break;case this.localizedLabels.Cancel:this.cancelEdit();break;case this.localizedLabels.SortInDescendingOrder:s=t.sortOrder.Descending,this.sortColumn(i,s);break;case this.localizedLabels.SortInAscendingOrder:s=t.sortOrder.Ascending,this.sortColumn(i,s);break;case this.localizedLabels.Grouping:this.groupColumn(i);break;case this.localizedLabels.Ungrouping:this.ungroupColumn(i);break;case this.localizedLabels.NextPage:case this.localizedLabels.PreviousPage:case this.localizedLabels.LastPage:case this.localizedLabels.FirstPage:this._page(e)}},_menu:function(e){var i,s,l,o,r,a,d,h,c,u,m,p=this._conmenu.element;if(this._contexttarget=e.target,i=n(e.target),o=n(this._contexttarget),this.model.allowSelection&&(o.hasClass("e-rowcell")||o.closest(".e-rowcell").length&&!i.hasClass("e-selectionbackground"))&&(r=o.hasClass("e-rowcell")?o.parent():o.closest(".e-rowcell").parent(),this.model.isEdit||this.selectRows(this.getIndexByRow(r),null,o)),(i.hasClass("e-ascending")||i.hasClass("e-descending"))&&!i.parent().hasClass("e-headercelldiv"))return!1;s=i.hasClass("e-filtericon")||i.hasClass("e-headercelldiv")?e.target.parentNode.getAttribute("aria-sort"):i.hasClass("e-headercell")?e.target.getAttribute("aria-sort"):i.parent().parent().attr("aria-sort"),e.target.className,a=n(p),l=i.hasClass("e-filterset")?i.siblings().attr("ej-mappingname"):i.hasClass("e-icon")||i.hasClass("e-number")?i.parent().attr("ej-mappingname"):i.hasClass("e-headercell")?i.find(".e-headercelldiv").attr("ej-mappingname"):i.attr("ej-mappingname"),p.css("visibility","visible");var g=i.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,f=i.closest(".e-rowcell"),_=i.closest(".e-headercell"),v=-1!=f.index()?f.index():_.index()-this.model.groupSettings.groupedColumns.length,b=i.hasClass("e-rowcell")?i.index()-g:v-g;for(c in b=null!=this.model.detailsTemplate||null!=this.model.childGrid?b-1:b,d=this.model.columns[b],h={allowGrouping:".e-contextgrouping",allowSorting:".e-contextascending, .e-contextdescending","editSettings.allowAdding":".e-contextadd","editSettings.allowEditing":".e-contextedit","editSettings.allowDeleting":".e-contextdelete"})u=p.find(h[c]).parent(),0==t.getObject(c,this.model)||!1===t.getObject(c,d)?u.css("display","none"):"none"==u.css("display")&&u.css("display","block");if(i.closest(".e-grid").attr("id")!==this._id||i.is("input"))p.css("visibility","hidden");else{if(this.getHeaderTable().find(i).length>0){if(0==_.length||!_.children().hasClass("e-headercelldiv"))return void p.css("visibility","hidden");m=n(p.find(".e-head")),p.find(".e-page").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&(m.css("display","none"),0==p.find(".e-customitem").length&&p.css("visibility","hidden"))}else if(this.getContentTable().find(i).length>0){if(0==f.length)return void p.css("visibility","hidden");m=n(p.find(".e-content")),p.find(".e-head").css("display","none"),p.find(".e-page").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&"batch"==this.model.editSettings.editMode&&(m.css("display","none"),0==p.find(".e-customitem").length&&p.css("visibility","hidden"))}else{if(!(this.getPager().find(i).length>0||i.hasClass("e-pager")))return m=n(p),p.css("visibility","hidden"),!1;m=n(p.find(".e-page")),p.find(".e-head").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block")}switch(s){case"ascending":a.find(".ascending").parent().css("display","none");break;case"descending":a.find(".descending").parent().css("display","none")}i.hasClass("e-rowcell")&&this.model.editSettings.showAddNewRow&&(m=n(p.find(".e-savcan")),p.find(".e-contextadd").parent().css("display","none"),m.css("display","block")),this.model.isEdit&&i.hasClass("e-rowcell")&&(!this.model.editSettings.showAddNewRow||n(".e-editedrow").length>0)&&(m=n(p.find(".e-savcan")),p.find(".e-head").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-page").css("display","none"),m.css("display","block")),1==this.model.pageSettings.totalPages&&m.hasClass("e-page")?0==p.find(".e-customitem").length?p.css("visibility","hidden"):p.find(".e-page").css("display","none"):1==this.model.pageSettings.currentPage?(a.find(".previous").parent().css("display","none"),a.find(".first").parent().css("display","none")):this.model.pageSettings.currentPage==this.model.pageSettings.totalPages&&(a.find(".last").parent().css("display","none"),a.find(".nextpage").parent().css("display","none")),-1!=this.model.groupSettings.groupedColumns.indexOf(l)?m.find(".group").parent().css("display","none"):-1==this.model.groupSettings.groupedColumns.indexOf(l)&&m.find(".ungroup").parent().css("display","none"),this.selectedRowsIndexes.length>1&&"multiple"==this.model.selectionType&&this.model.editSettings.allowDeleting&&(p.find(".e-contextadd").parent().css("display","none"),p.find(".e-contextedit").parent().css("display","none")),this.model.contextOpen&&this._trigger("contextOpen",e)}},_items:function(e,i){var s,l,o,r;return""!=e&&("contextMenuItem"==i&&(-1!=e.indexOf("Record")?(l=t.buildTag("li","",{},{class:"e-content"})).css("display","none"):-1!=e.indexOf("Page")?(l=t.buildTag("li","",{},{class:"e-page"}),-1!=e.indexOf("Next")?s=t.buildTag("div","",{},{class:"nextpage"}):-1!=e.indexOf("Previous")?s=t.buildTag("div","",{},{class:"previous"}):-1!=e.indexOf("Last")?s=t.buildTag("div","",{},{class:"last"}):-1!=e.indexOf("First")&&(s=t.buildTag("div","",{},{class:"first"})),l.css("display","none")):"Save"==e||"Cancel"==e?(l=t.buildTag("li","",{},{class:"e-savcan"})).css("display","none"):(-1!=e.indexOf("Order")||"Grouping"==e||"Ungrouping"==e)&&(l=t.buildTag("li","",{},{class:"e-head"}),-1!=e.indexOf("Ascending")?s=t.buildTag("div","",{},{class:"ascending"}):-1!=e.indexOf("Descending")?s=t.buildTag("div","",{},{class:"descending"}):"Grouping"==e?s=t.buildTag("div","",{},{class:"group"}):"Ungrouping"==e&&(s=t.buildTag("div","",{},{class:"ungroup"})),l.css("display","none"))),t.isNullOrUndefined(l)&&(l=t.buildTag("li","",{},{class:"e-customitem"})).css("display","block"),l.append(s),o=document.createElement("a"),r="","string"==typeof e&&(r=-1!=e.indexOf("Ascending")?"ascending":-1!=e.indexOf("Descending")?"descending":e.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[e.replace(/\s+/g,"")])?e:this.localizedLabels[e.replace(/\s+/g,"")]),"object"==typeof e&&(r="Ascending"==e.id?"ascending":"Descending"==e.id?"descending":e.id.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[e.text.replace(/\s+/g,"")])?e.text:this.localizedLabels[e.text.replace(/\s+/g,"")],l.attr("id",e.id)),n(o).append(t.buildTag("span","",{},{class:"e-gridcontext e-icon e-context"+r})),l.append(o),l)},_page:function(e){var t;e.events.text==this.localizedLabels.NextPage?(t=this.model.pageSettings.currentPage,++t,this.gotoPage(t)):e.events.text==this.localizedLabels.PreviousPage?(t=this.model.pageSettings.currentPage)>1?(--t,this.gotoPage(t)):this.gotoPage(t):e.events.text==this.localizedLabels.LastPage?(t=this.model.pageSettings.totalPages,this.gotoPage(t)):this.gotoPage(1)},gotoPage:function(e){var i,s;(this.model.allowPaging||this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling)&&((i={}).previousPage=this._currentPage(),this._currentPage(e),i.endIndex=this._currentPage()*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:this._currentPage()*this.model.pageSettings.pageSize,i.startIndex=this._currentPage()*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=e,this.model.allowPaging&&(i.requestType=t.Grid.Actions.Paging),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this._isVirtualRecordsLoaded=!1,s=this._refreshVirtualPagerInfo(),this._showPagerInformation(s),i.requestType=t.Grid.Actions.VirtualScroll),this._processBindings(i)&&this._currentPage(i.previousPage),this._primaryKeyValues=[])},_gPagerClickHandler:function(e){if(this._prevPageNo!=e.currentPage)return this.model.masterObject.gotoPage(e.currentPage),!1},_processData:function(e,i){this._gridRecordsCount=0==e.count&&this.model.currentViewData.length?e.result.length:e.count,null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),(i.requestType==t.Grid.Actions.Filtering||t.Grid.Actions.Save||this.model.filterSettings.filteredColumns.length>0&&i.requestType==t.Grid.Actions.Refresh)&&(this._filteredRecordsCount=e.count),this._setForeignKeyData(i),0==this._relationalColumns.length&&this.sendDataRenderingRequest(i)},_frozenCell:function(e,t){var i=t,s=0,l=this.getRowByIndex(e);return t>=this.model.scrollSettings.frozenColumns&&(s=1,i-=this.model.scrollSettings.frozenColumns),n(l.eq(s).find(".e-rowcell:eq("+i+")"))},_frozenColumnSelection:function(e,t,i){var s,l,o=t,r=0;if(i)for(l=t;l<i;l++){for(o=l,l>=this.model.scrollSettings.frozenColumns&&(r=1,o=l-this.model.scrollSettings.frozenColumns),s=0;s<e[r].length;s++)n(e[r][s].cells[o]).addClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell")[l]).addClass("e-columnselection"),this.selectedColumnIndexes.push(l)}else for(t>=this.model.scrollSettings.frozenColumns&&(r=1,o=t-this.model.scrollSettings.frozenColumns),l=0;l<e[r].length;l++)n(e[r][l].cells[o]).addClass("e-columnselection")},_renderGridFooter:function(){var e,i;if(this.model.summaryRows.length>0){if(e=t.buildTag("div.e-gridfooter"),i=t.buildTag("table.e-gridsummary","",{},{cellspacing:"0.25px"}),this.setGridFooterContent(e),this.model.scrollSettings.frozenColumns>0){var s=t.buildTag("div.e-frozenfooterdiv"),n=t.buildTag("div.e-movablefooter"),l=i.clone(),o=t.buildTag("div.e-movablefooterdiv");n.append(o),i.append(this.getHeaderTable().first().find("colgroup").clone()),l.append(this.getHeaderTable().last().find("colgroup").clone()),s.append(i),o.append(l),this.setGridFooterTable(i.add(l)),this._createSummaryRows(this.getFooterTable()),e.append(s.add(n)),e.find(".e-frozenfooterdiv").outerWidth(this.getHeaderContent().find(".e-frozenheaderdiv").width()).end().find(".e-movablefooterdiv").outerWidth(this.getContent().find(".e-movablecontentdiv").width())}else i.append(this.getHeaderTable().find("colgroup").clone()),this.setGridFooterTable(i),this._createSummaryRows(this.getFooterTable()),e.append(i);return e}throw"summary row collection is missing"},_setSummaryAggregate:function(e){for(var t,i,s,n=this.model.summaryRows,l=0,o=n.length;l<o;l++)for(t=0,i=(s=n[l].summaryColumns).length;t<i;t++)e.aggregate(s[t].summaryType,s[t].dataMember)},_createSummaryRows:function(e,i,s,l,o){var r=e.find("col");e.find("tbody").length>0&&e.find("tbody").remove();var a=t.buildTag("tbody"),d=this,h=a.clone(),c=this.model.summaryRows;!t.isNullOrUndefined(i)&&this._isCaptionSummary&&(c=this._captionSummary(o)),n.each(c,function(c,u){var m,p,g,f,_;if(!1===u.showTotalSummary&&t.isNullOrUndefined(i)||!1===u.showGroupSummary&&o&&!t.isNullOrUndefined(i))return!0;if(m=t.buildTag("tr.e-gridSummaryRows"),t.isNullOrUndefined(l&&l.level))for(_=0;_<d.model.groupSettings.groupedColumns.length;_++)m.prepend(t.buildTag("td").addClass("e-indentcell"));p=o?" e-gcsummary":"",(null!=d.model.detailsTemplate||null!=d.model.childGrid)&&(0!=d.model.groupSettings.groupedColumns.length?m.children("td.e-indentcell").last().after("<td class='e-summaryrow"+p+"'></td>"):m.prepend("<td class='e-summaryrow'></td>"));var v=d.getHeaderTable().find("td").clone().addClass("e-summaryrow"+p),b=0;if(t.isNullOrUndefined(u.titleColumn)||-1==(b=d.getColumnIndexByField(u.titleColumn))&&(b=d.getColumnIndexByHeaderText(u.titleColumn)),-1!=b&&(v=d._assignTitleColumn(b,u.title,v,0)),d._hideSummaryColumn(v,r),d.model.scrollSettings.frozenColumns>0)g=m.clone(),a.append(m.append(v.slice(0,d.model.scrollSettings.frozenColumns))),h.append(g.append(v.slice(d.model.scrollSettings.frozenColumns)));else if(d._isCaptionSummary&&!o||t.isNullOrUndefined(l&&l.level))a.append(m.append(v));else{var w=d.model.groupSettings.groupedColumns.length-l.level+1,C=e.clone().addClass("e-groupsummary"),y={};for(y.data={items:l},m.prepend("<td class='e-summaryrow"+p+"' colspan="+d._colSpanAdjust(null,null,y)+" style = 'padding:0;' ></td>"),n(m[0].cells).filter(".e-summaryrow").html(C.append(t.buildTag("tr",v))),f=C.find("col").length-(d.model.columns.length+w),_=0;_<f;_++)C.find("col").first().remove();for(_=0;_<w;_++)n(C[0].rows).prepend("<td class='e-indentcell'></td>"),n(C.find("col")[_]).addClass("e-summary");a.append(m)}n.each(u.summaryColumns,function(e,l){var o,r,a,h;o="custom"!=l.summaryType?s?s[l.dataMember+" - "+l.summaryType]:d._remoteSummaryData[l.dataMember+" - "+l.summaryType]:d.getSummaryValues(l,i),prefix=l.prefix?l.prefix:"",r=d.getColumnIndexByField(l.displayColumn),a=l.suffix?l.suffix:"",d.model.allowScrolling&&n(v[r]).addClass("e-scroller"),""!=n(v[r]).html()&&""==prefix&&(prefix=n(v[r]).html()),t.isNullOrUndefined(l.template)?-1!=r&&n(v[r]).html(prefix+(l.format?d.formatting(l.format,o,d.model.locale):o)+a).css("text-align",d.model.columns[r].textAlign):(h={summaryValue:l.format?d.formatting(l.format,o,d.model.locale):o,summaryColumn:l},n(v[r]).html(n.render[d._id+"_summaryTemplate"+l.template](h)).css("text-align",d.model.columns[r].textAlign),n(v[r]).addClass("e-summarytemplate"))})}),this.model.scrollSettings.frozenColumns>0?(e.first().append(a),e.last().append(h)):e.append(a)},_assignTitleColumn:function(e,t,i,s){for(var n,l=e;l<this.model.columns.length;l++)if(n=this.model.columns[l],0==s&&0!=n.visible){i.eq(l).html(t);break}return i},getSummaryValues:function(e,i){var s,l,o,r,a,d;switch((l=t.isNullOrUndefined(i)?this.model.filterSettings.filteredColumns.length>0?this._filteredRecords:this._dataSource():i)instanceof t.DataManager?(o=l,l=l.dataSource.json):o=t.DataManager(l),e.summaryType){case t.Grid.SummaryType.Maximum:r=t.max(l,e.dataMember),s=t.getObject(e.dataMember,r);break;case t.Grid.SummaryType.Minimum:r=t.min(l,e.dataMember),s=t.getObject(e.dataMember,r);break;case t.Grid.SummaryType.Average:s=t.avg(l,e.dataMember);break;case t.Grid.SummaryType.Sum:s=t.sum(l,e.dataMember);break;case t.Grid.SummaryType.Count:s=l.length;break;case t.Grid.SummaryType.TrueCount:a=t.Predicate(e.dataMember,"equal",!0),s=o.executeLocal(t.Query().where(a)).length;break;case t.Grid.SummaryType.FalseCount:a=t.Predicate(e.dataMember,"equal",!1),s=o.executeLocal(t.Query().where(a)).length;break;case t.Grid.SummaryType.Custom:(d=e.customSummaryValue)&&("string"==typeof d&&(d=t.util.getObject(d,window)),n.isFunction(d)&&(s=d.call(this,e,l)))}return s},_hideCaptionSummaryColumn:function(){var e,t,s,n=this.getHeaderTable().find(".e-headercelldiv[ej-mappingname]").first(),l=this.getContentTable().find(".e-groupcaption").clone(),o=this.getContentTable().find(".e-groupcaption").parent(),r=this.model.columns.length-1;if(this._isCaptionSummary&&(this.getContentTable().find(".e-summaryrow:not(.e-gcsummary)").remove(),this.getFooterTable().find("tbody td").slice(-r).removeClass("e-groupcaptionsummary").addClass("e-summaryrow"),null!=this.getFooterTable()&&this.getContentTable().find(".e-recordplusexpand").parent().children(".e-indentcell").remove(),!this.model.groupSettings.showGroupedColumn&&this.getContentTable().find(".e-groupcaptionsummary").not(".e-hide").length&&(e=+this.getContentTable().find(".e-recordtable:first").parents("tbody:first").find(".e-groupcaption").attr("colspan"),this._hiddenColumnsField.length==this.model.columns.length-1&&n.parent().hasClass("e-hide")||!e)))for(i=0;i<l.length;i++)o.eq(i).children().not(".e-hide,.e-recordplusexpand").filter("td.e-groupcaptionsummary:first").addClass("e-hide"),t=o.eq(i).find(".e-groupcaption"),s=parseInt(t.attr("colspan")),t.attr("colspan",++s);this.getContentTable().find(".e-recordtable").find(".e-indentcell").remove()},_hideSummaryColumn:function(e,t){if(t.length>this.model.columns.length&&(t=t.slice(t.length-this.model.columns.length)),!this.model.groupSettings.showGroupedColumn&&this.model.showSummary)for(i=0;i<this.model.columns.length;i++)for(j=0;j<this.model.groupSettings.groupedColumns.length||j<this._hiddenColumnsField.length;j++){if(!this.getHeaderTable().find(".e-headercelldiv:not(.e-emptyCell)").eq(i).is(":visible")){t.eq(i).css("display","none"),n(e[i]).addClass("e-hide");break}"none"==t.eq(i).css("display")&&t.eq(i).css("display","")}else for(i=0;i<this.model.columns.length;i++)this.model.columns[i].visible?"none"==t.eq(i).css("display")&&t.eq(i).css("display",""):(t.eq(i).css("display","none"),n(e[i]).addClass("e-hide"))},_initScrolling:function(){var e,i,s=[],l=[];for(this.model.scrollSettings.enableVirtualization&&(this.model.scrollSettings.allowVirtualScrolling=!0),e=0;e<this.model.columns.length;e++)!1===this.model.columns[e].visible&&this.model.scrollSettings.frozenColumns,!0===this.model.columns[e].isFrozen?s.push(this.model.columns[e]):l.push(this.model.columns[e]);if(s.length>0&&(i=this.model.scrollSettings.frozenColumns,this.model.columns=n.merge(n.merge([],s),l),this.model.scrollSettings.frozenColumns=s.length,s.length!=i&&0!=i&&(this.model.scrollSettings.frozenColumns=i)),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&(this.model.allowGrouping||null!=this.model.rowTemplate||null!=this.model.detailsTemplate||null!=this.model.childGrid||this.model.scrollSettings.allowVirtualScrolling||"batch"==this.model.editSettings.editMode))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels().FrozenNotSupportedException),void this._alertDialog.ejDialog("open");this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this.model.scrollSettings.enableVirtualization?(this._vRowHeight=Math.floor(this.getRowHeight()+1),this._virtualRowCount=Math.round(this.model.scrollSettings.height/this._vRowHeight)+1,this.model.pageSettings.pageSize<5*this._virtualRowCount&&(this.model.pageSettings.pageSize=5*this._virtualRowCount)):(this.model.pageSettings.pageSize=12==this.model.pageSettings.pageSize?Math.round(this.model.scrollSettings.height/32)+1:this.model.pageSettings.pageSize,this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize))),(this.model.width||this.model.height)&&(this.model.allowScrolling=!0,this.model.width&&(this.model.scrollSettings.width=this.model.width),this.model.height&&(this.model.scrollSettings.height=this.model.height)),this._originalScrollWidth=t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)?this.model.scrollSettings.width:this.model.scrollSettings.previousStateWidth},_checkScrollActions:function(e){return!(this.model.scrollSettings.allowVirtualScrolling||e!=t.Grid.Actions.Sorting&&e!=t.Grid.Actions.Reorder)||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Add||e==t.Grid.Actions.Cancel||e==t.Grid.Actions.Save||e==t.Grid.Actions.BatchSave||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Paging||e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Search},_frozenAlign:function(){var e,i=this.getContent().first(),s=!t.isIOSWebView()&&this.getBrowserDetails();e=this.model.enableRTL?"margin-right":"margin-left",i.find(".e-movablecontent").css(e,s&&"safari"===s.browser?"auto":i.find(".e-frozencontentdiv").width()+"px"),this.getHeaderContent().find(".e-movableheader").removeAttr("style").css(e,s&&"safari"===s.browser?"auto":this.getHeaderContent().find(".e-frozenheaderdiv").width()+"px")},_refreshScroller:function(e){var i,s,n,l,o,r,a,d=this.getContent().first();if(!t.isNullOrUndefined(d.data("ejScroller"))){if(this.model.scrollSettings.frozenColumns>0){if(this._isFrozenColumnVisible())if(this._visibleColumns.length<=this.model.scrollSettings.frozenColumns){for(i=!1,s=this.model.scrollSettings.frozenColumns;s<this.model.columns.length;s++)if(-1!=this._visibleColumns.indexOf(this.model.columns[s].headerText)){i=!0;break}i||(d.find(".e-frozencontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-frozenheaderdiv").removeAttr("style"),d.find(".e-movablecontent").width(0),d.find(".e-movablecontentdiv").width(0),d.find(".e-movablecontent").height(0),d.find(".e-movablecontentdiv").height(0))}else this._frozenAlign(),d.find(".e-movablecontent").scrollLeft(this.getHeaderContent().find(".e-movableheader").scrollLeft()),!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.getScrollObject()._vScrollbar.value()>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum);else d.find(".e-movablecontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-movableheaderdiv").removeAttr("style"),d.find(".e-frozencontent").width(0),d.find(".e-frozencontentdiv").width(0),d.find(".e-frozencontent").height(0),d.find("e-frozencontentdiv").height(0);this.refreshScrollerEvent()}this.model.scrollSettings.frozenRows>0&&(this._initFrozenRows(),!this.initialRender&&t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.element.height()>this.model.scrollSettings.height&&this.getContent().attr("tabindex","0").ejScroller(this.model.scrollSettings),n=this.getScrollObject().model.scrollTop,!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&n>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum),("cancel"==e.requestType||"save"==e.requestType)&&n>this._editFormHeight&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&(n-=this._editFormHeight),e.requestType==t.Grid.Actions.Add&&this.getScrollObject().scrollY(0,!0),t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),"beginedit"==e.requestType&&(n=this.getScrollObject().model.scrollTop,this.getScrollObject().scrollY(0,!0)),!t.isNullOrUndefined(this.model.dataSource)&&("refresh"==e.requestType||"searching"==e.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData&&this._gridRecordsCount>0?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(1),1==this._currentVirtualIndex&&this.getScrollObject().scrollY(0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.getScrollObject().refresh(),d.ejScroller("model.enableRTL",this.model.enableRTL),this.model.isResponsive&&("searching"==e.requestType||"filtering"==e.requestType)&&(o=(l=this.getScrollObject()).isHScroll()?this.getContentTable().height()+l.model.buttonSize:this.getContentTable().height(),o="string"==typeof this.model.scrollSettings.height||o>this.model.scrollSettings.height?this.model.scrollSettings.height:o,r="string"==typeof this.model.scrollSettings.width?this.element.width():this.model.scrollSettings.width,width=r,this.getContent().ejScroller({height:o,width:width})),this.getScrollObject().isVScroll()&&!this.getScrollObject().model.autoHide?(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width()),this.getHeaderContent().find(".e-headercontent").hasClass("e-hscrollcss")||this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):this._showHideScroller(),!this.model.allowPaging||this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll()||this.getContentTable().width()==this.getContent().width()||(this.getContentTable().width(this.getContent().width()),this.getHeaderTable().width(this.getContentTable().width())),this._getRowHeights(),n&&!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&e.requestType!=t.Grid.Actions.Add&&(this._currentTopFrozenRow=0,n>this.getScrollObject()._vScrollbar.model.maximum&&(n=this.getScrollObject()._vScrollbar.model.maximum),this.getScrollObject()._vScrollbar.scroll(n)),"virtualscroll"==e.requestType&&(a=this.getScrollObject().model.scrollTop+this.getScrollObject().model.height-.3*this.getScrollObject().model.height,this.getScrollObject().scrollY(a,!0))}},_isFrozenColumnVisible:function(){for(var e=0;e<this.model.scrollSettings.frozenColumns;e++)if(this.model.columns[e].visible)return!0;return!1},_frozenPaneRefresh:function(){this.getContent().find(".e-frozencontentdiv").css("display","none"),this.getHeaderContent().find(".e-frozenheaderdiv").css("display","none"),this.getHeaderContent().find(".e-movableheader")[0].style["margin-left"]="",this.getContent().find(".e-movablecontent")[0].style["margin-left"]="";var e=t.isNullOrUndefined(this._scrollObject._vScrollbar)?0:this._scrollObject._vScrollbar["e-vscroll"].width(),i=this.model.scrollSettings.width-e-1;this.model.scrollSettings.width>this.getContent().find(".e-movablecontentdiv").width()&&(this.getContent().find(".e-movablecontentdiv").width(i),this.getHeaderContent().find(".e-movableheaderdiv").width(i)),this._scrollObject.option("scrollLeft",0)},_renderScroller:function(){var e,i,s,l,o,r,a,d;if(this.model.scrollSettings||(this.model.scrollSettings={}),this.model.enablePersistence&&(t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)||!this.model.scrollSettings.previousStateWidth)&&this.model.isResponsive&&(this.model.scrollSettings.previousStateWidth=this.model.scrollSettings.width),"string"!=typeof this._originalScrollWidth||this.model.isResponsive||(this.element.css("width","auto"),i=this.element.width(),("auto"==this.model.scrollSettings.width||"auto"==this._originalScrollWidth)&&(this._originalScrollWidth="100%"),this.model.scrollSettings.width=i*(parseFloat(this._originalScrollWidth)/100)),"string"!=typeof this.model.scrollSettings.height||this.model.isResponsive||(e=this.element.height(),"auto"==this.model.scrollSettings.height&&(this.model.scrollSettings.height="100%"),this.model.scrollSettings.height=e*(parseFloat(this.model.scrollSettings.height)/100)),(this.model.scrollSettings.width||this.model.width)&&!this._mediaQuery&&("string"==typeof(i=this.model.scrollSettings.width||this.model.width)?this.element.css("width",this.model.scrollSettings.width||this.model.width):this.element.width(this.model.scrollSettings.width||this.model.width)),s=this.getContent().attr("tabindex","0"),this.getRows(),this.model.scrollSettings.frozenColumns>0){if(scrollWidth=this.getContent().find(".e-frozencontentdiv").width()+20,scrollWidth>this.model.scrollSettings.width)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsViewAlert),void this._alertDialog.ejDialog("open");l=this.getContent().find(".e-frozencontentdiv").width(),o=this.model.enableRTL?"margin-right":"margin-left",this.getContent().find(".e-movablecontent").css(o,l+"px"),this.getHeaderContent().find(".e-movableheader").css(o,l+"px"),this.model.scrollSettings.targetPane=".e-movablecontent"}this._initFrozenRows(),this.model.scrollSettings.autoHide&&(this.model.scrollSettings.show=n.proxy(this._showHideScroller,this)),r=this,this.model.scrollSettings.frozenRows||(this.model.scrollSettings.scroll=function(e){t.isNullOrUndefined(e.scrollData)||"e-hhandle"!=e.scrollData.handler?(r._scrollValue=e.scrollTop,r.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/r._vRowHeight)):(r.model.allowFiltering&&("menu"==r.model.filterSettings.filterType||r._isExcelFilter)&&(r._isExcelFilter?r._excelFilter.closeXFDialog():r._closeFilterDlg()),r._checkScroller(e,this))}),!this.model.scrollSettings.allowVirtualScrolling&&this.model.currentIndex>0&&!this.model.scrollSettings.scrollTop&&(a=this.model.currentIndex*this.getRowHeight(),this.model.scrollSettings.scrollTop=a),s.ejScroller(this.model.scrollSettings),null==this.model.rowTemplate||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser&&"safari"!=this.getBrowserDetails().browser||this.getScrollObject().refresh(),this.model.scrollSettings.frozenColumns>0&&0==this.model.scrollSettings.frozenRows&&this.getScrollObject()._vScrollbar&&this.getScrollObject()._hScrollbar&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=this.getScrollObject()._hScrollbar._scrollData.skipChange=!0),this.model.scrollSettings.autoHide||this._showHideScroller(),!t.isIOSWebView()&&"safari"==this.getBrowserDetails().browser&&this.model.scrollSettings.frozenColumns>0&&this.getHeaderContent().find(".e-movableheader").add(this.getContent().find(".e-movablecontent")).css(o,"auto"),this.refreshScrollerEvent(),this.model.scrollSettings.frozenColumns>0&&!this._isFrozenColumnVisible()&&this._frozenPaneRefresh(),r.model.scrollSettings.allowVirtualScrolling&&(d=this._refreshVirtualPagerInfo(),this._showPagerInformation(d),s.ejScroller({scroll:function(e){if(r.model.scrollSettings.enableVirtualization&&null!=e.scrollData&&"e-hhandle"!=e.scrollData.handler){if(e.reachedEnd=e.scrollData.scrollable-e.scrollTop==0,"thumb"==e.source){var i=Object.keys(r._virtualLoadedRows),s=(r._currentVirtualIndex+2).toString();"continuous"==r.model.scrollSettings.virtualScrollMode&&-1==n.inArray(s,i)&&s<r._totalVirtualViews?r._isContinuous=!0:(e.model.scrollTop=e.scrollTop,r._isContinuous=!1,e.cancel=!0)}("button"==e.source||"key"==e.source||"wheel"==e.source)&&(n("#"+r._id+"_WaitingPopup").is(":visible")?e.cancel=!0:(r._isThumbScroll=!1,r._virtualViewScroll(e)),"continuous"==r.model.scrollSettings.virtualScrollMode&&e.reachedEnd&&this.refresh()),r.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/r._vRowHeight)}else!t.isNullOrUndefined(e.scrollData)&&"e-hhandle"==e.scrollData.handler&&r.model.allowFiltering&&("menu"==r.model.filterSettings.filterType||r._isExcelFilter)&&(r._isExcelFilter?r._excelFilter.closeXFDialog():r._closeFilterDlg()),e.reachedEnd=this.content()[0].scrollHeight-e.scrollTop==this.content()[0].clientHeight,("button"==e.source||"key"==e.source||"wheel"==e.source)&&null!=r.model&&r._virtualScroll(e),"wheel"==e.source&&e.scrollTop!=r._scrollValue&&(e.scrollTop=r._scrollValue),r._checkScroller(e,this)},thumbEnd:function(e){r.model.scrollSettings.enableVirtualization&&"continuous"==r.model.scrollSettings.virtualScrollMode?e.reachedEnd=e.scrollData.scrollable-e.model.scrollTop==0:e.originalEvent&&!n(e.originalEvent.target).hasClass("e-rowcell")&&(e.reachedEnd=this.content()[0].scrollHeight-e.scrollData.sTop==this.content()[0].clientHeight),"e-hhandle"!=e.scrollData.handler&&null!=r.model&&e.originalEvent&&(r.model.scrollSettings.enableVirtualization?(r._isThumbScroll=!0,r._virtualViewScroll(e),"continuous"==r.model.scrollSettings.virtualScrollMode&&e.reachedEnd&&this.refresh(),r._isLocalData&&r.element.ejWaitingPopup("hide")):r._virtualScroll(e))},scrollEnd:function(e){if("mousewheel"!=e.scrollData.type&&(null==e.scrollData.model||"horizontal"!=e.scrollData.model.orientation)&&r.model.scrollSettings.enableVirtualization&&!r._isContinuous){var t=r._calculateCurrentViewPage(e.model),i=-1!=n.inArray(t,r._virtualLoadedPages);i?(r._isThumbScroll=!0,r._virtualViewScroll(e),r.element.ejWaitingPopup("hide"),r._totalVirtualViews<=3*r._maxViews&&(this._content[0].scrollTop=e.scrollData.scrollTop)):(i||r.element.ejWaitingPopup("show"),e.cancel=!0)}}}))},_checkScroller:function(e,t){var i,s=e.scrollLeft>0?e.scrollLeft:Math.abs(e.scrollLeft);"thumb"==e.source&&(t.content()[0].scrollWidth-s==t.content()[0].clientWidth||0==s)&&(this.model.enableRTL&&(i=0==s?e.scrollData.scrollable:0,e.scrollData.sTop=e.model.scrollLeft=i,t.content().scrollLeft(i)),t._hScrollbar.refresh())},_showHideScroller:function(){this.getScrollObject().isVScroll()?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this.model.scrollSettings.autoHide||this.getHeaderContent().addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss"),0!=this.model.scrollSettings.frozenColumns||this._mediaQuery||(!this.element.find(".e-gridheader").hasClass("e-scrollcss")&&(this.model.filterSettings.filteredColumns.length||this._hiddenColumns.length&&!this.model.minWidth)?(this.getHeaderTable().removeAttr("style"),this.getContentTable().removeAttr("style")):(this.getHeaderContent().find("div table").first().width(this.getContentTable().width()),this.getContent().find("div table").first().width(this.getContentTable().width()),this.getHeaderTable().width(this.getContentTable().width()))),this._isHscrollcss()},_isHscrollcss:function(){var e=this.getContent().data("ejScroller"),t=e&&(e.isHScroll()||e.isVScroll())?"addClass":"removeClass";this.getHeaderContent().find(".e-headercontent")[t]("e-hscrollcss")},_initFrozenRows:function(){var e,i=this.getRows();this.model.currentViewData&&0!=this.model.currentViewData.length&&(this.model.scrollSettings.frozenRows>0&&null!=i?(this.model.scrollSettings.scroll=n.proxy(this._scroll,this),this.getContent().find(".e-frozeny").removeClass("e-frozeny").end().find(".e-frozenrow").removeClass("e-frozenrow"),!t.isNullOrUndefined(i[0][this.model.scrollSettings.frozenRows-1])&&!t.isNullOrUndefined(i[1][this.model.scrollSettings.frozenRows-1])&&this.model.scrollSettings.frozenColumns>0?n(i[0][this.model.scrollSettings.frozenRows-1].cells).add(i[1][this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"):t.isNullOrUndefined(this.getRowByIndex(this.model.scrollSettings.frozenRows-1)[0])||n(i[this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"),this.getContent().height()>this.model.scrollSettings.height&&(e=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),this.initialRender||t.isNullOrUndefined(e)||!t.isNullOrUndefined(e._vScrollbar)||this._getRowHeights(),this.model.scrollSettings.height=this._rowHeightCollection[Math.floor(this.model.scrollSettings.height/this._rowHeightCollection[1])]+18)):delete this.model.scrollSettings.scroll)},refreshScrollerEvent:function(){this.getContent().find(".e-content:first,.e-movablecontent").scroll(t.proxy(function(e){if(this.model.scrollSettings.targetPane?($movablecontent=n(e.currentTarget).hasClass("e-movablecontent")||!this.model.currentViewData||0==this.model.currentViewData.length?n(e.currentTarget):n(e.currentTarget).find(".e-movablecontent"),this.getHeaderContent().find(".e-movableheader").scrollLeft($movablecontent.scrollLeft())):this.getHeaderContent().find("div").first().scrollLeft(n(e.currentTarget).scrollLeft()),this.model.scrollSettings.frozenRows>0&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&this.model.isEdit){var t=e.target.scrollTop;this.getContent().find(".e-content").scrollTop(0),this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop+t,!0)}},this)),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").scroll(t.proxy(function(e){var t=n(e.currentTarget);this.model.scrollSettings.targetPane?(this.getContent().find(".e-movablecontent").scrollLeft(t.scrollLeft()),this.model.showSummary&&this.getFooterContent().find(".e-movablefooter").scrollLeft(t.scrollLeft())):(this.model.showSummary&&this.getFooterContent().scrollLeft(t.scrollLeft()),this.getContent().find(".e-content").first().scrollLeft(t.scrollLeft()))},this))},clearFiltering:function(e){if(e)this._clearFilter(e);else{for(var t=this.model.filterSettings.filteredColumns;0<t.length;)this._clearFilter(t[0].field);("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this.getHeaderTable().find(".e-filtericon").removeClass("e-filteredicon e-filternone")}},_clearFilter:function(e){var i,s=this.model.filterSettings.filterType;switch(t.isNullOrUndefined(this.getColumnByField(e).filterType)||(s=this.getColumnByField(e).filterType),s){case t.Grid.FilterType.FilterBar:-1!=n.inArray(this.getColumnByField(e),this.filterColumnCollection)&&(this.getHeaderTable().find("#"+e+"_filterBarcell").val(""),this._currentFilterbarValue="",n.inArray(e,this.filterColumnCollection),this._currentFilterColumn=this.getColumnByField(e),this._showFilterMsg());break;case t.Grid.FilterType.Menu:i="#"+this._id+"_"+this._$colType+"Dlg","boolean"==this._$colType?n(i).find(".e-value .e-js").ejCheckBox("model.checked",!1):"number"==this._$colType?n(i).find(".e-numerictextbox").ejNumericTextbox("model.value",""):n(i).find(".e-value input").val(""),(this._excelFilterRendered||this._isExcelFilter)&&delete this._excelFilter._predicates[0][e],this._$curFieldName=e;break;case t.Grid.FilterType.Excel:delete this._excelFilter._predicates[0][e],this._excelFilter.closeXFDialog(),this._$curFieldName=e}this.filterColumn(e,"","","or")},clearSearching:function(){this.element.find(".e-gridtoolbar #"+this._id+"_search").val(""),this.search(""),n.extend(this.model.searchSettings,this.defaults.searchSettings)},_renderByFrozenDesign:function(){var e=n(document.createElement("div")),i=this._getMetaColGroup().find("col"),s={};s.colgroup1=e.append(t.buildTag("colgroup").append(i.splice(0,this.model.scrollSettings.frozenColumns))).html(),s.colgroup2=e.html(t.buildTag("colgroup").append(i)).html(),this.getContent().find("div").first().get(0).innerHTML=n.render[this._id+"_FrozenTemplate"]({datas:this.model.currentViewData},s),this.setGridContentTable(this.getContent().find(".e-table").attr("role","grid"))},addFrozenTemplate:function(){var e="<div class='e-frozencontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup1}}<tbody>{{for datas tmpl='"+this._id+"_JSONFrozenTemplate'/}}</tbody></table></div><div class='e-movablecontent'><div class='e-movablecontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup2}}<tbody>{{for datas tmpl='"+this._id+"_JSONTemplate'/}}</tbody></table></div></div>",t={};t[this._id+"_FrozenTemplate"]=e,n.templates(t)},_getTopRow:function(e){var t=this.model.scrollSettings.frozenRows,i=0;if(e>10)for(i=0;i<this._rowHeightCollection.length;i++)if(this._rowHeightCollection[i]>e){t=this.model.scrollSettings.frozenRows+i-1;break}return{imaginaryIndex:t,actualIndex:i}},_showHideRow:function(e,t,i,s){var l=this.getRows();this.model.scrollSettings.frozenColumns>0?n(l[0]).slice(e,t).add(n(l[1]).slice(e,t).toArray())[i]():n(l).slice(e,t)[i](),this._currentTopFrozenRow="show"==i?e:t,this.getScrollObject()._changevHandlerPosition(s)},_scroll:function(e){var i,s,n,l,o;if(null!=e.scrollData&&"width"!=e.scrollData.dimension){e.cancel=!0,this.getRows();var r=this._getTopRow(e.scrollTop).imaginaryIndex;if(r>this._currentTopFrozenRow?this._showHideRow(this.model.scrollSettings.frozenRows,r,"hide",e.scrollTop):r<this._currentTopFrozenRow&&this._showHideRow(r,this._currentTopFrozenRow+1,"show",e.scrollTop),i=this.getContentTable().last().find("tr"),s=2*parseInt(i.last().find("td:first").css("border-top-width"))+1,e.scrollTop==this.getScrollObject()._vScrollbar.model.maximum&&i.last()[0].offsetTop+i.last().height()-s>this.element.find(".e-content").height()){for(n=i.last().prev()[0].offsetTop+i.last().prev().height(),l=1,o=i.length-2;n-s>this.element.find(".e-content").height();o++){n=i[o].offsetTop+i.eq(o).height(),l++;break}this._showHideRow(this.model.scrollSettings.frozenRows,r+l,"hide",e.scrollTop)}e.model.scrollTop=e.scrollTop}else t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)},_renderAlertDialog:function(){var e=t.buildTag("div.e-content",this._getLocalizedLabels().frozenColumnsMessage),i=t.buildTag("span.e-buttons","<input type='button' id="+this._id+"ConfirmDialogOK value='"+this._getLocalizedLabels().OkButton+"'/>");this._alertDialog=t.buildTag("div#"+this._id+"AlertDialog"),this._alertDialog.append(e).append(i),this.element.append(this._alertDialog),i.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:n.proxy(function(){this._alertDialog.ejDialog("close")},this)}),this._renderFDialog(this._id+"AlertDialog"),this._alertDialog.ejDialog({width:"auto",enableModal:!0})},_renderFDialog:function(e){n("#"+e).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_virtualScroll:function(e){var t,i;if(null!=e){var s=0,l=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,o=this.model.pageSettings,a=this.getContentTable()[0].tBodies[0],d=n(a).find("tr.e-virtualrow");if(o.totalPages=Math.ceil(l/o.pageSize),e.scrollTop!==r&&(e.model.scrollTop=e.scrollTop),e.reachedEnd!=r&&(e.model.reachedEnd=e.reachedEnd),(t=this._calculateCurrenPage(d,this.getContentTable(),e.model))>o.totalPages&&(t=o.totalPages),o.currentPage!=t&&-1==n.inArray((t-1)*o.pageSize,this.virtualLoadedPages)&&0==this.element.find(".gridform:visible").length&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded)o.currentPage=t;else{if(-1==n.inArray((t-1)*o.pageSize,this.virtualLoadedPages)){if("continuous"==this.model.scrollSettings.virtualScrollMode&&!e.reachedEnd)return;t==o.totalPages&&-1==n.inArray((t-2)*o.pageSize,this.virtualLoadedPages)&&(s++,this.set_currentPageIndex(t)),1==s&&(this._lastRow=!0),this.set_currentPageIndex(t)}o.currentPage=t}i=this._refreshVirtualPagerInfo(),this._showPagerInformation(i)}},_virtualViewScroll:function(e){if(null!=e){e.scrollTop!==r&&(e.model.scrollTop=e.scrollTop),e.reachedEnd!=r&&(e.model.reachedEnd=e.reachedEnd);var t=this._calculateCurrentVirtualIndex(e);this.model.isEdit&&this.cancelEdit(),-1==n.inArray(t,this._currentLoadedIndexes)&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded||this.set_currentVirtualIndex(t)}},_createPagerStatusBar:function(){var e,i,s=this.element.find(".e-pagerstatusbar");s.length&&s.remove(),e=t.buildTag("div.e-pagermsgdiv"),this.$pagerStatusBarDiv=t.buildTag("div.e-pagerstatusbar").append(e),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(i=t.buildTag("div.e-pagerfiltermsg").css("display","none"),this.$pagerStatusBarDiv.append(i)),this.$pagerStatusBarDiv.appendTo(this.element),this.$pagerStatusBarDiv.css("display","none")},_refreshVirtualContent:function(e){var t,i,s,l,o,r,a,d=this.getRowHeight(),h=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;null!=e&&(this._currentPage(e),t=this._refreshVirtualPagerInfo(),this._showPagerInformation(t)),i=this.getCurrentIndex(),s=this.getContentTable()[0].tBodies[0],i>0&&(l=document.createElement("tr"),n(l).addClass("e-virtualrow").css("height",d*i).prependTo(s)),i+this.model.pageSettings.pageSize<=h&&1!=this.getContentTable().find("tr").last().hasClass("e-virtualrow")&&0==this.model.scrollSettings.frozenColumns&&(o=document.createElement("tr"),r="normal"==this.model.scrollSettings.virtualScrollMode?d*(h-(i+this.model.pageSettings.pageSize)):1,n(o).addClass("e-virtualrow").css("height",r).appendTo(n(s))),this.virtualLoadedPages=[],this.orderedVirtualLoadedPage=[],this.virtualLoadedPages.push(i>=0?i:0),this.orderedVirtualLoadedPage.push(i>=0?i:0),(a=n(s).find("tr:not(.e-virtualrow)").attr("name",i>=0?i:0)[0])&&a.previousSibling&&(n(a.previousSibling).hasClass("e-virtualrow")||a.previousSibling.offsetTop>i*this.getContent().height())&&(this.getContent().children("div").first().scrollTop(this.getContent().find(".content").scrollTop()-(this.getContent().find(".content").scrollTop()-a.offsetTop)),this._isVirtualRecordsLoaded=!0)},isIntermediate:function(){return this.model.currentIndex<this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1)},_refreshVirtualView:function(e){var t,i,s,l,o,r,a,d,h;if(this._singleView)this._singleView=!1,this._addLastRow(),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),d=this._currentVirtualIndex.toString(32),n(this._gridRows).attr("name",d),this._virtualLoadedRows[this._currentVirtualIndex]=this._gridRows,this._eventBindings();else{if(t=this._virtualRowCount,e)e>this._totalVirtualViews&&(e=1,i=!0),this._currentVirtualIndex=e,this._virtualLoadedRecords[e]?(l=this.getScrollObject(),s=Math.ceil((l.scrollTop()+this.model.scrollSettings.height)/this._vRowHeight/this.model.pageSettings.pageSize)):(this._virtualDataRefresh||this._currentVirtualIndex==this._totalVirtualViews||(i=!0),s=Math.ceil(e*this._virtualRowCount/this.model.pageSettings.pageSize)),this._refreshVirtualViewScroller(i),s>this.model.pageSettings.totalPages&&(s=this.model.pageSettings.totalPages),s<=0&&(s=1),-1==n.inArray(s,this._virtualLoadedPages)?this.gotoPage(s):(this._currentPage(s),this._needPaging=!this._checkCurrentVirtualView(this._virtualLoadedRecords,e),this._getVirtualLoadedRecords(this.model.query),this._replacingVirtualContent());else{if(this._refreshVirtualViewDetails(),o=n(this.getContentTable()[0].rows),this._setVirtualTopBottom(),this.initialRender){for(h=0;h<this._currentLoadedIndexes.length;h++)r=this._currentLoadedIndexes[h],viewIndex=(h+1)*t,viewCount=h*t,n(o[viewIndex-1]).addClass("e-virtualview"+r),d=r.toString(32),a=o.slice(viewCount,viewCount+t).attr("name",d).detach(),this._virtualLoadedRows[r]=a,a.appendTo(this.getContentTable());this._currentVirtualIndex>1&&this._refreshVirtualViewScroller()}this._eventBindings()}-1==n.inArray(this._currentPage(),this._virtualLoadedPages)&&this._virtualLoadedPages.push(this._currentPage())}if(!e&&(this.model.queryCellInfo||this.model.rowDataBound))for(h=0;h<this._currentLoadedIndexes.length;h++)-1==n.inArray(this._currentLoadedIndexes[h],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[h]);this._isThumbScroll=!1,this._virtualDataRefresh=!1},_refreshVirtualViewData:function(){this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualLoadedPages=[],this._virtualPageRecords={},this._queryCellView=[],null!=this.model.pageSettings.totalPages&&this._currentPage()>this.model.pageSettings.totalPages&&(this._currentPage(1),this._currentVirtualIndex=1)},setCurrentPageData:function(e){this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._refreshVirtualViewDetails(),this._setVirtualLoadedRecords(e,this._currentPage()),this._refreshVirtualView(this._currentVirtualIndex))},_refreshVirtualViewScroller:function(e){var t;this.initialRender&&!this.model.scrollSettings.scrollTop||e?(this._vRowHeight,t=this.model.currentIndex*this._vRowHeight):t=this._scrollObject.model.scrollTop,this.getContent().ejScroller("model.scrollTop",t),this._scrollValue=t},_calculateCurrentViewPage:function(e){e||(e=this._scrollObject.model);var t=this.model.pageSettings.pageSize,i=Math.ceil((e.scrollTop+this.model.scrollSettings.height)/this._vRowHeight/t);return null==this.model.pageSettings.totalPages&&(this.model.pageSettings.totalPages=Math.ceil(this._getVirtualTotalRecord()/t)),i>this.model.pageSettings.totalPages&&(i=this.model.pageSettings.totalPages),this.model.pageSettings.currentPage=i,i},_calculateCurrentVirtualIndex:function(e){var t,i,s,l,o,r,a,d,h,c=e.model,u=(this._getVirtualTotalRecord(),[]),m=c.scrollTop;if(t=(m+this.model.scrollSettings.height)/this._vRowHeight/this._virtualRowCount,t=this._prevVirtualIndex>this._currentVirtualIndex&&m<=this._scrollValue?Math.floor(t):Math.ceil(t),m>=this._scrollValue&&"continuous"==c.virtualScrollMode&&c.reachedEnd&&(t+=1),t>this._totalVirtualViews&&(t=this._totalVirtualViews),t<=0&&(t=1),-1!==n.inArray(t,this._currentLoadedIndexes)&&this._virtualLoadedRows[t]&&m!=e.scrollData.scrollable){for(r=(a=this.getContentTable()[0].rows).length,d=this.getContent().find(".e-virtualtop").height(),s=m>=this._scrollValue,h=0;h<r;h++){if((o=(l=a[h]).offsetHeight+l.offsetTop+d)>m+this.model.scrollSettings.height){0===u.length&&0!==h&&(u=[a[l.offsetTop<=m+this.model.scrollSettings.height?h:h-1]]);break}if(o>=m&&o<=m+this.model.scrollSettings.height&&(u.push(l),!1===s&&u.length>1))break}(i=n(m>=this._scrollValue?u[u.length-1]:u[0])).length&&(t=parseInt(i.attr("name"),32))}return this._scrollValue=m,t},_calculateCurrenPage:function(e,t,i){var s,l,o,r,a,d,h,c,u,m,p,g,f,_=this.model.pageSettings.pageSize,v=this,b=[],w=this.getRowHeight();if(s=(i.scrollTop+this.model.scrollSettings.height)/w/_,h=this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1),s=(c=this.getContentTable().find("tr[name="+h+"]").eq(0)).length&&c.offset().top>0&&s>=1&&i.scrollTop<this._scrollValue&&-1!==this.virtualLoadedPages.indexOf(Math.ceil(s-1)*_)?Math.floor(s):Math.ceil(s),i.scrollTop>=this._scrollValue&&"continuous"==i.virtualScrollMode&&i.reachedEnd&&(s=this.virtualLoadedPages[this.virtualLoadedPages.length-1]/_+2),-1!==n.inArray((s-1)*_,this.virtualLoadedPages)){for(d=(u=this.getContentTable().children("tbody").children("tr")).length,o=i.scrollTop>=this._scrollValue,m=0;m<d;m++){if((a=(r=u[m]).offsetHeight+r.offsetTop)>i.scrollTop+v.model.scrollSettings.height){0===b.length&&0!==m&&(b=[u[r.offsetTop<=i.scrollTop+v.model.scrollSettings.height?m:m-1]]);break}if(a>=i.scrollTop&&a<=i.scrollTop+v.model.scrollSettings.height&&(b.push(r),!1===o&&b.length>1))break}(l=n(i.scrollTop>=this._scrollValue?b[b.length-1]:b[0])).hasClass("e-virtualrow")?1===b.length&&s++:s=parseInt(l.attr("name"),10)/_+1}for(this._scrollValue=i.scrollTop,p=0;p<e.length;p++)if((g=e[p]).offsetTop+g.offsetHeight>=i.scrollTop)return f=this._calculatePrevPage(e,t,i),this._prevPageNo=f,0==s&&(s=1),s>this.model.pageSettings.totalPages?this.model.pageSettings.totalPages:s;return s},_calculatePrevPage:function(e,t,i){for(var s,l,o=0;o<e.length;o++)if((s=e[o]).offsetTop+s.offsetHeight>=i.scrollTop&&null!=(l=n(s).prevAll("tr[name]")[0]))return Math.ceil(parseInt(n(l).attr("name"),10)/this.model.pageSettings.pageSize)+1;return-1},_refreshVirtualPagerInfo:function(){var e={};return e.pageSize=this.model.pageSettings.pageSize,e.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,0==e.totalRecordsCount&&this._currentPage(0),e.currentPage=this._currentPage(),e.totalPages=Math.ceil(e.totalRecordsCount/e.pageSize),e},_showPagerInformation:function(e){var t=(e.currentPage-1)*e.pageSize;n(this.$pagerStatusBarDiv).find("div:first").html(String.format(this.localizedLabels.PagerInfo,e.currentPage,e.totalPages,e.totalRecordsCount),t,t+e.pageSize),n(this.$pagerStatusBarDiv).css("display","block")},_cellMerging:function(e){e.colMerge=function(e){if(-1==this.cell.className.indexOf("e-colmerge")){this.cell.className+=" e-colmerge",this.model.columns.length-this.cell.cellIndex<e&&(e=this.model.columns.length-this.cell.cellIndex),this.cell.colSpan=e;for(var i=1;i<e;i++)t.isNullOrUndefined(this.cell.parentElement.children[this.cell.cellIndex+i])||(this.cell.parentElement.children[this.cell.cellIndex+i].className+=" e-hide")}},e.rowMerge=function(e){var i,s;if(-1==this.cell.className.indexOf("e-rowmerge"))for(this.cell.className+=" e-rowmerge",(i=this.cell.parentNode.parentNode).rows.length-this.cell.parentElement.rowIndex<e&&(e=i.rows.length-this.cell.parentElement.rowIndex),this.cell.rowSpan=e,s=0;s<e-1&&!t.isNullOrUndefined(i.children[this.cell.parentElement.rowIndex+s].nextSibling);s++)(!n(".e-grid").children().is(".e-dialog")||-1!=n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")||this.model.allowFiltering)&&(i.children[this.cell.parentElement.rowIndex+s].nextSibling.children[this.cell.cellIndex].className+=" e-merged e-hide")},e.merge=function(i,s){var l,o,r,a;if(i>1&&s>1){if(-1==this.cell.className.indexOf("e-colmerge")){if(this.cell.className+=" e-colmerge",(l=this.cell.parentNode.parentNode).rows.length-this.cell.parentElement.rowIndex<s&&(s=l.rows.length-this.cell.parentElement.rowIndex),!n(".e-grid").children().is(".e-dialog")||-1!=n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")||this.model.allowFiltering)for(o=0;o<s&&!t.isNullOrUndefined(l.children[this.cell.parentElement.rowIndex+o]);o++)for(r=l.children[this.cell.parentElement.rowIndex+o].children[this.cell.cellIndex],this.model.columns.length-r.cellIndex<i&&(i=this.model.columns.length-r.cellIndex),r.colSpan=i,a=1;a<i;a++)t.isNullOrUndefined(r.parentElement.children[this.cell.cellIndex+a])||(r.parentElement.children[this.cell.cellIndex+a].className+=" e-hide");else for(this.cell.colSpan=i,a=1;a<i;a++)t.isNullOrUndefined(this.cell.nextSibling)||(this.cell.parentElement.children[this.cell.cellIndex+a].className+=" e-hide");e.rowMerge(s)}}else i>1&&e.colMerge(i),s>1&&e.rowMerge(s)}},_replacingContent:function(){var e,i,s,l,o,a,d,h,c,u,m,p,g,f,_,v,b,w,C,y=document.createElement("div"),S=this.getCurrentIndex(),x=this.getContentTable()[0],T=n(x).find("colgroup").first(),k=this.getRowHeight();T.replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&T.prepend(this._getIndentCol()),e=x.tBodies[0],i=this.model.currentViewData,t.isNullOrUndefined(this._currentPageData)?this._virtualLoadedRecords[this._currentPage()]=i:(this._virtualLoadedRecords[this._currentPage()]=this._currentPageData,this._currentPageData=null);var D=this,I=n("<tbody></tbody>").append(n.render[this._id+"_JSONTemplate"](i)).children("tr");if(this._allowcolumnSelection&&this.selectedColumnIndexes.length>0)for(v=0;v<this.selectedColumnIndexes.length;v++)s=this.selectedColumnIndexes[v]+1,I.find("td:nth-of-type("+s+")").addClass("e-columnselection");for(this.virtualLoadedPages.push(S>=0?S:0),l=t.dataUtil.mergeSort(t.distinct(this.virtualLoadedPages)),n(I).attr("name",S),o=t.dataUtil.min(l),a=t.dataUtil.max(l),n(e).children(".e-virtualrow").remove(),_=0;_<l.length;_++)d=l[_],h=l[_-1],(d!=this.orderedVirtualLoadedPage[_]||this.orderedVirtualLoadedPage[_]==r)&&(h!=r?I.insertAfter(n(e).children("[name="+h+"]:last")):I.insertBefore(n(e).children("[name="+this.orderedVirtualLoadedPage[_]+"]:first")),this.orderedVirtualLoadedPage=l),0!=d&&(c=d-(d==o?o:h)-D.model.pageSettings.pageSize)>0&&(u=document.createElement("tr"),n(u).addClass("e-virtualrow").css("height",k*c).insertBefore(n(e).children("[name="+d+"]:first"))),d==a&&(m=D._gridRecordsCount-a-D.model.pageSettings.pageSize)>0&&(p=document.createElement("tr"),n(p).addClass("e-virtualrow").css("height",k*m).appendTo(e));o>0&&(g=document.createElement("tr"),n(g).addClass("e-virtualrow").css("height",k*o).prependTo(e));var O=this.getContent(),A=n(e).children("tr[name="+S+"]")[0],L=A.previousSibling,R=O.height(),E=A.offsetTop;if(this._virtaulUnSel)for(f=n.extend(!0,[],this._virtaulUnSel),_=0;_<f.length;_++){var N=f[_],M=this.model.pageSettings.currentPage;(N%this.model.pageSettings.pageSize==0?parseInt(N/this.model.pageSettings.pageSize):parseInt(N/this.model.pageSettings.pageSize)+1)==M&&(v=N%this.model.pageSettings.pageSize,n(e).find("tr[name="+S+"]").eq(v).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),-1!=(b=this._virtaulUnSel.indexOf(N))&&this._virtaulUnSel.splice(b,1))}(A&&L&&(this._virIndex||n(L).hasClass("e-virtualrow")||L.offsetTop>S*R)&&(this._gridRecordsCount-S>=this.model.pageSettings.pageSize||A.offsetParent.offsetHeight-E<R)||this._lastRow)&&(this._lastRow&&(this._lastRow=!1),this._virIndex&&(this._virIndex=!1),this._isVirtualRecordsLoaded=!0,O.find(".e-content").scrollTop(E),this._scrollValue=this.getContent()[0].firstChild.scrollTop),n(x).get(0),y.firstChild,this._currentJsonData=i,this._gridRows=n(x).get(0).rows,w=n(x).find(".e-virtualrow").last(),C="normal"==this.model.scrollSettings.virtualScrollMode?w.height()-(n(x).height()-this._gridRecordsCount*k):1,w.css("height",C),this._eventBindings()},_replacingVirtualContent:function(){var e,t,i,s,l,o,r,a=this.getContentTable()[0],d=this._currentLoadedIndexes,h=n("<tbody></tbody>");if(this._checkCurrentVirtualView(this._virtualLoadedRows,this._currentVirtualIndex)){for(e=[],r=0;r<d.length;r++)n.merge(e,this._virtualLoadedRows[d[r]]);n(h).append(e)}else for(n("<tbody></tbody>"),r=0;r<d.length;r++)if(t=d[r],i=this._virtualLoadedRows[t])t<this._currentVirtualIndex?(o=h.find(".e-virtualview"+t)).length?n(i).insertBefore(o):h.prepend(i):n(i).insertAfter(h.find(".e-virtualview"+(t-1)));else{var c=n("<tbody></tbody>").append(n.render[this._id+"_JSONTemplate"](this._virtualLoadedRecords[t]))[0].rows,u=c.length-1;n(c[u]).addClass("e-virtualview"+t),s=t.toString(32),((l=n(c).attr("name",s)).length==this._virtualRowCount||t==this._totalVirtualViews)&&(this._virtualLoadedRows[t]=l,h.append(c))}if(a.replaceChild(h[0],a.lastChild),n(a.rows).removeClass("e-hover"),this._setVirtualTopBottom(),(this._isThumbScroll||this._remoteRefresh)&&(this._scrollObject._content[0].scrollTop=this._scrollObject.scrollTop(),this._isThumbScroll=this._remoteRefresh=!1),this.model.allowSelection&&this._checkVirtualSelection(),this._gridRows=a.rows,this._currentJsonData=this.model.currentViewData,this._checkCurrentVirtualView(this._queryCellView,this._currentVirtualIndex)||this._eventBindings(),this.model.queryCellInfo||this.model.rowDataBound)for(r=0;r<this._currentLoadedIndexes.length;r++)-1==n.inArray(this._currentLoadedIndexes[r],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[r])},_setVirtualTopBottom:function(){var e,i,s,l,o,r,a,d,h,c=this.getContentTable()[0],u=this._vRowHeight,m=t.dataUtil.mergeSort(t.distinct(this._currentLoadedIndexes)),p=t.dataUtil.min(m),g=t.dataUtil.max(m),f=this._getVirtualTotalRecord();if("continuous"==this.model.scrollSettings.virtualScrollMode&&this._virtualLoadedRows[g+1]&&(s=Object.keys(this._virtualLoadedRows),g=(i=parseInt(t.dataUtil.max(s),10))-g),e=g*this._virtualRowCount*u,-1!=n.inArray(this._totalVirtualViews,this._currentLoadedIndexes)&&this._currentVirtualIndex!=this._totalVirtualViews&&(e=(f-(this._virtualRowCount-this._lastViewData))*u),l=f*u-e,"continuous"!=this.model.scrollSettings.virtualScrollMode||this._virtualLoadedRows[g+1]||(l=i&&i<=g+1?l:1),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),o=1e6,l>0&&this._getVirtualTotalRecord()>2*this._virtualRowCount)if(Math.round(l).toString().length<7)t.buildTag("div.e-virtualbottom","",{height:l}).insertAfter(c);else for(t.buildTag("div.e-virtualbottom").insertAfter(c),a=Math.ceil(l/o),d=0;d<a;d++)h=o,d==a-1&&(h=l%o),n(c).next().append(t.buildTag("div","",{height:h}));if(p>1)if(r=(p-1)*this._virtualRowCount*u,Math.round(r).toString().length<7)t.buildTag("div.e-virtualtop","",{height:r}).insertBefore(c);else for(t.buildTag("div.e-virtualtop").insertBefore(c),a=Math.ceil(r/o),d=0;d<a;d++)h=o,d==a-1&&(h=r%o),n(c).prev().append(t.buildTag("div","",{height:h}));this._scrollObject.model.scrollTop!=this._scrollValue&&this.getContent().ejScroller("model.scrollTop",this._scrollValue)},_checkVirtualSelection:function(){for(var e,t,i,s,l,o,r,a,d,h=this.getContentTable()[0],c=0;c<this.selectedRowsIndexes.length;c++)t=this.selectedRowsIndexes[c],i=this._getSelectedViewData(t).viewIndex,-1!=n.inArray(i,this._currentLoadedIndexes)&&(e=t%this._virtualRowCount+this._currentLoadedIndexes.indexOf(i)*this._virtualRowCount,n(h.rows[e].cells).hasClass("e-selectionbackground")||(n(n(h.rows[e]).attr("aria-selected","true")[0].cells).addClass("e-selectionbackground e-active"),this.model.selectedRecords[c]=this._virtualLoadedRecords[i][e%this._virtualRowCount]));for(c=0;c<this._rowIndexesColl.length;c++)if(t=this._rowIndexesColl[c],i=this._getSelectedViewData(t).viewIndex,-1!=n.inArray(i,this._currentLoadedIndexes)&&-1==n.inArray(t,this._virtualRowCellSelIndex)||this._virtualDataRefresh)for(s=n.inArray(t,this._rowIndexesColl),l=this.selectedRowCellIndexes[s].cellIndex,o=0;o<l.length;o++)this._selectMultipleCells(t,l[o]);for(r=n(h.rows).find(".e-active, .e-cellselectionbackground").closest("tr"),c=0;c<r.length;c++){var u=parseInt(n(r[c]).attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-n(r[c]).index()%this._virtualRowCount),m=n(r[c]).index();this.selectedRowsIndexes.length&&-1==n.inArray(u,this.selectedRowsIndexes)&&(this._clearVirtualSelection=!0,this.clearSelection(m)),this._rowIndexesColl.length&&-1==n.inArray(u,this._rowIndexesColl)&&n(this.getRowByIndex(m)[0].cells).removeClass("e-cellselectionbackground e-activecell")}for(n(h.rows).find(".e-columnselection").removeClass("e-columnselection"),a=0;a<this.selectedColumnIndexes.length;a++)d=this.selectedColumnIndexes[a]+1,n(h.rows).find("td:nth-of-type("+d+")").addClass("e-columnselection");this._clearVirtualSelection=!1},_refreshPagerTotalRecordsCount:function(){this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()})},_maxZindex:function(){var e=1;return((e=Math.max.apply(null,n.map(n("body *"),function(e){if("absolute"==n(e).css("position"))return parseInt(n(e).css("z-index"))||1})))==r||null==e)&&(e=1),e},_keyPressed:function(e,i,s,l){var o,a,d,h,c,u,m,p,g,f,_,v,b=n(i);if(b.hasClass("e-tooltxt")&&13==s.code)return o={currentTarget:i,target:i.firstChild},n(i).closest(".e-gridtoolbar").ejToolbar("instance")._trigger("click",o),!1;if(!this._allowcellSelection||this._previousRowCellIndex&&0!=this._previousRowCellIndex.length||(this._previousRowCellIndex=[],this._previousRowCellIndex.push([0,[0]])),b.hasClass("e-ddl")&&13==s.code&&n(document.activeElement).parents("td").hasClass("e-templatecell")||!this.model.allowKeyboardNavigation||"INPUT"==i.tagName&&-1==this.model.keyConfigs[e].indexOf(",")&&40!=s.code&&38!=s.code&&13!=s.code&&27!=s.code&&9!=s.code||String.fromCharCode(s.code).toLowerCase()==this.element[0].accessKey.toLowerCase()||"checkbox"==n(i).prop("type")&&13!=s.code&&9!=s.code&&27!=s.code||"batch"==this.model.editSettings.editMode&&"INPUT"==i.tagName&&13!=s.code&&9!=s.code&&27!=s.code&&(0!=i.selectionStart&&"moveCellRight"!=e||i.selectionEnd!=i.value.length&&"moveCellLeft"!=e)||this.model.allowFiltering&&b.hasClass("e-filtertext")&&13==s.code||b.hasClass("e-fltrbtn")&&13==s.code||("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode)&&n(i).closest("#"+this._id+"EditForm").length||n(i).parent().siblings("#"+this._id+"EditForm").length||13==s.code&&b.parent().hasClass("e-unboundcelldiv"))return!0;if(13==s.code&&"INPUT"==i.tagName&&b.closest("#"+this._id+"_search").length&&(e="searchRequest"),13==s.code&&null!=this._excelFilter&&this._excelFilter._openedFltr.length&&this._excelFilter._openedFltr.is(":visible")&&(e="excelfilter"),13==s.code&&n(i).hasClass("e-gridtoolbar")&&(toolbarId=b.find(".e-hover").attr("Id"),e="toolbarOperationRequest"),!this.model.isEdit&&"cancelRequest"==e)return this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),!0;if("true"==n(i).find("input.e-dropdownlist").attr("aria-expanded")&&this.model.isEdit&&"saveRequest"==e)return!0;if(null!=this.getPager()&&(d=(a=this.getPager().ejPager("model")).currentPage),h=!1,(b=n(i)).closest(".e-grid").attr("Id")===this._id){switch(e){case"insertRecord":!t.gridFeatures.edit||this.model.isEdit||this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||this._toolbarOperation(this._id+"_add");break;case"toolbarOperationRequest":this._toolbarOperation(toolbarId),this.element.focus();break;case"searchRequest":this.search(b.val());break;case"excelfilter":u=this._id+this._excelFilter._$colType,this._excelFilter._openedFltr.hasClass("e-dlgcustom")&&(u+="Custom"),this._excelFilter._openedFltr.find("#"+u+"_OkBtn").trigger("click");break;case"saveRequest":t.gridFeatures.edit&&(b.blur(),"batch"==this.model.editSettings.editMode?(m=n(this.getRowByIndex(this._bulkEditCellDetails.rowIndex)),this.model.isEdit&&m.hasClass("e-insertedrow")&&this._batchCellValidation(this._bulkEditCellDetails.rowIndex),this._moveCurrentCell("down")):this._toolbarOperation(this._id+"_update"),l.stopPropagation());break;case"cancelRequest":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_cancel");break;case"deleteRecord":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_delete");break;case"editRecord":t.gridFeatures.edit&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&this._toolbarOperation(this._id+"_edit");break;case"totalGroupCollapse":t.gridFeatures.group&&(this.collapseAll(),this.element.focus());break;case"totalGroupExpand":t.gridFeatures.group&&(this.expandAll(),this.element.focus());break;case"selectedGroupExpand":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),c=this._$currentTr.parents("tr").first().prev().find(".e-recordpluscollapse"),this.expandCollapse(c));break;case"selectedGroupCollapse":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),c=this._$currentTr.parents("tr").first().prev().find(".e-recordplusexpand"),this.expandCollapse(c));break;case"firstRowSelection":t.gridFeatures.selection&&this.selectRows(0);break;case"lastRowSelection":t.gridFeatures.selection&&(f=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?n(this.getRows()[0]).length-1:n(this._excludeDetailRows()).length-1),this.selectRows(f);break;case"rowUpSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),(p=null!=this._traverseRow?this._traverseRow:this._selectedRow())>0&&(this._nextRow=p,this._prevRow=p-1,n(this.getContent().find("tr.e-traverse")[0]).removeClass("e-traverse"),this.getRowByIndex(this._prevRow).addClass("e-traverse"),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g));break;case"rowDownSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),((p=null!=this._traverseRow?this._traverseRow:this._selectedRow())+1<this.model.currentViewData.length||this.model.scrollSettings.allowVirtualScrolling)&&(this._prevRow=p,this._nextRow=p+1,n(this.getContent().find("tr.e-traverse")[0]).removeClass("e-traverse"),this.getRowByIndex(this._nextRow).addClass("e-traverse"),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g));break;case"randomSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),"multiple"==this.model.selectionType&&(this.multiSelectCtrlRequest=!0),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g),-1!=this._traverseRow&&(this.model.selectionSettings.enableToggle&&1==this.getSelectedRecords().length&&-1!=n.inArray(this._traverseRow,this.selectedRowsIndexes)?this.clearSelection(selectedIndex):this.selectRows(this._traverseRow)),this.getRowByIndex(p).removeClass("e-traverse"),this.multiSelectCtrlRequest=!1;break;case"upArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&b.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._selectedRow()>0&&!this.model.scrollSettings.enableVirtualization&&(this._enableCheckSelect||this.selectRows(this._selectedRow()-1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("up")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&0!=this._previousRowCellIndex[0][0]&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]-1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"downArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&b.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;-1==this._selectedRow()&&(this.model.selectedRowIndex=0),f=this._excludeDetailRows().length-1,this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(f=this.getRows()[0].length-1),this._selectedRow()==f||-1==this._selectedRow()||this.model.scrollSettings.enableVirtualization||(this._enableCheckSelect||this.selectRows(this._selectedRow()+1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&this._previousRowCellIndex[0][0]!=f&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]+1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"rightArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;f=n(this.getRows()).length-1,this._previousRowCellIndex&&this._previousRowCellIndex[0][1]==this.model.columns.length-1&&this._previousRowCellIndex[0][0]!=f?this.selectCells([[this._previousRowCellIndex[0][0]+1,[0]]]):this._previousRowCellIndex&&this._previousRowCellIndex[0][1]!=this.model.columns.length-1&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])+1]]])}break;case"leftArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._previousRowCellIndex&&0==this._previousRowCellIndex[0][1]&&0!=this._previousRowCellIndex[0][0]?this.selectCells([[this._previousRowCellIndex[0][0]-1,[this.model.columns.length-1]]]):this._previousRowCellIndex&&0!=this._previousRowCellIndex[0][1]&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])-1]]])}break;case"firstCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;(f=n(this.getRows()).length-1)>-1&&this.selectCells([[0,[0]]])}break;case"lastCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;(f=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?this.getRows()[0].length-1:n(this._excludeDetailRows()).length-1)>-1&&this.selectCells([[f,[this.model.columns.length-1]]])}break;case"nextPage":null!=this.getPager()&&(d+=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"previousPage":null!=this.getPager()&&(d-=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"lastPage":null!=this.getPager()&&(d=a.totalPages);break;case"firstPage":null!=this.getPager()&&(d=1);break;case"nextPager":null!=this.getPager()&&(d=Math.ceil(a.currentPage/a.pageCount)*a.pageCount+1);break;case"previousPager":null!=this.getPager()&&(d=(Math.floor(a.currentPage/a.pageCount)-1)*a.pageCount+1);break;case"moveCellLeft":"batch"==this.model.editSettings.editMode?(this._tabKey=!0,h=this._moveCurrentCell("left")):h=!0;break;case"moveCellRight":"batch"==this.model.editSettings.editMode&&b?(this._tabKey=!0,h=this._moveCurrentCell("right")):h=!0;break;case"multiSelectionByDownArrow":t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(f=this._excludeDetailRows().length-1,b=this.element.find(".e-gridcontent").find(".e-rowcell"),this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(f=this.getRows()[0].length-1),this._selectedRow()<=f&&-1!=this._selectedRow()&&(_=this._selectedRow()+1,v=this._previousIndex,this.selectRows(v,_,b),_-1==f&&(this.selectRows(v,f),_=f)),this._selectedRow(_),this._previousIndex=v),"batch"==this.model.editSettings.editMode&&this.element.focus();break;case"multiSelectionByUpArrow":t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(f=this._excludeDetailRows().length-1,b=this.element.find(".e-gridcontent").find(".e-rowcell"),this._selectedRow()>=0&&this._selectedRow()>=-1&&(_=this._selectedRow()-1,v=this._previousIndex,this.selectRows(v,_,b),_<0&&(this.selectRows(v,0),_=0)),this._selectedRow(_),this._previousIndex=v),"batch"==this.model.editSettings.editMode&&this.element.focus();break;default:h=!0}return null!=this.getPager()&&d<=a.totalPages&&a.currentPage!==d&&"searchRequest"!=e&&"deleteRecord"!==e&&this.getPager().ejPager("goToPage",d),h}},_findColumnsWidth:function(){for(var e=this.getHeaderTable().find(".e-headercell").not(".e-stackedHeaderCell, .e-detailheadercell"),t=0;t<this.model.columns.length;t++)this.model.columns[t].visible&&(this.columnsWidthCollection[t]=e.eq(t+0).outerWidth())},_calculateWidth:function(){for(var e=this.getHeaderTable().find(".e-columnheader").last().find("th:visible"),t=0,i=0;i<e.length;i++)t+=e.eq(i).outerWidth();return t},_initIndicators:function(){var e=this._id+"_ColumnDropIndicator";n("#"+e).length&&n("#"+e).remove(),this._Indicator=document.createElement("DIV"),n(this._Indicator).attr("id",e).addClass("e-columndropindicator").addClass("e-dropAcceptor").appendTo(document.body),n(this._Indicator).css({display:"none"})},_refreshGroupSummary:function(){var e,t,i=this.getHeaderContent().find("colgroup col").clone();for(i.splice(0,this.model.groupSettings.groupedColumns.length),e=this.getContentTable().find(".e-groupsummary colgroup"),t=0;t<e.length;t++)n(e[t]).find(".e-summary").is("visible")||n(e[t]).find(".e-summary").show(),n(e[t]).find("col:not('.e-summary')").remove(),n(e[t]).append(i.clone())},reorderColumns:function(e,t){var i,s;"string"==typeof e&&"string"==typeof t?(i=this.getColumnIndexByField(e),s=this.getColumnIndexByField(t)):(i=e,s=t),-1!=i&&-1!=s&&"string"!=typeof i&&"string"!=typeof s&&(this.set_dropColumn(i,s),this.model.showStackedHeader&&this._refreshStackedHeader(),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualDataRefresh=!0,this._queryCellView=[],this._virtualLoadedRows={},this._refreshVirtualView(this._currentVirtualIndex)):this._refreshVirtualContent()))},columns:function(e,s){var l,o,r,a,d;if(!t.isNullOrUndefined(e)){for(l=!1,"string"==typeof e?(e=[e],l=!0):e instanceof Array&&e.length&&"string"==typeof e[0]&&(l=!0),i=0;i<e.length;i++)o=l?e[i]:e[i].field,r=l?e[i]:e[i].headerText,a=!t.isNullOrUndefined(o)&&""!=o||!t.isNullOrUndefined(r)&&""!=r?t.isNullOrUndefined(o)||""==o?n.inArray(this.getColumnByHeaderText(r),this.model.columns):n.inArray(this.getColumnByField(o),this.model.columns):-1,"add"==s||t.isNullOrUndefined(s)?-1==a?this.model.columns.push(l?{field:e[i]}:e[i]):this.model.columns[a]=l?{field:e[i]}:e[i]:-1!=a&&this.model.columns.splice(a,1);for(this.columnsWidthCollection=[],tooltip=!1,d=0;d<this.model.columns.length;d++)this.columnsWidthCollection.push(this.model.columns[d].width),t.isNullOrUndefined(tooltip)||(tooltip=!0);this._enableRowHover(tooltip),this._refreshHeader(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.refreshContent(!0),this.model.allowScrolling&&(this.refreshScrollerEvent(),this.model.allowResizeToFit&&this.getContent().ejScroller("isVScroll")&&this._showHideScroller())}},_enableRowHover:function(e){var i,s=!0;if(t.isNullOrUndefined(e)){for(i=0;i<this.model.columns.length;i++)if(!t.isNullOrUndefined(this.model.columns[i].tooltip)){s=!0;break}}else s=e;this.model.enableRowHover||s?this._on(this.element,"mouseenter mouseleave",".e-gridcontent tr td",this._rowHover):this._off(this.element,"mouseenter mouseleave",".e-gridcontent tr td")},_rowHover:function(e){var i,s,l=n(e.target);if(i=this.model.scrollSettings.frozenColumns?n(this.getRows()):this.element.find(".e-row.e-hover,.e-alt_row.e-hover"),(!l.closest("#"+this._id+"EditForm").length||!l.hasClass("e-rowcell"))&&l.hasClass("e-rowcell"))return"mouseenter"==e.type&&l.hasClass("e-gridtooltip")&&this._showTooltip(l),this.model.enableRowHover&&(this.element.find(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,"mouseenter"!=e.type||this._dragActive?(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(i[0])&&!t.isNullOrUndefined(i[1])&&(i=n(i[0]).add(i[1])),i.removeClass("e-hover")):this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(i[0])&&!t.isNullOrUndefined(i[1])?((i=n(i[0]).add(i[1])).removeClass("e-hover"),-1!=(s=this.getIndexByRow(l.parent()))&&this.getRowByIndex(s).addClass("e-hover")):(i.removeClass("e-hover"),(l.parent().hasClass("e-row")||l.parent().hasClass("e-alt_row"))&&l.parent().addClass("e-hover"))),!1},_showTooltip:function(e,i){var s,l,o,r,a,d,h,c,u=e.index(),m=e.hasClass("e-stackedHeaderCell"),p={};if(e.hasClass("e-headercelldiv")&&(u=e.parent(".e-headercell").index()-this.model.groupSettings.groupedColumns.length),!m&&(this.model.childGrid||this.model.detailsTemplate)&&u--,this.model.scrollSettings.frozenColumns>0&&(e.closest(".e-movableheaderdiv").length||e.closest(".e-movablecontentdiv").length)&&(u+=this.model.scrollSettings.frozenColumns),(s=m?this._getStackedColumnByTarget(e):this.getColumnByIndex(u)).clipMode!=t.Grid.ClipMode.Ellipsis){if(s.clipMode==t.Grid.ClipMode.EllipsisWithTooltip&&(l=e,e.find("span").hasClass("e-tooltip")||($span=t.buildTag("span.e-tooltip",{},{}),$span.html(e.html()),l.append($span)),l.find("span.e-tooltip").css("display","inline-block"),o=l.find("span:first")[0].getBoundingClientRect().width,l.find("span.e-tooltip").remove(),e.width()>o))return void e.removeAttr("title");if(r=document.createElement("script"),t.isNullOrUndefined(s.tooltip)&&t.isNullOrUndefined(s.headerTooltip))return;r.id=(this._id+s.headerText+n.inArray(s,this.model.columns)+"_TemplateToolTip").split(" ").join(""),r.type="text/x-template",d=i?"headerTooltip":"tooltip",t.isNullOrUndefined(s[d])||"#"===s[d].slice(0,1)?a=n(s[d]):r.text=s[d],a&&(r.text=a.html(),r.type=a.attr("type")||r.type),n("body").append(r),h=e.closest("tr"),n(h).hasClass("e-columnheader")||(u=this.getIndexByRow(h),p=this.getCurrentViewData()[u]),p.value=e.text(),c=n(r).render(p),e.attr("title",c)}else e.removeAttr("title")},_rightClickHandler:function(e){var i,s,l;if(e.preventDefault(),i=t.browserInfo(),3==e.which||"msie"==i.name&&"8.0"==i.version){if(s={},$target=n(e.target),$gridRow=n(this.getRows()),this.getContentTable().has($target).length){var o=$gridRow.index($target.parent()),r=this.getRowByIndex(o),a=this._currentJsonData[o];if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(l=this._getSelectedViewData(o,$target)).data,o=l.rowIndex),-1==o)return;s={rowIndex:o,row:r,data:a,cellIndex:$target.index(),cellValue:$target.html(),cell:$target}}else if(this.getHeaderTable().has($target).length){if(o=0,$th=this.getHeaderTable().find("th").not(".e-detailheadercell,.e-grouptopleftcell,.e-filterbarcell"),-1==(o=$target.is(".e-headercelldiv")?$th.index($target.closest(".e-headercell")):$th.index($target)))return;s={headerIndex:o,headerText:this.getColumnFieldNames()[o],headerCell:$th.eq(o),column:this.getColumnByIndex(o)}}else($target.is(".e-pager")||null!=this.getPager()&&this.getPager().has($target).length)&&(s={pager:this.model.pageSettings});this._trigger("rightClick",s)}},_touchGrid:function(e){var t,i=this._currentPage(),s=!0;switch((this.model.allowScrolling||this.model.isResponsive&&0!=this.model.minWidth)&&(t=(this.getScrollObject()||{})._scrollXdata)&&(s="swipeleft"==e.type?t.scrollable-t.sTop==0:0==t.sTop),e.type){case"swipeleft":this.model.allowPaging&&i!=this.model.pageSettings.totalPages&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i+1);break;case"swiperight":this.model.allowPaging&&i>1&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i-1)}},_recorddblClickHandler:function(e){var t,i,s={},l=n(e.target).is(".e-rowcell")?n(e.target):n(e.target).closest("td");if(l.closest(".e-grid").attr("id")===this._id&&(l.is(".e-rowcell")||l.closest("td").is(".e-rowcell"))&&!(l.closest(".e-editcell,.e-editedbatchcell").length>0)){var o=this.getIndexByRow(l.closest("tr")),r=this.getRowByIndex(o),a=this._currentJsonData[o];this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(t=this._getSelectedViewData(o,l)).data,o=t.rowIndex),i=null!=this.model.detailsTemplate||null!=this.model.childGrid?l.index()-1:l.index(),s={rowIndex:o,row:r,data:a,cell:l,cellIndex:i,columnName:this.getColumnByIndex(i).headerText,cellValue:l.text()},this._trigger("recordDoubleClick",s)}},_invokeRecordClick:function(e,t){var i,s,l={},o=n(e.target).is(".e-rowcell")?n(e.target):n(e.target).closest("td");if(o.closest(".e-grid").attr("id")===t._id&&(o.is(".e-rowcell")||o.closest("td").is(".e-rowcell"))&&!(o.closest(".e-editcell,.e-editedbatchcell").length>0)){var r=t.getIndexByRow(o.closest("tr")),a=t.getRowByIndex(r),d=t._currentJsonData[r];t.model.scrollSettings.allowVirtualScrolling&&t.model.scrollSettings.enableVirtualization&&(d=(i=t._getSelectedViewData(r,o)).data,r=i.rowIndex),s=null!=t.model.detailsTemplate||null!=t.model.childGrid?o.index()-1:o.index(),l={rowIndex:r,row:a,data:d,cell:o,cellIndex:s,columnName:t.getColumnByIndex(s).headerText,cellValue:o.text()},t._trigger("recordClick",l)}},_recordClick:function(e){this._click++;var i=this,s=null;1==i._click?-1!==n.inArray("recordClick",this.model.serverEvents)&&-1!==n.inArray("recordDoubleClick",this.model.serverEvents)?s=setTimeout(function(){i._click=0,i._invokeRecordClick(e,i)},400):(i._click=0,t.isNullOrUndefined(s)||clearTimeout(s),i._invokeRecordClick(e,i)):2==i._click&&(t.isNullOrUndefined(s)||clearTimeout(s),i._click=0)},_headerMouseDown:function(e){if(n(e.target).hasClass("e-headercelldiv")&&!n(e.target).parent().hasClass("e-grouptopleftcell")||n(e.target).hasClass("e-headercell")){var t=n(e.target).hasClass("e-headercelldiv")?n(e.target).parent():n(e.target);this.model.enableHeaderHover&&t.removeClass("e-hover e-headercell-hover").addClass("e-headercellactive e-active")}if(this.model.allowResizing)return this._resizer._mouseDown(e)},_contentMouseDown:function(e){var i,s,l;n(e.target).closest("td").hasClass("e-selectionbackground")||n(e.target).closest("tr").length&&(i="touchstart"==e.type?e.originalEvent.touches[0].pageX:e.pageX,s="touchstart"==e.type?e.originalEvent.touches[0].pageY:e.pageY,this._dragDiv=t.buildTag("div.e-griddragarea","",{position:"absolute",width:"0px",height:"0px"}),this.getContent().append(this._dragDiv),(l=n(e.target).closest("tr.e-row")).length||(l=n(e.target).closest("tr.e-alt_row")),this._startIndex=l.length?this.getIndexByRow(l):null,this._on(n(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._on(this.element,"contextmenu",function(e){e.preventDefault()}),this._on(n(document),"touchend mouseup",this._mouseUpDragHandler),this._startDrag={_x:i,_y:s})},_mouseMoveDragHandler:function(e){var i,s,l,o;if(e.pageY!=this._startDrag._y){i="touchmove"==e.type?e.originalEvent.touches[0].pageX:e.pageX,s="touchmove"==e.type?e.originalEvent.touches[0].pageY:e.pageY,this._selectDrag=!0,this._dragDiv[0].offsetLeft,this._dragDiv[0].offsetTop;var r,a=this._startDrag._x,d=this._startDrag._y,h=i,c=s,u=s+2;a>h&&(r=h,h=a,a=r),d>c&&(r=c,c=d,d=r,u=s-2),this._dragDiv.height(),this._dragDiv.css({left:a,top:d,width:h-a,height:c-d}),(o=(l=n(document.elementFromPoint(i,u))).closest("tr.e-row")).length||(o=l.closest("tr.e-alt_row")),o.length&&(this._endIndex=this.getIndexByRow(o),t.isNullOrUndefined(this._startIndex)&&(this._startIndex=this._endIndex),this.selectRows(this._startIndex,this._endIndex))}},_mouseUpDragHandler:function(e){this._off(n(document),"touchend mouseup",this._mouseUpDragHandler),this._off(n(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._off(this.element,"contextmenu",function(e){e.preventDefault()}),e.stopPropagation(),this._selectDrag=!1,this._dragDiv.remove()},_headerHover:function(e){var t=n(e.target);"mouseover"==e.type||"mousemove"==e.type||"touchmove"==e.type||"MSPointerMove"==e.type?((this.model.allowResizing||this.model.allowResizeToFit)&&this._resizer._mouseHover(e),this.model.enableHeaderHover&&!this._dragActive&&(t.hasClass("e-headercelldiv")&&!t.parent().hasClass("e-grouptopleftcell")||t.hasClass("e-headercell"))&&(t.hasClass("e-headercelldiv")&&(t=t.parent()),this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover"),t.addClass("e-headercell-hover e-hover")),t.hasClass("e-gridtooltip")&&this._showTooltip(t),t.hasClass("e-headertooltip")&&this._showTooltip(t,!0),"mouseover"==e.type&&this._addCursor()):this.model.enableHeaderHover&&this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover")},_addCursor:function(){var e,i,s;if(this.model.allowResizing||this.model.allowResizeToFit||this.model.allowGrouping||this.model.allowFiltering||this.model.allowSorting||this.model.allowReordering||this.model.contextMenuSettings.enableContextMenu||this._allowcolumnSelection){if(this.getHeaderTable().find(".e-columnheader").removeClass("e-defaultcursor"),!this.model.contextMenuSettings.enableContextMenu&&"column"!=this.model.selectionSettings.selectionMode){for(e=[{val:this.model.allowSorting,str:"sort"},{val:this.model.allowGrouping,str:"group"},{val:this.model.allowReordering,str:"reorder"},{val:this.model.allowFiltering,str:"filter"}],i=0,s=0;s<e.length;s++)0==e[s].val&&(e.splice(s,1),s--);for(s=0;s<this.model.columns.length&&e.length>0;s++){for(j=0;j<e.length;j++)switch(e[j].str){case"sort":t.isNullOrUndefined(this.model.columns[s].allowSorting)||this.model.columns[s].allowSorting||i++;break;case"group":t.isNullOrUndefined(this.model.columns[s].allowGrouping)||this.model.columns[s].allowGrouping||i++;break;case"reorder":t.isNullOrUndefined(this.model.columns[s].allowReordering)||this.model.columns[s].allowReordering||i++;break;case"filter":t.isNullOrUndefined(this.model.columns[s].allowFiltering)||this.model.columns[s].allowFiltering||i++}isTempCol=!t.isNullOrUndefined(this.model.columns[s].template)||!t.isNullOrUndefined(this.model.columns[s].templateID),i!=e.length||isTempCol||this.getHeaderTable().find(".e-headercell").eq(s).addClass("e-defaultcursor"),i=0}}}else this.getHeaderTable().find(".e-columnheader").addClass("e-defaultcursor"),this.getHeaderTable().find(".e-headercell").removeClass("e-defaultcursor")},_colgroupRefresh:function(){var e,t,i,s;(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(e=n(this.getHeaderTable()).find("colgroup"),t=n(this.getContentTable()).find("colgroup")):(e=n(this.getHeaderTable()).find("colgroup")[0],t=n(this.getContentTable()).find("colgroup")[0]),i=n(e).clone(),s=n(t).clone(),n(t).remove(),n(e).remove(),(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(n(i[0]).prependTo(this.getHeaderTable()[0]),n(i[1]).prependTo(this.getHeaderTable()[1]),n(s[0]).prependTo(this.getContentTable()[0]),n(s[1]).prependTo(this.getContentTable()[1])):(n(i).prependTo(this.getHeaderTable()),n(s).prependTo(this.getContentTable()))},_detailColsRefresh:function(){this._$headerCols=this.getHeaderTable().children("colgroup").find("col"),this._$contentCols=this.getContentTable().children("colgroup").find("col");var e=this.model.columns.length;this._$headerCols.length>e&&this._$headerCols.splice(0,this._$headerCols.length-e),this._$contentCols.length>e&&this._$contentCols.splice(0,this._$contentCols.length-e)},_summaryColRrefresh:function(){for(var e=this.getFooterContent().find(".e-gridsummary"),t=0;t<this.columnsWidthCollection.length;t++)e.find("col").eq(t).width(this.columnsWidthCollection[t])},_headerdblClickHandler:function(e){this.model.allowResizeToFit&&this._resizer._columnResizeToFit(e),this.model.allowScrolling&&this.getScrollObject().refresh(this.model.scrollSettings.frozenColumns>0)},_mouseUp:function(e){this.model.allowResizing&&this._resizer._mouseUp(e)},_mouseMove:function(e){this.model.allowResizing&&this._resizer._mouseMove(e)},_setModel:function(e){var i,s,l,o,a,d,h,c,u,m,p,g,f,_,v,b,w,C,y;for(i in e)switch(i){case"enableResponsiveRow":e[i]?(this.element.addClass("e-responsive"),this.model.minWidth&&(this._removeMedia(),this._scrollerAddedOnMedia=!1),this.model.allowFiltering&&(this.element.find(".e-filterDialoge").remove(),this._renderFilterDialogs(),this._renderResponsiveFilter(),this.element.find(".e-gridtoolbar").remove())):(this.model.allowFiltering&&(n("body").find(".e-filterDialoge").remove(),this._renderFilterDialogs()),"none"==this.element.css("display")&&this.element.css("display","block"),this.element.removeClass("e-responsive"),this.model.minWidth&&this._addMedia(),this.model.allowScrolling&&(this.getScrollObject().refresh(),this.getScrollObject().isVScroll()?this.getScrollObject().isVScroll()&&(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):(this.getHeaderContent().removeClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").removeClass("e-hscrollcss")))),this._tdsOffsetWidth=[],(this.model.allowFiltering||this.model.allowSorting)&&(-1!=(s=this.model.toolbarSettings.toolbarItems.indexOf("responsiveFilter"))&&this.model.toolbarSettings.toolbarItems.splice(s,1),-1!=(l=this.model.toolbarSettings.toolbarItems.indexOf("responsiveSorting"))&&this.model.toolbarSettings.toolbarItems.splice(l,1),this.element.find(".e-gridtoolbar").remove(),this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first()));break;case"showColumnChooser":e[i]?(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._renderGridHeaderInternalDesign(this.model.columns),this._renderColumnChooser()):(n("#"+this._id+"ccDiv").data("ejDialog").isOpened()&&n("#"+this._id+"_ccTail").remove(),o=this.element.find(".e-ccButton").outerHeight(),this.element.find(".e-ccButton").remove(),n("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-o));break;case"gridLines":this.getContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this.getHeaderContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this._showHeaderGridLines(),this._showGridLines();break;case"showDeleteConfirmDialog":this.model.editSettings.showDeleteConfirmDialog=e[i],e[i]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"showConfirmDialog":this.model.editSettings.showConfirmDialog=e[i],e[i]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"pageSettings":if(a=this.getPager().ejPager("model"),t.isNullOrUndefined(e[i].currentPage)||a.currentPage!=this._currentPage()){for(d in e[i])"currentPage"!=d&&e[i][d]===a[d]&&delete e[i][d];if(n.isEmptyObject(e[i]))break;e[i].currentPage=this._currentPage(),this.getPager().ejPager("option",e[i]),this._renderPagerTemplate(this.getPager(),e[i].showDefaults),this._currentPage(this._currentPage()>a.totalPages?a.totalPages:this._currentPage()),this.refreshContent()}break;case"columns":h=e.columns,this.model.columns=[],this.columns(h,"add");break;case"allowPaging":this.model.allowPaging=e[i],e[i]&&0==this.element.children(".e-pager").length?(this.element.append(this._renderGridPager()),this.refreshContent(),this.getPager().ejPager("refreshPager")):(this.getPager().remove(),this.setGridPager(null),this.refreshContent(),"filterbar"==this.model.filterSettings.filterType&&this.model.allowFiltering&&this._createPagerStatusBar());break;case"allowSearching":this.model.allowSearching=e[i];break;case"searchSettings":n.extend(this.model.searchSetings,e[i]),this.refreshContent();break;case"allowGrouping":e[i]&&0==this.element.children(".e-groupdroparea").length?(this.model.allowGrouping=e[i],this.addGroupingTemplate(),this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),this._enableGroupingEvents(),this._headerCellgDragDrop(),this._off(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)):this.element.children(".e-groupdroparea").remove(),this.model.allowGrouping&&(t.isNullOrUndefined(e.groupSettings)||n.extend(this.model.groupSettings,e.groupSettings),this._enableGrouping());break;case"groupSettings":n.extend(this.model.groupSettings,e[i]),this.model.allowGrouping&&t.isNullOrUndefined(e.allowGrouping)&&this._enableGrouping(),t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation);break;case"cssClass":this.element.removeClass(this.model.cssClass).addClass(e[i]);break;case"allowFiltering":case"filterSettings":if("filterSettings"==i?n.extend(this.model.filterSettings,e[i]):this.model.allowFiltering=e[i],this._$fDlgIsOpen&&this._closeFDialog(),this.model.allowFiltering){if(this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar)for(this.getHeaderTable().find(".e-filterbar").remove(),this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this._renderFiltering(),this._renderFilterBarTemplate(),this.model.filterSettings.showFilterBarStatus&&!this.model.allowPaging?this._createPagerStatusBar():this.model.allowPaging&&this.getPager().ejPager({enableExternalMessage:this.model.filterSettings.showFilterBarStatus}),c=this.getHeaderTable().find(".e-filterbar"),v=0;v<this.model.groupSettings.groupedColumns.length;v++)c.prepend(this._getEmptyFilterBarCell());else if(!u&&(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)){for(u=1,this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this.getHeaderTable().find(".e-filterbar").remove(),m=this.getHeaderTable().find(".e-columnheader").find(".e-headercell").not(".e-detailheadercell"),v=0;v<m.length;v++)p=m.eq(v).find(".e-headercelldiv").attr("ej-mappingname"),t.isNullOrUndefined(p)||(g=this.getColumnByField(p),!t.isNullOrUndefined(g)&&(t.isNullOrUndefined(g.allowFiltering)||g.allowFiltering)&&m.eq(v).addClass("e-headercellfilter").append(t.buildTag("div.e-filtericon e-icon e-filterset")));this.model.filterSettings.filterType==t.Grid.FilterType.Excel?(this._isExcelFilter=!0,this._renderExcelFilter()):this._isExcelFilter&&(this._isExcelFilter=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this._renderFilterDialogs(),this.model.filterSettings.filteredColumns=[],this.refreshContent()}this._enableFilterEvents()}else this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar?this.getHeaderTable().find(".e-filterbar").remove():(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)&&this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),(this._isExcelFilter||this._excelFilterRendered)&&(this._isExcelFilter=this._excelFilterRendered=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this.model.filterSettings.filteredColumns=[],this.refreshContent();this.model.isResponsive&&this.model.allowScrolling&&((f={}).requestType="filtering",this._refreshScroller(f));break;case"enableRowHover":this.model.enableRowHover=e[i],this._enableRowHover();break;case"allowScrolling":case"scrollSettings":if(S=this.getContent(),"allowScrolling"!=i){if(!t.util.isNullOrUndefined(e.scrollSettings)){if(n.isEmptyObject(e.scrollSettings))break;t.util.isNullOrUndefined(e.scrollSettings.enableVirtualization)||t.util.isNullOrUndefined(e.scrollSettings.allowVirtualScrolling)||(e.scrollSettings.allowVirtualScrolling=e.scrollSettings.enableVirtualization),n.extend(this.model.scrollSettings,e.scrollSettings)}this._initHeight=this.model.scrollSettings.height,this._isHeightResponsive="100%"==this.model.scrollSettings.height,this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this.model.currentIndex=1,this.model.scrollSettings.enableVirtualization?(this._virtualRowCount=Math.round(this.model.scrollSettings.height/this.getRowHeight())+1,this._refreshVirtualViewDetails(),this._refreshVirtualViewData()):(this._createPagerStatusBar(),this._showPagerInformation(this.model.pageSettings))),e.scrollSettings.frozenColumns!==r||e.scrollSettings.frozenRows!==r||e.scrollSettings.allowVirtualScrolling!==r||e.scrollSettings.virtualScrollMode!==r||e.scrollSettings.enableVirtualization!=r?((C=this.model).query=this.commonQuery.clone(),-1!=this._selectedRow()&&this.clearSelection(this._selectedRow()),e.scrollSettings.virtualScrollMode!=r&&(C.pageSettings.currentPage=1),this.element.ejGrid("destroy").ejGrid(C)):(t.util.isNullOrUndefined(e.allowScrolling)||(this.model.allowScrolling=e.allowScrolling),t.util.isNullOrUndefined(S.data("ejScroller"))||S.ejScroller("destroy"),this.model.allowScrolling?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this._originalScrollWidth=this.model.scrollSettings.width,this._renderScroller(),this.setWidthToColumns(),t.util.isNullOrUndefined(S.data("ejScroller"))||this.getScrollObject().refresh(),this.refreshScrollerEvent()):(this.element.children(".e-gridheader").removeClass("e-scrollcss"),0==this.element.get(0).style.width.length&&this.element.css("width","auto"),this.setWidthToColumns()),this._addLastRow())}break;case"currentIndex":this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(_=Math.ceil(e.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._refreshVirtualView(_),this._refreshVirtualViewScroller(!0)):this._scrollObject.option("scrollTop",e.currentIndex*this.getRowHeight());break;case"locale":this.model.locale=e[i],this.model.query=this.commonQuery.clone(),this._destroy(),this.element.css("margin-top","0px").addClass("e-grid"+this.model.cssClass),this._init();break;case"dataSource":for(S=this.element.find(".e-gridcontent").first(),n.isFunction(e.dataSource)||this.resetModelCollections(),1==this._gridRecordsCount&&!t.isNullOrUndefined(this._cDeleteData)&&-1==n.inArray(this._cDeleteData[0],this._dataSource())&&this.model.editSettings.allowDeleting&&(this._gridRecordsCount=this._dataSource().length),v=0;v<this.model.columns.length;v++)this.model.columns[v].template!==r&&(this._columntemplaterefresh=!0);this._refreshDataSource(this._dataSource()),this.element.children(".e-gridfooter").remove(),this.model.showSummary&&this.model.currentViewData.length>0&&this._renderGridFooter().insertAfter(S),this._gridRecordsCount&&this.model.allowFiltering&&(this._initColumns(this.model.currentViewData[0]!=r?this.model.currentViewData[0]:this.model.currentViewData.value),this._renderFilterDialogs()),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow();break;case"selectedRowIndex":-1!=this._selectedRow()&&-1==n.inArray(this._selectedRow(),this.selectedRowsIndexes)?(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())):-1==this._selectedRow()&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"selectedRowIndices":1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0?(this.model.selectedRowIndices=e[i],this._selectingMultipleRows(this.model.selectedRowIndices)):0==this._selectedMultipleRows().length&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"editType":-1!=this._selectedRow()&&-1==n.inArray(this._selectedRow(),this.selectedRowsIndexes)&&this.selectRows(this._selectedRow());break;case"editSettings":n.extend(this.model.editSettings,e[i]),this.refreshToolbar(),this.refreshContent(!0),this.refreshBatchEditMode(),this._tdsOffsetWidth=[],n("#"+this._id+"_dialogEdit").data("ejDialog")&&n("#"+this._id+"_dialogEdit").ejDialog("destroy"),n("#"+this._id+"_dialogEdit_wrapper,#"+this._id+"_dialogEdit").remove(),n("#"+this._id+"_externalEdit").remove(),this.getContentTable().find(".e-insertedrow").remove(),this.model.isEdit=!1,"normal"!=this.model.editSettings.editMode&&(this.model.editSettings.showAddNewRow=!1),this.model.editSettings.showAddNewRow||this.getContentTable().find(".e-addedrow").length&&this.cancelEdit(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),(this.model.editSettings.allowDeleting&&this.model.editSettings.showDeleteConfirmDialog||"batch"==this.model.editSettings.editMode&&this.model.editSettings.showConfirmDialog)&&t.isNullOrUndefined(this._confirmDialog)&&this._renderConfirmDialog(),this._enableEditingEvents(),this.refreshToolbar();break;case"allowResizing":this.model.allowResizing=e[i],this.model.allowResizing?(this._on(this.element,t.eventType.mouseMove,this._mouseMove),this._on(this.element,"mouseup",this._mouseUp),this._resizer=this._resizer||new t.gridFeatures.gridResize(this)):(this._off(this.element,t.eventType.mouseMove,this._mouseMove),this._off(this.element,"mouseup",this._mouseUp),this.model.allowResizeToFit||(this._resizer=null));break;case"allowResizeToFit":this.model.allowResizeToFit?(this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this._resizer=this._resizer||new t.gridFeatures.gridResize(this),this.setWidthToColumns()):(this._off(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing||(this._resizer=null));break;case"allowReordering":this.model.allowReordering=e[i],this.model.allowReordering&&this._headerCellreorderDragDrop();break;case"allowRowDragAndDrop":this.model.allowRowDragAndDrop?(this._rowsDragAndDrop(),"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown)):(this._off(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this.getContentTable().ejDroppable("destroy"),n(this.getRows()).ejDraggable("destroy"));break;case"showSummary":case"summaryRows":if("showSummary"==i&&e[i]&&this.addSummaryTemplate(),"showSummary"!=i||e[i]){if("summaryRows"==i&&this.model.showSummary||"showSummary"==i){this.element.children(".e-gridfooter").remove(),this.element.children(".e-gridfooter").remove();var S=this.element.find(".e-gridcontent").first(),x=this.model.query.queries,T=[];for(v=0;v<x.length;v++)"onPage"===x[v].fn&&(T=x.splice(v,1));b=this.model.query,this._setSummaryAggregate(b),T.length&&b.queries.push(T[0]),this.model.currentViewData.length&&(this._isLocalData?(this._remoteSummaryData=this._dataManager.executeLocal(b).aggregates,this._renderGridFooter().insertAfter(S)):(w=this,this._dataManager.executeQuery(b).done(function(e){w.element.children(".e-gridfooter").remove(),w._remoteSummaryData=e.aggregates,w._renderGridFooter().insertAfter(S)}))),this.model.allowGrouping&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0,this.refreshContent(!0))}}else this.element.children(".e-gridfooter").remove();break;case"enableAltRow":this.model.enableAltRow=e[i],this.addInitTemplate(),this.refreshContent();break;case"toolbarSettings":n.extend(this.model.toolbarSettings,e[i]),this.element.children(".e-gridtoolbar").remove(),this.model.toolbarSettings.showToolbar&&this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first());break;case"allowSorting":this.model.allowSorting=e[i],this.model.allowSorting||this.clearSorting();break;case"selectionSettings":n.extend(this.model.selectionSettings,e[i]),this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection();break;case"sortSettings":n.extend(this.model.sortSettings,e[i]),this.refreshContent();break;case"contextMenuSettings":n.extend(this.model.contextMenuSettings,e[i]),!t.isNullOrUndefined(n("#"+this._id+"_Context").data("ejMenu"))&&n("#"+this._id+"_Context").ejMenu("destroy")&&n("#"+this._id+"_Context").remove(),this.model.contextMenuSettings.enableContextMenu&&this._renderContext();break;case"enableRTL":this.model.enableRTL=e[i],(C=this.model).query=this.commonQuery.clone(),this.element.ejGrid("destroy"),C.enableRTL?n("#"+this._id).addClass("e-rtl"):n("#"+this._id).removeClass("e-rtl"),n("#"+this._id).ejGrid(C);break;case"enableTouch":this.model.enableTouch=e[i],this.model.enableTouch?(this._on(this.element,"swipeleft swiperight",".e-gridcontent .e-table",n.proxy(this._touchGrid,this)),this.element.removeClass("e-touch")):(this.element.addClass("e-touch"),this._off(this.element,"swipeleft swiperight",".e-gridcontent .e-table"));break;case"allowSelection":e[i]?(this._off(this.element,n.isFunction(n.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,"click",this._clickHandler),this._initSelection()):(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1);break;case"query":this.commonQuery=n.extend(!0,{},e[i]);break;case"showStackedHeader":case"stackedHeaderRows":this.model.showStackedHeader&&e.stackedHeaderRows&&e.stackedHeaderRows.length>0?(t.getObject("stackedHeaderRows.length",e)&&(this.model.stackedHeaderRows=e.stackedHeaderRows),this._refreshStackedHeader()):this.getHeaderTable().find(".e-stackedHeaderRow").remove();break;case"allowTextWrap":case"textWrapSettings":n.extend(this.model.textWrapSettings,e[i]),this._setTextWrap();break;case"rowTemplate":this.refreshContent(!0);break;case"detailsTemplate":this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?(this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels("FrozenNotSupportedException")),this._alertDialog.ejDialog("open")):((y=this.element.children(".e-gridheader")).find("div").first().empty().append(this._renderGridHeader().find("table")),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.setGridHeaderContent(y),this.refreshContent(!0),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.allowGrouping&&this._headerCellgDragDrop())}},resetModelCollections:function(){this.model.groupSettings.groupedColumns=[],this.model.filterSettings.filteredColumns=[],this.model.sortSettings.sortedColumns=[],this.model.pageSettings.currentPage=this.defaults.pageSettings.currentPage},_enableGrouping:function(){var e,i,s,l,o;if(this.refreshTemplate(),this.model.groupSettings.showToggleButton)for(e=0;e<this.model.columns.length;e++)i=this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").eq(e),s=this.model.columns[e].field,-1!=n.inArray(s,this._disabledGroupableColumns)||t.isNullOrUndefined(s)||""==s||i.find(".e-gridgroupbutton").length||(-1!=n.inArray(s,this.model.groupSettings.groupedColumns)?i.append(this._getToggleButton().addClass("e-toggleungroup")):i.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.groupSettings.showToggleButton||this.getHeaderTable().find(".e-gridgroupbutton").remove(),this.element.find(".e-groupdroparea").remove(),this.model.groupSettings.showDropArea&&(this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),t.gridFeatures.dragAndDrop&&(this._groupHeaderCelldrag(),this._headerCellgDragDrop())),!t.isNullOrUndefined(this.model.groupSettings.groupedColumns.length)&&this.model.groupSettings.groupedColumns.length){for((l={}).columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],l.requestType=t.Grid.Actions.Grouping,n(".e-grid").find(".e-groupdroparea").empty(),o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[o]);for(o=0;o<this.model.groupSettings.groupedColumns.length;o++)t.isNullOrUndefined(this.getsortColumnByField(this.model.groupSettings.groupedColumns[o]))&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[o],direction:t.sortOrder.Ascending});this._processBindings(l)}},addIgnoreOnExport:function(e){"string"==typeof e?this.ignoreOnExport.push(e):this.ignoreOnExport=this.ignoreOnExport.concat(e)},_decode:function(e){return n("<div/>").html(e).text()},_htmlEscape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},_mappingSelection:function(){var e,i;if(t.gridFeatures.selection&&this._enableCheckSelect){for(this.multiSelectCtrlRequest=!0,e=[],i=0;i<this._currentJsonData.length;i++)1==t.pvt.getObject(this._selectionMapColumn,this._currentJsonData[i])&&e.push(i);this.selectedRowsIndexes=[],this._selectedRow(-1),this._selectionByGrid=!0,e.length&&this.selectRows(e),this._selectionByGrid=!1}},_headerCheckUpdateAll:function(e){for(var i=[],s=(i=this._isLocalData?this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource():this._currentJsonData,0);s<i.length;s++)i[s][this._selectionMapColumn]=e,this.batchChanges.changed.push(i[s]);this.batchSave()},_getForeignKeyData:function(e){var s,n=this,l={};for(i=0;i<this.model.columns.length;i++)this.model.columns[i].foreignKeyValue&&this.model.columns[i].dataSource&&(s=t.isNullOrUndefined(n.model.columns[i].foreignKeyField)?n.model.columns[i].field:n.model.columns[i].foreignKeyField,(this.model.columns[i].dataSource instanceof t.DataManager?this.model.columns[i].foreignKeyData:this.model.columns[i].dataSource).filter(function(t){var o=e[n.model.columns[i].field],r=!isNaN(parseFloat(o))&&isFinite(o)?parseFloat(o):o;t[s]==r&&(l[s]=t)}));return l},_foreignKeyBinding:function(e,i,s){var l,o,r=n("#"+s).ejGrid("instance");return((e=r.model.columns[e]).dataSource instanceof t.DataManager?e.foreignKeyData:e.dataSource).filter(function(s){if(t.getObject(e.foreignKeyField,s)==i)return o=t.getObject(e.foreignKeyValue,s),l="date"==e.type?new Date(o):o}),e.format&&(l=r.formatting(e.format,l,r.model.locale)),l},_checkForeignKeyBinding:function(){if(this.model.columns.length){var e,i,s,n;for(e=0,s=(i=this.model.columns).length;e<s;e++)(n=i[e]).hasOwnProperty("foreignKeyField")&&n.dataSource instanceof t.DataManager&&this._relationalColumns.push({field:n.field,key:n.foreignKeyField,value:n.foreignKeyValue,dataSource:n.dataSource});this._$fkColumn=!0}},_setForeignKeyData:function(e){var i,s,l,o;if(this._relationalColumns.length){var a,d,h,c,u=this._relationalColumns,m=this._relationalColumns.length,p=[],g=this.model.currentViewData,f={},_=this;if(0==g.length)for(i=0,s=this.model.columns.length;i<s;i++)column=this.model.columns[i],!t.isNullOrUndefined(column.foreignKeyField)&&column.dataSource instanceof t.DataManager&&(column.foreignKeyData=[]);for(l=t.proxy(function(e){this._trigger("actionFailure",{requestType:"fetchingforeigndata",error:e.error})},this),this.element.ejWaitingPopup("model.showOnInit")||this.element.ejWaitingPopup("show"),o=0;o<m;o++)if(0 in g){if(a=u[o],f.field=a.field,f.keyField=a.key,f.valueField=a.value,f.dataSource=a.dataSource,f.query=(new t.Query).select([f.valueField,f.keyField]).foreignKey(f.keyField),h=t.distinct(g.level?g.records:g,f.keyField,!0),d=t.UrlAdaptor.prototype.getFiltersFrom(h,f.query),f.query.where(d),this._trigger("actionBegin",n.extend(f,{requestType:"fetchingforeigndata",column:this.getColumnByField(f.field)})))return;c=f.dataSource.ready===r?f.dataSource.executeQuery(f.query,null,l):f.dataSource.ready.fail(l),p.push(c)}n.when.apply(this,p).then(function(){var t,i,s,n,l,o;for(_.element.ejWaitingPopup("hide"),t=[].slice.call(arguments,0,arguments.length),s=0,n=p.length;s<n;s++)for(a=u[s],l=0,o=_.model.columns.length;l<o;l++)(i=_.model.columns[l]).foreignKeyField==a.key&&i.foreignKeyValue==a.value&&(i.foreignKeyData=t[s].result);_.initialRender?_._initGridRender():_.sendDataRenderingRequest(e)})}},_isRelationalRendering:function(e){return 0 in this._relationalColumns&&-1==["add","beginedit","cancel"].indexOf(e.requestType)}},function(e,t,s){t.gridFeatures=t.gridFeatures||{},Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),t.gridFeatures.edit={_processEditing:function(){var i,n,l,o,r,a,d,h,c,u=this._columnToSelect(),m=u.query,p=[],g=u.fields,f=[],_=this._relationalColumns,v=_.length;if(""!=this.model.query._fromTable&&m.from(this.model.query._fromTable),(n=g.length)&&f.push(this._dataManager.executeQuery(m)),0!=v)for(l=0;l<v;l++)obj=_[l],qry=(new t.Query).select([obj.key,obj.value]),i=obj.dataSource.ready===s?obj.dataSource.executeQuery(qry):obj.dataSource.ready,f.push(i);if(u.fieldsDrop.length)for(o=u.fieldsDrop.length,r=u.fieldsDrop,a=0;a<o;a++)d=[],h=this.getColumnByField(r[a]),t.isNullOrUndefined(t.getObject("editParams.fields.text",h))?p.push(r[a]):(c=h.editParams,p.push(c.fields)),p[a]instanceof Object?(d.push(p[a].text),d.push(p[a].value)):d.push(p[a]),m=(new t.Query).select(d),f.push(h.dataSource.executeQuery(m));0!=f.length?e.when.apply(this,f).then(t.proxy(function(){for(var e,i=[].slice.call(arguments,0,arguments.length),s=0,l=0,o=0,r=n,a=f.length;s<a;s++){for(;r>0;)t.createObject(g[--r],i[s].result,this._dropDownManager),e=!0;if(!e||0!=s){if(_.length!=l){obj=_[l],key=obj.key+"."+obj.value,t.createObject(key,i[s].result,this._dropDownManager),l++;continue}_.length==l&&p.length&&(p[o]instanceof Object?(t.createObject(p[o].text,i[s].result,this._dropDownManager),t.createObject(p[o].value,i[s].result,this._dropDownManager)):t.createObject(p[o],i[s].result,this._dropDownManager),o++)}}this._initiateTemplateRendering()},this)):this._initiateTemplateRendering()},_initiateTemplateRendering:function(){"normal"==this.model.editSettings.editMode?this.addEditingTemplate():"batch"==this.model.editSettings.editMode?this.addBatchEditTemplate():"dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode?this.addDialogEditingTemplate():this.addExternalDialogEditingTemplate(),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&this._startAdd()},addEditingTemplate:function(){var i,n,l,o,r,a,d,h;if(0!=this.model.columns.length){var c=t.buildTag("tbody"),u=t.buildTag("tr"),m=t.buildTag("td","",{},{colSpan:this.model.scrollSettings.frozenColumns>0?this.model.scrollSettings.frozenColumns:this.model.columns.length}),p=t.buildTag("form","",{},{id:this._id+"EditForm",class:"gridform"}),g=t.buildTag("table.e-table","",{},{cellspacing:.25}),f=t.buildTag("tbody"),_=t.buildTag("tr");for(c.append(u),u.append(m),m.append(p),i=e(document.createElement("colgroup")),p.append(g),g.append(i),f.append(_).appendTo(g),this.model.scrollSettings.frozenColumns>0&&(n=c.clone()).find("td").first().prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns),l=0;l<this.model.columns.length;l++)o=t.buildTag("td.e-rowcell"),_.append(o.get(0)),("checkbox"!=this.model.columns[l].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[l].commands)&&(!this.model.columns[l].template||this.model.columns[l].template&&0!=this.model.columns[l].allowEditing&&this.model.columns[l].field)?this._initCellEditType(l,o):this.model.columns[l].template?(d={},r=this.model.columns[l].headerText,d["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(d),t.isNullOrUndefined(r)||t.isNullOrUndefined(r.match(/[^0-9\s\w]/g))||(r=r.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+r+l+"_Template").remove(),a=this._createTemplateElement(this.model.columns[l]),o.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+a.id+"')}}")):this.model.columns[l].commands&&((d={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(d),e("#"+this._id+this.model.columns[l].headerText.replace(/[^a-z0-9|s_]/gi,"")+l+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[l],l),o.addClass("e-unboundcell").addClass("e-"+this.model.columns[l].headerText.replace(/[^a-z0-9|s_]/gi,"")+l).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&o.addClass("e-frozenunbound"),this._isUnboundColumn=!0),this.model.columns[l].textAlign!=s&&o.css("text-align",this.model.columns[l].textAlign),0==this.model.columns[l].allowEditing&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[l].isPrimaryKey&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[l].isIdentity&&(o.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[l].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),h=e(document.createElement("col")),this.model.columns[l].priority&&(o.addClass("e-table-priority-"+this.model.columns[l].priority),h.addClass("e-table-priority-"+this.model.columns[l].priority)),!1===this.model.columns[l].visible&&(h.css("display","none"),o.addClass("e-hide")),t.isNullOrUndefined(this.model.columns[l].cssClass)||o.addClass(this.model.columns[l].cssClass),!this.model.groupSettings.showGroupedColumn&&o.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[l].field+"'}}e-hide{{/if}}{{/for}}")&&h.css("display","none"),i.append(h),l==this.model.scrollSettings.frozenColumns-1&&(_=n.find("tr").last(),i=n.find("colgroup"),e.templates(this._id+"_JSONFrozenEditingTemplate",c.html()),c=n));e.templates(this._id+"_JSONEditingTemplate",c.html())}},addDialogEditingTemplate:function(){var i,n,l,o;if(0!=this.model.columns.length){var r,a,d,h,c,u=t.buildTag("div"),m=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),p=t.buildTag("table","",{},{cellspacing:"14px"});for(i=0;i<this.model.columns.length;i++)("checkbox"!=this.model.columns[i].type||this._isMapSelection)&&("dialog"==this.model.editSettings.editMode?(h="tr",c="td"):h=c="div",r=t.buildTag(h),a=t.buildTag(c,"",{"text-align":"right"}).addClass("e-label"),d=t.buildTag(c,"",{"text-align":"left"}).addClass("e-rowcell"),this.model.columns[i].priority&&"inlineform"==this.model.editSettings.editMode&&r.addClass("e-table-priority-"+this.model.columns[i].priority),r.append(a.get(0)).append(d.get(0)),this.model.columns[i].headerText==s&&(this.model.columns[i].headerText=this.model.columns[i].field),a.append("<label for='"+this.model.columns[i].field+"'>"+this.model.columns[i].headerText+"</label>"),t.isNullOrUndefined(this.model.columns[i].commands)&&(!this.model.columns[i].template||this.model.columns[i].template&&0!=this.model.columns[i].allowEditing&&this.model.columns[i].field)?this._initCellEditType(i,d):this.model.columns[i].template?(o={},n=this.model.columns[i].headerText,o["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(o),t.isNullOrUndefined(n)||t.isNullOrUndefined(n.match(/[^0-9\s\w]/g))||(n=n.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+n+i+"_Template").remove(),l=this._createTemplateElement(this.model.columns[i]),d.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+l.id+"')}}")):this.model.columns[i].commands&&((o={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(o),e("#"+this._id+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[i],i),d.addClass("e-unboundcell").addClass("e-"+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&d.addClass("e-frozenunbound"),this._isUnboundColumn=!0,r.addClass("e-hide")),0==this.model.columns[i].allowEditing&&d.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[i].isIdentity&&(d.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[i].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),!1===this.model.columns[i].visible&&r.addClass("e-hide"),t.isNullOrUndefined(this.model.columns[i].cssClass)||d.addClass(this.model.columns[i].cssClass),"dialog"==this.model.editSettings.editMode?(m.append(p),p.append(r)):m.append(r),m.appendTo(u),!0===this.model.columns[i].isPrimaryKey&&(d.find(".e-field").attr("disabled",!0).addClass("e-disable"),this._primaryKeys.push(e.trim(this.model.columns[i].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));"dialog"==this.model.editSettings.editMode&&m.append(p),u=this.renderDiaglogButton(m,u),e.templates(this._id+"_JSONDialogEditingTemplate",u.html())}},_editEventTrigger:function(e){if("save"==e.requestType||"delete"==e.requestType){var i={data:e.data,previousData:e.previousData,action:e.action!==s?e.action:e.requestType};t.isNullOrUndefined(e.foreignKeyData)||(i.foreignKeyData=e.foreignKeyData),this._trigger("end"+i.action.charAt(0).toUpperCase()+i.action.slice(1),i)}},_compiledDropDownTemplate:function(i,s,n,l){var o,r,a={_gridFormatting:this.formatting};return e.views.helpers(a),o=t.buildTag("select"),r=t.buildTag("option",null!=l?"{{:~_gridFormatting('"+l+"',"+s+",'"+this.model.locale+"')}}":"{{:"+s+"}}",{},{value:"{{:"+i+"}}"}),o.append(r),e.templates(o.html())},_initCellEditType:function(i,n){var l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,w=this.model.columns[i].field;this.model.columns[i].foreignKeyValue&&(this.model.columns[i].editType="dropdownedit"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(-1!=(g=e.inArray(this.model.columns[i].field,this._dataSource().adaptor.value))&&(l=this._dataSource().adaptor.value[g],o=this._dataSource().adaptor.key[g])),this.model.columns[i].editTemplate&&(this.model.columns[i].editType="edittemplate"),t.isNullOrUndefined(this.model.columns[i].editType)&&(this.model.columns[i].editType="date"==this.model.columns[i].type||"datetime"==this.model.columns[i].type?this.model.columns[i].type+"picker":"stringedit"),this.model.isResponsive&&n.attr("data-cell",this._decode(this.model.columns[i].headerText));var C=(w||"").split("."),y=C.length-1,S="";for(t.isNullOrUndefined(w)||(w=w.replace(/[^a-z0-9\s_]/gi,""));y;)S+="(",y--;switch(this.model.columns[i].editType){case"edittemplate":"string"==typeof(r=this.model.columns[i].editTemplate.create)?(a=t.util.getObject(r,window),d=e.isFunction(a)?e(a()).attr({id:this._id+w,name:this.model.columns[i].field}):1==e(r).length&&"SCRIPT"==e(r).get(0).tagName?e(e(r).html()).attr({id:this._id+w,name:this.model.columns[i].field}):e(r).attr({id:this._id+w,name:this.model.columns[i].field})):d=e(r()).attr({id:this._id+w,name:this.model.columns[i].field}),n.append(d);break;case"stringedit":n.html(t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{html:"+S+"#data['"+C.join("'] || {})['")+"']}}",id:this._id+w,name:this.model.columns[i].field}));break;case"booleanedit":n.html('{{if #data["'+C.join('"]["')+'"]}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+w+" name="+this.model.columns[i].field+' checked="checkbox"></input>{{else}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+w+" name="+this.model.columns[i].field+" > {{/if}}"),"normal"==this.model.editSettings.editMode&&n.addClass("e-boolcell");break;case"numericedit":h=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:"+S+"#data['"+C.join("'] || {})['")+"']}}",id:this._id+w,name:this.model.columns[i].field}),n.append(h);break;case"datepicker":case"datetimepicker":c=t.buildTag("input.e-"+this.model.columns[i].editType+" e-field","",{},{type:"text",value:"{{:"+S+"#data['"+C.join("'] || {})['")+"']}}",id:this._id+w,name:this.model.columns[i].field}),n.append(c);break;case"dropdownedit":if(u=this.model.columns[i],m=[],t.isNullOrUndefined(u.dataSource)){if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l&&(data=this.model.dataSource.adaptor.foreignData[g],$foreignkeyfield=this.model.dataSource.adaptor.key[g],$foreignkeyvalue=this.model.dataSource.adaptor.value[g],m=data),x=u.field,t.isNullOrUndefined(t.getObject(x,this._dropDownManager)))return;if(k=0 in(p=t.getObject(x,this._dropDownManager))&&"object"==typeof p[0],D=D=t.dataUtil.mergeSort(t.distinct(p,k?x:s,!k&&s)),0==m.length)if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l)for(g=0;g<D.length;g++)m.push({text:D[g][0],value:D[g][1]});else for(g=0;g<D.length;g++)m.push({text:D[g],value:D[g]})}else if(t.isNullOrUndefined(u.foreignKeyField)&&u.dataSource instanceof t.DataManager){var x=u.field,T=t.getObject(x,this._dropDownManager),k=0 in T&&"object"==typeof T[0],D=D=t.dataUtil.mergeSort(t.distinct(T,k?x:s,!k&&s));if(t.isNullOrUndefined(t.getObject("editParams.fields.text",u))||(m=T),0==m.length)for(g=0;g<D.length;g++)m.push({text:D[g],value:D[g]})}else m=!t.isNullOrUndefined(u.foreignKeyField)&&u.field in this._dropDownManager?t.getObject(u.foreignKeyField+"."+u.foreignKeyValue,this._dropDownManager):u.dataSource;_=t.isNullOrUndefined(u.foreignKeyField)?u.field:u.foreignKeyField,u.foreignKeyValue?f=this._compiledDropDownTemplate(_,u.foreignKeyValue,u.type,u.format):this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l?f=this._compiledDropDownTemplate($foreignkeyfield||"value",$foreignkeyvalue||"text",u.type,u.format):(v=t.getObject("editParams.fields.value",u)||"value",b=t.getObject("editParams.fields.text",u)||"text",f=this._compiledDropDownTemplate(v,b,u.type,u.format)),n.get(0).innerHTML=!t.isNullOrUndefined(u.editParams)&&this._dataSource()instanceof t.DataManager&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==l?"<input data-value='{{:"+o+"}}'/>":["<select>",f.render(m),"</select>"].join(""),n.find("select,input").prop({id:this._id+w,name:u.field}).addClass("e-field e-dropdownlist")}},addBatchEditTemplate:function(){if(0!=this.model.columns.length){for(var i,s=t.buildTag("div","",{display:"none"},{id:this._id+"_BulkEditTemplate"}),n=0,l=this.model.columns.length;n<l;n++)(t.isNullOrUndefined(this.model.columns[n].commands)&&t.isNullOrUndefined(this.model.columns[n].template)||this.model.columns[n].template&&0!=this.model.columns[n].allowEditing&&this.model.columns[n].field)&&(i=t.buildTag("div","",{},{id:this.model.columns[n].field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit"}),this._initCellEditType(n,i),s.append(i)),!0===this.model.columns[n].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[n].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),!0===this.model.columns[n].isIdentity&&(i.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[n].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort()));s.children().length&&(this._bulkEditTemplate=s)}},addExternalDialogEditingTemplate:function(){var i,s,n,l,o;if(0!=this.model.columns.length){for(i=t.buildTag("td","",{"text-align":"left"}).addClass("e-rowcell"),s=0;s<this.model.columns.length;s++)("checkbox"!=this.model.columns[s].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[s].commands)&&!t.isNullOrUndefined(this.model.columns[s].template)&&0!=this.model.columns[s].allowEditing&&this.model.columns[s].field&&!t.isNullOrUndefined(this.model.columns[s].editTemplate)&&this._initCellEditType(s,i),!0===this.model.columns[s].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[s].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));n=t.buildTag("div","",{display:"none"}),l=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),"dialogtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.dialogEditorTemplateID?o=this.model.editSettings.dialogEditorTemplateID:"externalformtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.externalFormTemplateID?(o=this.model.editSettings.externalFormTemplateID,l.addClass("e-display")):(o=this.model.editSettings.inlineFormTemplateID,l.addClass("e-display")),l.html(e(o).html()),n=this.renderDiaglogButton(l,n),e.templates(this._id+"_JSONdialogTemplateMode",n.html())}},_editdblClickHandler:function(t){var i=e(t.target);i.closest(".e-grid").attr("id")===this._id&&(i.hasClass("e-rowcell")||i.closest("td").hasClass("e-rowcell"))&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&(this._$currentTr=this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?this.getRowByIndex(i.closest("tr").index()):i.closest("tr"),this.startEdit(this._$currentTr))},_columnToSelect:function(){for(var i=[],s=[],n=this.model.columns,l=0;l<this.model.columns.length;l++)this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=e.inArray(this.model.columns[l].field,this._dataSource().adaptor.value)&&t.isNullOrUndefined(this.model.columns[l].editType)&&(this.model.columns[l].editType="dropdownedit"),this.model.columns[l].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(this.model.columns[l].dataSource)&&i.push(this.model.columns[l].field),n[l].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(n[l].foreignKeyField)&&n[l].dataSource instanceof t.DataManager&&s.push(this.model.columns[l].field);return i.length?{query:t.Query().select(i),fields:i,fieldsDrop:s}:{query:t.Query(),fields:[],fieldsDrop:s}},_renderExternalForm:function(){var e=t.buildTag("div","",{display:"none"},{id:this._id+"_externalEdit",class:"e-form-container"}),i=t.buildTag("div","","",{id:this._id+"_eFormHeader",class:"e-form-titlebar"}),s=t.buildTag("span","","",{class:"e-form-title"}),n=t.buildTag("div","","",{id:this._id+"_eFormToggleBtn",class:"e-form-togglebtn"}),l=t.buildTag("span","","",{class:"e-form-toggle-icon e-icon"});n.append(l),i.append(s).append(n);var o=t.buildTag("div","","",{id:this._id+"_eFormContent",class:"e-form-content"}),r=t.buildTag("div","","",{id:this._id+"_externalForm",class:"e-externalform"}),a=t.buildTag("div","","",{class:"e-externalformedit"});return r.append(a),o.append(r),e.append(i).append(o)},_buttonClick:function(t){if("close"==t.type){if(!this.model.isEdit)return;return this.model.isEdit=!1,this.element.ejGrid("cancelEdit"),void this.refreshToolbar()}if(t.keyCode!==s&&13!=t.keyCode||null==this.model)return!0;"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?t.target.id=="EditDialog_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="EditDialog_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_dialogEdit").ejDialog("close")):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?e(t.target).hasClass("e-form-toggle-icon")?(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):t.target.id=="EditExternalForm_"+this._id+"_Save"?this.element.ejGrid("endEdit").length!==s&&e("#"+this._id+"_externalEdit").css("display","none"):t.target.id=="EditExternalForm_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?t.target.id=="InlineEditForm_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="InlineEditForm_"+this._id+"_Cancel"&&this.element.ejGrid("cancelEdit"):this.element.ejGrid("cancelEdit")},_enableEditingEvents:function(){this.model.editSettings.allowEditing||this.model.editSettings.allowAdding?(this.model.editSettings.allowEditing&&"batch"!=this.model.editSettings.editMode&&this.model.editSettings.allowEditOnDblClick?this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent",this._editdblClickHandler):(this._off(this.element,"dblclick",".e-gridcontent"),this._off(this.element,"doubletap",".e-gridcontent")),this._off(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this._on(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel",this._buttonClick):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?(this._on(e("#"+this._id+"_externalEdit"),"click ","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel",this._buttonClick),e(this.element).on("click",".e-form-toggle-icon",e.proxy(this._buttonClick,this))):"batch"==this.model.editSettings.editMode?(this._on(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!0):"inlineform"!=this.model.editSettings.editMode&&"inlineformtemplate"!=this.model.editSettings.editMode||e(this.element).on("click ","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel",e.proxy(this._buttonClick,this)),"batch"!=this.model.editSettings.editMode&&this._batchEnabled&&(this._off(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!1)):(this._off(e("#"+this._id+"_dialogEdit"),"click","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),e(this.element).off("click",".e-icon"),this._off(e("#"+this._id+"_externalEdit"),"click","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel"),e(this.element).off("click",".e-form-toggle-icon"),e(this.element).off("click","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel"))},_multiRowDelete:function(){var e,i,s={};if(s.added=[],s.deleted=[],s.changed=[],s.deleted=this.getSelectedRecords(),(e={}).data=this.getSelectedRecords(),e.tr=this.getSelectedRows(),i=this._getForeignKeyData(e.data),t.isNullOrUndefined(i)||(e.foreignKeyData=i),e.requestType="delete",this._trigger("actionBegin",e))return!0;this._sendBulkReuqest(s,e)},deleteRow:function(i){var n,l,o,r,a,d,h;if(this.model.editSettings.allowDeleting&&(!this.model.isEdit||"batch"==this.model.editSettings.editMode||this.model.editSettings.showAddNewRow)){if(this.model.editSettings.showDeleteConfirmDialog&&!this._confirmDialog.is(":visible"))return this._cDeleteData=i,void this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open");if(e.isArray(i))this.selectRows(i),this._multiRowDelete();else if("batch"==this.model.editSettings.editMode)this._bulkDelete(this.getIndexByRow(i));else{if(0==this._primaryKeys.length&&!this.model.editSettings.allowEditing&&!this.model.editSettings.allowAdding)for(o=0;o<this.model.columns.length;o++)!0===this.model.columns[o].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[o].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort()));if(-1==this._selectedRow()&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.DeleteOperationAlert);for(t.isNullOrUndefined(i)&&(i=this.model.scrollSettings.enableVirtualization?this.getContentTable().find("tr[aria-selected='true']"):this.getRowByIndex(this._selectedRow())),this._primaryKeyValues=[],this._getPrimaryKeyValues(i),n=t.DataManager(this._currentJsonData),l=new t.Query,o=0;o<this._primaryKeys.length;o++)l=l.where(this._primaryKeys[o],t.FilterOperators.equal,this._primaryKeyValues[o]);if(currentData=n.executeLocal(l),(r={}).tr=i,r.data=currentData[0],a=this._getForeignKeyData(r.data),t.isNullOrUndefined(a)||(r.foreignKeyData=a),r.requestType=t.Grid.Actions.Delete,this._trigger("actionBegin",r))return!0;this._cDeleteData=currentData,(!t.isOnWebForms||!this.model.serverEvents||-1==this.model.serverEvents.indexOf("endDelete"))&&this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor?(d=this._dataManager.remove(this._primaryKeys[0],currentData[0][this._primaryKeys[0]],this.model.query),h=this,e.isFunction(d.promise)?(d.done(function(){h._processBindings(r),h._primaryKeyValues=[],h._cDeleteData=null}),d.fail(function(e){r.error=e,h._trigger("actionFailure",r)})):this._processBindings(r)):this._processBindings(r),d!=s&&e.isFunction(d.promise)||(this._primaryKeyValues=[],this._cDeleteData=null)}}},_htmlEncode:function(e){return str=e,t.isNullOrUndefined(str)||(str=isNaN(str)?str.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):str),str},startEdit:function(i){if(this.model.editSettings.allowEditing&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||!this._excludeDetailRows().hasClass("e-editedrow"))&&!this.element.ejWaitingPopup("model.showOnInit")){if(-1==this._selectedRow()&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.EditOperationAlert);if(this.model.scrollSettings.enableVirtualization&&t.isNullOrUndefined(i)&&(i=this.getContentTable().find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(this._currentTrIndex=this._selectedRow(),this._$currentTr=this.getRowByIndex(this._currentTrIndex)):(this._currentTrIndex=this.getIndexByRow(i),this._$currentTr=i),!e(this._$currentTr).is(":visible"))return!1;this._primaryKeyValues=[],this._getPrimaryKeyValues(this._$currentTr);var s=this._currentJsonData[this._currentTrIndex],n={row:this._$currentTr,rowIndex:this._currentTrIndex,primaryKey:this._primaryKeys,primaryKeyValue:this._primaryKeyValues,rowData:s};if(this._trigger("beginEdit",n))return void(this._primaryKeyValues=[]);n.requestType=t.Grid.Actions.BeginEdit,this._processBindings(n)}},_getPrimaryKeyValues:function(i){var s,n,l,o,r,a,d=i.attr("name"),h=!1;for(this._lastVirtualPage=null,a=0;a<this._primaryKeys.length;a++)l=this.getColumnByField(this._primaryKeys[a]),s=this.getIndexByRow(i),n=this._currentJsonData,this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(s%=this._virtualRowCount,o=parseInt(d,32)):(s%=this.model.pageSettings.pageSize,o=parseFloat(d)/this.model.pageSettings.pageSize+1,this._currentJsonData=this._virtualLoadedRecords[o],o!=this.model.pageSettings.totalPages||this._prevPageRendered||this._virtualLoadedRecords[o].length==this.model.pageSettings.pageSize||(n=e.extend(!0,[],this._previousPageRecords),r=e.extend(!0,[],this._virtualLoadedRecords[o]),t.merge(n,r),this._lastVirtualPage=this._currentJsonData=e.extend(!0,[],n),h=!0)),n=h?n:this._virtualLoadedRecords[o],this._vCurrentTrIndex=s,this._currentVIndex=o),this._primaryKeyValues.push(this._htmlEncode(n[s][l.field]))},_startAdd:function(){var i,s,n,l,o,r,a,d,h;if(this.model.editSettings.allowAdding)if(this._isAddNew=!0,"batch"==this.model.editSettings.editMode)this._bulkAddRow();else{for(i={},s=this.model.columns,o=0;o<s.length;o++)t.isNullOrUndefined(this.model.parentDetails)||s[o].field!=this.model.parentDetails.parentKeyField||(s[o].defaultValue=this.model.parentDetails.parentKeyFieldValue),!t.isNullOrUndefined(s[o].field)&&s[o].field.indexOf(".")>0?t.createObject(s[o].field,s[o].defaultValue||"",i):i[s[o].field]=t.isNullOrUndefined(s[o].defaultValue)?"date"==s[o].type||"datetime"==s[o].type?null:"":s[o].defaultValue;if(l={},(n={}).data=i,-1!=this.model.editSettings.editMode.indexOf("template"))for(o=0;o<this.model.columns.length;o++)t.isNullOrUndefined(this.model.columns[o].field)||-1==this.model.columns[o].field.indexOf(".")||(r=this.model.columns[o].field.split("."),t.createObject(this.model.columns[o].field,n.data[this.model.columns[o].field],l),n.data[r[0]]=l,delete n.data[this.model.columns[o].field]);a=this._getForeignKeyData(n.data),t.isNullOrUndefined(a)||(n.foreignKeyData=a),n.requestType="add",this.clearSelection(),this.model.scrollSettings.allowVirtualScrolling&&(this._currentVIndex=null,this._lastVirtualPage=null,this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(1):this._virtualLoadedRecords[1]?this._currentPage(1):this.gotoPage(1),this.getScrollObject().scrollY(0)),this._processBindings(n)||(this.model.editSettings.showAddNewRow?this._selectedRow(-1):this._selectedRow(0)),(d=this.model.groupSettings.groupedColumns.length)>1&&(h=this.getContentTable().find(".e-addedrow").find("table").find("colgroup").children(),e(h.slice(0,d-1)).css("width",this.getHeaderTable().find("colgroup").children()[0].style.width))}},endEdit:function(){var i,n,l,o,r,a,d,h,c,u,m,p,g;if(this.model.isEdit){if(o=0,!this.editFormValidate())return!0;if(r={},"batch"==this.model.editSettings.editMode)this.saveCell();else{for(this.model.editSettings.showAddNewRow&&(l=this.getContentTable().find(".e-editedrow")),i=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(l)||1!=l.length?document.getElementById(this._id+"EditForm"):l[0].lastChild.lastChild,n=e(i),(a="normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?n.closest("tr"):n.closest("div")).find("td.e-rowcell").removeClass("e-validError"),i=this.model.scrollSettings.frozenColumns>0?i[0]:i,d=0;d<i.length;d++)if(!a.hasClass("e-addedrow")||!e(i[d]).hasClass("e-identity")){var f=i[d].name,_=e(i[d]),v=this.getColumnByField(f);if(!_.hasClass("e-dropdownlist e-input")||-1==_.attr("id").indexOf("_input")||!t.isNullOrUndefined(n[1])){if(f!=s&&((""==f||t.isNullOrUndefined(v))&&(f=-1!=i[d].id.indexOf("Save")||-1!=i[d].id.indexOf("Cancel")?"":i[d].id.replace(this._id,"")),""!=f&&null==r[f])){v=this.getColumnByField(f);var b=i[d].value,w=i[d].type,C=e(i[d]).is(":checked"),y=v?v.originalType:null;if(t.isNullOrUndefined(v)||"edittemplate"!=v.editType)e(i[d]).hasClass("e-datepicker")?b=_.ejDatePicker("model.value"):e(i[d]).hasClass("e-datetimepicker")?b=_.ejDateTimePicker("model.value"):_.is(".e-numerictextbox")?(b=_.ejNumericTextbox("getValue"),"string"!=v.type||t.isNullOrUndefined(b)||(b=b.toString())):_.data("ejDropDownList")&&(b=_.ejDropDownList("getSelectedValue"),t.isNullOrUndefined(v)||t.isNullOrUndefined(v.format)||"date"!=v.type&&"datetime"!=v.type||(b=b.length>0?new Date(b):b));else{if(!e(i[d]).is("#"+this._id+f))continue;h=v.editTemplate.read,_=e(i[d]),"string"==typeof h&&(h=t.util.getObject(h,window)),b=h(_)}y&&(b="number"==y?+b:"boolean"==y?b===this.localizedLabels.True:"date"===y?new Date(b):b),null==v?b=!isNaN(parseFloat(b))&&isFinite(b)?parseFloat(b):b:"number"==v.type&&!t.isNullOrUndefined(b)&&b.length&&(b=t.parseFloat(b,this.model.locale)),"string"!=typeof b||b.length||(b=null),("checkbox"!=w&&!t.isNullOrUndefined(b)&&""!==b||C)&&o++,c="checkbox"!=w?b:C,-1!=f.indexOf(".")?t.createObject(f,c,r):r[f]=c}d==i.length-1&&n.length>1&&0==n.index(i)&&(i=n[1],d=-1)}}if(u={data:r},m=this._getForeignKeyData(u.data),t.isNullOrUndefined(m)||(u.foreignKeyData=m),u.requestType=t.Grid.Actions.Save,u.selectedRow=this._selectedRow(),u.previousData=jQuery.extend({},this.model.currentViewData[u.selectedRow]),this._trigger("actionBegin",u))return!0;if(a.hasClass("e-editedrow")?(this._cModifiedData=r,u.action="edit"):a.hasClass("e-addedrow")&&(o&&(this._cAddedRecord=r),u.action="add"),"add"==u.action&&this.editFormValidate()&&!o)return elements=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm"),p=t.buildTag("div"),g=elements.find("input:visible").not(".e-identity").first(),this._renderValidator(p,g),$errorMessage=t.buildTag("div.e-field-validation-error",this.localizedLabels.EmptyRowValidationMessage),$tail=e(p).find(".e-errortail"),$errorMessage.insertAfter($tail),$errorMessage.css("display","block"),!1;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this._updateAction(u)}}},_updateAction:function(i){var n,l;this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor?"batch"==this.model.editSettings.editMode?(this.batchChanges.added.push(i.data),this.batchSave()):(t.isNullOrUndefined(this._cModifiedData)||t.isOnWebForms&&this.model.serverEvents&&-1!=this.model.serverEvents.indexOf("endEdit")?t.isOnWebForms&&this.model.serverEvents&&-1!=this.model.serverEvents.indexOf("endAdd")||(n=this._dataManager.insert(i.data,this.model.query)):n=this._dataManager.update(this._primaryKeys[0],i.data,this.model.query),l=this,this.element.ejWaitingPopup("show"),n&&e.isFunction(n.promise)?(n.done(function(s){l.model.isEdit=!1,!t.isNullOrUndefined(s)&&e.isPlainObject(s.record)&&(e.extend(i.data,s.record),"add"==i.action&&(l._cAddedRecord=i.data),"edit"==i.action&&(l._cModifiedData=i.data)),l._processBindings(i),l._isRemoteSaveAdaptor&&(l.element.ejWaitingPopup("hide"),t.isNullOrUndefined(l._unboundRow)||i.selectedRow==l._unboundRow||"save"!=i.requestType||(l._unboundRow.find(".e-editbutton").trigger("click"),l._unboundRow=null)),l._cModifiedData=null,l._cAddedRecord=null,l._primaryKeyValues=[]}),n.fail(function(e){i.error=e&&e.error?e.error:e,l._cModifiedData=null,l._cAddedRecord=null,l.element.ejWaitingPopup("hide"),l._trigger("actionFailure",i)})):(l.model.isEdit=!1,l._processBindings(i))):this._processBindings(i),n!=s&&e.isFunction(n.promise)||(this._cModifiedData=null,this._cAddedRecord=null,this._primaryKeyValues=[])},cancelEdit:function(){var i={};i.requestType=t.Grid.Actions.Cancel,this._cModifiedData=null,this._processBindings(i),this._primaryKeyValues=[],this._currentData=null,("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")},refreshToolbar:function(){var t,i,s=e("#"+this._id+"_toolbarItems"),n=s.find("li");if(s.ejToolbar("enableItem",n),t=this.getContentTable().find(".e-editedrow"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length)this._disabledToolItems.push(n.filter("[id="+this._id+"_add]"));else for(i=0;i<n.length;i++)switch(n[i].id){case this._id+"_add":case this._id+"_edit":case this._id+"_delete":case this._id+"_responsiveFilter":case this._id+"_responsiveSorting":case this._id+"_search":this.model.isEdit?this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length||(e(n[i]).hasClass("e-hover")&&e(n[i]).removeClass("e-hover"),this._disabledToolItems.push(n[i])):(this.model.enableToolbarItems||this.model.editSettings.allowAdding||n[i].id!=this._id+"_add")&&(this.model.enableToolbarItems||this.model.editSettings.allowEditing||n[i].id!=this._id+"_edit")&&(this.model.enableToolbarItems||this.model.editSettings.allowDeleting||n[i].id!=this._id+"_delete")||this._disabledToolItems.push(n[i]);break;case this._id+"_update":case this._id+"_cancel":this.model.isEdit||(e(n[i]).hasClass("e-hover")&&e(n[i]).removeClass("e-hover"),this._disabledToolItems.push(n[i]))}s.ejToolbar("disableItem",this._disabledToolItems),s.ejToolbar("model.enableRTL",this.model.enableRTL),this._disabledToolItems=e()},_getHiddenCount:function(e){for(var t=0,i=0;i<e.length;i++)e.eq(i).hasClass("e-hide")&&t++;return t},_refreshTemplateCell:function(t,i){for(var s,n=t.find(".e-templatecell"),l=0;l<n.length;l++)s={cell:n[l],data:i,column:this.model.columns[e(n[l]).index()],rowIndex:t.index()},this._trigger("templateRefresh",s)},_edit:function(i){var s,n,l,o,r,a,d,h,c=this.model.scrollSettings.enableVirtualization?t.DataManager(this._virtualLoadedRecords[this._currentVIndex]):t.DataManager(this._currentJsonData),u=new t.Query;for(this.model.allowFiltering&&(this._previousFilterCount=this._filteredRecordsCount),n=0;n<this._primaryKeys.length;n++)u=u.where(this._primaryKeys[n],t.FilterOperators.equal,this._primaryKeyValues[n]);this._currentData=c.executeLocal(u);var m=document.createElement("div"),p=t.isNullOrUndefined(this.model.editSettings.titleColumn)?this._primaryKeys[0]:this.model.editSettings.titleColumn,g=e(m);if("normal"==this.model.editSettings.editMode){m.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("");var f=g.find("tr").first(),_=0,v=this.model.columns.length,b=i.row.first();this.model.scrollSettings.frozenColumns>0&&(g.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),f.splice(0,0,g.find("table").first().find("tr").first().get(0)),$currentTrLa=i.row.last(),$tempLastTR=f.last()),s=g.find("tr").first(),g.find("td").not(".e-rowcell").addClass("e-editcell e-normaledit"),this._setEditDropdownValue(g),this.model.groupSettings.groupedColumns.length>=2&&(l=i.row.find("td.e-indentcell"),g.find("tr").first().prepend(l)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(_++,g.find(".e-editcell").find("tr").prepend(i.row.find("[class*=e-detailrow]").eq(0).removeClass("e-selectionbackground e-active")),"both"!=this.model.gridLines&&g.find(".e-editcell .e-rowcell:first").addClass("e-detailrowvisible")),this.model.scrollSettings.frozenColumns>0&&(g.find(".e-editcell").get(1).colSpan=this.model.columns.length-this.model.scrollSettings.frozenColumns-i.row.last().find(".e-hide").length+_,v=this.model.scrollSettings.frozenColumns,$currentTrLa.hasClass("e-alt_row")&&$tempLastTR.addClass("e-alt_row")),g.find(".e-editcell").get(0).colSpan=v-b.find("td").not(":visible").length+_,b.hasClass("e-alt_row")&&s.addClass("e-alt_row"),b.empty().replaceWith(s.addClass("e-editedrow")),i.row=s,s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0&&($currentTrLa.empty().replaceWith($tempLastTR.addClass("e-editedrow")),i.row=$tempLastTR),this._refreshUnboundTemplate(f.find(".gridform")),this._gridRows=0==this.model.scrollSettings.frozenColumns?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row, tr.e-editedrow").toArray():e(this.getContentTable().get(0).rows).toArray(),this.model.scrollSettings.frozenColumns>0&&(this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop,!0),this._gridRows=[this._gridRows,e(this.getContentTable().get(1).rows).toArray()])}else"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(o=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,_=0,m.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(g),r=t.buildTag("tr"),a=t.buildTag("td"),r.addClass("e-editedrow"),a.addClass("e-inlineformedit"),m=e(m).clone(!0).children(),a.html(m),r.append(a),r.is(":last-child")||r.find(".e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0?((d=r.clone()).find("td").empty().prop("colspan",this.model.scrollSettings.frozenColumns),i.row.eq(1).after(r).end().eq(0).after(d),this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]):i.row.after(r),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr").toArray(),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&_++,this.model.scrollSettings.frozenColumns>0?a.prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-r.find("form").children().not(":visible").length-o+_):a.prop("colspan",this.model.columns.length-this._hiddenColumns.length-o+_),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),i.row.find("input").attr("disabled","disabled").addClass("e-disable")):(g.addClass("e-editedrow"),m.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(g),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(m)),(h={}).cssClass=this.model.cssClass,h.enableRTL=this.model.enableRTL,h.width="auto",h.enableResize=this.phoneMode,h.close=e.proxy(this._buttonClick,this),h.content="#"+this._id,h.enableModal=!0,h.allowKeyboardNavigation=!1,h.title=this.localizedLabels.EditFormTitle+this._currentData[0][p],e("#"+this._id+"_dialogEdit").ejDialog(h),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(m)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),this._externalFormPosition(),i.row.find("input").attr("disabled","disabled").addClass("e-disable")));"normal"!=this.model.editSettings.editMode&&(s=e(m)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,this.model.currentViewData[s.index()])},_setEditDropdownValue:function(i){for(var s,n,l,o,r,a,d=i.find("select.e-field"),h=i.find("input.e-field.e-dropdownlist"),c=0;c<d.length;c++){if(s={},n="",-1!=d[c].name.indexOf(".")){for(r=1;r<d[c].name.split(".").length;r++)n=n.concat("(");s[this._id+"ddlTemp"]="{{:"+n+"#data['"+d[c].name.split(".").join("'] || {})['")+"']}}"}else s[this._id+"ddlTemp"]="{{:"+d[c].name.replace(/[^a-z0-9\s_]/gi,"")+"}}";e.templates(s),a=e.render[this._id+"ddlTemp"](this._currentData),l=i.find("select:eq("+c+') option[value="'+a+'"]'),d.eq(c).data("ej-value",a),o=this.getColumnByField(d[c].name),this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=this._dataSource().adaptor.value.indexOf(o.field)&&(l=i.find("select:eq("+c+') option:contains("'+a+'")'),d.eq(c).val(l[0].value),d.eq(c).data("ej-value",l[0].value)),l.attr("selected","selected")}for(r=0;r<h.length;r++)h.eq(r).data("ej-value",t.getObject(h.eq(r).attr("name"),this._currentData[0]))},_add:function(i){var s,n,l,o,r,a,d,h,c,u,m=document.createElement("div");if(this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(0,1):this._dataSource().splice(0,1)),this._previousFilterCount=this._filteredRecordsCount,"normal"==this.model.editSettings.editMode){for(l=e(m),o=this.model.columns.length,m.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);if(this.model.scrollSettings.frozenColumns>0&&($tempLastTR=l.find("table").first().find("tr").first(),l.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),e($tempLastTR).find("td").first().addClass("e-editcell")),n=l.find("tr").first(),_=e(m).find(".e-editcell").get(0),e(m).find("td").first().addClass("e-editcell"),this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),0!=this.model.currentViewData.length&&0!=this.getContentTable().find("td.e-rowcell").length||0!=this.model.scrollSettings.frozenColumns?(this.model.scrollSettings.frozenColumns>0&&this._renderByFrozenDesign(),r=this.getContentTable().first().find("tbody").first(),"top"==this.model.editSettings.rowPosition?r.prepend(n.addClass("e-addedrow e-normaledit")):"bottom"==this.model.editSettings.rowPosition&&r.append(n.addClass("e-addedrow e-normaledit")),this.model.scrollSettings.frozenColumns>0&&this.getContentTable().last().find("tbody").first().prepend($tempLastTR.addClass("e-addedrow e-normaledit"))):(this.getContentTable().find("tr").first().replaceWith(e(m).find("tr").first().addClass("e-addedrow e-normaledit")),0==this.getContentTable().find("tr").length&&this.getContentTable().append(e(m).find("tr").first().addClass("e-addedrow e-normaledit"))),s=this.getContentTable().find("tr.e-addedrow"),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&s.attr("name",0),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&s.find("tr").first().prepend(t.buildTag("td.e-detailrowcollapse")),p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length){for(c=0;c<this.model.groupSettings.groupedColumns.length;c++)0==c?s.prepend(t.buildTag("td.e-indentcell")):s.find("tr").prepend(t.buildTag("td.e-indentcell"));this.model.groupSettings.groupedColumns.length>0&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)?s.find("td.e-editcell").prop("colspan",this.model.columns.length+this.model.groupSettings.groupedColumns.length-this._hiddenColumns.length-p):this.model.groupSettings.groupedColumns.length>=2?s.find("td.e-editcell").prop("colspan",this.model.columns.length+(this.model.groupSettings.groupedColumns.length-1)-this._hiddenColumns.length-p):s.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p)}else null!=this.model.detailsTemplate||null!=this.model.childGrid?s.find(".e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p+1):(this.model.scrollSettings.frozenColumns>0&&(s.find(".e-editcell").last().prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-$tempLastTR.find("td").not(":visible").length-p),o=this.model.scrollSettings.frozenColumns),s.find(".e-editcell").first().prop("colspan",o-n.find("td").not(":visible").length-p));s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||"bottom"!=this.model.editSettings.rowPosition||this._colgroupRefresh(),this._refreshUnboundTemplate(s.find(".gridform")),this._gridRows=this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else if("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){m.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data);var p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,g=0,f=t.buildTag("tr"),_=t.buildTag("td");for(f.addClass("e-addedrow"),_.addClass("e-inlineformedit e-editcell"),m=e(m).clone(!0).children(),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);if(_.html(m),f.append(_),f.is(":last-child")||f.find(".e-rowcell").addClass("e-validError"),p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length)for(c=0;c<this.model.groupSettings.groupedColumns.length;c++)f.prepend(t.buildTag("td.e-indentcell"));else f.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p);this.model.scrollSettings.frozenColumns>0?(a=f.clone(),d=_.find(".gridform").children(),a.find("td").empty().prop("colSpan",this.model.scrollSettings.frozenColumns-this._getHiddenCount(d.slice(0,this.model.scrollSettings.frozenColumns))),_.prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns-this._getHiddenCount(d.slice(this.model.scrollSettings.frozenColumns))),(0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length)&&this._renderByFrozenDesign(),this.getContentTable().first().find("tbody").first().prepend(a),this.getContentTable().last().find("tbody").first().prepend(f)):((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&g++,_.prop("colspan",this.model.columns.length-this._hiddenColumns.length-p+g),0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length?this.getContentTable().find("tr").first().replaceWith(e(f)):this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(f):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(f)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.AddFormTitle),this._refreshUnboundTemplate(e("#"+this._id+"EditForm")),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else{for(e(m).addClass("e-addedrow"),m.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(m)),(u={}).cssClass=this.model.cssClass,u.width="auto",u.enableResize=this.phoneMode,u.content="#"+this._id,u.enableModal=!0,u.close=e.proxy(this._buttonClick,this),u.enableRTL=this.model.enableRTL,u.allowKeyboardNavigation=!1,u.title=this.localizedLabels.AddFormTitle,e("#"+this._id+"_dialogEdit").ejDialog(u),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(m)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.AddFormTitle),this._externalFormPosition())}"normal"!=this.model.editSettings.editMode&&(s=e(m)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,i.data),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager())},editFormValidate:function(){var t,i,s;return!e.isFunction(e.validator)||(this.model.scrollSettings.frozenColumns>0?(t=this.element.find(".gridform")).length>1?(i=t.eq(0).validate().form(),s=t.eq(1).validate().form(),!(!i||!s)):t.validate().form():this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform").validate().form():this.element.find(".e-addedrow .gridform").validate().form():e("#"+this._id+"EditForm").validate().form())},_refreshAltRow:function(){for(var t,i=this._excludeDetailRows(),s=0;s<i.length;s++)(t=e(i[s])).hasClass("e-alt_row")&&t.removeClass("e-alt_row"),s%2!=0?t.addClass("e-alt_row"):t.addClass("e-row")},_editCompleteAction:function(i){var s,n,l,o,r=this.element.find(".gridform");if(this.model.isEdit=!0,this.getContentTable().children("colgroup").find("col"),this.element.width(),this.setWidthToColumns(),t.Grid.Actions.Add==i.requestType){for(s=r.find(".e-field:disabled"),n=0;n<s.length;n++)l=e(s[n]).attr("name"),e(s[n]).hasClass("e-identity")||(-1==e.inArray(l,this._disabledEditableColumns)||-1!==e.inArray(l,this._primaryKeys))&&e(s[n]).prop("disabled",!1).removeClass("e-disable");for(o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)r.find("colgroup").prepend(this._getIndentCol())}(0==this._tdsOffsetWidth.length||this.model.groupSettings.groupedColumns.length||-1!=e.inArray(0,this._tdsOffsetWidth)||this._hiddenColumns.length>0)&&this._setoffsetWidth(),this._refreshEditForm(i),this.model.scrollSettings.frozenColumns>0&&("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&("beginedit"==i.requestType?i.row.eq(0).next().find("td").height(i.row.eq(1).next().find("td").height()):this.getContentTable().first().find("tr").first().find("td").height(this.getContentTable().last().find("tr").first().find("td").height())),this.model.scrollSettings.frozenRows>0&&"beginedit"==i.requestType&&(this._initFrozenRows(),t.getObject("_vScrollbar._scrollData",this.getScrollObject())&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns<=0&&this.getScrollObject()&&this.getScrollObject().isHScroll()&&this.getScrollObject().refresh(),e.isFunction(e.validator)&&this.initValidator()},_refreshEditForm:function(i){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,w,C,y,S;for(this.model.editSettings.showAddNewRow&&(n=this.getContentTable().find(".e-editedrow")),l=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(n)||1!=n.length?document.getElementById(this._id+"EditForm"):n[0].lastChild.lastChild,o=!1,this.model.enableResponsiveRow&&e.isFunction(window.matchMedia)&&(a=window.matchMedia("(max-width: 320px)")),d=e(l).find("input,select,div.e-field,textarea"),h=86,(this._isUnboundColumn||null!=this.getContentTable().find(".e-templatecell"))&&"batch"!=this.model.editSettings.editMode&&(d=d.filter(function(){return!e(this).closest(".e-rowcell").hasClass("e-unboundcell")&&!e(this).closest(".e-rowcell").hasClass("e-templatecell")})),c=null,v=0;v<d.length;v++){if(u=d.eq(v),null!=(p=this.getColumnByField(t.isNullOrUndefined(u.prop("name"))?u.attr("name"):u.prop("name")))&&(r=e.inArray(p,this.model.columns)),"batch"==this.model.editSettings.editMode?h=95:"normal"==this.model.editSettings.editMode&&(h=96),"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(u.parent().css("width",t.dataUtil.max(this._tdsOffsetWidth)+"px"),m=t.max(this._tdsOffsetWidth)*(h/100)):m=this._tdsOffsetWidth[v]*(h/100),("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode||this.model.allowResizing||this.model.allowResizeToFit)&&!u.hasClass("e-checkbox")&&(m="100%"),null!=p&&r!==s&&r<this.model.columns.length&&this.model.columns[r].editTemplate)g={rowdata:"batch"==this.model.editSettings.editMode?this._batchEditRowData:this._currentJsonData[this._selectedRow()],column:this.model.columns,element:u,requestType:i.requestType,type:i.type},f=this.model.columns[r].editTemplate.write,t.isNullOrUndefined(i)||"add"!=i.requestType||(g.rowdata={}),"string"==typeof f&&(f=t.util.getObject(f,window)),f(g),this.model.columns[r].isPrimaryKey&&"beginedit"==i.requestType&&u.addClass("e-disable").attr("disabled","disabled");else if(u.hasClass("e-numerictextbox")){var x={width:m},T=u.val(),k=this.getColumnByField(u.prop("name"));(!t.isNullOrUndefined(a)&&a.matches||k.width&&"string"==typeof k.width&&-1!=k.width.indexOf("%")&&("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode))&&(x.width="100%"),x.enableRTL=this.model.enableRTL,x.showSpinButton=!0,x.cssClass=this.model.cssClass,x.watermarkText=this.localizedLabels.NumericTextBoxWaterMark,x.locale=this.model.locale,T.length&&(x.value=parseFloat(T)),u.hasClass("e-disable")&&(x.enabled=!1),t.isNullOrUndefined(k.editParams)||e.extend(x,k.editParams),u.ejNumericTextbox(x),u.prop("name",u.prop("name").replace(this._id,""))}else if(u.hasClass("e-datepicker")||u.hasClass("e-datetimepicker")||u.hasClass("e-dropdownlist"))k=this.getColumnByField(u.prop("name")),T=u.val(),(!t.isNullOrUndefined(a)&&a.matches||k.width&&"string"==typeof k.width&&-1!=k.width.indexOf("%")&&("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode))&&(m="100%"),u.width(m),u.hasClass("e-disable")&&u.attr("disabled","disabled");else if(u.hasClass("e-save e-button")||u.hasClass("e-cancel e-button"))u.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,width:"100","text-align":"centre",height:"35px"});else switch(u.prop("tagName")){case"INPUT":if(!t.isNullOrUndefined(p)&&p.format&&""!=u.val())switch(p.type){case"date":T=u.val();var D=new Date(T),I=p.format.replace("{0:","").replace("}",""),O=t.format(D,I);u.val(O);break;case"number":T=u.val(),"c"==(I=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(p.format))[2].toLowerCase().split("")[0]?I[2]=I[2].toLowerCase().replace("c","n"):I[2],u.val(t.format(parseFloat(T),I[2]))}"checkbox"!=u.attr("type")?(u.css("text-align",null!=u.attr("name")&&null!=this.getColumnByField(u.attr("name"))?this.getColumnByField(u.attr("name")).textAlign:"center"),"batch"==this.model.editSettings.editMode?(u.css("width","100%").css("height","28px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","22px")):"normal"==this.model.editSettings.editMode?(u.css("width","100%").css("height","30px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","24px")):(u.outerWidth(m).height(28),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","26px"))):u.width(m>0?u.width()>m?m:u.width():-1!=this.model.editSettings.editMode.indexOf("template")?u.width():1),"batch"!=this.model.editSettings.editMode||this._tabKey||(u.is(":checked")?u.prop("checked",!1):u.prop("checked",!0));break;case"SELECT":u.width(m).height(28)}null==p||p.visible||!p.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||u.addClass("e-hide"),u.is(":disabled")||o||u.is(":hidden")&&"object"!=typeof(u.data("ejDropDownList")||u.data("ejNumericTextbox"))||(c=u,o=!0)}for((_={}).width="100%",_.enableRTL=this.model.enableRTL,_.cssClass=this.model.cssClass,_.locale=this.model.locale,_.watermarkText=this.localizedLabels.DatePickerWaterMark,d.filter(".e-datepicker").ejDatePicker(e.extend({displayDefaultDate:!0,showPopupButton:!1},_)),delete _.watermarkText,d.filter(".e-datetimepicker").ejDateTimePicker(e.extend({showPopupButton:!1},_)),d.filter(".e-dropdownlist").ejDropDownList(e.extend({enableIncrementalSearch:!0},_)),v=0;v<this.model.columns.length;v++){if(b=this.model.columns[v],!t.isNullOrUndefined(b.editParams))switch(b.editType){case t.Grid.EditingType.DateTimePicker:d.filter("#"+this._id+b.field+".e-datetimepicker").ejDateTimePicker(b.editParams);break;case t.Grid.EditingType.DatePicker:d.filter("#"+this._id+b.field+".e-datepicker").ejDatePicker(b.editParams);break;case t.Grid.EditingType.Dropdown:d.filter("#"+this._id+b.field+".e-dropdownlist").ejDropDownList(b.editParams)}if(b.editType==t.Grid.EditingType.Dropdown&&(w=-1,this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(w=this._dataSource().adaptor.value.indexOf(b.field)),C=d.filter("#"+this._id+b.field.replace(".","")+".e-dropdownlist"),y=null,!t.isNullOrUndefined(b.dataSource)&&!t.isNullOrUndefined(b.editParams)&&t.isNullOrUndefined(b.foreignKeyField)&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=w?y=b.dataSource:t.isNullOrUndefined(b.dataSource)&&-1!=w&&!t.isNullOrUndefined(b.editParams)?y=this._dataSource().adaptor.foreignData[w]:!t.isNullOrUndefined(b.editParams)&&"fields"in b.editParams&&t.isNullOrUndefined(b.foreignKeyField)&&(y=b.dataSource),null!=y&&C.ejDropDownList({dataSource:y}),S=C.data("ej-value"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=w&&!t.isNullOrUndefined(b.editParams)?C.ejDropDownList("setSelectedText","add"==i.requestType&&t.isNullOrUndefined(b.defaultValue)?C.val(""):S):C.ejDropDownList("setSelectedValue","add"==i.requestType&&t.isNullOrUndefined(b.defaultValue)?C.val(""):S),null==b||b.visible||!b.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||b.editType==t.Grid.EditingType.Dropdown&&C.closest(".e-rowcell").find("input").addClass("e-hide")),I=null,b.format!==s&&b.format.length>0&&(I=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(b.format)[2]),-1!=[t.Grid.EditingType.DatePicker,t.Grid.EditingType.DateTimePicker].indexOf(b.editType)){var A=b.editType==t.Grid.EditingType.DatePicker?"datePicker":"dateTimePicker",L="ej"+A.replace(/\b\w/g,function(e){return e.toUpperCase()}),R=this._id+b.field,E=d.filter(function(t,i){return i.id==R&&(e(i).hasClass("e-datepicker")||e(i).hasClass("e-datetimepicker"))}),N={};null!=I&&(N[A.replace("Picker","")+"Format"]=I),E.hasClass("e-disable")&&(N.enabled=!1),E[L](N),"batch"==this.model.editSettings.editMode&&E[L]("show")}}null!=c&&this._focusElements(c)},_focusElements:function(e){if(e.length){var t=e;"select"==t[0].tagName.toLowerCase()&&!t.hasClass("e-field e-dropdownlist")||"input"==t[0].tagName.toLowerCase()&&!t.hasClass("e-numerictextbox")?(t.focus().select(),t[0].focus()):t.hasClass("e-field e-dropdownlist")?t.closest(".e-ddl").focus():t.hasClass("e-numerictextbox")?t.siblings("input:visible").first().select().focus():t.find("input:visible,select").first().select().focus()}},_renderToolBar:function(){var i,s,n=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),l=t.buildTag("ul");return(!t.isNullOrUndefined(this.model.toolbarSettings.toolbarItems)&&this.model.toolbarSettings.toolbarItems.length||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this._renderLi(l),n.append(l),i=t.buildTag("ul"),n.append(i),!t.isNullOrUndefined(this.model.toolbarSettings.customToolbarItems)&&this.model.toolbarSettings.customToolbarItems.length&&this._renderCustomLi(i),(s={}).click=this._toolBarClick,s.cssClass=this.model.cssClass,s.enableRTL=this.model.enableRTL,s.enableSeprator=!1,n.ejToolbar(s),n.ejToolbar("disableItem",this._disabledToolItems),this._disabledToolItems=e(),n},_renderCustomLi:function(i){for(var s,n,l,o=0;o<this.model.toolbarSettings.customToolbarItems.length;o++){switch(l=this.model.toolbarSettings.customToolbarItems[o].templateID?this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#",""):this.model.toolbarSettings.customToolbarItems[o],n=t.buildTag("li","",{},{id:this._id+"_"+l,title:l}),typeof this.model.toolbarSettings.customToolbarItems[o]){case"string":s=t.buildTag("a.e-toolbaricons e-icon","",{}).addClass(this.model.toolbarSettings.customToolbarItems[o]);break;case"object":n.attr("title",this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#","")),s=e(this.model.toolbarSettings.customToolbarItems[o].templateID).hide().html()}n.html(s),i.append(n)}},_renderLi:function(i){var s,n,l,o;for(e.isFunction(window.matchMedia)&&this.model.enableResponsiveRow&&(-1!=(s=this.model.toolbarSettings.toolbarItems.indexOf("search"))&&this.model.toolbarSettings.toolbarItems.splice(s,1),this.model.allowFiltering&&this.model.toolbarSettings.toolbarItems.push("responsiveFilter"),this.model.allowSorting&&this.model.toolbarSettings.toolbarItems.push("responsiveSorting"),-1!=s&&this.model.toolbarSettings.toolbarItems.push("search")),n=0;n<this.model.toolbarSettings.toolbarItems.length;n++)l=t.buildTag("li","",{},{id:this._id+"_"+this.model.toolbarSettings.toolbarItems[n],title:this.localizedLabels[this.model.toolbarSettings.toolbarItems[n].slice(0,1).toUpperCase()+this.model.toolbarSettings.toolbarItems[n].slice(1)]}),this._renderLiContent(l,this.model.toolbarSettings.toolbarItems[n]),o=this.model.toolbarSettings.toolbarItems[n],this.model.enableResponsiveRow&&("responsiveFilter"===o||"responsiveSorting"===o)&&(l.addClass("e-gridresponsiveicons"),l.css("display","none")),i.append(l)},_renderLiContent:function(e,i){var s,n,l,o;switch(i){case"add":s=t.buildTag("a.e-addnewitem e-toolbaricons e-icon e-addnew","",{});break;case"edit":s=t.buildTag("a.e-edititem e-toolbaricons e-icon e-edit","",{});break;case"delete":s=t.buildTag("a.e-deleteitem e-toolbaricons e-icon e-delete","",{});break;case"update":s=t.buildTag("a.e-saveitem e-toolbaricons e-disabletool e-icon e-save","",{}),this._disabledToolItems.push(e.get(0));break;case"cancel":s=t.buildTag("a.e-cancel e-toolbaricons e-disabletool e-icon e-gcancel","",{}),this._disabledToolItems.push(e.get(0));break;case"search":s=t.buildTag("a.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{}),this.model.enableResponsiveRow||(n=t.buildTag("input.e-ejinputtext e-gridsearchbar","",{},{type:"text",id:this._id+"_searchbar"}),o=t.buildTag("span.e-cancel e-icon e-hide","",{right:"1%"}),(l=t.buildTag("div.e-filterdiv e-searchinputdiv","",{display:"inline-table",width:"83%"})).append(n).append(o),e.append(l),t.isNullOrUndefined(this.model.searchSettings.key)||n.val(this.model.searchSettings.key)),this.model.allowSearching=!0;break;case"printGrid":s=t.buildTag("a.e-print e-toolbaricons e-icon","",{});break;case"excelExport":s=t.buildTag("a.e-toolbaricons e-excelIcon e-icon","",{});break;case"wordExport":s=t.buildTag("a.e-toolbaricons e-wordIcon e-icon","",{});break;case"pdfExport":s=t.buildTag("a.e-toolbaricons e-pdfIcon e-icon","",{});break;case"responsiveFilter":s=t.buildTag("a.e-toolbaricons e-filterset e-icon","",{});break;case"responsiveSorting":s=t.buildTag("a.e-toolbaricons e-respponsiveSorting e-icon","",{})}e.append(s),"search"==i&&(this._searchBar=e,e.css("display","flex"))},_toolBarClick:function(i){var n,l=e(this.itemsContainer).closest(".e-grid"),o=l.ejGrid("instance"),r=l.attr("id");if(i.event!=s||"INPUT"!=i.target.tagName||i.currentTarget.id!=r+"_search"){e.isFunction(e.fn.ejDatePicker)&&e("#"+r+"EditForm").find(".e-datepicker").ejDatePicker("hide");var a=i.currentTarget,d=i.target,h={itemName:e(a).attr("data-content"),itemId:a.id,currentTarget:a,target:d,itemIndex:e(a).index(),itemCurrentTarget:a.outerHTML,gridModel:o.model,itemTarget:d.outerHTML,toolbarData:i};if(!l.ejGrid("instance")._trigger("toolbarClick",h)){switch(h.itemId){case r+"_add":o._toolbarOperation(r+"_add");break;case r+"_edit":o._toolbarOperation(r+"_edit");break;case r+"_delete":o._toolbarOperation(r+"_delete");break;case r+"_update":o._toolbarOperation(r+"_update");break;case r+"_cancel":"batch"==o.model.editSettings.editMode?o._confirmDialog.find(".e-content").html(o.localizedLabels.CancelEdit).end().ejDialog("open"):o._toolbarOperation(r+"_cancel");break;case r+"_search":if(o.model.enableResponsiveRow)if(t.isNullOrUndefined(o.element.find(".e-responsesearch")[0])){var c=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),u=t.buildTag("div.e-responsesearch","",{width:"95%",height:"38px","margin-top":"7px","margin-left":"6px"}),m=t.buildTag("span.e-ttoltxt","",{width:"98%","margin-left":"2%"},{id:o._id+"_search"});$a=t.buildTag("span.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{position:"absolute",right:"2%","margin-top":"1%"}),"webkit"===t.browserInfo().name&&$a.css("margin-top","-2px"),n=t.buildTag("input.e-ejinputtext","",{width:"97%",height:"30px"},{type:"search",id:o._id+"_searchInput"}),t.isNullOrUndefined(o.model.searchSettings.key)||n.val(o.model.searchSettings.key),m.append(n),m.append($a),u.append(m),c.append(u),c.ejToolbar({click:function(t){o._toolbarOperation(r+"_search",e(t.currentTarget).find("input").val())}}),n.on("keyup",function(){""!=n.val()?($a.removeClass("e-searchfind"),$a.addClass("e-cancel")):($a.removeClass("e-cancel"),$a.addClass("e-searchfind"))}),$a.click(function(){$a.hasClass("e-cancel")&&(n.val(""),$a.removeClass("e-cancel"),$a.addClass("e-searchfind"),o._toolbarOperation(r+"_search",e("#"+r+"_searchInput").val()))}),c.insertBefore(o.getHeaderContent())}else"block"==o.element.find(".e-responsesearch").css("display")?o.element.find(".e-responsesearch").css("display","none"):o.element.find(".e-responsesearch").css("display","block");else o._toolbarOperation(r+"_search",e(i.currentTarget).find("input").val());break;case r+"_printGrid":o._toolbarOperation(r+"_printGrid");break;case r+"_excelExport":o._toolbarOperation(r+"_excelExport");break;case r+"_wordExport":o._toolbarOperation(r+"_wordExport");break;case r+"_pdfExport":o._toolbarOperation(r+"_pdfExport");break;case r+"_responsiveFilter":o._toolbarOperation(r+"_responsiveFilter");break;case r+"_responsiveSorting":o._toolbarOperation(r+"_responsiveSorting")}return!1}}},_toolbarOperation:function(i,s){var n,l,o,r,a,d=this.element,h=d.ejGrid("instance"),c="batch"==h.model.editSettings.editMode,u=d.attr("id");switch(h._exportTo=h.export,i){case u+"_add":c?h._bulkAddRow():h._startAdd();break;case u+"_edit":if(c&&h.model.editSettings.allowEditing){if(-1==h._bulkEditCellDetails.columnIndex)return void alert(this.localizedLabels.EditOperationAlert);(n=h.model.columns[h._bulkEditCellDetails.columnIndex].field)&&h.editCell(h._bulkEditCellDetails.rowIndex,n)}else h.startEdit();break;case u+"_delete":if(-1==this._selectedRow())return void alert(this.localizedLabels.DeleteOperationAlert);this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):c?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():this.deleteRow();break;case u+"_update":c&&0==e("#"+this._id+"EditForm").children().find(".e-field-validation-error").length?this.model.editSettings.showConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveConfirm).end().ejDialog("open"):this.batchSave():h.endEdit();break;case u+"_cancel":c?!0===e("#"+u+"ConfirmDialog").ejDialog("isOpened")?this._triggerConfirm():h.cancelEditCell():h.cancelEdit();break;case u+"_search":"click"==args.type&&"A"==args.target.nodeName&&d.ejGrid("search",s);break;case u+"_printGrid":this.print();break;case u+"_excelExport":h._exportTo(h.model.exportToExcelAction,"excelExporting",h.model.allowMultipleExporting);break;case u+"_wordExport":h._exportTo(h.model.exportToWordAction,"wordExporting",h.model.allowMultipleExporting);break;case u+"_pdfExport":h._exportTo(h.model.exportToPdfAction,"pdfExporting",h.model.allowMultipleExporting);break;case u+"_responsiveFilter":e("#responsiveFilter").css("display","block"),setTimeout(function(){h.element.css("display","none")});break;case u+"_responsiveSorting":for(this._sortColumns=[],this._removeSortCol=[],l=0;l<this.model.sortSettings.sortedColumns.length;l++)this._sortColumns.push({field:this.model.sortSettings.sortedColumns[l].field,direction:this.model.sortSettings.sortedColumns[l].direction});if(t.isNullOrUndefined(e("#responsiveSort")[0])){(o=e("#responsiveFilter").clone().css("display","block")).insertAfter(this.element),o.attr("id","responsiveSort"),h._setSortingButton();var m=t.buildTag("div.btnContainer","",{width:"100%",bottom:"0px",position:"absolute"}),p=t.buildTag("input.e-resposnsiveFilterBtnLeft","OK",{width:"45.6%"}),g=t.buildTag("input.e-resposnsiveFilterBtnRight","Cancel",{width:"46%"}),f=t.buildTag("div.e-resFIlterRigthIcon"),_=t.buildTag("span.e-icon e-responsiveClose e-resIcon");o.find(".e-resFilterleftIcon").remove(),o.find(".labelRes").text("Sorting"),o.find(".e-resFilterDialogHeaderDiv").append(f.append(_)),o.find(".e-resFilterDialogHeaderDiv").find(".e-resFIlterRigthIcon").click(function(){e("#responsiveSort").css("display","none"),h.element.css("display","block")}),r=t.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),a=t.buildTag("span.e-icon e-resIcon e-responsiveSortClear"),r.click(function(){o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton(!0);for(var e=0;e<h._sortColumns.length;e++)-1==h._removeSortCol.indexOf(h._sortColumns[e].field)&&h._removeSortCol.push(h._sortColumns[e].field);h._sortColumns=[],h._removeSortCol=[]}),o.find(".e-resFilterDialogHeaderDiv").prepend(r.append(a)),o.append(m),m.append(p).append(g),p.ejButton({text:"OK",type:"button",click:e.proxy(this._resSortOperation,this)}),g.ejButton({text:"Cancel",type:"button",click:function(){e("#responsiveSort").css("display","none"),h.element.css("display","block"),h._sortColumns=[],o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton()}})}else e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-button").remove(),this._setSortingButton();e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-filternone").remove(),e("#responsiveSort").css("display","block"),setTimeout(function(){h.element.css("display","none")})}return!1},_resSortOperation:function(){for(var t=[],i=0;i<this.model.sortSettings.sortedColumns.length;i++)t.push(this.model.sortSettings.sortedColumns[i].field);for(i=0;i<t.length;i++)this.removeSortedColumns(t[i]);for(i=0;i<this._sortColumns.length;i++)this.model.allowMultiSorting&&(this.multiSortRequest=!0),this.sortColumn(this._sortColumns[i].field,this._sortColumns[i].direction);e("#responsiveSort").css("display","none"),this.element.css("display","block")},_setSortingButton:function(i){var s=e("#responsiveSort"),n=this;this._sortCols=[],t.isNullOrUndefined(s.find(".e-responsivefilterColDiv").find(".e-button")[0])&&s.find(".e-responsivefilterColDiv").each(function(s,l){var o,r,a,d=t.buildTag("div","",{float:"right","margin-right":"2%","margin-top":"-1%"}),h=e(l).attr("ej-MappingName"),c=t.buildTag("button#"+h+".e-sortingBtn","");if(e(l).append(d.append(c)),o="None",r="",i)c.ejButton({text:o,type:"button",height:28,width:120,id:h,showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)});else{for(a=0;a<n.model.sortSettings.sortedColumns.length;a++)n.model.sortSettings.sortedColumns[a].field==h&&(r="Ascending"==(o="ascending"==n.model.sortSettings.sortedColumns[a].direction?"Ascending":"Descending")?"e-resIcon e-respponsiveSortingAsc":"e-resIcon e-respponsiveSortingDesc");""!=r?c.ejButton({text:o,type:"button",height:28,width:120,cssClass:"e-resSortIconBtn",id:h,prefixIcon:r,imagePosition:"imageright",contentType:"textandimage",showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)}):c.ejButton({text:o,type:"button",height:28,cssClass:"e-resSortIconBtn",width:120,id:h,showRoundedCorner:!0,click:e.proxy(n._resSortButClick,n)})}})},_sortOperation:function(t,i){var s;for(-1!=this._removeSortCol.indexOf(t)&&(this._sortColumns.splice(this._removeSortCol.indexOf(t),0),this._removeSortCol.splice(this._removeSortCol.indexOf(t),0)),s=0;s<this._sortColumns.length&&this._sortColumns[s].field!=t;s++);this.model.allowMultiSorting?(this.multiSortRequest=!0,-1!=s&&(this._sortColumns.splice(s,1),-1==this._removeSortCol.indexOf(t)&&this._removeSortCol.push(t))):(e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable"),e("#responsiveFilter").find(".e-responsivefilterColDiv").not(".e-responsivefilterColDiv[ej-mappingname='"+t+"']").find(".e-button").addClass("e-disable").text("None"),this._sortColumns.length>0&&(this._removeSortCol.push(this._sortColumns[0].field),this._sortColumns=[])),this._sortColumns.push({field:t,direction:i})},_resSortButClick:function(t){var i,s="",n="",l=t.model.id,o=e("#"+t.model.id).ejButton("instance");if("None"==t.model.text)s="Ascending",n="e-resIcon e-respponsiveSortingAsc",this._sortOperation(l,"ascending");else{if("Ascending"!=t.model.text){for(o.model.text="None",o.model.prefixIcon="",o.type="button",o.model.contentType="text",o._render(),i=0;i<this._sortColumns.length&&this._sortColumns[i].field!=l;i++);return this._removeSortCol.push(l),this._sortColumns.splice(i,1),void e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable")}s="Descending",n="e-resIcon e-respponsiveSortingDesc",this._sortOperation(l,"descending")}o.model.text=s,o.model.prefixIcon="e-resIcon "+n,o.model.imagePosition="imageright",o.model.contentType="textandimage",o._render()},renderDiaglogButton:function(e,i){var s,n,l,o;return"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s="EditExternalForm_":"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(s="InlineEditForm_",t.buildTag("div","","",{id:this._id+"_inlineFormTitle",class:"e-inlineform-titlebar"}).appendTo(i)):s="EditDialog_",(n=t.buildTag("input.e-save","",{"margin-left":"30px"},{type:"button",id:s+this._id+"_Save"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.SaveButton,width:"100"}),(l=t.buildTag("input.e-cancel","",{"margin-left":"19px","margin-right":"13px"},{type:"button",id:s+this._id+"_Cancel"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.CancelButton,width:"100"}),(o="dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?t.buildTag("div","","",{class:"e-editform-btn"}):t.buildTag("div")).append(n),o.append(l),e.appendTo(i),"dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?o.appendTo(i):e.append(o),i},_externalFormPosition:function(){var t=e(this.element).offset(),i=e(this.element).width(),s=e(this.element).height(),n=e("#"+this._id+"_externalEdit");switch(this.model.editSettings.formPosition){case"topright":e(n).find(".e-form-toggle-icon").removeClass("e-bottomleft").addClass("e-topright"),e(n).css({left:t.left+i+1+"px",top:t.top+"px",position:"absolute",width:"290px"}),e("#"+this._id+"_eFormContent").height("auto");break;case"bottomleft":e(n).find(".e-form-toggle-icon").removeClass("e-topright").addClass("e-bottomleft"),e(n).css({left:t.left+"px",top:t.top+s+1+"px"}),e("#"+this._id+"_eFormContent").width("100%")}},_setoffsetWidth:function(){var t,i,s=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm");if(0!=this._gridRecordsCount||"batch"==this.model.editSettings.editMode||0!=this.model.scrollSettings.frozenColumns)for(t="batch"==this.model.editSettings.editMode?s.closest("td"):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s.find(".e-rowcell").not(".e-unboundcell,.e-templatecell"):s.find("tr").find(".e-rowcell").not(".e-unboundcell,.e-templatecell"),i=0;i<t.length;i++)this._tdsOffsetWidth[i]=t.get(i).offsetWidth},_bulkChangesAcquired:function(){return!!(this.batchChanges.added.length>0||this.batchChanges.changed.length||this.batchChanges.deleted.length)},_renderDialog:function(){return t.buildTag("div.e-dialog e-dialog-content e-shadow e-widget-content","",{display:"none"},{id:this._id+"_dialogEdit"})},getCurrentEditCellData:function(){var i,s,n,l,o,r;if(this.model.isEdit&&e("#"+this._id+"EditForm").length){switch(i=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,"")),n=this.model.columns[this._bulkEditCellDetails.columnIndex],this._bulkEditCellDetails.cellEditType){case t.Grid.EditingType.String:case t.Grid.EditingType.Numeric:s=i.val();break;case t.Grid.EditingType.Dropdown:s=this._bulkEditCellDetails.isForeignKey?{value:i.ejDropDownList("getSelectedValue"),text:i.ejDropDownList("getValue")}:i.ejDropDownList("getSelectedValue");break;case t.Grid.EditingType.Boolean:s=i.is(":checked");break;case t.Grid.EditingType.DatePicker:o=e.trim(i.val()),(r=i.ejDatePicker("instance"))._setDateValue(o),s=""==o?o:r.model.value;break;case t.Grid.EditingType.DateTimePicker:s=""==e.trim(i.val())?e.trim(i.val()):i.ejDateTimePicker("model.value");break;case"edittemplate":"string"==typeof(l=n.editTemplate.read)&&(l=t.util.getObject(l,window)),s=l(i)}return"string"==typeof s&&s.length&&"number"==n.type&&(s=t.globalize.parseFloat(s,this.model.locale)),s}return null},cancelEditCell:function(){if(this.model.isEdit){var t,i=this.getRows()[this._bulkEditCellDetails.rowIndex],s={};s[this._bulkEditCellDetails.fieldName]=this._bulkEditCellDetails.cellValue,t=e(i).hasClass("e-insertedrow")?e(i).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex+this.model.groupSettings.groupedColumns.length):e(i).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex),e(t).removeClass("e-editedbatchcell").empty().html(e(e.templates[this._id+"_JSONTemplate"].render(s)).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex).innerHTML),this.model.isEdit=!1,this.element.focus()}},saveCell:function(i){var s,n,l,o;if(this.model.isEdit){if(!this.editFormValidate())return!0;var r,a,d,h,c=e("#"+this._id+"EditForm"),u=c.closest("tr"),m=c.closest("td"),p={},g=this.model.columns[this._bulkEditCellDetails.columnIndex],f=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,""));if(p={columnName:g.field,value:this.getCurrentEditCellData(),rowData:this._bulkEditCellDetails.rowData,previousValue:this._bulkEditCellDetails.cellValue,columnObject:g,cell:m,isForeignKey:this._bulkEditCellDetails.isForeignKey},!i&&this._trigger("cellSave",p))return this._focusElements(p.cell),void(this._bulkEditCellDetails.cancelSave=!0);("datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType||"datepicker"==this._bulkEditCellDetails.cellEditType)&&f[f.data("ejWidgets")[0]]("destroy"),t.isNullOrUndefined(g.format)||("date"!=g.type&&"datetime"!=g.type||t.isNullOrUndefined(p.value)||(p.isForeignKey?p.value.text=p.value.text.length>0?new Date(p.value.text):p.value.text:p.value=p.value.length>0?new Date(p.value):p.value),a=this.formatting(g.format,p.isForeignKey?!isNaN(parseFloat(p.value.text))&&isFinite(p.value.text)?parseFloat(p.value.text):p.value.text:p.value,this.model.locale),p.cell.empty().html(a)),t.createObject(this._bulkEditCellDetails.fieldName,p.isForeignKey?p.value.value:p.value,p.rowData),t.isNullOrUndefined(g.format)&&(a=p.isForeignKey?p.value.text:p.value),t.isNullOrUndefined(g.template)||(s=t.copyObject({},p.rowData),t.createObject(this._bulkEditCellDetails.fieldName,p.isForeignKey?p.value.value:p.value,s),a=e.templates(g.template).render(s)),"edittemplate"==this._bulkEditCellDetails.cellEditType?(p.value instanceof Array&&(a=p.value.join()),p.cell.empty().html(a)):"boolean"==p.columnObject.type||"booleanedit"==p.columnObject.editType?(n={},t.createObject(p.columnObject.field,p.value,n),p.cell.empty().html(e(e.templates[this._id+"_JSONTemplate"].render(n))[0].cells[this._bulkEditCellDetails.columnIndex].innerHTML)):("datepicker"!=p.columnObject.editType&&"datetimepicker"!=p.columnObject.editType||t.isNullOrUndefined(g.format))&&p.columnObject.disableHtmlEncode?p.cell.text(a).html():p.cell.empty().html(a),p.cell.removeClass("e-validError"),p.cell.hasClass("e-updatedtd")&&p.cell.addClass("e-gupdatenotify"),p.previousValue=t.isNullOrUndefined(p.previousValue)?"":"date"==g.type||"datetime"==g.type?new Date(p.previousValue):p.previousValue,r=p.isForeignKey?p.value.value:p.value,!1,l="date"!=this._bulkEditCellDetails.type&&"datetime"!=this._bulkEditCellDetails.type||t.isNullOrUndefined(this._bulkEditCellDetails.format)?("datepicker"==this._bulkEditCellDetails.cellEditType||"datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType)&&r instanceof Date&&p.previousValue instanceof Date?r.getTime()!==p.previousValue.getTime():"number"==typeof r?r!==parseFloat(p.previousValue):r!==p.previousValue.toString():!(this._bulkEditCellDetails.cellValue instanceof Date)||this.formatting(this._bulkEditCellDetails.format,this._bulkEditCellDetails.cellValue)!=this.formatting(this._bulkEditCellDetails.format,r),this.model.isEdit=!1,l&&(this._enableSaveCancel(),p.cell.addClass("e-updatedtd e-icon e-gupdatenotify"),h="string"==typeof(d=t.getObject(this._bulkEditCellDetails.fieldName,p.rowData))&&d.length?p.isForeignKey?p.value.value.toString():p.value.toString():p.isForeignKey?isNaN(parseInt(p.value.value))?p.value.value:parseInt(p.value.value):p.value,"string"!=typeof p.value||h.length||(h=null),t.createObject(this._bulkEditCellDetails.fieldName,h,p.rowData),-1==e.inArray(p.rowData,this.batchChanges.changed)&&-1==e.inArray(p.rowData,this.batchChanges.added)&&this.batchChanges.changed.push(p.rowData),this.isejObservableArray&&(o=p.cell.closest("tr").hasClass("e-insertedrow")?"insert":"update",this._refreshViewModel(p,o))),u.removeClass("e-editedrow").removeClass("e-batchrow"),p.cell.removeClass("e-editedbatchcell")}},_refreshViewModel:function(i,n){var l,o,r;for(l=this._dataSource()instanceof t.DataManager?this._dataSource():t.DataManager(this._dataSource()),o=new t.Query,r=0;r<this._primaryKeys.length;r++)o=o.where(this._primaryKeys[r],t.FilterOperators.equal,i.rowData[this._primaryKeys[r]]);var a=l.executeLocal(o),d=this._dataSource(s,!0),h=e.inArray(a[0],this._dataSource());switch(this.model.editSettings.showConfirmDialog=!1,n){case"update":case"remove":d(i.rowData,h,n);break;case"insert":d(i.rowData,0,n)}},_enableSaveCancel:function(){this.model.toolbarSettings.showToolbar&&($toolBar=this.element.find("#"+this._id+"_toolbarItems"),$toolBar.ejToolbar("enableItemByID",this._id+"_update"),$toolBar.ejToolbar("enableItemByID",this._id+"_cancel"))},setCellText:function(i,n,l){var o,r,a,d,h="string"==typeof n,c=this._excludeDetailRows(),u=0!=this.model.groupSettings.groupedColumns.length,m=this.model.scrollSettings.allowVirtualScrolling,p=this[h?"getColumnByField":"getColumnByIndex"](n),g=t.getObject(["currentViewData",u?".records":""].join(""),this.model),f={},_=m?this._dataManager:new t.DataManager(g),v=this._primaryKeys[0],b=h||t.getObject(i+"."+v,m?this._dataManager.dataSource.json:g);t.createObject(p.field,l,f),h&&(b=i,i=_.executeLocal((new t.Query).select(v)).indexOf(i),n=this.getColumnIndexByField(p.field)),m&&(a=((i+(r=this.model.pageSettings.pageSize)-(d=i%r))/r-1)*r,isCached=-1!=e.inArray(a,this.virtualLoadedPages),isCached&&(o=this.getContentTable().find("tr[name="+a+"]")[d].cells[n])),canSkip=-1==i||-1==n||m&&!isCached||i>(m?this._dataSource():g).length||n>this.model.columns.length,canSkip||(o=o||this._excludeDetailCells(c[i])[n],l=p.format===s?l:this.formatting(p.format,l,this.model.locale),t.isNullOrUndefined(p.foreignKeyField)||t.isNullOrUndefined(p.foreignKeyValue)||(l=this._getForeignKeyData(f)[p.foreignKeyField][p.foreignKeyValue]),p.disableHtmlEncode?e(o).text(l):o.innerHTML=l,this._trigger("queryCellInfo",{cell:o,text:o.innerHTML,column:p,data:f})),v&&(t.createObject(v,b,f),this._dataManager.update(v,f))},_excludeDetailCells:function(i){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)?e(i.cells):e(i.cells).not(".e-detailrowexpand, .e-detailrowcollapse")},setCellValue:function(i,n,l){if(e("#"+this._id+"EditForm").length>0&&e("#"+this._id+"EditForm").attr("id","EditForm1"),"batch"==this.model.editSettings.editMode&&!this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.frozenColumns){var o,r=this.getDataByIndex(i),a=this._excludeDetailRows()[i],d=this.getColumnIndexByField(n),h=this,c=l,u=!1,m=this.getColumnByField(n);if(o=e(a).hasClass("e-insertedrow")?e(a.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[d+this.model.groupSettings.groupedColumns.length]:e(a.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[d],!t.isNullOrUndefined(m)&&!m.isPrimaryKey&&0!=m.allowEditing){if(t.isNullOrUndefined(m.validationRules)||($form=t.buildTag("form","",{},{id:this._id+"EditForm"}),$valElem=t.buildTag("input","",{},{id:this._id+m.field,value:l}),$form.append($valElem),this.element.append($form),$form.validate({errorPlacement:function(t){return h._alertDialog||h._renderAlertDialog(),e("#"+h._id+"AlertDialog_wrapper").css("min-height",""),h._alertDialog.find(".e-content").text(t.text()),h._alertDialog.ejDialog("open"),h.element.find($form).remove(),u=!0,!0}}),this.setValidationToField(m.field,m.validationRules)),m.foreignKeyValue&&(c=this._foreignKeyBinding(d,l,this._id))==s)return this._alertDialog||this._renderAlertDialog(),e("#"+this._id+"AlertDialog_wrapper").css("min-height",""),this._alertDialog.find(".e-content").text(this.localizedLabels.ForeignKeyAlert),this._alertDialog.ejDialog("open"),void(t.isNullOrUndefined(m.validationRules)||this.element.find($form).remove());t.isNullOrUndefined(m.format)||(c=this.formatting(m.format,m.foreignKeyValue&&!isNaN(parseFloat(l))&&isFinite(l)?parseFloat(l):l,this.model.locale)),t.isNullOrUndefined(m.validationRules)||(e($form).validate().form(),this.element.find($form).remove()),e("#EditForm1").attr("id",this._id+"EditForm"),u||o.innerHTML==c||(e(o).has("form").length>0&&(this.model.isEdit=!1),e(o).hasClass("e-boolrowcell")?e(o).find("input").attr("checked",c):o.innerHTML=c,e(o).addClass("e-updatedtd e-icon e-gupdatenotify"),e(o).removeClass("e-validError e-editedbatchcell"),t.createObject(n,l,r),-1==e.inArray(r,this.batchChanges.changed)&&this.batchChanges.changed.push(r),this._enableSaveCancel())}}},setDefaultData:function(i){var s,n,l,o,r;if(t.isNullOrUndefined(i)){for(s=[],n=this.model.columns,l=0;l<this.model.columns.length;l++)s.push(this.model.columns[l].field);for(t.isNullOrUndefined(this._bulkEditCellDetails._data)&&(this._bulkEditCellDetails._data=[]),i={},o=function(e,s){t.createObject(e,s,i)},r=0;r<s.length;r++){var a=r,d=s[r],h=n[r].type,c=t.getObject(d,this._bulkEditCellDetails._data[0]);if(d===(t.isNullOrUndefined(this.model.parentDetails)?null:this.model.parentDetails.parentKeyField)&&(this.model.columns[a].defaultValue=this.model.parentDetails.parentKeyFieldValue),t.isNullOrUndefined(this.model.columns[a].defaultValue))switch(h){case"number":o(d,0);break;case"string":o(d,null);break;case"boolean":o(d,!1);break;case"object":e.isArray(c)?o(d,[]):o(d,null);case"datetime":case"date":o(d,null)}else o(d,this.model.columns[a].defaultValue)}}this._bulkEditCellDetails.defaultData=i},_bulkDelete:function(i){if(this.model.editSettings.allowDeleting){if(t.isNullOrUndefined(i)&&(i=this._selectedRow()),-1==i)return void alert(this.localizedLabels.DeleteOperationAlert);var s,n,l,o={};if(this.multiDeleteMode&&this.selectedRowsIndexes.length>1?(l=[],n=this.getSelectedRows(),Array.prototype.push.apply(l,this.getSelectedRecords()),Array.prototype.push.apply(this.batchChanges.deleted,this.getSelectedRecords())):(s=this.getRows()[i],n=e(s),l=this.getDataByIndex(i)),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:l,row:n},this._trigger("beforeBatchDelete",o))return;this.isejObservableArray&&this._refreshViewModel(o,"remove"),this.model.isEdit&&this.cancelEditCell(),n.hasClass("e-insertedrow")?(n.remove(),-1!=(i=e.inArray(s,this._bulkEditCellDetails.insertedTrCollection))&&(this._bulkEditCellDetails.insertedTrCollection.splice(i,1),this.batchChanges.added.splice(i,1))):(n.hide(),(0==o.rowIndex||n.hasClass("e-firstrow"))&&(n.hasClass("e-firstrow")&&this.getContentTable().find("tr").removeClass("e-firstrow"),this.getContentTable().find("tr:visible").first().addClass("e-firstrow")),e.isArray(l)||this.batchChanges.deleted.push(l)),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),this.model.allowScrolling&&this._refreshScroller(o),this._enableSaveCancel(),this._selectedRow(-1),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:l},this._trigger("batchDelete",o)}},_bulkAddRow:function(i){var s,n,l,o,r,a;if(e("#"+this._id+"EditForm").length&&!this.editFormValidate())return!0;if(this.model.editSettings.allowAdding){if(s={},o=this.getRows(),t.isNullOrUndefined(i)||(this._bulkEditCellDetails.defaultData=i),t.isNullOrUndefined(this._bulkEditCellDetails.defaultData)&&this.setDefaultData(),s={defaultData:e.extend(!0,{},this._bulkEditCellDetails.defaultData),primaryKey:this._primaryKeys},this._trigger("beforeBatchAdd",s))return;for(n=e(e.render[this._id+"_JSONTemplate"](s.defaultData)).addClass("e-insertedrow"),null!=o&&e(o[0]).hasClass("e-alt_row")&&n.removeClass("e-alt_row"),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(n):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(n),this.model.allowScrolling&&this._refreshScroller(s),0===this._gridRecordsCount&&this.getContentTable().find("tbody .emptyrecord").first().remove(),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),r=0;r<this.model.groupSettings.groupedColumns.length;r++)n.prepend(t.buildTag("td.e-indentcell"));this._bulkEditCellDetails.insertedTrCollection.push(n.get(0)),this.batchChanges.added.push(s.defaultData),this._enableSaveCancel(),a=this._gridRows.length-1,"bottom"==this.model.editSettings.rowPosition?(l=this._findNextEditableCell(0),this.selectRows(a),this.editCell(a,this.model.columns[l].field)):(l=this._findNextEditableCell(0),this.selectRows(0),this.editCell(0,this.model.columns[l].field)),n.find(".e-rowcell").addClass("e-updatedtd e-icon e-gupdatenotify"),s={defaultData:s.defaultData},e.extend(s,{columnObject:this.model.columns[l],columnIndex:l,row:n,primaryKey:this._primaryKeys,cell:e(n[0].cells[l])}),this._trigger("batchAdd",s)}},getDataByIndex:function(t){var i,s=e(this.getRows()[t]);return s.hasClass("e-insertedrow")?(i=e.inArray(s[0],this._bulkEditCellDetails.insertedTrCollection),this.batchChanges.added[i]):this._bulkEditCellDetails._data["top"==this.model.editSettings.rowPosition?t-this._bulkEditCellDetails.insertedTrCollection.length:t]},refreshBatchEditChanges:function(){this._bulkEditCellDetails={cellValue:null,rowIndex:-1,_data:null,columnIndex:-1,fieldName:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null,isForeignKey:!1},this.batchChanges={added:[],deleted:[],changed:[]}},refreshBatchEditMode:function(){"batch"==this.model.editSettings.editMode&&(this.refreshBatchEditChanges(),this._bulkEditCellDetails._data=e.extend(!0,[],this.getCurrentViewData()))},batchCancel:function(){this.cancelEdit()},batchSave:function(){var e={};this.saveCell(),e.batchChanges=this.getBatchChanges(),this._trigger("beforeBatchSave",e)||((e={}).requestType="batchsave",this._sendBulkReuqest(this.getBatchChanges(),e))},_sendBulkReuqest:function(e,i){var s=this._dataManager.saveChanges(e,this._primaryKeys[0],this.model.query._fromTable,this.model.query),n=this;this._dataManager instanceof t.DataManager&&!this._dataManager.dataSource.offline?(s.done(function(){n._processBindings(i)}),s.fail(function(e){var t={error:e.error};n._trigger("actionFailure",t)})):this._processBindings(i)},getBatchChanges:function(){return this.batchChanges},editCell:function(i,n){var l;if(!this.element.ejWaitingPopup("model.showOnInit")&&this.model.editSettings.allowEditing&&-1==e.inArray(n,this._disabledEditableColumns)){if(l=e("#"+this._id+"EditForm"),this.model.isEdit&&this.saveCell(),e.isFunction(e.validator)&&l.length&&l.validate().errorList.length)return;var o=e(this.getRows()[i]),r=this.getColumnIndexByField(n),a=o.find(".e-rowcell").eq(r),d=this.model.columns[r],h=this.getDataByIndex(i),c={validationRules:t.isNullOrUndefined(d.validationRules)?{}:e.extend(!0,{},d.validationRules),columnName:d.field,value:t.getObject(t.isNullOrUndefined(n)?"":n,h),rowData:h,row:o,primaryKey:this._primaryKeys,columnObject:d,cell:a,isForeignKey:!t.isNullOrUndefined(d.foreignKeyValue)&&"batch"==this.model.editSettings.editMode},u=!0;if(this.model.allowScrolling&&this._refreshScroller(c),this._batchEditRowData=h,this._trigger("cellEdit",c))return;o.hasClass("e-insertedrow")&&(c.requestType="add"),(-1!=e.inArray(n,this._primaryKeys)||!1===c.columnObject.allowEditing||c.columnObject.template&&(0==c.columnObject.allowEditing||!c.columnObject.field)||c.columnObject.commands)&&(e.extend(this._bulkEditCellDetails,{cellValue:c.value,rowIndex:i,fieldName:n,rowData:c.rowData,columnIndex:r,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),u=!1),o.hasClass("e-insertedrow")&&c.columnObject.isPrimaryKey&&(u=!0),u&&(e.extend(this._bulkEditCellDetails,{rowIndex:i,cellValue:c.value,columnIndex:r,format:d.format==s?null:d.format,type:d.type,fieldName:n,cellEditType:c.columnObject.editType,rowData:h,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),this._renderBulkEditObject(c,a),o.addClass("e-editedrow").addClass("e-batchrow"),c.cell.addClass("e-editedbatchcell"),"booleanedit"==c.columnObject.editType&&c.cell.addClass("e-boolrowcell"))}},_findNextEditableCell:function(e){for(var t=this.model.columns.length,i=e;i<t;i++)if(!this.model.columns[i].template&&!this.model.columns[i].commands&&this.model.columns[i].visible)return i;return-1},_findNextCell:function(i,s){var n,l,o=[],r=this.getRows();return this.model.columns[i].template&&(this.model.columns[i].__isTemplate=!0),this.model.columns[i].commands&&(this.model.columns[i].__isCommand=!0),l=t.Predicate("visible","equal",!0).and("__isTemplate","notequal",!0).and("__isCommand","notequal",!0),e(r[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow")||(l=l.and("allowEditing","notequal",!1)),n="right"==s?this.model.columns.slice(i):this.model.columns.slice(0,i+1).reverse(),0!=(o=t.DataManager(n).executeLocal(t.Query().where(l))).length||"left"==s&&0==this._bulkEditCellDetails.rowIndex||"right"==s&&this._bulkEditCellDetails.rowIndex+1==this.getRows().length||(n="right"==s?this.model.columns.slice(0,i):this.model.columns.slice(i).reverse(),o=t.DataManager(n).executeLocal(t.Query().where(l)),this._bulkEditCellDetails.rowIndex=o.length&&"right"==s?this._bulkEditCellDetails.rowIndex+1:this._bulkEditCellDetails.rowIndex-1),o.length?e.inArray(o[0],this.model.columns):-1},_moveCurrentCell:function(i){var s,n=this._bulkEditCellDetails.rowIndex,l=e("#"+this._id+"EditForm");if(-1==this._bulkEditCellDetails.rowIndex&&-1==this._bulkEditCellDetails.columnIndex)return!0;switch(i){case"right":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1&&this._bulkEditCellDetails.columnIndex==this.model.columns.length-1||!this.element.is(document.activeElement)&&0==l.length)return!0;this._bulkEditCellDetails.columnIndex==this.model.columns.length-1?(s=0,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex+1):s=this._bulkEditCellDetails.columnIndex+1,t.isNullOrUndefined(this.model.columns[s].template)&&t.isNullOrUndefined(this.model.columns[s].commands)&&!1!==this.model.columns[s].visible&&!1!==this.model.columns[s].allowEditing||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=n&&this.selectRows(this._bulkEditCellDetails.rowIndex),-1!=s&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"left":if(0==this._bulkEditCellDetails.rowIndex&&0==this._bulkEditCellDetails.columnIndex||!this.element.is(document.activeElement)&&0==l.length)return!0;0==this._bulkEditCellDetails.columnIndex?(s=this.model.columns.length-1,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex-1,this.selectRows(this._bulkEditCellDetails.rowIndex)):s=this._bulkEditCellDetails.columnIndex-1,t.isNullOrUndefined(this.model.columns[s].template)&&t.isNullOrUndefined(this.model.columns[s].commands)&&!1!==this.model.columns[s].visible&&!1!==this.model.columns[s].allowEditing||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=n&&this.selectRows(this._bulkEditCellDetails.rowIndex),-1!=s&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"up":if(0==this._bulkEditCellDetails.rowIndex)return;s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex-1),this.editCell(this._bulkEditCellDetails.rowIndex-1,this.model.columns[this._bulkEditCellDetails.columnIndex].field);break;case"down":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1)return void this.endEdit();s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex+1),-1!=this._bulkEditCellDetails.columnIndex&&this.editCell(this._bulkEditCellDetails.rowIndex+1,this.model.columns[this._bulkEditCellDetails.columnIndex].field)}return addedRow=!e(this.getRows()[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow"),-1!=s&&(this.model.columns[s].commands||this.model.columns[s].isPrimaryKey&&addedRow||this.model.columns[s].template)&&this.element.focus(),!1},_renderBulkEditObject:function(i,s){var n,l,o,r,a=t.buildTag("form","",{},{id:this._id+"EditForm"}),d=this._bulkEditTemplate,h=(this._id,i.columnObject.field,{});t.createObject(i.columnObject.field,i.value,h),o={requestType:i.requestType},s.empty(),s.parent().is(":last-child")||(s.addClass("e-validError"),s.removeClass("e-gupdatenotify")),l=d.find("#"+i.columnObject.field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit").html(),"SELECT"==(n=e(e.templates(l).render(h))).get(0).tagName&&(r=t.getObject(i.columnObject.field,h),n.val(t.isNullOrUndefined(r)?"":r.toString()),null==n.val()&&n.val(n.find("option").first().val()),n.data("ej-value",r)),a.append(n),s.append(a),this._setoffsetWidth(),this._refreshEditForm(o),e.isFunction(e.validator)&&!e.isEmptyObject(i.validationRules)&&(this.initValidator(),this.setValidationToField(i.columnObject.field,i.validationRules)),this.model.isEdit=!0},_triggerConfirm:function(e){if(e!==s&&e.model.text==this.localizedLabels.OkButton)this._confirmDialog.find(".e-content").text()==this.localizedLabels.BatchSaveConfirm?this.batchSave():this._confirmDialog.find(".e-content").text()==this.localizedLabels.ConfirmDelete?"batch"==this.model.editSettings.editMode?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():t.isNullOrUndefined(this._cDeleteData)?this.deleteRow():(this.deleteRow(this._cDeleteData),this._cDeleteData=null):this._confirmDialog.find(".e-content").text()==this.localizedLabels.CancelEdit?this.cancelEdit():(this._confirmedValue=!0,this._processBindings(this._requestArgs));else{if(this._confirmDialog.find(".e-content").text()!=this.localizedLabels.BatchSaveConfirm&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.ConfirmDelete&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.CancelEdit)switch(this._requestArgs.requestType){case"grouping":this.model.groupSettings.groupedColumns.pop();break;case"ungrouping":this.model.groupSettings.groupedColumns.push(this._requestArgs.columnName);break;case"sorting":this._cSortedDirection=this._cSortedColumn=null;break;case"filtering":this.model.filterSettings.filteredColumns.reverse().splice(0,this._requestArgs.currentFilterObject),this.model.filterSettings.filteredColumns.reverse();break;case"paging":this._currentPage(this._requestArgs.previousPage),this.getPager().ejPager("model.currentPage",this._requestArgs.previousPage)}this._confirmedValue=!1}this._requestArgs=null,this._confirmDialog.ejDialog("close")},_batchCellValidation:function(e){var t,s=this.getRowByIndex(e);if("batch"==this.model.editSettings.editMode&&this.model.isEdit&&s.hasClass("e-insertedrow"))for(i=0;i<this._validatedColumns.length;i++){if(t=this.getColumnIndexByField(this._validatedColumns[i]),!this.editFormValidate())return!0;this.editCell(e,this.model.columns[t].field)}},_saveCellHandler:function(t){var i,s=e(t.target);t.stopPropagation(),i="top"==this.model.editSettings.rowPosition||null==this._gridRows?0:this._gridRows.length-1,0==s.closest(".e-popup").length&&0==s.closest(".e-rowcell").find("#"+this._id+"EditForm").length&&(e(this.getRows()).hasClass("e-insertedrow")&&this._batchCellValidation(i),this.saveCell())},initValidator:function(){for(var t=this,i=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):e("#"+this._id+"EditForm"),s=0;s<i.length;s++)i.eq(s).validate({ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(e,i){t._renderValidator(e,i)}})},_renderValidator:function(i,s){var n,l,o,r,a;if(s.is(":hidden")&&(s=s.siblings("input:visible")),s.length){var d=s.closest(".e-rowcell"),h=e(i).addClass("e-error"),c=t.buildTag("div.e-errortail e-toparrow"),u=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),m=0;(d=d.length?d:d=s.closest("td")).find(".e-error").remove(),s.parent().hasClass("e-in-wrap")?h.insertAfter(s.closest(".e-widget")):h.insertAfter(s),h[(n=this.model.scrollSettings.frozenRows>0&&this._currentTrIndex>=this.model.scrollSettings.frozenRows)?"append":"prepend"](c),this.model.allowScrolling&&(u&&u._hScrollbar||u._vScrollbar)&&(d.addClass("e-validError"),m=u._hScrollbar?u._hScrollbar.element[0].offsetTop:0);var p=d.offset().top+d[0].offsetHeight+i[0].offsetHeight,g=!1,f=u&&u._hScrollbar?u._hScrollbar.model.height:0;if((u&&u.isHScroll()&&p>m||p>this.getContent()[0].offsetTop+this.getContent().find(".e-content").height())&&(g=!0),this.model.enableRTL?"dialog"!=this.model.editSettings.editMode&&h.offset({top:s.offset().top+s.height()}):"dialog"!=this.model.editSettings.editMode&&h.offset({left:s.offset().left,top:s.offset().top+s.height()}),this.model.scrollSettings.frozenRows<=0&&-1==e.inArray(this.model.editSettings.editMode,["externalform","externalformtemplate","dialog","dialogtemplate"])){var _=this.getContent(),v=_.find(".e-content"),b=v.height(),w=_[0].offsetTop;if(g&&null!=u&&u._vScrollbar&&this.model.scrollSettings.frozenColumns){u._vScrollbar.model.value,v[0].scrollHeight;var C=w+v[0].scrollHeight,y=w+b;(!this.model.scrollSettings.frozenColumns&&p>C||this.model.scrollSettings.frozenColumns&&p>y)&&(u._vScrollbar.model.maximum+=p-(w+b),u._vScrollbar.refresh(!0)),this.model.scrollSettings.frozenColumns&&(l=this.getContent().find(".e-movablecontent")).height(l[0].scrollHeight),u.scrollY(s.offset().top-w+v[0].scrollTop)}else g&&this.model.allowScrolling&&null!=u&&(u.isVScroll()?u.isVScroll()&&(u.refresh(),this._showHideScroller(),u._vScroll&&(r=u._vScrollbar.model.value+(p-(w+b+f-f)),u.scrollY(r))):(o=p-(w+b),v.height(b+o)))}else n&&(g?(a=h.css("top"),c.addClass("e-bottomarrow"),h.css({bottom:a,top:"auto"})):c.prependTo(c.parent()));h.show("slow")}},setValidation:function(){for(var e=0;e<this.model.columns.length;e++)t.isNullOrUndefined(this.model.columns[e].validationRules)||this.setValidationToField(this.model.columns[e].field,this.model.columns[e].validationRules)},setValidationToField:function(i,s){var n,l,o,r,a=i;t.isNullOrUndefined(i)||(a=a.replace(/[^a-z0-9\s_]/gi,"")),n=(l="batch"==this.model.editSettings.editMode?this.element.find("#"+this._id+"EditForm"):this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform"):this.element.find(".e-addedrow .gridform"):this.element.find(".gridform")).find("#"+this._id+a).length>0?l.find("#"+this._id+a):l.find("#"+a),s.regex&&(s[i+"regex"]=s.regex,delete s.regex,e.validator.addMethod(a+"regex",function(e,t,i){return(i instanceof RegExp?i:new RegExp(i)).test(e)},t.getObject("messages.regex",s)||this.getColumnByField(i).headerText+" should match the given pattern")),n.attr("name")||n.attr("name",i),n.rules("add",s),(o=e("#"+this._id+"EditForm").validate()).settings.messages[i]=o.settings.messages[i]||{},t.isNullOrUndefined(s.required)||(0==(r=t.isNullOrUndefined(s.messages&&s.messages.required)?e.validator.messages.required:s.messages.required).indexOf("This field")&&(r=r.replace("This field",this.getColumnByField(i).headerText)),o.settings.messages[i].required=r,n.hasClass("e-datepicker")&&n.ejDatePicker({watermarkText:""}))},_renderConfirmDialog:function(){var i=t.buildTag("div.e-content",this.localizedLabels.BatchSaveConfirm),s=t.buildTag("span.e-buttons",'<input type="button" id='+this._id+'ConfirmDialogOK value="'+this.localizedLabels.OkButton+"\" /> <input type='button' id="+this._id+"ConfirmDialogCancel value='"+this.localizedLabels.CancelButton+"' />");this._confirmDialog=t.buildTag("div#"+this._id+"ConfirmDialog"),this._confirmDialog.append(i).append(s),this.element.append(this._confirmDialog),s.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:e.proxy(this._triggerConfirm,this)}),this._renderFDialog(this._id+"ConfirmDialog"),this._confirmDialog.ejDialog({width:"auto",minWidth:0,minHeight:0,enableModal:!0})},_unboundClickHandler:function(i){var s,n,l,o,r,a,d,h,c=e(i.target).closest("button");if(!(c.hasClass("e-button")&&(c.hasClass("e-disable")||c.prop("disabled"))||(s=0,n={},e(i.target).hasClass("e-unboundcelldiv")))){if(l=c.hasClass("e-savebutton")?this.getIndexByRow(e(".e-editedrow")):this.getIndexByRow(c.closest("tr")),this.model.isEdit&&(!this._isLocalData||this._isRemoteSaveAdaptor)&&c.hasClass("e-editbutton"))return void(this._unboundRow=c.closest("tr"));if(o=this._currentJsonData[l],r=e(c).ejButton("instance"),("inlineform"==this.model.editSettings.editMode||"inlinetemplate"==this.model.editSettings.editMode)&&(s=e("#"+this._id).find(".e-editedrow").length),this.model.allowSelection&&!this.model.isEdit&&this.selectRows(this.getIndexByRow(c.closest("tr"))-s),c.hasClass("e-cancelbutton")&&(this.model.isEdit=!1),e.isFunction(e.fn.ejDatePicker)&&e("#"+this._id+"EditForm").find(".e-datepicker").ejDatePicker("hide"),c.hasClass("e-editbutton"))this.model.isEdit&&this.cancelEdit(),a=this.getRowByIndex(l),this.startEdit(a);else if(c.hasClass("e-deletebutton")){if(a=this.getRowByIndex(l),this.model.editSettings.showDeleteConfirmDialog)return void this._toolbarOperation(this._id+"_delete");this.deleteRow(a)}else c.hasClass("e-savebutton")?(this.endEdit(),o=this._currentJsonData[l]):c.hasClass("e-cancelbutton")&&this.cancelEdit();n={rowIndex:l,data:o,buttonModel:r.model,commandType:c.val()},t.raiseWebFormsServerEvents&&(d={model:this.model,originalEventType:"commandButtonClick"},h=n,t.isNullOrUndefined(this.model.serverEvents)||-1==e.inArray("commandButtonClick",this.model.serverEvents)||t.raiseWebFormsServerEvents("commandButtonClick",d,h))}},addRecord:function(i,s){var n,l;this.model.editSettings.allowAdding&&0==e(".e-gridcontent").find(".gridform").length&&(i?(("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&(n=t.buildTag("tr.e-addedrow"),this.getContentTable().find("tbody").first().prepend(n)),(l={data:i}).action="add",l.selectedRow=this._selectedRow(),this._cAddedRecord=i,l.requestType=t.Grid.Actions.Save,this._updateAction(l),-1!=l.selectedRow&&this.selectRows(l.selectedRow+1),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),s||("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&this.model.allowPaging&&this.model.pageSettings.pageSize<this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild)):this._startAdd())},updateRecord:function(e,i){this._updateDeleteRecord(e,i,"update"),"batch"!=this.model.editSettings.editMode&&(this.model.sortSettings.sortedColumns.length||this.model.summaryRows.length>0||this.model.groupSettings.groupedColumns.length||!t.isNullOrUndefined(this._searchCount)||this.filterColumnCollection.length)&&this.refreshContent()},_updateDeleteRecord:function(i,s,n){var l,o,r,a;(l=t.DataManager(this._currentJsonData).executeLocal(t.Query().where(i,t.FilterOperators.equal,s[i]))).length&&(-1!=(o=e.inArray(l[0],this._currentJsonData))&&(r=this.getRowByIndex(o),"update"==n?(t.copyObject(l[0],s),a=e(e.render[this._id+"_JSONTemplate"](l)),r.hasClass("e-alt_row")?a.addClass("e-alt_row"):a.removeClass("e-alt_row"),r.replaceWith(a),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),"batch"==this.model.editSettings.editMode?this.batchChanges.changed.push(l[0]):this._dataManager[n](i,s),this._isMapSelection&&(this._selectionByGrid=!0,this.multiSelectCtrlRequest=!0,s[this._selectionMapColumn]?this.selectRows(o):this.clearSelection(o),this._selectionByGrid=!1)):(-1==e.inArray(o,this.selectedRowsIndexes)&&this.selectedRowsIndexes.push(o),this.deleteRow(r)),"batch"==this.model.editSettings.editMode&&(this.batchSave(),this._confirmedValue=!0)))},deleteRecord:function(e,t){this._updateDeleteRecord(e,t,"remove")}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.sort={_addSortElementToColumn:function(i,s){var n,l,o,r;if(l=t.DataManager(this.model.columns).executeLocal(t.Query().where("field","equal",i)).length>1?this.getColumnByHeaderText(this._$curSElementTarget.text()):this.getColumnByField(i),!t.isNullOrUndefined(l)){var a=e.inArray(l,this.model.columns),d=this.getsortColumnByField(i),h=e.inArray(d,this.model.sortSettings.sortedColumns),c=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(a).find(".e-headercelldiv");if(s=t.isNullOrUndefined(s)?"ascending":s.toLowerCase(),c.find(".e-ascending,.e-descending").remove(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").find(".e-ascending,.e-descending").not(".e-ungroupbutton").remove(),n="descending"!=s?"e-rarrowup-2x":"e-rarrowdown-2x",o=1,this.model.allowSorting&&this.model.allowMultiSorting&&this.model.sortSettings.sortedColumns.length>1){for(r=1;r<=h;r++)o+=1;c.css("text-align"),c.prepend(this._createSortNumber(o,c).addClass("e-sortnumber")),c.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n))}else c.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n));this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+n)),c.parent().attr("aria-sort",s)}},_removeSortElementFromColumn:function(t){var i=this.getColumnByField(t),s=e.inArray(i,this.model.columns),n=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell").eq(s).find(".e-headercelldiv");n.find(".e-ascending,.e-descending").remove(),n.parent().prop("aria-sort",!1)},_sortCompleteAction:function(i){var s,n,l;for(this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i.columnName+"']").find(".e-ascending,.e-descending,.e-number").not(".e-ungroupbutton").remove(),this.getHeaderTable().find("[aria-sort]").prop("aria-sort",!1),n=0;n<this.model.sortSettings.sortedColumns.length;n++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[n].field,this.model.sortSettings.sortedColumns[n].direction);this.model.groupSettings.groupedColumns.length&&null!=this._$curSElementTarget&&(l=this._checkEinGroupDrop(e.trim(this._$curSElementTarget.attr("ej-mappingname"))),t.isNullOrUndefined(l)||(s="ascending"==(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)?"e-rarrowup-2x":"e-rarrowdown-2x",l.find(".e-ascending,.e-descending").removeClass().addClass("e-icon e-"+(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)+" "+s))),this.multiSortRequest=!1,(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns()},removeSortedColumns:function(t){if(e.isArray(t))for(var i=0;i<t.length;i++)this._removeSortedColumnFromCollection(t[i]);else this._removeSortedColumnFromCollection(t);this.multiSortRequest=!0,this.sortColumn(null,null)},_removeSortedColumnFromCollection:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length;t++)if(this.model.sortSettings.sortedColumns[t].field==e){this.model.sortSettings.sortedColumns.splice(t,1);break}},clearSorting:function(){var t=this;this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(i){return-1!=e.inArray(i.field,t.model.groupSettings.groupedColumns)}),this._$prevSElementTarget=null,this._$curSElementTarget=null,this.refreshContent()},sortColumn:function(i,s){var n,l;this.model.allowSorting&&-1==e.inArray(i,this._disabledSortableColumns)&&(null==i||0!=i.length)&&(n={},this.multiSortRequest||(l=this,this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(t){return-1!=e.inArray(t.field,l.model.groupSettings.groupedColumns)})),n.requestType=t.Grid.Actions.Sorting,this._cSortedColumn=n.columnName=i,this._cSortedDirection=n.columnSortDirection=t.isNullOrUndefined(s)?t.sortOrder.Ascending:s.toLowerCase(),null!==this._cSortedColumn&&(this._removeSortedColumnFromCollection(i),this.model.sortSettings.sortedColumns.push({field:this._cSortedColumn,direction:this._cSortedDirection})),this._processBindings(n)&&(this._cSortedDirection=this._cSortedColumn=null),this._primaryKeyValues=[])},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),"multiple"==this.model.selectionType&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function($,ej,undefined){ej.gridFeatures=ej.gridFeatures||{},ej.gridFeatures.filter={getFilterBar:function(){return this._gridFilterBar},setGridFilterBar:function(e){this._gridFilterBar=e},filterColumn:function(e,t,i,s,n,l){var o,r,a,d,h,c,u,m,p;if(this.model.allowFiltering)for(o=this.getColumnByField(e),(ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||"boolean"!=o.type||"true"!=i)&&"false"!=i||(i=JSON.parse(i)),!ej.isNullOrUndefined(o)&&!ej.isNullOrUndefined(o.filterBarTemplate)&&("date"==o.type||"datetime"==o.type)&&i.length>0&&(r=ej.isNullOrUndefined(o.format)?"date"==this._currentFilterColumn.type?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:o.format.replace("{0:","").replace("}",""),i=ej.parseDate(i,r,this.model.locale)),a=[],"object"==typeof e?a=e:a.push({field:e,operator:t,value:i,predicate:s,matchcase:n,actualFilterValue:l}),d=0;d<a.length;d++){e=a[d].field,t=a[d].operator,i=a[d].value,s=a[d].predicate,n=!ej.isNullOrUndefined(a[d].matchcase)&&a[d].matchcase,l=a[d].actualFilterValue;var g={};for(g.requestType=ej.Grid.Actions.Filtering,g.currentFilterObject=[],this._$curFieldName=e,$.isArray(t)||(t=$.makeArray(t)),$.isArray(i)||(i=$.makeArray(i)),$.isArray(s)||(s=$.makeArray(s)),h=!1,this._filterCollection,ej.util.isNullOrUndefined(this._currentFilterColumn)&&(this._currentFilterColumn=this.getColumnByField(e)),c=0;c<t.length;c++){if(u={field:e,operator:t[c],value:i[c],matchcase:n,predicate:s[c],actualFilterValue:ej.getObject("value",l),actualOperator:ej.getObject("operator",l)},predicated=ej.getObject("ejpredicate",l),predicated&&(u=predicated),"filterbar"==this.model.filterSettings.filterType&&(this._$colType=this._currentFilterColumn.type),0==this.model.filterSettings.filteredColumns.length&&""!==u.value)"date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof u.value?this.model.filterSettings.filteredColumns.push(u):this._setDateFilters(u);else{if(!h){var f=ej.DataManager(this.model.filterSettings.filteredColumns),_=(new ej.Query).where("field",ej.FilterOperators.equal,u.field),v=f.executeLocal(_);for(m=0;m<v.length;m++)-1!=(p=$.inArray(v[m],this.model.filterSettings.filteredColumns))&&this.model.filterSettings.filteredColumns.splice(p,1)}""!==u.value&&("date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof u.value?this.model.filterSettings.filteredColumns.push(u):this._setDateFilters(u))}h=!0,g.currentFilterObject.push(u)}g.filterCollection=this.model.filterSettings.filteredColumns,g.currentFilteringColumn=e,this._processBindings(g)&&(this.model.filterSettings.filteredColumns.reverse().splice(0,t.length),this.model.filterSettings.filteredColumns.reverse()),ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||(this.filterStatusMsg="",this._currentFilterbarValue=g.currentFilterObject[0].value,this._oldFilterColumn!=o&&this.filterColumnCollection.length>0&&-1==$.inArray(o,this.filterColumnCollection)&&this.filterColumnCollection.push(o),this._oldFilterColumn=this._currentFilterColumn=o,this._showFilterMsg())}},search:function(e){var t={};$("#"+this._id+"_search").find("input").val(),$("#"+this._id+"_search").find("input").val(e),t.requestType=ej.Grid.Actions.Search,t.keyValue=e,this.model.searchSettings.fields=0!=this.model.searchSettings.fields.length?this.model.searchSettings.fields:this.getColumnFieldNames(),(""!=e||""!=this.model.searchSettings.key)&&(this.model.searchSettings.key=e.toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":e.toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":e,this._processBindings(t)),this._primaryKeyValues=[]},_filterBarHandler:function(e){var t,i,s,n=e.keyCode,l=$(e.target);if(l.closest(".e-grid").attr("id")===this._id&&("immediate"==this.model.filterSettings.filterBarMode||13==n)&&9!=n){for(l=$(e.target),this.filterStatusMsg="",t=l.prop("id").replace("_filterBarcell",""),s=0;s<this.model.columns.length;s++){if(!ej.isNullOrUndefined(this.model.columns[s].foreignKeyValue)&&-1!=t.indexOf("_"+this.model.columns[s].foreignKeyValue)){i=this.model.columns[s];break}if(this.model.columns[s].field==t){i=this.model.columns[s];break}}if(null==i)return;if(this._currentFilterColumn=i,this._$curFieldName=i.field,this._currentFilterColumn!=this._oldFilterColumn&&(this.filterValueOldLength=0),this._currentFilterbarValue=l.val().toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":l.val().toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":l.val(),this.filterValueCurrentLength=this._currentFilterbarValue.length,(0==this.filterValueCurrentLength&&0==this.filterValueOldLength||this._currentFilterbarValue==this.OldfilterValue)&&this._currentFilterColumn==this._oldFilterColumn&&!this.model.scrollSettings.enableVirtualization)return void this._showFilterMsg();if(this._skipFilterProcess=this._checkForSkipInput(),this._skipFilterProcess){if("string"!=this._currentFilterColumn.type)return this._skipFilterProcess=!1,void(this.model.scrollSettings.enableVirtualization||this._showFilterMsg());this.filterStatusMsg="Invalid Filter Data",this._showFilterMsg()}else this._processFilter(e)}},_renderResponsiveFilter:function(){for(var e,t=ej.buildTag("div#responsiveFilter.resFilterDiv","",{width:"100%",padding:"0px"}),i=$(window).height()+1,s=.08*i,n=(this.element.height()>i?$(window).width():$(window).width(),ej.buildTag("div.columnDiv","",{width:"100%"})),l=0;l<this.model.columns.length;l++)e=ej.buildTag("div.e-responsivefilterColDiv","",{width:"100%"},{"ej-MappingName":this.model.columns[l].field}),a=ej.buildTag("span",this.model.columns[l].headerText,{"margin-left":"4%"}),e.append(a),n.append(e);t.append(n),this.element.append(t);var o=this,r=(this.element.outerWidth(),ej.buildTag("div.e-resFilterDialogHeaderDiv","",{height:s})),a=ej.buildTag("div.labelRes","<span>Filter</span>"),d=ej.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),h=ej.buildTag("span.e-icon e-responsiveFilterClear e-resIcon","",{"font-size":"23px"}),c=ej.buildTag("div.e-resFIlterRigthIcon","",{float:"right","margin-top":"3%"},{closeDialogue:"responsiveFilter",gridEle:!0}),u=ej.buildTag("span.e-icon e-responisveClose e-resIcon","",{"font-size":"23px"},{closeDialogue:"responsiveFilter",gridEle:!0});c.click(function(){$("#responsiveFilter").css("display","none"),o.element.css("display","block")}),d.click(function(){$("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-filternone").click()}),r.append(d.append(h)),r.append(a).append(c.append(u)),t.prepend(r),t.insertAfter(this.element),$(".resFilterDiv").on("keydown",$.proxy(this._responsiveDialogueKeyUp,this)),t.css("display","none"),$(".e-responsivefilterColDiv").on("click",$.proxy(this._mouseClickHandler,this))},_closeDivIcon:function(e){var t,i=$(e.target);ej.isNullOrUndefined(i.attr("closeDialogue"))||(t=$("#"+i.attr("closeDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","none"):t.ejDialog("close")),ej.isNullOrUndefined(i.attr("gridEle"))||this.element.css("display","block"),ej.isNullOrUndefined(i.attr("openDialogue"))||(this.model.enableResponsiveRow||-1!=i.attr("closeDialogue").indexOf("Custom")?(t=$("#"+i.attr("openDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","block"):t.ejDialog("open")):this.element.css("display","block"))},_setResponsiveFilterIcon:function(){var e,t=$("#responsiveFilter").find(".columnDiv"),i=this;for(t.find(".e-filtericon").remove(),e=0;e<this.model.filterSettings.filteredColumns.length;e++){var s=this.model.filterSettings.filteredColumns[e],n=t.find(".e-responsivefilterColDiv[ej-MappingName="+s.field+"]"),l=ej.buildTag("div.e-filtericon e-icon e-resIcon e-filterset e-filternone e-filterreset","",{float:"right",height:"22px",width:"21px","font-size":"20px","margin-right":"3%","margin-top":"2%"}),o=ej.buildTag("span.e-filtericon e-icon e-resIcon e-filterset e-filternone","",{},{colType:s.type});n.find(".e-filternone").remove(),n.append(l),o.click(function(e){var t=e.target;i._$colType=t.attr("colType"),i._fltrClrHandler(),t.remove()})}},_renderExcelFilter:function(){var e=0!=this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns[0].field:null,t={instance:this,showSortOptions:this.model.allowSorting,allowFormatFiltering:this.model.filterSettings.allowFormatFiltering,allowCaseSensitive:this.model.filterSettings.enableCaseSensitivity,maxFilterLimit:this.model.filterSettings.maxFilterChoices,interDeterminateState:this.model.filterSettings.enableInterDeterminateState,enableComplexBlankFilter:this.model.filterSettings.enableComplexBlankFilter,blankValue:this.model.filterSettings.blankValue,filterHandler:ej.proxy(this._filterHandler,this),initFilterCol:e,actionBegin:"actionBegin",actionComplete:"actionComplete"};this._excelFilter=new ej.excelFilter(t),$.extend(this._excelFilter,this.model.filterSettings)},_filterHandler:function(e){var t,i,s,n,l,o,r,a,d={};if(d.requestType="sorting"==e.action?e.action:"filtering",i=this.model.filterSettings.filteredColumns,"filtering"==e.action){for(t=ej.DataManager(this.model.filterSettings.filteredColumns),s=(new ej.Query).where("field",ej.FilterOperators.equal,e.fieldName),n=t.executeLocal(s),l=0;l<n.length;l++)-1!=(o=$.inArray(n[l],this.model.filterSettings.filteredColumns))&&this.model.filterSettings.filteredColumns.splice(o,1);ej.merge(this.model.filterSettings.filteredColumns,e.filterCollection),e.currentFilterCollection=e.filterCollection}else{if("clearfiltering"==e.action)return r=e.filterDetails,delete this._excelFilter._predicates[0][e.fieldName],void this.filterColumn(r.field,r.operator,r.value,r.predicate);if("sorting"==e.action)return a=e.sortDetails,ej.gridFeatures.sort&&this.sortColumn(a.field,a.direction),void this._excelFilter.closeXFDialog()}d.currentFilteringColumn=e.fieldName,d.predicated=e.ejpredicate,this._processBindings(d)&&(this.model.filterSettings.filteredColumns=i)},_renderFiltering:function(){var e,t,i,s,n,l,o,r,a=this.getHeaderTable(),d=ej.buildTag("tr.e-filterbar"),h=[];for((this.model.detailsTemplate||this.model.childGrid)&&d.append(ej.buildTag("th.e-filterbarcell e-mastercell")),n=0;n<this.model.columns.length;n++){var c=ej.buildTag("th.e-filterbarcell"),u=ej.buildTag("div.e-filterdiv"),m=ej.buildTag("span.e-cancel e-icon e-hide"),p=ej.isNullOrUndefined(this.model.columns[n].field)?this.model.columns[n].field:this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,""),g=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?p+"_filterBarcell":p+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell";if(0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[n].field)?(u.addClass("e-fltrinputdiv"),p=this.model.columns[n].field,g=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?p+"_filterBarcell":p+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell",s=ej.buildTag("input.e-ejinputtext e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,type:"search",id:g})):(c.addClass("e-fltrtemp"),u.addClass("e-fltrtempdiv"),ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate.create)?s=ej.buildTag("input e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:g,class:"e-filterUi_input e-filtertext e-fltrTemp"}):(e={columnIndex:n,column:this.model.columns[n]},"string"==typeof(t=this.model.columns[n].filterBarTemplate.create)&&(t=ej.util.getObject(t,window)),s=t(e),s=$(s).attr({title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:g,class:"e-filterUi_input e-filtertext e-fltrTemp"}))),this.model.filterSettings.filteredColumns.length>0&&"filterbar"==this.model.filterSettings.filterType&&-1==$.inArray(this.model.columns[n].field,h))for(l=0;l<this.model.filterSettings.filteredColumns.length;l++)this.getColumnIndexByField(this.model.filterSettings.filteredColumns[l].field)==n&&("greaterthan"==this.model.filterSettings.filteredColumns[l].operator?s.val(">"+this.model.filterSettings.filteredColumns[l].value):"lessthan"==this.model.filterSettings.filteredColumns[l].operator?s.val("<"+this.model.filterSettings.filteredColumns[l].value):"notequal"==this.model.filterSettings.filteredColumns[l].operator?s.val("!="+this.model.filterSettings.filteredColumns[l].value):s.val(this.model.filterSettings.filteredColumns[l].value),-1==$.inArray(this.model.filterSettings.filteredColumns[l].field,h)&&h.push(this.model.filterSettings.filteredColumns[l].field));(!1===this.model.columns[n].allowFiltering||""==this.model.columns[n].field||ej.isNullOrUndefined(this.model.columns[n].field))&&(s.attr("disabled",!0).addClass("e-disable"),this._disabledFilterableColumns.push(this.model.columns[n].headerText)),!1===this.model.columns[n].visible&&c.addClass("e-hide"),ej.isNullOrUndefined(this.model.columns[n].cssClass)||c.addClass(this.model.columns[n].cssClass),0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)?u.append(s).append(m):u.append(s),d.append(c.append(u)),n==this.model.scrollSettings.frozenColumns-1&&(i=d.clone(),a.find("thead").first().append(i),d.empty())}if(a.find("thead").last().append(d),"msie"==ej.browserInfo().name&&ej.browserInfo().version<10)for(o=a.find("thead").find(".e-ejinputtext.e-filtertext"),r=0;r<o.length;r++)ej.ieClearRemover(o[r]);this.setGridFilterBar(d)},_renderFilterBarTemplate:function(){for(var e,t,i,s=!1,n=0;n<this.model.columns.length;n++)0==this.model.columns[n].allowFiltering||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[n].field)||("string"==typeof(t=this.model.columns[n].filterBarTemplate.read)&&(t=ej.util.getObject(t,window)),"string"==typeof(e={element:this.getHeaderTable().find(".e-filterbar").find(".e-fltrtemp").find("#"+this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,"")+"_filterBarcell"),columIndex:n,column:this.model.columns[n]}).column.filterBarTemplate.read&&(e.column.filterBarTemplate.read=t),"string"==typeof(i=this.model.columns[n].filterBarTemplate.write)&&(i=ej.util.getObject(i,window)),i.call(this,e),s=!0);s&&(this.model.filterSettings.filterBarMode=ej.Grid.FilterBarMode.OnEnter)},_closeFilterDlg:function(){ej.isNullOrUndefined($("#"+this._id+"_"+this._$colType+"Dlg").data("ejDialog"))?$("#"+this._id+"_"+this._$colType+"Dlg").css("display","none"):$("#"+this._id+"_"+this._$colType+"Dlg").ejDialog("close"),this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1},_filterBarClose:function(e){var t,i=$(e.target);i.closest(".e-grid").attr("id")===this._id&&("click"==e.type&&i.hasClass("e-cancel")&&((t=i.prev()).focus().val(""),t.trigger("keyup"),e.stopPropagation()),"focusin"==e.type&&i.hasClass("e-filtertext")&&(i=$(e.target).next(),this.getFilterBar().find(".e-cancel").addClass("e-hide"),i.removeClass("e-hide")))},_processFilter:function(e){this._alreadyFilterProcessed?(this._stopTimer(),this._startTimer(e)):(this._alreadyFilterProcessed=!0,this._startTimer(e))},_startTimer:function(e){var t=this,i=13==e.keyCode?0:t.model.filterSettings.immediateModeDelay;this._timer=window.setTimeout(function(){t._onTimerTick()},i)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_onTimerTick:function(){var e,t,i;this.OldfilterValue=this._currentFilterbarValue,this._oldFilterColumn=this._currentFilterColumn,this.filterValueOldLength=this.filterValueCurrentLength,this._findPredicate();var s="string"!=this._currentFilterColumn.type,n=$.extend([],this.model.filterSettings.filteredColumns);for(e=0;e<n.length;e++)""==this.getHeaderContent().find(".e-filterbar #"+n[e].field+"_filterBarcell").val()&&(-1!=$.inArray(this.model.filterSettings.filteredColumns[e],this.filterColumnCollection)&&this.filterColumnCollection.splice(e,1),this.model.filterSettings.filteredColumns.splice(e,1));if("date"==this._currentFilterColumn.type||"datetime"==this._currentFilterColumn.type)for(t=0;t<this.model.filterSettings.filteredColumns.length;t++)this.model.filterSettings.filteredColumns[t].isComplex&&(i=this.model.filterSettings.filteredColumns[t].predicates,1==this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns=i:(this.model.filterSettings.filteredColumns[t]=i[0],this.model.filterSettings.filteredColumns.push(i[1])));this._skipFilterProcess?this.filterStatusMsg="Invalid Filter Data":this._currentFilterColumn.foreignKeyValue&&this._currentFilterColumn.dataSource&&""!=this._currentFilterbarValue?this._fltrForeignKeyValue(this._operator,this._currentFilterbarValue,s,this._currentFilterColumn.dataSource,this._currentFilterColumn.foreignKeyField,this._currentFilterColumn.foreignKeyValue,this._currentFilterColumn.type):ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.filterColumn(this._currentFilterColumn.field,this._operator,this._currentFilterbarValue,this._predicate,s),!this.model.scrollSettings.enableVirtualization&&ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this._showFilterMsg(),this._stopTimer()},_findPredicate:function(){var e,t=this._currentFilterbarValue.replace(/ && /i," and ").replace(" || "," or "),i=t.split(" ");if(this._predicate="and",0!=i.length)if($.isFunction(ej.Predicate[i[1]])){this._skipFilterProcess=!1,this._predicate=i[1];var s=t.split(" "+i[1]+" "),n=[],l=[];for(e=0;e<s.length;e++)this._validateFilterValue(s[e]),n.push(this._operator),"number"==this._currentFilterColumn.type?l.push(this._currentFilterbarValue):"string"==this._currentFilterColumn.type&&l.push(s[e]);this._currentFilterbarValue=l,this._operator=n}else this._validateFilterValue($.trim(this._currentFilterbarValue));else this._validateFilterValue($.trim(this._currentFilterbarValue))},_validateFilterValue:function(e){var t,i,s,n;switch(this._currentFilterColumn.type){case"number":for(this._operator=ej.FilterOperators.equal,t=[">","<","=","!"],i=0;i<e.length&&-1==jQuery.inArray(e[i],t);i++);i!=e.length&&(this._getOperator(e.substring(i)),0!=i&&(this._currentFilterbarValue=e.substring(0,i))),this._currentFilterbarValue=""!=this._currentFilterbarValue&&e.length>=1?ej.parseFloat(this._currentFilterbarValue,this.model.locale):e.length>1?ej.parseFloat(e,this.model.locale):e;break;case"date":case"datetime":this._operator=ej.FilterOperators.equal,this._getOperator(e),s=ej.isNullOrUndefined(this._currentFilterColumn.format)?"date"==this._currentFilterColumn.type?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:this._currentFilterColumn.format.replace("{0:","").replace("}",""),""!=this._currentFilterbarValue&&(n=ej.parseDate(this._currentFilterbarValue,s,this.model.locale),ej.isNullOrUndefined(n)?this.filterStatusMsg="Invalid Filter Data":this._currentFilterbarValue=ej.parseDate(this._currentFilterbarValue,s,this.model.locale));break;case"string":"*"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(e.length-1)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(0,-1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.endsWith):this._operator=ej.FilterOperators.startsWith;break;case"boolean":case"checkbox":"true"==this._currentFilterbarValue.toLowerCase()||"1"==this._currentFilterbarValue?this._currentFilterbarValue=!0:("false"==this._currentFilterbarValue.toLowerCase()||"0"==this._currentFilterbarValue)&&(this._currentFilterbarValue=!1),this._operator=ej.FilterOperators.equal;break;default:this._operator=ej.FilterOperators.equal}},_getOperator:function(e){"="==e.charAt(0)&&(this._operator=ej.FilterOperators.equal,this._currentFilterbarValue=e.substring(1)),(ej.data.operatorSymbols[e.charAt(0)]!==undefined||ej.data.operatorSymbols[e.slice(0,2)]!==undefined)&&(this._operator=ej.data.operatorSymbols[e.charAt(0)],this._currentFilterbarValue=e.substring(1),this._operator===undefined&&(this._operator=ej.data.operatorSymbols[e.slice(0,2)],this._currentFilterbarValue=e.substring(2))),(this._operator==ej.FilterOperators.lessThan||this._operator==ej.FilterOperators.greaterThan)&&"="==this._currentFilterbarValue.charAt(0)&&(this._operator=this._operator+"orequal",this._currentFilterbarValue=this._currentFilterbarValue.substring(1))},_checkForSkipInput:function(){var e,t,i=!1;if("number"==this._currentFilterColumn.type&&(ej.data.operatorSymbols[this._currentFilterbarValue]!==undefined||-1!=$.inArray(this._currentFilterbarValue,["="," ","!"]))&&(i=!0),"string"==this._currentFilterColumn.type)for(e=[">","<","=","!"],t=0;t<this._currentFilterbarValue.length;t++)-1!=$.inArray(this._currentFilterbarValue[t],e)&&(i=!0);return i},_showFilterMsg:function(){var e,t,i,s,n=$.inArray(this._currentFilterColumn,this.filterColumnCollection);if(""!==this._currentFilterbarValue&&-1==n&&this.filterColumnCollection.push(this._currentFilterColumn),""===this._currentFilterbarValue&&-1!=n&&this.filterColumnCollection.splice(n,1),(!this._skipFilterProcess||this.filterColumnCollection.length>0)&&"Invalid Filter Data"!=this.filterStatusMsg)for(n=0;n<this.filterColumnCollection.length;n++)i=this.filterColumnCollection[n].headerText,this.filterColumnCollection[n].disableHtmlEncode&&(i=this._htmlEscape(i)),-1!=this.filterColumnCollection[n].field.indexOf(".")?(t=this.filterColumnCollection[n].field.split(".").join("\\."),e=$("#"+t+"_filterBarcell").val()):(s=ej.isNullOrUndefined(this.filterColumnCollection[n].foreignKeyValue)?this.filterColumnCollection[n].field+"_filterBarcell":this.filterColumnCollection[n].field+"_"+this.filterColumnCollection[n].foreignKeyValue+"_filterBarcell",e="boolean"==this._currentFilterColumn.type&&!ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.element.find("#"+s).hasClass("e-checkbox e-js")?this.element.find("#"+s).parent().attr("aria-checked"):this.element.find("#"+s).val()),""!=e&&(n>0&&""!=this.filterStatusMsg&&(this.filterStatusMsg+=" && "),this.filterStatusMsg+=i+": "+e);this.model.allowPaging?this.getPager().ejPager("model.externalMessage",this.filterStatusMsg):(this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").html(this.filterStatusMsg).css("display","block"):this.$pagerStatusBarDiv.find("div").html(this.filterStatusMsg),this.filterStatusMsg.length?this.$pagerStatusBarDiv.css("display","block"):this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").hide():this.$pagerStatusBarDiv.hide()),"Invalid Filter Data"==this.filterStatusMsg&&(n=$.inArray(this._currentFilterColumn,this.filterColumnCollection),this.filterColumnCollection.splice(n,1)),this.filterStatusMsg=""},_renderFilterDialogs:function(){var e,t,i,s,n,l;$.each(this.model.columns,ej.proxy(function(o,r){"string"!=r.type||e&&ej.isNullOrUndefined(r.filterType)?"guid"!=r.type||l&&ej.isNullOrUndefined(r.filterType)?"number"!=r.type||t&&ej.isNullOrUndefined(r.filterType)?"date"!=r.type||s&&ej.isNullOrUndefined(r.filterType)?"datetime"!=r.type||n&&ej.isNullOrUndefined(r.filterType)?"boolean"!=r.type||i&&ej.isNullOrUndefined(r.filterType)||(ej.isNullOrUndefined(r.filterType)&&(i=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(n=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(s=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(t=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(l=!0),this._renderFilters(r)):(ej.isNullOrUndefined(r.filterType)&&(e=!0),this._renderFilters(r))},this))},_renderFilters:function(col){this._isExcelFilter&&"menu"!=col.filterType||"excel"==col.filterType?(ej.isNullOrUndefined(this._excelFilter)&&(this._renderExcelFilter(),this._excelFilterRendered=!0),this._excelFilter.renderDialog(col.type)):eval(this["_render"+col.type.substring(0,1).toUpperCase()+col.type.substring(1)+"Dialog"](col))},_renderStringDialog:function(){var e,t=this._id+"_stringDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"string"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderBooleanDialog:function(){var e,t=this._id+"_booleanDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"boolean"),this.model.isResponsive&&this._mediaStatus||(this._renderFDialog(t),this.model.filterSettings.showPredicate?$("#"+t).ejDialog({minHeight:136,width:"100%"}):$("#"+t).ejDialog({minHeight:90,width:"100%"})))},_renderGuidDialog:function(){var e,t=this._id+"_guidDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"guid"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderNumberDialog:function(){var e,t=this._id+"_numberDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"number"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderDateDialog:function(e){var t,i=this._id+"_dateDlg";$("#"+i).length>0||((t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(t,"date",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderDatetimeDialog:function(e){var t,i=this._id+"_datetimeDlg";$("#"+i).length>0||((t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(t,"datetime",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderFDialog:function(e){$("#"+e).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_closeFDialog:function(){(this._isExcelFilter||this._excelFilterRendered)&&this._excelFilter.closeXFDialog(),this._$menuDlgIsOpen&&this._closeFilterDlg()},_renderDlgContent:function(e,t,i){e.addClass("e-grid");var s,n=ej.buildTag("div.e-predicate"),l=ej.buildTag("div.e-operator"),o=ej.buildTag("div.e-value"),r=this.localizedLabels.StringMenuOptions,a=this.localizedLabels.NumberMenuOptions,d=ej.buildTag("input#"+this._id+t+"_ddinput",{},{},{type:"text"}),h=ej.buildTag("div#"+this._id+t+"_dropdown"),c=ej.buildTag("ul"),u=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"or"}),m=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"and",checked:"checked"});n.append(m).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateAnd)).append(u).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateOr)),this.model.filterSettings.showPredicate||n.hide(),"string"==t&&(s=ej.buildTag("input",{},{},{type:"checkbox"}),n.append(s).append(ej.buildTag("span.e-caption").html(this.localizedLabels.MatchCase)),$.each(r,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),("number"==t||"date"==t||"datetime"==t||"guid"==t)&&("guid"==t&&(a=a.slice(4,6)),$.each(a,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),"boolean"!=t&&(h.append(c),l.append(d),l.append(h));var p=ej.buildTag("input",{},{},{type:"text"}),g=ej.buildTag("input",{},{},{type:"checkbox"}),f=this.model.enableResponsiveRow?"OkButton":"Filter",_=this.model.enableResponsiveRow?"CancelButton":"Clear",v=ej.buildTag("input.e-filter",{},{},{type:"button",value:this.localizedLabels[f]}),b=ej.buildTag("input.e-clear",{},{},{type:"button",value:this.localizedLabels[_]});o.append(ej.buildTag("span.e-caption").html(this.localizedLabels.FilterMenuCaption+" : ")),e.append(n),"boolean"==t?(o.find("span.e-caption").css("top","1px"),o.append(g)):(o.append(ej.buildTag("br")).append(p),e.append(l)),e.append(o),e.append(ej.buildTag("div.e-dlgBtns").append(v).append(b)),"boolean"!=t&&d.ejDropDownList({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,targetID:this._id+t+"_dropdown",width:"100%",height:"26px",selectedItemIndex:0}),u.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),m.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,checked:!0}),s&&s.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),e.css("display","none"),this._createButton("filter",v),this._createButton("clear",b),"number"==t?p.ejNumericTextbox({cssClass:this.model.cssClass,locale:this.model.locale,enableRTL:this.model.enableRTL,value:0,showSpinButton:!1,height:"26px",decimalPlaces:2,width:"100%"}):"guid"==t?p.css({height:"26px",width:"100%"}):"date"==t?(p.attr("id",this._id+"_dpDate"),p.ejDatePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this.model.locale}),ej.isNullOrUndefined(i.format)||p.ejDatePicker({dateFormat:i.format.replace(/{0:|}/g,function(){return""})})):"datetime"==t?(p.attr("id",this._id+"_dpDateTime"),p.ejDateTimePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",locale:this.model.locale}),ej.isNullOrUndefined(i.format)||p.ejDateTimePicker({dateTimeFormat:i.format.replace(/{0:|}/g,function(){return""})})):"boolean"==t?g.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}):"string"==t&&(p.attr("id",this._id+"_acString"),p.ejAutocomplete({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,dataSource:this._dataSource(),width:"100%",height:26,enableDistinct:!0,focusIn:function(){var e=this.element.closest(".e-dialog").find(".e-dropdownlist"),t=this.element.closest(".e-dialog").find(".e-checkbox").prop("checked");this.model.filterType=e.ejDropDownList("model.value"),this.model.caseSensitiveSearch=t},open:function(){var e=!this.element.closest(".e-dialog").ejDialog("isOpened");this.suggestionList.css({visibility:e?"hidden":"visible"})}}))},_createButton:function(e,t){var i="filter"==e?ej.proxy(this._fltrBtnHandler,this):ej.proxy(this._fltrClrHandler,this);t.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,click:i})},_getIdField:function(){var e;return $.each(this.model.columns,function(t,i){if(i.key)return e=i.field,!1}),e},_filterCompleteAction:function(){var e;if(this.model.allowPaging&&this._refreshGridPager(),"menu"==this.model.filterSettings.filterType||this._isExcelFilter){this._closeFDialog();var t=this.getColumnByField(this._$curFieldName),i=$.inArray(t,this.model.columns),s=this,n=!1;$.each(this.model.filterSettings.filteredColumns,function(e,t){return t.field==s._$curFieldName||1==t.isComplex&&t.predicates[0].field==s._$curFieldName?(n=!0,!1):void 0}),e=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell").eq(i).find(".e-filtericon"),n?e.addClass("e-filteredicon e-filternone"):e.removeClass("e-filteredicon e-filternone")}},_refreshFilterIcon:function(){var e,t,i,s,n,l;if(this.model.filterSettings.filteredColumns.length)for(e=ej.distinct(this.model.filterSettings.filteredColumns,"field",!0),t=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell"),this.model.showStackedHeader&&(t=t.not(".e-stackedHeaderCell")),this.model.allowReordering&&t.find(".e-filtericon").removeClass("e-filteredicon e-filternone"),n=0,l=e.length;n<l;n++)s=e[n],i=this.getColumnIndexByField(!0===s.isComplex?s.predicates[0].field:s.field),t.eq(i).find(".e-filtericon").addClass("e-filteredicon e-filternone")},_setFilterFieldValues:function(e){var t,i="",s=this,n=-1;$.each(this.model.filterSettings.filteredColumns,function(e,t){t.field==s._$curFieldName&&(n=e)}),-1==n&&"boolean"!=this._$colType&&("string"==this._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:!1}),$(".e-predicate input[name ="+this._id+"_predicate"+this._$colType+"]:first").ejRadioButton({checked:!0}),$("#"+this._id+this._$colType+"_ddinput").ejDropDownList({selectedItemIndex:0,change:function(){this.element.closest(".e-dialog").find(".e-autocomplete").val(i)}})),t=$(this.model.filterSettings.filteredColumns).map(function(){return this.field}).get(),(this._$curFieldName!=this._$prevFieldName||-1!=$.inArray(this._$curFieldName,t))&&($.each(this.model.filterSettings.filteredColumns,function(e,t){if(t.field==s._$curFieldName){for(var n="number"==s._$colType||"date"==s._$colType||"datetime"==s._$colType?"Number":"String",l=s.localizedLabels[n+"MenuOptions"],o=ej.isNullOrUndefined(t.actualOperator)?t.operator:t.actualOperator,r=0;r<l.length&&l[r].value.toLowerCase()!=o;r++);return"string"==s._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:t.matchcase}),$("input[value="+t.predicate+"]").ejRadioButton({checked:!0}),$("#"+s._id+s._$colType+"_ddinput").ejDropDownList({selectedItemIndex:r}),i=null!=t.actualFilterValue?t.actualFilterValue:t.value,!1}}),"boolean"==this._$colType?i&&""!=i?$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!0}):$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!1}):"date"==this._$colType||"datetime"==this._$colType?$(e).find(".e-value .e-datepicker")["date"==this._$colType?"ejDatePicker":"ejDateTimePicker"]("model.value",i):"number"==this._$colType?$(e).find(".e-value .e-numerictextbox").ejNumericTextbox("model.value",i):$(e).find(".e-value input").val(i))},_fltrBtnHandler:function(){var e;this.model.isResponsive&&this._mediaStatus&&this._responsiveFilterClose();var t,i,s=this._id+"_"+this._$colType+"Dlg",n=$("#"+s),l=n.find(".e-value input"),o=l.val(),r=undefined;"number"==this._$colType&&(l=l.filter(".e-numerictextbox"),o=parseFloat(l.ejNumericTextbox("getValue")),r=!0),"string"==this._$colType&&(r=n.find(".e-predicate input[type='checkbox']").is(":checked")),("date"==this._$colType||"datetime"==this._$colType)&&(o=ej.parseDate(o,this._$colFormat,this.model.locale),r=!0),"boolean"==this._$colType?(o=null!=l.ejCheckBox("model.checked")&&l.ejCheckBox("model.checked"),t="equal"):t=$("#"+this._id+this._$colType+"_ddinput").ejDropDownList("getSelectedValue").toLowerCase(),i=n.find(".e-predicate input[type='radio']:checked"),this._$colForeignKeyValue&&this._$colDropdownData?this._fltrForeignKeyValue(t,o,r,this._$colDropdownData,this._$colForeignKeyField,this._$colForeignKeyValue,this._$colType,i):this.filterColumn(this._$curFieldName,t,o,n.find(".e-predicate input[type='radio']:checked").attr("value"),r),this.model.isResponsive&&(n.css("display","none"),this._setResponsiveFilterIcon(),this.element.css("display","block"),!this.model.allowScrolling||this.model.enableResponsiveRow&&this.model.minWidth||((e={}).requestType="refresh",this._refreshScroller(e)))},_fltrClrHandler:function(){this.clearFiltering(this._$curFieldName)},_fltrForeignKeyValue:function(e,t,s,n,l,o,r,a){var d,h;ej.isNullOrUndefined(s)&&(s=!0);var c,u,m,p,g=[],f=(!a||a.css("display"),a?a.attr("value"):"and"),_=n,v={mapFieldName:o,fieldName:l,operator:e,value:t,predicate:a,matchcase:s},b={requestType:ej.Grid.Actions.Filtering,action:"fetchingForeignKeyField",currentFilteringColumn:l,currentFilterObject:v};this._trigger("actionBegin",b),n instanceof ej.DataManager||(_=new ej.DataManager(n)),"date"==r?(d=new Date(t.setDate(t.getDate()-1)),h=new Date(t.setDate(t.getDate()+2)),c="equal"==e||"notequal"==e?"equal"==e?(new ej.Query).where(ej.Predicate(v.mapFieldName,">",d,!v.matchcase).and(v.mapFieldName,"<",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(ej.Predicate(v.mapFieldName,"<=",d,!v.matchcase).or(v.mapFieldName,">=",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName)):c=(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName),u={actualFilterValue:v.value,actualOperator:v.operator,ejpredicate:undefined,predicate:f},_.executeQuery(c).done(ej.proxy(function(e){for(p=e.result,requireProc=$.isPlainObject(p[0]),preds=[],merge=!1,p=requireProc?ej.distinct(p,l,!1):p,field=this._$curFieldName,m=new ej.Predicate(field,"equal",p[0],s),i=1,vlen=p.length;i<vlen;i++)preds.push(new ej.Predicate(field,"equal",p[i],s)),merge=!0;merge&&(preds.unshift(m),m=ej.Predicate.or(preds)),$.extend(u,{ejpredicate:$.extend(m,{field:field},u)}),this.filterColumn(v.fieldName,v.operator,v.value,g,v.matchcase,u)},this))},_setDateFilters:function(e,t){var i,s,n,l,o;if(t||ej.isNullOrUndefined(this.getColumnByField(e.field).format)?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):-1!=(n=this.getColumnByField(e.field).format).indexOf("s")?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):-1!=n.indexOf("m")?(i=new Date(e.value.setMinutes(e.value.getMinutes()-1)),s=new Date(e.value.setMinutes(e.value.getMinutes()+2))):-1!=n.indexOf("h")?(i=new Date(e.value.setHours(e.value.getHours()-1)),s=new Date(e.value.setHours(e.value.getHours()+2))):(i=new Date(e.value.setDate(e.value.getDate()-1)),s=new Date(e.value.setDate(e.value.getDate()+2))),l=$.extend({},e),o=$.extend({},e),l.value=i,o.value=s,"equal"==e.operator?(l.operator="greaterthan",l.predicate="and",o.operator="lessthan",o.predicate="and"):(l.operator="lessthanorequal",l.predicate="or",o.operator="greaterthanorequal",o.predicate="or"),pred=ej.Predicate(l.field,l.operator,l.value,!1),predicate=pred[o.predicate](ej.Predicate(o.field,o.operator,o.value,!1)),e.value=new Date(e.value.setSeconds(o.value.getSeconds()-1)),t)return predicate;this.model.filterSettings.filteredColumns.push($.extend(predicate,{field:e.field,operator:e.operator}))}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.group={_renderGroupDropArea:function(){var e,i;return t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation),e=this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea,this.model.groupSettings.showDropArea?(i=t.buildTag("div.e-groupdroparea",e),this.model.groupSettings.enableDropAreaAutoSizing&&i.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),i):void 0},_getColGroup:function(t){var s,n,l,o=this.getRsc("helpers",t);return s=1==o.model.groupSettings.groupedColumns.length?this.data.items.level===i?0:this.data.items.level-1:this.data.items.level===i?o.model.groupSettings.groupedColumns.length:this.data.items.level-1,n=e(document.createElement("div")),o._isCaptionSummary?l=o._getCaptionColGroup(s):(l=o._getMetaColGroup(),s!=o.model.groupSettings.groupedColumns.length&&o.model.groupSettings.groupedColumns.length>1&&l.prepend(o._getIndentCol())),n.html(l),n.html()},_colSpanAdjust:function(s,n,l){var o,r,a,d,h,c,u,m;if(t.isNullOrUndefined(s)?(o=this,r=l):(o=this.getRsc("helpers",s),r=this),1==o.model.groupSettings.groupedColumns.length?(a=r.data.items.level===i?1:r.data.items.level-1,"groupcaption"==n&&(o._currentJsonData=o._currentJsonData.concat(r.data.items))):(a=r.data.items.level===i?o.model.groupSettings.groupedColumns.length:r.data.items.level-1,"groupcaption"==n&&r.data.items.level===i&&(o._currentJsonData=o._currentJsonData.concat(r.data.items))),o._isGrouping=!0,d=o.model.groupSettings.showGroupedColumn?0:o.model.groupSettings.groupedColumns.length,h=0,e.each(o._hiddenColumnsField,function(t,i){-1!=e.inArray(i,o.model.groupSettings.groupedColumns)&&(h+=1,o.model.groupSettings.showGroupedColumn&&(d+=1))}),c=o.model.columns.length+o.model.groupSettings.groupedColumns.length-a-o._hiddenColumnsField.length-d+h,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c,o._isCaptionSummary&&"groupcaption"==n){var p=[],g=o._captionSummary(),f=0,_=[];for(e.each(g[0].summaryColumns,function(t,i){-1!=e.inArray(i.displayColumn,o._hiddenColumnsField)&&0,_.push(o.getColumnIndexByField(i.displayColumn)),p.push(o.getColumnIndexByField(i.displayColumn)+o.model.groupSettings.groupedColumns.length-a)}),u=t.min(_),m=0;m<o._hiddenColumnsField.length;m++)u>(t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[m]))?o.getColumnIndexByHeaderText(o._hiddenColumnsField[m],t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[m]))):o.getColumnIndexByField(o._hiddenColumnsField[m]))&&f++;p.length>0&&(c=t.min(p)),c-=f,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c}return c},_captionEncode:function(e){return this.getRsc("helpers",e).getColumnByField(this.data.field).disableHtmlEncode},_captionFormat:function(i){var s,n=this.getRsc("helpers",i),l=e.extend({},this.data),o=n.getColumnByField(l.field);return s=o.foreignKeyValue&&o.dataSource?n._foreignKeyBinding(n.getColumnIndexByField(l.field),l.key,n._id):l.key,t.isNullOrUndefined(o.format)||-1!=o.format.indexOf("{0:")||(l[l.field]=l.key,n.data=l),l.key=o.format?n.formatting(o.format,s,n.model.locale):s,l.headerText=o.headerText,e.render[n._id+"_CaptionTemplate"](l)},_getCaptionColGroup:function(e){var t,i=this.getHeaderTable().find("colgroup").clone(),s=i.find("col").length-this.model.columns.length;if((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(s-=1),i.find("col:lt("+s+")").remove(),e>0&&e!=this.model.groupSettings.groupedColumns.length)if(this.model.groupSettings.groupedColumns.length>2&&e!=this.model.groupSettings.groupedColumns.length-1)for(t=0;t<this.model.groupSettings.groupedColumns.length-e;t++)i.prepend(this._getIndentCol());else i.prepend(this._getIndentCol());return i},_groupSummaryRow:function(i,s,n,l){var o,r,a,d,h,c,u=this.getRsc("helpers",n);l=!t.isNullOrUndefined(l);if(u.model.showSummary){if(null==u.getFooterTable()&&u._renderGridFooter(),u._createSummaryRows(u.getFooterTable(),null==i.records?i:i.records,s,i,l),u._isCaptionSummary&&!l&&(o=[],r=u._captionSummary(),e.each(r[0].summaryColumns,function(e,t){o.push(u.getColumnIndexByField(t.displayColumn))}),o.length>0&&(colIndex=t.min(o)),a=u.model.columns.length,u.getFooterTable().find("tbody td").slice(-(a-colIndex)).removeClass("e-summaryrow").addClass("e-groupcaptionsummary")),!u.model.groupSettings.showGroupedColumn){var m=u.model.groupSettings.groupedColumns,p=0,g=u.getFooterTable().children("tbody").find("tr");for(d=0;d<u.model.summaryRows.length;d++){for(h=0;h<u.model.summaryRows[d].summaryColumns.length;h++)for(c=0;c<m.length;c++)m[c]==u.model.summaryRows[d].summaryColumns[h].displayColumn&&(p++,u.model.summaryRows[d].summaryColumns.length==p&&e(g[d]).addClass("e-hide"));p=0}}return l?u.getFooterTable().find("tbody").html():u.getFooterTable().find("tbody").find("tr").html()}},addGroupingTemplate:function(){document.createElement("tbody");var i,s,n,l,o=this,r={};r["_"+o._id+"ColSpanAdjust"]=this._colSpanAdjust,r["_"+o._id+"Colgroup"]=this._getColGroup,t.isNullOrUndefined(this.model.groupSettings.captionFormat)?e.templates(o._id+"_CaptionTemplate",this.localizedLabels.GroupCaptionFormat):e.templates(o._id+"_CaptionTemplate",this.model.groupSettings.captionFormat),r["_"+o._id+"CaptionFormat"]=this._captionFormat,r["_"+o._id+"GroupSummaryRow"]=this._groupSummaryRow,r["_"+o._id+"CaptionEncode"]=this._captionEncode,r[o._id+"Object"]=this,e.views.helpers(r),i=" ~_"+o._id+"CaptionFormat('"+o._id+"Object')",s="<td class='e-recordplusexpand' ej-mappingname='{{:field}}' ej-mappingvalue='{{:key}}'><div class='e-icon e-gdiagonalnext'></div></td><td class='e-groupcaption' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','groupcaption') }}'>{{if ~_"+o._id+"CaptionEncode('"+o._id+"Object')}}{{html:"+i+"}}{{else}}{{:"+i+"}}{{/if}}</td>",this._isCaptionSummary&&this.model.showSummary&&(s=s+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object')}}"),n="<tr>"+s+"</tr>",(l=t.buildTag("tbody")).html("{{if items.GROUPGUID}}{{for items tmpl='"+o._id+"_GroupingTemplate'/}}{{else}}{{for items tmpl='"+o._id+"_JSONTemplate'/}}{{/if}}");var a="<table class='e-table {{if items.GROUPGUID}}{{else}}e-recordtable{{/if}}' cellspacing='0.25px' >{{:~_"+o._id+"Colgroup('"+o._id+"Object')}}"+l.html()+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object', '"+o._id+"showGroupCaption')}}</table>",d="<tr><td class='e-indentcell'></td>"+("<td class='e-tabletd' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','table')}}'>"+a+"</td>")+"</tr>";e.templates(o._id+"_GroupingTemplate",n+d)},addSummaryTemplate:function(){var i=this;e.each(i.model.summaryRows,function(s,n){e.each(n.summaryColumns,function(s,n){t.isNullOrUndefined(n.template)||e.templates(i._id+"_summaryTemplate"+n.template,n.template)})})},_getGroupTopLeftCell:function(){var e=t.buildTag("th.e-grouptopleftcell");return e.append(t.buildTag("div.e-headercelldiv e-emptyCell","&nbsp;")),e},_getEmptyFilterBarCell:function(){return t.buildTag("th.e-filterbarcell e-grouptopleftcell")},_groupingAction:function(e){var t,i=this.getHeaderTable().find("thead").find(".e-columnheader:not(.e-stackedHeaderRow)").find(".e-grouptopleftcell"),s=(this.getHeaderTable().find("colgroup").find("col"),i.length);for(s&&(this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),i.remove(),this.getHeaderTable().find("thead").find(".e-filterbar").find(".e-filterbarcell:lt("+s+")").remove()),(!this.model.allowResizeToFit||e)&&this.setWidthToColumns(),t=0;t<this.model.groupSettings.groupedColumns.length;t++)this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),this.getHeaderTable().find("thead").find(".e-columnheader").prepend(this._getGroupTopLeftCell()),this.getHeaderTable().find("thead").find(".e-filterbar").prepend(this._getEmptyFilterBarCell());this.getHeaderTable().find(".e-columnheader").find("th.e-grouptopleftcell").last().addClass("e-lastgrouptopleftcell")},groupColumn:function(i){var s,n;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping&&-1==e.inArray(i,this._disabledGroupableColumns)&&!t.isNullOrUndefined(this.getColumnByField(i))&&-1==e.inArray(i,this.model.groupSettings.groupedColumns)){for(this.model.groupSettings.groupedColumns.push(i),s=0;s<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[s].field!=i;s++);this.model.sortSettings.sortedColumns.length==s&&this.model.sortSettings.sortedColumns.push({field:i,direction:t.sortOrder.Ascending}),(n={}).columnName=i,n.requestType=t.Grid.Actions.Grouping,this._processBindings(n)&&(-1!=e.inArray(i,this._scolumns)||this._gridSort==i||this.model.sortSettings.sortedColumns.pop(),this.model.groupSettings.groupedColumns.pop()),this._primaryKeyValues=[]}},ungroupColumn:function(i){var s,n,l,o,r;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping){if(-1==e.inArray(i,this.model.groupSettings.groupedColumns))return null;for(this.model.groupSettings.groupedColumns.splice(e.inArray(i,this.model.groupSettings.groupedColumns),1),0==this.model.groupSettings.groupedColumns.length&&(this._LastColumnUnGroup=!0),s=this.getColumnByField(i),this.model.groupSettings.showGroupedColumn||s.visible||(n=this._hiddenColumnsField.indexOf(i),this._hiddenColumnsField.splice(n,1),s.visible=!0),l={},o=0;o<this.model.sortSettings.sortedColumns.length;o++)if(this.model.sortSettings.sortedColumns[o].field==i){if(-1!=this._scolumns.indexOf(i)&&this.model.allowSorting&&this.model.allowMultiSorting||this._gridSort==i){if(this.model.allowSorting&&this.model.allowMultiSorting){r=e.inArray(i,this._scolumns),this._scolumns.splice(r,1);break}this._gridSort=null;break}this.model.sortSettings.sortedColumns.splice(o,1);break}l.columnName=i,l.requestType=t.Grid.Actions.Ungrouping,this._isUngrouping=!0,this._processBindings(l)&&this.model.groupSettings.groupedColumns.push(i),this._primaryKeyValues=[]}},collapseGroupDropArea:function(){var i=this.element.find(".e-groupdroparea").first(),s=this;0==this.model.groupSettings.groupedColumns.length&&this.model.groupSettings.enableDropAreaAutoSizing&&i.animate({height:"10px"},200,function(){null!=s.model&&0==s.model.groupSettings.groupedColumns.length&&(e(this).html("").append(t.buildTag("div.e-animatebutton e-animatebuttondown e-icon e-gdownarrow")),e(this).dequeue().css("height","auto"))})},expandGroupDropArea:function(){var e=this.element.find(".e-groupdroparea").first(),i=this;0==this.model.groupSettings.groupedColumns.length&&i.model.groupSettings.enableDropAreaAutoSizing&&e.animate({height:"30px"},150,function(){0==i.model.groupSettings.groupedColumns.length&&e.html(i.localizedLabels.GroupDropArea).append(t.buildTag("div.e-animatebutton e-animatebuttonup e-icon e-guparrow")),e.dequeue().css("height","30px")})},_enableGroupingEvents:function(){this.model.allowGrouping&&(this._on(this.element,"click",".e-groupdroparea,.e-groupheadercell",this._groupHeaderCellClick),this._on(this.element,"mousedown",".e-groupheadercell",function(){return!1}))},_recalculateIndentWidth:function(){var i,s,n,l=this,o=!t.isIOSWebView()&&this.getBrowserDetails(),r=this.getHeaderTable().find(".e-lastgrouptopleftcell").width(),a=r,d=r/30;d>=1&&(a=30/d),this.getHeaderTable().find("colgroup").find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",a+"px"),s=this.getContentTable().find("table").filter(":not(.e-recordtable)"),(r=this.getHeaderTable().find(".e-lastgrouptopleftcell").width())>30||this._isCaptionSummary&&(r>=30||r>a)?(this._isCaptionSummary?(n=this.model.isEdit?s.parent(":not(.gridform)").children("colgroup"):s.children("colgroup"),e.each(n,function(t,i){var s=e(i).find("col").length-l.model.columns.length;(null!=l.model.detailsTemplate||null!=l.model.childGrid)&&s>0&&(s-=1),e(i).find("col").slice(0,s).css("width",a+"px")})):this.model.isEdit?s.parent(":not(.gridform)").children("colgroup").find("col:first-child").css("width",r+"px"):s.children("colgroup").find("col:first-child").css("width",r+"px"),i=this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length),o&&"msie"!=o.browser||this._isCaptionSummary?i.css("width",a+"px"):i.first().css("width",r/this.element.width()*100+"%")):(this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",a+"px"),this.getContentTable().find("table").filter(":not(.e-recordtable)").children("colgroup").find("col:first-child").css("width",r+"px")),this.model.showSummary&&this.getContentTable().find("table").filter(".e-groupsummary").find(".e-summary").css("width",a+"px")},getFieldNameByHeaderText:function(e){return t.isNullOrUndefined(this._fieldColumnNames[e])?null:this._fieldColumnNames[e]},getHeaderTextByFieldName:function(e){return t.isNullOrUndefined(this._headerColumnNames[e])?null:this._headerColumnNames[e]},expandAll:function(){var t,i=this.element.find(".e-recordpluscollapse"),s=this._excludeDetailRows().find(".e-detailrowcollapse");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},collapseAll:function(){var t,i=this.element.find(".e-recordplusexpand"),s=this.element.find(".e-detailrowexpand");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},_group:function(i){var s,n,l,o,r,a;if(this.model.groupSettings.groupedColumns.length&&this.model.currentViewData){if(this._currentJsonData=[],s=document.createElement("div"),!this.model.groupSettings.showGroupedColumn){if(this.initialRender||t.isNullOrUndefined(i.columnName)||"grouping"!=i.requestType)for(a=0;a<this.model.groupSettings.groupedColumns.length;a++)-1==e.inArray(this.model.groupSettings.groupedColumns[a],this._hiddenColumnsField)&&(this._hiddenColumnsField.push(this.model.groupSettings.groupedColumns[a]),this.getColumnByField(this.model.groupSettings.groupedColumns[a]).visible=!1);else n=this.getColumnByField(i.columnName),-1==e.inArray(i.columnName,this._hiddenColumnsField)&&(this._hiddenColumnsField.push(i.columnName),n.visible=!1);this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.getContentTable().children("colgroup").replaceWith(this.getHeaderTable().find("colgroup").clone())}for(this._isReorder="reorder"==i.requestType,o=(l=this.getContentTable().children("colgroup").find("col")).length-this.model.columns.length,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o--,l.length>this.model.columns.length&&this.getContentTable().children("colgroup").find("col:lt("+o+")").remove(),this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),r=null!=this.model.detailsTemplate||null!=this.model.childGrid?this.model.groupSettings.groupedColumns.length+1:this.model.groupSettings.groupedColumns.length,a=0;a<r;a++)this.getContentTable().children("colgroup").prepend(this._getIndentCol());this.model.currentViewData.length?(this.getContentTable().children("tbody").empty(),s.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),this.getContentTable().get(0).replaceChild(s.firstChild.firstChild,this.getContentTable().get(0).lastChild),this._hideCaptionSummaryColumn()):this.model.isEdit&&this.cancelEdit(),this._groupingAction(),this._gridRows=this.getContentTable().find(".e-recordtable").find("tbody").find("tr").not(".e-gridSummaryRows"),this._eventBindings()}},_ungroup:function(){var e,i,s,n;if(this._isGrouping=!1,t.isNullOrUndefined(this.model.detailsTemplate)||(this._detailsOuterWidth=null),i=(e=this.element.children(".e-gridheader")).find(".e-filterbar").find("th").find("input"),e.find("div").first().empty().append(this._renderGridHeader().find("table")),this.setGridHeaderContent(e),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType)for(this._renderFiltering(),this._renderFilterBarTemplate(),s=this.element.children(".e-gridheader").find(".e-filterbar").find("th").find("input"),n=0;n<i.length;n++)s.eq(n).val(i.eq(n).val());this.model.groupSettings.showGroupedColumn||this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.refreshTemplate(),this.element.find(".e-gridcontent").children("div").first().empty().append(this._renderGridContent().find("table").first()),this.setGridContent(this.element.find(".e-gridcontent")),this._gridRows=0!=this.model.groupSettings.groupedColumns.length?this.getContentTable().find(".e-recordtable").find("tbody").find("tr").toArray():this.getContentTable().get(0).rows},_groupHeaderCellClick:function(t){var i,s=e(t.target);if(!s.hasClass("e-groupdroparea"))return s.hasClass("e-ungroupbutton")?(i=s.parent().attr("ej-mappingname"),this.ungroupColumn(i)):s.hasClass("e-togglegroupbutton")?(i=s.parent().attr("ej-mappingname"),s.hasClass("e-toggleungroup")&&this.ungroupColumn(i)):s.hasClass("e-animatebutton")?e(t.target).hasClass("e-animatebuttondown")?this.expandGroupDropArea():this.collapseGroupDropArea():(s.addClass("e-headercelldiv"),this._mouseClickHandler(t),s.removeClass("e-headercelldiv")),!1},_captionSummary:function(i){for(var s=null,n=this.model.summaryRows,l=n.length,o=0;o<l;o++)if(1==n[o].showCaptionSummary){s=e(n[o]);break}return i&&(left=n.slice(0,o),right=n.slice(o+1,l),t.merge(s=left,right)),s},_dropAreaHover:function(t){var i=e(t.target);return"mouseenter"==t.type?(this._dragActive?i.hasClass("e-groupdroparea")&&i.addClass("e-hover"):i.removeClass("e-hover"),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").show(150)):"mouseleave"==t.type&&(i.hasClass("e-groupdroparea")&&(i.find(".e-ungroupbutton").hide(150),i.removeClass("e-hover")),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").hide(150)),!1},_groupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");if((this.model.groupSettings.groupedColumns.length&&0==s.find(".e-grid-icon").length||t.Grid.Actions.Refresh==e.requestType)&&s.empty(),this.initialRender||t.Grid.Actions.Refresh==e.requestType){for(i=0;i<this.model.groupSettings.groupedColumns.length;i++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[i]);this._refreshGridPager()}else this._addColumnToGroupDrop(e.columnName);for(this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction);!this.initialRender&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_ungroupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");for(e.requestType!=t.Grid.Actions.Refresh&&this._removeColumnFromDrop(e.columnName),this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction);0==this.model.groupSettings.groupedColumns.length&&(s.html(this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea),this.model.groupSettings.enableDropAreaAutoSizing&&s.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),s.css("height","auto")),t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&this._headerCellreorderDragDrop(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_getToggleButton:function(){return t.buildTag("span.e-togglegroupbutton e-icon e-gridgroupbutton","&nbsp;")},_checkEinHeader:function(t){for(var i,s=this.element.children(".e-gridheader").find("thead").find(".e-columnheader").find(".e-headercell"),n=0;n<s.length;n++){if(e.trim(s.eq(n).find("div").attr("ej-mappingname"))==t)return s.eq(n);if(this.model.allowSorting&&this.model.allowMultiSorting&&((i=e(s.eq(n)).clone()).find(".e-number").remove(),e.trim(i.find("div").attr("ej-mappingname"))==t))return i}return null},_checkEinGroupDrop:function(t){for(var i=this.element.children(".e-groupdroparea").find(".e-grid-icon"),s=0;s<i.length;s++)if(e.trim(i.eq(s).find("div").attr("ej-mappingname"))==t)return i.eq(s);return null},_addColumnToGroupDrop:function(i){var s,n,l=t.buildTag("div.e-grid-icon e-groupheadercell"),o=this.element.find(".e-groupdroparea").first(),r=t.buildTag("div",{},{},{"ej-mappingname":i}),a="e-rarrowup-2x",d=this.getColumnByField(i);d.disableHtmlEncode?l.append(r.text(d.headerText)):d.headerTemplateID?l.append(r.html(e(d.headerTemplateID).html())):l.append(r.html(d.headerText)),s=this._checkEinHeader(i),this.model.groupSettings.showToggleButton&&(r.append(this._getToggleButton().addClass("e-toggleungroup")),s.find(".e-headercelldiv").find(".e-togglegroupbutton").remove().end().append(this._getToggleButton().addClass("e-toggleungroup"))),n="ascending",s.find(".e-ascending,.e-descending").length&&(a="ascending"==(n=s.find(".e-ascending,.e-descending").hasClass("e-ascending")?"ascending":"descending")?"e-rarrowup-2x":"e-rarrowdown-2x"),r.append(this._createSortElement().addClass("e-"+n+" "+a)),this.model.groupSettings.showUngroupButton&&r.append(t.buildTag("span.e-ungroupbutton e-icon e-cancel"," ",{},{title:this.localizedLabels.UnGroup})),o.append(l).css("height","auto");var h=l.offset().left,c=l.clone().css("position","absolute");l.css("visibility","hidden"),o.append(c).dequeue(),c.css({left:h+150}).animate({left:h},150,function(){l.css("visibility","visible"),c.remove()})},_removeColumnFromDrop:function(t){this.getHeaderTextByFieldName(t);for(var i=this.element.children(".e-groupdroparea").css("height","30px").find(".e-grid-icon"),s=0;s<i.length;s++)e.trim(i.eq(s).find("div").attr("ej-mappingname"))==t&&(0==this.model.groupSettings.groupedColumns.length?this.collapseGroupDropArea():i.eq(s).remove())},_setAggreatedCollection:function(e){var s;this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url!=i&&!this._isRemoteSaveAdaptor||this.model.enableLoadOnDemand||(s=this._dataManager.executeLocal(e).result,this._aggregatedCollection=s)},_setAggregates:function(e,i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v=new t.Query;for(e=e||this.model.currentViewData,i=i||this._aggregatedCollection,0!=(l=e.length)&&(r=t.Predicate("field","equal",e[0].field),a=t.Predicate("key","equal",e[0].key),e[0].key instanceof Date&&(d={value:e[0].key,operator:"equal",field:"key"},a=this._setDateFilters(d,!0)),n=r.and(a)),s=1;s<l;s++)r=t.Predicate("field","equal",e[s].field),a=t.Predicate("key","equal",e[s].key),e[s].key instanceof Date&&(d={value:e[s].key,operator:"equal",field:"key"},a=this._setDateFilters(d,!0)),n=n.or(r.and(a));if(o=(i=n?new t.DataManager(i).executeLocal(v.where(n)):i).length,e.length>0)for(s=0;s<o;s++)if((!(s>0)||!(s<o-1))&&(e[s].count=i[s].count,e[s].items.GROUPGUID&&this._setAggregates(e[s].items,i[s].items),this.model.showSummary))for(h=e[s].aggregates=[],p=0,g=(c=this.model.summaryRows).length;p<g;p++)for(f=0,_=(u=c[p].summaryColumns).length;f<_;f++)m=i[s].items.level?i[s].items.records:i[s].items,h[u[f].dataMember+" - "+u[f].summaryType]=this.getSummaryValues(u[f],m)}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.dragAndDrop={_headerCellgDragDrop:function(){var i,s=this;this.dragHeaderElement(),(i=this.element.children("div.e-groupdroparea")).ejDroppable({accept:i,drop:function(i,n){if(!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")){var l=s.getColumnByField(e.trim(e(n.draggable[0]).find("div").attr("ej-mappingname")));n.helper.remove(),s._disabledGroupableColumns.length&&-1!=e.inArray(l.field,s._disabledGroupableColumns)||t.isNullOrUndefined(l)||t.isNullOrUndefined(l.field)||""==l.field||s.groupColumn(l.field)}}})},_headerCellreorderDragDrop:function(){var i,s=this;this.dragHeaderElement(),(i=this.element.find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell")).ejDroppable({accept:i,drop:function(i,n){var l,o,r,a,d,h,c,u,m,p,g,f;!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")&&e(n.draggable[0]).closest(".e-grid").attr("id")==s._id&&(("ascending"==n.draggable.attr("aria-sort")||"descending"==n.draggable.attr("aria-sort"))&&(l=s.getColumnByField(e.trim(e(n.draggable[0]).find("div").attr("ej-mappingname"))),s.model.allowSorting&&s.model.allowMultiSorting?s._scolumns.push(l.field):s._gridSort=l.field),h=n.draggable.index(),c=i.dropTarget.parent().index(),(e(i.dropTarget).hasClass("e-number")||e(i.dropTarget).hasClass("e-icon"))&&(c=i.dropTarget.closest(".e-headercell").index()),s.model.scrollSettings.frozenColumns>0?(a=n.draggable.closest(".e-frozenheaderdiv").length>0?h:h+s.model.scrollSettings.frozenColumns,d=i.dropTarget.closest(".e-frozenheaderdiv").length>0?c:c+s.model.scrollSettings.frozenColumns):(a=h,d=c),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?(a-=s.model.groupSettings.groupedColumns.length,d-=s.model.groupSettings.groupedColumns.length):(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(a-=1,d-=1),o=s.getColumnByIndex(a),r=s.getColumnByIndex(d),u=t.isNullOrUndefined(o)||t.isNullOrUndefined(o.field)||""==o.field?null:o.field,m=t.isNullOrUndefined(r.field)||""==r.field?null:r.field,n.helper.remove(),(p=e(i.dropTarget).clone()).find(".e-number").remove(),t.isNullOrUndefined(u)||t.isNullOrUndefined(m)?s.reorderColumns(a,d):(e(i.dropTarget).hasClass("e-droppable")?(p=p.children(".e-headercelldiv"),g=e(i.dropTarget).children(".e-headercelldiv")):(p=e(i.dropTarget).parent(),g=e(i.dropTarget),e(g).hasClass("e-filtericon")&&(g=p=e(g).siblings(".e-headercelldiv"))),f=s.model.allowSorting&&s.model.allowMultiSorting?i.dropTarget.hasClass("e-number")||i.dropTarget.hasClass("e-icon")?s.getColumnByField(e.trim(p.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))):i.dropTarget.hasClass("e-icon")&&!i.dropTarget.hasClass("e-filtericon")?s.getColumnByField(e.trim(p.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))),s.reorderColumns(o.field,f.field)))}})},dragHeaderElement:function(){var i,s=this,n=this.element.children("div.e-gridheader").find("th.e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),l=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2});n.ejDraggable({cursorAt:{top:-50,left:-2},helper:function(t){var n,o,r,a;return s.element.find(".e-dragclone").length>0&&s.element.find(".e-dragclone").remove(),o=(n=e(t.element).hasClass("e-headercell")?e(t.element):e(t.element).closest("th")).find(".e-headercelldiv"),r=e(t.element).index(),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?r-=s.model.groupSettings.groupedColumns.length:(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(r-=1),i=s.getColumnByIndex(r),s._$curSElementTarget=o,s.model.allowSorting&&s.model.allowMultiSorting?((a=e(n).clone()).find(".e-number").remove(),l.text(a.text()).clone().width(n.outerWidth()+2).height(n.height()+2).css({"font-size":parseInt((n.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)):l.text(n.text()).clone().width(n.outerWidth()+2).height(n.height()+2).css({"font-size":parseInt((n.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)},dragStart:function(t){var n,l,o=t.target,r=e(o),a={target:o,draggableType:"headercell",column:i},d=!1;return s.model.groupSettings.showToggleButton&&i&&i.allowGrouping&&(n=e.inArray(i.field,s.model.groupSettings.groupedColumns),l=e(t.element).find(".e-togglegroupbutton").hasClass("e-togglegroup"),(-1!=n&&l||-1==n&&!l)&&(d=!0)),null!=s._resizer&&s._resizer._expand||d||r.eq(0).hasClass("e-filtericon")||i&&0==i.allowGrouping&&0==i.allowReordering?(e(".e-dragclone").remove(),!1):(s._dragActive=!0,s.model.allowGrouping&&s.expandGroupDropArea(),!s._trigger("columnDragStart",a)&&void 0)},drag:function(t){var n=e(t.target),l={target:n,draggableType:"headercell",column:i};if(s._trigger("columnDrag",l))return!1;n.closest(".e-grid").attr("id")===s._id&&(s.getHeaderTable().find(".e-headercell").removeClass("e-reorderindicate"),!s.model.allowReordering||!(n.hasClass("e-headercelldiv")||n.hasClass("e-headercell"))||n.hasClass("e-detailheadercell")||n.hasClass("e-stackedHeaderCell")||n.parent().hasClass("e-grouptopleftcell")||(document.body.style.cursor="",n.addClass("e-allowDrop"),s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),n.hasClass("e-headercell")?n.addClass("e-reorderindicate"):n.parent().addClass("e-reorderindicate")),n.hasClass("e-groupdroparea")||n.closest(".e-groupdroparea").length?(document.body.style.cursor="",n.addClass("e-allowDrop")):document.body.style.cursor="not-allowed")},dragStop:function(t){if(!t.element.dropped){var n={target:e(t.target),draggableType:"headercell",column:i};s._trigger("columnDrop",n),s.element.find(".e-groupdroparea").removeClass("e-hover"),s.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),e(".e-dragclone").remove(),s._dragActive=!1,s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),s.model.allowGrouping&&s.collapseGroupDropArea(),document.body.style.cursor="",e(s._Indicator).css("display","none")}}})},_groupHeaderCelldrag:function(){var i=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2}),s=this;this.element.children(".e-groupdroparea").find(".e-groupheadercell").ejDraggable({cursorAt:{top:-35,left:-2},helper:function(t){var n=e(t.sender.target).closest(".e-grid-icon");return i.text(e(t.sender.target).closest(".e-groupheadercell").text()).clone().width(n.width()+2).height(n.height()+2).addClass("e-dragclone").appendTo(s.element)},dragStart:function(e){var t,i=e.target;return e.model.cursorAt={top:-35,left:-2},t={target:i,draggableType:"groupheadercell"},!s._trigger("columnDragStart",t)&&void 0},drag:function(t){e(".Sibling").remove();var i=e(t.target),n={target:i,draggableType:"groupheadercell"};if(s._trigger("columnDrag",n))return!1;i.closest("div.e-gridcontent").length?(document.body.style.cursor="",i.addClass("e-allowDrop")):document.body.style.cursor="not-allowed"},dragStop:function(t){if(!t.element.dropped){var i={target:e(t.target),draggableType:"groupheadercell"};s._trigger("columnDrop",i),e(".e-dragclone").remove(),document.body.style.cursor=""}}}),this.element.children(".e-gridcontent, .e-gridheader").ejDroppable({accept:s.element.children("div.e-groupdroparea").find(".e-groupheadercell"),drop:function(i,n){if(!t.isNullOrUndefined(n.helper)&&n.helper.is(":visible")&&n.draggable.hasClass("e-groupheadercell")){var l=e(n.draggable[0]).find("div").attr("ej-mappingname");n.helper.remove(),t.isNullOrUndefined(l)||s.ungroupColumn(l)}}})},_rowsDragAndDrop:function(){this.dragRowElement();var i=this.getContentTable(),s=this;i.ejDroppable({accept:i,drop:function(i,n){var l,o,r,a,d,h,c=e(i.dropTarget).closest("tr");if(!n.helper.find("tr.e-srcgridinfo").length||(s._draggedGridID=n.helper.find("tr.e-srcgridinfo").children("td").text(),(l=s._draggedGridID!=s._id?e("#"+s._draggedGridID).ejGrid("instance"):s)._id!=s._id&&l.model.rowDropSettings.dropTargetID!="#"+s._id))return!1;var u=l.getSelectedRecords(),m=o=s.getIndexByRow(c);if(-1==m&&(m=o=0),d={target:c,targetIndex:m=m+s.model.pageSettings.currentPage*s.model.pageSettings.pageSize-s.model.pageSettings.pageSize,draggedRecords:u,dropDetails:r={sourceID:l._id,destinationID:s._id,destinationRowIndex:m}},!s._trigger("beforeRowDrop",d))if(a=s._dataSource()instanceof t.DataManager?s._dataSource().dataSource:s._dataSource(),t.isNullOrUndefined(s.model.rowDropSettings.dropMapper)||(t.isNullOrUndefined(a.headers)&&(a.headers=[]),a.headers.push({rowDropDetails:JSON.stringify(r)})),s._id!=l._id){s._dataManager,s._dataSource().adaptor;var p=l.getBatchChanges();p.deleted=u,d={dropDetails:r,records:u,requestType:t.Grid.Actions.Refresh,targetIndex:m,action:"rowDragged"},s._processDropRequest(l,p,"drag",d),(h=s.getBatchChanges()).added=u,d.action="rowDropped",s._processDropRequest(s,h,"drop",d)}else s._draggedGridID==s._id&&s.reorderRows(l.selectedRowsIndexes,o)}})},dragRowElement:function(){var i=this;e(this.getRows()).ejDraggable({cursorAt:{top:-8,left:-8},helper:function(s){var n,l,o,r,a;return this.clone=!0,n=e(s.sender.target).closest("tr"),!(i._selectDrag||!n.length||-1==e.inArray(i.model.editSettings.showAddNewRow?n[0].rowIndex-1:n[0].rowIndex,i.selectedRowsIndexes))&&((l=t.buildTag("div.e-cloneproperties e-draganddrop e-grid","",{height:"auto","z-index":2,position:"absolute",width:i.element.width()})).append(t.buildTag("table","",{width:i.element.width()})),r=e(i.getRows()).clone().removeClass(),o=e.map(r,function(t,s){if(-1!=e.inArray(s,i.selectedRowsIndexes))return t}),a=t.buildTag("tr.e-srcgridinfo e-grid","",{display:"none",height:"auto"}).append("<td>"+i._id+"</td>"),o.push(a[0]),e(o).find("td").removeClass("e-selectionbackground e-active"),l.find("table").append(o),e(s.sender.target).closest("td").hasClass("e-selectionbackground")||l.css("display","none"),l.addClass("e-dragclone").appendTo(i.element))},dragStart:function(t){if(i._selectDrag||-1==e.inArray(i.model.editSettings.showAddNewRow?e(t.target).closest("tr")[0].rowIndex-1:e(t.target).closest("tr")[0].rowIndex,i.selectedRowsIndexes))return!1;var s=t.target,n={target:i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),currentTarget:s,draggableType:"rows",data:i.getSelectedRecords()};return!i._trigger("rowDragStart",n)&&void 0},drag:function(t){var s,n=e(t.target),l={target:i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),currentTarget:n,draggableType:"rows",data:i.getSelectedRecords()};if(i._trigger("rowDrag",l))return!1;document.body.style.cursor="not-allowed",s=e(i.model.rowDropSettings.dropTargetID),(n.closest(i.model.rowDropSettings.dropTargetID).length||n.closest("#"+i._id).length)&&(n.closest(".e-grid").length&&(n.closest(".e-rowcell").length||n.closest(".emptyrecord").length)?n.closest("table").addClass("e-allowRowDrop"):s.hasClass("e-grid")||s.addClass("e-allowRowDrop"))},dragStop:function(t){var s,n;if(!t.element.dropped){var l=e(t.target),o=i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),r=i.getSelectedRecords();if(e(".e-dragclone").remove(),document.body.style.cursor="",(s=e(i.model.rowDropSettings.dropTargetID)).hasClass("e-grid")?s.find(".e-gridcontent").find("table").removeClass("e-allowRowDrop"):s.removeClass("e-allowRowDrop"),i.getContent().find("table").removeClass("e-allowRowDrop"),n={rows:o,target:l,draggableType:"rows",data:r},i._trigger("rowDrop",n))return!1}}})},_processDropRequest:function(i,s,n,l){var o,r=i._dataManager.dataSource.batchUrl;i._dataManager.dataSource.batchUrl=i.model.rowDropSettings[n+"Mapper"],o=i._dataManager.saveChanges(s,i._primaryKeys[0],i.model.query._fromTable),e.isFunction(o.promise)&&null!=i._dataManager.dataSource.batchUrl?(e("#"+i._id).data("ejWaitingPopup").show(),o.done(function(){i._isLocalData&&"drop"==n&&(l.dropDetails.sourceID==l.dropDetails.destinationID?i._moveDroppedRowIndex(l.targetIndex,l.records,l.draggedRowIndexes):i._moveDroppedRowIndex(l.targetIndex,l.records)),"drop"==n&&(i._dataSource()instanceof t.DataManager?i._dataSource().dataSource.headers.pop():i._dataSource().headers.pop()),i._dataManager.dataSource.batchUrl=r,i.refreshBatchEditChanges(),e("#"+i._id).data("ejWaitingPopup").hide(),i._processBindings(l)}),o.fail(function(t){i._dataManager.dataSource.batchUrl=r,e("#"+i._id).data("ejWaitingPopup").hide(),l.error=t&&t.error?t.error:t,i._trigger("actionFailure",l)})):(i.refreshBatchEditChanges(),i._dataManager.dataSource.batchUrl=r,"drop"==n&&i._moveDroppedRowIndex(l.targetIndex,l.records),l.dropDetails.sourceID==l.dropDetails.destinationID&&"drag"==n||i._processBindings(l))},reorderRows:function(e,i){var s,n,l;if(!this.model.sortSettings.sortedColumns.length)if(s=this.getSelectedRecords(),this.selectedRowsIndexes=[],n={requestType:t.Grid.Actions.Refresh,action:"rowReordering",draggedRowIndexes:e,targetIndex:i,dropDetails:{sourceID:this._id,destinationID:this._id,DestinationRowIndex:i},records:s},t.isNullOrUndefined(this.model.rowDropSettings.dropMapper)){if(this._trigger("actionBegin",n))return!1;this._moveDroppedRowIndex(i,s,e),this._trigger("actionComplete",n)}else(l=this.getBatchChanges()).changed=s,this._processDropRequest(this,l,"drop",n)},_moveDroppedRowIndex:function(i,s,n){var l,o,r,a;if(t.isNullOrUndefined(n)){if(i>-1)for(r=this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource(),i+this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,a=0;a<s.length;a++)r.splice(i++,0,r.splice(r.length-s.length+a,1)[0])}else{n=n.sort(function(e,t){return e-t});var d,h,c=i,u=0,m=this.model.currentViewData.slice(),p=this.getRowByIndex(i);for(i+=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,a=0;a<n.length;a++)r=m[n[a]],h=n[a]-u,d=0,l=this._excludeDetailRows(),o=e(l[h]),c>h&&u++,this.model.allowPaging&&(d=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize),h=d+h,this.selectedRowsIndexes.push(c-u),a==n.length-1&&(this.model.selectedRowIndex=this.selectedRowsIndexes[0]),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o.next().hasClass("e-detailrow")&&(o=o.add(o.next()[0])),p.before(o),c<n[a]-u?c++:i--,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(i+a,0,this._dataSource().dataSource.json.splice(h,1)[0]):this._dataSource().splice(i+a,0,this._dataSource().splice(h,1)[0]),this.model.currentViewData.splice(i+a-d,0,this.model.currentViewData.splice(h-d,1)[0])}}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.selection={selectRows:function(s,n,l){var o,r,a,d,h,c,u,m,p,g,f,_,v,b,w,C,y,S,x,T,k,D,I;if(!this._allowrowSelection)return!1;if(this._traverseRow!=s&&e(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,o=[],this.initialRender&&(this.model.currentIndex=s),this.model.scrollSettings.enableVirtualization&&(e.isArray(s)?this.model.currentIndex=s[0]:n&&(this.model.currentIndex=s>n?n:s)),!this.multiSelectCtrlRequest&&this.model.scrollSettings.allowVirtualScrolling&&(this._virtuaOtherPage?this._virtualScrollingSelection=!0:(this.clearSelection(),this._virtualScrollingSelection=!1)),e.isArray(s)&&(s=(o=s)[0],this._virtaulSel=[],this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization))for(this._virtualScrollingSelection=!0,this._virtualSelectedRows=o,r=parseInt(s/this.model.pageSettings.pageSize)*this.model.pageSettings.pageSize,y=(parseInt(s/this.model.pageSettings.pageSize)+1)*this.model.pageSettings.pageSize,this._virtaulSel.push(s),this._virtuaOtherPage||(this._virtaulUnSel=[]),C=1;C<o.length;C++)r<o[C]&&o[C]<y?this._virtaulSel.push(o[C]):this._virtaulUnSel.push(o[C]);g=e(this.getRows()),!this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||0!=this.model.scrollSettings.frozenColumns||0!=this.model.scrollSettings.frozenRows||(a=g.eq(s)[0],this.getScrollObject().scrollTop()+this.getScrollObject().content()[0].clientHeight<a.offsetTop+a.offsetHeight&&(d=t.isNullOrUndefined(a)?" ":a.offsetTop,this.getScrollObject().scrollY(d))),I={},u=this._currentPage()-1,t.isNullOrUndefined(s)||("batch"==this.model.editSettings.editMode&&e(g[s]).hasClass("e-insertedrow")?(m=this.batchChanges.added.reverse()[s],this.batchChanges.added.reverse()):m="batch"==this.model.editSettings.editMode?this._currentJsonData[s-this.batchChanges.added.length]:this._currentJsonData[t.isNullOrUndefined(s)?n:s]);var O=s,A=this._previousIndex,L=this.getRowByIndex(this._previousIndex);if(this.model.scrollSettings.allowVirtualScrolling)if(this.model.scrollSettings.enableVirtualization){var R=this._virtualRowCount,E=Math.ceil((s+1)/R),N=E>1?this._virtualRowCount:0;if(this.initialRender||E!=this._currentVirtualIndex&&!l?(this._isThumbScroll=!0,this._refreshVirtualView(E),s=0!=s?s%this._virtualRowCount+N:s):(s>3*this._virtualRowCount||l?(S=this._getSelectedViewData(s,l).viewIndex,b=s%this._virtualRowCount,O=S*this._virtualRowCount-(this._virtualRowCount-b)):s=s%this._virtualRowCount+N,s!=O||l||(s=0!=s?s%this._virtualRowCount+N:s)),o.length)for(C=0;C<o.length;C++)S=this._getSelectedViewData(o[C]).viewIndex,-1!=e.inArray(S,this._currentLoadedIndexes)&&this._virtaulSel.push(o[C]),this._virtualSelectedRecords[o[C]]||(this._virtualSelectedRecords[o[C]]=this._getSelectedViewData(o[C]).data);m=this._getSelectedViewData(s,l,E).data,A=this._prevSelIndex,L=this._prevSelRow}else{var M=this.model.pageSettings.pageSize,P=this.getRowByIndex(s).attr("name"),F=t.isNullOrUndefined(P)?s:parseInt(P)/M+1,j=s%M,z=parseInt(s/M),$=z*M;if(!t.isNullOrUndefined(z)&&z>0&&-1==e.inArray($,this.virtualLoadedPages)&&t.isNullOrUndefined(l))if(j--,this._virIndex=!0,this._virtualTrIndex=j,this.gotoPage(z+1),p=this,this._dataSource()instanceof t.DataManager){if(this._queryPromise.done(function(e){var t;p._virtuaOtherPage=!0,p._virtualdata=p._currentJsonData,p._pageTo=z,p._virtualScrollingSelection&&(p._virtualSelRecords=e.virtualSelectRecords);var i=parseInt(s/p.model.pageSettings.pageSize)*p.model.pageSettings.pageSize,n=(parseInt(s/p.model.pageSettings.pageSize)+1)*p.model.pageSettings.pageSize,l=[];for(l.push(s),t=1;t<o.length;t++)i<o[t]&&o[t]<n&&l.push(o[t]);return p.selectRows(l),!1}),p._virtualScrollingSelection)return}else{if(p._virtualdata=p._currentJsonData,o.length>0)for(p._virtualSelRecords=[],C=0;C<o.length;C++)p._virtualSelRecords.push(this.model.dataSource[o[C]]);p._pageTo=z}for(this._virtuaOtherPage&&(this._virtuaOtherPage=!1),C=0;C<this._loadedJsonData.length;C++)this._loadedJsonData[C].pageIndex==F&&(c=this._loadedJsonData[C].data);m=t.isNullOrUndefined(c)?this._currentJsonData[j]:c[j],m=this._virtualScrollingSelection?this._virtualSelRecords:m,$=this._pageTo*M,!t.isNullOrUndefined(this._virtualdata)&&this._virtualdata.length>0?(s=e(document.getElementsByName($)[j]).index(),m=this._virtualdata[j],this._virtualdata=[]):e(document.getElementsByName(z*M)).length>0&&!t.isNullOrUndefined(this._pageTo)&&(s=e(document.getElementsByName(z*M)[s%M]).index())}if(I={rowIndex:O,row:g.eq(s),data:m,target:l,prevRow:L,prevRowIndex:A},!this._trigger("rowSelecting",I)){if(l&&l.hasClass("e-checkselectall")&&this._isLocalData&&this._isMapSelection)return this._headerCheckUpdateAll(!l[0].checked);if(g=e(this.getRows()),this._isMapSelection&&!this._selectionByGrid&&t.isNullOrUndefined(n)&&!o.length)return m[this._selectionMapColumn]=!I.row.find(".e-checkcelldiv input").prop("checked"),void this.updateRecord(this._primaryKeys[0],m,"update");if((this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this.model.isEdit&&this.model.enableAutoSaveOnSelectionChange&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||0!=this.getContentTable().find(".e-editedrow").length)){if(this.endEdit())return;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")}if(this._checkSelectedRowsIndexes[u]!=i||this._isMapSelection||(this._checkSelectedRowsIndexes[u]=[]),o.length>0){for(C=0;C<o.length;C++)-1==this.selectedRowsIndexes.indexOf(o[C])&&this.selectedRowsIndexes.push(o[C]),this._isMapSelection&&!this._selectionByGrid&&((k=this._currentJsonData[o[C]])[this._selectionMapColumn]=!0,this.batchChanges.changed.push(k));if(!this.model.scrollSettings.enableVirtualization)for(f=this._virtaulSel[0]-s,C=0;C<this._virtaulSel.length;C++)this._virtaulSel[C]-=f;if(rows=this.getRowByIndex(this.model.scrollSettings.allowVirtualScrolling?this._virtaulSel:o),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this._enableCheckSelect&&!this._isMapSelection&&e(rows).find(".e-checkcelldiv input").prop("checked","checked"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._isMapSelection&&!this._selectionByGrid)return void this.batchSave()}else if(t.isNullOrUndefined(n)||t.isNullOrUndefined(s))switch(O=s=t.isNullOrUndefined(s)?n:s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){this.model.selectedRecords=[],-1!=(_=e.inArray(O,this.selectedRowsIndexes))&&!this._isMapSelection&&this.clearSelection(O,l)&&this.selectedRowsIndexes.splice(_,0),-1==_&&(this.selectedRowsIndexes.push(O),(v=this.getRowByIndex(s)).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[O]=this._getSelectedViewData(s,l).data:this._virtualSelectAction(F,s,M),this._enableCheckSelect&&l&&!l.parent().hasClass("e-checkcelldiv")&&v.find(".e-checkcelldiv input").prop("checked","checked")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords());break}case t.Grid.SelectionType.Single:this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},this.selectedRowsIndexes.push(O),this.getRowByIndex(s).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[O]=m:this._virtualSelectAction(F,s,M),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&this.getRowByIndex(s).find(".e-checkcelldiv [type=checkbox]").prop("checked",!0)}else if(this.model.selectionType==t.Grid.SelectionType.Multiple&&(this._isMapSelection||this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},$toIndex=n,this._virtualUnSel=[],this._virtualUnSelIndexes=[],this._isMapSelection||!(l&&l.hasClass("e-checkselectall")&&l[0].checked))){for(this.model.scrollSettings.enableVirtualization&&l&&(S=this._getSelectedViewData(n,l).viewIndex,b=n%this._virtualRowCount,$toIndex=S*this._virtualRowCount-(this._virtualRowCount-b),O!=this._prevSelIndex&&(O=this._prevSelIndex)),h=O-$toIndex<0,this.model.scrollSettings.enableVirtualization||(rows=h?this.getRowByIndex(s,n+1):this.getRowByIndex(n,s+1)),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),w=[],C=h?O:$toIndex,y=h?$toIndex:O;C<=y;C++)this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualSelectedRecords[C]=this._getSelectedViewData(C).data,S=this._getSelectedViewData(C).viewIndex,-1!=e.inArray(S,this._currentLoadedIndexes)?(x=this._currentLoadedIndexes.indexOf(S),0==(T=C%this._virtualRowCount+x*this._virtualRowCount)&&this._virtualRowCount,w.push(T)):(this._virtualUnSel.push(C),-1==e.inArray(S,this._virtualUnSelIndexes)&&this._virtualUnSelIndexes.push(S))):(P=this.getRowByIndex(C).attr("name"),F=t.isNullOrUndefined(P)?s:parseInt(P)/M+1,this._virtualSelectAction(F,C,M))),this.selectedRowsIndexes.push(C),this._isMapSelection&&!this._selectionByGrid&&((k=this._currentJsonData[C])[this._selectionMapColumn]=!0,this.batchChanges.changed.push(k));if(this._isMapSelection)return void this.batchSave();this.model.scrollSettings.enableVirtualization&&(rows=this.getRowByIndex(w[0],w[w.length-1]+1)),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&e(rows).find(".e-checkcelldiv input").prop("checked","checked")}this._enableCheckSelect&&(this._checkSelectedRowsIndexes[u]=this.selectedRowsIndexes,this._selectAllCheck||(this.selectedRowsIndexes.length==this._currentJsonData.length?this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked","checked"):this._selectionByGrid&&this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked",!1))),this._selectedRow()!==O&&this._selectedRow(O),l&&l.hasClass("e-checkselectall")&&!this._isMapSelection&&(D=this,this._checkSelectedRowsIndexes=l.is(":checked")?[]:e.map(Array(this.model.pageSettings.totalPages),function(){return Array(e.map(Array(D.model.pageSettings.pageSize),function(e,t){return t}))})),m=this._virtualScrollingSelection?this._virtualSelRecords:m,I={rowIndex:this.model.scrollSettings.enableVirtualization?O:this._selectedRow(),row:this.getRowByIndex(this._selectedRow()),data:m,target:l,prevRow:L,prevRowIndex:A},this._previousIndex=this.selectedRowsIndexes.length?s:this._previousIndex,this.model.scrollSettings.enableVirtualization&&(this._prevSelIndex=O,this._prevSelRow=this.getRowByIndex(s)),e(this.getRowByIndex(s)).is('[role="row"]')&&this._trigger("rowSelected",I)}},_selectingMultipleRows:function(e){this._modelMultiSelectedIndexes=e,this.clearSelection(),this.multiSelectCtrlRequest=!0;for(var t=0;t<e.length;t++)this.selectRows(e[t]);this.multiSelectCtrlRequest=!1,this.model.selectedRowIndices=this._modelMultiSelectedIndexes,this._modelMultiSelectedIndexes=[]},_virtualSelectAction:function(e,i,s){this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(i)&&(this._virtualSelectedRecords[i]=t.isNullOrUndefined(this._virtualLoadedRecords[e])?this._currentJsonData[i%s]:this._virtualLoadedRecords[e][i%s])},_getSelectedViewData:function(t,i,s){var n,l,o=t%this._virtualRowCount,r={};return n=i?parseInt(e(i).closest("tr").attr("name"),32):s||(t>1?Math.ceil((t+1)/this._virtualRowCount):1),r.viewIndex=n,this._virtualLoadedRecords[n]&&(r.data=this._virtualLoadedRecords[n][o]),l=t%this._virtualRowCount,r.rowIndex=n*this._virtualRowCount-(this._virtualRowCount-l),r},selectCells:function(s){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v;if(!this._allowcellSelection)return!1;if(n=null,r=this._excludeDetailRows(),n=this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]):r.eq(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")"),t.isNullOrUndefined(this._previousRowCellIndex)||0==this._previousRowCellIndex.length||(this.model.scrollSettings.enableVirtualization?(l=this._prevRowCell,o=this._preVirRowCellIndex):(l=e(this.getRowByIndex(this._previousRowCellIndex[0][0]).find(".e-rowcell:eq("+this._previousRowCellIndex[0][1]+")")),o=this._previousRowCellIndex)),a=this._currentJsonData[s[0][0]],d=s[0][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(h=this._getSelectedViewData(s[0][0],n)).data,d=h.rowIndex),v={currentCell:n,cellIndex:s[0][1],data:a,previousRowCellIndex:o,previousRowCell:l},"multiple"==this.model.selectionType&&(v.isCtrlPressed=this.multiSelectCtrlRequest,v.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("cellSelecting",v)){switch(this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){-1!=(_=e.inArray(d,this._rowIndexesColl))?this.selectedRowCellIndexes[_].cellIndex.push(parseInt(s[0][1].toString())):(-1==e.inArray(d,this._rowIndexesColl)&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]})),n.addClass("e-cellselectionbackground e-activecell");break}if(this.multiSelectShiftRequest&&this._previousRowCellIndex!=i){this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[];var b=this._previousRowCellIndex[0][0],w=parseInt(this._previousRowCellIndex[0][1]),C=s[0][0],y=parseInt(s[0][1]);if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(b=this._preVirRowCellIndex[0][0],C=this._getSelectedViewData(C,this.getRowByIndex(C).find(".e-rowcell")).rowIndex),k=[],"box"==this.model.selectionSettings.cellSelectionMode){this.model.scrollSettings.frozenColumns?this.getRows()[0].length:this.getRows().length;var S=w<y?w:y,x=S==y?w:y,T=[],k=[];for(m=S;m<=x;m++){if((c=b)<(u=C))for(g=c;g<=u;g++)-1==e.inArray(g,T)&&T.push(g),this._selectMultipleCells(g,m,y,w);else for(g=u;g<=c;g++)-1==e.inArray(g,T)&&T.push(g),this._selectMultipleCells(g,m,y,w);k.push(m)}for(m=0;m<T.length;m++)this.selectedRowCellIndexes.push({rowIndex:T[m],cellIndex:k});this._rowIndexesColl=t.distinct(T)}else if(C>b)for(m=b;m<=C;m++){for(k=[],c=m==b?w:0,u=m==C?y:this.model.columns.length-1,g=c;g<=u;g++)k.push(g),this._selectMultipleCells(m,g,y,w);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:k}),this._rowIndexesColl.push(m)}else for(m=b;m>=C;m--){if(k=[],(c=m==b?w:this.model.columns.length-1)>(u=m==C?y:0))for(g=c;g>=u;g--)k.push(g),this._selectMultipleCells(m,g,y,w);else for(g=u;g>=c;g--)k.push(g),this._selectMultipleCells(m,g,y,w);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:k}),this._rowIndexesColl.push(m)}break}for(this.clearCellSelection(),this._virtualRowCellSelIndex=[],m=0;m<s.length;m++)if(s[m][1].length>1)for(p=r.eq(s[m][0]).find(".e-rowcell"),this.model.scrollSettings.frozenColumns&&(p=e(r[0]).eq(s[m][0]).find(".e-rowcell").add(e(r[1]).eq(s[m][0]).find(".e-rowcell"))),g=0;g<p.length;g++)f=null!=this.model.detailsTemplate||null!=this.model.childGrid?p[g].cellIndex-1:g,-1!=e.inArray(f,s[m][1])&&(e(p[g]).addClass("e-cellselectionbackground e-activecell"),-1!=(_=e.inArray(s[m][0],this._rowIndexesColl))?this.selectedRowCellIndexes[_].cellIndex.push(p[g].cellIndex):(d=s[m][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(a=(h=this._getSelectedViewData(d,p)).data,d=h.rowIndex),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:[p[g].cellIndex]}),this._rowIndexesColl.push(s[m][0])));else this.model.scrollSettings.frozenColumns?this._frozenCell(s[m][0],s[m][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[m][0]).find(".e-rowcell:eq("+s[m][1]+")")).addClass("e-cellselectionbackground e-activecell"),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[m][1]}),this._rowIndexesColl.push(d);break;case t.Grid.SelectionType.Single:this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[],this._virtualRowCellSelIndex=[],-1==e.inArray(d,this._rowIndexesColl)&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]}),this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")")).addClass("e-cellselectionbackground e-activecell")}v={currentCell:n,cellIndex:s[0][1],data:a,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCellIndex:o,previousRowCell:l},(!this.multiSelectShiftRequest||t.isNullOrUndefined(this._previousRowCellIndex))&&(this._previousRowCellIndex=s,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._preVirRowCellIndex=e.extend(!0,[],s),this._preVirRowCellIndex[0][0]=d),this._prevRowCell=n),this._trigger("cellSelected",v)}},_selectMultipleCells:function(t,i){var s,n,l;this.model.scrollSettings.frozenColumns?this._frozenCell(t,i).addClass("e-cellselectionbackground e-activecell"):this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(s=this._getSelectedViewData(t).viewIndex,-1!=e.inArray(s,this._currentLoadedIndexes)&&(n=this._currentLoadedIndexes.indexOf(s),l=t%this._virtualRowCount+n*this._virtualRowCount,e(this.getRowByIndex(l).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell"),-1==e.inArray(t,this._virtualRowCellSelIndex)&&-1!=e.inArray(t,this._rowIndexesColl)&&t!=this._preVirRowCellIndex[0][0]&&this._virtualRowCellSelIndex.push(t))):e(this.getRowByIndex(t).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell")},selectColumns:function(s,n){var l,o,r,a,d,h;if(!this._allowcolumnSelection)return!1;this._allowcolumnSelection=!0;var c=this.getRows(),u=this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[this._previousColumnIndex],m={columnIndex:s==i?n:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[s]),column:this.model.columns[s],previousColumnIndex:this._previousColumnIndex,prevColumnHeaderCell:u},p=this._previousColumnIndex;if(this._previousColumnIndex=1==(m.isShiftPressed=this.multiSelectShiftRequest)?s==i?n:s:n,"multiple"==this.model.selectionType&&(m.isCtrlPressed=this.multiSelectCtrlRequest,m.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("columnSelecting",m)){if(t.isNullOrUndefined(n)||t.isNullOrUndefined(s))switch(s=t.isNullOrUndefined(s)?n:s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){if(-1!=(l=e.inArray(s,this.selectedColumnIndexes))&&this.clearColumnSelection(s)&&this.selectedColumnIndexes.splice(l,0),-1==l){if(this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,s);else for(d=0;d<c.length;d++)e(c[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}break}case t.Grid.SelectionType.Single:if(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.selectedColumnIndexes=[],this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,s);else for(d=0;d<c.length;d++)e(c[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}else if(this.model.selectionType==t.Grid.SelectionType.Multiple)if(this.clearColumnSelection(),this.selectedColumnIndexes=[],o=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++s,++n,o=1),r=s>n?n:s,a=s>n?s+1:n+1,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,r,a);else for(d=r;d<a;d++){for(h=0;h<c.length;h++)e(c[h].cells[d]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[d]).addClass("e-columnselection"),this.selectedColumnIndexes.push(d-o)}m={columnIndex:s==i?n:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th").not(".e-detailheadercell")[s]),column:this.model.columns[s],selectedColumnIndex:this.selectedColumnIndexes,previousColumnIndex:p,prevColumnHeaderCell:u},this._trigger("columnSelected",m)}},clearSelection:function(i,s){var n,l,o,r,a=i;return this._selectedRow()>=-1&&(n=this.model.scrollSettings.frozenColumns||!t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?this._excludeDetailRows():e(this.element.find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(n.removeAttr("aria-selected").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-selectionbackground").removeClass("e-active"),this._clearVirtualSelection||(this.selectedRowsIndexes=[],this.model.selectedRecords=[],this.model.selectedRowIndices=[]),this._selectionByGrid||(n.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&this._headerCheckUpdateAll(!1),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))):(this.getRowByIndex(i).removeAttr("aria-selected").find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active"),l=this.getRowByIndex(i),this.model.scrollSettings.enableVirtualization&&this.multiSelectCtrlRequest&&-1==e.inArray(i,this.selectedRowsIndexes)&&(i=parseInt(l.attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-l.index()%this._virtualRowCount)),-1!=(i=e.inArray(i,this.selectedRowsIndexes))&&this.selectedRowsIndexes.splice(i,1),this._enableCheckSelect&&!s&&l.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&(this._selectionByGrid||t.isNullOrUndefined(i)||-1==i||((o=this._currentJsonData[a])[this._selectionMapColumn]=!1,this.updateRecord(this._primaryKeys[0],o,"update")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))),this._enableCheckSelect&&(this.selectedRowsIndexes.length==this._currentJsonData.length||this._selectAllCheck||this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall").prop("checked",!1),r=this._currentPage()-1,checkBoxIndex=e.inArray(a,this._checkSelectedRowsIndexes[r]),-1!=checkBoxIndex&&this._checkSelectedRowsIndexes[r].splice(i,1),this.selectedRowsIndexes.length||this._isMapSelection||s||(this._checkSelectedRowsIndexes[r]=[],n.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1))),this.selectedRowsIndexes.length||this._selectedRow(-1)),!0},_excludeDetailRows:function(){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)||this.model.scrollSettings.frozenColumns?this.model.scrollSettings.frozenColumns>0&&null!=this.getRows()&&this.getRows().length>1?e(this.getRows()[0]).not(".e-detailrow,.e-gridSummaryRows").add(e(this.getRows()[1]).not(".e-detailrow,.e-gridSummaryRows")):e(this.getRows()):e(this.getRows()).not(".e-detailrow,.e-gridSummaryRows")},clearCellSelection:function(i,s){var n,l,o;if(this._allowcellSelection)if(n=t.isNullOrUndefined(i)&&t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?e(this.element.find(".e-cellselectionbackground")).parent():this._excludeDetailRows(),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(n=e(n[0]).add(n[1])),n.find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-cellselectionbackground").removeClass("e-activecell"),this.selectedRowCellIndexes=[],this._rowIndexesColl=[];else{for(o=0;o<this.selectedRowCellIndexes.length;o++)if(this.selectedRowCellIndexes[o].rowIndex==i){l=e.inArray(s,this.selectedRowCellIndexes[o].cellIndex),this.model.scrollSettings.frozenColumns?this._frozenCell(i,s).removeClass("e-cellselectionbackground").removeClass("e-activecell"):n.eq(i).find(".e-rowcell").eq(s).removeClass("e-cellselectionbackground").removeClass("e-activecell");break}o!=this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[o].cellIndex.splice(l,1),0==this.selectedRowCellIndexes[o].cellIndex.length&&(this.selectedRowCellIndexes.splice(o,1),this._rowIndexesColl.splice(e.inArray(i,this._rowIndexesColl),1)))}return!0},clearColumnSelection:function(i){var s,n,l,o,r;if(this._allowcolumnSelection)if(s=e(this._excludeDetailRows()),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(s=e(s[0]).add(s[1])),s.find(".e-rowcell").removeClass("e-columnselection"),e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")).removeClass("e-columnselection"),this.selectedColumnIndexes=[];else{if(n=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++i,n=1),this.model.scrollSettings.frozenColumns)for(l=0,currentIndex=i,i>=this.model.scrollSettings.frozenColumns&&(l=1,currentIndex=i-this.model.scrollSettings.frozenColumns),o=0;o<s[l].length;o++)e(s[l][o].cells[currentIndex]).removeClass("e-columnselection");else for(r=0;r<s.length;r++)e(s[r].cells[i]).removeClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[i]).removeClass("e-columnselection"),this.selectedColumnIndexes.splice(0,i-n)}return!0},getSelectedRows:function(){for(var t=e(),i=0;i<this.selectedRowsIndexes.length;i++)this.model.scrollSettings.frozenColumns>0?(t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]),t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[1])):t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]);return t},getSelectedRecords:function(){var t,i,s=[];if($gridRows=this.getRows(),this._virtualScrollingSelection)return this._virtualSelRecords;for(t=0;t<this.selectedRowsIndexes.length;t++)-1!=this.selectedRowsIndexes[t]&&("batch"==this.model.editSettings.editMode&&e($gridRows[this.selectedRowsIndexes[t]]).hasClass("e-insertedrow")?(i=this.batchChanges.added.reverse(),s.push(i[this.selectedRowsIndexes[t]]),this.batchChanges.added.reverse()):this.model.scrollSettings.allowVirtualScrolling?s.push(this._virtualSelectedRecords[this.selectedRowsIndexes[t]]):"batch"==this.model.editSettings.editMode?s.push(this._currentJsonData[this.selectedRowsIndexes[t]-this.batchChanges.added.length]):s.push(this._currentJsonData[this.selectedRowsIndexes[t]]));return s},_setCurrentRow:function(e){(e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Sorting||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Save||e==t.Grid.Actions.Cancel||e==t.Grid.Actions.Paging)&&(this._selectedRow(-1),this._virtualDataRefresh||(this.selectedRowsIndexes=[]))},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),this.model.selectionType==t.Grid.SelectionType.Multiple&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function(e,t,s){t.gridFeatures=t.gridFeatures||{},t.widget("ejGrid","ej.Grid",{_rootCSS:"e-grid",element:null,validTags:["div"],model:null,_requiresID:!0,keyConfigs:{focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",nextPage:"34",previousPage:"33",lastPage:"ctrl+alt+34",firstPage:"ctrl+alt+33",nextPager:"alt+34",previousPager:"alt+33",firstCellSelection:"36",lastCellSelection:"35",firstRowSelection:"ctrl+36",lastRowSelection:"ctrl+35",rowUpSelection:"ctrl+shift+38",rowDownSelection:"ctrl+shift+40",randomSelection:"ctrl+shift+83",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",moveCellRight:"9",moveCellLeft:"shift+9",selectedGroupExpand:"alt+40",totalGroupExpand:"ctrl+40",selectedGroupCollapse:"alt+38",totalGroupCollapse:"ctrl+38",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40"},_ignoreOnPersist:["query","isEdit","toolbarClick","queryCellInfo","mergeCellInfo","currentViewData","enableAltRow","enableRTL","contextClick","contextOpen","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","childGrid","summaryRows","toolbarSettings","editSettings","allowMultiSorting","enableAutoSaveOnSelectionChange","locale","allowCellMerging","allowTextWrap","textWrapSettings","cssClass","dataSource","groupSettings.enableDropAreaAutoSizing","enableRowHover","showSummary","allowGrouping","enableHeaderHover","allowKeyboardNavigation","scrollSettings.frozenRows","scrollSettings.frozenColumns","enableTouch","contextMenuSettings.enableContextMenu","exportToExcelAction","exportToWordAction","exportToPdfAction"],ignoreOnExport:["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","editSettings","pageSettings","enableAutoSaveOnSelectionChange","localization","allowScrolling","cssClass","dataSource","groupSettings.enableDropAreaAnimation","enableRowHover","allowSummary","enableHeaderHover","allowKeyboardNavigation"],observables:["dataSource","selectedRowIndex","pageSettings.currentPage","selectedRowIndices"],_tags:[{tag:"columns",attr:["allowEditing","allowFiltering","filterType","allowGrouping","allowResizing","allowSorting","cssClass","customAttributes","dataSource","defaultValue","disableHtmlEncode","editTemplate","editType","foreignKeyField","foreignKeyValue","headerTemplateID","headerText","isFrozen","isIdentity","isPrimaryKey","filterBarTemplate","textAlign","templateID","textAlign","headerTextAlign","tooltip","clipMode","validationRules.minlength","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","editParams.decimalPlaces",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["showCaptionSummary","showTotalSummary",[{tag:"summaryColumns",attr:["customSummaryValue","dataMember","displayColumn","summaryType","template"]}]]},{tag:"stackedHeaderRows",attr:[[{tag:"stackedHeaderColumns",attr:["headerText","column"]}]]},{tag:"filterSettings.filteredColumns",attr:[]},{tag:"sortSettings.sortedColumns",attr:[]}],_dataSource:t.util.valueFunction("dataSource"),_selectedRow:t.util.valueFunction("selectedRowIndex"),_selectedMultipleRows:t.util.valueFunction("selectedRowIndices"),_currentPage:t.util.valueFunction("pageSettings.currentPage"),defaults:{allowPaging:!1,showColumnChooser:!1,gridLines:"both",allowSorting:!1,showStackedHeader:!1,selectedRecords:[],stackedHeaderRows:[],allowFiltering:!1,allowMultipleExporting:!1,allowSelection:!0,allowGrouping:!1,showSummary:!1,allowResizing:!1,allowResizeToFit:!1,allowTextWrap:!1,allowCellMerging:!1,enableRowHover:!0,enablePersistence:!1,enableFocusout:!1,selectedRowIndex:-1,selectedRowIndices:[],allowSearching:!1,enableToolbarItems:!1,enableHeaderHover:!1,allowReordering:!1,allowKeyboardNavigation:!0,allowRowDragAndDrop:!1,enableTouch:!0,enableLoadOnDemand:!1,columnLayout:"auto",selectionType:"single",dataSource:null,cssClass:"",allowScrolling:!1,locale:"en-US",enableAutoSaveOnSelectionChange:!0,allowMultiSorting:!1,exportToExcelAction:"ExportToExcel",exportToWordAction:"ExportToWord",exportToPdfAction:"ExportToPdf",_groupingCollapsed:[],editSettings:{allowEditing:!1,showAddNewRow:!1,allowAdding:!1,showAddNewRow:!1,allowDeleting:!1,editMode:"normal",rowPosition:"top",dialogEditorTemplateID:null,allowEditOnDblClick:!0,externalFormTemplateID:null,inlineFormTemplateID:null,formPosition:"bottomleft",titleColumn:null,showConfirmDialog:!0,showDeleteConfirmDialog:!1},selectionSettings:{selectionMode:["row"],enableToggle:!1,cellSelectionMode:"flow"},resizeSettings:{resizeMode:"normal"},pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:null,enableTemplates:!1,showDefaults:!1,template:null,totalRecordsCount:null,enableQueryString:!1,printMode:"allpages"},groupSettings:{showDropArea:!0,showToggleButton:!1,showGroupedColumn:!0,showUngroupButton:!0,enableDropAreaAutoSizing:!0,captionFormat:null,groupedColumns:[]},contextMenuSettings:{enableContextMenu:!1,contextMenuItems:["Add Record","Edit Record","Delete Record","Sort In Ascending Order","Sort In Descending Order","Next Page","Last Page","Previous Page","First Page","Save","Cancel","Grouping","Ungrouping"],customContextMenuItems:[],subContextMenu:[],disableDefaultItems:!1},filterSettings:{filterType:"filterbar",filterBarMode:"immediate",showFilterBarStatus:!0,statusBarWidth:450,showPredicate:!1,filteredColumns:[],enableInterDeterminateState:!0,maxFilterChoices:1e3,enableCaseSensitivity:!1,immediateModeDelay:1500,enableComplexBlankFilter:!0,blankValue:""},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0},sortSettings:{sortedColumns:[]},toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},minWidth:0,currentIndex:0,rowDropSettings:{dropMapper:null,dragMapper:null,dropTargetID:null},scrollSettings:{width:"auto",height:0,enableTouchScroll:!0,allowVirtualScrolling:!1,virtualScrollMode:"normal",frozenRows:0,frozenColumns:0,buttonSize:18,autoHide:!1,scrollerSize:18,scrollOneStepBy:57,enableVirtualization:!1},textWrapSettings:{wrapMode:"both"},summaryRows:[],enableRTL:!1,enableAltRow:!0,currentViewData:null,detailsTemplate:null,childGrid:null,keySettings:null,rowTemplate:null,detailsDataBound:null,rowDataBound:null,queryCellInfo:null,mergeCellInfo:null,create:null,actionBegin:null,actionComplete:null,actionFailure:null,beginEdit:null,endEdit:null,endAdd:null,endDelete:null,beforeBatchAdd:null,beforeBatchSave:null,beforeBatchDelete:null,beforePrint:null,batchAdd:null,batchDelete:null,cellSave:null,cellEdit:null,resizeStart:null,resizeEnd:null,resized:null,load:null,destroy:null,rowSelecting:null,rowSelected:null,cellSelecting:null,cellSelected:null,columnSelecting:null,columnSelected:null,columnDragStart:null,columnDrag:null,columnDrop:null,rowDrag:null,rowDragStart:null,rowDrop:null,beforeRowDrop:null,dataBound:null,recordClick:null,recordDoubleClick:null,templateRefresh:null,rightClick:null,detailsCollapse:null,detailsExpand:null,toolbarClick:null,contextOpen:null,contextClick:null,columns:[],query:null,isEdit:!1,isResponsive:!1,enableResponsiveRow:!1,virtualLoading:null},dataTypes:{dataSource:"data",query:"data",columns:"array",childGrid:"parent",gridLines:"enum",summaryRows:"array",stackedHeaderRows:"array",toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},contextMenuSettings:{contextMenuItems:"array",customContextMenuItems:"array",subContextMenu:"array"},selectionSettings:{selectionMode:"array",selectedRecords:"array"},sortSettings:{sortedColumns:"array"},filterSettings:{filteredColumns:"array",filterType:"enum",filterBarMode:"enum"},groupSettings:{groupedColumns:"array"},editSettings:{editMode:"enum",formPosition:"enum",rowPosition:"enum"},searchSettings:{fields:"array"},textWrapSettings:{wrapMode:"enum"}},_columns:function(){this.element.find(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),this._headerCellgDragDrop(),this.refreshContent(!0),this._trigger("refresh")},_summaryRows:function(e,i,s){if("showTotalSummary"==i||"showCaptionSummary"==i){var n=e.summaryRows,l=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);this.option("summaryRows")[n][i]=l}this.element.find(".e-gridfooter").remove(),this._renderGridFooter().insertAfter(this.getContent()),("showCaptionSummary"==i||"title"==i)&&(this._isCaptionSummary=this.option("summaryRows")[n].showCaptionSummary,this.model.showSummary=this._isCaptionSummary,0!=this.model.groupSettings.groupedColumns.length&&this._refreshCaptionSummary())},_summaryRows_summaryColumns:function(e,i,s){("displayColumn"==i||"dataMember"==i)&&t.isNullOrUndefined(this.getColumnByField(s))||(this._createSummaryRows(this.getFooterTable()),0!=this.element.find(".e-groupcaptionsummary").length&&this._refreshCaptionSummary())},_stackedHeaderRows_stackedHeaderColumns:function(){this._refreshStackedHeader()},_sortSettings_sortedColumns:function(e,t,i){var s,n,l=this.model.sortSettings.sortedColumns[e["sortSettings.sortedColumns"]];"field"==t?(s=null!=this.getColumnByField(i)?i:null,n="ascending"==l.direction||"descending"==l.direction?l.direction:null):"direction"==t&&(s=null!=this.getColumnByField(l.field)?l.field:null,n="ascending"==i||"descending"==i?i:null),null!=s&&null!=n&&this.sortColumn(s,n)},_filterSettings_filteredColumns:function(e,i,s){var n,l,o,r,a,d=this.model.filterSettings.filteredColumns[e["filterSettings.filteredColumns"]];switch(i){case"field":n=null!=this.getColumnByField(s)?s:null,l=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"matchcase":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);break;case"operator":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,s),a=d.value,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"predicate":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,d.operator),a=d.value,r="and"==s||"or"==s?s:null,o=d.matchcase;break;case"value":n=null!=this.getColumnByField(d.field)?d.field:null,l=this._map(t.FilterOperators,d.operator),a=s,r="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase}null!=n&&null!=l&&null!=a&&null!=r&&null!=o&&this.filterColumn(n,l,a,r,o)},_map:function(t,i){var s=e.map(t,function(e){if(e===i)return e});return 0!=s.length?s[0]:null},_refreshCaptionSummary:function(){var t=document.createElement("div");t.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),this.getContentTable().get(0).replaceChild(t.firstChild.firstChild,this.getContentTable().get(0).lastChild),this.refreshContent()},getContentTable:function(){return this._gridContentTable},setGridContentTable:function(e){this._gridContentTable=e},getContent:function(){return this._gridContent},setGridContent:function(e){this._gridContent=e},getHeaderContent:function(){return this._gridHeaderContent},setGridHeaderContent:function(e){this._gridHeaderContent=e},getHeaderTable:function(){return this._gridHeaderTable},setGridHeaderTable:function(e){this._gridHeaderTable=e},getRows:function(){return this._gridRows},getFilteredRecords:function(){return this._filteredRecords},getRowByIndex:function(i,s){var n;try{var l=this.getRows(),o=this._excludeDetailRows(),r=e();if(e.isArray(i)){for(n=0;n<i.length;n++)this.model.scrollSettings.frozenColumns>0?(r.push(l[0][i[n]]),r.push(l[1][i[n]])):r.push(l[i[n]]);return r}return t.isNullOrUndefined(s)?this.model.scrollSettings.frozenColumns>0?(r.push(l[0][i]),r.push(l[1][i]),r):e(o.not(".e-virtualrow")[i]):this.model.scrollSettings.frozenColumns>0?(r.push(e(l[0]).slice(i,s)),r.push(e(l[1]).slice(i,s)),r):e(o.not(".e-virtualrow").slice(i,s))}catch(t){return e()}},getColumnIndexByField:function(e){for(var t=0,i=this.model.columns,s=i.length;t<s;t++)if(i[t].field===e)return t;return-1},getColumnIndexByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s},getIndexByRow:function(t){var i,s=this.getRows(),n=this._excludeDetailRows();return this.model.scrollSettings.frozenColumns>0?(-1==(i=e(s[0]).index(t))&&(i=e(s[1]).index(t)),i):n.not(".e-virtualrow").index(t)},getPrimaryKeyFieldNames:function(){if(0!=this._primaryKeys.length)return this._primaryKeys;for(var e=0,t=this.model.columns,i=t.length;e<i;e++)t[e].isPrimaryKey&&this._primaryKeys.push(t[e].field);return this._primaryKeys},getVisibleColumnNames:function(){return this._visibleColumns},getHiddenColumnNames:function(){return this._hiddenColumns},getColumnByField:function(e){for(var t=0;t<this.model.columns.length&&this.model.columns[t].field!=e;t++);return t==this.model.columns.length?null:this.model.columns[t]},getsortColumnByField:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[t].field!=e;t++);return t==this.model.sortSettings.sortedColumns.length?null:this.model.sortSettings.sortedColumns[t]},getColumnByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s==this.model.columns.length?null:this.model.columns[s]},getCurrentViewData:function(){return this._currentJsonData},getColumnFieldNames:function(){for(var e=[],t=0;t<this.model.columns.length;t++)this.model.columns[t].field&&e.push(this.model.columns[t].field);return e},getBrowserDetails:function(){var t=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return navigator.userAgent.match(/Trident\/7\./)||navigator.userAgent.match(/Edge/)?{browser:"msie",version:e.uaMatch(navigator.userAgent).version}:{browser:t[1].toLowerCase(),version:t[2]}},_initPrivateProperties:function(){this._click=0,this._gridPhoneMode=320,this._columntemplaterefresh=!1,this._tabKey=!1,this._gridHeaderTable=null,this._gridWidth=this.element.width(),this._id=this.element.attr("id"),this._gridRows=[],this._unboundRow=null,this._gridContentTable=null,this._gridContent=null,this._remoteSummaryData=null,this._gridSort=null,this._gridHeaderContent=null,this._gridFooterContent=null,this._gridFooterTable=null,this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._links=null,this._gridPager=null,this._cSortedColumn=null,this._cSortedDirection=null,this._$curSElementTarget=null,this._gridFilterBar=null,this._$curFieldName=null,this._$prevFieldName=null,this._mediaStatus=!1,this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1,this._$colType=null,this._$colFormat=null,this._$prevColType=null,this._$prevSElementTarget=null,this._currentFilterColumn=null,this._filteredRecordsCount=null,this._filteredRecords=[],this._validatedColumns=[],this.filterColumnCollection=[],this._previousFilterCount=null,this._excelFilter=null,this._isExcelFilter="excel"==this.model.filterSettings.filterType,this._$fkColumn=!1,this._fkParentTblData=[],this._primaryKeys=[],this._identityKeys=[],this._primaryKeyValues=[],this._modifiedRecords=[],this._addedRecords=[],this._tdsOffsetWidth=[],this._deletedRecords=[],this._disabledToolItems=e(),this._validationRules={},this._groupedColumns=[],this._LastColumnUnGroup=!1,this._scolumns=[],this._currentJsonData=[],this._groupingColumnIndex=0,this._dataManager=this._dataSource()instanceof t.DataManager?this._dataSource():null!=this._dataSource()?t.DataManager(this._dataSource()):null,null!=this._dataManager&&this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&null!=this.model.pageSettings.totalRecordsCount&&null!=this._dataManager.dataSource.json&&this._dataManager.dataSource.json.splice(this.model.pageSettings.totalRecordsCount),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!0,this._disabledResizingColumns=[],this._disabledSortableColumns=[],this._disabledGroupableColumns=[],this._disabledFilterableColumns=[],this._disabledEditableColumns=[],this._hiddenColumns=[],this._visibleColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._ccVisibleColumns=[],this._ccHiddenColumns=[],this._sortedColumns=[],this.multiSortRequest=!1,this.multiSelectCtrlRequest=!1,this.multiSelectShiftRequest=!1,this._enableSelectMultiTouch=!1,this._enableSortMultiTouch=!1,this._templateRefresh=!1,this.initialRender=!1,this._selectDrag=!1,this._isAddNew=!1,this._fieldColumnNames={},this._headerColumnNames={},this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualPageRecords={},this._queryCellView=[],this._currentPageViews=[],this._virtualLoadedPages=[],this._currentLoadedIndexes=[],this._prevVirtualSort=[],this._prevVirtualFilter=[],this._prevVirtualIndex=0,this._currentVirtualIndex=1,this._virtualRowCount=0,this._virtualSelectedRecords={},this._selectionByGrid=!1,this._enableCheckSelect=!1,this._checkSelectedRowsIndexes=[],this._isMapSelection=!1,this._selectionMapColumn=null,this._selectAllCheck=!1,this.selectedRowsIndexes=[],this._isReorder=!1,this._searchString="",this._searchCount=null,this.columnsWidthCollection=[],this._Indicator=null,this._resizer=null,this._bulkEditCellDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null},this.batchChanges={added:[],deleted:[],changed:[]},this._bulkEditTemplate=e(),this._confirmDialog=null,this._confirmedValue=!1,this._lastRow=!1,this._isVirtualRecordsLoaded=!1,this._scrollValue=0,this._currentTopFrozenRow=this.model.scrollSettings.frozenRows,this._rowHeightCollection=[],this._scrollObject=null,this._customPop=null,this.selectedRowCellIndexes=[],this._rowIndexesColl=[],this.selectedColumnIndexes=[],this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.commonQuery=e.extend(!0,{},this.model.query),t.gridFeatures.group&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0),this.phoneMode=!!(this.model.isResponsive&&document.documentElement.clientWidth<360),this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection(),this._mediaQuery=!1,this._columnChooserList=null,this._$headerCols=null,this._$contentCols=null,this._detailsOuterWidth=null,this._editForm=null,this._cloneQuery=null,this.localizedLabels=this._getLocalizedLabels(),this._searchBar=null,this._relationalColumns=[],this._dropDownManager={},this._isUngrouping=!1,this._columnChooser=!1,this._showHideColumns=!1,this._vCurrentTrIndex=null,this._lastVirtualPage=null,this._currentVIndex=null,(!this.model.enablePersistence||t.isNullOrUndefined(this._isHeightResponsive))&&(this._isHeightResponsive=!1),this._resize=!1,this._initHeight=0},_init:function(){var e,i,n;this._trigger("load"),!t.isNullOrUndefined(this.model.query)&&this.model.query instanceof t.Query||(this.model.query=t.Query()),t.isNullOrUndefined(this.model.parentDetails)||(e=this.model.queryString,i=this.model.foreignKeyField,this.model.query=this.model.query.clone(),n=this.model.parentDetails.parentKeyFieldValue===s?"undefined":this.model.parentDetails.parentKeyFieldValue,this.model.query.where(t.isNullOrUndefined(i)?e:i,"equal",n,!0)),this._initPrivateProperties(),t.gridFeatures.common&&this._initScrolling(),this.model.enableResponsiveRow&&this.element.addClass("e-responsive"),this._checkForeignKeyBinding(),this._checkDataBinding()},_initComplexColumn:function(e,i,s){var n,l,o,r=s||i;for(n in e)"object"!=typeof e[n]||t.isNullOrUndefined(e[n])?(l=r.concat(".").concat(n),o=e[n],this.model.columns.push({field:l,type:null!=o?o.getDay?o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0||o.getMilliseconds()>0?"datetime":"date":typeof o:null})):(r=r.concat(".").concat(n),this._initComplexColumn(e[n],n,r))},_initColumns:function(i){for(var n,l,o,r,a;i.items!=s;)i=i.items[0];if(0==this.model.columns.length&&i){for(n in i)i.hasOwnProperty(n)&&("object"!=typeof i[n]||i[n]instanceof Date||null==i[n])?(l=i[n],this.model.columns.push({field:n,type:null!=l?l.getDay?l.getHours()>0||l.getMinutes()>0||l.getSeconds()>0||l.getMilliseconds()>0?"datetime":"date":typeof l:null})):"object"==typeof i[n]&&this._initComplexColumn(i[n],n);this.model.columns.length&&this._renderAfterColumnInitialize()}else for(o=0;o<this.model.columns.length;o++)this.model.columns[o].field=t.isNullOrUndefined(this.model.columns[o].field)?"":this.model.columns[o].field,t.isNullOrUndefined(this.model.columns[o].validationRules)||this._validatedColumns.push(this.model.columns[o].field),t.isNullOrUndefined(this.model.columns[o].type)?(r=t.isNullOrUndefined(this.model.columns[o].field)?null:t.getObject(this.model.columns[o].field,i),!!(a=this.model.columns[o].dataSource)&&this.model.columns[o].foreignKeyValue&&(this.model.columns[o].originalType=null!=r?r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof r:null,r=a instanceof t.DataManager?t.getObject("0."+this.model.columns[o].foreignKeyValue,this.model.columns[o].foreignKeyData):t.getObject("0."+this.model.columns[o].foreignKeyValue,a)),this.model.columns[o].type=null!=r?r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof r:null):"date"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns?e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+"}"}):"datetime"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns&&e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+" "+t.preferredCulture().calendars.standard.patterns.t+"}"})},_initSelection:function(){var e=this.model.selectionSettings.selectionMode;for(i=0;i<e.length;i++)this["_allow"+e[i]+"Selection"]=!0},_checkDataBinding:function(){var i,n,l,o,r;if(!this.model.columns.length&&((null==this._dataSource()||!this._dataSource().length)&&!(this._dataSource()instanceof t.DataManager)||this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url==s&&!this._dataSource().dataSource.json.length))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource),void this._alertDialog.ejDialog("open");if(this._initialRenderings(),this.model.editSettings.allowDeleting&&"multiple"==this.model.selectionType&&(this.multiDeleteMode=!0),this.initialRender=!0,this.model.enableRTL&&this.element.addClass("e-rtl"),this.model.allowFiltering&&this._isExcelFilter&&this._renderExcelFilter(),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this.model.allowGrouping&&this.element.append(this._renderGroupDropArea()),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&(this.element.append(this._renderToolBar()),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&-1!=e.inArray("search",this.model.toolbarSettings.toolbarItems)&&(i=this.element.find(".e-toolbar.e-toolbarspan .e-gridsearchbar"),t.ieClearRemover(i[0]))),(n=this.model.columns)&&n.length){if(l=this.model.query._expands,"string"==typeof n[0])for(o=0;o<n.length;o++)n[o]={field:n[o]};for(o=0;o<n.length;o++)n[o].field&&-1!==n[o].field.indexOf(".")&&this._getExpands(n[o].field,l);this.model.query.expand(l),this.commonQuery.expand(l),this._renderAfterColumnInitialize()}this.model.allowPaging&&this.element.append(this._renderGridPager()),this.model.contextMenuSettings.enableContextMenu&&this.element.append(this._renderContext()),e.isFunction(e.fn.ejWaitingPopup)&&(this.element.ejWaitingPopup({showOnInit:!1}),e("#"+this._id+"_WaitingPopup").addClass("e-gridwaitingpopup")),this.model.scrollSettings.allowVirtualScrolling&&(this._loadedJsonData=[],this._prevPage=1),this._dataSource()instanceof t.DataManager?(this.element.ejWaitingPopup("show"),this._dataSource().ready!=s?(r=this,this._dataSource().ready.done(function(e){r._initDataSource(),r.model.dataSource=t.DataManager(e.result)})):(this.element.ejWaitingPopup("show"),this._initDataSource())):(this._ensureDataSource(),this._trigger("actionBegin"),this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender(),this._vRowHeight=Math.floor(this.getRowHeight()))},_renderColumnChooser:function(){var i,n,l,o,r,a,d,h,c,u,m=t.buildTag("button .e-ccButton",this.localizedLabels.Columns,{float:this.model.enableRTL?"left":"right"}).attr("type","button");this.element.prepend(m),m.ejButton({prefixIcon:"e-icon e-down-arrow",imagePosition:"imageright",contentType:"textandimage",type:"button",click:e.proxy(this._ccClickHandler,this),width:90}),i=m.outerHeight(),m.css("margin-top",0-i),n=parseInt(this.element.css("margin-top"),10),this.element.css("margin-top",n+i),t.buildTag("div"),l=t.buildTag("div .e-grid e-columnChooser","",{},{id:this._id+"ccDiv"}),e("#"+this._id+"ccDiv").data("ejDialog")!=s&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove()),o=t.buildTag("div.e-searchbox e-fields").append(t.buildTag("input#"+this._id+"_ccSearchBox.e-ejinputtext e-filtertext",{},{},{type:"text"})),r=t.buildTag("span .e-searchfind e-icon"),o.append(r),a=t.buildTag("div","",{height:"228px"},{id:this._id+"liScrollerDiv"}),this._renderColumnChooserData(!1),a.append(this._columnChooserList),l.append(o),l.append(a),d=t.buildTag("div .e-columnChooserSplitter","",{"border-bottom":"0px"}),l.append(d),this.model.enableRTL?($buttonDiv=t.buildTag("div","",{float:"left","margin-top":"7px","margin-right":"-13px"}),h=t.buildTag("button",this.localizedLabels.Cancel,{"margin-right":"7px","margin-left":"9px"}),e(r).addClass("e-rtl")):($buttonDiv=t.buildTag("div","",{float:"right","margin-top":"7px","margin-right":"-13px"}),h=t.buildTag("button",this.localizedLabels.Cancel,{"margin-right":"20px","margin-left":"6px"})),c=t.buildTag("button",this.localizedLabels.Done),$buttonDiv.append(c),$buttonDiv.append(h),l.append($buttonDiv),c.ejButton({click:e.proxy(this._addButtonCC,this),showRoundedCorner:!0,width:66}),h.ejButton({click:e.proxy(this._cancelButtonHandler,this),showRoundedCorner:!0,width:66}),l.insertBefore(this.element),l.ejDialog({width:"auto",beforeClose:e.proxy(this._columnChooserBeforeClose,this),showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260}),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&(u=e(".e-columnChooser").find("input#"+this._id+"_ccSearchBox")[0],t.ieClearRemover(u))},_renderColumnChooserData:function(i){var s,n,l,o,r,a,d,h=this.model.columns.length==this.getVisibleColumnNames().length;for(this._ccCheckBoxList=[],s=t.buildTag("div","",{"margin-left":"0px",width:"250px"}),n=0,l=-1;l<this.model.columns.length;l++)if((o=-1==l)||this.model.columns[l].showInColumnChooser){var c=this.model.columns[l],u=o?this.localizedLabels.SelectAll:t.isNullOrUndefined(c.headerText)||""==c.headerText?""==c.field?null:c.field:c.headerText,m=c&&c.disableHtmlEncode?this._htmlEscape(u):u;if(!t.isNullOrUndefined(u)||o){var p=t.buildTag("div","",{},{class:"e-columnChooserListDiv"}),g=o?this._id+"selectAll":this._id+u.replace(/\s|\.|[^a-zA-Z0-9]|&nbsp/g,"_"),f=s.find("#"+g).length;f&&n++,r=t.buildTag("input","",{},{id:f?g+n+"":g,value:u,type:"checkbox","ej-field":o?"":c.field,"ej-headertext":o?"":c.headerText,class:o?"e-selectall":""}),a=t.buildTag("label",m,{"font-size":"13px"},{for:f?g+n+"":g}),p.append(r),p.append(a),s.append(p),d=!(!o&&!t.isNullOrUndefined(c.visible))||c.visible,r.ejCheckBox({checked:o?h:d,change:e.proxy(this._columnChooserCheckChange,this)}),o||t.isNullOrUndefined(c.visible)||r[c.visible?"attr":"removeAttr"]("checked",!0)}}i?(this._columnChooserList.empty().append(s.children()),e("#"+this._id+"liScrollerDiv").is(":visible")&&e("#"+this._id+"liScrollerDiv").ejScroller("refresh")):this._columnChooserList=s,this._ccCheckBoxList=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")},_checkFinder:function(){var t=e(this),i=t.closest(".e-columnChooserListDiv");if(t.hasClass("e-checkbox")&&!i.hasClass("e-hide")&&t.prop("checked"))return!0},_displayFinder:function(){return!e(this).closest(".e-columnChooserListDiv").hasClass("e-hide")},_columnChooserCheckChange:function(t){var i;if(t.isInteraction){var s=t.isChecked,n=this._ccCheckBoxList.filter(this._displayFinder),l=this._ccCheckBoxList.filter(this._checkFinder),o=n.length,r=l.length;t.model.id==this._id+"selectAll"?s?n.not(":checked").ejCheckBox({checked:s}):l.ejCheckBox({checked:s}):(this._columnChooserList.find("input.e-selectall").ejCheckBox("model.checked",o==r),s=0!=r,this.element[s?"attr":"removeAttr"]("checked",!0)),i=s?"removeClass":"addClass",e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[i]("e-disable")}else t.isChecked&&e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable")},_columnChooserBeforeClose:function(){e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove(),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable"),e("#"+this._id+"_ccSearchBox").val("");var t={target:{}};t.target.value="",this._columnChooserSearch(t)},_columnChooserSearch:function(s){var n,l,o,r,a,d,h,c,u;"click"==s.type&&(s.target.value="",e("#"+this._id+"_ccSearchBox").val("")),n=s.target.value,l=e("#"+this._id+"_ccSearchBox").next("span"),""!=n?(l.removeClass("e-searchfind"),l.addClass("e-cancel")):(l.removeClass("e-cancel"),l.addClass("e-searchfind")),e(".e-cancel").on("click",e.proxy(this._columnChooserSearch,this));var m=this.model.columns,p=[],g=[],f=this,_=function(t){var i=f.model.groupSettings;return!i.showGroupedColumn&&e.inArray(t,i.groupedColumns)>-1};for(""!=n&&(m=t.DataManager(this.model.columns).executeLocal(t.Query().where("headerText",t.FilterOperators.startsWith,n,!0)),t.DataManager(this.model.columns).executeLocal(t.Query().where("field",t.FilterOperators.startsWith,n,!0)).forEach(function(t){""==t.headerText&&-1==e.inArray(t,m)&&m.push(t)})),m.forEach(function(e){if(e.showInColumnChooser&&!_(e.field)){var i=t.isNullOrUndefined(e.headerText)||""==e.headerText?""==e.field?null:e.field:e.headerText;p.push(i)}}),t.isNullOrUndefined(e("#nomatches")[0])||e("#nomatches").remove(),o=e("#"+this._id+"ccDiv").find("#"+this._id+"liScrollerDiv"),r=this._columnChooserList.find(".e-columnChooserListDiv"),i=0;i<this.model.columns.length;i++)this.model.columns[i].showInColumnChooser&&!t.isNullOrUndefined(this.model.columns[i].headerText)&&(""!=this.model.columns[i].headerText?g.push(this.model.columns[i].headerText):""!=this.model.columns[i].field&&g.push(this.model.columns[i].field));for(a=0;a<g.length;a++)d=g[a],h=p.indexOf(d),t.isNullOrUndefined(d)||r.eq(a+1)[-1==h?"addClass":"removeClass"]("e-hide");0==p.length&&(c=t.buildTag("div#nomatches","",{"padding-left":"13px"}),u=t.buildTag("span",this.localizedLabels.NoResult),c.append(u),e(o).append(c));var v=this._ccCheckBoxList.filter(this._displayFinder).length,b=this._ccCheckBoxList.filter(this._checkFinder).length,w=b==v;p.length&&r.eq(0).find("input.e-js").ejCheckBox({checked:w}),r.eq(0)[0==p.length?"addClass":"removeClass"]("e-hide"),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[b?"removeClass":"addClass"]("e-disable"),e("#"+this._id+"liScrollerDiv").ejScroller("refresh")},_addButtonCC:function(){var t,i,s,n;for(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._columnChooserClick=!0,(t={}).requestType="columnchooser",this._columnChooser=!0,s=0,n=(i=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")).length;s<n;s++){var l=e(i[s]),o=l.attr("ej-headertext"),r=l.attr("ej-field");this._id+"selectAll"!=l.attr("id")&&(this[i[s].checked?"_visibleColumns":"_hiddenColumns"].push(o),this[i[s].checked?"_visibleColumnsField":"_hiddenColumnsField"].push(""!=r?r:o))}var a,d,h=this._visibleColumns,c=this._hiddenColumns;a=e.merge(e.merge([],h),c),d=this._isDuplicate(a),this._trigger("actionBegin",t),d?(this.showColumns(this._visibleColumnsField),this.hideColumns(this._hiddenColumnsField)):(this.showColumns(this._visibleColumns),this.hideColumns(this._hiddenColumns)),e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertail").remove(),this.refreshScrollerEvent(),t={requestType:"columnchooser",removedcolumns:[],addedcolumns:[],visiblecolumns:this.getVisibleColumnNames(),hiddencolumns:this.getHiddenColumnNames()},this._ccColumnUpdate(t.addedcolumns,this.getVisibleColumnNames(),this._ccVisibleColumns),this._ccColumnUpdate(t.removedcolumns,this.getHiddenColumnNames(),this._ccHiddenColumns),this._trigger("actionComplete",t)},_ccColumnUpdate:function(t,s,n){for(i=0;i<s.length;i++)-1==e.inArray(s[i],n)&&t.push(s[i])},_isDuplicate:function(e){for(var t,i=[],s=0;s<e.length;s++)i[t=e[s]]=i[t]>=1?i[t]+1:1;for(t in i)if(i[t]>1)return!0;return!1},_cancelButtonHandler:function(){e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertailAlt").remove(),e(".e-columnChoosertail").remove()},_ccClickHandler:function(){var i,s,n=this.element.find(".e-ccButton");if(i=n.offset().left+n.width(),(s=e("#"+this._id+"ccDiv").data("ejDialog"))&&s.isOpened())s.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove();else{e("#"+this._id+"ccDiv").ejDialog({width:"230px",height:"309px",position:{X:this.model.enableRTL?i-230+143:i-230,Y:n.offset().top+35}}).ejDialog("open");var l=parseInt(e("#"+this._id+"ccDiv_wrapper").css("z-index")),o=t.buildTag("div #"+this._id+"_ccTail .e-columnChoosertail","",{display:"block",position:"absolute",left:this.model.enableRTL?i-78:i-29,top:n.offset().top+15}),r=t.buildTag("div #"+this._id+"_ccTailAlt .e-columnChoosertailAlt","",{display:"block","z-index":l+2,position:"absolute",left:this.model.enableRTL?i-78:i-29,top:n.offset().top+16});o.insertBefore(e("#"+this._id+"ccDiv_wrapper")),r.insertBefore(e("#"+this._id+"ccDiv_wrapper"))}this._refreshColumnChooserList(),this._ccVisibleColumns=this.getVisibleColumnNames(),this._ccHiddenColumns=this.getHiddenColumnNames(),e("#"+this._id+"liScrollerDiv").ejScroller({height:"228",width:"228",buttonSize:0}),e("#"+this._id+"liScrollerDiv").ejScroller("refresh"),t.isIOSWebView()||"chrome"!=this.getBrowserDetails().browser||e(".e-columnChooser .e-hscrollbar").attr("style","height: 10px !important;"),e(".e-ejinputtext").on("keyup",e.proxy(this._columnChooserSearch,this))},_refreshColumnChooserList:function(){for(var t,i,s,n=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall"),l=this._isDuplicate(e.merge(e.merge([],this._visibleColumns),this._hiddenColumns)),o=0,r=n.length;o<r;o++){var a,d=e(n[o]),h=d.attr("ej-headertext"),c=d.attr("ej-field");n.filter("[ej-headertext='"+h+"']").length;this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&-1!=e.inArray(e(n[o]).attr("ej-field"),this.model.groupSettings.groupedColumns)?(e(n[o]).parents(".e-columnChooserListDiv").addClass("e-hide"),n[o].checked=!1):(e(n[o]).parents(".e-columnChooserListDiv").removeClass("e-hide"),n[o].checked=!0),t=l?""==c?h:c:h,a=-1!=this[l?"_hiddenColumnsField":"_hiddenColumns"].indexOf(t),d.prop("checked",!a),d.ejCheckBox("model.checked",!a)}i=!(n.filter(this._displayFinder).length!=n.filter(this._checkFinder).length||!n.filter(this._displayFinder).length),this._columnChooserList.find("input:checkbox.e-selectall").ejCheckBox({checked:i}),this.model.groupSettings.showGroupedColumn||(s=n.filter(this._displayFinder).length>0,e("#"+this._id+"ccDiv").find("button[aria-describedby='Done']").ejButton({enabled:s}))},_initDataSource:function(){var i,s;this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataSource().dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(this._isLocalData=!1),this._ensureDataSource(),this._trigger("actionBegin"),i=this._dataSource().executeQuery(this.model.query),s=this,null!=this._dataManager.dataSource.table&&this._dataManager.dataSource.table.css("display","none"),this.element.is(":visible")||this.element.ejWaitingPopup("hide"),i.done(t.proxy(function(i){var n,l,o;if(0==this._relationalColumns.length&&this.element.ejWaitingPopup("hide"),!this.model.columns.length&&!i.count)return n=i.count%this.model.pageSettings.pageSize==0?i.count/this.model.pageSettings.pageSize:parseInt(i.count/this.model.pageSettings.pageSize,10)+1,this._currentPage()>n&&this._currentPage(n),s._renderAlertDialog(),s._alertDialog.find(".e-content").text(s.localizedLabels.EmptyDataSource),s._alertDialog.ejDialog("open"),void s.element.ejWaitingPopup("hide");if(t.isNullOrUndefined(i.aggregates)||(this._remoteSummaryData=i.aggregates),this.model.scrollSettings.enableVirtualization||(this.model.currentViewData=i.result),this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=i.result),this._gridRecordsCount=this.model.enablePersistence||null==this.model.pageSettings.totalRecordsCount||0!=this.model.filterSettings.filteredColumns.length?0==i.count&&i.result.length?i.result.length:i.count:this.model.pageSettings.totalRecordsCount,this.model.filterSettings.filteredColumns.length>0&&(this._filteredRecordsCount=i.count),null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)if(this._refreshVirtualViewDetails(),this._isInitNextPage||this._remoteRefresh?(this._setInitialCurrentIndexRecords(i.result,this._currentPage()),this._isInitNextPage=this._remoteRefresh=!1):this._setVirtualLoadedRecords(i.result,this._currentPage()),this._isThumbScroll&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)&&this._checkPrevNextViews(this._currentPage()),this.initialRender)for(this.model.currentViewData=[],l=0;l<this._currentLoadedIndexes.length;l++)o=this._currentLoadedIndexes[l],e.merge(this.model.currentViewData,this._virtualLoadedRecords[o]||[]);else this.model.currentViewData=i.result;this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender()},this)),s=this,i.fail(function(e){s.element.ejWaitingPopup("hide"),s.model.currentViewData=[],s._gridRecordsCount=0,s._renderGridContent().insertAfter(s.element.children(".e-gridheader"));var t={error:e.error};s._trigger("actionFailure",t)})},_initialRenderings:function(){var i,s;if(this.model.groupSettings.groupedColumns.length){for(i=[],s=0;s<this.model.sortSettings.sortedColumns.length;s++)t.isNullOrUndefined(this.model.sortSettings.sortedColumns[s].direction)&&(this.model.sortSettings.sortedColumns[s].direction=t.sortOrder.Ascending),i.push(this.model.sortSettings.sortedColumns[s].field);if(this.model.allowGrouping)for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)-1==e.inArray(this.model.groupSettings.groupedColumns[s],i)&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[s],direction:t.sortOrder.Ascending})}},_getExpands:function(e,t){var i,s,n=e.split("."),l="";for(n.splice(n.length-1,1),i=0;i<n.length;i++,l=""){for(s=0;s<i;s++)l+=n[s]+"/";l+=n[i],-1===t.indexOf(l)&&t.push(l)}},_renderAfterColumnInitialize:function(){this.element.append(this._renderGridHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(this._renderFiltering(),this._renderFilterBarTemplate()),"both"!=this.model.gridLines&&this._showHeaderGridLines(),this.model.allowPaging&&this.element.append(this.element.find(".e-pager").first())},_ensureDataSource:function(i){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,w,C,y,S,x,T,k,D,I,O,A,L,R,E,N,M;if(null==this._dataSource()&&!(this._dataSource()instanceof t.DataManager)){if(t.isNullOrUndefined(i)||"add"!=i.requestType)return;this.dataSource([])}if(this.model.query.requiresCount(),l=(n=this.model.query).clone(),this._dataSource()instanceof t.DataManager||(this.model.currentViewData=this._dataSource()),this._isLocalData&&(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(!t.isNullOrUndefined(this._cModifiedData)||!t.isNullOrUndefined(this._cAddedRecord))){if(t.isNullOrUndefined(this._cAddedRecord)){for(a=0;a<this._primaryKeys.length;a++)n=n.where(this._primaryKeys[a],t.FilterOperators.equal,this._primaryKeyValues[a]);o=this._dataManager.executeLocal(n),this._dataSource()instanceof t.DataManager?t.copyObject(this._dataSource().dataSource.json[e.inArray(o.result[0],this._dataSource().dataSource.json)],this._cModifiedData):t.copyObject(this._dataSource()[e.inArray(o.result[0],this._dataSource())],this._cModifiedData),this._cModifiedData=null}else r=this._cAddedRecord,this._cAddedRecord=null,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(r):this._dataSource(s,!0).splice(0,0,r);n.queries=l.queries,this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1)}if(i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&(1==this._excludeDetailRows().length||"multiple"==this.multiDeleteMode&&this.selectedRowsIndexes.length==this._excludeDetailRows().length)&&1!=this.model.pageSettings.currentPage&&this._currentPage(this.model.pageSettings.totalPages-1),i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&!t.isNullOrUndefined(this._cDeleteData)&&this._isLocalData&&(this._dataSource()instanceof t.DataManager?(a=e.inArray(this._cDeleteData[0],this._dataSource().dataSource.json),this._dataSource().dataSource.json.splice(a,1)):(a=e.inArray(this._cDeleteData[0],this._dataSource()),this._dataSource(s,!0).splice(a,1))),this.model.scrollSettings.allowVirtualScrolling&&i&&("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._virtualDataRefresh=!0,this._refreshVirtualViewData()),this.model.sortSettings.sortedColumns.length){for(d=[],x=(h=this.model.sortSettings.sortedColumns).length-1;x>=0;x--)if(-1==this.model.groupSettings.groupedColumns.indexOf(h[x].field)){if(n.sortBy(h[x].field,h[x].direction),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&-1==e.inArray(h[x],this._prevVirtualSort)){for(w=0;w<this._prevVirtualSort.length;w++)h[x].field==this._prevVirtualSort[w].field&&this._prevVirtualSort.splice(w,1);this._needVPaging=this._currentVirtualIndex*this._virtualRowCount%this.model.pageSettings.pageSize<=this._virtualRowCount,this._prevVirtualSort.push(h[x]),this._virtualDataRefresh=!0,this._refreshVirtualViewData()}}else d.push({field:h[x].field,direction:h[x].direction});for(w=0;w<d.length;w++)n.sortBy(d[w].field,d[w].direction)}if(this.model.allowSearching&&this.model.searchSettings.key.length&&((c=this.model.searchSettings).fields=0!=c.fields.length?c.fields:this.getColumnFieldNames(),n.search(c.key,c.fields,c.operator||"contains",c.ignoreCase||!0),this.initialRender||"searching"!=i.requestType||this._currentPage(1)),this._isLocalData&&this.model.allowSearching&&(this._filteredRecords=0!=this.model.searchSettings.key.length?this._dataManager.executeLocal(n).result:[]),this.model.allowFiltering&&this.model.filterSettings.filteredColumns.length){if(m=this.model.filterSettings.filteredColumns[0],p=this.model.filterSettings.filteredColumns,!this._isExcelFilter&&!this._excelFilterRendered||m instanceof t.Predicate)for(m instanceof t.Predicate?(u=m,this._excelFilterRendered&&(b=t.distinct(p,"field",!1),this._excelFilter._predicates[0]=this._excelFilter._predicates[0]||{},this._excelFilter._predicates[0][b[0]]=u)):u=t.Predicate(m.field,m.operator,m.value,!m.matchcase),x=1;x<p.length;x++)p[x]instanceof t.Predicate?u=u[p[x].predicate||"and"](p[x]):!this._isLocalData&&p.length>2&&x>1&&"or"==p[x].predicate?u.predicates.push(t.Predicate(p[x].field,p[x].operator,p[x].value,p[x].ignoreCase||!p[x].matchcase)):u=u[p[x].predicate||"and"](p[x].field,p[x].operator,p[x].value,!p[x].matchcase);else for(f in this._excelFilter.getPredicate(p,null,!0),g=this._excelFilter._predicates[0])(v=(_=g[f]).from!=s)?n.skip("top"==_.from?0:this._gridRecordsCount-_.take).take(_.take):u=u!=s?u.and(_):_;if(u&&n.where(u),this._isLocalData?(C=this._dataManager.executeLocal(n),this._filteredRecordsCount=v?C.result.length:C.count,y=this._filteredRecordsCount%this.model.pageSettings.pageSize==0?this._filteredRecordsCount/this.model.pageSettings.pageSize:parseInt(this._filteredRecordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>y&&this._currentPage(y),this._filteredRecords=this._dataManager.executeLocal(n).result,this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=this._filteredRecords)):t.isNullOrUndefined(i)||i.requestType!=t.Grid.Actions.Filtering||this._currentPage(1),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)for(x=0;x<p.length;x++){for(w=0;w<this._prevVirtualFilter.length;w++)p[x]==this._prevVirtualFilter[w]&&i.requestType==t.Grid.Actions.Filtering&&this._prevVirtualFilter.splice(w,1);-1==e.inArray(p[x],this._prevVirtualFilter)&&(this._prevVirtualFilter.push(p[x]),this._gridRecordsCount=this._filteredRecordsCount,this._refreshViewPageDetails(),this._refreshVirtualViewData(),this._refreshVirtualViewDetails())}}if(this._isLocalData&&this.model.allowFiltering&&0==this.model.filterSettings.filteredColumns.length&&(!t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount>0)&&(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshViewPageDetails(),this._refreshVirtualViewDetails(!0)),this._filteredRecordsCount=null,this._filteredRecords=[]),this.model.summaryRows.length&&this._setSummaryAggregate(n),(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&!this.model.scrollSettings.enableVirtualization)&&(this._isLocalData&&(C=this._dataManager.executeLocal(n),this._recordsCount=C.count,y=this._recordsCount%this.model.pageSettings.pageSize==0?this._recordsCount/this.model.pageSettings.pageSize:parseInt(this._recordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>y&&this._currentPage(y)),0==this._currentPage()&&(0==this._prevPageNo||null==this._prevPageNo?this._currentPage(1):this._currentPage(this._prevPageNo)),n.page(this._currentPage(),this.model.pageSettings.pageSize)),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._needPaging=!0,this.initialRender&&this.model.currentIndex>1&&(this.model.currentIndex<=this._getVirtualTotalRecord()||!this._isLocalData)&&("continuous"==this.model.scrollSettings.virtualScrollMode&&(this.model.currentIndex=1),this._currentVirtualIndex=Math.ceil(this.model.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._currentPage(Math.ceil(this.model.currentIndex/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),this._virtualDataRefresh&&(this._isThumbScroll=!0,this._refreshVirtualViewData(!0),this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._currentPage(Math.ceil(this._currentVirtualIndex*this._virtualRowCount/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),null!=this.model.virtualLoading&&(this._gridRecordsCount=this.model.pageSettings.totalRecordsCount),0==this.model.filterSettings.filteredColumns&&this._prevVirtualFilter.length&&(this._refreshVirtualViewData(),this._prevVirtualFilter=[]),this._isLocalData&&this.initialRender&&this._refreshVirtualViewDetails(),this._getVirtualLoadedRecords(n)),this.model.allowGrouping){for(S=n.clone(),this.model.allowPaging&&this.model.groupSettings.groupedColumns.length&&(S.queries=S.queries.slice(0,S.queries.length-1)),x=0;x<this.model.groupSettings.groupedColumns.length;x++)T=this.model.groupSettings.groupedColumns[x],k=this.getColumnByField(T),!t.isNullOrUndefined(k.enableGroupByFormat)&&k.enableGroupByFormat?(n.group(T,t.proxy(this._formatGroupColumn,this)),S.group(T,t.proxy(this._formatGroupColumn,this))):(n.group(T),S.group(T));this.model.groupSettings.groupedColumns.length&&this._setAggreatedCollection(S)}if(i!=s&&"add"==i.requestType&&this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(i.data):this._dataSource().unshift(i.data)),t.isNullOrUndefined(i)||"add"!=i.action||t.isNullOrUndefined(this.model.parentDetails)||(D=this.getColumnByField(this.model.parentDetails.parentKeyField),-1==e.inArray(D,this.model.columns)&&((I={})[this.model.parentDetails.parentKeyField]=this.model.parentDetails.parentKeyFieldValue,e.extend(!0,this.model.currentViewData[0],I))),this._cloneQuery=n.clone(),this._isLocalData&&(!this.model.scrollSettings.enableVirtualization||this._virtualDataRefresh)){if(O=this._dataManager.dataSource.json,A=this._dataSource().dataSource,!t.isNullOrUndefined(A)&&this._dataSource()instanceof t.DataManager&&(this._dataManager.dataSource.json=O!=A.json?A.json:O),L=this._dataManager.executeLocal(n),t.isNullOrUndefined(i)||"beginedit"!=i.requestType)if(this.model.scrollSettings.allowVirtualScrolling&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&(this._prevPageRendered=!0),this.model.scrollSettings.allowVirtualScrolling&&!this._prevPageRendered&&L.result.length!=this.model.pageSettings.pageSize&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage)R=t.pvt.filterQueries(n.queries,"onPage"),n.queries.splice(e.inArray(R[0],n.queries),1),n.page(this._currentPage()-1,this.model.pageSettings.pageSize),(E=this._dataManager.executeLocal(n)).result.splice(0,L.result.length),this._previousPageRecords=e.extend(!0,[],E.result),this._previousPageLength=L.result.length,this._currentPageData=L.result,t.merge(E.result,L.result),this.model.currentViewData=this._lastVirtualPage=E.result,this._lastPageRendered=!0;else if(this._lastPageRendered&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&!this.model.scrollSettings.enableVirtualization){for(N=this.model.pageSettings.pageSize-this._previousPageLength,M=0;M<N;M++)this.getRows()[this.getRows().length-(this.model.pageSettings.pageSize-M)].remove();this._tempPageRendered=!0,this.model.currentViewData=L.result}else this.model.currentViewData=L.result;else this.model.currentViewData=L.result;this._gridRecordsCount=L.count,this._remoteSummaryData=L.aggregates,this._searchCount=this._searchString.length?L.count:null,this.model.groupSettings.groupedColumns.length&&this._setAggregates()}},_formatGroupColumn:function(e,i){var s;return s=this.getColumnByField(i).format,s=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(s)[2],t.format(e,s,this.model.locale)},_refreshViewPageDetails:function(){this._currentPage(1),this.model.currentIndex=0,this._currentVirtualIndex=1,this.getContent().ejScroller("model.scrollTop",0)},_refreshVirtualViewDetails:function(e){var i=this._dataSource();e&&(this._gridRecordsCount=null!==i?i instanceof t.DataManager?i.dataSource.json.length:i.length:this.model.pageSettings.totalRecordsCount),this._totalVirtualViews=Math.ceil(this._getVirtualTotalRecord()/this._virtualRowCount),this._maxViews=Math.ceil(this.model.pageSettings.pageSize/this._virtualRowCount),this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize),this.model.pageSettings.totalRecordsCount=this._gridRecordsCount,this._lastViewData=this._virtualRowCount-(this._totalVirtualViews*this._virtualRowCount-this._getVirtualTotalRecord())},_getVirtualLoadedRecords:function(t){var i,s,n=this._currentPage();if(this._needPaging&&(this._isLastVirtualpage=needTwoPage=this._isThumbScroll&&n==this.model.pageSettings.totalPages&&!this._virtualPageRecords[n],(this.initialRender||this._virtualDataRefresh)&&(needTwoPage=!0),this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=n)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._getVirtualOnLoadingData(n,!needTwoPage):this._setVirtualPaging(t,n,!needTwoPage),!this.initialRender&&this._isThumbScroll&&this._virtualPageRecords[n]&&!this._virtualDataRefresh&&this._checkPrevNextViews(n,t)),this._needPaging=!1,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.initialRender&&this._isLocalData)for(this.model.currentViewData=[],i=0;i<this._currentLoadedIndexes.length;i++)s=this._currentLoadedIndexes[i],this._virtualLoadedRecords[s]&&e.merge(this.model.currentViewData,this._virtualLoadedRecords[s])},_setVirtualPaging:function(i,s,n){var l,o=t.pvt.filterQueries(i.queries,"onPage");o.length&&i.queries.splice(e.inArray(o[0],i.queries),1),(!n||this._needVPaging)&&this.model.currentIndex>this._virtualRowCount?(this._initCurrentIndex(i,s),this._needVPaging=!1):i.page(s,this.model.pageSettings.pageSize),this._isLocalData&&!this._virtualPageRecords[s]&&(l=this._dataManager.executeLocal(i),this.initialRender||(this.model.currentViewData=l.result),l.result.length?(this._setVirtualLoadedRecords(l.result,s),-1==e.inArray(s,this._virtualLoadedPages)&&this._virtualLoadedPages.push(s)):this.initialRender||this.getContent().find(".e-virtualtop, .e-virtualbottom").remove())},_checkPrevNextViews:function(){var e,t,i=this._currentVirtualIndex,s=this._virtualLoadedRecords[i-1],n=this._virtualLoadedRecords[i+1],l=3==this._maxViews?1:2;1!=i&&i!=this._totalVirtualViews&&(s&&s.length==this._virtualRowCount?n&&n.length==this._virtualRowCount||this._totalVirtualViews==i-1||(t=i-l,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t-1,e=this._scrollValue-l*this._virtualRowCount*this._vRowHeight):(t=i+l,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t+1,e=this._scrollValue+l*this._virtualRowCount*this._vRowHeight),e&&(this._scrollValue=e,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.model.currentIndex=0==e?e:Math.floor(e/this._vRowHeight)))},_initCurrentIndex:function(i,s){var n,l,o,r,a,d,h=s*this.model.pageSettings.pageSize,c=this._currentVirtualIndex*this._virtualRowCount+this._virtualRowCount,u=this._currentVirtualIndex*this._virtualRowCount-2*this._virtualRowCount;c>h||u<h-this.model.pageSettings.pageSize||this._isLastVirtualpage?(c>h?(n=(s-1)*this.model.pageSettings.pageSize,l=2*this.model.pageSettings.pageSize,this._isInitNextPage=!0):(u<h-this.model.pageSettings.pageSize||this._isLastVirtualpage)&&(n=(s-2)*this.model.pageSettings.pageSize,l=2*this.model.pageSettings.pageSize,this._isInitNextPage=!1,this._remoteRefresh=!0),this.model.virtualLoading&&this._isLocalData?((o={}).endIndex=n+l,o.endIndex=o.endIndex>this._getVirtualTotalRecord()?this._getVirtualTotalRecord():o.endIndex,o.startIndex=n,o.currentPage=this._currentPage(),o.result=null,this._trigger("virtualLoading",o),d=o.result,this._setInitialCurrentIndexRecords(d,s)):((r=t.pvt.filterQueries(i.queries,"onSkip")).length&&i.queries.splice(e.inArray(r[0],i.queries),1),i.skip(n).take(l),this._isLocalData&&(a=this._dataManager.executeLocal(i),d=this.model.currentViewData=a.result,this._isLastVirtualpage=!1,this._setInitialCurrentIndexRecords(d,s)))):(this._needVPaging=!1,this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=s)?this._getVirtualOnLoadingData(s,!0):this._setVirtualPaging(i,s,!0))},_setInitialCurrentIndexRecords:function(e,t){for(i=0;i<2;i++){var s,n=i*this.model.pageSettings.pageSize,l=n+this.model.pageSettings.pageSize,o=e.slice(n,l);s=this._isInitNextPage||1==t&&1==this.model.pageSettings.totalPages?0==i?t:t+1:0==i?t-1:t,this._setVirtualLoadedRecords(o,s)}},_getVirtualOnLoadingData:function(e,t){var i,n;e>0&&(this.model.currentIndex>this._virtualRowCount&&(!t||this._needVPaging)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._initCurrentIndex(s,e):((i={}).endIndex=e*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:e*this.model.pageSettings.pageSize,i.startIndex=e*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=this._currentPage(),i.result=null,this._trigger("virtualLoading",i),n=i.result,this._setVirtualLoadedRecords(n,e)))},_setVirtualLoadedRecords:function(t,i){var s,n,l,o,r,a,d,h,c,u=this._virtualRowCount,m=this.model.pageSettings.pageSize,p=m/u,g=Math.ceil(i*m/u),f=i==this.model.pageSettings.totalPages;for(this._virtualPageRecords[i]||(this._virtualPageRecords[i]=t),f&&(n=this._getVirtualTotalRecord()%m,g=(!this._virtualLoadedRecords[this._totalVirtualViews]||this._virtualLoadedRecords[this._totalVirtualViews].length!=this._lastViewData)&&n<this._lastViewData&&0!=n?this._totalVirtualViews+1:this._totalVirtualViews,this._getVirtualTotalRecord()<u&&(this._singleView=!0)),l=0;l<p;l++)((a=Math.ceil((i-1)*p+(l+1)))<=this._totalVirtualViews||f)&&a<=g&&(this._virtualLoadedRecords[a-1]&&this._virtualLoadedRecords[a-1].length!=u?(o=u-(this._virtualLoadedRecords[a-1].length+l*u)+l*u,e.merge(this._virtualLoadedRecords[a-1],t.slice(0,o)),s=r=o+u,a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(o,s))):1==a||this._virtualLoadedRecords[a-1]?s=r=(o=s||l*u%m)+u:(0!=(d=r=(a-1)*u%m)&&(this._virtualLoadedRecords[a-1]=t.slice(0,d)),o=d,r=s=d+u),this._virtualLoadedRecords[a]&&this._virtualLoadedRecords[a].length!=u?(h=t.slice(o,r)).length+this._virtualLoadedRecords[a].length<=u&&(c=e.merge(h,this._virtualLoadedRecords[a]),this._virtualLoadedRecords[a]=c):!this._virtualLoadedRecords[a]&&a<=this._totalVirtualViews&&(this._virtualLoadedRecords[a]=t.slice(o,r)));-1==e.inArray(i,this._virtualLoadedPages)&&this._virtualLoadedPages.push(i)},_setVirtualLoadedIndexes:function(e){var t,i;for(this._currentLoadedIndexes=[],t=e==this._totalVirtualViews?e:e+1,1!=e&&(e-=1),i=e;i<=t;i++)this._currentLoadedIndexes.push(i)},_getVirtualTotalRecord:function(){return 0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount},_initGridRender:function(){var i,s,n,l,o;if(this.addInitTemplate(),this.model.scrollSettings.frozenColumns>0&&this.addFrozenTemplate(),this.model.allowGrouping&&this.addGroupingTemplate(),this.model.showSummary&&this.addSummaryTemplate(),(this.model.allowResizing||this.model.allowResizeToFit)&&(this._resizer=new t.gridFeatures.gridResize(this)),this.model.keySettings&&e.extend(this.model.keyConfigs,this.model.keySettings),this._initHeight=this.model.scrollSettings.height,"100%"==this.model.scrollSettings.height&&(this._isHeightResponsive=!0),this.render(),this._setTextWrap(),"fixed"==this.model.columnLayout){var r=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),a=this.getHeaderContent().width()>r?"addClass":"removeClass",d=this.getHeaderTable(),h=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(d=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),h=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),d[a]("e-tableLastCell"),h[a]("e-tableLastCell")}if(this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&(this._headerCellreorderDragDrop(),this._initIndicators()),this._wireEvents(),this.model.allowGrouping&&!t.isNullOrUndefined(this.model.serverProperties))for(this.model._groupingCollapsed=this.model.serverProperties._groupingCollapsed,i=0;i<this.model._groupingCollapsed.length;i++)(s=this.getContent().find(".e-recordplusexpand").filter("td[ej-mappingname='"+this.model._groupingCollapsed[i].key+"'    ][ej-mappingvalue='"+this.model._groupingCollapsed[i].value+"']")).length>1&&!t.isNullOrUndefined(this.model._groupingCollapsed[i].parent)&&(n=this.model._groupingCollapsed[i].parent,s=s.filter(function(){return e(this).parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand[ej-mappingvalue="+n+"]").length})),this.expandCollapse(s);this.initialRender=!1,this.model.width&&!this.model.allowScrolling&&this.element.width(this.model.width),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this._trigger("dataBound",{}),this._trigger("refresh"),this.model.parentDetails&&(l=this.model.parentDetails.parentID,(o=e("#"+l).data("ejGrid")).model.allowScrolling&&o._refreshScroller({requestType:"refresh"})),this.element.closest("tr").hasClass("e-detailrow")&&!this.model.parentDetails&&((o=this.element.closest("tr.e-detailrow").closest(".e-grid").data("ejGrid")).model.allowScrolling&&o.getScrollObject().refresh()),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._renderFilterDialogs(),this.model.enableResponsiveRow&&(this.model.allowSorting||this.model.allowFiltering)&&this._renderResponsiveFilter(),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),this._isMapSelection&&this._mappingSelection(),this.model.showColumnChooser&&this._renderColumnChooser()},_setTextWrap:function(){if(1==this.model.allowTextWrap){switch(this.model.textWrapSettings.wrapMode){case"content":this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap"),this.getContent().addClass("e-wrap");break;case"header":this.element.removeClass("e-wrap"),this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").addClass("e-wrap");break;default:this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.addClass("e-wrap")}if(this.model.scrollSettings.frozenColumns>0&&"content"!=this.model.textWrapSettings.wrapMode){var e=this.getHeaderContent().find(".e-frozenheaderdiv").find(".e-columnheader").last().find("th"),t=this.getHeaderContent().find(".e-movableheader").find(".e-columnheader").last().find("th");e.height()>t.height()?t.height(e.height()):e.height(t.height())}}else this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap")},_getMetaColGroup:function(){for(var i,s=t.buildTag("colgroup"),n=0;n<this.model.columns.length;n++)i=e(document.createElement("col")),!1===this.model.columns[n].visible&&i.css("display","none"),null==this.model.rowTemplate||t.isNullOrUndefined(this.model.columns[n].cssClass)||i.addClass(this.model.columns[n].cssClass),this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&-1!=e.inArray(this.model.columns[n].field,this.model.groupSettings.groupedColumns)&&i.css("display","none"),s.append(i);return s},_alternateRow:function(){return this.getIndex()%2==0?"e-row":"e-alt_row"},addInitTemplate:function(){var i,n,l,o,r,a,d,h,c=this.element.find(".e-headercelldiv:not(.e-emptyCell)"),u={},m=!0,p=document.createElement("tbody"),g=e(p);if(null==this.model.rowTemplate){var f,_=document.createElement("tr"),v=e(_),b=this.model.columns;for(this._gridRecordsCount&&!this._virtualDataRefresh?this._initColumns(this.model.currentViewData[0]!=s?this.model.currentViewData[0]:this.model.currentViewData.value):this._isLocalData&&(null!=this._dataSource()&&this._dataSource().length||this._dataManager&&this._dataManager.dataSource.json.length)&&this._initColumns(this._dataSource()[0]!=s?this._dataSource()[0]:this._dataManager.dataSource.json[0]),i={_gridFormatting:this.formatting},e.views.helpers(i),(h={})._foreignKey=this._foreignKeyBinding,e.views.helpers(h),(this.model.childGrid||this.model.detailsTemplate)&&(n=t.buildTag("td.e-detailrowcollapse","<div class='e-icon e-gnextforward'></div>"),v.append(n)),f=0;f<this.model.columns.length;f++){if(l=t.buildTag("td.e-rowcell"),t.isNullOrUndefined(b[f].tooltip)&&b[f].clipMode!=t.Grid.ClipMode.EllipsisWithTooltip||l.addClass("e-gridtooltip"),(b[f].clipMode==t.Grid.ClipMode.Ellipsis||b[f].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&l.addClass("e-gridellipsis"),this.model.isResponsive&&l.attr("data-cell",this._decode(this.model.columns[f].headerText)),0==b[f].visible?l.addClass("e-hide"):(m&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&l.addClass("e-detailrowvisible"),m=!1),this.model.groupSettings.showGroupedColumn||l.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[f].field+"'}}e-hide{{/if}}{{/for}}"),t.isNullOrUndefined(b[f].templateID||b[f].template)){for(var w=(b[f].field||"").split("."),C=w.length-1,y="";C;)y+="(",C--;switch(b[f].type||b[f].editType){case"boolean":case"booleanedit":t.isNullOrUndefined(b[f].displayAsCheckbox)&&(b[f].displayAsCheckbox=!0),b[f].displayAsCheckbox?(a="",a="batch"==this.model.editSettings.editMode&&(t.isNullOrUndefined(b[f].allowEditing)||b[f].allowEditing)?a:"disabled='disabled'",d="{{if #data['"+w.join("']['")+"']=='true'||#data['"+w.join("']['")+"']==true}} <input type ='checkbox' "+a+" checked='checked'></input>{{else}} <input type ='checkbox' "+a+"></input> {{/if}}",l.addClass("e-boolrowcell").html(d)):l.html("{{if "+b[f].field+"}}"+this.localizedLabels.True+"{{else}}"+this.localizedLabels.False+"{{/if}}");break;case"checkbox":this._enableCheckSelect=!0,this.model.selectionType="multiple",this.model.selectionSettings.enableToggle=!0,this._isMapSelection=""!=b[f].field,this._selectionMapColumn=b[f].field,b[f].textAlign="center",this._isMapSelection||(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),l.addClass("e-checkcell").html("<div class = 'e-checkcelldiv'>{{if #data['"+w.join("']['")+"']}} <input type ='checkbox' checked='checked'></input>{{else}} <input type ='checkbox'></input> {{/if}}</div>"),this.model.columns[f].editType=t.Grid.EditingType.Boolean,this.model.scrollSettings.frozenColumns>0&&l.addClass("e-frozenunbound"),this.model.enableAutoSaveOnSelectionChange=!1;break;default:b[f].disableHtmlEncode?l.html("{{html:"+y+"#data['"+w.join("'] || {})['")+"']}}"):l.html("{{:"+y+"#data['"+w.join("'] || {})['")+"']}}")}b[f].format==s||b[f].foreignKeyValue||l.html("{{:~_gridFormatting('"+b[f].format+"',"+y+"#data['"+w.join("'] || {})['")+"'],'"+this.model.locale+"')}}"),b[f].foreignKeyValue&&b[f].dataSource&&l.html("{{:~_foreignKey("+f+","+y+"#data['"+w.join("'] || {})['")+"'],'"+this._id+"')}}"),b[f].commands&&((h={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(h),(t.isNullOrUndefined(b[f].field)||""==b[f].field)&&(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),t.isNullOrUndefined(b[f].headerText)||e("#"+this._id+b[f].headerText.replace(/[^a-z0-9|s_]/gi,"")+f+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(b[f],f),t.isNullOrUndefined(b[f].headerText)||l.addClass("e-unboundcell").addClass("e-"+b[f].headerText.replace(/[^a-z0-9|s_]/gi,"")+f).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&l.addClass("e-frozenunbound"),this._isUnboundColumn=!0)}else h={},o=b[f].headerText,h["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this,undefined),e.views.helpers(h),t.isNullOrUndefined(o)||t.isNullOrUndefined(o.match(/[^0-9\s\w]/g))||(o=o.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+o+f+"_Template").remove(),r=this._createTemplateElement(b[f]),(""==b[f].field||t.isNullOrUndefined(b[f].field))&&(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),0!=b[f].template&&l.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+r.id+"','"+f+"')}}");b[f].textAlign==s&&(b[f].textAlign="left"),!0===b[f].isPrimaryKey&&(this._primaryKeys.push(e.trim(b[f].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),this.phoneMode&&this.model.enableResponsiveRow||b[f].textAlign==s||(l.css("text-align",b[f].textAlign),e(c[f]).css("text-align",b[f].textAlign)),this.phoneMode||t.isNullOrUndefined(b[f].headerTextAlign)||e(c[f]).css("text-align",b[f].headerTextAlign),t.isNullOrUndefined(b[f].cssClass)||l.addClass(b[f].cssClass),t.isNullOrUndefined(b[f].priority)||l.addClass("e-table-priority-"+b[f].priority),t.isNullOrUndefined(b[f].customAttributes)||l.attr(b[f].customAttributes),l.attr("role","gridcell"),v.append(l),this.model.enableAltRow?(i["_"+this._id+"AlternateRow"]=this._alternateRow,e.views.helpers(i),v.addClass("{{:~_"+this._id+"AlternateRow()}}")):v.addClass("e-row"),v.attr("role","row"),this.model.scrollSettings.frozenColumns>0&&this.model.scrollSettings.frozenColumns==f+1&&(p.appendChild(_),u[this._id+"_JSONFrozenTemplate"]=g.html(),v.empty(),g.empty())}p.appendChild(_)}u[this._id+"_JSONTemplate"]=null!=this.model.rowTemplate?e(this.model.rowTemplate).html():g.html(),e.templates(u)},render:function(){this.model.showSummary=this.model.summaryRows.length>0||this.model.showSummary,this._renderGridContent().insertAfter(this.element.children(".e-gridheader")),this.model.allowResizeToFit&&this.setWidthToColumns(),this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.showSummary&&this._currentJsonData.length&&(this._renderGridFooter().insertAfter(this.getContent()),this._hideCaptionSummaryColumn()),this._initialEndRendering()},_createStackedRow:function(i,n){var l,o,r,a,d,h,c,u,m,p,g,f,_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),v=[],b=[];for(tAl=[],tp=[],g=0;g<this.model.columns.length;g++)if(0!=(l=this.model.columns[g]).visible){if(this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&this.model.groupSettings.groupedColumns.length>0&&-1!=e.inArray(l.field,this.model.groupSettings.groupedColumns))continue;var w="",C="",y="",S="",x=i.stackedHeaderColumns;for(m=0;m<x.length;m++)o=e.isArray(x[m].column)?x[m].column:e.map(x[m].column.split(","),e.trim),r="e-row"+e.inArray(i,this.model.stackedHeaderRows)+"-column"+m,-1!=e.inArray(l.field,o)&&(w=x[m].headerText,C=x[m].cssClass,y=x[m].textAlign,S=x[m].tooltip?" e-gridtooltip "+r:"");v.push(w),b.push(C),tAl.push(y),tp.push(S)}for(a=[],u=0;u<v.length;u++){for(d=1,h=u+1;h<v.length&&v[u]==v[h];h++)d++;a.push({sapnCount:d,headerText:v[u],cssClass:b[u],txtAlign:tAl[u],tooltip:tp[u]}),u+=d-1}if(_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),c=this.model.scrollSettings.frozenColumns,this.model.allowScrolling&&c>0){var T=[],k=0,D=0,I=0;for(u=0;u<this.model.columns.length;u++)m=this.model.columns[u],u<c&&0==m.visible&&I++;for(k=c-I;k>0;)p=a[D].sapnCount,a[D].sapnCount<k?(T.push(a[D]),n?D++:a.splice(D,1)):a[D].sapnCount>k?(a[D].sapnCount=a[D].sapnCount-k,n&&T.push({sapnCount:k,headerText:a[D].headerText})):(T.push(a[D]),n||a.splice(D,1)),k-=p;n&&(a=T)}for((this.model.detailsTemplate||this.model.childGrid)&&_.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g=0;g<a.length;g++)(f=t.buildTag("th.e-headercell e-stackedHeaderCell e-default"+a[g].tooltip,a[g].headerText,{},{colspan:a[g].sapnCount})).css("textAlign",a[g].txtAlign),_.append(f),a[g].cssClass!=s&&f.addClass(a[g].cssClass);return _},_renderGridHeaderInternalDesign:function(i,n){var l,o,r,a,d,h,c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px",role:"grid"}),u=t.buildTag("thead"),m=t.buildTag("tbody.e-hide"),p=t.buildTag("tr.e-columnheader"),g=e(document.createElement("colgroup")),f=e(document.createElement("tr"));if((this.model.childGrid||this.model.detailsTemplate)&&(p.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g.append(this._getIndentCol())),this.model.showStackedHeader)for(h=0;h<this.model.stackedHeaderRows.length;h++)l=this._createStackedRow(this.model.stackedHeaderRows[h],n),u.append(l);for(o=0;o<i.length;o++){var _=t.buildTag("th.e-headercell e-default","",{},{role:"columnheader"}),v=document.createElement("td"),b=t.buildTag("div.e-headercelldiv",i[o].headerText===s&&"checkbox"!=i[o].type?i[o].headerText=i[o].field:i[o].headerText,{},{"ej-mappingname":i[o].field});if(i[o].disableHtmlEncode&&b.text(i[o].headerText),t.isNullOrUndefined(i[o].headerTooltip)||b.addClass("e-headertooltip"),t.isNullOrUndefined(i[o].tooltip)||b.addClass("e-gridtooltip"),(i[o].clipMode==t.Grid.ClipMode.Ellipsis||i[o].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&b.addClass("e-gridellipsis"),_.append(b),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&(i[o].allowFiltering==s||!0===i[o].allowFiltering)&&(!t.isNullOrUndefined(i[o].field)||""==i[o].field)&&"checkbox"!=i[o].type){if(r="e-filterset",!this.initialRender&&this.model.filterSettings.filteredColumns)for(a=0;a<this.model.filterSettings.filteredColumns.length;a++)this.model.filterSettings.filteredColumns[a].field==i[o].field&&(r="e-filterset e-filteredicon e-filternone");_.append(t.buildTag("div.e-filtericon e-icon "+r)),_.addClass("e-headercellfilter"),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version&&this.model.enableRTL&&e(b).css("padding","0 0 0 2em")}d=document.createElement("col"),i[o].priority&&e(v).addClass("e-table-priority-"+i[o].priority),f.append(v),p.append(_),g.append(d),!1===i[o].visible?(_.addClass("e-hide")&&e(d).css("display","none"),-1==e.inArray(i[o].headerText,this._hiddenColumns)&&-1==e.inArray(i[o].field,this._hiddenColumnsField)&&(this._hiddenColumns.push(i[o].headerText)&&i[o].field!=s?this._hiddenColumnsField.push(i[o].field):this._hiddenColumnsField.push(i[o].headerText)),-1!=e.inArray(i[o].field,this._visibleColumnsField)&&this._visibleColumnsField.splice(e.inArray(i[o].field,this._visibleColumnsField),1)&&this._visibleColumns.splice(e.inArray(i[o].headerText,this._visibleColumns),1)):(this._visibleColumns.push(i[o].headerText)&&i[o].field!=s?this._visibleColumnsField.push(i[o].field):this._visibleColumnsField.push(i[o].headerText),i[o].visible=!0,-1!=e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField)&&this._hiddenColumnsField.splice(e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField),1)&&this._hiddenColumns.splice(e.inArray(i[o].headerText,this._hiddenColumns),1)),this.model.showColumnChooser&&!1!==i[o].showInColumnChooser&&(i[o].showInColumnChooser=!0),this.model.allowResizing&&!1!==i[o].allowResizing&&(i[o].allowResizing=!0),t.isNullOrUndefined(i[o].headerTextAlign)?i[o].textAlign!=s?b.css("text-align",i[o].textAlign):this.model.enableRTL&&b.css("text-align",i[o].textAlign="right"):b.css("text-align",i[o].headerTextAlign),!1===i[o].allowResizing&&this._disabledResizingColumns.push(i[o].field),!1===i[o].allowSorting&&this._disabledSortableColumns.push(i[o].field),!1===i[o].allowGrouping&&this._disabledGroupableColumns.push(i[o].field),!1===i[o].allowEditing&&this._disabledEditableColumns.push(i[o].field),t.isNullOrUndefined(i[o].cssClass)||(_.addClass(i[o].cssClass),e(d).addClass(i[o].cssClass)),t.isNullOrUndefined(i[o].headerTemplateID)||(b.html(e(i[o].headerTemplateID).hide().html()).parent().addClass("e-headertemplate"),-1==(h=e.inArray(i[o].field,this._disabledGroupableColumns))&&t.isNullOrUndefined(i[o].field)&&this._disabledGroupableColumns.push(i[o].field)),"checkbox"==t.getObject("type",i[o])&&t.isNullOrUndefined(i[o].headerText)&&(b.addClass("e-headercheckcelldiv"),b.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"),t.isNullOrUndefined(i[o].field)||b.attr("ej-mappingname",i[o].field)),this.model.allowGrouping&&this.model.groupSettings.showToggleButton&&-1==e.inArray(i[o].field,this._disabledGroupableColumns)&&!t.isNullOrUndefined(i[o].field)&&""!=i[o].field&&(-1!=e.inArray(i[o].field,this.model.groupSettings.groupedColumns)?b.append(this._getToggleButton().addClass("e-toggleungroup")):b.append(this._getToggleButton().addClass("e-togglegroup"))),this.model.isResponsive&&_.attr("title",this._decode(i[o].headerText)),i[o].priority&&(_.attr("data-priority",i[o].priority).addClass("e-table-priority-"+i[o].priority),e(d).addClass("e-table-priority-"+i[o].priority)),this.initialRender&&("string"==typeof i[o].width&&-1!=i[o].width.indexOf("%")?this.columnsWidthCollection.push(parseInt(i[o].width)/100*this.element.width()):this.columnsWidthCollection.push(i[o].width)),i[o].width==s&&this.model.commonWidth!==s&&(this.columnsWidthCollection[o]=this.model.commonWidth),this._fieldColumnNames[i[o].headerText]=i[o].field,this._headerColumnNames[i[o].field]=i[o].headerText}return u.append(p),m.append(f),c.append(g).append(u).append(m),c},_renderGridHeader:function(){var e,i,s=t.buildTag("div.e-gridheader"),n=t.buildTag("div");return this.model.allowScrolling&&n.addClass("e-headercontent"),this.setGridHeaderContent(s),this.initialRender&&(this.columnsWidthCollection=[],this._hiddenColumns=[],this._hiddenColumnsField=[]),this._visibleColumns=[],this._visibleColumnsField=[],this._disabledGroupableColumns=[],this._fieldColumnNames={},this._headerColumnNames={},this.model.scrollSettings.frozenColumns>0?(e=t.buildTag("div.e-frozenheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(0,this.model.scrollSettings.frozenColumns),!0)),i=t.buildTag("div.e-movableheader",t.buildTag("div.e-movableheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(this.model.scrollSettings.frozenColumns),!1))),n.append(e).append(i)):n.append(this._renderGridHeaderInternalDesign(this.model.columns)),s.html(n),this.model.isResponsive&&s.addClass("e-textover"),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),s},_renderGridContent:function(){var i,s,n,l,o,r,a,d=t.buildTag("div.e-gridcontent"),h=t.buildTag("div"),c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),u=e(document.createElement("tbody"));if(c.append(this.getHeaderTable().find("colgroup").clone()).append(u),h.html(c),d.html(h),this.setGridContentTable(c),this.setGridContent(d),c.attr("role","grid"),i={},this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length){if(this.initialRender&&(i.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],!this.model.groupSettings.showGroupedColumn))for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)n=this.model.groupSettings.groupedColumns[s],-1==e.inArray(n,this._hiddenColumnsField)&&(this._hiddenColumnsField.push(n),this.getColumnByField(n).visible=!1);i.requestType=t.Grid.Actions.Grouping}else i.requestType=t.Grid.Actions.Refresh;if(null==this._dataSource()||0==this._dataSource().length||0==this.model.currentViewData.length?(l=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length}),u.append(e(document.createElement("tr")).append(l)),this.setWidthToColumns(),(this.initialRender||this.model.groupSettings.groupedColumns.length)&&this.sendDataRenderingRequest(i)):this.sendDataRenderingRequest(i),this._isCaptionSummary&&"grouping"==i.requestType&&this.model.groupSettings.groupedColumns.length>1)for(o=this.getContentTable().find(".e-table").not(".e-recordtable").children("colgroup"),r=e(this.getContentTable().find(".e-recordtable")[0]).children("colgroup").find("col"),s=0;s<o.length;s++)a=e(o[s]).find("col").length,e(o[s]).find("col:gt("+(a-r.length-1)+")").remove(),e(o[s]).append(r.clone());return d},print:function(){var e,i,s,n,l={};l.requestType="print",this._printselectrows=this.getContentTable().find('tr[aria-selected="true"]'),this._trigger("actionBegin",l),e=this.model.allowPaging,this._$fDlgIsOpen&&(this.element.find(".e-excelfilter:visible").css("display","none"),this.element.find(".e-filterdialoglarge:visible").css("display","none")),i=this.element.clone(),s=window.open("","print","height=452,width=1024,tabbar=no"),this.model.allowPaging&&"currentpage"==this.model.pageSettings.printMode?(this.getPager().css("display","none"),i=this.element.clone(),this.model.allowScrolling||(this.refreshContent(),this.getPager().css("display","block"))):e&&(this.model.allowPaging=!1,this.refreshContent(),this.getPager().css("display","none"),i=this.element.clone(),this.model.allowPaging=!0,this.model.allowScrolling||(this.refreshContent(),this.getPager().css("display","block"))),this.model.allowScrolling&&(this.model.scrollSettings.width,this.model.scrollSettings.height,(this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll())&&(n=this.getContent().find(".e-content")[0],i.find(".e-gridcontent").height(n.scrollHeight),i.find(".e-gridcontent").ejScroller({width:"auto",height:"auto"}),i.width(n.scrollWidth),i.find(".e-gridheader").removeClass("e-scrollcss")),this.model.allowPaging&&(this.refreshContent(),this.getPager().css("display","block"))),this.model.toolbarSettings.showToolbar&&i.find(".e-gridtoolbar").remove(),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&i.find(".e-filterbar").remove(),l={requestType:"print",element:i,selectedRows:this._printselectrows},this._trigger("beforePrint",l),t.isNullOrUndefined(l.element)||(i=l.element),t.print(i,s),l.requestType="print",this._trigger("actionComplete",l)},export:function(i,s,n,l){var o,r,a,d,h,c,u=e.extend(!0,{},this.model),m=this,p={action:i,method:"post","data-ajax":"false"},g=t.buildTag("form","",null,p);if(n&&!t.isOnWebForms)o=e("div.e-grid"),l&&l.length>0&&(o=e.map(l,function(e){return document.getElementById(e)})),e.each(o,function(i,s){var n,l,o,r,a=e(s).data("ejGrid");if(!t.isNullOrUndefined(a)&&(n=e.extend(!0,{},a.model),n=m._getModifyExportModel(n),a.ignoreOnExport)){for(l=0;l<a.ignoreOnExport.length;l++)delete n[a.ignoreOnExport[l]];o={name:"GridModel",type:"hidden",value:a.stringify(n)},r=t.buildTag("input","",null,o),g.append(r)}}),e("body").append(g),g.submit();else{if(this._locale=this.model.locale,u=this._getModifyExportModel(u),this.ignoreOnExport)for(r=0;r<this.ignoreOnExport.length;r++)delete u[this.ignoreOnExport[r]];t.raiseWebFormsServerEvents?(a={model:u,originalEventType:s},d={model:this.stringify(u)},t.raiseWebFormsServerEvents(s,a,d),setTimeout(function(){t.isOnWebForms=!0},1e3)):(h={name:"GridModel",type:"hidden",value:this.stringify(u)},c=t.buildTag("input","",null,h),g.append(c),g.append(this),e("body").append(g),g.submit()),setTimeout(function(){m.model.locale=m._locale},0)}return!0},_getModifyExportModel:function(i){var n,l,o,r={};e.extend(r,t.Grid.Locale["en-US"],t.Grid.Locale[i.locale]);var a=r.GroupCaptionFormat,d=a.indexOf("{{if"),h=a.indexOf(" {{else}}"),c=a.slice(d,h).replace("{{if count == 1 }}",""),u={EmptyRecord:r.EmptyRecord,GroupCaptionFormat:a.slice(0,d),GroupText:c,True:r.True,False:r.False};for(t.isNullOrUndefined(this.model)||(this.model.locale=i.locale.concat(JSON.stringify(u))),i.locale=i.locale.concat(JSON.stringify(u)),n=0;n<i.columns.length;n++)if(i.columns[n].editType!=s)switch(i.columns[n].editType){case"stringedit":case"edittemplate":i.columns[n].editType="string";break;case"numericedit":i.columns[n].editType="numeric";break;case"dropdownedit":i.columns[n].editType="dropdown";break;case"booleanedit":i.columns[n].editType="boolean"}for(n=0;n<i.filterSettings.filteredColumns.length;n++)"equal"==i.filterSettings.filteredColumns[n].operator?i.filterSettings.filteredColumns[n].operator="equals":"notequal"==i.filterSettings.filteredColumns[n].operator&&(i.filterSettings.filteredColumns[n].operator="notequals");if(i.showStackedHeader)for(i.stackedHeaderRow=i.stackedHeaderRows,n=0;n<i.stackedHeaderRow.length;n++)for(i.stackedHeaderRow[n].stackedHeaderColumn=i.stackedHeaderRow[n].stackedHeaderColumns,l=i.stackedHeaderRow[n].stackedHeaderColumn,o=0;o<l.length;o++)i.stackedHeaderRow[n].stackedHeaderColumn[o].column=e.isArray(l[o].column)?l[o].column:l[o].column.split(",");return i},sendDataRenderingRequest:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f;if(this._templateRefresh&&(this.refreshTemplate(),this._templateRefresh=!1),this.setFormat(),this.model.scrollSettings.enableVirtualization||(this._previousColumnIndex=null,this._previousRowCellIndex=null,this._previousIndex=null),"add"==i.requestType||"grouping"==i.requestType||null!=this.model.currentViewData&&this.model.currentViewData.length)switch(i.requestType){case t.Grid.Actions.Refresh:case t.Grid.Actions.Paging:case t.Grid.Actions.Sorting:case t.Grid.Actions.Filtering:case t.Grid.Actions.Save:case t.Grid.Actions.Cancel:case t.Grid.Actions.Delete:case t.Grid.Actions.Search:case t.Grid.Actions.Reorder:case t.Grid.Actions.BatchSave:if(s=this.model.groupSettings.groupedColumns,this.model.allowGrouping&&i.requestType==t.Grid.Actions.Refresh&&0==s.length&&this.element.find(".e-grouptopleftcell").length>0&&this.element.children(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this.model.allowGrouping||(s=[]),0==s.length){var _,v=document.createElement("div"),b=-1,w=!1;if(this.phoneMode||this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),(null!=this.model.childGrid||null!=this.model.detailsTemplate)&&this.getContentTable().find("colgroup").first().prepend(this._getIndentCol()),n=this._currentPage(),("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"normal"==this.model.editSettings.editMode)&&("cancel"==i.requestType||"save"==i.requestType)&&(this._editFormHeight=this.element.find(".gridform").closest("tr").height()),this.model.scrollSettings.frozenColumns>0)v.innerHTML=this._renderByFrozenDesign();else{i.data&&((_=document.createElement("div")).innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](i.data),"</table>"].join(""),this._dataSource()instanceof t.DataManager&&i.requestType==t.Grid.Actions.Save&&(b=this._getDataIndex(this.model.currentViewData,i.data),w=this._dataSource().adaptor instanceof t.remoteSaveAdaptor)),null,l=!this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||t.isNullOrUndefined(this._currentVIndex)||"save"!=i.requestType&&"cancel"!=i.requestType&&"delete"!=i.requestType?this.model.currentViewData:t.isNullOrUndefined(this._lastVirtualPage)?this._virtualLoadedRecords[this._currentVIndex]:this._lastVirtualPage,v.innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](l),"</table>"].join("");var C=this.getContentTable().get(0),y=C.lastChild,S=this.getContentTable().first().find("tbody").first();if("save"!=i.requestType&&"cancel"!=i.requestType||"batch"==this.model.editSettings.editMode||this.model.scrollSettings.allowVirtualScrolling)"delete"!=i.requestType||this.model.scrollSettings.allowVirtualScrolling?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):(this._isUnboundColumn&&($editedrow=this.element.find(".e-editedrow"),$oldChild=this.getContentTable().find(".e-editedrow").get(0),$newChild=$editedrow.length?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,0==$editedrow.length||"normal"!=this.model.editSettings.editMode&&"externalform"!=this.model.editSettings.editMode&&"externalformtemplate"!=this.model.editSettings.editMode?"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedrow.prev("tr").get(0),$editedrow.remove()):$oldChild=$editedrow.get(0):e($oldChild).replaceWith(e($newChild))),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&this.getContentTable()[0].rows.length!=this.model.currentViewData.length&&(this.getContentTable().find("tr").length&&this._excludeDetailRows().length?this.multiDeleteMode?(p=v.firstChild.firstChild.rows.length,g=e(v.firstChild.firstChild.rows).slice(p-this.selectedRowsIndexes.length,p),e(y).append(g)):y.appendChild(v.firstChild.firstChild.lastChild):e(y).prepend(v.firstChild.firstChild.rows)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(f=this.getContentTable().find(".e-detailrow:visible"),e.each(f,function(e){0==f.eq(e).closest("tr").prev().children(".e-detailrowexpand").length&&f.eq(e).remove()})),this._gridRows=C.rows,this.model.enableAltRow&&this._refreshAltRow());else{if(rowIndex=-1!=this.model.editSettings.editMode.indexOf("inlineform")?t.isNullOrUndefined(i.selectedRow)?this._selectedRow():i.selectedRow:this.getContentTable().find(".e-"+i.action+"edrow").index(),o=this._currentTrIndex,-1==rowIndex&&(rowIndex=o),null!=this.model.detailsTemplate||null!=this.model.childGrid)for(r="inlineform"==this.model.editSettings.editMode?e(e(y.childNodes).not(".e-detailrow")[rowIndex]):e(y.childNodes[rowIndex]),a=e(y.childNodes).not(".e-detailrow"),u=0;u<a.length;u++)r.is(a[u])&&(rowIndex=u);if("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){if("add"==i.action&&!this.getContentTable().find(".e-addedrow").length)break;$oldChild=this.getContentTable().find(".e-addedrow").get(0),$editedTr=this.getContentTable().find(".e-editedrow"),$newChild=$editedTr.length||"cancel"==i.requestType?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,$editedTr.length?(this.model.editSettings.showAddNewRow&&"top"==this.model.editSettings.rowPosition&&(rowIndex-=1),$newChild=v.firstChild.firstChild.childNodes[rowIndex],"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedTr.prev("tr").get(0),$editedTr.remove()):$oldChild=$editedTr.get(0),d=e($newChild),m=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next("tr.e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),"cancel"==i.requestType?(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").addClass("e-showaddrow"),m.replaceWith(d)):!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(null!=this.model.detailsTemplate&&m.next("tr.e-detailrow").length&&y.removeChild(m.next("tr.e-detailrow").get(0)),m.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&y.appendChild(v.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this.model.currentViewData[rowIndex][this._primaryKeys[0]]!=i.data[this._primaryKeys[0]]?e(y).replaceWith(e(v).find("tbody")):y.replaceChild($newChild,$oldChild),this.model.editSettings.showAddNewRow&&("top"==this.model.editSettings.rowPosition?y.firstChild.remove():y.lastChild.remove())):(d=e($newChild),m=e($oldChild),"add"==i.action&&"save"==i.requestType&&this.model.editSettings.showAddNewRow&&this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&("bottom"==this.model.editSettings.rowPosition?y.lastChild.previousSibling.remove():y.lastChild.remove()),"cancel"==i.requestType||this._dataSource()instanceof t.DataManager||1!=this._currentPage()||"save"==i.requestType&&!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount==this._previousFilterCount?(t.isNullOrUndefined($oldChild)||(m.remove(),this._dataSource()instanceof t.DataManager&&-1!=b?0==b?y.insertBefore($newChild,y.children[b]):d.insertAfter(y.children[b-1]):this._dataSource()instanceof t.DataManager&&!w||1==this._currentPage()||"save"!=i.requestType||e(y).prepend(e(v.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&(this._dataSource()instanceof t.DataManager&&-1==b&&!w&&"save"!=i.requestType||"save"!=i.requestType&&!(this._dataSource()instanceof t.DataManager))&&"cancel"==i.requestType&&!this.model.editSettings.showAddNewRow&&C.lastChild.appendChild(v.firstChild.firstChild.lastChild)),"cancel"!=i.requestType||-1==this._selectedRow()||this._enableCheckSelect||this.clearSelection()):1==this.model.currentViewData.length?(e(y).empty(),y.appendChild($newChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):"bottom"==this.model.editSettings.rowPosition?(S.prepend($oldChild),y.replaceChild($newChild,$oldChild)):y.replaceChild($newChild,$oldChild))}else if("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)if($editedTr=this.element.find(".e-editedrow"),"cancel"!=i.requestType&&($editedTr.length||t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount!=this._previousFilterCount))if($editedTr.length){if($newChild=v.firstChild.firstChild.childNodes[rowIndex],$oldChild=this._excludeDetailRows(y.childNodes)[rowIndex],null!=this.model.allowCellMerging&&(m=e($oldChild),e($oldChild.childNodes).hasClass("e-merged")))for(h=m.children(".e-merged").index(),c=$oldChild.children[h].colSpan,u=0;u<c;u++)$newChild.childNodes[h+u].className+=" e-merged e-hide",$newChild.childNodes[h].colSpan=u+1;null!=this.model.detailsTemplate&&($oldChild=e(y.childNodes).not(".e-detailrow").eq(rowIndex).get(0)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next("tr.e-detailrow:visible").length&&e($newChild).find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(m=e($oldChild),null!=this.model.detailsTemplate&&m.next("tr.e-detailrow").length&&y.removeChild(m.next("tr.e-detailrow").get(0)),m.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&y.appendChild(v.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this.model.currentViewData[rowIndex][this._primaryKeys[0]]!=i.data[this._primaryKeys[0]]?e(y).replaceWith(e(v).find("tbody")):y.replaceChild($newChild,$oldChild)}else 1==this.model.currentViewData.length&&0==this.getContentTable().find("td.e-rowcell").length?($newChild=v.firstChild.firstChild.firstChild,e(y).empty(),y.appendChild($newChild)):(newChild=$editedTr.length||"cancel"==i.requestType?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,this._dataSource()instanceof t.DataManager?-1!=b&&(0==b?y.insertBefore(newChild,y.children[b]):e(newChild).insertAfter(y.children[b-1]),this.model.allowPaging&&(this.model.pageSettings.pageSize<=this.model.currentViewData.length||b==this.model.pageSettings.pageSize-1)&&y.removeChild(y.lastChild)):(this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):1==this._currentPage()?this.getContentTable().find("tbody").first().prepend(e(newChild)):this.getContentTable().find("tbody").first().prepend(e(v.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&y.removeChild(y.lastChild)),null!=this.model.detailsTemplate&&e(C.lastChild.lastChild).children(".e-detailrowexpand").length&&y.removeChild(y.lastChild));else $newChild=v.firstChild.firstChild.childNodes[rowIndex],$oldChild=y.childNodes[rowIndex],d=e($newChild),m=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next(".e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),m.replaceWith(d),this._enableCheckSelect||this.clearSelection(),this.model.allowPaging&&this._refreshGridPager();this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():C.rows,this.model.enableAltRow&&this._refreshAltRow()}}this._currentJsonData=this.model.currentViewData,this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():this.getContentTable().get(0).rows,this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),("sorting"==i.requestType||"filtering"==i.requestType||"save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&("filtering"==i.requestType&&(this.getContent().first().ejScroller("refresh").ejScroller("isVScroll")?this.element.find(".gridheader").addClass("e-scrollcss"):this.element.find(".gridheader").removeClass("e-scrollcss"),this._refreshVirtualPagerInfo()),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(n),"filtering"==i.requestType&&this.getContent().first().ejScroller("refresh")),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager()),this.model.scrollSettings.enableVirtualization||this._eventBindings();break}case t.Grid.Actions.Grouping:this._group(i),this._refreshStackedHeader();break;case t.Grid.Actions.BeginEdit:this._edit(i);break;case t.Grid.Actions.Add:this._add(i);break;case t.Grid.Actions.Ungrouping:this._ungroup(i);break;case t.Grid.Actions.VirtualScroll:this._isVirtualRecordsLoaded||(this.model.scrollSettings.enableVirtualization?this._replacingVirtualContent():this._replacingContent())}else"reorder"==i.requestType&&this.model.groupSettings.groupedColumns.length>0?this._group(i):((t.isNullOrUndefined(this.model.currentViewData)||0==this.model.currentViewData.length)&&!this.phoneMode&&("refresh"==i.requestType&&0==this.model.scrollSettings.frozenColumns&&this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),("cancel"==i.requestType||"refresh"==i.requestType)&&this.model.scrollSettings.frozenColumns>0&&this._removeFrozenTemplate()),this._newungroup(i));this._showGridLines(),this._completeAction(i)},_removeFrozenTemplate:function(){this.getContent().find(".e-content").empty();var i=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),s=e(document.createElement("tbody"));i.append(this.getHeaderTable().find("colgroup").clone()).append(s),this.getContent().find(".e-content").html(i),this.setGridContentTable(i)},_showGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_showHeaderGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getHeaderContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_newungroup:function(e){"ungrouping"==e.requestType?this._ungroup(e):this.getContentTable().find("tbody").empty().first().append(this._getEmptyTbody())},setFormat:function(){for(var e,i,s,n=[],l=0;l<this.model.columns.length;l++)"date"==this.model.columns[l].type&&n.push(this.model.columns[l]);if(n.length>0&&!t.isNullOrUndefined(this.model.currentViewData))for(l=0,e=this.model.currentViewData.length;l<e;l++)for(i=0;i<n.length;i++)s=t.getObject(n[i].field,this.model.currentViewData[l]),/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(s)&&t.createObject(n[i].field,new Date(s),this.model.currentViewData[l])},_completeAction:function(i){var n,l,o,r,a,d;-1!=this.model.editSettings.editMode.indexOf("dialog")&&("save"==i.requestType||"cancel"==i.requestType)&&e("#"+this._id+"_dialogEdit").data("ejDialog")&&e("#"+this._id+"_dialogEdit").ejDialog("close"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1),this._confirmedValue=!1,t.Grid.Actions.Grouping==i.requestType&&t.isNullOrUndefined(i.columnName)||"refresh"==i.requestType&&this._LastColumnUnGroup?this._LastColumnUnGroup=!1:("ascending"!=i.columnSortDirection&&"descending"!=i.columnSortDirection||t.isNullOrUndefined(i.columnName)||(n=this.getColumnByField(i.columnName),this.model.allowSorting&&this.model.allowMultiSorting?this._scolumns.push(n.field):this._gridSort=n.field),"beginedit"!=i.requestType&&"add"!=i.requestType&&(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns(),("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._isAddNew=!1,this.model.isResponsive&&this.model.minWidth&&this.windowonresize()),this.initialRender||!(t.Grid.Actions.UnGrouping==i.requestType||this.model.groupSettings.groupedColumns.length>0)||e("#"+this._id+"EditForm").length||this._recalculateIndentWidth(),t.Grid.Actions.Paging==i.requestType||t.Grid.Actions.BatchSave==i.requestType?this._refreshGridPager():t.Grid.Actions.Sorting==i.requestType&&this.model.allowSorting||t.Grid.Actions.Refresh==i.requestType||t.Grid.Actions.Cancel==i.requestType?(t.gridFeatures.sort&&null!==this.getHeaderTable()&&this._sortCompleteAction(i),this.model.allowPaging&&(l=this.getPager().ejPager("option"),this._currentPage(l.currentPage),delete l.currentPage,e.extend(this.model.pageSettings,l),delete this.model.pageSettings.masterObject,this._refreshGridPager()),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i)):t.Grid.Actions.Delete==i.requestType||t.Grid.Actions.Save==i.requestType||t.Grid.Actions.Search==i.requestType?(this._editEventTrigger(i),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i),this.model.allowPaging&&this._refreshPagerTotalRecordsCount()):t.Grid.Actions.Filtering==i.requestType?this._filterCompleteAction():t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType?this._editCompleteAction(i):(t.Grid.Actions.Grouping==i.requestType||t.Grid.Actions.Ungrouping==i.requestType)&&this["_"+i.requestType+"CompleteAction"](i),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this.refreshToolbar(),!this.initialRender&&this.model.showSummary&&this.model.summaryRows.length>0&&(this.model.currentViewData.length?(this.element.children(".e-gridfooter").length||this._renderGridFooter().insertAfter(this.getContent()),this.getFooterTable().find("colgroup").remove(),this.model.scrollSettings.frozenColumns>0?(this.getFooterTable().eq(0).append(this.getHeaderTable().eq(0).find("colgroup").clone()),this.getFooterTable().eq(1).append(this.getHeaderTable().eq(1).find("colgroup").clone())):this.getFooterTable().append(this.getHeaderTable().find("colgroup").clone()),this._createSummaryRows(this.getFooterTable())):this.element.children(".e-gridfooter").remove()),!this.initialRender&&t.gridFeatures.selection&&(this.getContent().find("td.e-selectionbackground").length||this._setCurrentRow(i.requestType),"virtualscroll"!=i.requestType&&this.clearColumnSelection()&&e(this.getHeaderTable().find("th.e-headercell")).removeClass("e-columnselection")),"batch"==this.model.editSettings.editMode&&this.refreshBatchEditMode(),(!this.initialRender&&(this.model.allowScrolling||this.model.isResponsive)&&(this._checkScrollActions(i.requestType)||-1!=this.model.editSettings.editMode.indexOf("inline")&&"beginedit"==i.requestType)||"continuous"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType)&&(this.model.isResponsive&&this.model.minWidth?this.windowonresize():this._refreshScroller(i)),"normal"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType&&this.getContent().find("div:first").scrollLeft(this.getScrollObject().scrollLeft()),null!=this._customPop&&"sorting"!=i.requestType&&this._customPop.hide(),!this.model.allowScrolling||this.initialRender||this.model.scrollSettings.enableVirtualization||this.model.isResponsive||this.getContentTable().find("tr:last").find("td").addClass("e-lastrowcell"),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0&&this._groupingCompleteAction(i),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length<1&&this._ungroupingCompleteAction(i),this.model.textWrapSettings&&this._setTextWrap(),i.requestType==t.Grid.Actions.Reorder&&this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").data("ejDialog").isOpened()&&e("#"+this._id+"_ccTail").first().remove(),o=this.element.find(".e-ccButton").outerHeight(),this.element.find(".e-ccButton").first().remove(),e("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-o),this._renderColumnChooser()),(this._isUngrouping||this._columnChooser)&&"refresh"==i.requestType||(this._trigger("actionComplete",i),this._isUngrouping=!1,this._columnChooser=!1),(!this._isUngrouping&&!this.initialRender||this._showHideColumns||this._columntemplaterefresh)&&this._trigger("refresh"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&(this.initialRender||0!=this.getContentTable().find("tr.e-addedrow").length||0==this.element.find(".e-gridcontent").find("tr").length||this._startAdd(),"searching"==i.requestType&&this.element.find(".e-gridtoolbar").find("li#"+this._id+"_search input").focus()),(t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType)&&e.isFunction(e.validator)&&this.setValidation(),this.initialRender||(this.model._groupingCollapsed=[]),this._updateDataSource&&this._gridRecordsCount&&this.model.allowFiltering&&(this._initColumns(this.model.currentViewData[0]!=s?this.model.currentViewData[0]:this.model.currentViewData.value),this._renderFilterDialogs(),this._updateDataSource=!1),"fixed"!=this.model.columnLayout||this.model.isEdit||this.setWidthToColumns(),this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),!this._isLocalData&&this.model.allowScrolling&&0!=this.element.width()&&this.refreshScrollerEvent(),!this.initialRender&&this._enableCheckSelect&&(r=this._checkSelectedRowsIndexes[this._currentPage()-1],a=this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall"),this._selectAllCheck||a.prop("checked",!1),!this._isMapSelection&&r&&r.length>this._gridRows.length&&r.splice(this._gridRows.length,r.length-this._gridRows.length),this._isMapSelection?this._mappingSelection():"paging"!=i.requestType&&"save"!=i.requestType&&"beginedit"!=i.requestType&&"cancel"!=i.requestType?this._checkSelectedRowsIndexes=[]:r&&r.length&&this.selectRows(r),this._selectAllCheck&&(d=a.prop("checked")^this.selectedRowsIndexes.length==this.model.currentViewData.length,this.model.groupSettings.groupedColumns.length&&(d=!d),a[0].checked=d?a[0].checked:!a[0].checked)))},_getDataIndex:function(e,t){for(var i,s,n=0,l=0,o=e.length;l<o;l++){for(i=0,s=this._primaryKeys.length;i<s&&!this._checkPrimaryValue(e[l][this._primaryKeys[i]],t[this._primaryKeys[i]],this._primaryKeys[i]);i++)i==s-1&&(n=1);if(n)return l}return-1},_checkPrimaryValue:function(e,t,i){return"string"==this.getColumnByField(i).type&&(e=e.trim()),e!=t},_eventBindings:function(){var i,s,n,l,o,r,a,d,h=this.model.scrollSettings.frozenColumns>0?this._gridRows[0].length:this._gridRows.length,c=0,u=this.model.pageSettings.pageSize;if(t.gridFeatures.common&&this._refreshUnboundTemplate(this.getContentTable()),0!=this._gridRecordsCount&&(null!=this.model.queryCellInfo||null!=this.model.rowDataBound||null!=this.model.mergeCellInfo||null!=this.model.templateRefresh))for(s=0;s<h;s++){if(n=null,c=s,this.model.scrollSettings.allowVirtualScrolling&&s<u)if(this.model.scrollSettings.enableVirtualization){if(n=e(this._gridRows).eq(s),l=parseInt(e(n).attr("name"),32),-1!=e.inArray(l,this._queryCellView))continue;this._virtualLoadedRecords[l]&&(o=this._virtualLoadedRecords[l][s%this._virtualRowCount]),c=l*this._virtualRowCount+s%this._virtualRowCount}else{for(r=0;r<this._cloneQuery.queries.length;r++)i="onPage"==this._cloneQuery.queries[r].fn&&this._cloneQuery.queries[r].e.pageIndex-1;0!=(a=u*i)&&(c=(n=this.getContentTable().find("tr[name="+a+"]").eq(s)).index())}else this.model.scrollSettings.enableVirtualization&&(n=e(this._gridRows).eq(s));if((n=n||this.getRowByIndex(c)).hasClass("e-virtualrow")||t.isNullOrUndefined(this._currentJsonData[s]||o))break;d=this.model.scrollSettings.enableVirtualization?o:this._currentJsonData[s],this._rowEventTrigger(n,d)}},_rowEventTrigger:function(i,s){var n,l,o,r={row:i,data:s};for(this._trigger("rowDataBound",r),i.cells,n=e(i).find(".e-rowcell"),l=0;l<n.length;l++)r={cell:n[l],data:s,text:n[l].innerHTML},o=this._getForeignKeyData(r.data),e(n[l]).hasClass("e-rowcell")&&(r.column=this.model.columns[l]),t.isNullOrUndefined(o)||(r.foreignKeyData=o),1==this.model.allowCellMerging&&(this._cellMerging(r),this._trigger("mergeCellInfo",r)),this._trigger("queryCellInfo",r),e(n[l]).hasClass("e-templatecell")&&(r={cell:n[l],column:this.model.columns[l],data:s,rowIndex:e(i).index()},this._trigger("templateRefresh",r))},setWidthToColumns:function(){var i,n,l,o,r,a,d,h,c,u,m,p=this.getContentTable().children("colgroup").find("col"),g=this.getHeaderTable().children("colgroup").find("col"),f=[],_=this.element.width(),v=0,b=0,w=0,C=!t.isIOSWebView()&&this.getBrowserDetails();for(this.model.groupSettings.groupedColumns.length&&!this.model.allowScrolling&&this.model.groupSettings.showGroupedColumn&&C&&"msie"==C.browser&&parseInt(C.version,10)>8&&p.first().css("width",3e3/_+"%"),t.isNullOrUndefined(this.model.detailsTemplate)||(i=this.model.groupSettings.groupedColumns.length,n=0!=this.model.groupSettings.groupedColumns.length?1:0,p.eq(n).css("width",this._detailsOuterWidth),g.eq(i).css("width",this._detailsOuterWidth)),this._detailColsRefresh(),p=this._$headerCols,g=this._$contentCols,u=0;u<g.length;u++){if(this.model.allowResizeToFit&&this.model.columns[u].width===s){hCellIndex=this.model.groupSettings.groupedColumns.length?u+this.model.groupSettings.groupedColumns.length:u;var y=this._resizer._getContentWidth(u),S=this.getHeaderTable().find(".e-headercelldiv").eq(hCellIndex),x=this._resizer._getHeaderContentWidth(S);w="normal"==this.model.editSettings.editMode&&(this.model.isEdit||this._isAddNew)?"firefox"==C.browser?parseInt(p[u].style.width,10):p.eq(u).width():(y>x?y:x)+parseInt(S.css("padding-left"),10),this.columnsWidthCollection[u]=w,b+=this.model.columns[u].visible?w:0}else b+=this.model.columns[u].visible?parseInt(this.model.columns[u].width,10):0;this.model.columns[u].priority&&g.eq(u).addClass("e-table-priority-"+this.model.columns[u].priority),t.isNullOrUndefined(this.columnsWidthCollection[u])?this.model.allowScrolling&&f.push(this.model.columns[u]):(p.eq(u).width(this.columnsWidthCollection[u]),g.eq(u).width(this.columnsWidthCollection[u]))}for(l=f.filter(function(e){return!e.visible}).length,o=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),u=0;u<f.length;u++)if(f[u].visible){var T=t.isNullOrUndefined(f[u].field)?this.getColumnIndexByField(f[u].field):this.getColumnIndexByHeaderText(f[u].headerText),k=o.eq(T)[0],D=k.getBoundingClientRect().width;t.isNullOrUndefined(D)&&(D=k.offsetWidth),parseInt(D)<15&&(D=(_/this.model.columns.length).toFixed(2),bSize=(_/(this.model.scrollSettings.buttonSize||18)/100).toFixed(2),D-=bSize),p.eq(T).css("width",D+"px"),g.eq(T).css("width",D+"px"),this.model.columns[T].width=D,this.columnsWidthCollection[T]=parseFloat(D)}if(l||(this._undefinedColsCollection=null),"fixed"==this.model.columnLayout){this.model.scrollSettings&&0==this.model.scrollSettings.frozenColumns&&(this.getHeaderTable().width(b),this.getContentTable().width(b));var I=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),O=this.getHeaderContent().width()>I?"addClass":"removeClass",A=this.getHeaderTable(),L=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(A=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),L=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),A[O]("e-tableLastCell"),L[O]("e-tableLastCell")}if(!this.model.allowScrolling&&this.model.allowResizeToFit&&!this.model.isResponsive&&b>_&&(this.model.allowScrolling=!0,this.model.scrollSettings.width=_,this.getHeaderTable().parent().addClass("e-headercontent"),this._renderScroller(),!this.model.scrollSettings.frozenColumns>0&&this.getHeaderTable().width(_)),this.model.isEdit&&(d=p.clone(),this.model.editSettings.showAddNewRow&&(r=this.getContentTable().find(".e-editedrow")),$colGroup=this.model.scrollSettings.frozenColumns>0?this.getContent().find(".gridform").find("colgroup"):t.isNullOrUndefined(r)||1!=r.length?e("#"+this._id+"EditForm").find("colgroup"):r.find("colgroup"),this.model.scrollSettings.frozenColumns>0&&$colGroup.first().empty().append(d.splice(0,this.model.scrollSettings.frozenColumns)),$colGroup.last().empty().append(d),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&$colGroup.prepend(this._getIndentCol())),this.model.groupSettings.groupedColumns.length)for(a=this.getContentTable().find(".e-recordtable").children("colgroup"),u=0;u<a.length;u++)d=p.clone(),h=null!=this._detailsOuterWidth?this._detailsOuterWidth:"30px",(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&d.splice(0,0,e(this._getIndentCol()).width(h)[0]),a.eq(u).empty().append(d);if(this.model.scrollSettings.frozenColumns>0){for(c=0,u=0;u<this.model.columns.length;u++)c+=this.model.columns[u].visible?parseInt(this.columnsWidthCollection[u],10):0,this.model.scrollSettings.frozenColumns-1==u&&(v=Math.ceil(c));this.element.width(this.model.scrollSettings.width||this.model.width),(m=this.element.find(".e-gridcontent").children().first().width())>c?c=m+(this.getContentTable().height()<this.model.scrollSettings.height&&this.getScrollObject()._vScroll?this.model.scrollSettings.buttonSize:0):c+=this.getHeaderContent().height()<this.model.scrollSettings.height?this.model.scrollSettings.buttonSize:0,this.getContent().find(".e-frozencontentdiv").outerWidth(v).end().find(".e-movablecontentdiv").outerWidth(c-v),this.getHeaderContent().find(".e-frozenheaderdiv").outerWidth(v).end().find(".e-movableheaderdiv").outerWidth(c-v)}!this.initialRender&&this.model.allowResizeToFit&&this.model.allowScrolling&&this.model.scrollSettings.enableVirtualization&&(_=this.getHeaderTable().width()>this.getContentTable().width()?this.getHeaderTable().width():this.getContentTable().width(),this.getContentTable().width(_),this.getHeaderTable().width(_))},_initialEndRendering:function(){var i,s,n;if(this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),("batch"==this.model.editSettings.editMode||this.model.editSettings.showDeleteConfirmDialog)&&this._renderConfirmDialog(),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&0==e("#"+this._id+"AlertDialog").length&&this._renderAlertDialog(),(this.model.allowMultiSorting||"multiple"==this.model.selectionType)&&this._renderMultiTouchDialog(),this.model.scrollSettings.frozenColumns>0&&!this.model.allowScrolling)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsScrollAlert),void this._alertDialog.ejDialog("open");if(this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this._createPagerStatusBar(),this._getRowHeights(),0!=this.element.width()&&this.model.allowScrolling)this._renderScroller(),this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0||(this.setWidthToColumns(),null!=(i=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject())&&i.refresh(),this._isLocalData&&this.refreshScrollerEvent());else if(this.model.allowScrolling&&this.element.width()<=0)return s=this,void(n=setInterval(function(){if(!t.isNullOrUndefined(s.element)&&s.element.width()>0&&!t.isNullOrUndefined(s.element.width())){if(s._renderScroller(),!(s.model.scrollSettings.frozenRows>0||s.model.scrollSettings.frozenColumns>0)){s.setWidthToColumns();var e=t.isNullOrUndefined(s.getContent().data("ejScroller"))?null:s.getScrollObject();null!=e&&e.refresh(),s.refreshScrollerEvent()}s._endRendering(),clearInterval(n)}},100));this._endRendering()},_endRendering:function(){var e,i;!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.model.allowScrolling&&(e=this.getScrollObject()),i=this.model.enableRTL?"e-summaryscroll e-rtl":"e-summaryscroll",this.model.allowScrolling&&this.model.showSummary&&(e._vScroll&&this.element.find(".e-summaryrow.e-scroller").addClass(i),this.getFooterTable()&&this.getFooterTable().find("colgroup").first().replaceWith(this.getHeaderTable().find("colgroup").clone())),this._addMedia(),this.model.allowScrolling&&this.model.allowTextWrap&&!this.model.scrollSettings.allowVirtualScrolling&&this.getContent().first().ejScroller("refresh"),this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),1!=this._currentPage()||this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=this._currentJsonData),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView():this._refreshVirtualContent(this._currentPage()),this.getContent().first().ejScroller("refresh"),this.getContent().ejScroller("isVScroll")?(this.element.find(".e-gridheader").addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width())):this.element.find(".e-gridheader").removeClass("e-scrollcss")),1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0&&this._selectingMultipleRows(this._selectedMultipleRows()),-1!=this._selectedRow()&&0==this._selectedMultipleRows().length&&(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())),!this.model.allowFiltering||"filterbar"!=this.model.filterSettings.filterType||this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling||this._createPagerStatusBar(),t.gridFeatures.common&&this.rowHeightRefresh(),t.gridFeatures.filter&&-1!=["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this._recalculateIndentWidth(),this.initialRender&&(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow()},_addLastRow:function(){var i,s=this.getContentTable().find("tr:last").find("td"),n=0;if(this.model.allowScrolling&&!this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(this.model.dataSource)&&!t.isNullOrUndefined(this.getRows())){for(i=0;i<this.getRows().length;i++)n+=e(this.getRows()[i]).height();n<this.getContent().height()-1&&s.addClass("e-lastrowcell")}this.model.scrollSettings.allowVirtualScrolling&&this.getContentTable().height()<this.getContent().height()&&s.addClass("e-lastrowcell")},_addMedia:function(){if("string"!=typeof this.model.scrollSettings.width&&this.model.scrollSettings.width>0?this._responsiveScrollWidth=this._originalScrollWidth=this.model.scrollSettings.width:this._originalScrollWidth=this.element.width(),"string"!=typeof this.model.scrollSettings.height&&this.model.scrollSettings.height>0&&(this._responsiveScrollHiehgt=this.model.scrollSettings.height),this.model.minWidth&&this.model.isResponsive){if(this._$onresize=e.proxy(this.windowonresize,this),e(window).on("resize",this._$onresize),e.isFunction(window.matchMedia)){var t=window.matchMedia("(max-width: 768px)");this._mediaStatus=t.matches}this.windowonresize()}},_getNoncontentHeight:function(){var e=this.getHeaderContent().outerHeight();return this.model.toolbarSettings.showToolbar&&(e+=this.element.find(".e-gridtoolbar").outerHeight()),this.model.allowPaging&&(e+=this.element.find(".e-pager").outerHeight()),this.model.showColumnChooser&&(e+=this.element.find(".e-ccButton").outerHeight()),this.model.allowGrouping&&this.model.groupSettings.showDropArea&&(e+=this.element.find(".e-groupdroparea").outerHeight()),this.model.showSummary&&(e+=this.element.find(".e-gridsummary").outerHeight()),e},setDimension:function(e,t){var i=e-this._getNoncontentHeight();this.model.scrollSettings.height=i,this.model.scrollSettings.width=t,this._renderScroller()},_getVisibleColumnsWidth:function(){for(var e=0,t=0;t<this.columnsWidthCollection.length;t++)this.model.columns[t].visible&&(e+=this.columnsWidthCollection[t]);return e},setPhoneModeMaxWidth:function(e){this._gridPhoneMode=e},_mediaQueryUpdate:function(i,s,n,l){var o,r;if(window.innerWidth<=this._gridPhoneMode&&this.model.enableResponsiveRow)return(o=this.getContentTable()[0].style).removeAttribute?o.removeAttribute("min-width"):o.removeProperty("min-width"),void(this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy"));i?(this.model.scrollSettings.width=t.isNullOrUndefined(this._responsiveScrollWidth)?n:Math.min(this._responsiveScrollWidth,n),r=Math.min(l,s)-this._getNoncontentHeight(),r=t.isNullOrUndefined(this._responsiveScrollHiehgt)?r:Math.min(this._responsiveScrollHiehgt,r),(this.element.parent().is("body")&&e(document).height()>r||r>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(r-=parseInt(this.element.parent().css("margin-bottom")+1)),r="auto"!=this.model.scrollSettings.height?r:this.model.scrollSettings.height,(this.model.minWidth>n||this.getContentTable().width()>n)&&s>l&&(r="auto"!=r?r+this.model.scrollSettings.buttonSize:r),t.isNullOrUndefined(this.getRows())&&(r="100%"),this.model.scrollSettings.height=this._isHeightResponsive?r:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()):(this.model.scrollSettings.width="100%",t.isNullOrUndefined(this._responsiveScrollWidth)||(this.model.scrollSettings.width=Math.min(this._responsiveScrollWidth,n)),r=Math.min(l,s)-this._getNoncontentHeight(),t.isNullOrUndefined(this._responsiveScrollHiehgt)||(r=Math.min(this._responsiveScrollHiehgt,r)),(this.element.parent().is("body")&&e(document).height()>r||r>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(r-=parseInt(this.element.parent().css("margin-bottom"))),r="auto"!=this.model.scrollSettings.height?r:this.model.scrollSettings.height,(!t.isNullOrUndefined(this._responsiveScrollWidth)&&this.model.scrollSettings.width==this._responsiveScrollWidth&&(this.model.minWidth>this._responsiveScrollWidth||this._getVisibleColumnsWidth()>this._responsiveScrollWidth)||t.isNullOrUndefined(this._responsiveScrollWidth)&&(this.getRowHeight()==r||this._isHeightResponsive)&&this.getContentTable().width()>n)&&(r="auto"!=r?r+this.model.scrollSettings.buttonSize:r),t.isNullOrUndefined(this.getRows())&&(r="100%"),this.getContent().height()>=r&&!this._resize&&!this.initialRender&&"string"==typeof this.model.scrollSettings.width&&(this.model.scrollSettings.width=n),this.model.scrollSettings.height=this._isHeightResponsive?r:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()),this._resize=!1},windowonresize:function(i){var s,n;i&&"resize"==i.type&&(this._resize=!0),this.model.scrollSettings.width=this._responsiveScrollWidth,this.element.css("width","100%"),this.getContentTable().width("100%"),this.getHeaderTable().width("100%"),this.getContentTable().css("minWidth",this.model.minWidth),s=this.element.width();var l=e(window).height()-this.element.offset().top,o=(t.isNullOrUndefined(this.getRows())||this.getRows().length,this.element.parent().is(e("body"))||this.element.parent().height()==e("body").height()||""==this.element.parent()[0].style.height),r=this.getContentTable()[0].scrollHeight+this._getNoncontentHeight(),a=o?l:this.element.parent().height();r+=parseInt(this.element.parent().css("margin-top")),n=this.model.minWidth>s||a<=r,this._mediaQueryUpdate(n,a,s,r)},_removeMedia:function(){e(window).off("resize",this._$onresize),this.getContentTable().css("min-width",""),this.getHeaderTable().css("min-width",""),this.getContentTable().css("width",""),this.model.scrollSettings.width="auto",this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy")},_getRowHeights:function(){var e,t=this.getRows();if(null!==t)if(this._rowHeightCollection=[],t[1]!==s&&t[1].length&&(this.model.scrollSettings.frozenColumns>0&&t[0]!==s||t[0]!==s&&void 0!==t[0].item&&"number"==typeof t[0].length&&void 0!==t[1].item&&"number"==typeof t[1].length))for(frotrs=t[0],movtrs=t[1],e=0;e<frotrs.length;e++)this._rowHeightCollection[e]=frotrs[e].offsetTop>=movtrs[e].offsetTop?frotrs[e].offsetTop:movtrs[e].offsetTop;else for(e=0;e<t.length;e++)this._rowHeightCollection[e]=t[e].offsetTop;return this._rowHeightCollection},_getEmptyTbody:function(){var i=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length});return e(document.createElement("tr")).append(i)},_getIndentCol:function(){return t.buildTag("col","",{width:"30px"})},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_createSortNumber:function(e,i){return"right"==i.css("text-align")?t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"left"}):t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"right"})},_onFocusIn:function(){var e=this;setTimeout(function(){e.element.removeClass("e-activefocusout")},0)},_onFocusOut:function(){var e=this;setTimeout(function(){e.element.addClass("e-activefocusout")},0)},_wireEvents:function(){this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",".e-gridheader",this._mouseClickHandler),this.model.enableFocusout&&(this._on(this.element,"focusout",this._onFocusOut),this._on(this.element,"focusin",this._onFocusIn)),t.gridFeatures.common&&(this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent > div:first",this._recorddblClickHandler),this.model.rightClick&&this._on(this.element,"contextmenu",this._rightClickHandler),this._on(this.element,"click",".e-gridcontent",this._recordClick),this._enableRowHover(),this.model.enableTouch?this._on(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",e.proxy(this._touchGrid,this)):this.element.addClass("e-touch"),this._on(this.element,"mousedown",".e-gridheader",this._headerMouseDown),this.model.allowRowDragAndDrop&&"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this._on(this.element,"mouseover mouseleave",".e-gridheader:first",this._headerHover),this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._headerHover),this.model.allowResizeToFit&&this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing&&(this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._mouseMove),this._on(this.element,"mouseup",this._mouseUp)),this.model.allowKeyboardNavigation&&(this.element[0].tabIndex=-1==this.element[0].tabIndex?0:this.element[0].tabIndex,this.element[0].accessKey=t.isNullOrUndefined(this.element[0].accessKey)||""==this.element[0].accessKey?"e":this.element[0].accessKey,this._on(this.element,"keyup",this._keyDownHandler))),t.gridFeatures.edit&&(this._enableEditingEvents(),this._on(this.element,"click",".e-gridcontent .e-unboundcelldiv",this._unboundClickHandler)),this.model.allowGrouping&&(this._enableGroupingEvents(),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)),this._enableFilterEvents()},_enableFilterEvents:function(){if((this.model.allowMultiSorting||"multiple"==this.model.selectionType||this.model.allowFiltering)&&this._on(e(document),"mousedown",this._docClickHandler),this.model.allowFiltering){this._off(this.element,"keyup",".e-filterbar input")._on(this.element,"keyup",".e-filterbar input",this._filterBarHandler),this._on(this.element,"focus click",".e-filterbar",this._filterBarClose)}},_docClickHandler:function(i){var s=!t.isIOSWebView()&&this.getBrowserDetails(),n=e(i.target);null!=this._customPop&&0==this.element.find(i.target).length&&this._customPop.hide(),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType?this._$colType&&(e(i.target).find(".e-grid.e-dlgcontainer").length>1||e(i.target).find(".e-excelfilter").length>1)&&(s&&"msie"==s.browser?"BODY"!=i.target.tagName&&(this.isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):this._isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):n.hasClass("e-filtertext")||n.hasClass("e-cancel")||this.getFilterBar().find(".e-cancel").addClass("e-hide"))},_mouseClickHandler:function(i){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,w,C,y,S=e(i.target);if((0==S.closest(".e-grid").length||S.closest(".e-grid").attr("id")===this._id)&&"col-resize"!=this.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow").css("cursor"))if(n=e(i.target).is(".e-ascending, .e-descending")?e(i.target.parentNode):S.hasClass("e-groupheadercell")?S.children("div"):e(i.target),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&(e.fx.off=!0,this._closeFDialog(),e.fx.off=!1),this.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),n.hasClass("e-headercelldiv")||n.hasClass("e-headercell")&&-1==e.inArray("column",this.model.selectionSettings.selectionMode)||!n.hasClass("e-togglegroupbutton")&&n.closest(".e-headercelldiv").length&&-1==e.inArray(n[0].tagName,["SELECT","INPUT","TEXTAREA"])||n.closest(".e-groupheadercell").length&&e(i.target).is(".e-ascending, .e-descending")){if(!this.model.allowSorting||t.gridFeatures.sort===s)return;n=n.hasClass("e-headercelldiv")||n.closest(".e-groupheadercell").length?n:n.hasClass("e-headercell")?n.find(".e-headercelldiv"):n.closest(".e-headercelldiv"),a=n.attr("ej-mappingname"),t.sortOrder.Ascending,this._$prevSElementTarget=this._$curSElementTarget,this._$curSElementTarget=n,l=n.find("span").hasClass("e-ascending")?t.sortOrder.Descending:t.sortOrder.Ascending,"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-sortdirect").hasClass("e-spanclicked")&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-rowselect").is(":visible")||!this._customPop.find(".e-sortdirect").hasClass("e-spanclicked"))&&this.model.allowMultiSorting&&(o=n.offset(),this._customPop.removeAttr("style"),this._customPop.offset({left:o.left,top:o.top-this.getHeaderTable().find(".e-columnheader").height()-n.height()}).find(".e-sortdirect").show().end().find(".e-rowselect").hide().end().show()),this.model.allowMultiSorting&&(i.ctrlKey||this._enableSortMultiTouch)&&(this.multiSortRequest=!0),i.shiftKey&&-1==e.inArray(a,this.model.groupSettings.groupedColumns)&&(this._removeSortedColumnFromCollection(a),this.multiSortRequest=!0,a=null,this.sortColumn(a,l)),t.isNullOrUndefined(a)||this.sortColumn(a,l)}else if(n.hasClass("e-togglegroupbutton")&&this.model.allowGrouping)r=n.parent().attr("ej-mappingname"),n.hasClass("e-togglegroup")&&this.groupColumn(r),n.hasClass("e-toggleungroup")&&this.ungroupColumn(r);else if((n.hasClass("e-filtericon")||n.hasClass("e-filteredicon")||n.hasClass("e-responsivefilterColDiv")||n.parent().hasClass("e-responsivefilterColDiv"))&&(a=n.parent().find(".e-headercelldiv").attr("ej-mappingname")||n.attr("ej-mappingname")||e(n.parent()).attr("ej-mappingname"),this._$prevFieldName=this._$curFieldName,currentColumn=this.getColumnByField(a),d={True:this.localizedLabels.True,False:this.localizedLabels.False},this.model.allowFiltering)){if(h=this,e.each(this.model.columns,function(e,t){t.field==a&&(h._$colType=t.type,h._$curFieldName=t.field,h._$colFormat=t.format,h._$filterType=t.filterType,h._$colForeignKeyField=t.foreignKeyField?t.foreignKeyField:t.field,h._$colForeignKeyValue=t.foreignKeyValue,h._$colDropdownData=t.dataSource)}),("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType)&&(c="#"+this._id+"_"+this._$colType+"Dlg",this._$menuDlgIsOpen=!0,"string"==this._$colType?this._$colForeignKeyValue&&this._$colDropdownData?e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$colForeignKeyValue,key:h._$colForeignKeyField},dataSource:h._$colDropdownData}):e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$curFieldName,key:this._getIdField()},dataSource:this._dataSource()}):"date"==this._$colType?this._$colFormat!=s?(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})):e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:"MM/dd/yyyy"}):"datetime"==this._$colType&&(this._$colFormat!=s&&(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datetimewidget input").ejDateTimePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})),this._setFilterFieldValues(c))),this._mediaStatus=document.documentElement.clientWidth<768,this.model.isResponsive&&this._mediaStatus){var x=this,T=t.buildTag("div.e-resFilterDialogHeaderDiv"),k=t.buildTag("div.labelRes","<span>Filter</span>");e(".e-filterMenuBtn").length>0&&e(".e-filterMenuBtn").remove();var D=t.buildTag("div.e-filterMenuBtn"),I=t.buildTag("input.e-resposnsiveFilterBtnLeft"),O=t.buildTag("input.e-resposnsiveFilterBtnRight");if(T.append(k),T.css("width","100%"),u=e(c).css("padding-left","0px"),n.parent().hasClass("e-responsivefilterColDiv")&&n.hasClass("e-filternone"))h._fltrClrHandler(),n.remove(),e("#responsiveFilter").css("display","block");else if(this.element.css("display","none"),setTimeout(function(){e("#responsiveFilter").css("display","none")}),this._isExcelFilter||"excel"==this._$filterType){if(this._excelDlg=c="#"+this._id+this._$colType+"_excelDlg",t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])){I.ejButton({text:"OK",type:"button",click:function(){x._responsiveFilterClose(),x._excelFilter._openedFltr=e(x._excelDlg),x._excelFilter._fltrBtnHandler(),x._setResponsiveFilterIcon()}}),O.ejButton({text:"Cancel",type:"button",click:function(){e(c).css("display","none"),h.element.css("display","block")}}),e(c).children().not(".e-searchcontainer").remove();var A=this._excelFilter,L=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),R=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"});L.click(function(t){e.proxy(x._closeDivIcon(t),this)}),T.append(L.append(R)),_=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),v=t.buildTag("span.e-icon e-resIcon e-responisveCustomFilter","",{},{closeDialogue:c.slice(1),gridEle:!0}),_.click(function(t){e.proxy(x._closeDivIcon(t),this)}),"boolean"!=h._$colType&&T.append(_.append(v)),e(c).css("padding","0px"),(b=e(c).css("height",e(window).height()-2)).css("width",e(window).width()-2),b.find(".e-searchcontainer .e-searchbox").css("margin-top","10px").children().css("margin-top","10px");var E=b.find(".e-checkboxlist"),N=.97*e(window).width(),M=.65*e(window).height();e(b.find(".e-searchcontainer")).addClass("e-resSearch"),(w=b.find(".e-resSearch .e-btncontainer").remove()).find("input:first").css("width","45.6%"),w.find("input:first").addClass("e-resposnsiveFilterBtnLeft"),w.find("input:last").addClass("e-resposnsiveFilterBtnRight"),b.find(".e-excelLabel").remove(),C=t.buildTag("div.e-excelLabel","Order Id",{"font-weight":"bold","margin-top":"10px"}),b.find(".e-searchcontainer"),C.insertAfter(b.find(".e-searchcontainer .e-searchbox")),b.prepend(T),e(c).append(D.append(I).append(O)),E.ejScroller({height:M,width:N}).ejScroller("refresh")}this._excelFilter.openXFDialog({field:a,enableResponsiveRow:!0,displayName:currentColumn.headerText,dataSource:this._dataSource(),position:{X:j,Y:z},dimension:{height:e(window).height(),width:e(window).width()},cssClass:"resFilter",type:this._$colType,format:this._$colFormat,localizedStrings:d}),e(c).insertAfter(this.element),t.isNullOrUndefined(e(c).parents(".e-grid")[0])||e(c).remove(),_.click(function(){var i,s,n,l,o,r,a,d,u,m,p,g,f,_,v;e(x._excelDlg).css("display","none"),i=e(window).height()-5,s=e(window).width(),A._openCustomFilter("equal"),n=c=e("#"+x._id+x._$colType+"_CustomFDlg").addClass("e-responsviesExcelFilter"),t.isNullOrUndefined(n.find(".e-resFilterDialogHeaderDiv")[0])&&(l=t.buildTag("div.e-resFilterDialogHeaderDiv"),o=t.buildTag("div.labelRes","<span>Custom Filter</span>"),l.append(o),r=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",openDialogue:x._excelDlg.slice(1)}),a=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",openDialogue:x._excelDlg.slice(1)}),r.click(function(){n.css("display","none"),x.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):x.element.css("display","block")}),l.append(r.append(a)),d=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",gridEle:!0}),u=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",gridEle:!0}),l.append(d.append(u)),d.click(function(){n.css("display","none"),x.element.css("display","block")}),n.prepend(l),n.insertAfter(x.element),n.find(".e-dlgfields").css("width","100%"),(m=n.find(".e-dlgfields:first").css("width","92%").css("margin-left","6%")).css("margin-top","4%"),p=n.find(".e-dlgfields").find(".e-fieldset legend").text(),t.buildTag("div.e-responsiveLabelDiv",p,{"margin-left":"6%"}).insertAfter(m),g=n.find(".e-dlgfields").find(".e-fieldset").find("table").css("width","61%"),n.find(".e-dlgfields").find(".e-fieldset").replaceWith(g),g.parent("div").addClass("e-responsiveExcelFilterFieldDiv"),g.find(".e-dropdownlist"),g.find(".e-dropdownlist").each(function(t,i){var s=e(i).ejDropDownList("model.dataSource"),n=.4*e(window).width();e(i).ejDropDownList("destroy").ejDropDownList({width:n,popupWidth:n+"px",dataSource:s})}),g.find(".e-autocomplete").each(function(t,i){var s=e(i).ejAutocomplete("model.dataSource"),n=.4*e(window).width();e(i).ejAutocomplete("destroy").ejAutocomplete({width:n,dataSource:s.dataSource,fields:s.fields})}),g.find(".e-datepicker").each(function(t,i){e(i).ejDatePicker("model.dataSource");var s=.4*e(window).width();e(i).ejDatePicker("destroy").ejDatePicker({width:s})}),f=I.clone(),_=O.clone(),f.ejButton({text:"OK",type:"button",click:function(){x._excelFilter._openedFltr=n,x._excelFilter._fltrBtnHandler(),n.hasClass("e-dlgcustom")&&n.ejDialog("close"),x._setResponsiveFilterIcon(),x.element.css("display","block")}}),_.ejButton({text:"Cancel",type:"button",click:function(){n.ejDialog("close"),h.element.css("display","block")}}),n.append(D.clone().append(f).append(_)),(v=n.find(".e-dlgfields .e-btncontainer").remove()).find("input:first").addClass("e-resposnsiveFilterBtnLeft"),v.find("input:first").css("width","45.6%"),v.find("input:last").addClass("e-resposnsiveFilterBtnRight")),x.element.css("display","none"),n.ejDialog({enableModal:!1,height:i,width:s,position:{X:0,Y:0},enableResize:!1,showHeader:!1}).ejDialog("open")}),t.buildTag("div")}else m=this.model.enableResponsiveRow?"OK":"Filter",p=this.model.enableResponsiveRow?"Cancel":"Clear",I.ejButton({text:m,type:"button",click:e.proxy(this._fltrBtnHandler,this)}),O.ejButton({text:p,type:"button",click:function(){"Clear"==p&&(h.element.css("display","block"),h._fltrClrHandler()),e(c).css("display","none"),O.hasClass("e-resposnsiveFilterBtnRight")&&h.element.css("display","block")}}),n.parent().hasClass("e-responsivefilterColDiv")&&n.hasClass("e-filternone")?(h._fltrClrHandler(),n.remove()):(u.addClass("e-resMenuFltr"),u.css("height",e(window).height()-1).css("width",e(window).width()-2),u.find(".e-operator").addClass("e-resFilterOperator"),u.find(".e-value").addClass("e-resFilterOperator"),u.find(".e-dlgBtns").remove().addClass("e-filterMenuBtn"),u.append(D.append(I).append(O)),t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])&&(u.insertAfter(this.element),L=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),R=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),L.click(function(){u.css("display","none"),x.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):x.element.css("display","block")}),T.append(L.append(R)),_=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),v=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:c.slice(1),gridEle:!0}),_.click(function(){u.css("display","none"),x.element.css("display","block")}),g=e(u.find(".e-value").find("input:last")),"string"==h._$colType&&(f=e(u.find(".e-value").find("input:last")).ejAutocomplete("model"),g.ejAutocomplete("destroy").ejAutocomplete({enableDistinct:!0,dataSource:f.dataSource,fields:f.fields,width:f.width,focusIn:function(){var e=this.element.closest(".e-filterDialoge").find(".e-dropdownlist");this.model.filterType=e.val()}})),T.append(_.append(v)),u.prepend(T)),u.find(".e-responsiveLabelDiv").remove(),t.buildTag("div.e-responsiveLabelDiv","",{"margin-left":"5%","font-size":"17px","margin-top":"5%"}).append(t.buildTag("span",this.getHeaderTextByFieldName(a),{"font-weight":"bold"})).insertAfter(u.find(".e-resFilterDialogHeaderDiv")),u.fadeIn(100,function(){}))}else{e(c).hasClass("e-resMenuFltr")&&(e(c).remove(),this._renderFilterDialogs(),c="#"+this._id+"_"+this._$colType+"Dlg"),e(c).ejDialog({position:{X:"",Y:""}});var P=e(document).width(),F=document.documentElement.clientWidth<800?200:250,j=n.position().left+18,z=n.position().top+2;"relative"==n.closest(".e-headercell").css("position")&&(j=n.offset().left+15,z=n.offset().top+20),y="e-filterdialoglarge",F=this._isExcelFilter?this._excelFilter._dialogContainer.width():F,n.offset().left+18+F>P&&(j-=F),200==F&&(y=""),t.isNullOrUndefined(this._$colType)||("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType?e(c).ejDialog({position:{X:j,Y:z},width:F,cssClass:y}).ejDialog("open"):this._excelFilter.openXFDialog({field:a,displayName:currentColumn.headerText,dataSource:this._dataSource(),position:{X:j,Y:z},type:this._$colType,format:currentColumn.format,foreignKey:currentColumn.foreignKeyField,foreignKeyType:currentColumn.originalType,foreignKeyValue:currentColumn.foreignKeyValue,foreignDataSource:currentColumn.dataSource,localizedStrings:d}))}this._setFilterFieldValues(c),"number"==this._$colType&&currentColumn.serverType!=s?e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:0}):"number"==this._$colType&&e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:2}),this._$prevColType=this._$colType,this._$fDlgIsOpen=!0}},_responsiveFilterClose:function(){this.element.css("display","block")},_clickHandler:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f,_=e(i.target),v=e("[id$='ccDiv'].e-grid.e-columnChooser"),b=e("#"+this._id+"EditForm");if(v.length)for(r=!0,a=0;a<v.length;a++)(_.parents(".e-ccButton").length||_.hasClass("e-ccButton"))&&(r=e(i.target).closest(".e-grid").attr("id")+"ccDiv"!=v[a].id),(d=e("#"+v[a].id).ejDialog("instance")).isOpened()&&r&&(d.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove());if(!(_.hasClass("e-button")&&(_.hasClass("e-disable")||_.prop("disabled"))||_.closest(".e-grid").attr("id")!==this._id||_.closest("#"+this._id+"EditForm").length)){if(_.hasClass("e-rowcell")||_.closest("td").is(".e-rowcell")||_.hasClass("e-headercell")&&i.clientY-_.offset().top<_.height()/4||_.parents(".e-headercheckcelldiv").length){if(this._bulkEditCellDetails.cancelSave)return void(this._bulkEditCellDetails.cancelSave=!1);if("batch"==this.model.editSettings.editMode&&e.isFunction(e.validator)&&b.length&&b.validate().errorList.length>0)return;"batch"==this.model.editSettings.editMode&&this.element.focus(),n=_.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,h=-1!=_.closest(".e-rowcell").index()?_.closest(".e-rowcell").index():_.closest(".e-headercell").index()-this.model.groupSettings.groupedColumns.length,l=_.hasClass("e-rowcell")?_.index()-n:h-n,l=null!=this.model.detailsTemplate||null!=this.model.childGrid?l-1:l,this.model.scrollSettings.frozenColumns&&(_.closest(".e-movableheaderdiv").length||_.closest(".e-movablecontentdiv").length)&&(l+=this.model.scrollSettings.frozenColumns),o=this.getIndexByRow(_.closest("tr")),this._bulkEditCellDetails.columnIndex=l,this._bulkEditCellDetails.rowIndex=o,this.model.allowSelection&&t.gridFeatures.selection&&(c=!(!this._enableCheckSelect||!_.parent(".e-checkcelldiv").length),_.hasClass("e-checkselectall")&&(this._selectAllCheck=!0,u=this.model.allowPaging?this.model.pageSettings.pageSize:this._gridRows.length,this.selectRows(0,u-1,_)),"multiple"==this.model.selectionType&&((i.ctrlKey||this._enableSelectMultiTouch)&&(this.multiSelectCtrlRequest=!0),i.shiftKey&&(this.multiSelectShiftRequest=!0,this._allowcellSelection&&o>-1&&this.selectCells([[o,[l]]]),this._allowrowSelection&&o>-1&&(!this._enableCheckSelect||c)&&this.selectRows(this._previousIndex,this.getIndexByRow(_.closest("tr")),_),this._selectedRow(this.getIndexByRow(_.closest("tr"))),this._allowcolumnSelection&&_.hasClass("e-headercell")&&!_.hasClass("e-stackedHeaderCell")&&i.clientY-_.offset().top<_.height()/4&&this.selectColumns(this._previousColumnIndex,l)),"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-rowselect").hasClass("e-spanclicked")&&"row"==this.model.selectionSettings.selectionMode&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-sortdirect").is(":visible")||!this._customPop.find(".e-rowselect").hasClass("e-spanclicked"))&&"multiple"==this.model.selectionType&&(this._customPop.removeAttr("style"),m=_.offset(),this._customPop.offset({top:0,left:0}).offset({left:m.left,top:m.top-this.getRowHeight()-_.height()}).find(".e-sortdirect").hide().end().find(".e-rowselect").show().end().show())),this.multiSelectShiftRequest||(this._allowcellSelection&&o>-1&&(p=this._checkCellSelectionByRow(o,l),(this.model.selectionSettings.enableToggle&&1==this.selectedRowCellIndexes.length&&1==this.selectedRowCellIndexes[0].cellIndex.length||i.ctrlKey&&"multiple"==this.model.selectionType)&&-1!=p&&this.selectedRowCellIndexes.length>0&&this.selectedRowCellIndexes[0].cellIndex.length>0?this.clearCellSelection(p.rowIndex,l):this.selectCells([[o,[l]]])),this._allowrowSelection&&o>-1&&(g=this.getIndexByRow(_.closest("tr")),this._enableCheckSelect&&(this.multiSelectCtrlRequest=!0),this.model.scrollSettings.enableVirtualization&&(f=o%this._virtualRowCount,g=parseInt(e(_).closest("tr").attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-f)),(!this._enableCheckSelect||c)&&(this.model.selectionSettings.enableToggle&&!this._enableCheckSelect&&1==this.getSelectedRecords().length&&-1!=e.inArray(this.getIndexByRow(_.closest("tr")),this.selectedRowsIndexes)?this.clearSelection(g):this.selectRows(this.getIndexByRow(_.closest("tr")),null,_)),!this._enableCheckSelect||i.ctrlKey||this._enableSelectMultiTouch||(this.multiSelectCtrlRequest=!1)),this._allowcolumnSelection&&_.hasClass("e-headercell")&&!_.hasClass("e-stackedHeaderCell")&&i.clientY-_.offset().top<_.height()/4&&(this.model.selectionSettings.enableToggle&&1==this.selectedColumnIndexes.length&&-1!=e.inArray(l,this.selectedColumnIndexes)?this.clearColumnSelection(l):this.selectColumns(l)),this.multiSelectCtrlRequest=!1),this.multiSelectShiftRequest=!1),s=this._bulkEditCellDetails.columnIndex>=0?this.model.columns[this._bulkEditCellDetails.columnIndex].field:null,_.closest(".e-rowcell").length&&!t.isNullOrUndefined(s)&&(this._tabKey=!1,this.model.editSettings.allowEditing&&this.model.editSettings.editMode==t.Grid.EditMode.Batch&&this.editCell(e.inArray(_.closest("tr").get(0),this.getRows()),s))}(_.hasClass("e-rowselect")||_.hasClass("e-sortdirect"))&&(_.hasClass("e-spanclicked")?(_.removeClass("e-spanclicked"),_.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!1),_.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!1),this._customPop.hide()):(_.addClass("e-spanclicked"),_.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!0),_.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!0))),this._selectAllCheck=!1,t.gridFeatures.common&&this.expandCollapse(_),_.is(".e-filtericon")&&0!=_.closest(".e-detailrow").length&&i.preventDefault(),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&!_.is(".e-filtericon")&&1!=_.closest(".e-dlgcontainer").length&&this._closeFDialog(),this.model.allowSearching&&null!=this._searchBar&&(_.is(this._searchBar.find(".e-cancel"))?this._searchBar.find("input").val(""):i.target.id==this._id+"_searchbar"?this._searchBar.find(".e-cancel").removeClass("e-hide"):this._searchBar.find(".e-cancel").hasClass("e-hide")||this._searchBar.find(".e-cancel").addClass("e-hide"))}},_checkCellSelectionByRow:function(t,i){for(var s=0;s<this.selectedRowCellIndexes.length&&this.selectedRowCellIndexes[s].rowIndex!=t;s++);return s!=this.selectedRowCellIndexes.length&&-1!=e.inArray(i,this.selectedRowCellIndexes[s].cellIndex)?this.selectedRowCellIndexes[s]:-1},_persistState:function(e){this.model.enablePersistence&&this._isHeightResponsive&&(e._isHeightResponsive=this._isHeightResponsive)},_restoreState:function(e){this.model.enablePersistence&&e._isHeightResponsive&&(this._isHeightResponsive=e._isHeightResponsive)},_destroy:function(){var t,i,s,n,l,o;if(this.element.off(),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").add(this.getContent().find(".e-content,.e-movablecontent")).off("scroll"),(t=e("#"+this._id+"EditForm")).length){for(i=t.find(".e-field"),n=0;n<i.length;n++)(s=e(i[n])).hasClass("e-datetimepicker")?s.ejDateTimePicker("destroy"):s.hasClass("e-datepicker")?s.ejDatePicker("destroy"):s.hasClass("e-dropdownlist")&&s.ejDropDownList("destroy");t.remove()}this._confirmDialog&&this._confirmDialog.ejDialog("destroy"),this.element.find(".e-dropdownlist").ejDropDownList("model.dataSource",[]),this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove(),e("#"+this._id+"_ccTail").remove(),e("#"+this._id+"_ccTailAlt").remove()),this.model.allowFiltering&&"excel"==this.model.filterSettings.filterType&&this._excelFilter.resetExcelFilter(),this.model.allowReordering&&e(".e-columndropindicator").remove(),this.model.allowFiltering&&"menu"==this.model.filterSettings.filterType&&(l=this,e.each(this.model.columns,function(t,i){o=i.type,e("#"+l._id+o+"_ddinput_popup_wrapper").remove(),"string"==o?e("#"+l._id+"_stringDlg").find(".e-autocomplete").ejAutocomplete("destroy"):"date"==o?e("#"+l._id+"_dateDlg").find(".e-datepicker").ejDatePicker("destroy"):"datetime"==o?e("#"+l._id+"_datetimeDlg").find(".e-datetimepicker").ejDateTimePicker("destroy"):"number"==o&&e("#"+l._id+"_numberDlg").find(".e-numerictextbox").ejNumericTextbox("destroy")})),this._$onresize&&e(window).off("resize",this._$onresize),this.element.empty().removeClass("e-grid "+this.model.cssClass),this.element.ejWaitingPopup("destroy"),this.model.contextMenuSettings.enableContextMenu&&(e("#"+this._id+"_Context").ejMenu("destroy"),e("#"+this._id+"_Context").remove())},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.gridFeatures.common&&e.extend(t.Grid.prototype,t.gridFeatures.common),t.gridFeatures.edit&&e.extend(t.Grid.prototype,t.gridFeatures.edit),t.gridFeatures.filter&&e.extend(t.Grid.prototype,t.gridFeatures.filter),t.gridFeatures.group&&e.extend(t.Grid.prototype,t.gridFeatures.group),t.gridFeatures.selection&&e.extend(t.Grid.prototype,t.gridFeatures.selection),t.gridFeatures.sort&&e.extend(t.Grid.prototype,t.gridFeatures.sort),t.gridFeatures.dragAndDrop&&e.extend(t.Grid.prototype,t.gridFeatures.dragAndDrop),t.Grid.Locale=t.Grid.Locale||{},t.Grid.Locale.default=t.Grid.Locale["en-US"]={EmptyRecord:"No records to display",GroupDropArea:"Drag a column header here to group its column",DeleteOperationAlert:"No records selected for delete operation",EditOperationAlert:"No records selected for edit operation",SaveButton:"Save",OkButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",Notactionkeyalert:"This Key-Combination is not available",Keyconfigalerttext:"This Key-Combination has already been assigned to ",GroupCaptionFormat:"{{:headerText}}: {{:key}} - {{:count}} {{if count == 1 }} item {{else}} items {{/if}} ",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",PagerInfo:"{0} of {1} pages ({2} items)",FrozenColumnsViewAlert:"Frozen columns should be in grid view area",FrozenColumnsScrollAlert:"Enable allowScrolling while using frozen Columns",FrozenNotSupportedException:"Frozen Columns and Rows are not supported for Grouping, Row Template, Detail Template, Hierarchy Grid and Batch Editing",Add:"Add",Edit:"Edit",Delete:"Delete",Update:"Update",Cancel:"Cancel",Done:"Done",Columns:"Columns",SelectAll:"(Select All)",PrintGrid:"Print",ExcelExport:"Excel Export",WordExport:"Word Export",PdfExport:"PDF Export",StringMenuOptions:[{text:"StartsWith",value:"StartsWith"},{text:"EndsWith",value:"EndsWith"},{text:"Contains",value:"Contains"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],NumberMenuOptions:[{text:"LessThan",value:"LessThan"},{text:"GreaterThan",value:"GreaterThan"},{text:"LessThanOrEqual",value:"LessThanOrEqual"},{text:"GreaterThanOrEqual",value:"GreaterThanOrEqual"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],PredicateAnd:"AND",PredicateOr:"OR",Filter:"Filter",FilterMenuCaption:"Filter Value",FilterbarTitle:"'s filter bar cell",MatchCase:"Match Case",Clear:"Clear",ResponsiveFilter:"Filter",ResponsiveSorting:"Sort",Search:"Search",DatePickerWaterMark:"Select date",NumericTextBoxWaterMark:"Enter value",EmptyDataSource:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",ForeignKeyAlert:"The updated value should be a valid foreign key value",True:"true",False:"false",UnGroup:"Click here to ungroup",AddRecord:"Add Record",EditRecord:"Edit Record",DeleteRecord:"Delete Record",Save:"Save",Grouping:"Group",Ungrouping:"Ungroup",SortInAscendingOrder:"Sort In Ascending Order",SortInDescendingOrder:"Sort In Descending Order",NextPage:"Next Page",PreviousPage:"Previous Page",FirstPage:"First Page",LastPage:"Last Page",EmptyRowValidationMessage:"Atleast one field must be updated",NoResult:"No Matches Found"},t.Grid.Actions={Paging:"paging",Sorting:"sorting",Filtering:"filtering",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Grouping:"grouping",Ungrouping:"ungrouping",Refresh:"refresh",Reorder:"reorder",Search:"searching",BatchSave:"batchsave",VirtualScroll:"virtualscroll"},t.Grid.SummaryType={Average:"average",Minimum:"minimum",Maximum:"maximum",Count:"count",Sum:"sum",TrueCount:"truecount",FalseCount:"falsecount",Custom:"custom"},t.Grid.EditMode={Normal:"normal",Dialog:"dialog",DialogTemplate:"dialogtemplate",Batch:"batch",ExternalForm:"externalform",ExternalFormTemplate:"externalformtemplate",InlineForm:"inlineform",InlineTemplateForm:"inlineformtemplate"},t.Grid.PrintMode={AllPages:"allpages",CurrentPage:"currentpage"},t.Grid.ResizeMode={NextColumn:"nextcolumn",Control:"control",Normal:"normal"},t.Grid.Rowposition={Top:"top",Bottom:"bottom"},t.Grid.FormPosition={BottomLeft:"bottomleft",TopRight:"topright"},t.Grid.ClipMode={Ellipsis:"ellipsis",Clip:"clip",EllipsisWithTooltip:"ellipsiswithtooltip"},t.Grid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker",DateTimePicker:"datetimepicker"},t.Grid.UnboundType={Edit:"edit",Save:"save",Delete:"delete",Cancel:"cancel"},t.Grid.ToolBarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",Search:"search",PrintGrid:"printGrid",ExcelExport:"excelExport",WordExport:"wordExport",PdfExport:"pdfExport"},t.Grid.FilterType={Menu:"menu",FilterBar:"filterbar",Excel:"excel"},t.Grid.FilterBarMode={Immediate:"immediate",OnEnter:"onenter"},t.Grid.SelectionType={Single:"single",Multiple:"multiple"},t.Grid.ColumnLayout={Auto:"auto",Fixed:"fixed"},t.Grid.GridLines={Both:"both",None:"none",Horizontal:"horizontal",Vertical:"vertical"},t.Grid.VirtualScrollMode={Normal:"normal",Continuous:"continuous"},t.Grid.SelectionMode={Row:"row",Cell:"cell",Column:"column"},t.Grid.WrapMode={Both:"both",Content:"content",Header:"header"},t.Grid.exportAll=function(e,i){t.Grid.prototype.export(e,null,!0,i)},t.SqlDataSourceAdaptor=(new t.UrlAdaptor).extend({init:function(){this.initialRender=!0},processQuery:function(e,i,s){var n,l,o,r,a=t.UrlAdaptor.prototype.processQuery(e,i,s),d=t.parseJSON(a.data),h={};if(d.param)for(n=0;n<d.param.length;n++)l=d.param[n],h[o=Object.keys(l)[0]]=l[o];return h.value=d,r=JSON.stringify({type:"SqlData",args:d}),0==this.initialRender&&__doPostBack("",r),this.initialRender=!1,{data:JSON.stringify(h),result:e.dataSource.json,ejPvtData:a.ejPvtData,count:e.dataSource.json.length}},processResponse:function(e,i,n,l,o){var r,a,d,h=e.ejPvtData||{},c=e.groupDs;if(l&&l.getResponseHeader("Content-Type")&&-1!=l.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return n._requiresCount?{result:[],count:0}:[];if((r=JSON.parse(e.data))&&"batch"===r.action&&e.added)return o.added=e.added,o;if(h&&h.aggregates&&h.aggregates.length){var u,m=h.aggregates,p={},g={};for(("count"in e&&(p.count=e.count),e.result&&(p.result=e.result),e.aggregate&&(e=e.aggregate),d=0);d<m.length;d++)(u=t.aggregates[m[d].type])&&(g[m[d].field+" - "+m[d].type]=u(e,m[d].field));p.aggregates=g,e=p}if(h&&h.groups&&h.groups.length){for((a=h.groups,p={},"count"in e&&(p.count=e.count),e.aggregates&&(p.aggregates=e.aggregates),e.result&&(e=e.result),d=0);d<a.length;d++)t.isNullOrUndefined(c)||(c=t.group(c,a[d])),e=t.group(e,a[d],h.aggregates,null,c);return p.count!=s?p.result=e:p=e,p}return e}})}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.gridResize=function(t){this.$headerTable=t.getHeaderTable(),this.gridInstance=t,this._colMinWidth=15,this._$visualElement=e(),this._currentCell=-1,this._allowStart=!1,this._oldWidth=null,this._orgX=null,this._orgY=null,this._extra=null,this._expand=!1,this._target=null,this._cellIndex=-1},t.gridFeatures.gridResize.prototype={_mouseHover:function(t){var i,s,n,l,o;if(!this._$visualElement.is(":visible")&&(this._allowStart=!1,e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),i=e(t.target),e(t.target).hasClass("e-filtericon")&&("col-resize"==e(t.target).css("cursor")||"col-resize"==e(t.target).closest("tr").css("cursor"))&&(e(t.target).css("cursor","pointer"),e(t.target).closest("tr").css("cursor","pointer")),i.hasClass("e-headercell"))){var r=t.target,a=r.getBoundingClientRect(),d=0,h=0;(t.type="mousemove")?(d=t.clientX,h=t.clientY):(t.type="touchmove")?(d=evt.originalEvent.changedTouches[0].clientX,h=evt.originalEvent.changedTouches[0].clientY):(t.type="MSPointerMove")&&(d=t.originalEvent.clientX,h=t.originalEvent.clientY),s=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderContent().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left:this.gridInstance.getHeaderTable().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left,(d>=a.left+document.documentElement.scrollLeft+r.offsetWidth-5||d<=a.left+3)&&d<s&&d>=a.left&&h<=a.top+document.documentElement.scrollTop+t.target.offsetHeight?(n=d>a.left+3?e(t.target).find(".e-headercelldiv"):e(t.target).prevAll("th:visible:first").find(".e-headercelldiv"),l=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,o=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-l,(this.gridInstance.model.enableRTL&&d<=o||!this.gridInstance.model.enableRTL&&d>=o)&&((this.gridInstance.model.showStackedHeader||n.length)&&-1==e.inArray(e(n).attr("ej-mappingname"),this.gridInstance._disabledResizingColumns)?(this.gridInstance.model.showStackedHeader&&e(i.parents("thead")).find("tr").css("cursor","col-resize"),this.gridInstance.model.showStackedHeader||i.parent().css("cursor","col-resize"),this._currentCell=e(t.target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(r):this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell").index(r),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):(i.parent().css("cursor","pointer"),this._currentCell=-1))):(this.gridInstance.element.find(".e-columnheader").css("cursor","pointer"),this._currentCell=-1)}},_start:function(t,i){var s,n,l,o,r,a,d=this.gridInstance.getHeaderTable().find(".e-columnheader");if(n=e(this._target).hasClass("e-stackedHeaderCell")?d.find(".e-headercell").not(".e-hide"):d.find(".e-headercell").not(".e-stackedHeaderCell,.e-hide"),-1!=this._currentCell&&this._currentCell<n.length&&(l=n[this._currentCell]),void 0!==l)if(o=l.getBoundingClientRect(),s=this._tableY=o.top+parseInt(-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollTop:document.documentElement.scrollTop),this._allowStart){if(r=this._$visualElement=e(document.createElement("div")),_height=this.gridInstance.element.find(".e-gridcontent").first().height()+this.gridInstance.element.find(".e-gridheader").height(),this.gridInstance.model.showStackedHeader&&this.gridInstance.model.stackedHeaderRows.length>0){var h=this.gridInstance.getHeaderTable().find("tr.e-columnheader"),c=(h.length,e(this._target).parent("tr")[0].rowIndex);for(a=0;a<c;a++)_height-=e(h[a]).height()}r.addClass("e-reSizeColbg").appendTo(this.gridInstance.element).attr("unselectable","on").css("visibility","hidden"),this.gridInstance._resizeTimeOut=setTimeout(function(){r.css({visibility:"visible",height:_height+"px",cursor:"col-resize",left:t,top:s,position:"fixed"})},100),this._oldWidth=l.offsetWidth,this._orgX=t,this._orgY=i,this._extra=t-this._orgX,this._expand=!0}else this._currentCell=-1},_mouseMove:function(e){if(this._expand){var t=0;(e.type="mousemove")?(t=e.clientX,e.clientY):(e.type="touchmove")?(t=evt.originalEvent.changedTouches[0].clientX,evt.originalEvent.changedTouches[0].clientY):(e.type="MSPointerMove")&&(t=e.originalEvent.clientX,e.originalEvent.clientY),-1!=navigator.userAgent.indexOf("WebKit")&&(t=e.pageX,e.pageY),t+=document.documentElement.scrollLeft,e.preventDefault(),this._moveVisual(t)}else this._mouseHover(e)},_getCellIndex:function(t){e(t._target);var i,s,n=t._target,l=n.getBoundingClientRect(),o=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft;return this._orgX<l.left+5+o&&(n=e(n).prevAll(":visible:first")[0]),s=i=n.cellIndex,t.gridInstance.model.groupSettings.groupedColumns.length&&(s=i-t.gridInstance.model.groupSettings.groupedColumns.length),s},_reSize:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v;if(this._initialTableWidth=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderTable().first().parent().width()+this.gridInstance.getHeaderTable().last().parent().width():this.gridInstance.getHeaderTable().parent().width(),this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell=this._currentCell-1:this.gridInstance.model.enableRTL||this._getResizableCell(),n=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?this.gridInstance.getHeaderTable().find("thead"):e(this._target).parents("thead"),-1!=this._currentCell&&this._expand){this._expand=!1;var b=(e(this._target).hasClass("e-stackedHeaderCell")?n.find(".e-headercell:not(.e-detailheadercell)").filter(":visible"):n.find(".e-headercell:not(.e-detailheadercell,.e-stackedHeaderCell)").filter(":visible"))[this._currentCell],w=b.offsetWidth,C=i-this._orgX;if(this.gridInstance.model.enableRTL&&(C=-C),parseInt(C)+parseInt(w)>this._colMinWidth){if(0!=C&&n.css("cursor","default"),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn&&(l=this.gridInstance.getHeaderTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),l=this.gridInstance._$headerCols),r=(o=l.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell)).width()),this._resizeColumnUsingDiff(w,C),a=(s=this.gridInstance.element.find(".e-gridcontent").first()).find("div").hasClass("e-content"),(d=!t.isIOSWebView()&&this.gridInstance.getBrowserDetails())&&"msie"==d.browser&&this.gridInstance.model.allowScrolling&&(h=this.gridInstance.getContentTable().width(),c=this.gridInstance._calculateWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?(this.gridInstance.getHeaderTable().last().width(c-this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()),this.gridInstance.getContentTable().last().width(c-this.gridInstance.getContent().find(".e-frozencontentdiv").width()),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().last().width(c-this.gridInstance.getFooterContent().find(".e-frozenfootertdiv").width())):c>h&&(this.gridInstance.getHeaderTable().width(c),this.gridInstance.getContentTable().width(c),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().width(c)),parseInt(d.version,10)>8&&this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length&&(c>h?(this.gridInstance.getContentTable().width(c),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",2e3/s.find("table").first().width()+"%")):(this.gridInstance.getContentTable().css("width","100%"),this.gridInstance._groupingAction(!0),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",(this.gridInstance.getHeaderTable().find("colgroup").find("col").first().width()/s.find("table").first().width()*100).toFixed(2)+"%"))),this.gridInstance.getHeaderTable().parent().scrollLeft(s.find(".e-content").scrollLeft()-1)),this.gridInstance._colgroupRefresh(),this.gridInstance.model.allowTextWrap&&this.gridInstance.rowHeightRefresh(),this.gridInstance.model.groupSettings.groupedColumns.length&&!this.gridInstance.model.isEdit&&this.gridInstance._recalculateIndentWidth(),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)!=t.Grid.ResizeMode.Normal)if(t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn){u=this.gridInstance.getHeaderTable().find("colgroup").find("col"),m=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),u=this.gridInstance._$headerCols,m=this.gridInstance._$contentCols);var y=this._currentCell+1,S=u.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?y+this.gridInstance.model.groupSettings.groupedColumns.length:y);if((M=S.width()+(r-o.width()))<this._colMinWidth&&(M=this._colMinWidth),S.width(M),this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var x=this.gridInstance.getContentTable().find(".e-recordtable"),T=x.find("colgroup"),k=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(T=T.not(x.find(".e-detailrow").find("colgroup")).get()),_=0;_<T.length;_++)(p=e(T[_]).find("col").filter(this._diaplayFinder)).length>k&&p.splice(0,p.length-k),e(p[y]).width(M)}if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(y>=0&&y<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+C>this.gridInstance.element.find(".e-headercontent").first().width())return;$ContentCol=m.filter(this._diaplayFinder).eq(y)}else $ContentCol=m.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?y+this.gridInstance.model.groupSettings.groupedColumns.length:y);if($ContentCol.width(M),this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings.frozenColumns>0&&e(b).is(":last-child")&&"ejGrid"==this.gridInstance.pluginName){var D=o.width()-r,I=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+D,O=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-D,A=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+D;this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(I),this.gridInstance.getContent().find(".e-frozencontentdiv").width(I),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(O),this.gridInstance.getContent().find(".e-movablecontentdiv").width(O),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",A),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",A)}this.gridInstance.model.scrollSettings.frozenColumns>0&&e(this._target).parent("tr").parents("div:first").hasClass("e-frozenheaderdiv")&&(this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(this._newWidth),this.gridInstance.getContent().find(".e-frozencontentdiv").width(this._newWidth))}else this.gridInstance.model.scrollSettings.frozenColumns||(g=this.gridInstance.getHeaderTable().width(),this.gridInstance.getHeaderTable().css("width",g+parseInt(C)),this.gridInstance.getContentTable().css("width",g+parseInt(C)),this.gridInstance.model.scrollSettings.width+=parseInt(C),this.gridInstance.getContent().width()>this.gridInstance.getContentTable().width()?(this.gridInstance.getContentTable().addClass("e-tableLastCell"),this.gridInstance.getHeaderTable().addClass("e-tableLastCell")):(this.gridInstance.getContentTable().removeClass("e-tableLastCell"),this.gridInstance.getHeaderTable().removeClass("e-tableLastCell")));if("msie"==d.browser||!d||!this.gridInstance.model.allowScrolling||0!=this.gridInstance.model.scrollSettings.frozenColumns||(this.gridInstance.getHeaderTable().width("100%"),this.gridInstance.getContentTable().width("100%"),((f=this.gridInstance._calculateWidth())<=this.gridInstance.getContentTable().width()||this.gridInstance.getHeaderTable().width()>this.gridInstance.getContentTable().width())&&(this.gridInstance.getHeaderTable().width(f),this.gridInstance.getContentTable().width(f))),this.gridInstance.model.allowResizing&&"default"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")){var L=this._currentCell,R=e(this._target),E=[],N=[],M=w+C,P={};if(this.gridInstance.model.showStackedHeader&&R.hasClass("e-stackedHeaderCell")){var F=R.parent(".e-stackedHeaderRow").index(),j=R.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,z=this.gridInstance.model.stackedHeaderRows[F].stackedHeaderColumns[j].column,$=z;for(z instanceof Array||($=z.split(",")),_=0;_<$.length;_++)v=this.gridInstance.getColumnIndexByField($[_]),E.push(v),N.push(this.gridInstance.model.columns[v]);P={columnIndex:E,column:N,oldWidth:w,newWidth:M}}else P={columnIndex:L,column:this.gridInstance.model.columns[L],oldWidth:w,newWidth:M};this.gridInstance._trigger("resized",P)}this.gridInstance.model.allowScrolling&&(this.gridInstance._scrollObject.refresh(this.gridInstance.model.scrollSettings.frozenColumns>0),!a&&s.find("div").hasClass("e-content")&&this.gridInstance.refreshScrollerEvent(),this.gridInstance._isHscrollcss())}}this._target=null,this._$visualElement.remove(),this._expand=!1,this._currentCell=-1,this._allowStart=!1},_getFrozenResizeWidth:function(){for(var e=this.gridInstance.getHeaderTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),t=0,i=0;i<e.length;i++)"none"!=e.eq(i).css("display")&&(t+=parseInt(e[i].style.width.replace("px","")));return t},_diaplayFinder:function(){return"none"!=e(this).css("display")},_resizeColumnUsingDiff:function(i,s){var n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b,w;this._currntCe=this._currentCell,l=this.gridInstance.getHeaderTable().find("colgroup").find("col"),o=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),l=this.gridInstance._$headerCols,o=this.gridInstance._$contentCols);var C,y=l.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),S=(l.slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),y[0].style.width),x=-1!=S.indexOf("%"),T=!S||x?e(this._target).outerWidth():S;if(n=s/=x?1:i/parseInt(T),(r=this._newWidth=parseInt(s)+parseInt(T))>0&&0!=s){if(r<this._colMinWidth&&(r=this._colMinWidth),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn&&(a=y.next(),(d=!(!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1))&&(a=l.eq(this.gridInstance.model.scrollSettings.frozenColumns)),(d||!y.is(":last-child"))&&a.width()+(y.width()-r)<=this._colMinWidth&&(r=y.width()+(a.width()-this._colMinWidth))),s=r-i,this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(this._currentCell>=0&&this._currentCell<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+s>this.gridInstance.element.find(".e-headercontent").first().width())return;C=o.filter(this._diaplayFinder).eq(this._currentCell)}else C=o.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell);if(this.gridInstance.model.showSummary&&(this._$footerCols=this.gridInstance.getFooterTable().find("colgroup").find("col"),O=this.gridInstance.model.columns.length,this._$footerCols.length>O&&this._$footerCols.splice(0,this._$footerCols.length-O),$footerCols=this._$footerCols,$footerCols.filter(this._diaplayFinder).eq(this._currentCell).outerWidth(r)),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")?this._resizeStackedHeaderColumn(e(this._target).parent("tr"),n,this._currntCe):y.outerWidth(r),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")){if(this.gridInstance.model.groupSettings.groupedColumns.length)for(D=(k=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),m=0;m<this._changedcell.length;m++)for(I=this._changedcell[m],h=0;h<D.length;h++)c=e(D[h]).children().filter(this._diaplayFinder),(b=parseInt(n)+parseInt(c[I].style.width))<this._colMinWidth&&(b=this._colMinWidth),e(c[I]).width(b);for(this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder).length,m=0;m<this._changedcell.length;m++)u=this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder)[this._changedcell[m]],(b=parseInt(n)+parseInt(u.style.width))<this._colMinWidth&&(b=this._colMinWidth),e(u).outerWidth(b),this.gridInstance.model.isEdit&&this.gridInstance.model.allowGrouping&&0==this.gridInstance.model.groupSettings.groupedColumns.length&&($sEditCol=this.gridInstance.getContentTable().find(".gridform").find("colgroup col").filter(this._diaplayFinder)[this._changedcell[m]],e($sEditCol).outerWidth(b))}else{if(this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var k,D=(k=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),I=this._currentCell,O=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(D=D.not(k.find(".e-detailrow").find("colgroup")).get()),m=0;m<D.length;m++)(p=e(D[m]).find("col").filter(this._diaplayFinder)).length>O&&p.splice(0,p.length-O),e(p[I]).width(r)}C.outerWidth(r),this.gridInstance.model.isEdit&&(f=(g=this.gridInstance.getContentTable().find(".e-editedrow,.e-addedrow")).find("table").find("colgroup col"),_=g.hasClass("e-addedrow")&&this.gridInstance.model.groupSettings.groupedColumns.length?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length-1:this._currentCell,f.filter(this._diaplayFinder).eq(_).outerWidth(r))}if(this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns&&"nextcolumn"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&"ejGrid"==this.gridInstance.pluginName){for(v=this.gridInstance.getContentTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings.frozenColumns),b=0,m=0;m<v.length;m++)b+="none"==v[m].style.display?0:parseInt(v[m].style.width.replace("px",""));this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(b),w=this.gridInstance.model.enableRTL?"margin-right":"margin-left",this.gridInstance.getContent().find(".e-frozencontentdiv").width(b).next().css(w,b+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(b).next().css(w,b+"px"),this.gridInstance.model.showSummary&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(b)}this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor","default")}},_resizeStackedHeaderColumn:function(t,i,s){var n,l,o,r,a;this._changedcell=[];var d=0,h=0,c=this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell")[s],u=e(c).attr("colspan"),m=e(c).parent("tr"),p=(m.next(),c.cellIndex);for(this.gridInstance.model.groupSettings.showGroupedColumn&&(d+=h=this.gridInstance.model.groupSettings.groupedColumns.length);p>h;)p--,n=e(m).children("th").not(".e-detailheadercell")[p],d+=parseInt(e(n).attr("colspan"));for(this._currentCell=d,l=d+parseInt(u),o=d;o<l;o++)r=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder)[o],this._changedcell.push(o-h),(a=parseInt(i)+parseInt(r.style.width))<this._colMinWidth&&(a=this._colMinWidth),e(r).outerWidth(a)},_triggerResizeEvents:function(t,i){var s,n,l,o,r,a=this.gridInstance.getHeaderTable().find(".e-columnheader"),d=a.find(".e-headercell").filter(":visible"),h=this._cellIndex,c=e(this._target),u=[];if(col=[],"resizeStart"==t&&(this._orgX=i,h=this._cellIndex=this._getCellIndex(this,i)),n=(s=d[this._currentCell]).offsetWidth,this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")){var m=c.parent(".e-stackedHeaderRow").index(),p=c.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,g=this.gridInstance.model.stackedHeaderRows[m].stackedHeaderColumns[p].column,f=g;for(g instanceof Array||(f=g.split(",")),l=0;l<f.length;l++)o=this.gridInstance.getColumnIndexByField(f[l]),u.push(o),col.push(this.gridInstance.model.columns[o])}if("resizeStart"==t)return r={},r=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:c,oldWidth:n}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:n},this.gridInstance._trigger("resizeStart",r);a.find(".e-headercell").not(".e-detailheadercell").filter(":visible");var _=i-this._orgX,v=n+_;return this.gridInstance._colgroupRefresh(),r={},r=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:e(s),oldWidth:n,newWidth:v,extra:_}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:n,newWidth:v,extra:_},this.gridInstance._trigger("resizeEnd",r)},_mouseUp:function(e){if(this.gridInstance._resizeTimeOut&&(clearTimeout(this.gridInstance._resizeTimeOut),this.gridInstance._resizeTimeOut=0),this._expand){var i=e.clientX,s=e.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(i=e.pageX,s=e.pageY),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&this._triggerResizeEvents("resizeEnd",i))return void this.gridInstance.element.find(".e-reSizeColbg").remove();i+=document.documentElement.scrollLeft,this._reSize(i,s),!t.isNullOrUndefined(this._currntCe)&&this._currntCe>=0&&(this.gridInstance.model.columns[this._currntCe].width=this.gridInstance.columnsWidthCollection[this._currntCe])}},_getResizableCell:function(){var t,i,s;if(t=(e(this._target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderTable().find(".e-columnheader"):this.gridInstance.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow")).find(".e-headercell").not(".e-hide,.e-detailheadercell"),i=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft,!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1)for(s=0;s<t.length;s++){if(point=t[s].getBoundingClientRect(),point.left+i+5>this._orgX&&e(t[s]).height()+point.top>=this._orgY)return void(this._currentCell=s-1);if(s==t.length-1||this.gridInstance.model.showStackedHeader&&e(this._target).get(0)===t[s])return void(this._currentCell=s)}},_moveVisual:function(e){var t=this.gridInstance.getHeaderContent().find("div").first()[0].getBoundingClientRect();t.left+document.documentElement.scrollLeft+t.width<e||e<t.left+document.documentElement.scrollLeft?this._$visualElement.remove():-1!=this._currentCell&&this._$visualElement.css({left:e,top:this._tableY})},_mouseDown:function(t){var i,s;return!this._allowStart||"col-resize"!=e(t.target).closest("tr").css("cursor")||(this._target=t.target,i=t.clientX,s=t.clientY,-1!=navigator.userAgent.indexOf("WebKit")&&(i=t.pageX,s=t.pageY-document.body.scrollTop),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&(e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),this._target=t.target,this._triggerResizeEvents("resizeStart",i))?void 0:(i+=document.documentElement.scrollLeft,2!=t.button&&this._start(i,s),!1))},_columnResizeToFit:function(i){var s,n,l,o,r,a,d,h,c,u,m,p,g=this.gridInstance.getHeaderTable().find(".e-columnheader").filter(function(){return"col-resize"==e(this).css("cursor")});if(this.gridInstance.model.allowResizeToFit&&g.length){e(i.target).is(".e-headercelldiv")&&(i.target=i.target.parentNode);var f,_=e(i.target),v=0,b=0;if(f=_.hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"):this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-stackedHeaderCell,.e-detailheadercell"),this._target=_,_.hasClass("e-headercell")){var w=i.target,C=e.inArray(w,f),y=C;this._orgX=i.pageX,this.gridInstance.model.enableRTL?this._currentCell=C:this._getResizableCell(),C!=this._currentCell&&(C=y=this._currentCell,w=i.target.previousSibling);var S=f.filter(":visible")[y],x=[],T=[],k=[];if(b=this.gridInstance.model.groupSettings.groupedColumns.length,t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)&&t.isNullOrUndefined(this.gridInstance.model.childGrid)||(b+=1),e(w).parent("tr").hasClass("e-stackedHeaderRow")){for(currentSpan=e(S).attr("colspan"),tr=e(S).parent("tr"),tHeadIndex=S.cellIndex,tr.next();tHeadIndex>b;)tHeadIndex--,s=e(tr).children("th")[tHeadIndex],v+=parseInt(e(s).attr("colspan"));n=v+parseInt(currentSpan)}else v=y,n=y+1;var D=0,I=0,O=0,A=[],L=[];if(-1!=v)for(o={columnIndex:v+(l=f.slice(0,v+1).filter(".e-hide").length),column:this.gridInstance.model.columns[v+l],target:_,oldWidth:r},this.gridInstance._trigger("resizeStart",o),p=v;p<n;p++){if(l=f.slice(0,p+1).filter(".e-hide").length,O=this._getContentWidth(p+l),$cellDiv=this.gridInstance.getHeaderTable().find(".e-headercell:not(.e-hide, .e-stackedHeaderCell)").children(".e-headercelldiv").eq(p),I=this._getHeaderContentWidth($cellDiv),D=I>O?I:O,D+=parseInt($cellDiv.css("padding-left"),10),r=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder).eq(p+b).width(),D=r>D||this._colMinWidth<D?D:this._colMinWidth,a=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&a.splice(0,1),a.eq(p+b).width(D),this.gridInstance.model.groupSettings.groupedColumns.length&&(d=this.gridInstance.getContentTable().find(".e-recordtable").find("colgroup"),h=this,e.each(d,function(t,i){e(i).find("col").filter(h._diaplayFinder).eq(p).width(D)})),c=this.gridInstance.getContentTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&c.splice(0,1),c.eq(p+b).width(D),this.gridInstance.model.isEdit)for(this.gridInstance.getContentTable().find(".e-editedrow").find("col"),u=this.gridInstance.element.find(".gridform"),j=0;j<u.length;j++)e(u[j]).find("col").eq(p+b).width(D);A.push(this.gridInstance.model.columns[p+l]),L.push(Math.abs(D-r)),x.push(p+l),T.push(D),k.push(r),(this.gridInstance.model.scrollSettings.frozenColumns>0||this.gridInstance.model.groupSettings.groupedColumns.length&&this.gridInstance.model.isEdit)&&(m=p+l,this.gridInstance.columnsWidthCollection[m]=D,this.gridInstance.setWidthToColumns(),this.gridInstance.model.scrollSettings.frozenColumns<=m+1&&(this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",D),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",D)))}for(this.gridInstance._colgroupRefresh(),this.gridInstance._recalculateIndentWidth(),o={columnIndex:x,column:A,target:S,oldWidth:k,newWidth:T,extra:L},this.gridInstance._trigger("resizeEnd",o),p=0;p<x.length;p++)this.gridInstance.columnsWidthCollection[x[p]]=T[p],this.gridInstance.model.columns[x[p]].width=T[p];o={columnIndex:x,column:A,target:S,oldWidth:k,newWidth:T,extra:L},this.gridInstance._trigger("resized",o),this.gridInstance.model.summaryRows.length>0&&this.gridInstance._summaryColRrefresh(),this.gridInstance._findColumnsWidth()}}},_getContentWidth:function(i){var s,n,l=0,o=t.buildTag("span",{},{}),r=this.gridInstance;return t.isNullOrUndefined(r._gridRows)||(n=r._gridRows,this.gridInstance.model.scrollSettings.frozenColumns&&i>=this.gridInstance.model.scrollSettings.frozenColumns&&(n=n[1],i-=this.gridInstance.model.scrollSettings.frozenColumns),e.each(n,function(t,n){if(e(n).is(".e-row,.e-alt_row")&&!e(n).is(".e-editedrow")){var a=e(n).find("td.e-rowcell").eq(i),d=e(a).html();r.model.columns[i].commands?o.html(e(d).children()):a.hasClass("e-validError")?o.html(e(d).attr("value")):o.html(d),e(a).html(o),(s=a.find("span:first").width())>l&&(l=s),e(a).html(d)}})),r._refreshUnboundTemplate(this.gridInstance.getContentTable()),l},_getHeaderContentWidth:function(e){var i=0,s=t.buildTag("span",{},{}),n=e.html();return s.html(n),e.html(s),i=e.find("span:first").width(),(this.gridInstance.model.allowFiltering&&"menu"==this.gridInstance.model.filterSettings.filterType||"excel"==this.gridInstance.model.filterSettings.filterType)&&(i=i+e.parent().find(".e-filtericon").width()+10),e.html(n),i}}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.pager.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget("ejPager","ej.Pager",{_rootCSS:"e-pager",validTags:["div"],defaults:{pageSize:12,pageCount:10,currentPage:1,enableExternalMessage:!1,externalMessage:"",enableQueryString:!1,locale:"en-US",masterObject:null,click:null,enableRTL:!1,totalRecordsCount:null,totalPages:null,customText:"",showPageInfo:!0},_init:function(){this._initPrivateProperties(),this.model.enableQueryString&&this._queryStringValue(),this.renderPager(),this._wireEvents()},_initPrivateProperties:function(){this._links=[],this._$prev=null,this._$first=null,this._$PP=null,this._$NP=null,this._lastNP=!1,this._lastpageCount=null,this._$last=null,this._$next=null,this._prevPageNo=null,this.localizedLabels=this._getLocalizedLabels()},_wireEvents:function(){this.model.click!=i&&this._on(this.element,"click",this._pagerClickHandler)},renderPager:function(){var e=t.buildTag("div.e-pagercontainer","",{},{unselectable:"on"});this._renderPagerContainer(e),this.element[0].appendChild(e[0]),this._pageInfo(),this.model.enableExternalMessage&&this._renderPagerMessage()},_queryStringValue:function(){var e=new RegExp("[\\?&]page=([^&#]*)").exec(window.location.href);this.model.currentPage=e?parseInt(e[1]||1):1},_renderPagerMessage:function(){var e=t.buildTag("div.e-pagermessage");this.model.externalMessage.toString().length?e.html(this.model.externalMessage):e.hide(),this.element.append(e)},_renderPagerContainer:function(e){this._renderBackwardButton(e),this._renderpreviousPager(e),this._renderNumericItem(e),this._renderForwardPager(e),this._renderForwardButton(e)},_renderMsgBar:function(){var e=t.buildTag("span.e-pagermsg",String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0));this._parentMsgBar.appendChild(e[0]),this._parentMsgBar.style.textAlign=t.TextAlign.Right},_renderpreviousPager:function(e){this._$PP=t.buildTag("a.e-link e-nextprevitemdisabled e-disable e-spacing e-PP","...",{},{title:this.localizedLabels.previousPagerTooltip,role:"link"}),e.append(this._$PP)},_renderForwardPager:function(e){this._$NP=t.buildTag("a.e-link e-NP e-numericitem e-spacing e-default","...",{},{title:this.localizedLabels.nextPagerTooltip,role:"link"}),e.append(this._$NP)},_renderBackwardButton:function(e){this._$first=t.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.firstPageTooltip}),this._$prev=t.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.previousPageTooltip}),e.append(this._$first),e.append(this._$prev)},_renderNumericItem:function(e){var i=t.buildTag("div.e-numericcontainer e-default","",{},{unselectable:"on"});this._renderNumericLinks(i,this.model.pageCount),e.append(i)},_renderNumericLinks:function(e){var i,s;for(e.empty(),i=1;i<=this.model.pageCount;i++)s=t.buildTag("a.e-link",this.model.customText+i,{},{role:"link"}).addClass("e-numericitem e-spacing e-default").data("index",i),i==this.model.currentPage&&s.removeClass("e-default").addClass("e-currentitem e-active"),e.append(s);this._links=e.children()},_renderForwardButton:function(e){this._$next=t.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{unselectable:"on",title:this.localizedLabels.nextPageTooltip}),this._$last=t.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{unselectable:"on",title:this.localizedLabels.lastPageTooltip}),e.append(this._$next),e.append(this._$last)},_applyCss:function(){this.model.currentPage>1?(this._$prev.removeClass("e-prevpagedisabled").removeClass("e-disable").addClass("e-prevpage e-default"),this._$first.removeClass("e-firstpagedisabled").removeClass("e-disable").addClass("e-firstpage e-default")):(this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default")),this.model.currentPage>this.model.pageCount?this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastNP=!!(this._links.length&&parseInt(this._links[0].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>this.model.totalPages),0==this._lastNP?this._$NP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastpageCount=this.model.totalPages%this.model.pageCount,0==this._lastpageCount&&(this._lastpageCount=this.model.pageCount),this.model.currentPage>this.model.totalPages-this._LastpageCount&&(this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this.model.currentPage==this.model.totalPages||0==this.model.totalRecordsCount?(this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")):(this._$last.addClass("e-lastpage e-default").removeClass("e-lastpagedisabled").removeClass("e-disable"),this._$next.addClass("e-nextpage e-default").removeClass("e-nextpagedisabled").removeClass("e-disable")),this._links.length&&(this._links.removeClass("e-currentitem").removeClass("e-active").addClass("e-default"),e(this._links[(this.model.currentPage-1)%this.model.pageCount]).removeClass("e-default").addClass("e-currentitem e-active"),e(this._links[(this._prevPageNo-1)%this.model.pageCount]).removeClass("e-default").addClass("e-numericitem")),this.model.pageSize>=this.model.totalRecordsCount/this.model.pageCount&&null!=this._$PP&&0!=this._$PP.length&&(this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"))},_SetTotalPages:function(){this.model.totalPages=this.model.totalRecordsCount%this.model.pageSize==0?this.model.totalRecordsCount/this.model.pageSize:parseInt(this.model.totalRecordsCount/this.model.pageSize,10)+1},_refreshNumericItem:function(){var t,i,s;if(0!=this._links.length&&null!=this._links)for(this.model.currentPage=1==this.model.totalPages?1:this.model.currentPage,this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages),t=parseInt(this.model.currentPage/this.model.pageCount,10),this.model.currentPage%this.model.pageCount==0&&t>0&&(t-=1),this._links.css("display","none"),i=0;i<this.model.pageCount;i++)(s=t*this.model.pageCount+1+i)<=this.model.totalPages&&(this._links[i].style.display="",e(this._links[i]).data("index",s),e(this._links[i]).html(this.model.customText+s))},_refreshPagerInfo:function(){0==this.model.totalRecordsCount&&(this.model.currentPage=0),this.element.find(".e-pagermsg").text(String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0))},_refreshExternalMessage:function(){this.model.externalMessage.toString().length?this.element.find(".e-pagermessage").empty().html(this.model.externalMessage).show():this.element.find(".e-pagermessage").hide()},refreshPager:function(){this._SetTotalPages(),this._refreshNumericItem(),this._refreshPagerInfo(),this._applyCss(),this.model.enableExternalMessage&&this._refreshExternalMessage(),this.model.enableRTL?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_kDownHandler:function(e){var t;if(t=e.keyCode?e.keyCode:e.which?e.which:e.charCode,e.target=null,this.model.masterObject.checkKey("firstPage",t,e))e.target=this._$first;else if(this.model.masterObject.checkKey("previousPager",t,e))e.target=this._$PP;else if(this.model.masterObject.checkKey("previousPage",t,e))e.target=this._$prev;else if(this.model.masterObject.checkKey("lastPage",t,e))e.target=this._$last;else if(this.model.masterObject.checkKey("nextPager",t,e))e.target=this._$NP;else{if(!this.model.masterObject.checkKey("nextPage",t,e))return!1;e.target=this._$next}this._pagerClickHandler(e)},_pageInfo:function(){this.model.showPageInfo&&!this._parentMsgBar?(this._parentMsgBar=document.createElement("div"),this._parentMsgBar.className+="e-parentmsgbar",this._renderMsgBar(),this.element[0].appendChild(this._parentMsgBar),this.element[0].className+=this.model.enableRTL?" e-pager e-rtl":" e-pager"):(this._parentMsgBar&&this._parentMsgBar.remove(),this._parentMsgbar=null)},_pagerClickHandler:function(t){this._prevPageNo=this.model.currentPage;var s=e(t.target);return-1!=e.inArray(t.target,this._links)?this.model.currentPage=parseInt(e(t.target).data("index"),10):s.hasClass("e-nextpage")&&1!=s.hasClass("e-nextpagedisabled")?this.model.currentPage%this.model.pageCount==0?(this.model.currentPage++,this._links!=i&&0!=this._links.length&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML,10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0)):this.model.currentPage++:s.hasClass("e-prevpage")&&1!=s.hasClass("e-prevpagedisabled")?(this.model.currentPage%this.model.pageCount==1&&(this._lastNP=!1),this.model.currentPage--,this.model.currentPage<0&&(this.model.currentPage=0)):s.hasClass("e-lastpage")&&1!=s.hasClass("e-lastpagedisabled")?(this._LastpageCount=this.model.totalPages%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this.model.currentPage=this.model.totalPages,this._lastNP=!0):s.hasClass("e-firstpage")&&1!=s.hasClass("e-firstpagedisabled")?(this.model.currentPage=1,this._lastNP=!1):s.hasClass("e-NP")&&1!=s.hasClass("e-nextprevitemdisabled")?(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0,this._LastpageCount=this.model.totalRecordsCount-this.model.pageSize<this.model.pageSize?this.model.totalRecordsCount-this.model.pageSize:this.model.totalRecordsCount/this.model.pageSize%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this._links!=i&&(this.model.currentPage=parseInt(e(this._links[this.model.pageCount-1]).data("index"),10)+1))):s.hasClass("e-PP")&&1!=s.hasClass("e-nextprevitemdisabled")&&(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)-this.model.pageCount),this._lastNP=!1),this.goToPage(this.model.currentPage,t),!1},goToPage:function(e,t){e!=this.model.currentPage&&(this._prevPageNo=this.model.currentPage),this._prevPageNo!==e&&e>=1&&e<=this.model.totalPages?(this.model.currentPage=e,this.model.enableQueryString&&this._updateQueryString(this.model.currentPage),this._trigger("click",{currentPage:e,event:t})):this._trigger("click",{currentPage:e,event:t})},_updateQueryString:function(e){var t=this._getUpdatedURL(window.location.href,"page",e);history.pushState?window.history.pushState({path:t},"",t):window.location.href=t},_getUpdatedURL:function(e,t,i){var s,n,l=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");return e.match(l)?e.replace(l,"$1"+t+"="+i+"$2"):(s="",n=-1!==e.indexOf("?")?"&":"?",-1!==e.indexOf("#")&&(s=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+n+t+"="+i+s)},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_setFirst:!0,_setModel:function(e){for(var t in e)switch(t){case"pageCount":this._renderNumericLinks(this.element.find(".e-numericcontainer"));break;case"enableExternalMessage":this._renderPagerMessage();break;case"showPageInfo":this._pageInfo()}this.refreshPager()},_destroy:function(){this.element.empty().removeClass("e-pager")}}),t.Pager.Locale=t.Pager.Locale||{},t.Pager.Locale.default=t.Pager.Locale["en-US"]={pagerInfo:"{0} of {1} pages ({2} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.dropdownlist.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.globalize.min","./../common/ej.data.min","./../common/ej.scroller.min","./../common/ej.draggable.min"],e):e()}(function(){var t,i;t=jQuery,(i=Syncfusion).widget("ejDropDownList","ej.DropDownList",{element:null,model:null,validTags:["select","input"],_addToPersist:["value","text","selectedIndex","selectedItemIndex","selectedItems","selectedIndices","popupWidth","popupHeight","itemValue"],_setFirst:!1,_rootCSS:"e-dropdownlist",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{cssClass:"",value:null,htmlAttributes:{},text:null,itemValue:"",itemsCount:0,dataSource:null,delimiterChar:",",query:null,fields:{id:null,text:null,value:null,category:null,groupBy:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,selected:null,tableName:null},locale:"en-US",watermarkText:null,height:"",width:"",popupHeight:"152px",popupWidth:"auto",maxPopupHeight:null,minPopupHeight:"20",maxPopupWidth:null,minPopupWidth:"0",targetID:null,template:null,headerTemplate:null,selectedItemIndex:-1,selectedIndex:-1,disableItemsByIndex:null,enableItemsByIndex:null,selectedItems:[],selectedIndices:[],cascadeTo:null,enablePopupResize:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",showRoundedCorner:!1,showPopupOnLoad:!1,enableRTL:!1,enabled:!0,filterType:"contains",sortOrder:"ascending",caseSensitiveSearch:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,enablePersistence:!1,enableFilterSearch:!1,enableIncrementalSearch:!0,readOnly:!1,enableAnimation:!1,multiSelectMode:"none",allowGrouping:!1,enableSorting:!1,validationRules:null,validationMessage:null,actionBegin:null,actionComplete:null,actionFailure:null,actionSuccess:null,create:null,popupHide:null,popupShown:null,beforePopupShown:null,beforePopupHide:null,popupResizeStart:null,popupResize:null,popupResizeStop:null,change:null,select:null,dataBound:null,search:null,checkChange:null,cascade:null,destroy:null},dataTypes:{cssClass:"string",itemsCount:"number",watermarkText:"string",template:"string",disableItemsByIndex:"string",enableItemsByIndex:"string",enableIncrementalSearch:"boolean",cascadeTo:"string",delimiterChar:"string",showRoundedCorner:"boolean",showPopupOnLoad:"boolean",enableRTL:"boolean",enablePersistence:"boolean",allowVirtualScrolling:"boolean",virtualScrollMode:"enum",enabled:"boolean",readOnly:"boolean",multiSelectMode:"enum",dataSource:"data",query:"data",fields:"data",selectedItems:"array",enableAnimation:"boolean",allowGrouping:"boolean",enableSorting:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",locale:"string"},observables:["value","selectedItemIndex","selectedIndex"],value:i.util.valueFunction("value"),selectedItemIndex:i.util.valueFunction("selectedItemIndex"),selectedIndex:i.util.valueFunction("selectedIndex"),enable:function(){this._visibleInput.hasClass("e-disable")&&(this.target.disabled=!1,this.model.enabled=!0,this._visibleInput.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable"),this.popupListWrapper.removeClass("e-disable"),this._isIE8&&this.drpbtnspan.removeClass("e-disable"),this.container.on("mousedown",t.proxy(this._OnDropdownClick,this)),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable"),this.wrapper.attr("tabindex","0")),this._wireEvents()},disable:function(){this._visibleInput.hasClass("e-disable")||(this.target.disabled=!0,this.model.enabled=!1,this._visibleInput.addClass("e-disable"),this.popupListWrapper.addClass("e-disable"),this.dropdownbutton.addClass("e-disable"),this._isIE8&&this.drpbtnspan.addClass("e-disable"),"visualmode"==this.model.multiSelectMode&&this._ulBox.addClass("e-disable"),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this)),this._unwireEvents(),this.wrapper.removeAttr("tabindex"),this._isPopupShown()&&this._hideResult())},getValue:function(){return this._visibleInput.val()},_setValue:function(e){i.isNullOrUndefined(e)||(this._raiseEvents=!1,i.isNullOrUndefined(this.model.text)||this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByValue(e))},_setText:function(e){e&&(this._raiseEvents=!1,this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByText(e))},_setItemValue:function(e){this.model.itemValue=e},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.text(e)},hidePopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._hideResult()},showPopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._showResult()},clearText:function(){this._clearTextboxValue(),this._isWatermark||this._setWatermark()},addItem:function(e){var i,s,n,l,o,r;if(!this.model.enabled||!e||(this._mapFields(),(i=t.isArray(e)?e:[e]).length<1))return!1;for(s=this.mapFld,(n={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null,_category:null})._id=i[0][s._id]?s._id:"id",n._imageUrl=i[0][s._imageUrl]?s._imageUrl:"imageUrl",n._imageAttributes=i[0][s._imageAttributes]?s._imageAttributes:"imageAttributes",n._spriteCSS=i[0][s._spriteCSS]?s._spriteCSS:"spriteCssClass",n._text=i[0][s._text]?s._text:"text",n._value=i[0][s._value]?s._value:"value",n._htmlAttributes=i[0][s._htmlAttributes]?s._htmlAttributes:"htmlAttributes",n._selected=i[0][s._selected]?s._selected:"selected",n._category=i[0][s._category]?s._category:"groupBy",this._generateLi(i,n),l=this.dummyUl,o=0;o<i.length;o++)this._listItem(i[o],"add");this.model.showCheckbox?this._appendCheckbox(l,!0):this._isSingleSelect()||this._multiItemSelection(l,!0),this._virtualUl.append(t(this.dummyUl).clone(!0)),this.ultag.append(this.dummyUl),this._isPopupShown()&&(r=this.scrollerObj?this.scrollerObj.scrollTop():0,this._refreshScroller(),this.scrollerObj&&this.scrollerObj.option("scrollTop",r))},_toArray:function(e,s){var n;return"function"==typeof e&&(e=i.util.getVal(e)),t.isArray(e)?n=e:"string"==typeof e?s&&("visualmode"==this.model.multiSelectMode||"delimiter"==this.model.multiSelectMode||this.model.showCheckbox)?0==(n=e.split(this.model.delimiterChar)).length&&(n=[e]):(s||0==(n=e.split(this.model.delimiterChar)).length)&&(n=[e]):n=[e],n},_trim:function(e){return"string"==typeof e?t.trim(e):e},selectItemByIndex:function(e){this._selectItemByIndex(e)},selectItemsByIndices:function(e){this._selectItemByIndex(e)},_selectItemByIndex:function(e){var i,s,n,l;for(this.listitems=this._getLi(),this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,i=this._toArray(e,!0),n=0;n<i.length;n++)if(null!=(s=parseInt(i[n]))&&s>=0){if(-1==t.inArray(s,this._selectedIndices))for(l=0;l<this.listitems.length;l++)t(this.listitems[l]).hasClass("e-disable")||l==s&&(this.selectedIndexValue=l,this._activeItem=s,this._enterTextBoxValue())}else this.model.showCheckbox||"none"!=this.model.multiSelectMode||this._clearTextboxValue()},unselectItemsByIndices:function(e){this._unselectItemByIndex(e)},unselectItemByIndex:function(e){this._unselectItemByIndex(e)},_unselectItemByIndex:function(e){var i,s,n,l;for(this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,s=this._toArray(e,!0),this.listitems=this._getLi(),l=0;l<s.length;l++)for(n=parseInt(s[l]),i=0;i<this.listitems.length;i++)i==n&&(this.selectedIndexValue=i,this._activeItem=n,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue())},setSelectedValue:function(e){this.selectItemByValue(e)},selectItemByValue:function(e){var s,n,l,o;if(this.listitems=this._getLi(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(n=this._toArray(e,!0),l=0;l<n.length;l++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(o=this._getAttributeValue(this.listitems[s])||t(this.listitems[s]).text())&&(this._selectedValue=o,this._selectedValue==n[l])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByValue:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this._getAttributeValue(this.listitems[t])&&(this._selectedValue=this._getAttributeValue(this.listitems[t]),this._selectedValue==s[i])){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},setSelectedText:function(e){this.selectItemByText(e)},selectItemByText:function(e){var s,n,l;if(this.listitems=this._getLi(),this._mapFields(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(n=this._toArray(e,!0),l=0;l<n.length;l++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(this.selectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[s]:this._getField(this.popupListItems[s],this.mapFld._text),this.selectedTextValue==n[l])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByText:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),this._mapFields(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this.unselectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[t]:this._getField(this.popupListItems[t],this.mapFld._text),this.unselectedTextValue==s[i]){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},getSelectedValue:function(){return this.element.val()},getSelectedItem:function(){var e,t=[];for(this.listitems=this._getLi(),e=0;e<this._selectedIndices.length;e++)t.push(this.listitems[this._selectedIndices[e]]);return t},getItemDataByValue:function(e){for(var t,i=this._toArray(e,!1),s=[],n=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",l=0;l<i.length;l++)for(t=0;t<this._rawList.length;t++)this._rawList[t][n]==i[l]&&s.push(this._rawList[t]);return s},getListData:function(){return this._rawList},getSelectedItemsID:function(){return this._selectedItemsID},disableItemsByIndices:function(e){this._disableItemByIndex(e)},disableItemByIndex:function(e){this._disableItemByIndex(e)},_disableItemByIndex:function(e){var i,s;if(!this.model.enabled)return!1;for(i=this._toArray(e,!1),s=0;s<i.length;s++)null==i[s]||isNaN(parseInt(i[s]))||i.length>0&&!(t.inArray(parseInt(i[s]),this._disabledItems)>-1)&&(index=t.inArray(i[s],this._disabledItems),this._setClass(this._getLi()[parseInt(i[s])],"e-disable"),this._disabledItems.push(parseInt(i[s])),this.model.disableItemsByIndex=String(this._disabledItems.join(",")))},enableItemsByIndices:function(e){this._enableItemByIndex(e)},enableItemByIndex:function(e){this._enableItemByIndex(e)},_enableItemByIndex:function(e){var i,s,n=this._toArray(e,!1);for(this.model.enableItemsByIndex=e,s=0;s<n.length;s++)n.length>0&&t.inArray(parseInt(n[s]),this._disabledItems)>-1&&!isNaN(parseInt(n[s]))&&(i=t.inArray(parseInt(n[s]),this._disabledItems),this._removeClass(this._getLi()[parseInt(n[s])],"e-disable"),this._disabledItems.splice(i,1));this.model.enableItemsByIndex=null,this.model.disableItemsByIndex=this._disabledItems.join(this.model.delimiterChar)},_validateDelimiter:function(e){return 1!=this._trim(e).length||/^[a-zA-Z0-9]+$/.test(e)?",":e},_removeText:function(e){var i=this.element[0].value.split(this.model.delimiterChar),s=this._visibleInput[0].value.split(this.model.delimiterChar),n=t.inArray(e,i);n>=0&&(i.splice(n,1),s.splice(n,1)),this.element[0].value=i.join(this.model.delimiterChar),this._visibleInput[0].value=s.join(this.model.delimiterChar)},_addText:function(e){var t,i,s,n;if(this._checkContains(this._hiddenValue))return!1;for(t=["element","_visibleInput"],s=0;s<t.length;s++)i="element"==t[s]?this._hiddenValue:e,this[t[s]][0].value&&""!=this[t[s]][0].value?((n=this[t[s]][0].value.split(this.model.delimiterChar)).push(i),this[t[s]][0].value=n.join(this.model.delimiterChar)):this[t[s]][0].value=i},_checkContains:function(e){var t,i=this.element[0].value.split(this.model.delimiterChar);for(this.contains=!1,t=0;t<i.length;t++)if(i[t]===e){this.contains=!0;break}return this.contains},_updateLocalConstant:function(){this._localizedLabels=i.getLocalizedConstants("ej.DropDownList",this.model.locale)},_init:function(){var e=i.browserInfo();this._updateLocalConstant(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._textContent=this._isIE8?"innerText":"textContent",(this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))||this.element.is("select"))&&(this._isWatermark="placeholder"in document.createElement("input"),this._id=this.element[0].id,this._initialize(),this._render(),this._addAttr(this.model.htmlAttributes),this._enabled(this.model.enabled),this._initValue=!1,this._checkboxValue=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation()))},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,s,n,l,o;if(0!=this.element.closest("form").length)for(n in this.element.rules("add",this.model.validationRules),(e=this.element.closest("form").data("validator"))||(e=this.element.closest("form").validate()),s=this.element.attr("name"),e.settings.messages[s]={},this.model.validationRules)if(l=null,!i.isNullOrUndefined(this.model.validationRules[n])){if(i.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[n]))for(o in e.settings.messages[s][n]=t.validator.messages[n],this.model.validationMessage)n==o&&(l=this.model.validationMessage[n]);else l=this.model.validationRules.messages[n];e.settings.messages[s][n]=null!=l?l:t.validator.messages[n]}},_setInitialPopup:function(e){this.model.enabled&&!this.model.readOnly&&(0==e?this._hideResult():this._showResult())},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupListWrapper.removeClass(this.model.cssClass).addClass(e)},_setRTL:function(e){this.model.enableRTL!=e&&(this.model.enableRTL=e,this._RightToLeft(),this._dropbtnRTL())},_changeHeight:function(e){this.wrapper.height(e),this._setListHeight()},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setModel:function(e){var s,n,l,o,r;for(s in e)switch(s){case"dataSource":this._isEqualDataSource(e[s])||this._checkModelDataBinding(e[s],this.model.query);break;case"query":this._checkModelDataBinding(this.model.dataSource,e[s]);break;case"fields":this.model.fields=t.extend(this.model.fields,e[s]),this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"itemsCount":this.model.itemsCount=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"template":this.model.template=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"value":n=i.util.getVal(e[s]),i.isNullOrUndefined(n)||""===n?this._clearTextboxValue():(this._setValue(i.util.getVal(e[s])),e[s]=this.model.value);break;case"delimiterChar":l=this.model.delimiterChar,e[s]=this._validateDelimiter(e[s]),this.model.delimiterChar=e[s],this.model.text&&(this.model.text=this.model.text.split(l).join(this.model.delimiterChar),this._visibleInput.val(this.model.text)),this.model.value&&(this.model.value=this.model.value.split(l).join(this.model.delimiterChar),this.element.val(this.model.value));break;case"text":i.isNullOrUndefined(e[s])||""===e[s]?this._clearTextboxValue():(this._setText(e[s]),e[s]=this.model.text);break;case"itemValue":this._setItemValue(e[s]);break;case"enableRTL":this._setRTL(e[s]);break;case"enabled":this._enabled(e[s]);break;case"height":this._changeHeight(e[s]);break;case"width":this._changeWidth(e[s]);break;case"popupHeight":this.model.popupHeight=e[s],this._setListHeight(e[s]);break;case"popupWidth":this.model.popupWidth=e[s],this._setListWidth();break;case"minPopupHeight":this.model.minPopupHeight=e[s],this._setListHeight(e[s]);break;case"minPopupWidth":this.model.minPopupWidth=e[s],this._setListWidth();break;case"maxPopupHeight":this.model.maxPopupHeight=e[s],this._setListHeight(e[s]);break;case"maxPopupWidth":this.model.maxPopupWidth=e[s],this._setListWidth();break;case"cssClass":this._changeSkin(e[s]);break;case"showCheckbox":this.model.showCheckbox=e[s],o=this.model.text,r=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this._checkboxHideShow(e[s]),this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):r&&r.length&&this._setText(r[0]),this._isPopupShown()&&this._setListPosition();break;case"checkAll":return this._setCheckAll(e[s]),!1;case"uncheckAll":return this._setUncheckAll(e[s]),!1;case"watermarkText":this._changeWatermark(e[s]);break;case"validationRules":0!=this.element.closest("form").length&&(null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation()));break;case"locale":this.model.locale=e[s],this._updateLocalConstant();break;case"validationMessage":0!=this.element.closest("form").length&&(this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation()));break;case"showRoundedCorner":this._roundedCorner(e[s]),this.model.showRoundedCorner=e[s];break;case"showPopupOnLoad":this._setInitialPopup(e[s]);break;case"targetID":this.model.targetID=e[s],this._showFullList();break;case"selectedItemIndex":case"selectedIndex":this._selectItemByIndex(e[s]),this.model.selectedItemIndex=this.model.selectedIndex=e[s];break;case"unselectItemByIndex":this._unselectItemByIndex(e[s]);break;case"disableItemsByIndex":this._disableItemByIndex(e[s]);break;case"enableItemsByIndex":this._enableItemByIndex(e[s]);break;case"selectedItems":case"selectedIndices":this._selectCheckedItem(e[s]),e[s]=this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;break;case"multiSelectMode":"visualmode"==this.model.multiSelectMode&&(this._swapUlandInput(!1),this._ulBox.remove(),this._ulBox=null),this.model.multiSelectMode=e[s],o=this.model.text,r=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):(this._setText(r[0]),this.wrapper.find("input[name="+this._name+"]").remove()),this._isPopupShown()&&this._setListPosition();break;case"allowGrouping":this._setGroupingAndSorting("allowGrouping",e[s]);break;case"enableSorting":this._setGroupingAndSorting("enableSorting",e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"enablePopupResize":this.model.enablePopupResize=e[s],e[s]?this._enablePopupResize():this.popupListWrapper.removeClass("e-resizable").find(".e-resizebar").remove()&&this._hideResult();break;case"enableFilterSearch":if(e[s]){this.model.enableFilterSearch=!0,this._enableSearch();break}this._removeSearch()}},_clearTextboxValue:function(){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._selectedIndices=[],this.model.selectedItems=[],this.model.selectedIndices=[],this.selectedIndex(null),this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.model.showCheckbox&&this._resetCheck(),0!=this.wrapper.find("ul.e-ul.e-boxes").length&&(this._ulBox.children("li").remove(),""===this._name?this.wrapper.find("input:hidden[id^='#']").remove():this.wrapper.find("input:hidden[id^='#'][name="+this._name+"]").remove(),t(this.element).attr("name",this._name))},_destroy:function(){this._destroyDropdown(),this._visibleInput.removeClass("e-input "),this._setAttr(this.element[0],{accesskey:this.wrapper.attr("accesskey"),type:"text"}),this._isWatermark&&this._visibleInput.removeAttr("placeholder"),this.element[0].value="",this.model.dataSource||(this.selectOptions?this.docbdy&&this.docbdy.append(this.selectOptions.show()).show()&&this.element.remove()&&this.selectOptions&&this.selectOptions.removeClass("e-dropdownlist e-js"):this.docbdy&&this.ultag.find("li").removeClass("e-active")&&this.docbdy.append(this.ultag.html()).show()),this._hideResult(),this.popupPanelWrapper.remove(),this.element.removeAttr("aria-expanded aria-autocomplete aria-haspopup aria-owns accesskey role").css({width:"",display:"block"}),this._unwireEvents()},_finalize:function(){this.model.text!=this._visibleInput.val()&&this._setText(this.model.text),""==this.value()&&""!==this._visibleInput[0].value&&this._updateValue(this.element[0].value),this.value()!==this.element.val()&&this._setValue(this.value()),this.selectedIndex(-1!=this.selectedIndex()?this.selectedIndex():this.selectedItemIndex()),-1!=this.selectedIndex()?this._selectItemByIndex(this.selectedIndex()):this._selectedIndices.length>0&&this._selectCheckedItem(this._selectedIndices),null!=this.model.disableItemsByIndex&&this._disableItemByIndex(this.model.disableItemsByIndex),null!=this.model.enableItemsByIndex&&this._enableItemByIndex(this.model.enableItemsByIndex)},_initialize:function(){this._selectedIndices=this.model.selectedIndices.length>0?this.model.selectedIndices:this.model.selectedItems,this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,this.model.selectedIndex=-1!=this.model.selectedIndex?this.model.selectedIndex:this.model.selectedItemIndex,this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown()),this._selectedItemsID=[],this.target=this.element[0],this._disabledItems=[],this._queryString=null,this.suggLen=0,this._itemId=null,this.checkedStatus=!1,this._incqueryString="",this._activeItem=null,this.ddWidth=0,this._initValue=!0,this._virtualCount=0,this._raiseEvents=!0},_renderSelectToDropdown:function(){var e,s,n,l;if(this.inputElement=i.buildTag("input.e-dropdownlist#"+this._id+"_input","",{},{type:"text","data-role":"none"}),this.inputElement.insertAfter(this.element),this.element.attr("name")&&(this.inputElement.attr("name",this.element.attr("name")),this.element.removeAttr("name")),this.selectOptions=this.element,this.selectOptions.attr("id",this._id),null==this.model.dataSource){for(this.optionDiv=i.buildTag("div#"+this._id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=i.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptionItems=this.element.children("option"),s=this.selectOptionItems.length,this.optionDummyUl=t(),e=0;e<s;e++)l=this.selectOptionItems[e],null!=(n=t(l).attr("label")?t(l).attr("label"):l.innerHTML)&&(this.optionLi=i.buildTag("li",n,{},{"data-value":l.value,unselectable:"on"}),this.optionDummyUl.push(this.optionLi[0]),t(l).attr("selected")&&this.model.showCheckbox&&(-1==t.inArray(e,this._selectedIndices)?(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices):i.isNullOrUndefined(this.selectedIndex())&&this.selectedIndex(e)));this.optionUl.append(this.optionDummyUl)}this.element.css("display","none"),this.element=this.inputElement},_render:function(){var e;this._renderDropdown(),this._setWatermark(),this._renderPopupPanelWrapper(),this._showFullList(),this._roundedCorner(this.model.showRoundedCorner),e=this.model.dataSource,i.DataManager&&e instanceof i.DataManager?e.dataSource.offline&&e.dataSource.json&&e.dataSource.json.length>0&&this._finalize():this._finalize(),i.DataManager&&this.model.dataSource instanceof i.DataManager||this._finalize(),this._setCheckAll(this.model.checkAll)},_isEqualDataSource:function(e){var t,i,s;if(!this.model.dataSource||!e||this.model.dataSource.length!==e.length)return!1;for(t=!0,i=0,s=this.model.dataSource.length;i<s;i++)if(this.model.dataSource[i]!==e[i]){t=!1;break}return t},_checkModelDataBinding:function(e,t){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this.model.selectedItems=this.model.selectedIndices=this._selectedIndices=[],this.model.selectedIndex=this.model.selectedItemIndex=-1,"visualmode"==this.model.multiSelectMode&&this._destroyBoxModel(),this.model.dataSource=e,this.model.query=t,this.ultag.empty(),this._showFullList()},_initDataSource:function(e){var t=this;i.DataManager&&e instanceof i.DataManager&&(t._addLoadingClass(),t._trigger("actionBegin",{requestFrom:"default"})||e.executeQuery(this._getQuery()).done(function(e){t._trigger("actionSuccess",{e:e,requestFrom:"default"}),t._totalCount=e.count,t._listItem(e.result),t._removeLoadingClass(),t._renderPopupList(),t._finalize()}).fail(function(e){t.model.dataSource=null,t._addLoadingClass(),t._trigger("actionFailure",{e:e,requestFrom:"default"})}).always(function(e){t._trigger("actionComplete",{e:e,requestFrom:"default"})}))},_listItem:function(e,i){"add"==i?(this.popupListItems.push(e),this._rawList.push(e)):t.isArray(e)&&(this.popupListItems=e.slice(0),this._rawList=e.slice(0))},_getQuery:function(e){var t,s,n,l=this.model.fields,o=i.Query();if(!i.isNullOrUndefined(this.model.query)||this.model.template||e)this.model.query&&(o=this.model.query.clone());else{for(n in s=[],l)"tableName"!==n&&l[n]&&s.push(l[n]);s.length>0&&o.select(s)}return this.model.allowVirtualScrolling&&o.requiresCount(),this.model.itemsCount>0&&o.take(this.model.itemsCount),t=this.model.dataSource.dataSource,l&&(t&&t.url&&!t.url.match(l.tableName+"$")||t&&!t.url||!t)&&(i.isNullOrUndefined(l.tableName)||o.from(l.tableName)),o},_addLoadingClass:function(){this._isPopupShown()?this.popupListWrapper.addClass("e-load"):(this.dropdownbutton.addClass("e-load"),this.drpbtnspan.removeClass("e-icon e-arrow-sans-down")),this._readOnly=!0},_removeLoadingClass:function(){this.dropdownbutton.removeClass("e-load"),this.drpbtnspan.addClass("e-icon e-arrow-sans-down"),this._readOnly=!1,this.popupListWrapper.removeClass("e-load")},_renderDropdown:function(){if(this.wrapper=i.buildTag("span.e-ddl e-widget "+this.model.cssClass+"#"+this._id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.container=i.buildTag("span.e-in-wrap e-box #"+this._id+"_container"),this.element.removeAttr("accesskey"),null==this.model.value&&null!=this.element.attr("value")&&(this.model.value=this.element.attr("value")),this.element.attr("value","").val(""),this._setAttr(this.element[0],{type:"hidden",role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide(),this.drpbtnspan=i.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select",unselectable:"on"}),this.dropdownbutton=i.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button",unselectable:"on"}).append(this.drpbtnspan),this.container.insertAfter(this.element),this.container.append(this.element),this.container.append(this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.selectelement&&this.selectOptions.insertBefore(this.element),this._visibleInput=i.buildTag("input#"+this._id+"_hidden","",{}).insertAfter(this.element),this._visibleInput.addClass("e-input "),this._setAttr(this._visibleInput[0],{readonly:!0,tabindex:-1,"data-role":"none"}),!this._isWatermark){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan=i.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(e),this._hiddenSpan.css("display","none"),this._hiddenSpan.on("mousedown",t.proxy(this._OnDropdownClick,this))}this._checkNameAttr(),this._setDimentions(),this._RightToLeft(),this.ddWidth=this.dropdownbutton.outerWidth()>0?this.dropdownbutton.outerWidth():24,this.container.on("mousedown",t.proxy(this._OnDropdownClick,this))},_checkNameAttr:function(){this._name=i.isNullOrUndefined(this.element.attr("name"))?this._id:this.element.attr("name"),this.element.attr("name",this._name)},_addAttr:function(e){var s=this;t.map(e,function(e,n){var l=n.toLowerCase();"class"==l?s.wrapper.addClass(e):"disabled"==l&&"disabled"==e?s.disable():"readOnly"==l&&"readOnly"==e?s.model.readOnly=!0:"style"==l?s.wrapper.attr(n,e):i.isValidAttr(s._visibleInput[0],n)?t(s._visibleInput).attr(n,e):s.wrapper.attr(n,e)})},_renderBoxModel:function(){if("visualmode"!=this.model.multiSelectMode)return!1;this._ulBox=i.buildTag("ul.e-ul e-boxes"),this.container.prepend(this._ulBox),this._ulBox.css("min-height","30px"),this._ulBox.css("display","none"),this._on(this.container,"click",function(e){if(!this.model.enabled)return!1;var i=t(e.target);i.hasClass("e-options")&&(!e.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")),!e.ctrlKey&&i.hasClass("e-boxes")&&this._removeActive()})},_renderPopupPanelWrapper:function(){var e=t("#"+this.element[0].id+"_popup_wrapper").get(0);e&&t(e).remove(),this.popupPanelWrapper=i.buildTag("div#"+this._id+"_popup_wrapper"),t("body").append(this.popupPanelWrapper),this.popupListWrapper=i.buildTag("div.e-ddl-popup e-box e-widget  e-popup#"+this._id+"_popup_list_wrapper","",{display:"none",overflow:"hidden"}),this.popupList=i.buildTag("div#"+this._id+"_popup",{tabIndex:0}),this.popupListWrapper.addClass(this.model.cssClass),this.popup=this.popupList,this.popupScroller=i.buildTag("div"),this.ultag=i.buildTag("ul.e-ul","",{},{role:"listbox"}),this.popupScroller.append(this.ultag),this.popupList.append(this.popupScroller),this.model.headerTemplate&&(this.headerTemplate=t("<div>").append(this.model.headerTemplate),this.popupListWrapper.append(this.headerTemplate)),this.popupListWrapper.append(this.popupList),this.popupPanelWrapper.append(this.popupListWrapper),this.ultag.on({mouseenter:t.proxy(this._OnMouseEnter,this),mouseleave:t.proxy(this._OnMouseLeave,this),click:t.proxy(this._OnMouseClick,this)},"li:not('.e-category')"),i.isTouchDevice()&&this.ultag.on({tap:t.proxy(this._OnMouseEnter,this)},"li:not('.e-category')"),t(window).on("resize",t.proxy(this._OnWindowResize,this))},_updateText:function(){this.model.text=""==this._visibleInput.val()?null:this._visibleInput.val()},_updateValue:function(e){this.value(""==e?null:e)},_setGroupingAndSorting:function(e,t){var i,s,n;if(this.model[e]=t,i=this.model.text,this._updateValue(""),this._selectedIndices=[],this.ultag.empty(),this._showFullList(),this.model.showCheckbox&&i)for(s=i.split(this.model.delimiterChar),n=0;n<s.length;n++)this.selectItemByText(s[n]);else this.selectItemByText(i)},_setSortingList:function(){var e,i,s=document.createElement("ul");if(t(s).append(this.itemsContainer.children()),this.model.allowGrouping||t(s).find(">.e-category").length>0)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<t(s).find(">.e-category").length;e++)i=t(s).find(">.e-category").eq(0).first().nextUntil(".e-category").get(),this._setSortList(s,i);else t(s).children(">.e-category").remove(),i=t(s).children("li").get(),this._setSortList(s,i);this.itemsContainer=t(s)},_setSortList:function(e,i){i.sort(function(e,i){var s=t(e).text().toUpperCase(),n=t(i).text().toUpperCase();return s<n?-1:s>n?1:0}),"descending"==this.model.sortOrder&&i.reverse(),(this.model.allowGrouping||t(e).find(">.e-category").length>0)&&(t(e).append(t("<li>").text(t(e).find(">.e-category").eq(0).text()).addClass("e-category")),t(e).find(">.e-category").eq(0).remove()),t.each(i,function(i,s){t(e).append(s)})},_renderPopupList:function(){this._doDataBind(),this._renderRemaining()},_renderRemaining:function(){var e=this;this._dropbtnRTL(),this.model.enableFilterSearch&&this._enableSearch(),this.model.enablePopupResize&&this._enablePopupResize(),this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode&&this._totalCount&&this._totalCount>0&&(this._totalHeight=29*this._totalCount,this._totalPages=this._totalCount/(29*this.model.itemsCount),this._loadedItemHeight=29*this._getLi().length,this._getLi().attr("page",0),this._virtualPages=[0],this.ultag.append(t("<span>").addClass("e-virtual").css({height:this._totalHeight-this._loadedItemHeight,display:"block"}))),this._virtualUl=this.ultag.clone(!0),this._setListWidth(),this._setListHeight(),this._setListPosition(),this.popupScroller.css({height:"",width:""}),this.popupList.ejScroller({height:this._getPopupHeight(),width:0,scrollerSize:20,scroll:function(t){e.model.allowVirtualScrolling&&e._onScroll(t)}}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.find("div.e-scrollbar div").attr("unselectable","on"),this.popupListWrapper.css({display:"none",visibility:"visible"}),this._isSingleSelect()||(this.model.showCheckbox?this._checkboxHideShow(this.model.showCheckbox):this._multiItemSelection(this._getLi())),this._setUncheckAll(this.model.uncheckAll),this._changeSkin(this.model.cssClass),this.model.showPopupOnLoad&&this._showResult()},_enableSearch:function(){this.model.enableFilterSearch&&(this.inputSearch||(this.inputSearch=i.buildTag("input#"+this._id+"_inputSearch.e-input","",{},{type:"text","data-role":"none"}),this.popupListWrapper.prepend(t("<span>").addClass("e-atc e-search").append(t("<span>").addClass("e-in-wrap ").append(this.inputSearch).append(t("<span>").addClass(" e-icon e-search")))),this._on(this.inputSearch,"keyup",this._OnSearchEnter)))},_removeSearch:function(){this.model.enableFilterSearch=!1,this.popupListWrapper.find(".e-atc.e-search").remove(),this._isPopupShown()&&this.hidePopup(),this.inputSearch=null},_OnSearchEnter:function(e){var s,n,l="mozilla"==i.browserInfo().name?e.charCode:e.keyCode;-1!=t.inArray(l,[38,40,13])&&this.ultag.find("li.e-nosuggestion").length<=0?13==l?this._OnKeyUp(e):this._OnKeyDown(e):(this._activeItem=-1,this._queryString=this.inputSearch.val(),""==this._queryString&&this._virtualUl?(n={searchString:this._queryString,searchQuery:null,items:this._rawList},this._trigger("search",n),this._resetList(),this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()):(this._mapFields(),s=this._addSearchQuery(i.Query(),!this._isPlainType(this._rawList)),n={searchString:this._queryString,items:this._rawList,searchQuery:s},this.popupListWrapper.find(".e-atc.e-search .e-search").addClass("e-cross-circle").removeClass("e-search"),this._on(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch),this._trigger("search",n)||this._filterSearch(s,n)))},_refreshSearch:function(){this._resetSearch(),this._refreshPopup()},_filterSearch:function(e,t){var s=!1,n=t.result?t.result:i.DataManager(this._rawList).executeLocal(e);0==n.length&&(s=!0,n.push(this._getLocalizedLabels("emptyResultText"))),this.popupListItems=n,this.ultag.empty(),this._isPlainType(this.popupListItems)?this._plainArrayTypeBinding(n):this._objectArrayTypeBinding(n,"search"),s&&1==this.ultag.find("li").length&&this.ultag.find("li").eq(0).addClass("e-nosuggestion"),this.model.showCheckbox&&!s&&this._appendCheckbox(this._getLi()),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1,this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()},_updateSelectedIndexByValue:function(e){var t,i,s;if(e&&this.model.enableFilterSearch){for(this._selectedIndices=this.model.selectedItems=this.model.selectedIndices=[],this._virtualList=this._virtualUl.children("li:not('.e-category')"),t=this._toArray(e),i=0;i<t.length;i++)for(s=0;s<this._virtualList.length;s++)if(t[i]==this._getIndexedValue(this._virtualList[s])){this._selectedIndices.push(s);break}this.model.selectedItems=this.model.selectedIndices=this._selectedIndices}},_getIndexedValue:function(e){return this._getAttributeValue(e)?this._getAttributeValue(e):e.innerText},_resetSearch:function(){this.inputSearch&&this.model&&this.model.enableFilterSearch&&""!=this.inputSearch.val()&&this._virtualUl&&(this.inputSearch.val(""),this._resetList())},_resetList:function(){1==this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").length&&(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").addClass("e-search").removeClass("e-cross-circle"),this._off(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch)),this._listItem(this._rawList),this.ultag.empty().append(this._virtualUl.children().clone(!0)),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1},_addSearchQuery:function(e,t){var i,s="";return t&&(s=(i=this.model.fields)&&i.text?i.text:"text"),this._queryString&&e.where(s,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch),this.model.itemsCount>0&&e.take(this.model.itemsCount),e},_targetElementBinding:function(){var e,i,s,n,l,o=this.element.parents().last();if(this.docbdy=this.model.targetID?o.find("#"+this.model.targetID):this.optionDiv?this.optionDiv:null,!this.docbdy)return!1;if(this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),(this.model.allowGrouping||this.itemsContainer.find(">.e-category").length>0)&&!this.model.enableSorting)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<this.itemsContainer.find(">.e-category").length;e++)(i=this.itemsContainer.find(">.e-category").eq(e)).replaceWith(t("<li>").text(i.text()).addClass("e-category"));else this.model.enableSorting&&this._setSortingList();for(this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this.items.children("img,div").addClass("e-align"),this._listItem([]),s=0;s<this.items.length;s++)n=t(this.items[s]).text(),l=this._getAttributeValue(this.items[s]),t(this.items[s]).attr("data-value")||t(this.items[s]).attr("data-value",l||n),this._listItem({text:n,value:l||n},"add");this.ultag.empty().append(this.itemsContainer.children()),this.ultag.children("li").attr("role","option").attr("unselectable","on"),this.docbdy.css({display:"none"}).children("ol,ul").remove()},_plainArrayTypeBinding:function(e){var s,n;if(this.dummyUl=t(),this.model.enableSorting&&(e.sort(),"descending"==this.model.sortOrder&&e.reverse()),e.length>0){for(s=0;s<e.length;s++)i.isNullOrUndefined(e[s])||(n=i.buildTag("li",e[s],{},{"data-value":e[s],unselectable:"on"}),this.dummyUl.push(n[0]));this.ultag.append(this.dummyUl),this._trigger("dataBound",{data:e})}},_mapFields:function(){this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category;var e=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null},this.mapFld._id=e&&e.id?e.id:"id",this.mapFld._imageUrl=e&&e.imageUrl?e.imageUrl:"imageUrl",this.mapFld._imageAttributes=e&&e.imageAttributes?e.imageAttributes:"imageAttributes",this.mapFld._spriteCSS=e&&e.spriteCssClass?e.spriteCssClass:"spriteCssClass",this.mapFld._text=e&&e.text?e.text:"text",this.mapFld._value=e&&e.value?e.value:"value",this.mapFld._htmlAttributes=e&&e.htmlAttributes?e.htmlAttributes:"htmlAttributes",this.mapFld._selected=e&&e.selected?e.selected:"selected",this.mapFld._category=e&&e.groupBy?e.groupBy:"groupBy"},_doDataBind:function(){var e=this.model.dataSource,t=this.popupListItems;!e||!t||!t.length||t.length<1?this._targetElementBinding():this._isPlainType(t)?this._plainArrayTypeBinding(t):this._objectArrayTypeBinding(t)},_isPlainType:function(e){return"object"!=typeof e[0]},_objectArrayTypeBinding:function(e,s){var n,l,o,r,a,d;if(this.dummyUl=t(),this._mapFields(),this.model.enableSorting&&(n=i.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),e=i.DataManager(e).executeLocal(n),this.popupListItems=e),this.model.allowGrouping||this.model.fields.groupBy)for(this.popupListWrapper.addClass("e-atc-popup"),l=this.mapFld._category,r=i.Query().group(l),this.model.enableSorting||r.queries.splice(0,1),o=i.DataManager(e).executeLocal(r),this._swapUnCategorized(o),"search"==s?this.popupListItems=[]:this._listItem([]),a=0;a<o.length;a++)for(o[a].key&&this.ultag.append(i.buildTag("li.e-category",o[a].key).attr("role","option")[0]),this._generateLi(o[a].items,this.mapFld),this.ultag.append(this.dummyUl),d=0;d<o[a].items.length;d++)"search"==s?this.popupListItems.push(o[a].items[d]):this._listItem(o[a].items[d],"add");else this._generateLi(e,this.mapFld),this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:e})},_onScroll:function(e){var s,n,l,o;e.scrollTop&&(s=e.scrollTop,(n=this).model.allowVirtualScrolling&&"continuous"==n.model.virtualScrollMode?(o=i.Query().skip(n._rawList.length).take(n.model.itemsCount).clone(),s>=t(n.popupList).find("ul,ol").height()-t(n.popupList).height()&&n._rawList.length<n._totalCount&&(n._addLoadingClass(),i.DataManager&&n.model.dataSource instanceof i.DataManager?(o=n._getQuery().skip(n._rawList.length).take(n.model.itemsCount).clone(),n._trigger("actionBegin",{requestFrom:"scroll"})||n.model.dataSource.executeQuery(o).done(function(e){n.addItem(e.result),n._removeLoadingClass(),n._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){n.model.dataSource=null,n._removeLoadingClass(),n._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){n._trigger("actionComplete",{e:e,requestFrom:"scroll"})})):(l=i.DataManager(n.model.dataSource).executeLocal(o),n.addItem(l),n._removeLoadingClass()))):n.model.allowVirtualScrolling&&"normal"==n.model.virtualScrollMode&&window.setTimeout(function(){0==n._virtualCount&&n._loadList()},300))},_loadList:function(){var s,n,l,o,r;this._virtualCount++;var a,d=this.scrollerObj.scrollTop(),h=this,c=0,u=null;if(this._currentPage=Math.round(d/(29*this.model.itemsCount)),-1!=t.inArray(this._currentPage,this._virtualPages.sort(function(e,t){return e-t})))if(0==this._currentPage){if(-1!=t.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else if(-1!=t.inArray(this._currentPage-1,this._virtualPages)){if(-1!=t.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else this._currentPage=this._currentPage-1;for(a=!(-1!=t.inArray(this._currentPage-1,this._virtualPages)),this._addLoadingClass(),s=this._virtualPages.length-1;s>=0;s--)if(this._virtualPages[s]<this._currentPage){c=this._virtualPages[s],s+1==this._virtualPages.length||(u=this._virtualPages[s+1]);break}if(n=a?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,l=i.Query().range(n,this._currentPage*this.model.itemsCount+this.model.itemsCount),i.DataManager&&h.model.dataSource instanceof i.DataManager){if(r=a?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,l=this._getQuery().skip(r),a){for(s=0;s<l.queries.length;s++)if("onTake"==l.queries[s].fn){l.queries.splice(s,1);break}l.take(2*this.model.itemsCount)}h._trigger("actionBegin",{requestFrom:"scroll"})||h.model.dataSource.executeQuery(l).done(function(e){h._appendVirtualList(e.result,c,h._currentPage,u,a),h._removeLoadingClass(),h._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){h._virtualCount--,h._removeLoadingClass(),h._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){h._trigger("actionComplete",{e:e,requestFrom:"scroll"})})}else o=i.DataManager(h.model.dataSource).executeLocal(l),this._appendVirtualList(o,c,this._currentPage,u,a),h._removeLoadingClass()},_appendVirtualList:function(e,i,s,n,l){var o,r,a,d,h,c;if(this._virtualCount--,-1!=t.inArray(s,this._virtualPages.sort(function(e,t){return e-t})))return!1;for(l&&-1!=t.inArray(s-1,this._virtualPages.sort())&&(e.splice(0,this.model.itemsCount),l=!1),o=this.model.itemsCount,r=t("<ul>"),0!=(a=l?(s-1)*o*29-29*(i*o+o):s*o*29-29*(i*o+o))&&r.append(t("<span>").addClass("e-virtual").css({display:"block",height:a})),this._mapFields(),this._generateLi(e,this.mapFld),t(this.dummyUl).attr("page",s),l&&t(this.dummyUl).slice(0,o).attr("page",s-1),this.model.showCheckbox&&this._appendCheckbox(this.dummyUl),r.append(this.dummyUl),d=29*(s*o+o),0!=(d=null!=n?n*o*29-d:this.ultag.height()-d)&&r.append(t("<span>").addClass("e-virtual").css({display:"block",height:d})),(h=this.ultag.find("li[page="+i+"]").last()).next().remove(),r.children().insertAfter(h),this._virtualPages.push(s),l&&this._virtualPages.push(s-1),c=0;c<e.length;c++)this._listItem(e[c],"add");this._virtualUl=this.ultag.clone(!0),this._renderBoxModel()},_generateLi:function(e,s){var n,l,o,r;if(this.mapFld=s,this.dummyUl=[],!e||!e.length||e.length<1)return!1;for(n=0;n<e.length;n++){var a=this._getField(e[n],this.mapFld._id),d=this._getField(e[n],this.mapFld._imageUrl),h=this._getField(e[n],this.mapFld._imageAttributes),c=this._getField(e[n],this.mapFld._spriteCSS),u=this._getField(e[n],this.mapFld._text),m=this._getField(e[n],this.mapFld._value),p=this._getField(e[n],this.mapFld._htmlAttributes),g=this._getField(e[n],this.mapFld._selected),f=document.createElement("li");!i.isNullOrUndefined(m)&&m.toString().length>0?f.setAttribute("data-value","object"==typeof m?JSON.stringify(m):m):f.setAttribute("data-value",u),i.isNullOrUndefined(a)||""===a||f.setAttribute("id",a),i.isNullOrUndefined(p)||""==p||this._setAttr(f,p),this.model.template?t(f).append(this._getTemplatedString(e[n])):(i.isNullOrUndefined(d)||""==d||(l=document.createElement("img"),this._setClass(l,"e-align")._setAttr(l,{src:d,alt:u}),h&&""!=h&&this._setAttr(l,h),f.appendChild(l)),i.isNullOrUndefined(c)||""==c||(o=document.createElement("div"),this._setClass(o,"div.e-align "+c+" sprite-image"),f.appendChild(o)),g&&this._setClass(f,"chkselect"),i.isNullOrUndefined(u)&&(u=String(u)),(r=document.createElement("span")).innerHTML=u,this._setClass(r,"e-ddltxt"),f.innerHTML+=r.outerHTML),this._setAttr(f,{role:"option",unselectable:"on"}),this.dummyUl.push(f)}},_setAttr:function(e,t){var i,s,n;if("string"==typeof t)2==(i=t.replace(/['"]/g,"").split("=")).length&&e.setAttribute(i[0],i[1]);else for(s in t)if("styles"!=s&&"style"!=s||"object"!=typeof t[s])e.setAttribute(s,t[s]);else for(n in t[s])e.style[n]=t[s][n];return this},_setClass:function(e,t){return e.className+=" "+t,this},_removeClass:function(e,t){var i=e.className.indexOf(t);return i>=0&&(e.className=0!=i&&" "===e.className[i-1]?e.className.replace(" "+t,""):e.className.replace(t,"")),this},_hasClass:function(e,t){return e.className.indexOf(t)>=0},_swapUnCategorized:function(e){t(e).each(function(t,i){if(!i.key){for(var s=t;s>0;s--)e[s]=e[s-1];return e[s]=i,!1}})},_getField:function(e,t){return i.pvt.getObject(t,e)},_getTemplatedString:function(e){for(var t,i,s=this.model.template,n=s.indexOf("${"),l=s.indexOf("}");-1!=n&&-1!=l;)i=(t=s.substring(n,l+1)).replace("${","").replace("}",""),n=(s=s.replace(t,this._getField(e,i))).indexOf("${"),l=s.indexOf("}");return s},_setWatermark:function(){if(""==this.element.val()&&""==this._trim(this._visibleInput.val())){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.css("display","block").text(e),"visualmode"==this.model.multiSelectMode&&this._ulBox&&0==this._ulBox.find("li").length&&this._swapUlandInput(!1)}},_checkboxHideShow:function(e){e?(this.listitems=this._getLi(),0==this.listitems.find("input[type=checkbox]").length&&this._appendCheckbox(this.listitems)):this._removeCheck(this.popupList),this.model.showCheckbox=e,this._virtualUl=this.ultag.clone(!0)},_setCheckAll:function(e){!this._isSingleSelect()&&e?this.checkAll():this.model.checkAll=!1},_setUncheckAll:function(e){!this._isSingleSelect()&&e?this.uncheckAll():this.model.uncheckAll=!1},checkAll:function(){var e,s,n=this._selectedIndices,l=!1;if(this._mapFields(),this.listitems=this._getLi(),this._isWatermark||this._hiddenSpan.css("display","none"),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?l=!0:this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0])&&!this._isChecked(s)?(this._setClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!0}),s.firstChild.checked=!0,l=!1):l=!0:(l=!1,t(this.listitems[e]).addClass("e-active")),l||(this.checkedStatus=!0,this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._selectedItemsID.push(this._itemID),this._createListHidden(this._hiddenValue),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._hiddenValue)),this._isPopupShown()&&this._setListPosition()),this._addText(this._currentText),-1==t.inArray(e,n)&&(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._trigger("change",args),this._activeItem=e,this.activeItem=this._getActiveItem(),this._cascadeAction());this._updateValue(this.element.val()),this._updateText(),this.model.itemValue=this._selectedValue,this.model.uncheckAll=!1,this.model.checkAll=!0,this._activeItem=-1,this._setWatermark()}},_createListHidden:function(e){var i=document.createElement("input");this._setAttr(i,{type:"hidden",name:this._name,value:e,id:"#"+e}),this.container.append(i),t(this.element).attr("name","hiddenEle")},_removeListHidden:function(e){var i=document.getElementById("#"+e);t(i).remove()},_getAttributeValue:function(e){return e?e.getAttribute("data-value")||e.getAttribute("value"):null},_selectCheckedItem:function(e){for(var t=0;t<e.length;t++)this._activeItem=e[t],this._enterTextBoxValue()},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){var e,s,n,l=!1;if(this.listitems=this._getLi(),this._mapFields(),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0])&&this._isChecked(s)?(this._removeClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!1}),s.firstChild.checked=!1,l=!0):l=!1:(t(this.listitems[e]).removeClass("e-active"),l=!0):l=!1,l&&(this.checkedStatus=!1,this._activeItem=e,this.activeItem=this._getActiveItem(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),n=this._selectedIndices,t.inArray(e,n)>-1&&(this._selectedIndices.splice(t.inArray(e,n),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._removeSelectedItemsID(),this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._trigger("change",args),this._cascadeAction(),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition()));this._updateValue(this.element.val()),this._updateText(),this.model.itemValue=this._selectedValue,this.model.checkAll=!1,this.model.uncheckAll=!0,this._setWatermark(),this._activeItem=-1}},_removeSelectedItemsID:function(){var e;e=this._selectedItemsID.indexOf(this._itemID),this._selectedItemsID.splice(e,1),this._itemID=""},_refreshScroller:function(){this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.popupList.find(".e-content, .e-vhandle").removeAttr("style"),this.popupList.find(".e-vhandle div").removeAttr("style"),this.popupList.children(".e-content").removeClass("e-content");var e=this._isPopupShown();this.popupListWrapper.css("display","block"),this.popupList.css({display:"block"}),this.scrollerObj.model.height=Math.ceil(this._getPopupHeight()),this.scrollerObj.refresh(),this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.scrollerObj.option("scrollTop",0),e||this.popupListWrapper.css("display","none")},_enablePopupResize:function(){this.model.enablePopupResize&&(this.popupListWrapper.addClass("e-resizable").append(i.buildTag("div.e-resizebar").append(i.buildTag("div.e-icon e-resize-handle"))).find(".e-resize-handle").addClass(this.model.enableRTL?"e-rtl-resize":""),this._resizePopup())},_resizePopup:function(){var e=this,i=!1;this.popupListWrapper.find("div.e-resize-handle").ejResizable({minHeight:e._validatePixelData(e.model.minPopupHeight),minWidth:e._validatePixelData(e.model.minPopupWidth),maxHeight:e._validatePixelData(e.model.maxPopupHeight),maxWidth:e._validatePixelData(e.model.maxPopupWidth),handle:"e-ddl-popup",resizeStart:function(t){if(!e.model.enabled)return!1;i||e._trigger("popupResizeStart",{event:t}),i=!0},resize:function(i){var s=t(i.element).parents("div.e-ddl-popup");e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),e._trigger("popupResize",{event:i})},resizeStop:function(t){i&&(e._refreshPopupOnResize(e.model.popupHeight,e.model.popupWidth),i&&e._trigger("popupResizeStop",{event:t}),i=!1)},helper:function(i){var s=t(i.element).parents("div.e-ddl-popup");return e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),t(e.popupListWrapper)}})},_refreshPopupOnResize:function(e,t){e&&(this.model.popupHeight=e),t&&(this.model.popupWidth=t),this.popupListWrapper.css({height:this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight)}),this._setListWidth(),this._refreshScroller()},_setListWidth:function(){var e=this.model.popupWidth;"auto"!=e?this.popupListWrapper.css({width:e}):this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}),this.popupListWrapper.css({"max-width":this._validatePixelData(this.model.maxPopupWidth)})},_setListHeight:function(){this.model.enablePopupResize&&this.model.enableFilterSearch&&this.model.minPopupHeight&&this.model.minPopupHeight.toString().indexOf("%")<0&&20==this._validatePixelData(this.model.minPopupHeight)&&(this.model.minPopupHeight="65"),this.model.enablePopupResize?this.popupListWrapper.css({"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight),height:this._validatePixelData(this.model.popupHeight)}):this.popupListWrapper.css({"max-height":this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight)})},_validatePixelData:function(e){return e&&!isNaN(e)?Number(e):e},_getPopupHeight:function(){var e,t=this.popupListWrapper.height();return this.model.enablePopupResize&&(t-=this.popupListWrapper.find(">div.e-resizebar").height()),this.model.headerTemplate&&this.headerTemplate&&(t-=this.headerTemplate.height()),this.model.enableFilterSearch&&this.inputSearch&&(e=this.inputSearch.parent(".e-in-wrap"),t-=parseInt(e.css("height"))+parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"))),t},_refreshPopup:function(){"auto"!=this.model.popupWidth||this._validatePixelData(this.model.minPopupWidth)?this._validatePixelData(this.model.minPopupWidth)&&this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}):this.popupListWrapper.css({"min-width":this.wrapper.width()}),this._refreshScroller(),this._setListPosition()},_setListPosition:function(){var e,i=this.wrapper,s=this._getOffset(i),n=t(document).scrollTop()+t(window).height()-(s.top+t(i).outerHeight()),l=s.top-t(document).scrollTop(),o=this.popupListWrapper.outerHeight(),r=this.popupListWrapper.outerWidth(),a=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<n||o>l?s.top+d+3:s.top-o-3)-h;e=t(document).scrollLeft()+t(window).width()-a,(this.model.enableRTL||r>e&&r<a+i.outerWidth())&&(a-=this.popupListWrapper.outerWidth()-i.outerWidth()),this.popupListWrapper.css({left:a+"px",top:u+"px","z-index":c})},_getOffset:function(e){return i.util.getOffset(e)},_getZindexPartial:function(){return i.util.getZindexPartial(this.element,this.popupListWrapper)},_showResult:function(){var e=this,s={text:this._visibleInput[0].value,value:this._selectedValue,refreshPopup:!0};this._trigger("beforePopupShown",s)||(s.refreshPopup&&this._refreshPopup(),t(this.popupListWrapper).slideDown(this.model.enableAnimation?200:1,function(){t(document).on("mousedown",t.proxy(e._OnDocumentClick,e)),e._on(i.getScrollableParents(e.wrapper),"scroll",e._hideResult)}),this.element[0].setAttribute("aria-expanded",!0),this._listSize=this._getLi().length,this._trigger("popupShown",{text:this._visibleInput[0].value,value:this._selectedValue}),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")}))},_OnWindowResize:function(){!i.isNullOrUndefined(this.model)&&this._isPopupShown()&&this._refreshPopup()},_hideResult:function(e){if(this.model&&this._isPopupShown()){if(!i.isNullOrUndefined(e)&&!i.isNullOrUndefined(this.inputSearch)&&t(this.inputSearch).is(":focus")&&"scroll"==e.type&&i.isTouchDevice())return!1;var s=this;if(this._trigger("beforePopupHide",{text:this._visibleInput[0].value,value:this._selectedValue}))return;t(this.popupListWrapper).slideUp(this.model.enableAnimation?100:0,function(){t(document).off("mousedown",t.proxy(s._OnDocumentClick,s))}),null!=this.element&&this.element.attr("aria-expanded",!1),this._off(i.getScrollableParents(this.wrapper),"scroll",this._hideResult),null!=this._visibleInput&&this._trigger("popupHide",{text:this._visibleInput[0].value,value:this._selectedValue}),setTimeout(function(){s._resetSearch()},100)}},_isPopupShown:function(){return"block"==this.popupListWrapper.css("display")},_enterTextBoxValue:function(){var e,i,s=!0;this.removeID=!1,this.checkedStatus=!1,this._isWatermark||this._hiddenSpan.css("display","none"),this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||!this._trigger("select",e)?((this._activeItem>=0||null!=this._activeItem)&&(this._isSingleSelect()||this._checkContains(this._selectedValue)?this._isSingleSelect()?(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.activeItem.addClass("e-active"),this._maintainHiddenValue(),this._visibleInput.val(this._currentText),this.element.val(this._hiddenValue),this.selectedItemIndex(this.selectedIndexValue),this.selectedIndex(this.selectedIndexValue),this._selectedIndices[0]=this.selectedIndexValue):s=!1:(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)||(this._setClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!0}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.addClass("e-active"),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._selectedValue)),this._isPopupShown()&&this._setListPosition()),this._maintainHiddenValue(),this._addText(this._currentText),this._createListHidden(this._hiddenValue),-1==t.inArray(this.selectedIndexValue,this._selectedIndices)&&(this._selectedIndices.push(this.selectedIndexValue),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices)),s&&(this.checkedStatus=!0,this._onValueChange(),this._cascadeAction(),this.selectelement&&t("#"+this._id).children().length>this.selectedIndexValue&&(t("#"+this._id).children()[this.selectedIndexValue].selected=!0))),this.model.uncheckAll=!1,this._setWatermark()):this._setWatermark()},_onValueChange:function(){this.model.itemValue=this._selectedValue,this._updateText(),this.value()==this.element.val()||null==this.value()&&""==this.element.val()||(this._updateSelectedIndexByValue(this._visibleInput.val()),this._updateValue(this.element.val()),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:this.selectedIndexValue,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||(this._trigger("change",args),this.model.showCheckbox&&this._trigger("checkChange",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this._selectedValue,data:this.model})),this._uiInteract=!1)},_decode:function(e){return t("<span>").html(e).text()},_chooseSelectionType:function(){this.activeItem=this._getActiveItem(),this.selectedIndexValue=this._activeItem,this._mapFields(),null==this.model.dataSource||this._isPlainType(this.model.dataSource)?(this._currentText=this.activeItem.text(),this._getAttributeValue(this.activeItem[0])?this._selectedValue=this._getAttributeValue(this.activeItem[0]):null!=this._currentText?(this.activeItem[0].setAttribute("value",this._currentText),this._selectedValue=this._currentText):this._selectedValue="",this._itemID=t(this.activeItem).attr("id")):(this._currentText=this._decode(this._getField(this.popupListItems[this._activeItem],this.mapFld._text)),this._currentText=""===this._currentText||null==this._currentText?this.activeItem.text():this._currentText,this._selectedValue=this._getField(this.popupListItems[this._activeItem],this.mapFld._value),this._selectedValue=null!=this._selectedValue?this._selectedValue:this._currentText,this._itemID=this._getField(this.popupListItems[this._activeItem],this.mapFld._id)),i.isNullOrUndefined(this._itemID)||""==this._itemID||(this.model.showCheckbox?this.removeID?this._removeSelectedItemsID():this._selectedItemsID.push(this._itemID):(this._selectedItemsID=[],this.removeID||this._selectedItemsID.push(this._itemID))),this.selectedTextValue=this._currentText},_maintainHiddenValue:function(){this._hiddenValue=this._getAttributeValue(this.activeItem[0])||this._currentText},_removeTextBoxValue:function(){var e,i;this._uiInteract=!0,this.removeID=!0,this.checkedStatus=!0,this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._onSearch||!this._raiseEvents||!this._trigger("select",e)?(this._maintainHiddenValue(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),this.activeItem.removeClass("e-active"),this._isSingleSelect()||(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)&&(this._removeClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!1}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.removeClass("e-active"),t.inArray(this.selectedIndexValue,this._selectedIndices)>-1&&(this._selectedIndices.splice(t.inArray(this.selectedIndexValue,this._selectedIndices),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition())),this.checkedStatus=!1,this._onValueChange(),null==this.model.cascadeTo||this._isSingleSelect()||this._cascadeAction(),this.model.checkAll=!1,this._setWatermark()):this._setWatermark()},_createBox:function(e,s){if(!this._checkContains(s)){"none"==this._ulBox.css("display")&&"none"!=this._visibleInput.css("display")&&this._swapUlandInput(!0);var n=i.buildTag("span.e-icon e-close","",{},{unselectable:"on"}),l=i.buildTag("li.e-options").text(e).attr("data-value",s).append(n);return this._on(n,"click",function(e){if(!this.model.enabled)return!1;this._deleteBox(t(e.target).parent())}),l}},_deleteBoxCheck:function(e){for(var i=this._ulBox.children("li"),s=0;s<i.length;s++)t(i[s]).attr("data-value")==e&&t(i[s]).remove()},_deleteLastBox:function(){var e=this._ulBox.children("li:not(.e-search-box)").last();e.hasClass("e-active")?this._deleteBox(e):(this._removeActive(),e.addClass("e-active"))},_deleteBox:function(e){for(var i,s,n,l=0;l<e.length;l++)for(i=t(e[l]).attr("data-value"),s=this._getLi(),n=0;n<s.length;n++)if(t(s[n]).attr("data-value")==i){this._activeItem=n,this._removeTextBoxValue();break}this._isFocused||this._isPopupShown()||this._setWatermark()},_swapUlandInput:function(e){e?(this._visibleInput.css("display","none"),this._ulBox.css("display","block"),this.wrapper.css({height:"auto"})):(this._visibleInput.css("display","block"),this._ulBox.css("display","none"),this.wrapper.css({height:this.model.height}))},_removeActive:function(){this._ulBox.children("li").removeClass("e-active")},_adjustWidth:function(){var e=i.buildTag("span",this._visibleInput.val());this.container.append(e),this._visibleInput.width(e.width()+30),e.remove()},_destroyBoxModel:function(){this._visibleInput.css("display","block"),this.wrapper.height(this.model.height),this._ulBox.remove(),this._ulBox=null,this._off(this.container,"click")},_removeListHover:function(){this.ultag.children("li").removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("hover")}),e.focus()},_getLi:function(){return this.ultag.children("li:not('.e-category'):not('.e-nosuggestion')")},_calcScrollTop:function(e){this.ultag.outerHeight();var i,s,n,l,o=this.ultag.find("li"),r=0;for(this._selectedIndices&&this._selectedIndices.length>0&&"active"==e?(l=this._getLi(),i=this._selectedIndices.length==l.length?0:this._selectedIndices[this._selectedIndices.length-1],(null!=this.model.fields.groupBy||this.ultag.find("li.e-category").length>0)&&(i=t.inArray(l.eq(i)[0],o))):i=this.ultag.find("li.e-"+e).index(),n=0;n<i;n++)r+=o.eq(n).outerHeight(!0);return(s=r-(this.popupList.outerHeight()-o.eq(i).outerHeight(!0))/2)<0?0:s},_getActiveItem:function(){return this._getLi().eq(this._activeItem)},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_roundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupListWrapper.addClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupListWrapper.removeClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").removeClass("e-corner"))},_enabled:function(e){e?this.enable():this.disable()},_destroyDropdown:function(){this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton.outerWidth()),this.wrapper.remove(),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this))},_RightToLeft:function(){this.model.enableRTL?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_dropbtnRTL:function(){this.model.enableRTL?(this.popupListWrapper.addClass("e-rtl").find(".e-resize-handle").addClass("e-rtl-resize"),this.popupList.addClass("e-rtl")):(this.popupListWrapper.removeClass("e-rtl").find(".e-resize-handle").removeClass("e-rtl-resize"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(e){if(this._preventDefaultAction(e),t(e.target).is("li")&&t(e.target).parent().hasClass("e-boxes")||t(e.target).parents("ul").hasClass("e-boxes")&&t(e.target).hasClass("e-icon e-close")||this.model.readOnly||this._readOnly)return!1;this.ultag.find("li").length>0&&(e.which&&1==e.which||e.button&&0==e.button)&&this._OnPopupHideShow()},_OnPopupHideShow:function(){this._isPopupShown()?this._hideResult():(this._showResult(),this.wrapper.focus())},_showFullList:function(){var e=this.model.dataSource;i.DataManager&&e instanceof i.DataManager?e.dataSource.offline||e.dataSource.json&&e.dataSource.json.length>0?this._getFilteredList(e.dataSource.json):this._initDataSource(e):this._getFilteredList(e)},_getFilteredList:function(e){if(!e||!e.length||e.length<1)this._targetElementBinding(),this._renderRemaining();else{var t=i.DataManager(e).executeLocal(this._isPlainType(e)?i.Query():this._getQuery(!0));this._totalCount=t.count,this._listItem(t.result?t.result:t),this._renderPopupList(),this._rawList=this.popupListItems}},_cascadeAction:function(){if(this.model.cascadeTo)for(var e=this.model.cascadeTo.split(","),s=0;s<e.length;s++)t("#"+e[s]).hasClass("e-dropdownlist")?this._doCascadeAction(e[s],this,this.checkedStatus):t("#"+e[s]).on("ejDropDownListcreate",{Obj:this,status:this.checkedStatus},function(e){i.isNullOrUndefined(e.data.Obj.getValue())||""==e.data.Obj.getValue()||e.data.Obj._doCascadeAction(this.id,e.data.Obj,e.data.status)})},_doCascadeAction:function(e,s,n){s._currentValue=s._getField(s.popupListItems[s._activeItem],s.mapFld._value),s.selectDropObj=t("#"+e).ejDropDownList("instance");var l={cascadeModel:s.selectDropObj.model,cascadeValue:s._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",l),s.selectDropObj._setCascadeModel=l.setCascadeModel,i.isNullOrUndefined(s[e])&&(s[e]=s.selectDropObj.model.dataSource),i.DataManager&&s[e]instanceof i.DataManager?s._cascadeOdataInit(s[e],l.requiresDefaultFilter,n,l.cascadeQuery):s._cascadeJsonInit(s.selectDropObj,s[e],s.mapFld._value,l.requiresDefaultFilter,n,l.cascadeQuery)},_cascadeOdataInit:function(e,t,i,s){var n,l=this;l._dQuery=this.selectDropObj._getQuery().clone(),n=l._dQuery.clone(),t?n.where(l.mapFld._value,"equal",l._currentValue):n=s,l.selectDropObj._addLoadingClass(),l._trigger("actionBegin",{requestFrom:"cascade"})||e.executeQuery(n).fail(function(e){l._changedSource=null,l.selectDropObj.setModel({dataSource:l._changedSource,enabled:!1}),l._trigger("actionFailure",{e:e,requestFrom:"cascade"})}).done(function(e){l._trigger("actionSuccess",{e:e,requestFrom:"cascade"}),l._cascadeDataBind(l.selectDropObj,e.result,i),l.selectDropObj._removeLoadingClass()}).always(function(e){l._trigger("actionComplete",{e:e,requestFrom:"cascade"})})},_cascadeJsonInit:function(e,t,s,n,l,o){var r=n?i.Query().where(s,"==",this._currentValue):o,a=i.DataManager(t).executeLocal(r);this._cascadeDataBind(e,a,l)},_cascadeDataBind:function(e,s,n){var l,o,r,a,d,h=e.value();if(this.model.showCheckbox&&n||"none"!=this.model.multiSelectMode&&this.activeItem.hasClass("e-active"))this._changedSource=i.isNullOrUndefined(this._changedSource)?s:this._changedSource.concat(s);else if(this.model.showCheckbox||"none"!=this.model.multiSelectMode){for(l=0;l<s.length;l++)if(this._isPlainType(s)&&this._isPlainType(this._changedSource))this._changedSource.splice(this._changedSource.indexOf(s[l]),1);else for(o=0;o<this._changedSource.length;o++)JSON.stringify(this._changedSource[o])==JSON.stringify(s[l])&&this._changedSource.splice(o,1);e.setModel({dataSource:null})}else this._changedSource=s;if(r=JSON.parse(JSON.stringify(e.model)),e.setModel({dataSource:this._changedSource,enabled:this._changedSource.length>0}),this._isSingleSelect()||e.selectItemByValue(h),(e.model.showCheckbox||"none"!=e.model.multiSelectMode)&&(t("input:hidden[id^='#'][name="+e._id+"]").remove(),e._visibleInput.attr("name",e._name)),e._setSelectedItem)e.setModel(e._setCascadeModel);else{for(a=["value","text","selectedIndex","selectedIndices"],d=0;d<a.length;d++)e.model[a[d]]=r[a[d]];e._finalize()}e._setSelectedItem=!0},_OnMouseEnter:function(e){var i,s;if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover"),t(e.target).is("li:not('.e-category')")&&t(e.target).addClass("e-hover"),t(e.target).hasClass("e-disable")?t(e.target).removeClass("e-hover"):"li"!=e.target.tagName&&(i=t(e.target).parents("li:not('.e-category')"),t(i).addClass("e-hover")),this.ultag.children("li:not('.e-category')").each(function(e){if(t(this).hasClass("e-hover"))return s=e,!1}),this._activeItem=s},_OnMouseLeave:function(){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover")},_OnMouseClick:function(e){var i,s,n;if(this._uiInteract=!0,!this.model.enabled||this.model.readOnly||this._readOnly||this.model.enableFilterSearch&&t(e.target).is("li")&&t(e.target).hasClass("e-nosuggestion"))return!1;(!t(e.target).is("li")||t(e.target).hasClass("e-disable"))&&(t(e.target).is("li")||t(e.target).closest("li").hasClass("e-disable"))||(this._isSingleSelect()?(this._enterTextBoxValue(),this._hideResult()):this.model.showCheckbox?(i="LI"===e.target.nodeName?e.target:t(e.target).parents("li.e-hover"),s=t(i).find(".e-checkwrap")[0],this._onCheckChange({target:s})):(n=t(e.target).is("li")?e.target:t(e.target).closest("li")[0],this._activeItem=t.inArray(n,this._getLi()),t(n).hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue()))},_OnDocumentClick:function(e){if(this.model&&(!this.model.enabled||this.model.readOnly||this._readOnly))return!1;t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper)||t(e.target).is(this._visibleInput)||t(e.target).parents(".e-ddl").is(this.wrapper)?t(e.target).is(this.inputSearch)?this.inputSearch.focus():(t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper))&&this._preventDefaultAction(e):this._hideResult()},_OnKeyPress:function(e){this.model.enableIncrementalSearch&&13!=e.keyCode&&this._OnTextEnter("mozilla"==i.browserInfo().name?e.charCode:e.keyCode),32==e.keyCode&&this._preventDefaultAction(e)},_OnTextEnter:function(e){var i=this;this._incqueryString+=String.fromCharCode(e),this._incqueryString.length>0&&setTimeout(function(){i._incqueryString=""},1e3);var s,n,l=this._getLi(),o=this.model.caseSensitiveSearch,r=this._incqueryString,a=this._incqueryString.length,d=!1;for(o||(r=r.toLowerCase()),s=0;s<l.length&&(n=t(l[s]).text(),(n=o?n:n.toLowerCase()).substr(0,a)==r&&(this._activeItem=s,this._isSingleSelect()?(this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")})):this._isPopupShown()&&(this._removeListHover(),this._addListHover()),d=!0),!d);s++);},_selectItem:function(e){this._isSingle||this._clearTextboxValue(),this._activeItem=e,this._addListHover(),this._enterTextBoxValue()},_focusItem:function(e){this._removeListHover(),this._activeItem=e,this._addListHover()},_selectFocusedItem:function(e){this._focusItem(e),this._enterTextBoxValue()},_selectShiftDown:function(e,i,s){s||this._clearTextboxValue();for(var n=e;n<=i;n++)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&this._selectFocusedItem(n)},_selectShiftUp:function(e,i,s){s||this._clearTextboxValue();for(var n=i;n>=e;n--)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&this._selectFocusedItem(n)},_selectShiftHome:function(e,i,s){if(s||this._clearTextboxValue(),e>=0&&e<=this._listSize-1){if(0==e)this._clearTextboxValue();else for(var n=e;n>=i;n--)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&(this._activeItem=n,this._enterTextBoxValue());this._activeItem=e,0==e&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:0})}},_selectShiftEnd:function(e,i,s){if(s||this._clearTextboxValue(),e<=this._listSize-1){if(e==i)this._clearTextboxValue();else for(var n=e;n<=i;n++)t.inArray(n,this._disabledItems)<0&&t.inArray(n,this.model.selectedIndices)<0&&(this._activeItem=n,this._enterTextBoxValue());this._activeItem=e,e==i&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this.ultag.outerHeight()})}},_getLastFocusedLi:function(){return this._selectedIndices&&this._selectedIndices.length>0?this._selectedIndices[this._selectedIndices.length-1]:null},_getLastShiftFocusedLi:function(e,i){var s=i?e-1:e+1;return t.inArray(s,this._selectedIndices)<0?e:this._getLastShiftFocusedLi(s,i)},_shiftUp:function(e,t,i){var s,n,l;if(null==e||e<0)this._checkDisableStep(0,t,!1,!1,!0);else if(e>0&&e<=this._listSize-1&&null!=(s=this._disableItemSelectUp(e-t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e-1==this._selectedIndices[this._selectedIndices.length-2])for(n=1;n<=t&&e-n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e+1-n,this._removeTextBoxValue(),this._focusItem(e-n);else l=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!1),this._selectShiftUp(s,l,i);else this._moveUp(e,t,!1)},_shiftDown:function(e,t,i){var s,n,l;if(null==e||e<0)this._checkDisableStep(-1,t,!0,!1,!0);else if(e<this._listSize-1&&null!=(s=this._disableItemSelectDown(e+t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e+1==this._selectedIndices[this._selectedIndices.length-2])for(n=1;n<=t&&e+n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e-1+n,this._removeTextBoxValue(),this._focusItem(e+n);else l=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!0),this._selectShiftDown(l,s,i);else this._moveDown(e,t,!1)},_moveUp:function(e,t,i){null==e||e<=0?this._checkDisableStep(0,t,!1,i):e>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1,i):e>0&&e<=this._listSize-1&&this._checkDisableStep(e,t,!1,i)},_moveDown:function(e,t,i){null==e||e<0?this._checkDisableStep(-1,t,!0,i):0==e?this._checkDisableStep(0,t,!0,i):e>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0,i):e<this._listSize-1&&this._checkDisableStep(e,t,!0,i)},_checkDisableStep:function(e,t,i,s,n){var l,o=i?"_disableItemSelectDown":"_disableItemSelectUp",r=i?e+t:e-t,a=this[o](r);if(null==a)for(l=t;l>=0&&(r=i?e+l:e-l,null==(a=this[o](r)));l--);null!=a&&(s?this._focusItem(a):this._selectItem(a),n&&s&&this._enterTextBoxValue())},_disableItemSelectDown:function(e){return(null==e||e<0)&&(e=0),e<this._listSize?t.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize-1},_disableItemSelectUp:function(e){if((null==e||e<0)&&(e=0),e<this._listSize){if(t.inArray(e,this._disabledItems)<0)return e;if(e>0)return this._disableItemSelectUp(e-1)}},_preventDefaultAction:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},_OnKeyDown:function(e){var t,i,s,n,l;if(this._uiInteract=!0,this.model.enabled)if(this._itemId=null,t=this._getLi(),this._listSize=t.length,s=this.popupList.height(),i=this.ultag.children("li").outerHeight(),n=0!=Math.round(s/i)?Math.round(s/i):5,this._isSingle=this._isSingleSelect(),this._isSingle)switch(e.keyCode){case 38:if(e.altKey){this.ultag.find("li").length>0&&this._hideResult();break}case 33:l=33==e.keyCode?n:1,this._moveUp(this._activeItem,l),this._preventDefaultAction(e,!0);break;case 8:this._preventDefaultAction(e);break;case 40:if(e.altKey){this.ultag.find("li").length>0&&this._showResult();break}case 34:l=34==e.keyCode?n:1,this._moveDown(this._activeItem,l),this._preventDefaultAction(e,!0);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1):this._moveUp(this._activeItem,1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1):this._moveDown(this._activeItem,1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:this._moveDown(this._listSize-1,0),this._preventDefaultAction(e);break;case 36:l=null!=this._activeItem?this._activeItem:this._listSize-1,this._moveUp(l,l),this._preventDefaultAction(e)}else switch(e.keyCode){case 38:e.altKey?this.ultag.find("li").length>0&&this._hideResult():e.shiftKey?this._shiftUp(this._activeItem,1,e.ctrlKey):this._moveUp(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 33:e.shiftKey?this._shiftUp(this._activeItem,n,e.ctrlKey):this._moveUp(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e);break;case 8:this._preventDefaultAction(e);break;case 40:e.altKey?this.ultag.find("li").length>0&&this._showResult():e.shiftKey?this._shiftDown(this._activeItem,1,e.ctrlKey):this._moveDown(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 34:e.shiftKey?this._shiftDown(this._activeItem,n,e.ctrlKey):this._moveDown(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1,!1):this._moveUp(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1,!1):this._moveDown(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:e.shiftKey?this._selectShiftEnd(this._activeItem,this._listSize-1,e.ctrlKey):this._moveDown(this._activeItem,this._listSize,e.ctrlKey),this._preventDefaultAction(e);break;case 36:l=null!=this._activeItem?this._activeItem:this._listSize-1,e.shiftKey?this._selectShiftHome(this._activeItem,0,e.ctrlKey):this._moveUp(this._activeItem,l,e.ctrlKey),this._preventDefaultAction(e)}},_OnKeyUp:function(e){if(this.model.enabled){if(this._preventDefaultAction(e),e.target,null==this._activeItem&&(this._activeItem=this._getLi().index(this.popupList.find("ol,ul").children("li.e-hover"))),""==this._trim(this._visibleInput.val())&&38==e.keyCode&&40==e.keyCode)return this._hideResult(),!1;switch(e.keyCode){case 13:!this._isSingle&&this._isPopupShown()&&(e.ctrlKey||e.shiftKey)&&this._activeItem>=0?this._selectAndUnselect():this._isPopupShown()&&this._hideResult(),this._preventDefaultAction(e);break;case 32:this._isPopupShown()&&this._isSingle&&this._hideResult(),!this._isSingle&&this._isPopupShown()&&this._activeItem>=0&&this._selectAndUnselect(),this._preventDefaultAction(e);break;case 8:"visualmode"==this.model.multiSelectMode&&this._deleteLastBox(),this._preventDefaultAction(e);break;case 46:if("visualmode"==this.model.multiSelectMode||this.model.showCheckbox){this._deleteBox(this._ulBox.children("li.e-active"));break}}}},_isSingleSelect:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode},_selectAndUnselect:function(){this.model.showCheckbox?this._isChecked(this._getActiveItem().find(".e-checkwrap")[0])?this._removeTextBoxValue():this._enterTextBoxValue():"none"!=this.model.MultiSelectMode&&(this._getActiveItem().hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue())},_targetFocus:function(){this.model.enabled&&!this._isFocused&&(this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._isFocused=!0,this._trigger("focusIn"))},_targetBlur:function(){this.model.enabled&&(this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._setWatermark(),this._trigger("focusOut"))},_getLocalizedLabels:function(e){return void 0===this._localizedLabels[e]?i.DropDownList.Locale["en-US"][e]:this._localizedLabels[e]},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"keydown",this._OnKeyDown),this._on(this.popupList,"keydown",this._OnKeyDown),this._on(this.popupList,"keyup",this._OnKeyUp),this._on(this.wrapper,"keyup",this._OnKeyUp),this._on(this.popupList,"keypress",this._OnKeyPress),this._on(this.wrapper,"keypress",this._OnKeyPress)},_unwireEvents:function(){this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"keydown",this._OnKeyDown),this._off(this.popupList,"keydown",this._OnKeyDown),this._off(this.popupList,"keyup",this._OnKeyUp),this._off(this.wrapper,"keyup",this._OnKeyUp),this._off(this.popupList,"keypress",this._OnKeyPress),this._off(this.wrapper,"keypress",this._OnKeyPress),t(window).off("resize",t.proxy(this._OnWindowResize,this))},_multiItemSelection:function(e,t){var i,s;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++)s=t?this._rawList.length-(e.length-i):i,this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"));this._setWatermark()},_appendCheckbox:function(e,t){var i;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i,n=document.createElement("input"),l=document.createElement("span");this._setAttr(n,{type:"checkbox",name:"list"+s,"data-role":"none",id:this._id+"_check"+s})._setClass(n,"e-check-input")._setAttr(l,{name:"list"+s+"_wrap","data-role":"none",id:this._id+"_check"+s+"wrap",unselectable:"on"})._setClass(l,"e-checkwrap e-icon "),l.appendChild(n),e[i].insertBefore(l,e[i].childNodes[0]),this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_onCheckChange:function(e){var i="INPUT"===e.target.nodeName?e.target.parentElement:e.target;this._activeItem=t.inArray(t(i).parents("li")[0],this._getLi()),this._hasClass(i,"e-check-act")?this._removeTextBoxValue():this._enterTextBoxValue()},_isChecked:function(e){return this._hasClass(e,"e-check-act")&&1==t(e).children(".e-check-input")[0].checked},_removeCheck:function(){this._getLi().find(".e-checkwrap").remove()},_resetCheck:function(){var e,t,i=this._getLi();for(i.find(".e-check-act").removeClass("e-check-act").attr("aria-checked",!1),e=i.find(".e-check-input:checked"),t=0;t<e.length;t++)e[t].checked=!1}}),i.DropDownList.Locale=i.DropDownList.Locale||{},i.DropDownList.Locale.default=i.DropDownList.Locale["en-US"]={emptyResultText:"No suggestions",watermarkText:""},i.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},i.VirtualScrollMode={Normal:"normal",Continuous:"continuous"}}),
/*!
*  filename: ej.autocomplete.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min"],e):e()}(function(){!function(e,t,i){t.widget("ejAutocomplete","ej.Autocomplete",{element:null,model:null,validTags:["input"],_ignoreOnPersist:["fields","dataSource","query","focusIn","focusOut","change","select","create","destroy","open","close","actionComplete","actionSuccess","actionFailure"],_setFirst:!1,_rootCSS:"e-autocomplete",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{dataSource:null,query:null,fields:{text:null,key:null,category:null,groupBy:null,htmlAttributes:null},locale:"en-US",template:null,allowGrouping:!1,enableDistinct:!1,allowSorting:!0,sortOrder:"ascending",htmlAttributes:{},multiSelectMode:"none",delimiterChar:",",allowAddNew:!1,addNewText:"Add New",showRoundedCorner:!1,readOnly:!1,cssClass:"",watermarkText:null,value:"",selectValueByKey:null,filterType:"startswith",caseSensitiveSearch:!1,showLoadingIcon:!0,showResetIcon:!1,itemsCount:0,minCharacter:1,delaySuggestionTimeout:200,showPopupButton:!1,highlightSearch:!1,enableAutoFill:!1,enableRTL:!1,enabled:!0,visible:!0,height:"",width:"",emptyResultText:"No suggestions",animateType:"slide",showEmptyResultText:!0,enablePersistence:!1,popupHeight:"152px",popupWidth:"auto",autoFocus:!1,multiColumnSettings:{enable:!1,showHeader:!0,stringFormat:"{0}",columns:[{field:null,headerText:null,textAlign:"left",headerTextAlign:"left",cssClass:"",type:"string",filterType:"startswith"}]},validationRules:null,validationMessage:null,focusIn:null,focusOut:null,change:null,select:null,create:null,open:null,close:null,destroy:null,actionBegin:null,actionComplete:null,actionSuccess:null,actionFailure:null},dataTypes:{autoFocus:"boolean",watermarkText:"string",locale:"string",cssClass:"string",filterType:"enum",caseSensitiveSearch:"boolean",showLoadingIcon:"boolean",template:"string",allowGrouping:"boolean",enableDistinct:"boolean",allowSorting:"boolean",sortOrder:"enum",allowAddNew:"boolean",addNewText:"string",showRoundedCorner:"boolean",showResetIcon:"boolean",readOnly:"boolean",itemsCount:"number",animateType:"enum",minCharacter:"number",showPopupButton:"boolean",highlightSearch:"boolean",enableAutoFill:"boolean",enableRTL:"boolean",multiSelectMode:"enum",delimiterChar:"string",emptyResultText:"string",showEmptyResultText:"boolean",enabled:"boolean",visible:"boolean",enablePersistence:"boolean",dataSource:"data",query:"data",fields:"data",validationRules:"data",validationMessage:"data",htmlAttributes:"data",multiColumnSettings:"data"},observables:["value","selectValueByKey"],value:t.util.valueFunction("value"),_selectValueByKey:t.util.valueFunction("selectValueByKey"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.target.disabled=!1,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.removeAttr("disabled"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-disable").attr({"aria-disabled":!1}),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable").attr({"aria-disabled":!1}))},disable:function(){this.model.enabled&&(this._hideResult(),this.model.enabled=!1,this.target.disabled=!0,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.model.showPopupButton&&this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),"visualmode"==this.model.multiSelectMode&&this._ulBox&&this._ulBox.addClass("e-disable").attr({"aria-disabled":!0}))},clearText:function(){"visualmode"==this.model.multiSelectMode&&this._deleteBox(this._ulBox.children("li")),this.element.val(""),this._valueChange(),this._isFocused?this.element.blur():this._focusOutAction(),this._hideResult()},getValue:function(){var e=this.value();return null==e?"":e},getSelectedItems:function(){return this._isFocused&&"visualmode"!=this.model.multiSelectMode&&this._updateSelectedItemArray(this.getValue()),this._selectedItems},_setValue:function(i){var s,n,l;if(this._isWatermark||this._hiddenSpan.css("display","none"),("object"==typeof i||"number"==typeof i&&isNaN(i)||""==e.trim(i))&&(i=""),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(""),this.element.val(""),i)if("visualmode"==this.model.multiSelectMode)if(this._selectedItems=[],this._modelValue=i,this._deleteBox(this._ulBox.children("li")),s=i.split(this.model.delimiterChar),this.element.width(1).val("").removeAttr("placeholder"),this._hiddenInput||(this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),t.DataManager&&this.model.dataSource instanceof t.DataManager)this._createBoxForObjectType(s);else if(this.suggestionListItems=this.model.dataSource,this.suggestionListItems&&"object"!=typeof this.suggestionListItems[0])for(this._hiddenInput.val(i),n=0,l=s.length;n<l;n++)s[n]&&(this._ulBox.append(this._createBox(s[n])),this._selectedItems.push(s[n]));else this._createBoxForObjectType(s);else this.element.val(i),this._updateSelectedItemArray(i);return"visualmode"!=this.model.multiSelectMode&&this.value(this.element.val()),this._preVal=this.element.val(),this._isWatermark||this._setWatermarkTxt(),i},_createBoxForObjectType:function(i){for(var s,n=this,l=this._declareVariable(),o=0,r=i.length;o<r;o++)""!=(s=e.trim(i[o]))&&(t.DataManager&&this.model.dataSource instanceof t.DataManager?(this._dataQuery=this._getQuery().where(l[0],"equal",s,!1),this._promise=this.model.dataSource.executeQuery(this._dataQuery),this._promise.done(function(e){var i=e.result;n._strData=i instanceof Array&&i.length?i[0]:s,t.isNullOrUndefined(n._strData[l[1]])||n._selectKeyInit(),n._selectedItems.push(n._strData)}).fail(function(){n._selectedItems.push(s)})):(this._dataQuery=t.Query().where(l[0],"equal",s,!1),this._promise=t.DataManager(this.suggestionListItems).executeLocal(this._dataQuery),this._strData=this._promise instanceof Array&&this._promise.length?this._promise[0]:s,t.isNullOrUndefined(this._strData[l[1]])||this._selectKeyInit(),this._selectedItems.push(this._strData)),"visualmode"==this.model.multiSelectMode&&this._ulBox.append(this._createBox(s)))},_selectKeyInit:function(){var e,i=this._declareVariable();delimiterChar=this._delimiterChar(),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(this._hiddenInput.val()+(t.isNullOrUndefined(this._strData[i[1]]||this._strData[i[0]])?"":(this._strData[i[1]]||this._strData[i[0]])+this.model.delimiterChar)),t.isNullOrUndefined(this._strData[i[1]])||("none"!=this.model.multiSelectMode?(e=(e=null!=this._selectValueByKey()?this._selectValueByKey()+this._strData[i[1]]+delimiterChar:this._strData[i[1]]+delimiterChar).split(delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),this._selectValueByKey(e.join(delimiterChar))):this._selectValueByKey(this._strData[i[1]]))},_declareVariable:function(){var e=this.model.fields,i={_key:null,_text:null,_attr:null},s=[];if(!t.isNullOrUndefined(e))return i._text=e&&e.text?e.text:"text",i._key=e&&e.key?e.key:"key",s.push(i._text,i._key),s},selectValueByKey:function(t){var i,s=this;t=t.toString(),i="none"!=this.model.multiSelectMode?t.split(this.model.delimiterChar):t.split(","),"[object Array]"===Object.prototype.toString.call(i)&&e.each(i,function(t,i){s._setOperation(e.trim(i),"key")})},selectValueByText:function(e){this._setOperation(e,"text")},setValue:function(e){this._setText(e)},_setOperation:function(e,i){var s,n,l,o="",r=this,a=this.model.dataSource;if(t.isNullOrUndefined(a))return!1;if("object"==typeof a[0]||a instanceof t.DataManager)o=(l=this.model.fields)&&l[i]?l[i]:i;else if("key"==i)return!1;if(t.DataManager&&a instanceof t.DataManager)n=this._getQuery().where(o,"equal",e,!this.model.caseSensitiveSearch),(s=a.executeQuery(n)).done(function(e){r._setText(e.result[0])});else{if(!a||!a.length||a.length<1)return!1;n=t.Query().where(o,"equal",e,!this.model.caseSensitiveSearch),s=t.DataManager(a).executeLocal(n),this._setText(s[0])}},_setText:function(e){var t,i,s;if(!e)return!1;if(i=this.model.fields,t="object"==typeof this.model.dataSource[0]||"object"==typeof e?"string"==typeof e?e:i&&i.text?e[i.text]:e.text:e){if("visualmode"==this.model.multiSelectMode&&this._removeDuplicates(e))return!1;this._valueToTextBox(t,e,!0),s="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val(),this.value(s),this.model.showResetIcon&&this._showReset()}},_textFormateString:function(e){var i,s,n=this.model.multiColumnSettings.stringFormat;if(this._columnsIndex(),t.isNullOrUndefined(e)||"object"!=typeof e)n=t.isNullOrUndefined(e)||"object"==typeof e?this._currList[this._activeItem-1]:n.replace("{"+this._columnIndex[0]+"}",e);else for(i=0,s=this._columnIndex.length;i<s;i++)n=n.replace("{"+this._columnIndex[i]+"}",e[this.model.multiColumnSettings.columns[parseInt(this._columnIndex[i])].field]);return n},_columnsIndex:function(){var t=this;this._columnIndex=[],e.each(this.model.multiColumnSettings.stringFormat.match(/\{.+?\}/g),function(e,i){t._columnIndex[e]=i.slice(1,-1)})},_valueToTextBox:function(e,i,s){var n,l,o;!this._addNewTemplate&&this.model.multiColumnSettings.enable&&"string"!=typeof i&&(e=this._textFormateString(i)),"visualmode"==this.model.multiSelectMode?(i="string"==typeof i&&this._addNewTemplate&&i.substr(i.length-this._addNewTemplate.length)==this._addNewTemplate?i.replace(this._addNewTemplate,""):i,n=e.indexOf(this._addNewTemplate),this._addNewTemplate&&(e=e.substr(0,e.length-this._addNewTemplate.length)),o=this.model.delimiterChar,l=(l=this._getUniqueKey())||(this.model.fields&&this.model.fields.key?i[this.model.fields.key]:t.isNullOrUndefined(i.key)?l:i.key),(!(this._selectValueByKey()==l||null==l)||n>-1)&&this._selectValueByKey(null!=this._selectValueByKey()?this._selectValueByKey()+(n>-1?e:l)+o:(n>-1?e:l)+o),(!(this._hiddenInput.val()==l||null==l)||n>-1)&&this._hiddenInput.val(this._hiddenInput.val()+(l||e)+o),this._modelValue=t.isNullOrUndefined(this.value())?e+o:this.value()+e+o,this.element.val("").removeAttr("placeholder").width(1),this._ulBox.append(this._createBox(e)),this._addNewTemplate=null):"delimiter"==this.model.multiSelectMode?(o=this.target.value.lastIndexOf(this.model.delimiterChar),this._typed||""==this.element.val()||s||!this.model.showPopupButton?s?this.element.val(""==this.element.val()?e+this.model.delimiterChar:this.element.val()+e+this.model.delimiterChar):-1==o?this.element.val(this._queryString.substr(0,o+1)+e+this.model.delimiterChar):this.element.val(this._queryString.substr(0,o+this.model.delimiterChar.length)+e+this.model.delimiterChar):!this.model.enableAutoFill||this.showSuggestionBox?this._checkDeli()?this.element.val(this._queryString.substr(0,o)+this.model.delimiterChar+e+this.model.delimiterChar):this.element.val(this.element.val()+this.model.delimiterChar):this._checkDeli()||this.element.val(this.element.val()+this.model.delimiterChar),this._typed=!1):(this.element.val(e),this._selectedItems=[]),this._selectedItems.push(i),this._originalval.push(e),this._moveCaretToEnd(this.element[0])},_removeDuplicates:function(e){return 0!=this._selectedItems.length&&(-1!=this._selectedItems.indexOf(e)||void 0)},search:function(){this.model.enabled&&this._checkDelimiter()&&(this._hideResult(),this._autoFill=!1,this._queryString=e.trim(this._queryString),this._queryString.length>0&&this._OnTextEnter())},setVisible:function(e){e?this.wrapper.show():this.wrapper.hide()},hide:function(){this._hideResult()},open:function(){this._showFullList()},_changeWatermark:function(e){this._isWatermark?this.element.attr("placeholder",e):this._hiddenSpan.text(e)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.suggestionList.removeClass(this.model.cssClass).addClass(e)},_setDropdown:function(e){this.model.showPopupButton=e,e?this._renderDropdown():this._destroyDropdown()},_changeHeight:function(e){this.wrapper.height(e)},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setCulture:function(){this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.addNewText)||(this._localizedLabels.addNewText=this._options.addNewText),t.isNullOrUndefined(this._options.emptyResultText)||(this._localizedLabels.emptyResultText=this._options.emptyResultText)),this.model.addNewText=this._localizedLabels.addNewText,this.model.emptyResultText=this._localizedLabels.emptyResultText},_init:function(e){if(this._options=e,this._setCulture(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category,this._initialize(),this._render(),this._wireEvents(),this.initialRender=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation())},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l,o;if(this.model.validationRules)for(n in(i="visualmode"==this.model.multiSelectMode?this._hiddenInput:this.element).rules("add",this.model.validationRules),s=(s=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=i.attr("name"),s.settings.messages[name]={},this.model.validationRules)if(l=null,!t.isNullOrUndefined(this.model.validationRules[n])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[n]))for(o in s.settings.messages[name][n]=e.validator.messages[n],this.model.validationMessage)n==o&&(l=this.model.validationMessage[n]);else l=this.model.validationRules.messages[n];s.settings.messages[name][n]=null!=l?l:e.validator.messages[n]}},_removeDuplicateValue:function(e){return e.split(this.model.delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]).join(this.model.delimiterChar)},_delimiterChar:function(){return"none"!=this.model.multiSelectMode?this.model.delimiterChar:""},_setModel:function(e){var i,s,n,l,o,r,a;for(i in e){switch(i){case"dataSource":this.model.dataSource=null;break;case"watermarkText":this._changeWatermark(e[i]);break;case"delaySuggestionTimeout":this.model.delaySuggestionTimeout=parseInt(e[i]);break;case"value":deli=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(a=e[i].substr(e[i].length-deli.length)==deli?e[i]:e[i]+deli,e[i]=""==e[i]?this.value():(this.value()?this.value():"")+a,"visualmode"==this.model.multiSelectMode&&(e[i]=e[i].split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),e[i]=e[i].join(deli))),this.value(this._setValue(e[i])),this._modelValue=this.value(),s="visualmode"==this.model.multiSelectMode?this._hiddenInput.val():this.element.val(),this._changeEvtTrigger(s),this.model.showResetIcon&&this._showReset();break;case"showPopupButton":this._setDropdown(e[i]);break;case"enableRTL":this._RightToLeft(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"readOnly":this._checkReadOnly(e[i]);break;case"delimiterChar":n=this.model.delimiterChar,e[i]=this._validateDelimiter(e[i]),this.model.delimiterChar=e[i],this.element.val(this.value().replace(new RegExp(n,"g"),this.model.delimiterChar)),this.value(this.element.val());break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[i],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[i],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"locale":t.Autocomplete.Locale[e[i]]?(this.model.locale=e[i],this._setCulture()):e[i]=this.model.locale;break;case"filterType":for(r in l=[],t.filterType)t.filterType.hasOwnProperty(r)&&l.push(t.filterType[r]);l.indexOf(e[i])>-1?this.model.filterType=e[i]:e[i]=this.model.filterType;break;case"multiSelectMode":this.model.multiSelectMode=e[i],o=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(r=this._selectValueByKey(),(a=this.value())&&(a=a.substr(a.length-o.length)==o?a:a+o,this.value(a),"visualmode"==this.model.multiSelectMode&&this.value(this._removeDuplicateValue(this.value()))),r&&(this._selectValueByKey(r.substr(r.length-o.length)==o?r:r+o),"visualmode"==this.model.multiSelectMode&&this._selectValueByKey(this._removeDuplicateValue(this._selectValueByKey())))),"visualmode"==e[i]?(null!=this.model.validationRules&&this.element.rules("remove"),""!=this.element.val()&&this._isWatermark&&this.element.removeAttr("placeholder"),this._renderBoxModel()):this.element.hasClass("e-visual-mode")&&this._destroyBoxModel(),this._setValue(this.value()),this._setValidation(),t.isNullOrUndefined(this.element.attr("placeholder"))&&this._isWatermark&&this._setWatermark();break;case"enabled":this._disabled(!e[i]);break;case"visible":this.setVisible(e[i]);break;case"height":this._changeHeight(e[i]);break;case"width":this._changeWidth(e[i]);break;case"cssClass":this._changeSkin(e[i]);break;case"itemsCount ":(e[i]<=0||isNaN(e[i]))&&(e[i]=0);break;case"popupHeight":this.suggestionList.css({"max-height":isNaN(e[i])?e[i]:e[i]+"px"});break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"selectValueByKey":deli=this._delimiterChar(),r=t.util.getVal(e[i]),this.selectValueByKey(r),keyValue="none"!=this.model.multiSelectMode?this._selectValueByKey()+e[i]:e[i],keyValue=keyValue.split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),keyValue=keyValue.join(deli),e[i]=keyValue.substr(keyValue.length-deli.length)==deli?keyValue:keyValue+deli;break;case"htmlAttributes":this._addAttr(e[i]);break;case"emptyResultText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.emptyResultText=this.model.emptyResultText=e[i],this._setCulture();break;case"addNewText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.addNewText=this.model.emptyResultText=e[i],this._setCulture();break;case"multiColumnSettings":t.isNullOrUndefined(e[i].enable)||(this.model.multiColumnSettings.enable=e[i].enable),t.isNullOrUndefined(e[i].showHeader)||(this.model.multiColumnSettings.showHeader=e[i].showHeader),t.isNullOrUndefined(e[i].stringFormat)||(this.model.multiColumnSettings.stringFormat=e[i].stringFormat),t.isNullOrUndefined(e[i].columns)||(this.model.multiColumnSettings.columns=e[i].columns),this.suggestionList.remove(),this._renderSuggestionList();break;case"showResetIcon":this.model.showResetIcon=e[i],e[i]?this._showReset():this._removeReset()}this._hideResult()}},_destroy:function(){this.element.width("").removeAttr("role aria-label aria-expanded aria-haspopup aria-autocomplete autocomplete placeholder aria-owns aria-disabled disabled"),this.element.insertAfter(this.wrapper),"visualmode"==this.model.multiSelectMode&&this.element.removeClass("e-visual-mode").attr("name",this._hiddenInput.attr("name")),this.model.enabled||this.element.removeClass("e-disable"),this.wrapper.remove(),this.element.removeClass("e-input").val(""),this._isWatermark&&this.element.removeAttr("placeholder"),this._hideResult(),this.suggestionList.remove()},_initialize:function(){this.value(""===this.value()?this.element[0].value:this.value()),this.element.attr("role","combobox").attr("aria-label","Autocomplete textbox").attr("aria-expanded",!1).attr("tabindex",0).attr("aria-autocomplete","list"),/Edge\/12./i.test(navigator.userAgent)&&this.element.addClass("edge-browser"),this.target=this.element[0],this.dropdownbutton=null,this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this.showSuggestionBox=!1,this.noresult=!0,this._queryString=null,this.suggLen=0,this._selectedItems=[],this._modelValue="",this._activeItem=0,this._originalval=[],this.ctrlKeyPressed=!1,this._isFocused=!1,this._isOpened=!1,this._typed=!1,this._cancelEvent=!1,this._isWatermark=this._checkWatermarkSupport(),this._selectedObj=[]},_render:function(){this._renderWrapper(),this._addAttr(this.model.htmlAttributes),this._setDimentions(),this._renderDropdown(),this._checkProperties(),this._isWatermark?this._setWatermark():this._setWatermarkTxt(),this._renderSuggestionList(),this._RightToLeft(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this.setVisible(this.model.visible),this._setListPosition()},_renderWrapper:function(){var e,i;this.element.addClass("e-input").attr("autocomplete","off"),this.wrapper=t.buildTag("span.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),document.activeElement==this.element[0]&&(e=!0),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),i=this,this._hiddenSpan.click(function(){this._isFocused||i.element.focus()})),e&&this.element.focus()},_renderDropdown:function(){if(this.model.showPopupButton){var i=t.buildTag("span.e-icon e-search").attr(this._isIE8?{unselectable:"on"}:{});this.dropdownbutton=t.buildTag("span.e-select#"+this.target.id+"_dropdown").attr(this._isIE8?{unselectable:"on"}:{}).append(i),this.container.append(this.dropdownbutton).addClass("e-padding"),this.model.enabled||this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),this.dropdownbutton.on("mousedown",e.proxy(this._OnDropdownClick,this))}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"required"==t&&i.element.attr(t,e),"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._disabled(!0):"readOnly"==t&&!0===e?i._checkReadOnly(!0):i.wrapper.attr(t,e)})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderBoxModel:function(){this._ulBox=t.buildTag("ul.e-ul e-boxes");var i=this.model.enabled?"":"e-disable";this._ulBox.addClass(i),this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._hiddenInput.attr("name",this.element.attr("name")),this.element.val("").removeAttr("name").addClass("e-visual-mode"),this._isWatermark||this.element.width(1),this.container.prepend(this._hiddenInput,this._ulBox),this.wrapper.height("auto"),this._on(this.container,"mousedown",function(t){if(!this.model.enabled)return!1;var i=e(t.target);i.is(this.element)||(t.preventDefault(),this._isFocused||this.element.focus(),i.hasClass("e-options")?(!t.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")):this._moveCaretToEnd(this.element[0])),!t.ctrlKey&&(i.hasClass("e-boxes")||i.hasClass("e-input"))&&this._removeActive()})},_destroyBoxModel:function(){this.container.prepend(this.element),this.element.attr({name:this._hiddenInput.attr("name")}).removeAttr("style").removeClass("e-visual-mode"),this.wrapper.height(this.model.height),this._hiddenInput.remove(),this._hiddenInput=null,this._ulBox.remove(),this._off(this.container,"mousedown")},_deleteLastBox:function(){var e=this._ulBox.children().last(),t=e.hasClass("e-active");this._removeActive(),t?this._deleteBox(e):e.addClass("e-active")},_deleteBox:function(t){for(var i,s,n,l,o=0,r=t.length;o<r;o++)i=this._ulBox.children().index(t[o]),this._selectedItems.splice(i,1),s=this.model.delimiterChar,(n=this._hiddenInput.val().split(s)).splice(i,1),this._hiddenInput.val(n.join(s)),this._selectValueByKey(n.join(s)),(l=this._modelValue.split(s)).splice(i,1),this._modelValue=l.join(s),e(t[o]).remove();this.showSuggestionBox&&this._refreshPopup(),this._valueChange(),""==this._hiddenInput.val()&&this._setWatermark()},_removeActive:function(){this._ulBox.children("li.e-active").removeClass("e-active")},_adjustWidth:function(){var e,i=t.buildTag("span",this.element.val());this.container.append(i),e=i.width()+30,this.element.width()!=e&&this.element.width(e),""==this._hiddenInput.val()&&this._setWatermark(),i.remove()},_checkProperties:function(){var i,s;this._checkReadOnly(this.model.readOnly),this.model.delimiterChar=this._validateDelimiter(this.model.delimiterChar),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&(this.model.enabled=!1,this._disabled(!1)):(this.model.enabled=!0,this._disabled(!0)),this._checkNameAttr(),"visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),null!=this._selectValueByKey()&&""==this.value()?(i=this._selectValueByKey().toString(),"none"!=this.model.multiSelectMode&&(i=i.substr(i.length-this.model.delimiterChar.length)==this.model.delimiterChar?i:i+this.model.delimiterChar,"visualmode"==this.model.multiSelectMode?this._selectValueByKey(null):this._selectValueByKey(i)),this.selectValueByKey(i),this.model.showResetIcon&&this._showReset()):(s=this.value(),"none"!=this.model.multiSelectMode&&(t.isNullOrUndefined(s)||""!=s)&&(s=s.substr(s.length-this.model.delimiterChar.length)==this.model.delimiterChar?s:s+this.model.delimiterChar),this.value(this._setValue(s)),this.model.showResetIcon&&""!=this.value()&&this._showReset())},_checkNameAttr:function(){this.element.attr("name")||this.element.attr("name",this.element[0].id)},_disabled:function(e){e?this.disable():this.enable()},_destroyDropdown:function(){this.dropdownbutton.off("mousedown",e.proxy(this._OnDropdownClick,this)),this.dropdownbutton.remove(),this.dropdownbutton=null,this.container.removeClass("e-padding")},_validateDelimiter:function(t){return e.trim(t).length!=t.length&&null==t.length||/^[a-zA-Z0-9]+$/.test(t)?",":t},_checkWatermarkSupport:function(){return"placeholder"in document.createElement("input")},_setWatermark:function(){(this.model.watermarkText&&(""==this.value()||t.isNullOrUndefined(this.value()))||"visualmode"!=this.model.multiSelectMode)&&this.element.attr("placeholder",this.model.watermarkText).width("")},_setWatermarkTxt:function(){null!=this.model.watermarkText&&""==e.trim(this.element.val())&&("visualmode"!=this.model.multiSelectMode||""==e.trim(this._hiddenInput.val()))&&this._hiddenSpan.css("display","block").text(this.model.watermarkText)},_renderSuggestionList:function(){var i,s,n,l,o,r,a=e("#"+this.element[0].id+"_suggestion").get(0);if(a&&e(a).remove(),this.suggestionList=t.buildTag("div.e-atc-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_suggestion","",{display:"none"}).attr("role","listbox"),this.element.attr("aria-owns",this.target.id+"_suggestion"),this.popup=this.suggestionList,i=t.buildTag("div"),this.model.multiColumnSettings.enable){if(this._tableColumn=t.buildTag("table","",{},{role:"listbox","border-collapse":"separate",border:0,cellspacing:0,cellpadding:0,class:"e-atc-tableContent"}),this._listEventBind(this._tableColumn,"tr"),this._headerColGroup=document.createElement("colgroup"),this.model.multiColumnSettings.showHeader){for(this._tableHeaderDiv=t.buildTag("div",{},{},{class:"e-atc-tableHeader "+(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll")}),s=t.buildTag("div",{},{},{class:"e-atc-tableHeaderContent e-atc-tableHeaderBorder"}),n=document.createElement("tr"),this._tableHeader=t.buildTag("table","",{},{cellspacing:"0.25px"}),l=0,o=this.model.multiColumnSettings.columns.length;l<o;l++)e(n).append(t.buildTag("th",this.model.multiColumnSettings.columns[l].headerText?this.model.multiColumnSettings.columns[l].headerText:"column"+l,{"text-align":this.model.multiColumnSettings.columns[l].headerTextAlign?this.model.multiColumnSettings.columns[l].headerTextAlign:"left"},{class:l==this.model.multiColumnSettings.columns.length-1?"":this.model.enableRTL?"e-atc-thleft":"e-atc-thright"})),e(this._headerColGroup).append(document.createElement("col"));e(this._tableHeaderDiv).append(e(s).append(e(this._tableHeader).append(n).append(this._headerColGroup))),this.suggestionList.append(this._tableHeaderDiv)}else{for(l=0,o=this.model.multiColumnSettings.columns.length;l<o;l++)e(this._headerColGroup).append(document.createElement("col"));this._tableColumn.append(this._headerColGroup)}(r=t.buildTag("div")).append(this._tableColumn),i.append(r)}else this.ul=t.buildTag("ul.e-ul").attr("role","listbox"),this._listEventBind(this.ul,"li:not('.e-category')"),i.append(this.ul);this.suggestionList.append(i),e("body").append(this.suggestionList),this._setListWidth(),this._setListHeight(),this.model.multiColumnSettings.enable?(i.ejScroller({height:i.height(),width:0,scrollerSize:20}),this.scrollerObj=i.ejScroller("instance")):(this.suggestionList.ejScroller({height:this.suggestionList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.suggestionList.ejScroller("instance"))},_listEventBind:function(t,i){t.on({mouseenter:e.proxy(this._OnMouseEnter,this),mouseleave:e.proxy(this._OnMouseLeave,this),click:e.proxy(this._OnMouseClick,this)},i)},_checkEmptyList:function(){"visualmode"==this.model.multiSelectMode&&this._removeRepeated(),0==this.suggestionListItems.length?(this.suggestionListItems.push(this.model.emptyResultText),this.noresult=!0):this.noresult=!1},_showSuggestionList:function(e){this.suggestionListItems=this.model.enableDistinct?t.dataUtil.distinct(this.suggestionListItems,"object"!=typeof this.suggestionListItems[0]?"":this.model.fields&&this.model.fields.text?this.model.fields.text:"text",!0):this.suggestionListItems,this.model.itemsCount>0&&(this.suggestionListItems=t.DataManager(this.suggestionListItems).executeLocal(t.Query().take(this.model.itemsCount))),this._checkEmptyList(),this._addNewTemplate=null,this.noresult&&"visualmode"==this.model.multiSelectMode&&this.model.allowAddNew&&""!=this.element.val()&&!this._repeatRemove&&(this.noresult=!1,this.suggestionListItems.pop(),this._addNewTemplate="   ("+this.model.addNewText+")",this.suggestionListItems.push(this.element.val()+this._addNewTemplate),this._checkEmptyList()),(!this.noresult||this.model.showEmptyResultText)&&this._generateSuggestionList(e)},_generateSuggestionList:function(i){var s,n,l,o,r,a,d,h,c,u,m,p=this.suggestionListItems;if(this.model.multiColumnSettings.enable?this._tableColumn.empty()&&this.model.multiColumnSettings.showHeader&&this._tableHeaderDiv.css("display",""):this.ul.empty(),s=this,n=document.createDocumentFragment(),"object"!=typeof p[0]){if(s.model.multiColumnSettings.enable){var g=t.buildTag("tbody"),f=t.buildTag("tr").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}),_=t.buildTag("td",{},{},{role:"option"});for(o=0,r=p.length;r>o;o++){var v=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(p[o]):p[o],b=f.clone(),w=_.clone();e(w).attr(s._isIE8?{unselectable:"on"}:{}).attr(p[o]!=p.length-1?{class:"e-atc-tdbottom"}:{}).html(v),b[0].appendChild(w[0]),g[0].appendChild(b[0]),n.appendChild(g[0]),s.model.showEmptyResultText&&s.model.emptyResultText==v&&s.model.multiColumnSettings.showHeader&&s._tableHeaderDiv.css("display","none")&&e(w).removeClass("e-atc-tdbottom"),s._addNewTemplate&&!t.isNullOrUndefined(s._tableHeaderDiv)&&s._tableHeaderDiv.css("display","none")}s._tableColumn[0].appendChild(n)}else{for(l=t.buildTag("li",{},{},{role:"option"}).attr(s._isIE8?{unselectable:"on"}:{}),o=0,r=p.length;r>o;o++)v=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(p[o]):p[o],(a=l.clone())[0].innerHTML=v,n.appendChild(a[0]);s.ul[0].appendChild(n)}this._currList=p,this._mapper={txt:null,key:null}}else d=this.model.fields,(h={_key:null,_text:null,_attr:null})._key=d&&d.key?d.key:"key",h._text=d&&d.text?d.text:"text",h._attr=d&&d.htmlAttributes?d.htmlAttributes:"htmlAttributes",this._mapper={txt:h._text,key:h._key},this._currList=[],this.model.fields.groupBy?(c=d&&d.groupBy?d.groupBy:"groupBy",m=t.Query().group(c),this._addSortingQuery(m,"key"),u=t.DataManager(p).executeLocal(m),this._swapUnCategorized(u),u.forEach(function(e,i){if(e.key)if(s.model.multiColumnSettings.enable){var n=t.buildTag("tr.e-category").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{});n.append(t.buildTag("td",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}).attr(i!=p.length-1?{class:"e-atc-tdbottom"}:{})),s._tableColumn.append(n)}else s.ul.append(t.buildTag("li.e-category",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}));s._generateLi(e.items,h)})):this._generateLi(p,h);this._getLiTags().length>0&&(e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),this._showResult(i))},_swapUnCategorized:function(e){for(var t,i=e.length,s=0;s<i;s++)if(!e[s].key){for(t=s;t>0;t--)e[t]=e[t-1];return e[t]=e[s],!1}},_generateLi:function(i,s){var n,l,o,r,a,d,h,c,u,m,p,g=this,f=document.createDocumentFragment(),_=document.createDocumentFragment();if(g.model.multiColumnSettings.enable){for(n=g.model.multiColumnSettings.columns.length,this._tableColumn.append(t.buildTag("tbody")),l=t.buildTag("tr"),o=t.buildTag("td"),h=0,c=i.length;c>h;h++)if(u=i[h][s._text],m=i[h][s._key],!t.isNullOrUndefined(u)||g.model.multiColumnSettings.enable){for(g._getField(i[h]),(r=l.clone())[0].className=h%2?"e-atc-trbgcolor":"",a=0;a<n;a++)(d=o.clone())[0].innerHTML=g.model.highlightSearch&&e.inArray(a.toString(),g._columnIndex)>-1?g._highlightSuggestion(g._getField(i[h],g.model.multiColumnSettings.columns[a].field).toString()):g._getField(i[h],g.model.multiColumnSettings.columns[a].field),d[0].className=(h!=i.length-1?"e-atc-tdbottom ":"")+(a!=g.model.multiColumnSettings.columns.length-1?g.model.enableRTL?"e-atc-tdleft ":"e-atc-tdright ":"")+(g.model.multiColumnSettings.columns[a].cssClass?g.model.multiColumnSettings.columns[a].cssClass:""),d[0].style.textAlign=g.model.multiColumnSettings.columns[a].textAlign?g.model.multiColumnSettings.columns[a].textAlign:"left",_.appendChild(d[0]);r[0].appendChild(_),m&&r.attr("id",m),g._setAttributes(g._getField(i[h],s._attr),r[0]),f.appendChild(r[0]),g._currList=g._currList.concat([i[h]])}e(g._tableColumn).find("tbody")[0].appendChild(f)}else{for(h=0,c=i.length;c>h;h++)u=i[h][s._text],m=i[h][s._key],t.isNullOrUndefined(u)||(g.model.highlightSearch&&(u=g._highlightSuggestion(u)),g.model.template&&(u=g._getTemplatedString(i[h],s._text,u)),(p=document.createElement("li")).innerHTML+=u,m&&p.setAttribute("id",m),g._setAttributes(g._getField(i[h],s._attr),p),f.appendChild(p),g._currList=g._currList.concat([i[h]]));g.ul[0].appendChild(f)}},_getLiTags:function(){return this.model.multiColumnSettings.enable?this._tableColumn.find("tbody tr:not('.e-category')"):this.ul.children("li:not('.e-category')")},_getTemplatedString:function(e,t,i){for(var s=this.model.template,n=s.indexOf("${"),l=s.indexOf("}");-1!=n&&-1!=l;){var o=s.substring(n,l+1),r=o.replace("${","").replace("}",""),a=this._getField(e,r);t==r&&(a=i),a||(a=""),n=(s=s.split(o).join(a)).indexOf("${"),l=s.indexOf("}")}return s},_getField:function(e,i){return t.pvt.getObject(i,e)},_setAttributes:function(t,i){if(t)for(var s in"string"==typeof t&&(t=e.parseJSON(t)),t)i.setAttribute(s,t[s])},_setListWidth:function(){var e=this.model.popupWidth;e&&"auto"!=e?this.suggestionList.css({width:e}):this.suggestionList.css({width:this.wrapper.width()})},_setListHeight:function(){this.suggestionList.css({"max-height":this.model.popupHeight})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.wrapper.outerWidth()!=this.suggestionList.outerWidth()&&(this.suggestionList.css({width:this.wrapper.width()}),this._refreshScroller()),this._setListPosition()},_showResult:function(s){var n,l,o,r;this._refreshScroller(),this._refreshPopup(),this._isOpened?e(document).on("mousedown",e.proxy(this._OnDocumentClick,this)):(this.suggestionList.css("display","none"),n=this,clearTimeout(this._typing),this._typing=setTimeout(function(){n.suggestionList["slide"==n.model.animateType?"slideDown":"fadeIn"]("none"==n.model.animateType?0:300,function(){e(document).on("mousedown",e.proxy(n._OnDocumentClick,n))})},this.model.delaySuggestionTimeout),l=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("open",l),this.wrapper.addClass("e-active")),this._isOpened=!0,this.showSuggestionBox=!0,o=this._getLiTags(),this._listSize=o.length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),(r=t.getScrollableParents(this.wrapper))[0]!=window&&this._on(r,"scroll",this._hideResult)},_hideResult:function(s){var n,l;this.showSuggestionBox&&(this.showSuggestionBox=!1,this._activeItem=0,clearTimeout(this._hiding),this.element.attr("aria-expanded",!1),n=this,this._isOpened?(this.suggestionList.css("display","none"),l=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("close",l)):this._hiding=setTimeout(function(){n.model&&n.suggestionList["slide"==n.model.animateType?"slideUp":"fadeOut"]("none"==n.model.animateType?0:100),n._activeItem=0},this.model.delaySuggestionTimeout),e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_refreshScroller:function(){this.suggestionList.css("height","auto"),this.suggestionList.find(".e-content , .e-scroller").removeAttr("style"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(e(this._tableColumn).attr("width","auto"),e(this._tableHeader).attr("width","auto")),this.suggestionList.css("display","block"),this.model.multiColumnSettings.enable&&(this.scrollerObj.option("height","auto"),this._columnBorderAlign());var i=this.suggestionList.height()>parseInt(e.isNumeric(this.model.popupHeight)?this.model.popupHeight:this.model.popupHeight.replace("px",""))-4;i||this.model.multiColumnSettings.enable&&(this.suggestionList.height()<=this._tableColumn.height()||this.suggestionList.width()<=this._tableColumn.width()||this.model.multiColumnSettings.showHeader&&this.suggestionList.width()<=this._tableHeader.width())?(i&&(this.scrollerObj.model.height=this.model.multiColumnSettings.showHeader&&this._tableHeader?parseInt(this.suggestionList.height())-parseInt(this._tableHeader.height()):this.suggestionList.height()),!this.model.multiColumnSettings.enable&&this.suggestionList.width()<this.suggestionList.find(".e-ul").width()&&this.suggestionList.find(".e-ul").width(this.suggestionList.find(".e-ul").width()),this.scrollerObj.model.width=this.suggestionList.width(),this.scrollerObj.refresh(),this.scrollerObj.option({enableRTL:this.model.enableRTL,scrollTop:0,scrollLeft:0}),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._addThBorder(),this.suggestionList.addClass("e-scroller"),!this.scrollerObj._vScroll&&this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()):(this.suggestionList.removeClass("e-scroller"),this.scrollerObj.refresh(),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()),this.suggestionList.css("height","auto"),this._isIE8&&this.suggestionList.find(".e-vscroll div, .e-hscroll div").attr("unselectable","on"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this.suggestionList.find(".e-content").scroll(t.proxy(function(t){this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(e(t.currentTarget).scrollLeft())},this)),this.suggestionList.find(".e-content").length>0&&this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(this.model.enableRTL?this.suggestionList.find(".e-content")[0].scrollWidth-this.suggestionList.find(".e-content")[0].clientWidth:0))},_columnBorderAlign:function(){var t,i,s;if(this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&"none"!=this._tableHeaderDiv.css("display")){for(this._tableWid=this._tableHeader.outerWidth()>this._tableColumn.outerWidth()?this._tableHeader.outerWidth():this._tableColumn.outerWidth(),this._tableColumn.find("colgroup").remove(),e(this._headerColGroup.children).removeAttr("style"),i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:parseInt(e(this._tableColumn).find("tr:first td").eq(i).outerWidth())>parseInt(this._tableHeader.find("tr:first th").eq(i).outerWidth())?e(this._tableColumn).find("tr:first td").eq(i).outerWidth():this._tableHeader.find("tr:first th").eq(i).outerWidth()});this._tableColumn.append(e(this._headerColGroup).clone()),t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%",e(this._tableColumn).attr("width",t),e(this._tableHeader).attr("width",t)}else if(this.model.multiColumnSettings.enable&&!this.model.multiColumnSettings.showHeader){if(e(this._tableColumn).attr("width","auto"),this._tableWid=this._tableColumn.outerWidth(),e(this._headerColGroup.children).removeAttr("style"),"100%"!=(t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%")){for(i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:e(this._tableColumn).find("tr:first td").eq(i).outerWidth()});this._tableColumn.append(this._headerColGroup)}e(this._tableColumn).attr("width",t)}else e(this._tableColumn).attr("width","100%")},_removeThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").removeClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.parent(".e-atc-tableHeaderContent").removeClass("e-atc-tableHeaderBorder")},_addThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").addClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll").removeClass(this.model.enableRTL?"e-atc-tableHeaderScroll":"e-atc-tableHeaderRTL"),this._tableHeader.parent(".e-atc-tableHeaderContent").addClass("e-atc-tableHeaderBorder")},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),n=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),l=s.top-e(document).scrollTop(),o=this.suggestionList.outerHeight(),r=this.suggestionList.outerWidth(),a=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<n||o>l?s.top+d+3:s.top-o-3)-h;t=e(document).scrollLeft()+e(window).width()-a,(this.model.enableRTL||r>t&&r<a+i.outerWidth())&&(a-=this.suggestionList.outerWidth()-i.outerWidth()),this.suggestionList.css({left:a+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.suggestionList)},_targetFocus:function(e){"visualmode"==this.model.multiSelectMode&&this._setWatermarkWidth(30),this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._isFocused=!0,this._trigger("focusIn",{event:e,isInteraction:!0,value:this.value()})},_focusOutAction:function(e){var i,s;this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._isWatermark||this._setWatermarkTxt(),this._removeSelection(),"visualmode"==this.model.multiSelectMode&&this.model.showResetIcon&&""!=this.element.val()&&this._removeReset(),"visualmode"==this.model.multiSelectMode?(this._removeActive(),this.element.val(""),this._setWatermarkWidth(1),this._preVal="",this._addNewTemplate=null):("delimiter"==this.model.multiSelectMode&&this._valueChange(e),this._updateSelectedItemArray(this.getValue())),t.isNullOrUndefined(this.value())||""==this.value()||(i=this.value().split(this.model.delimiterChar),("delimiter"==this.model.multiSelectMode||"none"==this.model.multiSelectMode)&&(s=this._removeDuplicateVal(i),this._keyProcess(s))),""==this.element.val()&&(""==this.value()||null==this.value())&&this._selectValueByKey(null)},_targetBlur:function(e){this._focusOutAction(e),this._trigger("focusOut",{event:e,isInteraction:!0,value:this.value()})},_setWatermarkWidth:function(e){this.model.watermarkText&&this.element.attr("placeholder")?this.element.width(""):this.element.val("").width(e)},_checkDeli:function(){var e=this.element.val(),t=this.model.delimiterChar;return e.substr(e.length-t.length,e.length)==t&&(this.element.val(e.substr(0,e.length-t.length)),!0)},_removeSelection:function(){if(this.model.enableAutoFill){this.element.attr("aria-autocomplete","both");var e=this._getCaretSelection();e.end-e.start!=0&&e.end-e.start!=this.element.val().length&&(this.target.value=this.target.value.substr(0,e.start))}},_removeListHover:function(){this._getLiTags().removeClass("e-hover")},_addListHover:function(){var t=e(this._getLiTags()[this._activeItem-1]);t.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop()}),t.focus()},_calcScrollTop:function(){this.model.multiColumnSettings.enable?this.model.multiColumnSettings.showHeader?(this._tableColumn.outerHeight(),this._tableHeader.outerHeight()):this._tableColumn.outerHeight():this.ul.outerHeight();var e,t=this.model.multiColumnSettings.enable?this._tableColumn.find("tr"):this.ul.find("li");return e=this.model.multiColumnSettings.enable?this._tableColumn.find("tr.e-hover").index():this.ul.find("li.e-hover").index(),t.eq(1).outerHeight()*e-((this.model.multiColumnSettings.enable?this._tableColumn.parent().outerHeight():this.suggestionList.outerHeight())-t.eq(e).outerHeight())/2},getActiveText:function(){if(this._activeItem>0)return this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):!t.isNullOrUndefined(this._mapper)&&this._mapper.txt?this._getField(this._currList[this._activeItem-1],this._mapper.txt):this._currList[this._activeItem-1]},_getUniqueKey:function(){var e=null;return t.isNullOrUndefined(this._mapper)||(this._mapper.key&&(e=this._getField(this._currList[this._activeItem-1],this._mapper.key)),t.isNullOrUndefined(e)&&(e=null)),e},_setTextBoxValue:function(){var t,i,s,n,l,o;this._activeItem&&!this.noresult&&(t=this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):this.getActiveText(),i=this._getCaretSelection(),this.suggLen=i.start,s=this.target.value.substr(0,this.suggLen),o=-1==(l=this.target.value.lastIndexOf(this.model.delimiterChar))?e.trim(s.substr(l+1,this.suggLen)):e.trim(s.substr(l+this.model.delimiterChar.length,this.suggLen)),!s||s.toLowerCase()!=t.substr(0,this.suggLen).toLowerCase()&&o.toLowerCase()!=t.substr(0,this.suggLen-(l+this.model.delimiterChar.length)).toLowerCase()?("delimiter"==this.model.multiSelectMode&&t&&o?this.element.val(this.element.val().replace(o,t)):t&&this.element.val(t),this._removeSelection()):(n="delimiter"==this.model.multiSelectMode?s+t.substr(o.length,t.length):s+t.substr(s.length,t.length),this.element.val(n),this._autofilSelection(),"visualmode"==this.model.multiSelectMode&&(this._adjustWidth(),this.model.enableAutoFill&&this._refreshPopup()),this.model.autoFocus&&!this.noresult&&this._addListHover()))},_enterTextBoxValue:function(e){var t,i,s;!this._activeItem||this.noresult||this.model.readOnly||(t=this.getActiveText(),i=this._currList[this._activeItem-1],this._preVal=t+("delimiter"==this.model.multiSelectMode?this.model.delimiterChar:""),this._valueToTextBox(t,i,!1),s="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val(),this._trigger("select",{event:e,isInteraction:!0,value:s,text:t,key:this._getUniqueKey(),item:i}),this._valueChange(e),this.model.showResetIcon&&this._showReset()),this._isOpened&&this._trigger("close",{event:e,isInteraction:!0})},_createBox:function(i){var s=t.buildTag("span.e-icon e-close"),n=t.buildTag("li.e-options",i).append(s);return this._on(s,"click",function(t){if(!this.model.enabled)return!1;this._deleteBox(e(t.target).parent())}),n},_addLoadingClass:function(){this.model.showLoadingIcon&&this.element.addClass("e-load")},_removeLoadingClass:function(){this.element.removeClass("e-load")},_highlightSuggestion:function(t){var i,s,n,l,o,r,a,d,h;if(""!=e.trim(this._queryString)&&(i=this.model.caseSensitiveSearch?"g":"gi",r=e.trim(this._queryString),r=/^[a-zA-Z0-9- ]*$/.test(r)?r:r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s="startswith"==this.model.filterType?"^"+r:"endswith"==this.model.filterType?r+"$":r,(n=new RegExp(s,i)).test(t)))for(l=t.match(n),a=t.replace(n,"~^"),t="",d=0,h=(o=a.split("~^")).length;h>d;d++)t+=l[d]?o[d]+"<span class='e-hilight-txt'>"+l[d]+"</span>":o[d];return t},_RightToLeft:function(e){e?(this.wrapper.addClass("e-rtl"),this.suggestionList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.suggestionList.removeClass("e-rtl")),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this._tableHeaderDiv.removeClass(e?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.find("tr :not(th:last)").addClass(e?"e-atc-thleft":"e-atc-thright").removeClass(e?"e-atc-thright":"e-atc-thleft"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.suggestionList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.suggestionList.removeClass("e-corner"))},_checkReadOnly:function(e){this.model.readOnly=e,this.model.readOnly?(this.element.attr({readonly:"readonly","aria-readonly":!0}),this._off(this.element,"keydown",this._OnKeyDown),this._off(this.element,"keyup",this._OnKeyUp),this._off(this.element,"paste",this._OnPaste),this._off(this.element,"keypress",this._onkeyPress)):(this.element.removeAttr("readonly aria-readonly"),this._on(this.element,"keydown",this._OnKeyDown),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"paste",this._OnPaste),this._on(this.element,"keypress",this._onkeyPress))},_onkeyPress:function(e){13==e.keyCode&&this._PreventDefaultAction(e)},_OnPaste:function(e){var t=this;setTimeout(function(){t._OnKeyUp(e)},0)},_OnKeyDown:function(t){var i;switch("startswith"!=this.model.filterType&&(this.model.enableAutoFill=!1),t.keyCode){case 37:case 35:case 36:this._removeSelection();break;case 38:this.showSuggestionBox&&this.suggestionList&&(this._removeListHover(),this._activeItem>1?this._activeItem-=1:this._activeItem=this._listSize,this._navigationHover()),this._PreventDefaultAction(t);break;case 40:this.showSuggestionBox&&this.suggestionList?(this._removeListHover(),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=1,this._navigationHover()):t.ctrlKey&&""==this.element.val()?this._showFullList(t):t.ctrlKey&&this._showSuggestionList(t),this._PreventDefaultAction(t);break;case 33:case 34:if(this.showSuggestionBox&&this.suggestionList){this._removeListHover();var s=this.model.multiColumnSettings.enable?this._tableColumn.parent().height():this.suggestionList.height(),n=this.model.multiColumnSettings.enable?this._tableColumn.find("tr").outerHeight():this.ul.children("li").outerHeight(),l=0!=Math.round(s/n)?Math.round(s/n):this._listSize;this._activeItem=33==t.keyCode?this._activeItem-l:this._activeItem+l,this._activeItem<1&&(this._activeItem=1),this._activeItem>this._listSize&&(this._activeItem=this._listSize),this._navigationHover()}this._PreventDefaultAction(t);break;case 8:""==e.trim(this.element.val())&&(this._isOpened=!1),"visualmode"==this.model.multiSelectMode&&""==this.element.val()&&this._deleteLastBox();break;case 17:this.ctrlKeyPressed=!0;break;case 9:this.showSuggestionBox&&(this._queryString=this.element.val(),this._enterTextBoxValue(t),this._hideResult(t),this._isOpened=!1,this._PreventDefaultAction(t));break;case 27:this._isOpened=!1,i=this.showSuggestionBox,this._hideResult(t),this._PreventDefaultAction(t),i&&this._trigger("close",{event:t,isInteraction:!0})}"visualmode"==this.model.multiSelectMode&&(17!=t.keyCode&&8!=t.keyCode&&46!=t.keyCode&&this._removeActive(),this._adjustWidth())},_PreventDefaultAction:function(e){e.preventDefault(),this._cancelEvent||(e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!0)},_bubbleEvent:function(e){return"boolean"==typeof e&&(this._cancelEvent=e),this._cancelEvent},_navigationHover:function(){this._addListHover(),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this._queryString=this.target.value,this._setTextBoxValue())},_OnKeyUp:function(t){if(this._keyDownComplete(t),this.ctrlKeyPressed&&"paste"!=t.type)return 17==t.keyCode&&(this.ctrlKeyPressed=!1),!1;if(""==e.trim(this.element.val())&&38==t.keyCode&&40==t.keyCode)return this._hideResult(t),!1;if(!this._checkDelimiter())return!1;switch(this._queryString=e.trim(this._queryString),t.keyCode){case 34:case 33:case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 9:case 27:break;case 13:t.preventDefault(),this._queryString=this.element.val(),this._enterTextBoxValue(t),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this.suggLen=this.element.val().length,this._autofilSelection()),this._isOpened=!1,this._hideResult(t);break;case 46:if("visualmode"==this.model.multiSelectMode&&""==this.element.val()){this._deleteBox(this._ulBox.children("li.e-active"));break}case 8:this._queryString.length>=this.model.minCharacter?(this._autoFill=!1,this._OnTextEnter(t)):(this.noresult=!0,this._hideResult(t),""==e.trim(this.element.val())&&(this._isOpened=!1)),this._typed=!0;break;default:this._queryString.length>=this.model.minCharacter?(this._autoFill=!0,this._OnTextEnter(t)):this.noresult=!0,this._typed=!0}},_getFilteredList:function(e,i){var s,n;clearTimeout(this.timeDelay),t.isNullOrUndefined(e)||"object"!=typeof e[0]||(s=this.model.fields.text?this.model.fields.text:"text",this.model.actionFailure&&t.isNullOrUndefined(t.DataManager(e).executeLocal(t.Query().select(s))[0])&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})),!e||!e.length||e.length<1?(this.suggestionListItems=[],this.model.actionFailure&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})):(n=t.Query(),this._addQuery(n,"object"==typeof e[0]),this.suggestionListItems=t.DataManager(e).executeLocal(n),this.model.actionSuccess&&this._trigger("actionSuccess")),this._doneRemaining(i),this.model.actionComplete&&this._trigger("actionComplete")},_performSearch:function(e){var i,s;this.model.actionBegin&&this._trigger("actionBegin"),i=this.model.dataSource,t.DataManager&&i instanceof t.DataManager?i.dataSource.offline||i.dataSource.json&&i.dataSource.json.length>0?(this._getFilteredList(i.dataSource.json,e),this._selectedObj.push(i.dataSource.json)):(window.clearTimeout(this.timer),s=this,this.timer=window.setTimeout(function(){s._fetchRemoteDat(i)},700)):this._getFilteredList(i,e)},_fetchRemoteDat:function(e){var t=this,i=this._getQuery();this._addQuery(i,!0),e.executeQuery(i).fail(function(e){t.suggestionListItems=null,t._removeLoadingClass(),t._trigger("actionFailure",e)}).done(function(e){t.suggestionListItems=e.result,"none"==t.model.multiSelectMode?t._selectedObj=e.result:"delimiter"==t.model.multiSelectMode&&(t._selectedObj=t._selectedObj.concat(e.result)),t._doneRemaining(e),t._trigger("actionSuccess",e)}).always(function(e){t._trigger("actionComplete",e)})},_addSortingQuery:function(e,t){if(this.model.allowSorting){var i="descending"==this.model.sortOrder;e.sortBy(t,i)}},_addQuery:function(e,t){var i,s,n,l,o="";if(t&&(o=(s=this.model.fields)&&s.text?s.text:"text"),this._queryString)if(this.model.multiColumnSettings.enable)if(this._columnsIndex(),t){for(o=[],n=0,l=this._columnIndex.length;n<l;n++)o.push(this.model.multiColumnSettings.columns[this._columnIndex[n]].field),i=this._predicateConvertion(i,this.model.multiColumnSettings.columns[this._columnIndex[n]].field,this.model.multiColumnSettings.columns[this._columnIndex[n]].filterType?this.model.multiColumnSettings.columns[this._columnIndex[n]].filterType:"startswith",this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._columnIndex[n]].type?this.model.multiColumnSettings.columns[this._columnIndex[n]].type:"string");e.where(i)}else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);this._addSortingQuery(e,o)},_predicateConvertion:function(e,s,n,l,o,r){var a;return"number"==r?a=Number(l):"boolean"==r?"true"==l||"yes"==l||"1"==l?a=!0:("false"==l||"no"==l||"0"==l)&&(a=!1):a="date"==r?new Date(l):l,"number"==r&&isNaN(a)||"boolean"==r&&a==i?e:e!=i?e.or(s,n,a,o):t.Predicate(s,n,a,o)},_getQuery:function(){var e;if(t.isNullOrUndefined(this.model.query)){var i=[],s=t.Query(),n=this.model.fields;for(e in n)"tableName"!==e&&n[e]&&i.push(n[e]);i.length>0&&s.select(i),t.isNullOrUndefined(this.model.dataSource.dataSource.url)||this.model.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||s.from(n.tableName)}else s=this.model.query.clone();return s},_OnTextEnter:function(e){var i=this;t.isDevice()?(clearTimeout(this.timeDelay),this.timeDelay=setTimeout(function(){i._onTextProcess(e)},i.model.delaySuggestionTimeout)):i._onTextProcess(e)},_onTextProcess:function(e){this._addLoadingClass(),this.element.attr("aria-expanded",!1),this._performSearch(e),this.model.showResetIcon&&this._showReset()},_showReset:function(){t.isNullOrUndefined(this.resetSpan)&&(this.resetSpan=t.buildTag("span.e-icon e-iclose"),this.model.showPopupButton?(this.dropdownbutton.before(this.resetSpan),this.container.addClass("e-popup e-reset")):this.container.append(this.resetSpan).addClass("e-reset")),this._on(this.resetSpan,"mousedown",this._refreshSearch)},_refreshSearch:function(){this.resetSpan=null,this.clearText(),this._refreshPopup()},_removeReset:function(){this.resetSpan=this.resetSpan&&this.resetSpan[0].remove(),this._refreshPopup()},_doneRemaining:function(e){this._showSuggestionList(e),this.element.attr({"aria-expanded":!0,"aria-haspopup":!0}),(this.model.enableAutoFill&&this._autoFill&&!this.noresult||this.model.autoFocus)&&(this.element.attr("aria-autocomplete","both"),this._activeItem=1,this._queryString=this.target.value),this.model.enableAutoFill&&this._autoFill&&!this.noresult&&this._setTextBoxValue(),this.model.autoFocus&&!this.noresult&&this._addListHover(),this._removeLoadingClass(),this.noresult&&!this.model.showEmptyResultText&&this._hideResult(e)},_removeRepeated:function(){var e,t,i,s=this.suggestionListItems;if(!s||0==s.length||0==this._selectedItems.length||1==this.suggestionListItems.length&&this.suggestionListItems[0]==this.element.val()+this._addNewTemplate)return!1;for(this._repeatRemove=!1,e=0,t=this._selectedItems.length;e<t;e++)-1!=(i=s.indexOf(this._selectedItems[e]))&&this.suggestionListItems.splice(i,1),this.element.val()==this._selectedItems[e]&&(this._repeatRemove=!0)},_checkDelimiter:function(){this._queryString=this.element.val();var e="delimiter"!=this.model.multiSelectMode?-1:this._queryString.lastIndexOf(this.model.delimiterChar);return-1==e||(this._queryString=this._queryString.substr(e+this.model.delimiterChar.length,this._queryString.length)),!0},_autofilSelection:function(){var e=this.element[0],t=this.element.val().length;e.setSelectionRange?e.setSelectionRange(this.suggLen,t):e.createTextRange&&((e=e.createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",this.suggLen),e.select())},_OnDropdownClick:function(e){this.model.enabled&&!this.model.readOnly&&(e.preventDefault(),(e.which&&1==e.which||e.button&&0==e.button)&&(this._addLoadingClass(),this.showSuggestionBox?(this._hideResult(e),this._isOpened=!1,this._removeLoadingClass()):this._showFullList(e)))},_showFullList:function(e){this._isFocused||this.element.focus(),this._queryString=null,this._autoFill=!1,this._performSearch(e)},_OnMouseEnter:function(e){this._getActiveItemIndex(e)},_getActiveItemIndex:function(t){var i=t.target;this.model.multiColumnSettings.enable&&"tr"!=t.target.tagName.toLowerCase()?i=e(t.target).parents("tr"):"li"!=t.target.tagName.toLowerCase()&&(i=e(t.target).parents("li")),this._getLiTags().removeClass("e-hover"),e(i).addClass("e-hover"),this._queryString=this.element.val(),this._activeItem=this._getLiTags().index(e(i))+1},_OnMouseLeave:function(){this._getLiTags().removeClass("e-hover"),this.model.highlightSearch&&this._getLiTags().find(".e-hilight-txt").removeClass("e-hover")},_OnMouseClick:function(e){this._getActiveItemIndex(e),this.noresult||(this._enterTextBoxValue(e),this._isOpened=!1,this._hideResult(e))},_OnDocumentClick:function(t){e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList)||e(t.target).is(this.element)||e(t.target).parents(".e-atc").is(this.wrapper)?(e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList))&&t.preventDefault():(this._isOpened=!1,this._hideResult(t),this._trigger("close",{event:t,isInteraction:!0}))},_OnWindowResize:function(){this._refreshPopup()},_keyProcess:function(e){var i,s,n,l,o=this._declareVariable();if(i=this._delimiterChar(),!t.isNullOrUndefined(e))for(s=0,n=e.length;s<n;s++)l=e[s],t.DataManager&&this.model.dataSource instanceof t.DataManager?this._selectValueByKey(null):(this._dataQuery=this.model.multiColumnSettings.enable?t.Query():t.Query().where(o[0],this.model.filterType,l,!1),this._promise=t.DataManager(this.model.dataSource).executeLocal(this._dataQuery),this.model.multiColumnSettings.enable?this._formatStringKey(e,o,i):this._promise instanceof Array&&0==this._promise.length?null!=this._selectValueByKey()&&this._selectValueByKey():this._getFieldKey(this._promise[0],o[1],i))},_formatStringKey:function(e,t,i){var s,n,l,o,r,a;for(this._selectValueByKey(null),s=0,n=e.length;s<n;s++)if(""!=e[s]){for(l=e[s],r=0,a=this._promise.length;r<a;r++)l==this._textFormateString(this._promise[r])&&(o=r);o?this._getFieldKey(this._promise[o],t[1],i):null!=this._selectValueByKey()&&this._selectValueByKey()}},_getFieldKey:function(i,s,n){if((t.isNullOrUndefined(this.model.template)||!t.isNullOrUndefined(this._getField(i,s)))&&!t.isNullOrUndefined(this._getField(i,s))){if(r=this._getField(i,s).toString(),"none"!=this.model.multiSelectMode){var l,o,r=this._selectValueByKey();delimiterChar=this.model.delimiterChar,l=this._getField(i,s).toString(),null!=r?(o=r.toString().split(n).filter(function(e){return""!==e}),-1==e.inArray(l,o)?(o.push(l),r=o.join(delimiterChar)+delimiterChar):r=l+delimiterChar):r=l+delimiterChar}this._selectValueByKey(r)}},_removeDuplicateVal:function(i){var s=[];return e.each(i,function(t,i){-1==e.inArray(i,s)&&s.push(i)}),1!=i.length||t.isNullOrUndefined(this._originalval)||-1==e.inArray(i[0],this._originalval)&&this._selectValueByKey(null),s},_valueChange:function(e){var t="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();(this.value()!=t||""==t&&""!=this.element.val())&&(this.value(t),this._changeEvtTrigger(t,e)),this.model.showResetIcon&&!t&&(this.wrapper.find("span.e-iclose").remove(),this.resetSpan=null)},_changeEvtTrigger:function(e,t){var s=t!=i?{event:t,isInteraction:!0,value:e}:{isInteraction:!1,value:e};this.initialRender||(this._trigger("_change",{value:e}),this._trigger("change",s))},_updateSelectedItemArray:function(i){var s,n,l,o=[];if(this._selectedItems=[],this.suggestionListItems=this.model.dataSource,"delimiter"==this.model.multiSelectMode&&i)if(o=i.split(this.model.delimiterChar),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]){for(s=0,n=o.length;s<n;s++)if(o[s]){var r=this,a=this._selectedObj.length,d={};for(l=0;l<a;l++)this._selectedObj[l][r.model.fields.text]==o[s]&&(d=this._selectedObj[l],l=a);this._selectedItems.push(e.isEmptyObject(d)?o[s]:d)}}else this._createBoxForObjectType(o);else"none"==this.model.multiSelectMode&&i&&(o.push(i),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]?(r=this,d=e.grep(this._selectedObj,function(e){if(e[r.model.fields.text]==i)return e}),this._selectedItems.push(d.length>0?d:i)):this._createBoxForObjectType(o))},_keyDownComplete:function(e){var t=this.element.val();this._preVal!=t&&(this._preVal=t,"visualmode"==this.model.multiSelectMode&&this._adjustWidth(),this._valueChange(e))},_moveCaretToEnd:function(e){var t,i;e.scrollLeft=e.scrollWidth,e.createTextRange&&((t=e.createTextRange()).moveEnd("textedit"),t.moveStart("textedit"),t.select()),"number"==typeof e.selectionStart?e.selectionStart=e.selectionEnd=e.value.length:void 0!==e.createTextRange&&((i=e.createTextRange()).collapse(!1),i.select())},_getCaretSelection:function(){var e,t,i,s,n=this.element[0],l=0,o=0;return isNaN(n.selectionStart)?(e=document.selection.createRange().getBookmark(),(t=n.createTextRange()).moveToBookmark(e),(i=n.createTextRange()).collapse(!0),i.setEndPoint("EndToStart",t),{start:s=i.text.length,end:s+t.text.length}):(l=n.selectionStart,o=n.selectionEnd,{start:Math.abs(l),end:Math.abs(o)})},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur)}}),t.Autocomplete.Locale=t.Autocomplete.Locale||{},t.Autocomplete.Locale.default=t.Autocomplete.Locale["en-US"]={addNewText:"Add New",emptyResultText:"No suggestions",actionFailure:"The specified field doesn't exist in given data source"},t.filterType={StartsWith:"startswith",Contains:"contains",EndsWith:"endswith",LessThan:"lessthan",GreaterThan:"greaterthan",LessThanOrEqual:"lessthanorequal",GreaterThanOrEqual:"greaterthanorequal",Equal:"equal",NotEqual:"notequal"},t.SortOrder={Ascending:"ascending",Descending:"descending"},t.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},t.Animation={None:"none",Slide:"slide",Fade:"fade"},t.Type={Number:"number",String:"string",Boolean:"boolean",Date:"date"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.datepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){var e,t,n;e=jQuery,(t=Syncfusion).widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date(1900,0,1),maxDate:new Date(2099,11,31),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(i){var s,n,l=!1,o=!1,r=!1;for(s in i)switch(s){case"dayHeaderFormat":this.model.dayHeaderFormat=i[s],l=o=!0;break;case"showPopupButton":this._renderDateIcon(i[s],!0);break;case"displayInline":this._setDisplayInline(i[s]),this.model.allowEdit||i[s]||!this._isInputBox()||this.element.on("mousedown",e.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[s])&&(i[s]=null),t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),i[s]=this.model.value):this._updateDateValue(i[s]),r=l=o=!0;break;case"specialDates":this.model.specialDates=i[s],this._createSpecialDateObject(),l=o=!0;break;case"fields":this.model.fields=i[s],this._mapField=this._getMapper(),l=o=!0;break;case"showTooltip":this.model.showTooltip=i[s],l=o=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[s],l=o=!0;break;case"highlightSection":this.model.highlightSection=i[s],l=o=!0;break;case"dateFormat":this.model.dateFormat=i[s],this._ensureValue();break;case"minDate":this._setMinDate(i[s]),i[s]=this.model.minDate,this._ensureValue(),r=l=o=!0;break;case"maxDate":this._setMaxDate(i[s]),i[s]=this.model.maxDate,this._ensureValue(),r=l=o=!0;break;case"locale":this.model.locale=i[s],this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(i[s]),this.model.value&&this._setDateValue(this.model.value),i[s]=this.model.locale,l=o=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[s],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[s],r=l=o=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[s],this._disbleMaualInput();break;case"width":this._setWidth(i[s]);break;case"height":this._setHeight(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":i[s]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(i[s]);break;case"showFooter":this._enableFooter(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":n=i[s],(parseInt(i[s])<0||parseInt(i[s])>6)&&(i[s]=this.culture.calendar.firstDay,n=-1),this.model.startDay=i[s],t.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=n,l=o=!0;break;case"startLevel":this.model.startLevel=i[s],l=o=!0;break;case"headerFormat":this.model.headerFormat=i[s],l=o=!0;break;case"depthLevel":this.model.depthLevel=i[s],l=o=!0;break;case"htmlAttributes":this._addAttr(i[s]);break;case"allowEdit":this._changeEditable(i[s]);break;case"tooltipFormat":this.model.tooltipFormat=i[s],l=o=!0;break;case"allowDrillDown":this._allowQuickPick(i[s]),l=o=!0;break;case"showDisabledRange":this._setRestrictDateState(i[s]);break;case"blackoutDates":this.model.blackoutDates=i[s],this._initDisableObj(this.model.blackoutDates),l=o=!0}r&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate),this._setWaterMark(),l&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),o&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isSupport=document.createElement("input").placeholder!=n,this._checkAttribute(),this._setValues(),this._createDatePicker(),this._setRestrictDateState(this.model.showDisabledRange),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=n&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_checkAttribute:function(){for(var e,i,s=["min","max","readonly","disabled"],n=["minDate","maxDate","readOnly","enabled"],l=0;l<s.length;l++)e=this.element.attr(s[l]),i=n[l],t.isNullOrUndefined(e)||(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options[i]))&&(this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this[i](this.element,"blur",this._onFocusOut),this[i](this.element,"focus",this._onFocusIn),this[i](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(t){e(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",e.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){var t=e?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s.disable():"readOnly"==n&&"readOnly"==e?s.model.readOnly=!0:"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox()){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr(),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&e("#e-"+this._id).remove(),this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._resizeCalender(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this._createCalender(),this._setDisplayInline(this.model.displayInline),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?this.wrapper?this.wrapper.width(e):this.element.width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?this.wrapper?this.wrapper.height(e):this.element.height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var t,i;this._stopRefresh?this._stopRefresh=!1:(t=this.element.val(),i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t?this._parseDate(t,!0):this._parseDate(t),i=this._validateYearValue(i),this._setDateValue(i),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged())},_validateYearValue:function(e){if(null!=e){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>i&&e.setFullYear(this._calendarDate.getFullYear())}return e},_setFooterText:function(t){e(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(t){this.model.displayInline=t,t&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),e("body").append(this.sfCalendar),this._isOpen=!1),t?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(e(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&e(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?null:(e instanceof Date||(e=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||((t=this._checkJSONString(e))?t:null)),!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null)},_checkJSONString:function(e){if(isNaN(Date.parse(e))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e)return new Date(e);if("string"==typeof e)return this._dateFromISO(e)}},_dateFromISO:function(e){var t,i,s,n,l,o,r,a,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",u="",m="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){u=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(m="Z"),s=(c+u+m).match(this._tokens),l=[],r=0;r<s.length;r++)a=s[r],o=this._checkLiteral(s[r]),d=this._numberRegex[o?s[r].toLowerCase():a.length]||new RegExp("^\\d{1,"+a.length+"}"),(n=e.match(d))&&(e.substr(0,e.indexOf(n))>=0&&!o&&(s[r].indexOf("M")>=0?l.push(parseInt(n[0])-1):l.push(parseInt(n[0]))),e=e.slice(e.indexOf(n[0])+n[0].length));return new Date(l[0],l[1],l[2],l[3],l[4],l[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){if("string"==typeof e){var i=t.parseDate(e,this.model.dateFormat,this.model.locale);e=null!=i?i:new Date(e)}return e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=t.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox()){var i,s,n=this.element.is("input")?this.wrapper:this.element,l=this._getOffset(n),o=e(document).scrollTop()+e(window).height()-(l.top+e(n).outerHeight()),r=l.top-e(document).scrollTop(),a=this.sfCalendar.outerHeight(),d=this.sfCalendar.outerWidth(),h=l.left,c=n.outerHeight(),u=(n.height(),this._getZindexPartial()),m=a<o||a>r?l.top+c+3:l.top-a-3;i=e(document).scrollLeft()+e(window).width()-h,s=e(document).scrollLeft()+h+n.width(),(this.model.enableRTL||d>i&&d<h+n.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(h+=this.wrapper.width()-this.sfCalendar.width()),d>s&&(h=l.left),this.sfCalendar.css({left:h+"px",top:m+"px","z-index":u})}},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,i){var s=this._checkDateObject(e,i);null!=s?(this.isValidState=!0,this.model.value=new Date(s.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!t.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){(null!=this._validateValue()||!this.model.enableStrictMode)&&this.sfCalendar.find(".e-datepicker-days").is(":visible")&&this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0))},_validateValue:function(){var e;return e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e>=7&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_parseDate:function(e,i){var s=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=n&&""!=e&&1!=i&&t.format(t.parseDate(DateValue,s,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:t.parseDate(e,s,this.model.locale)},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){var t="string"==typeof e?this._parseDate(e):new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=e&&e.date?e.date:"date",t._tooltip=e&&e.tooltip?e.tooltip:"tooltip",t._icon=e&&e.iconClass?e.iconClass:"iconClass",t._custom=e&&e.cssClass?e.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return e?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,l,o,r,a,d;this.model.minDate!=n&&this.model.maxDate!=n&&((s=new Date(this.model.minDate.getTime())).setDate(1),(l=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(o=this._zeroTime(new Date)).setDate(1):o=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),o.getTime()<s.getTime()?o=s:o.getTime()>l.getTime()&&(o=l),r=this.displayedMonth,a=this.displayedYear,this.displayedMonth=o.getMonth(),this.displayedYear=o.getFullYear(),d=o,i&&(this.displayedMonth!=r||this.displayedYear!=a)&&(this._renderCalendar(this,d),this._dateValue=d,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&e("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){e("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){e("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i),this._renderCalendar(this),this._startLevel(this.model.startLevel),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),e(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?e(".e-header",this.sfCalendar).show():e(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?e(".e-footer",this.sfCalendar).show():e(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){e>=t?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){var i,s,n,l;if(this.model.readOnly||!this.model.enabled||e(t.target).hasClass("e-disable"))return!1;switch(t.preventDefault(),i=e("table",this.sfCalendar),s=this._navigateFrom(i),n=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev"),this._processNextPrevDate(n),e("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":l="month";break;case"e-dp-viewmonths":l="year";break;case"e-dp-viewyears":l="decade";break;case"e-dp-viewallyears":l="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:l,navigateFrom:s})},_processNextPrevDate:function(t){var i,n,l,o,r,a,d;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch((i=e("table",this.sfCalendar)).get(0).className){case"e-dp-viewdays":if(l=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0,this._addMonths(this._dateValue,t?-l:l),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),o=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(o.firstDay,this.model.minDate),this._nextArrowCondition(o.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if((r=this._dateValue).setFullYear(e(".e-datepicker-headertext",this.sfCalendar).text()),t){if(r.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(r.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,this._addYears(r,t?-1:1),this._renderCalendar(this,r),n=r.getFullYear(),e(".e-datepicker-headertext",this.sfCalendar).text(n),e("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide(),e(e(i).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(n,n);break;case"e-dp-viewyears":if((a=this._dateValue).setFullYear(e(i).find(".e-state-hover").text()),t){if(parseInt(e("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(e("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,e(i).find(".e-state-hover").hasClass("e-year-first")&&t||e(i).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(a.getFullYear()):e(i).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(a.getFullYear()+11):e(i).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(a.getFullYear()-11):this._dateValue.setFullYear(a.getFullYear()+(t?-10:10)),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+(d+10)),e("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide(),e(e(i).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(e(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,d+10);break;case"e-dp-viewallyears":if(t){if(parseFloat(e("td.e-allyear-first",i.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),n=parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+n),e("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide(),e(e(i).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(e(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,n)}this._layoutChanged()},_addFocus:function(t,i){var s,n,l="e-current-"+t;return"day"==t&&(l="current-month"),s=this.sfCalendar.find("tbody tr td."+l),"month"==t&&e(s).each(function(t,s){parseInt(e(s).attr("index"))!=parseInt(i)||(i=t)}),(n=s[i])||(n=s.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(n).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){var i,s,n;if(this.model.value instanceof Date){var l,o=this.sfCalendar.find("tbody tr td.e-current-"+t),r=this,a=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(e(".e-text",this.sfCalendar).text())&&e(o).each(function(t,i){parseInt(e(i).attr("index"))!=parseInt(r.model.value.getMonth())||(a=t)});break;case"year":i=this.model.value.getFullYear(),e(o).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(a=e)});break;case"allyear":s=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),n=s+1+" - "+(s+10),e(o).each(function(e,t){parseInt(t.innerHTML)!=parseInt(n)||(a=e)})}(l=o[a])&&(this.sfCalendar.find("table td").removeClass("e-active"),e(l).hasClass("e-hidedate")||e(l).addClass("e-active"))}},_setFocusByName:function(t,i){var s,n,l=this.sfCalendar.find("tbody tr td.e-current-"+t);return e(l).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(s=e)}),(n=l[s])||(n=l.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(n).addClass("e-state-hover"),this._setActiveState(t),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var i,s,n=e("table",this.sfCalendar),l=e("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(n),l){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(n.find(".e-state-hover")).getMonth()||this._getDateObj(n.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),s="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt(),this._startLevel("decade"),s="decade",this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt(),this._startLevel("century"),s="century",this._hoverAllYear=this._setFocusByName("allyear",i)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var t,i;switch(e("table",this.sfCalendar),e("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=t,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=t,i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var i,s,n=this.sfCalendar.find("tbody tr td.e-current-"+t),l=this._dateValue.getFullYear();e(n).each(function(e,t){parseInt(t.innerHTML)!=parseInt(l)||(i=e)}),(s=n[i])&&(e(s).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):e(s).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){var s,n;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),s=e(i.currentTarget)):s=i;var l,o,r=e("table",this.sfCalendar),a=e("table",this.sfCalendar).get(0).className,d=this;switch(navFrom=this._navigateFrom(r),a){case"e-dp-viewmonths":r.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(e(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate()),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget}),this._renderCalendar(this,this._dateValue),e("tbody",r).not(".e-datepicker-days,.e-week-header").hide(),e(e(r).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){d._addFocus("day",d._hoverDate||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),o="month";break;case"e-dp-viewyears":r.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),e("tbody,tr.e-week-header",r).not(".e-datepicker-months").hide(),t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),e(e(r).find(".e-datepicker-months")).fadeIn("fast",function(){d._addFocus("month",d._hoverMonth||0),d._animating=!1}),l=s.text(),e(".e-datepicker-headertext",this.sfCalendar).text(l),this._checkArrows(l,l),o="year";break;case"e-dp-viewallyears":n=s.text().split("-"),r.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),n[0]<this.model.minDate.getFullYear()?n[0]=this.model.minDate.getFullYear().toString():n[0]>this.model.maxDate.getFullYear()&&(n[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(n[0],0,1)),e("tbody,tr.e-week-header",r).not(".e-datepicker-years").hide(),e(e(r).find(".e-datepicker-years")).fadeIn("fast",function(){d._addFocus("year",d._hoverYear||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(n[0]+" - "+n[1]),this._checkArrows(n[0],n[1]),o="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.trim(n[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:o,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(t){var i,s,n,l,o=e("table",this.sfCalendar),r=e(".e-datepicker-headertext",this.sfCalendar),a=this._dateValue;switch(t){case"decade":o.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-years").hide(),e(e(o).find(".e-datepicker-years")).show(),a=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:a,i=1+(l=parseInt(a.getFullYear())-(parseInt(a.getFullYear())%10+1)),s=l+10,r.text(i+" - "+s),this._checkArrows(i,s),this._hoverYear=this._setFocusByName("year",a.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,a),o.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-allyears").hide(),e(e(o).find(".e-datepicker-allyears")).show(),n=(i=parseFloat(e("td.e-allyear-first",o.get(0)).text().split("-")[1])+1)+" - "+(s=parseFloat(e("td.e-allyear-last",o.get(0)).prev().text().split("-")[1])),r.text(n),this._checkArrows(i,s),l=parseInt(a.getFullYear())-(parseInt(a.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",l+1+" - "+(l+10));break;case"year":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),e("tbody,tr.e-week-header",o).hide(),e(e(o).find(".e-datepicker-months")).show(),i=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():a.getFullYear(),r.text(i),this._checkArrows(i,i),this._hoverMonth=a.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":e(i.find(".e-current-year,.e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),this._on(e(".e-current-month",this.sfCalendar),"click",e.proxy(this._onDepthSelectHandler,this));break;case"decade":e(i.find(".e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),e(".e-current-year",this.sfCalendar).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"century":e(i.find(".e-current-allyear")).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;e(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):(e(t.target).hasClass("e-current-year")||e(t.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML)))),this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,s){for(var n,l,o,r,a=function(e){return document.createElement(e)},d=0,h=0;h<3;h++){for(n=e(a("tr")),l=0;l<4;l++)o=e(a("td")).addClass("e-current-month e-state-default").attr({index:d}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[d++]),(s.getFullYear()<this.model.minDate.getFullYear()||s.getFullYear()>this.model.maxDate.getFullYear()||s.getFullYear()<=this.model.minDate.getFullYear()&&d<this.model.minDate.getMonth()+1||s.getFullYear()>=this.model.maxDate.getFullYear()&&d>this.model.maxDate.getMonth()+1)&&(o.addClass("e-hidedate"),o.removeClass("e-current-month")),n.append(o);t.append(n)}i.append(t),r=s.getFullYear(),this._checkArrows(r,r)},_datepickerYears:function(t,i,s){for(var n,l,o,r,a=function(e){return document.createElement(e)},d=parseInt(s)-(parseInt(s)%10+1),h=[],c=0;c<12;c++)h.push(d+c);for(n=0,l=0;l<3;l++){for(o=e(a("tr")),c=0;c<4;c++)(r=e(a("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==n?r.addClass("e-year-first e-current-year "):11==n?r.addClass("e-year-last e-current-year "):r.addClass("e-current-year e-state-default"),(h[n]<this.model.minDate.getFullYear()||h[n]>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-year")),r.html(h[n++]),o.append(r);t.append(o)}i.append(t),this._checkArrows(h[0],h[h.length])},_datepickerAllYears:function(t,i,s){for(var n,l,o,r,a=parseInt(s)-(parseInt(s)%100+10),d=[],h=this._isIE8||this._isIE9?"":"\n",c=0;c<12;c++)d.push(parseInt(a)+" -"+h+parseInt(a+9)),a+=10;for(n=0,l=0;l<3;l++){for(o=e(document.createElement("tr")),c=0;c<4;c++)(r=e(document.createElement("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==n?r.addClass("e-allyear-first e-current-allyear "):11==n?r.addClass("e-allyear-last e-current-allyear "):r.addClass("e-current-allyear e-state-default"),(parseInt(d[n].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(d[n].split("-\n")[0])>this.model.maxDate.getFullYear())&&(r.addClass("e-hidedate"),r.removeClass("e-current-allyear")),r.html(d[n++]),o.append(r);t.append(o)}i.append(t)},_renderHeader:function(i){var s,n,l,o,r,a,d=e(document.createElement("thead")),h=t.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=i.model.dayHeaderFormat)for(s=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),n=this.Date.firstDayOfWeek;n<this.Date.firstDayOfWeek+7;n++)l=n%7,o=h.names[l],r="short"==i.model.dayHeaderFormat?h.namesAbbr[l]:"long"==i.model.dayHeaderFormat?o:h.namesShort[l],a=t.buildTag("th","",{},{scope:"col",abbr:o,date:o,title:this._formatter(o,"dddd"),class:0==l||6==l?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(r),s.append(a);return d.append(s)},_renderCalendar:function(i,s){var l,o,r,a,d,h,c,u,m;i=e.extend({},t.DatePicker.prototype.defaults,i),this.Date.firstDayOfWeek=this.model.startDay,l=s||(this._calendarDate?this._calendarDate:this._zeroTime(new Date)),(o=e("table",this.sfCalendar)).empty(),o.append(this._renderHeader(i)),r=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(r,o,l.getFullYear()),r=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(r,o,l.getFullYear());var p=i.model.month==n?l.getMonth():i.model.month,g=i.model.year||l.getFullYear(),f=new Date(g,p,1,0,0,0),_=this.Date.firstDayOfWeek-f.getDay()+1;_>1&&(_-=7),a=Math.ceil((-1*_+1+this._getDaysInMonth(f))/7),this._addDays(f,_-1),d=this._zeroTime(new Date),h=this._calendarDate,r=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(r,o,l),r=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var v=0,b=!0,w=!0;v++<a;){for(c=jQuery(document.createElement("tr")),u=0;u<7;u++){var C=f.getMonth()==p,y=this._isSpecialDates(f),S=this._checkDisableRange(f),x=this._getIndex,T=e(document.createElement("td")).html(y?"<span></span>"+f.getDate():f.getDate()+"").attr({date:f.toDateString(),title:this.model.showTooltip?y&&this.model.specialDates[x][this._mapField._tooltip]?this.model.specialDates[x][this._mapField._tooltip]:this._formatter(f,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((C?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(f)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(C&&f.getTime()==d.getTime()?"today ":""));T.find("span:first-of-type").addClass(y?this.model.specialDates[x][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[x][this._mapField._icon]+" ":"e-special-day":""),T.addClass(y&&this.model.specialDates[x][this._mapField._custom]?this.model.specialDates[x][this._mapField._custom]:""),S&&this._disableDates({date:f,element:T}),h.getTime()==f.getTime()&&C&&(T.hasClass("e-hidedate")||(this.model.value?(T.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&c.addClass("e-selected-week"),"month"==this.model.highlightSection&&r.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&c.addClass("e-work-week")):T.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(T.hasClass("e-hidedate")||T.addClass("e-state-hover"),this._hoverDate=f.getDate()-1)),m=!0,(f<this.model.minDate||f>this.model.maxDate)&&(T.addClass("e-hidedate"),T.removeClass("current-month"),this.model.showOtherMonths&&T.removeClass("other-month"),m=w=!1),C&&(m&&b&&(this._tempMinDate=f,b=!1,w=!0),w&&(this._tempMaxDate=f)),this._trigger("beforeDateCreate",{date:f,value:this._formatter(f,this.model.dateFormat),element:T}),c.append(T),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0)}r.append(c)}o.append(r),this._DRPdisableFade?(e(r).css("display","block"),e(r).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?e(r).css("display","block"):e(r).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(o.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(o.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!t.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(){var e,s,n;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(e=this._checkInstanceType(this.model.blackoutDates[i]))&&(s=e.getFullYear(),n=e.getMonth(),t.isNullOrUndefined(this._disableCollection[s])&&(this._disableCollection[s]=[]),-1==jQuery.inArray(n,this._disableCollection[s])&&this._disableCollection[s].push(n))},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;(t={row:null,col:null}).col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=3,n=4;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,s,n,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,s,n,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,s,n,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,n=7,i=this._changeRowCol(t,e.keyCode,s,n,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(t,i,s,n,l,o){var r,a,d,h,c,u={parent:null,child:null};switch(l){case"day":r="tbody.e-datepicker-days tr td.current-month",u.parent=".e-datepicker-days",u.child=".current-month";break;case"month":r="tbody.e-datepicker-months tr td.e-current-month",u.parent=".e-datepicker-months",u.child=".e-current-month";break;case"year":r="tbody.e-datepicker-years tr td.e-current-year",u.parent=".e-datepicker-years",u.child=".e-current-year";break;case"yearall":r="tbody.e-datepicker-allyears tr td.e-current-allyear",u.parent=".e-datepicker-allyears",u.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(r+":first");switch(i){case 36:return this.sfCalendar.find(r+":first");case 35:return this.sfCalendar.find(r+":last");case 38:if(o&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":nth-child("+t.col+"):last");t.row-=1}if((a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"up")))return a;this._processNextPrevDate(!0),a=this.sfCalendar.find(r+":nth-child("+t.col+"):last")}return a;case 37:if(o)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(r+":last");t={row:t.row-1,col:n}}if((a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"left")))return a;this._processNextPrevDate(!0),a=this.sfCalendar.find(r+":last")}return a;case 39:if(o)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<n)t.col+=1;else{if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":first");t={row:t.row+1,col:1}}if((a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"right")))return a;this._processNextPrevDate(!1),a=this.sfCalendar.find(r+":first")}return a;case 40:if(!o){if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(r+":nth-child("+t.col+"):first");if(t.row+=1,(a=this._getCell(t,u)).length<=0){if(null!==(a=this._findVisible(t,u,"down")))return a;this._processNextPrevDate(!1),a=this.sfCalendar.find(r+":nth-child("+t.col+"):first")}return a}case 13:d=e("table",this.sfCalendar).get(0).className,h=this._getCell(t,u),c=e(h)[0],"e-dp-viewmonths"==d&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(c.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewyears"==d&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==d&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(c.innerHTML))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewdays"==d?(this._backwardNavHandler(h),this._onSetCancelDateHandler({type:null,target:h})):this._backwardNavHandler(h)}return this._getCell(t,u)},_findVisible:function(e,t,s){var n=e.col,l=e.row,o=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+l+") td:nth-child("+n+")"),nextElement.length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?n++:n--:"down"==s?l++:l--,l<=0||l>this.sfCalendar.find("tbody"+t.parent+" tr").length||(n>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+l+") td").length&&(l++,n=1),n<=0&&(l--,n=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+l+") td").length),l<=0||l>this.sfCalendar.find("tbody"+t.parent+" tr").length))return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(o))return e.col=n,e.row=l,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){var s,n;if(this._isOpen)return!1;if(s=this,this._popupOpen=!0,n=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),s._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){s.model&&!s.model.displayInline&&e(document).on("mousedown",e.proxy(s._onDocumentClick,s))}),this._updateInputVal(),this._refreshLevel(n),this._trigger("open",{prevDate:n,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(i){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var s=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&i!=n&&"click"!=i.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){s._isOpen=!1,e(document).off("mousedown",e.proxy(s._onDocumentClick,s)),s._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(e(".e-next",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this._on(e(".e-prev",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))),this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this.model.showFooter&&this._on(e(".e-footer",this.sfCalendar),"click",this._setCurrDate),this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",e.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",e.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_onFocusOut:function(t){var i,s,n;this._isFocused=!1,i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),t),this.wrapper.removeClass("e-focus"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(i),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this.element.off("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),s=this.element.val(),n={prevDate:this._prevDate,value:s},this._specificFormat()?this._prevDate!=s&&this._setDateValue(s,!0):this._setDateValue(s),this.model.value||this._clearSelected(),this._trigger("focusOut",n),this._checkErrorClass()},_onFocusIn:function(t){this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(t),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){if(this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel){var t=this._stringToObject(this.element.val());(t=this._validateYearValue(t))&&(this._compareDate(e,t)||this._refreshPopup())}},_validateOnFocusOut:function(e,i){var s,n,l=null!=this._preValue?this._calendarDate:this._preValue,o=this._formatter(l,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=l:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),s=!1,n=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(this.isValidState=!1,n=!0,this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),n&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(o),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(e){if(13===e.keyCode){var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(t),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this._checkErrorClass()}},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(s=!1,this.isValidState=!1)}return s},_triggerChangeEvent:function(e){var t,i,s=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),i={prevDate:this._prevDate,value:s,isInteraction:!!e},t=this._specificFormat()&&e!=n&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=n&&"blur"==e.type?this.model.value:this._parseDate(s),t=this._validateYearValue(t),this._validateDate(t)||(t=null),this._compareDate(this._preValue,t)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(i.value=this.element.val(),this._trigger("_change",i)):(this._preValue=this.model.value=t,i.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",s),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),i.value=s,this._trigger("_change",i),i.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",i),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown&&this._trigger("dt_drilldown",e))},_onDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datewidget").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault(),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&(e(t.target).hasClass("e-disable")||e(t.target).hasClass("e-hidedate")))return!1;t&&t.type&&t.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(t),this._triggerChangeEvent(t),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t),t&&e(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DatePicker.Locale=t.DatePicker.Locale||{},t.DatePicker.Locale.default=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}),
/*!
*  filename: ej.datetimepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},enabled:!0,value:"",minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null},dataTypes:{cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",headerFormat:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(i){var s,n,l,o,r=!1;for(s in i)switch(s){case"cssClass":this._changeSkin(i[s]);break;case"locale":this._localize(i[s]);break;case"readOnly":this._readOnly(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enableRTL":this._setRtl(i[s]);break;case"enabled":this._enabled(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"value":i[s]=this._setValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),r=!0;break;case"enableStrictMode":this.model.enableStrictMode=i[s],r=!0;break;case"minDateTime":l=this._stringToObject(i[s]),n=this._getFormat(l,this.timePicker.model.timeFormat),this._isValidDate(l)?(this.datePicker.option("minDate",l),this.timePicker.option("minTime",n),i[s]=l,this.model.minDateTime=l):i[s]=this.model[s],r=!0;break;case"maxDateTime":l=this._stringToObject(i[s]),o=this._getFormat(i[s],this.timePicker.model.timeFormat),this._isValidDate(l)?(this.datePicker.option("maxDate",l),this.timePicker.option("maxTime",o),i[s]=l,this.model.maxDateTime=l):i[s]=this.model[s],r=!0;break;case"height":this.wrapper.height(i[s]);break;case"width":this.wrapper.width(i[s]);break;case"dateTimeFormat":this.model.dateTimeFormat=i[s],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options[s]=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(i[s]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",i[s]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",i[s]);break;case"timePopupWidth":this._updateTimeHeight(),this.timePicker.option("popupWidth",i[s]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",i[s]);break;case"startLevel":this.datePicker.option("startLevel",i[s]);break;case"depthLevel":this.datePicker.option("depthLevel",i[s]);break;case"startDay":this.datePicker.option("startDay",i[s]),this.model.startDay=this.datePicker.model.startDay,i[s]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",i[s]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",i[s]);break;case"headerFormat":this.datePicker.option("headerFormat",i[s]);break;case"htmlAttributes":this._addAttr(i[s]);break;case"popupPosition":this.model.popupPosition=i[s],this._setListPosition();break;case"timeDrillDown":t.isNullOrUndefined(i[s].enabled)||(this.model.timeDrillDown.enabled=i[s].enabled,this._changeDesign()),t.isNullOrUndefined(i[s].interval)||(this.model.timeDrillDown.interval=i[s].interval,this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),t.isNullOrUndefined(i[s].showMeridian)||(this.model.timeDrillDown.showMeridian=i[s].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),t.isNullOrUndefined(i[s].showFooter)||(this.model.timeDrillDown.showFooter=i[s].showFooter,this._changeDesign())}r&&this._validateMinMax(),this._valueChange(!0),"value"==s&&(i[s]=this.model.value),this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove(),t.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),t.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup.remove()},_init:function(e){if(!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=s,this._validateMeridian(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._changeDesign(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){if(this.model.timeDrillDown.enabled){var t=this.model.timeDrillDown.showFooter?"block":"none";this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),e(".e-footer",this._sfTimeHour).css("display",t),e(".e-footer",this._sfTimeMins).css("display",t)}else this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s._enabled(!1):"readOnly"==n&&"readOnly"==e?s._readOnly(!0):"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],n)?s.element.attr(n,e):s.wrapper.attr(n,e)})},_validateMeridian:function(){var e=t.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.timeDrillDown)||t.isNullOrUndefined(this._options.timeDrillDown.showMeridian))&&(this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){var i,s,n,l;this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this.model.value=""===this.model.value?this.element[0].value:this.model.value,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),(i=!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value)?null:this.model.value instanceof Date?this.model.value:(s=t.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale))||((s=this._checkJSONString(this.model.value))?s:null))&&(this.model.value=i),(n=this.model.minDateTime=this._stringToObject(this.model.minDateTime))&&this._isValidDate(n)||(this.model.minDateTime=this.defaults.minDateTime),(l=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime))&&this._isValidDate(l)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var t=new Date(e);if(isNaN(Date.parse(t))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(t.toJSON()===this.model.value||t.toGMTString()===this.model.value||t.toISOString()===this.model.value||t.toLocaleString()===this.model.value||t.toString()===this.model.value||t.toUTCString()===this.model.value)return t;if("string"==typeof e)return this._dateFromISO(e)}},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._renderDropdown(),this._checkProperties()},_renderWrapper:function(){if(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",value:this.model.value}),this.wrapper=t.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),!this._isSupport){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1;this.datetimeIcon=t.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=t.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderDropdown:function(){var i,s,n,l,o,r=e("#"+this.element[0].id+"_popup").get(0);r&&e(r).remove(),this.popup=t.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),t.isTouchDevice()||this.popup.addClass("e-ntouch"),e("body").append(this.popup),this._renderControls(),i=t.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=t.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=t.buildTag("div.e-timecontainer").append(i,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=t.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),s=t.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),n=t.buildTag("div.e-dt-button e-dt-today",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),l=t.buildTag("div.e-dt-button e-dt-now",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),o=t.buildTag("div.e-dt-button e-dt-done",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=t.buildTag("div.e-button-container").append(n,l,o).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(s,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(n,"click",this._todayClick),this._on(l,"click",this._nowClick),this._on(o,"click",this._doneClick)},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=t.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){var s,n,l,o,r,a,d;if(t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;o=6e4*this._interval,r=this.model.timeDrillDown.showMeridian?2:1,rowCount=this.model.timeDrillDown.showMeridian?6:4;var h=this.model.timeDrillDown.showMeridian?"hh":"HH:00",c=["AM","PM"],u=0,m="";for(s=this.timePicker._createObject("12:00:00 AM"),n=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM"),i=0;i<r;i++){for(this.model.timeDrillDown.showMeridian&&(m=c[i].toLowerCase(),a=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[c[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[c[i]][0],t.buildTag("div.e-header-"+m).attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-meridiantxt-"+m).text(a).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)),table=t.buildTag("table.e-dp-viewhours","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(table),tbody=t.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{}),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(n,s,!0);)l=this._localizeTime(s,h),d=t.buildTag("td.e-hour e-state-default",l),this.model.timeDrillDown.showMeridian&&d.addClass("e-hour-"+m),this._isIE8&&d.attr("unselectable","on"),tr.append(d),++u>=rowCount&&(u=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;table.append(tbody),this.model.timeDrillDown.showMeridian&&(s=this.timePicker._createObject("12:00:00 PM"),n=this.timePicker._createObject("11:59:59 PM"))}t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),e(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",e.proxy(this._hourNavHandler,this)),this._on(e(".e-next",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-prev",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-footer",this._sfTimeHour),"click",this._todayBtn),e(".e-hours-headertext",this._sfTimeHour).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(i,s){return e.trim(t.format(this.timePicker._createObject(i),s,this.model.locale))},_renderMinsPopup:function(){var i,s,n,l,o,r,a;if(this._sfTimeMins=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),t.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),i=t.buildTag("table.e-dp-viewmins","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeMins.append(i),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),this._intervall<1)return!1;for(o=6e4*this._interval,s=this.timePicker._createObject("12:00:00 AM"),n=this.timePicker._createObject("11:59:59 PM"),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),r=0;this.timePicker._compareTime(n,s,!0);)l=this._localizeTime(s,"HH:00"),a=t.buildTag("td.e-mins e-state-default",l),this._isIE8&&a.attr("unselectable","on"),tr.append(a),++r>=4&&(r=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;i.append(tbody),e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),e(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this.model.timeDrillDown.showMeridian||e(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(i.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this)),this._on(e(".e-next",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-prev",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-footer",this._sfTimeMins),"click",this._todayBtn),e(".e-minitues-headertext",this._sfTimeMins).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(i){var s,n;if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeHour).find("td").removeClass("e-active"),e(i.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),this.model.timeDrillDown.showMeridian?(n=e(i.target).hasClass("e-hour-am")?"AM":"PM",s=e(i.target).text()+":00 "+n):s=e(i.target).text(),this._generateMins(s);var l=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),o=e.trim(t.format(this.timePicker._createObject(l),"HH:mm",this.model.locale)),r=e.trim(t.format(this.timePicker._createObject(l),"HH:00",this.model.locale));index=(this.timePicker._parse(o)-this.timePicker._parse(r))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins)},_minsNavHandler:function(i){if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),e(i.target).addClass("e-active"),this.model.timeDrillDown.showMeridian?(value=e(i.target).text()+" "+t.format(this._datetimeValue,"tt","en-US"),value=this.timePicker._localizeTime(value)):value=e(i.target).text(),this.timePicker.option("value",value),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this.model.timeDrillDown.autoClose&&this._hideResult(i),this._updateInput()},_generateMins:function(i){var s,n,l,o,r,a,d,h=e("table",this._sfTimeMins);for(h.empty(),this.model.timeDrillDown.showMeridian?e(".e-mins-header",this._sfTimeMins).show():e(".e-mins-header",this._sfTimeMins).hide(),s=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm",e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),r=0,a=6e4*this.model.timeDrillDown.interval,n=this.timePicker._createObject(i),this._datetimeValue.setHours(n.getHours()),l=this.timePicker._createObject(n).getTime()+354e4,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr);this.timePicker._compareTime(l,n,!0);)r>=4&&(r=0,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr)),o=this._localizeTime(n,s),d=t.buildTag("td.e-mins e-state-default",o),this._isIE8&&d.attr("unselectable","on"),tr.append(d),r++,n=this.timePicker._createObject(n).getTime()+a;h.append(tbody),e(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(t.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(h.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeHour)},_prevNextMinsHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeMins)},_processNextPrev:function(i,s){if(i&&s.find(".e-arrow-sans-left").hasClass("e-disable")||!i&&s.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(e("table",s).get(0).className){case"e-dp-viewhours":incVal=i?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+incVal),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":incVal=i?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+incVal),this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var n=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),l=e.trim(t.format(this.timePicker._createObject(n),"HH:mm",this.model.locale)),o=e.trim(t.format(this.timePicker._createObject(n),"HH:00",this.model.locale));index=(this.timePicker._parse(l)-this.timePicker._parse(o))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(i,s){var n;if(this.model.readOnly||!this.model.enabled)return!1;switch(i&&i.preventDefault(),i?e(i.currentTarget).get(0).className:s.find(".e-text>span").get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),n=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.datePicker=e.data("ejDatePicker"),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e,i,s=t.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(s),s.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:this.model.timePopupWidth,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.timePicker=s.data("ejTimePicker"),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0,this.timePicker.popup.css({position:"static",display:"block"}),e=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,""==this.model.value&&(this.timePicker.option("minTime",this._getFormat(e,this.timePicker.model.timeFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)))},_updateTimeHeight:function(){var e=this.datePicker.popup.height()-this.popup.find(".e-header").height();e=this.popup.hasClass("e-dt-responsive")?"98px":e,this.timePicker.option("popupHeight",e)},_bindOperations:function(){var e=this;this.datePicker.option("layoutChange",function(){e._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){e.isValidState=!1}),this.timePicker.option("outOfRange",function(){e.isValidState=!1}),this.datePicker.option("change",function(t){e._refreshTimes(t)}),this.datePicker.option("select",function(t){e._updateInput(t)}),this.datePicker.option("dt_drilldown",function(t){e.model.timeDrillDown.enabled&&(e._updateInput(t),e._switchToDrilDown(t))}),this.timePicker.option("select",function(){e._updateInput()})},_switchToDrilDown:function(){var i,s;this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour),i=new Date(this.model.value.toString()),this._datetimeValue=new Date(i.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),s=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(s)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(s){var n,l,o,r="hour"==s?this._interval:this.model.timeDrillDown.interval,a="hour"==s?this._sfTimeHour:this._sfTimeMins,d="hour"==s?"e-hide-hour e-disable":"e-hide-mins e-disable";if(a.find("tbody tr td.e-"+s).removeClass(d),a.find(".e-arrow-sans-left").removeClass("e-disable"),a.find(".e-arrow-sans-right").removeClass("e-disable"),start="hour"==s?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00"),this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==s&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(n=e.trim(t.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*r),indx="hour"==s?Math.floor(indx):Math.ceil(indx),i=0;i<indx;i++)o=a.find("tbody tr td.e-"+s)[i],e(o).addClass(d);a.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==s&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(n=e.trim(t.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(n)-this.timePicker._parse(start))/(6e4*r),indx=Math.floor(indx)+1,l=a.find("tbody tr td.e-"+s).length,i=indx;i<l;i++)o=a.find("tbody tr td.e-"+s)[i],e(o).addClass(d);a.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(t,i,s){var n,l,o=s.find("tbody tr td.e-"+t);return e(o).each(function(e,t){t.innerHTML!=i||(n=e)}),(l=o[n])||(l=o.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(l).hasClass("e-hide-"+t)||e(l).addClass("e-state-hover"),this._setActiveState(t,s),n},_setFocusByIndex:function(t,i,s){var n,l=s.find("tbody tr td.e-"+t);return(n=l[i])||(n=l.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(n).hasClass("e-hide-"+t)||e(n).addClass("e-state-hover"),this._setActiveState(t,s),i},_setActiveState:function(i,s){var n,l=s.find("tbody tr td.e-"+i),o=-1;switch(i){case"hour":this._compareDate(this.model.value,this._datetimeValue)&&(start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),a=e.trim(t.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale)),o=(this.timePicker._parse(a)-this.timePicker._parse(start))/(6e4*this._interval),o=Math.floor(o));break;case"mins":if(this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()){var r=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),a=e.trim(t.format(this.timePicker._createObject(r),"HH:mm",this.model.locale)),d=e.trim(t.format(this.timePicker._createObject(r),"HH:00",this.model.locale));o=(this.timePicker._parse(a)-this.timePicker._parse(d))/(6e4*this.model.timeDrillDown.interval),o=Math.ceil(o)}}(n=l[o])&&(s.find("table td").removeClass("e-active"),e(n).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=(new Date).setHours(0,0,0,0),i=this._getDate()||new Date,s=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),this._preVal=this._objectToString(this.model.value),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var t,i,s=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!s)return!1;this.isValidState=!0,this._compare(s,this._setEmptyTime(this.model.minDateTime))?(t=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("minTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("minTime",this._defaultMinVal()),this._compare(s,this._setEmptyTime(this.model.maxDateTime))?(i=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("maxTime",i),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("maxTime",this._defaultMaxVal()),this.timePicker._changeActiveEle()},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode()):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t,i,s,n,l,o,r,a,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",u="",m="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){u=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(m="Z"),s=(c+u+m).match(this._tokens),l=[],r=0;r<s.length;r++)a=s[r],o=this._checkLiteral(s[r]),d=this._numberRegex[o?s[r].toLowerCase():a.length]||new RegExp("^\\d{1,"+a.length+"}"),(n=e.match(d))&&(e.substr(0,e.indexOf(n))>=0&&!o&&(s[r].indexOf("M")>=0?l.push(parseInt(n[0])-1):l.push(parseInt(n[0]))),e=e.slice(e.indexOf(n[0])+n[0].length));return new Date(l[0],l[1],l[2],l[3],l[4],l[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_validateValue:function(e){var i=t.parseDate(e,this.model.dateTimeFormat);!i||i<this.model.minDateTime||i>this.model.maxDateTime?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e,t,i;if(e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,!e||!t||!i)return!1;t>i&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),e>i&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||e>i||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.element.attr("name")||this.element.attr({name:this.element[0].id}),this._checkStrictMode(),this._checkErrorClass(),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),t.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode||this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime,this.isValidState=!0):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime,this.isValidState=!0):(this.model.value="",this.element.val(""),this.isValidState=!0))},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value})},_targetBlur:function(){var e;this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult(),(e=t.parseDate(this.element.val(),this.model.dateTimeFormat))&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),null!=t.parseDate(this.element.val(),this.model.dateTimeFormat)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value})},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:if(!this.model.timeDrillDown.enabled){this._valueChange();break}}},_addFocus:function(t){t.hasClass("e-focus")||(this._removeFocus(),t.addClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).on("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).on("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).on("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).on("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).on("keydown",e.proxy(this._buttonClick,this)))},_removeFocus:function(){var t=this._getFocusedElement();t.length>0&&(t.removeClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).off("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).off("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).off("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).off("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).off("keydown",e.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();i.length>0?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeHour.find("tbody tr td.e-active").index()+1,-1!=t.row?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2)),this._sfTimeHour.find("table")[0].className,rowLength=this._sfTimeHour.find("tbody.e-timepicker-hours tr").length,colLength=this.model.timeDrillDown.showMeridian?6:4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(i)),e.ctrlKey||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_changeRowCol:function(t,i,s,n,l,o){var r,a,d,h,c={parent:null,child:null};switch(l){case"hours":r="tbody.e-timepicker-hours tr td.e-hour",c.parent=".e-timepicker-hours",c.child=".e-hour",hiddenClass=".e-hide-hour",a=this._sfTimeHour;break;case"mins":r="tbody.e-timepicker-mins tr td.e-mins",c.parent=".e-timepicker-mins",c.child=".e-mins",hiddenClass=".e-hide-mins",n=(a=this._sfTimeMins).find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length}if(t.row<=0&&t.col<=0)return a.find(r+":not(.e-disable):first");switch(i){case 36:return a.find(r+":not(.e-disable):first");case 35:return a.find(r+":not(.e-disable):last");case 38:if(o)this._forwardNavHandler(null,a);else{if(!(t.row>1))return this._processNextPrev(!0,a),a.find(r+":nth-child("+t.col+"):last");t.row-=1}if((d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"up",a)))return d;this._processNextPrev(!0,a),d=a.find(r+":nth-child("+t.col+"):last")}return d;case 37:if(o)return this._processNextPrev(!0,a),a.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrev(!0,a),a.find(r+":not(.e-disable):last");t={row:t.row-1,col:n},"mins"==l&&(t.col=n=a.find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length)}if((d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"left",a)))return d;this._processNextPrev(!0,a),d=a.find(r+":not(.e-disable):last")}return d;case 39:if(o)return this._processNextPrev(!1,a),a.find("tbody tr td.e-state-hover");if(t.col<n)t.col+=1;else{if(!(t.row<s))return this._processNextPrev(!1,a),a.find(r+":not(.e-disable):first");t={row:t.row+1,col:1}}if((d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"right",a)))return d;this._processNextPrev(!1,a),d=a.find(r+":not(.e-disable):first")}return d;case 40:if(!o){if(!(t.row<s))return this._processNextPrev(!1,a),a.find(r+":nth-child("+t.col+"):first");if(t.row+=1,(d=this._getCell(t,c,a).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"down",a)))return d;this._processNextPrev(!1,a),d=a.find(r+":nth-child("+t.col+"):first")}return d}case 13:h=this._getCell(t,c,a),e(h)[0],args={type:null,target:h},"hours"==l&&this._hourNavHandler(args),"mins"==l&&this._minsNavHandler(args)}return this._getCell(t,c,a).not(hiddenClass)},_getCell:function(t,i,s){var n,l=t.row;return this.model.timeDrillDown.showMeridian&&t.row>2&&s.hasClass("e-time-hours")&&(l-=2),n=s.find("tbody"+i.parent+" tr:nth-child("+l+") td"+i.child+":nth-child("+t.col+")"),this.model.timeDrillDown.showMeridian&&n.length>0&&s.hasClass("e-time-hours")&&(n=t.row<=2?e(n[0]):e(n[1])),n},_findVisible:function(e,t,s,n){var l=e.col,o=e.row,r=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this._getCell({row:o,col:l},t,n),nextElement.length<=0)return null;if(nextElement.hasClass("e-disable")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?l++:l--:"down"==s?o++:o--,o<=0||o>n.find("tbody"+t.parent+" tr").length||(l>n.find("tbody"+t.parent+" tr:nth-child("+o+") td").length&&(o++,l=1),l<=0&&(o--,l=n.find("tbody"+t.parent+" tr:nth-child("+o+") td").length),o<=0||o>n.find("tbody"+t.parent+" tr").length))return null}else if(nextElement.hasClass(r))return e.col=l,e.row=o,nextElement=this._getCell(e,t,n)}},_keyDownOnMinutes:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1,this._sfTimeMins.find("table")[0].className,rowLength=this._sfTimeMins.find("tbody.e-timepicker-mins tr").length,colLength=4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(i)),e.ctrlKey||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e){var i,n;this._stopRefresh?this._stopRefresh=!1:""==(i=this.element.val())?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!0):(n=e!=s&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:t.parseDate(i,this.model.dateTimeFormat,this.model.locale))?(this.model.value=n,this.isValidState=!0,this._refreshPopup(),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1)},_refreshPopup:function(){if(this.isValidState&&this.isPopupOpen){var e=this._setEmptyTime(this.model.value),t=this._setEmptyDate(this.model.value),i=this._getDate(),s=this._getTime();i&&this._compare(i,e)||this.datePicker.option("value",e),s&&this._compare(s,t)||this.timePicker.option("value",t)}},_buttonClick:function(e){if(13==e.keyCode){e.preventDefault();var t=this._getFocusedElement();t.hasClass("e-dt-today")?this._todayClick():t.hasClass("e-dt-now")?this._nowClick():t.hasClass("e-dt-done")&&this._doneClick()}},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){var e;if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var i=this.model.minDateTime,s=this.model.maxDateTime,n=this.datePicker.model.value,l=new Date;n=t.isNullOrUndefined(n)?new Date:n,(e=new Date(n.getFullYear(),n.getMonth(),n.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()))<i?this.timePicker.option("value",this.timePicker._localizeTime(i)):e>s&&this.timePicker.option("value",this.timePicker._localizeTime(s)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||t.isTouchDevice()||this.element.focus(),this._showhidePopup(),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var t,i,s,n,l=this.timePicker.ul.find("li");l.hasClass("e-hover")||(i=t=this.timePicker._setEmptyDate(new Date),this.timePicker.minTime&&!this._compareTime(this._createObject(t),this.timePicker.minTime,!0)&&(i=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(t),!0)&&(i=this.timePicker.maxTime),s=l.first().html(),n=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this.timePicker.model.interval),n=Math.round(n),activeItem=n==l.length?n:n+1,(activeItem<0||activeItem>l.length||isNaN(activeItem))&&(activeItem=1),e(this.timePicker.ul.find("li")[activeItem-1]).addClass("e-hover"),this._calcScrollTop())},_calcScrollTop:function(){this.timePicker.ul.outerHeight();var e,t=this.timePicker.ul.find("li").outerHeight();e=t*this.timePicker.ul.find("li.e-hover").index()-(this.timePicker.popupList.outerHeight()-t)/2,this.timePicker.scrollerObj.setModel({scrollTop:e})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.isPopupOpen||!this.model.enabled||this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this._setListPosition(),this._checkForResponsive();var i=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){i._on(e(document),"mousedown",i._OnDocumentClick),i.model.timeDrillDown.enabled&&i._addFocus(i._dateContainer.find(".e-datepicker")),i.timePicker.model.value||i._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(e(window),"resize",this._OnWindowResize),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(i){var s=this;if(!this.isPopupOpen||this._trigger("beforeClose",{element:this.popup}))return!1;this.isPopupOpen=!1,this._removeFocus(),this._popClose&&i&&"click"!=i.type?this.isPopupOpen=!0:(this.popup.slideUp(this.model.enableAnimation?100:0,function(){s.model&&(s.model.timeDrillDown.enabled&&(s._sfTimeHour.hide(),s._sfTimeMins.hide(),s._dateContainer.show()),t.isNullOrUndefined(s.model.value)||(s._datetimeValue=new Date(s.model.value.toString())))}),this._raiseEvent("close"),this._off(e(document),"mousedown",this._OnDocumentClick),this._off(e(window),"resize",this._OnWindowResize),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_setListPosition:function(){var i,s,n=this.wrapper,l=this._getOffset(n),o=e(document).scrollTop()+e(window).height()-(l.top+e(n).outerHeight()),r=l.top-e(document).scrollTop(),a=this.popup.outerHeight(),d=this.popup.outerWidth(),h=l.left,c=n.outerHeight(),u=(c-n.height())/2,m=this._getZindexPartial();this.model.popupPosition,s=this.model.popupPosition==t.PopupPosition.Bottom?(a<o||a>r?l.top+c+3:l.top-a-3)-u:(a>r?l.top+c+3:l.top-a-3)-u,i=e(document).scrollLeft()+e(window).width()-h,(this.model.enableRTL||d>i&&d<h+n.outerWidth())&&(h-=this.popup.outerWidth()-n.outerWidth()),this.popup.css({left:h+"px",top:s+"px","z-index":m})},_getOffset:function(e){return t.util.getOffset(e)},_OnDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datetime-wrap").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup))&&(t.preventDefault(),e(t.target).parents(".e-datepicker").length>0?this._addFocus(e(t.target).parents(".e-datepicker")):e(t.target).parents(".e-timecontainer").length>0?this._addFocus(e(t.target).parents(".e-timecontainer")):e(t.target).hasClass("e-dt-button")?this._addFocus(e(t.target)):e(t.target).parents(".e-time-hours").length>0?this._addFocus(e(t.target).parents(".e-time-hours")):e(t.target).parents(".e-time-minitues").length>0?this._addFocus(e(t.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(i){var s;+t.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat)==+t.parseDate(this.element.val(),this.model.dateTimeFormat)?this._prevDateTimeVal!=this.element.val()&&(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState},this._prevDateTimeVal=this.element.val(),this._trigger("_change",s)):(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!i,isValidState:this.isValidState},this._trigger("_change",s),s.value=""==e.trim(this.element.val())?null:this.element.val(),this._trigger("change",s),this._prevDateTimeVal=this.element.val())},_raiseEvent:function(e){return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:this._preVal,value:this.element.val()})},_getDateTimeFormat:function(){var e=t.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){var t=new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,i){if(e instanceof Date){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)}return e},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},_getDateObj:function(e,i){var s,n;if("string"!=typeof e)return e;if(s=this._checkFormat(i),null!=(n=t.parseDate(e,s,this.model.locale)))return n;if(""==e||null==e)return null;var l,o=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/.exec(e),r=new Date;return o&&(r=new Date,l=+o[2],r.setUTCFullYear(o[1],l-1,o[3]),r.setUTCHours(o[4],o[5],o[6]),l!=r.getUTCMonth()+1&&r.setTime()),this._isValidDate(r)?r:void 0},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.datePicker.option(e,t),this.timePicker.option(e,t)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(s){var n,l;if(this.model.locale=s,this.model.dateTimeFormat=this.model.timeDisplayFormat="",n=["AM","PM"],this._getDateTimeFormat(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",s),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(i=0;i<2;i++)l=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[n[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[n[i]][0],e("span.e-hours-meridiantxt-"+n[i].toLowerCase(),this._sfTimeHour).text(l)},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){this.model.readOnly=e,e?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup.removeClass("e-corner")),this.datePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){this.model.showPopupButton=e,e?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){if(e(window).outerWidth()>200&&e(window).outerWidth()<=500)this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle());else if(this.popup.hasClass("e-dt-responsive")){this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth);var t=this.datePicker.popup.height()-this.popup.find(".e-header").height();this.timePicker.option("popupHeight",t),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()}},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this._hideResult(),this._change("enabled",!1),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput),this.popup.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DateTimePicker.Locale=t.DateTimePicker.Locale||{},t.DateTimePicker.Locale.default=t.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},t.PopupPosition={Bottom:"bottom",Top:"top"}}),
/*!
*  filename: ej.editor.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(e){var i=!1;for(var s in e)switch(s){case"value":t.isNullOrUndefined(e.minValue)&&t.isNullOrUndefined(e.maxValue)?(this._setValue(e[s],!0),e[s]=this.model.value):(this.model.value=this._checkNumValue(e[s]),this._localizedFormat(),this._raiseChangeEvent(!0),i=!0);break;case"enableRTL":this._enableRTL(e[s]);break;case"width":this._setWidth(e[s]);break;case"height":this._setHeight(e[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(e[s]))return;this.model.minValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"maxValue":if(isNaN(e[s]))return;this.model.maxValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"incrementStep":if(isNaN(e[s]))return;this.model.incrementStep=parseFloat(e[s].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=e[s];break;case"showSpinButton":this._showSpin(e[s]);break;case"showRoundedCorner":this._roundedCorner(e[s]);break;case"locale":this.model.decimalPlaces=t.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals||-1===this._options.decimalPlaces?-1:this.model.decimalPlaces,this._setLocalize(e[s]),this._options.decimalPlaces=this.model.decimalPlaces,e[s]=this.model.locale;break;case"decimalPlaces":this._setDecimal(e[s]),t.isNullOrUndefined(this._options)&&(this._options={}),this._options.decimalPlaces=e[s];break;case"cssClass":this._setSkin(e[s]);break;case"readOnly":this._setReadOnly(e[s]);break;case"enabled":e[s]?this.enable():this.disable();break;case"watermarkText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.watermarkText=this.model.watermarkText=e[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._changeWatermark(e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"groupSeparator":this._checkSeparator(e[s]),e[s]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":this.model[s]=e[s],this._options[s]=e[s],this._initCustomValue(),e[s]=this.model[s],this._setValue(this.model.value,!0)}i&&(this._validateMinMaxValue(!0,!0),e.value=this.model.value,e.maxValue=this.model.maxValue,e.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this.element.attr({"aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value})),this._checkSeparator(this.model.groupSeparator),this.element.val(this._removeSeparator(this.model.value)),this._updateSeparator(),this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove()),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.val("").removeClass("e-input e-disable").empty(),this.element.removeAttr("disabled aria-disabled aria-valuemin aria-valuemax aria-valuenow aria-live"),this._cloneElement.attr("role")||this.element.removeAttr("role"),this.element.css("display","block")},_init:function(e){if(this._cloneElement=this.element.clone(),this._options=t.isNullOrUndefined(e)?{}:e,!this.element.is("input")||!this.element.is("input[type=text]")&&this.element.attr("type"))return this._destroy(),!1;this._isWatermark="placeholder"in document.createElement("input"),this.model.locale="en"==t.preferredCulture(this.model.locale).name?"en-US":t.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._updateSeparator(),e&&e.value!=i&&this._trigger("_change",{value:this.model.value})},_checkAttribute:function(){for(var e,i,s=["min","max","step","readonly","disabled","placeholder"],n=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],l=0;l<s.length;l++)e=this.element.attr(s[l]),i=n[l],t.isNullOrUndefined(e)||t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options[i])||("watermarkText"==i?this._options[i]=e:this.model[i]="disabled"!=i&&"readOnly"!=i?t.parseFloat(e,this.model.locale):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(i){var s=this;e.map(i,function(e,i){var n=i.toLowerCase();"class"==n?s.wrapper.addClass(e):"accesskey"==n?s._hiddenInput.attr(i,e):"disabled"==n&&"disabled"==e?s.disable():"readonly"==n&&"readOnly"==e?s._setReadOnly(!0):"tabindex"==n?(s._hiddenInput.attr(i,e),s.element.attr(i,e)):"style"==n||"id"==n?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_setValues:function(){this._id=this.element[0].id,this._textBox=this._hiddenInput[0],this._error=!1,this._timeout=null,this.isValidState=!0,this._allowkeyboard=!0,this._validateOnType=!1,this._focused=!1,this._startValue=0,"ej.CurrencyTextbox"===this.sfType&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0),(t.isNullOrUndefined(this.model.decimalPlaces)||this.model.decimalPlaces<0)&&(this.model.decimalPlaces="ej.CurrencyTextbox"===this.sfType?t.preferredCulture(this.model.locale).numberFormat.currency.decimals:t.preferredCulture(this.model.locale).numberFormat.decimals),this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces)),this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._localizedFormat(),this._validateMinMaxValue(!0),this._updateSymbol(this.model.locale),value=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,n,l,o=this.model.validationRules;for(s in this.element.rules("add",o),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},o)if(n=null,!t.isNullOrUndefined(o[s])){if(t.isNullOrUndefined(o.messages&&o.messages[s]))for(l in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==l&&(n=this.model.validationMessage[s]);else n=o.messages[s];i.settings.messages[name][s]=null!=n?n:e.validator.messages[s]}},_renderControl:function(){this.wrapper=t.buildTag("span.e-widget e-pinch"),this.innerWrap=t.buildTag("span.e-in-wrap e-box "),this.wrapper.attr("style",this.element.attr("style")),"ej.NumericTextbox"===this.sfType?this.wrapper.addClass("e-numeric"):"ej.PercentageTextbox"===this.sfType?this.wrapper.addClass("e-percent"):"ej.CurrencyTextbox"===this.sfType&&this.wrapper.addClass("e-currency"),this.wrapper.append(this.innerWrap).insertAfter(this.element),this.innerWrap.append(this.element),this._hiddenInput=t.buildTag("input","",{},{type:"text"}).insertBefore(this.element),this._hiddenInput.attr("data-role","none"),this._hiddenInput[0].tabIndex=this.element[0].tabIndex,this._hiddenInput.attr("accesskey",this.element[0].accessKey),this.element[0].accessKey="",this._hiddenInput.css("display","block"),this.element.css("display","none"),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel)),this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null==this.element.attr("name")&&this.element.attr("name",this.model.name),this.element.addClass("e-input"),this.model.value=t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value?this._checkNumValue(this.element[0].value):this._checkNumValue(this.model.value),this._hiddenInput.attr({value:this.model.value}).addClass("e-input"),this.element.attr({role:"spinbutton","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value,"aria-live":"assertive",value:this.model.value});var i=e('<span class="e-select"><span class="e-spin e-spin-up " role="button" "aria-label"="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" "aria-label"="Decrease Value" unselectable="on" /></span>');i.find(".e-spin-up").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"})),i.find(".e-spin-down").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"})),this.innerWrap.append(i),this.spin=this.wrapper.find(".e-select"),this.spinUp=this.wrapper.find(".e-spin-up"),this.spinDown=this.wrapper.find(".e-spin-down"),this._setWidth(this.model.width),this._setHeight(this.model.height),""!=this.model.cssClass&&this._setSkin(this.model.cssClass),this._showSpin(this.model.showSpinButton),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._enableRTL(this.model.enableRTL),this.model.readOnly&&this._setReadOnly(this.model.readOnly),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value,null===this.model.value?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1),this._checkErrorClass(),this._setWaterMark()},_showSpin:function(e){e?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(e){e&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(e){e?this.spin?this.wrapper.addClass("e-rtl"):this.element.addClass("e-rtl"):this.spin?this.wrapper.removeClass("e-rtl"):this.element.removeClass("e-rtl")},_setWidth:function(e){""!=e?this.wrapper.width(e):this.model.width=this.wrapper.outerWidth()},_setHeight:function(e){""!=e?this.wrapper.height(e):this.model.height=this.wrapper.outerHeight()},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setValue:function(e,t){this._isWatermark||this._hiddenSpan.css("display","none"),this.model.value=this._checkNumValue(e),this._validateMinMaxValue(!1),this._checkErrorClass(),this._localizedFormat(),this._raiseChangeEvent(t),this._setWaterMark()},_setLocalize:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];this.model.locale="en"==t.preferredCulture(e).name?"en-US":t.preferredCulture(e).name,this.model.groupSeparator=t.isNullOrUndefined(this._options.groupSeparator)&&i===this.model.groupSeparator?t.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._updateSymbol(this.model.locale),this._localizedFormat(),this._changeWatermark(this.model.watermarkText),value=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(e){this._percentSymbol=t.preferredCulture(e).numberFormat.percent.symbol,this._currencySymbol=t.preferredCulture(e).numberFormat.currency.symbol},_setDecimal:function(e){this.model.decimalPlaces=e,this._localizedFormat()},_validateMinMaxValue:function(e,i){var s,n=!1;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue),!t.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,n=!0):!t.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,n=!0):this.isValidState=!0,this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue),n&&e&&(s=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(s),s=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(s),this._localizedFormat(),this._raiseChangeEvent(i))},_convertToExponetial:function(e){var i,s,n,l="",o=e<0;for(e=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat,e=e.replace(".",s["."]),unformattedValue=e,null,"ej.NumericTextbox"===this.sfType?(i=o?s.pattern[0]:"n",e=o?e.replace("-",""):e,symbol=""):"ej.PercentageTextbox"===this.sfType?(i=o?s.percent.pattern[0]:s.percent.pattern[1],e=o?e.replace("-",""):e,symbol=s.percent.symbol):"ej.CurrencyTextbox"===this.sfType&&(i=o?s.currency.pattern[0]:s.currency.pattern[1],e=o?e.replace("-",""):e,symbol=s.currency.symbol),idx=0,n=i.length;idx<n;idx++)ch=i.charAt(idx),l+="n"===ch?e:"$"===ch||"%"===ch?symbol:ch;return{formattedValue:l,unformattedValue:unformattedValue}},_localizedFormat:function(){if(this.culture=t.preferredCulture(this.model.locale),t.isNullOrUndefined(this.model.value))this._textBox.value="";else if(-1==this.model.value.toString().indexOf("e"))this._textBox.value=this._removeSeparator(this.model.value),this._focused||""==this._textBox.value||(this._textBox.value=this._formatValue(this.model.value,"n",!0),"ej.PercentageTextbox"===this.sfType?this._appendPercentSymbol(this._textBox.value):"ej.CurrencyTextbox"===this.sfType&&this._appendCurrencySymbol(this._textBox.value));else{var e=this._convertToExponetial(this.model.value);this._textBox.value=e.unformattedValue,this._focused||""==this._textBox.value||(this._textBox.value=e.formattedValue)}},_checkNumValue:function(e){return"string"==typeof e&&(e=this._changeSeparator?this._replaceSeparator(e,this.model.groupSeparator,t.preferredCulture(this.model.locale).numberFormat[","]):e),"string"!=typeof e||isNaN(this._parseValue(e))?"number"!=typeof e||isNaN(e)?null:e:(e=this._parseValue(e),parseFloat(e))},_setReadOnly:function(e){this.model.readOnly=e,e?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){null!=this._localizedLabels.watermarkText&&""===this._textBox.value&&""===e.trim(this._hiddenInput.val())&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",e),this.element.attr("placeholder",e)):this._hiddenSpan.text(e)},_setSelectionRange:function(e,t){function i(i){i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}var s,n=this._textBox;try{n.setSelectionRange?n.setSelectionRange(e,t):n.createTextRange&&i(n.createTextRange())}catch(e){s=this,window.setTimeout(function(){document.body.focus(),s._textBox.select(),i(document.selection.createRange())},1)}},_getSelection:function(e){var t=null;return document.selection?""===(t=document.selection.createRange()).text?t.text:this._removeFormats(t.text):null==e?this.model.value:this._removeFormats(e.substring(this._textBox.selectionStart,this._textBox.selectionEnd))},_caretPosition:function(){var e,t=this._textBox,i=0;return document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),i=e.text.length):(t.selectionStart||"0"==t.selectionStart)&&(i=t.selectionEnd),i},_appendPercentSymbol:function(e){this._percentSymbol&&(e=e.replace(this._percentSymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e)/100,"p",!0)),this._percentSymbol=t.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(e){this._currencySymbol&&(e=e.replace(this._currencySymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e),"c",!0)),this._currencySymbol=t.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];return null!=e?"."==i?e.toString().replace(/["."]/g,""):e.toString().match(new RegExp(i,"g"))?e.toString().replace(new RegExp(i,"g"),""):e:null},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0,this.element[0].disabled=!1,this.element.prop("disabled",!1),this._hiddenInput.prop("disabled",!1),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable"),this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1,this.element[0].disabled=!0,this.element.attr("disabled","disabled"),this._hiddenInput.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable"),this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){this._on(this._hiddenInput,"focus",this._focusIn),this._on(this.element,"blur",this._focusOut),this._on(this.element,"keydown",this._keyDown),this._on(this.element,"keypress",this._keyPress),this._on(this.element,"mousewheel",this._mouseWheel),this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(e){this[e](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick),this[e](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var e=!1,i=t.browserInfo();return"msie"==i.name&&"8.0"==i.version&&(e=!0),e},_spinUpClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active"),i=this,"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("increment")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_spinDownClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("decrement")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_mouseUpClick:function(e){e.stopPropagation(),clearTimeout(this._timeout),this._off(this.spinUp,"mouseleave",this._mouseUpClick),this._off(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.removeClass("e-active"),this.spinUp.removeClass("e-active")},_mouseWheel:function(e){if(e.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly){var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._updateInputField("increment"):t<0&&this._updateInputField("decrement"),this._cancelEvent(e)}},_numberValue:function(){var e=this._textBox.value;return"ej.NumericTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),("ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType)&&(e=this._formatValue(this.model.value,"n",!0)),"string"!=typeof e||isNaN(this._parseValue(e))?"":e},_formatValue:function(e,i,s){s&&this._updateCultureInfo();e=t.format(e,i+this.model.decimalPlaces,this.model.locale);return s&&this._restCultureInfo(),e},_parseValue:function(e){this._updateCultureInfo();e=t.parseFloat(e,this.model.locale);return this._restCultureInfo(),e},_initCustomValue:function(){var e,i="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";switch(i){case"percent":case"currency":e=this.culture.numberFormat[i],t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=e.pattern[1]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0]);break;case"numeric":e=this.culture.numberFormat,t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0])}},_updateCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t],this._oldNegativePattern=e.pattern[0],this._oldGroupSize=e.groupSizes[0],e.pattern[0]=this.model.negativePattern,e.groupSizes[0]=this.model.groupSize,"numeric"!=t&&(this._oldPositivePattern=e.pattern[1],e.pattern[1]=this.model.positivePattern)},_restCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";(e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t]).pattern[0]=this._oldNegativePattern,e.groupSizes[0]=this._oldGroupSize,"numeric"!=t&&(e.pattern[1]=this._oldPositivePattern)},_toggleTextbox:function(e){this._hiddenInput.toggle(e),this.element.toggle(!e)},_focusIn:function(){if(!this.model.readOnly){if(this._focused=!0,t.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),!this._error){if(""!=this._textBox.value){var e=this._formatValue(this._textBox.value,"n",!0);this._textBox.value=e,this._hiddenInput.val(e)}this._setSelectionRange(0,this._textBox.value.length)}this._trigger("focusIn",{value:this.model.value})}},_focusOut:function(){var e;this._focused=!1,this.wrapper.removeClass("e-focus"),this._error||(""!=this._textBox.value?((e=t.parseFloat(this._textBox.value,this.model.locale))<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!0):e>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!0)),this.model.value=t.parseFloat(this._textBox.value,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()):(e=""==this._textBox.value?null:this._textBox.value,this.model.value=e,this._hiddenInput.val(e),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]),null===this.model.value||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),e=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(e),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value})),this._checkErrorClass()},_cancelEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault(),!1},_updateInputField:function(i){var s,n,l;this.isValidState=!0,this._focused||e(this._hiddenInput[0]).focus(),s=this.model.incrementStep,this.model.value,""===this._textBox.value?(this._textBox.value=this._formatValue(this._startValue,"n",!0),s=0):this._textBox.value.indexOf(" ")>=0&&(this._textBox.value=this._textBox.value.replace(" ","")),"ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType?(l=n=this._textBox.value,n.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)>-1&&(l=n.substring(0,n.length-1)),this.model.value=this._parseValue(l)):"ej.NumericTextbox"==this.sfType&&(this.model.value=t.parseFloat(this._textBox.value,this.model.locale)),isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue),this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&((l="increment"==i?this.model.value+s:this.model.value-s)>=this.model.minValue&&l<=this.model.maxValue&&this._setValue(l)),this._checkErrorClass()},_validateDecimal:function(e){var i=String.fromCharCode(e.keyCode);return i=188==e.keyCode?",":190==e.keyCode?".":110==e.keyCode?t.preferredCulture(this.model.locale).numberFormat["."]:i,t.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==i.charCodeAt(0)},_allowKeyCodes:function(e){for(var t=[38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67],i=0;i<t.length;i++)if(e.keyCode==t[i]||this._validateDecimal(e)&&0!=this.model.decimalPlaces)return!0;return!1},_raiseChangeEvent:function(e){var i,s=this.model.value;this._checkNumValue(this._preVal)!==this._checkNumValue(s)&&(this._preVal=s,this.model.value=this._checkNumValue(this._formatValue(this._preVal,"n",!1)),this._updateHiddenField(),i=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(i),this.element.attr("aria-valuenow",i),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!e}),this._trigger("change",{value:this.model.value,isInteraction:!e}))},_updateHiddenField:function(){var e=this._textBox;this._textBox=this._hiddenInput[0],this._localizedFormat(),this._textBox=e},_removeSeparator:function(e){var i,s;if(!t.isNullOrUndefined(e))return i=(e=this._checkNumValue(this._formatValue(e,"n",!1))).toString(),s=t.preferredCulture(this.model.locale).numberFormat,i.replace(".",s["."])},_updateSeparator:function(){var e;this._changeSeparator&&this.model.value&&("ej.NumericTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value/100,"p",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"c",!0)),this._hiddenInput.val(this._replaceSeparator(e,t.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator)))},_replaceSeparator:function(e,i,s){var n,l,o=""===i?new RegExp("\\s","g"):new RegExp("\\"+i,"g");return this.model.groupSeparator==t.preferredCulture(this.model.locale).numberFormat["."]?(n=this.model.decimalPlaces,l=e.length-n-1,e.substring(0,l).replace(o,s)+e.substring(l,e.length)):e.replace(o,s)},_checkSeparator:function(e){this.model.groupSeparator=null!=e?this._validateSeparator(e):t.preferredCulture(this.model.locale).numberFormat[","],this._changeSeparator=t.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator,this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(e){var i=e.toString(),s=new RegExp("[a-zA-Z0-9]");return i=i.length>1?i[0]:i,s.test(i)?null!=this._prevSeparator?this._prevSeparator:t.preferredCulture(this.model.locale).numberFormat[","]:i},_keyPress:function(e){var i,s;if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&8!==e.keyCode&&13!==e.keyCode){return cursor=this._caretPosition(),beforeCursor=this._textBox.value.toString().substring(0,cursor),afterCursor=this._textBox.value.toString().substring(cursor),numberFormat=t.preferredCulture(this.model.locale).numberFormat,i=String.fromCharCode(e.which),value=beforeCursor+i+afterCursor,s="."===(s=numberFormat["."])?"\\"+s:s,!!(0===this.model.decimalPlaces?/^(-)?(\d*)$/:new RegExp("^(-)?(((\\d+("+s+"\\d*)?)|("+s+"\\d*)))?$")).test(value)&&void 0}},_validateDecimalOnType:function(e){var i,s,n,l,o,r;return i=this._caretPosition(),this._textBox.value.toString().substring(0,i),this._textBox.value.toString().substring(i),n=this._getSelection(this._textBox.value),o=t.preferredCulture(this.model.locale).numberFormat["."],l=t.isNullOrUndefined(this.model.value)?"":this.model.value.toString(),0!=this.model.decimalPlaces?(r=this._textBox.value.split(o)[1],s=l.indexOf(o)>0&&l.substring(l.indexOf(o)+1,l.length).length>this.model.decimalPlaces||!!(0==n.length&&i>this._textBox.value.indexOf(o)&&r&&r.length>=this.model.decimalPlaces)):s=!1,s?(this._keypressFlag=!1,this._cancelEvent(e),!1):void 0},_keyDown:function(s){var n,l,o,r,a,d,h,c;if(!this.model.readOnly)if(this._CurrentCultureInfo=JSON.parse(JSON.stringify(t.preferredCulture())),s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||this._allowKeyCodes(s)){if(s.shiftKey&&(35==s.keyCode||36==s.keyCode||37==s.keyCode||39==s.keyCode||46==s.keyCode||127==s.keyCode)||s.ctrlKey&&(86==s.keyCode||118==s.keyCode||67==s.keyCode||88==s.keyCode))return!0;if(1==s.ctrlKey&&9!=s.keyCode&&17!=s.keyCode&&86!=s.keyCode&&67!=s.keyCode||67==s.keyCode||86==s.keyCode||88==s.keyCode)return this._keypressFlag=!1,this._cancelEvent(s),!1;if((s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||110==s.keyCode)&&(n=this._caretPosition(),this._textBox.value.toString().substring(0,n),this._textBox.value.toString().substring(n),o=this._getSelection(this._textBox.value),s.keyCode>=96&&s.keyCode<=105&&(s.keyCode-=48),this.model.validateOnType&&this._validateDecimalOnType(s),this._validateOnType)){var u=t.preferredCulture(this.model.locale).numberFormat["."],m=this.model.value.toString(),p=m.indexOf(u),g=this.model.value,f=this.model.minValue.toFixed(this.model.decimalPlaces),_=this.model.maxValue.toFixed(this.model.decimalPlaces),v=!1;if((f.toString().indexOf("e")>0||_.toString().indexOf("e")>0)&&(v=!0),v)0!=this.model.decimalPlaces?(r=this._textBox.value.split(".")[1],l=(m.indexOf(u)>0||Number(m)<Number(f)||Number(m)>Number(_))&&m.substring(m.indexOf(u)+1,m.length).length>this.model.decimalPlaces||!!(0==o.length&&n>this._textBox.value.indexOf(u)&&r&&r.length>=this.model.decimalPlaces)):l=!1;else if("."!=u&&(m=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(f=this.model.minValue.toString().replace(/["."]/g,u)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(_=this.model.maxValue.toString().replace(/["."]/g,u))),d=f.toString().indexOf(u)>0?Number(f.toString().substring(0,f.toString().indexOf(u))):this.model.minValue,h=_.toString().indexOf(u)>0?Number(_.toString().toString().substring(0,_.toString().indexOf(u))):this.model.maxValue,p>0){g=Number(m.substring(m.indexOf(u)+1,m.toString().length)),d=f.toString().indexOf(u)>0?Number(f.toString().substring(f.toString().indexOf(u)+1,f.toString().length)):0,h=_.toString().indexOf(u)>0?Number(_.toString().substring(_.toString().indexOf(u)+1,_.toString().length)):0;var b=Number(m.substring(0,m.indexOf(u))),w=Number(f.toString().substring(0,f.toString().indexOf(u))),C=Number(_.toString().substring(0,_.toString().indexOf(u)));l=!this._validateValue(g,d,h,!0,b,w,C)}else l=!this._validateValue(g,d,h,!1);if(l)return this._keypressFlag=!1,this._cancelEvent(s),!1}if(38==s.keyCode&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(s)),40==s.keyCode&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(s)),8==s.keyCode&&(n=this._caretPosition(),this._textBox.value.substring(0,n),this._textBox.value.substring(n),o=this._getSelection(this._textBox.value)),(46==s.keyCode||127==s.keyCode)&&(n=this._caretPosition(),this._textBox.value.substring(0,n),this._textBox.value.substring(n),o=this._getSelection(this._textBox.value)),this._validateDecimal(s)&&0!=this.model.decimalPlaces&&46!=s.keyCode){if(a=t.preferredCulture(this.model.locale).numberFormat["."],(c=this._textBox.value.split(a))[1]==i){var y=this._caretPosition(),S=c[0].substring(0,y),x=c[0].substring(y);if((this.model.minValue.toString().indexOf("e")>0||this.model.maxValue.toString().indexOf("e")>0)&&(v=!0),x.length>this.model.decimalPlaces&&1==this.model.validateOnType)return this._keypressFlag=!1,this._cancelEvent(s),!1;if(this._validateOnType&&!v){if(this.model.minValue.toString().match(new RegExp(".","g"))&&(d=this.model.minValue.toString().replace(/["."]/g,a)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(h=this.model.maxValue.toString().replace(/["."]/g,a)),d=d.indexOf(a)>0?Number(d.substring(0,d.indexOf(a))):Number(d),h=h.indexOf(a)>0?Number(h.substring(0,h.indexOf(a))):Number(h),!this._validateValue(this.model.value,d,h,"DecimalKeyPressed"))return this._keypressFlag=!1,this._cancelEvent(s),!1;this._textBox.value=S+a+x}else this._textBox.value=S+a+x;this._setSelectionRange(y+1,y+1)}this._cancelEvent(s)}else(190==s.keyCode||110==s.keyCode)&&this._cancelEvent(s);(109==s.keyCode||189==s.keyCode||173==s.keyCode)&&(0!=this._caretPosition()&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||this.model.minValue>=0&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&""===this._getSelection(this._textBox.value)?this._cancelEvent(s):this._getSelection()==this.model.value&&(this.model.value=null)),13==s.keyCode&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(27!=s.keyCode&&!s.ctrlKey||s.ctrlKey&&90==s.keyCode&&""===e.trim(this._textBox.value))&&(this._keypressFlag=!1,this._cancelEvent(s))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.NumericTextbox.Locale=t.NumericTextbox.Locale||{},t.NumericTextbox.Locale.default=t.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.PercentageTextbox.Locale=t.PercentageTextbox.Locale||{},t.PercentageTextbox.Locale.default=t.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.CurrencyTextbox.Locale=t.CurrencyTextbox.Locale||{},t.CurrencyTextbox.Locale.default=t.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.toolbar.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.tooltip.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,disabledItemIndices:[],enabledItemIndices:[],enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,query:null,fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group"},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5}},isBalloon:!1},cssClass:"",targetID:null,create:null,click:null,itemHover:null,itemLeave:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",disabledItemIndices:"data",enabledItemIndices:"data",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data",targetID:"string"},hide:function(){if(!this.model.enabled&&"none"==this.element.css("display"))return!1;this.element.css("display","none"),this.model.hide=!0},show:function(){if(!this.model.enabled&&"none"!=this.element.css("display"))return!1;this.element.css("display","block"),this.model.hide=!1},_init:function(){null!=this.model.targetID&&this.element.html(e("#"+this.model.targetID).find("ul,ol")),this._cloneElement=e(this.element).clone(),this._localDataSource=null,null!=this.model.dataSource&&this._generateTemplate(),this.model.dataSource instanceof t.DataManager||this._initialize(),this._renderTooltip(this.model.tooltipSettings)},_setModel:function(t){for(var i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this.model.width=t[i],this._setWidth(),this._bindUnbindWidth();break;case"enabled":this._controlStatus(t[i]);break;case"disabledItemIndices":this._disableItemByIndex(t[i]),t[i]=this.model.disabledItemIndices;break;case"enabledItemIndices":this._enableItemByIndex(t[i]);break;case"isResponsive":this.model.isResponsive=t[i],this.model.isResponsive?(this._responsiveLayout(),this._renderTooltip(this.model.tooltipSettings)):this._removeResponsive();break;case"hide":this._controlVisibleOptions(t[i]);break;case"orientation":this._setOrientation(t[i]),this.model.orientation=t[i],this._wireResizing();break;case"tooltipSettings":this.model.tooltipSettings=e.extend(!0,this.model.tooltipSettings,t[i]),this._renderTooltip(this.model.tooltipSettings);break;case"enableRTL":this._enableRTL(t[i]);break;case"showRoundedCorner":this._roundedCorner(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableSeparator":this.model.enableSeparator=t[i],this._renderToolbarSeparator();break;case"fields":e.extend(this.model.fields,t[i]);break;case"query":this.model.query=t[i];break;case"dataSource":for(optio in t)"fields"==optio&&e.extend(this.model.fields,t[optio]),"query"==optio&&(this.model.query=t[optio]);this._refreshTagItems(i,t[i]);break;case"targetID":this.model.targetID=t[i],this._setTargetID()}},_setTargetID:function(){this.element.removeAttr("role tabindex aria-disabled style"),e(this._spantag).remove(),e(this._liTemplte).remove(),this._liTemplte=this._tipRes=null,this.element.removeClass("e-widget e-box e-toolbarspan e-rtl"),this.element.find("ul,ol").removeClass("e-ul e-horizontal e-vertical e-separator e-comnrtl"),this.element.find("li").removeClass("e-tooltxt e-comnrtl"),this.element.find("li").removeAttr("aria-label"),this._init()},_refreshTagItems:function(e,t){this.model[e]=t,this.element.empty(),this._generateTemplate(),this._initialize()},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(){var t,i;if("auto"==this.model.width){var s=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),n=this.element.find("ul").children("li"),l=this.element.find("ul"),o=this.element.find(".e-toolbar-res-arrow");for(t=0,i=l.length;t<i;t++)null!=l[t]&&e(l[t]).hasClass("e-separator")&&(s+=parseFloat(l.eq(t).css("border-right-width"))+parseFloat(l.eq(t).css("border-left-width")));for(null!=o[0]&&(s+=Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8),t=0,i=n.length;t<i;t++)null!=n[t]&&(s+=Math.round(n.eq(t).outerWidth()));this.element.css("width",Math.ceil(s))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){"auto"!=this.model.width?this._off(e(window),"resize",this._widthHandler):this._on(e(window),"resize",this._widthHandler)},_widthHandler:function(){this._setWidth(this.model.width)},_setOrientation:function(e){e!=t.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical")),this.items.addClass("e-tooltxt")},_reSizeHandler:function(){this._isResized&&this._liTemplte.children().length>0&&(e(this.element).append(this._liTemplte.children()),this._renderToolbarSeparator(),this._liTemplte.addClass("e-display-none"),this._contstatus=!1),this._elementWidth="function"==typeof getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth,this._spantag.removeClass("e-display-block").addClass("e-display-none");for(var t=0;t<this.itemsContainer.length;t++)this._liWidth+=e(this.itemsContainer[t]).outerWidth(!0),this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.append(this.itemsContainer[t]));this._isResized=!0},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_getOffset:function(e){return t.util.getOffset(e)},_btnMouseClick:function(i){var s,n,l,o=this.element.outerWidth(),r=this.element.outerHeight(),a=e(this._liTemplte).outerWidth(),d=e(window).width(),h=e(window).scrollLeft();e(i.currentTarget).hasClass("e-disable")||(maxZ=this._getZindexPartial(),s=this._getOffset(this.element),n=this.model.enableRTL?s.left:s.left+o-a,l=s.top+r-1+2,n=n<h?h+1:n+a>d+h?d-a+h-1:n,this._contstatus?(this._liTemplte.addClass("e-display-none"),this._contstatus=!1):(this._liTemplte.removeClass("e-display-none").css({top:l+"px",left:n+"px","z-index":maxZ}),this._contstatus=!0,this._on(t.getScrollableParents(this.element),"scroll",this._hidecontext),this.element.bind("click",e.proxy(this._hidecontext,this))),this._contstatus&&this._on(e(document),"mouseup",this._documentClick),this._removeListHover())},_hidecontext:function(i){e(i.target).is(e("#"+this.element[0].id+"_target"))||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",e.proxy(this._hidecontext,this)),this._off(t.getScrollableParents(this.element),"scroll",this._hidecontext),this._off(e(document),"mouseup",this._documentClick))},_documentClick:function(t){e(t.target).is(e("#"+this.element[0].id+"_target"))||0!=e(t.target).closest("div#"+this.element[0].id+"_hiddenlist").length||e(t.target).parents().hasClass("e-ddl-popup")||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this._off(e(document),"mouseup",this._documentClick))},_setSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e);var t="e-toolbarTooltip "+e;this._subControlsSetModel("cssClass",t)},_subControlsSetModel:function(i,s){t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("option",i,s),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("option",i,s)},_destroy:function(){this.element.html(""),t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("destroy"),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy"),this._cloneElement.removeClass("e-toolbar e-js"),this.element.replaceWith(this._cloneElement),this._liTemplte&&this._liTemplte.remove(),this._unWireResizing()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"}),this.element.children().find("li"),this._focusEnable=!0,this._renderControl(),this._responsiveLayout(),this._wireEvents()},_responsiveLayout:function(){this._roundedCorner(this.model.showRoundedCorner),this.model.isResponsive&&"horizontal"==this.model.orientation&&(this._spantag=e("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block' unselectable='on'></span>"),this._spantag.appendTo(this.element),this._spanWidth=this._spantag.outerWidth(!0)+8,this._liTemplte=e("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+e(this.element)[0].className+"'></div>"),this.model.enableRTL&&this._liTemplte.addClass("e-rtl"),this._isResized=!1,this._reSizeHandler(),e("body").append(this._liTemplte)),this._on(e("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick),this._wireResizing(),this._controlVisibleOptions(this.model.hide),this._enableRTL(this.model.enableRTL),this._disabledItems=this.model.disabledItemIndices,this._controlStatus(this.model.enabled),this.model.disabledItemIndices=this._disabledItems,0!=this.model.disabledItemIndices.length&&this._disableItemByIndex(this.model.disabledItemIndices),0!=this.model.enabledItemIndices.length&&this._enableItemByIndex(this.model.enabledItemIndices),this._setWidth()},_removeResponsive:function(){e(this._spantag).remove(),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy");var i=e(this._liTemplte).children("ul");e(this._liTemplte).detach(),e(this.element).append(i),this.itemsContainer=this.element.children("ol,ul"),this.items=this.itemsContainer.children("li"),this._off(this.items,"mouseup"),this._off(this.items,"mousedown"),this._off(this.element),this._wireEvents(),this._wireResizing(),this._setWidth()},_controlVisibleOptions:function(e){0!=e?this.hide():this.show()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_roundedCorner:function(e){e?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner")),this._subControlsSetModel("showRoundedCorner",e)},_generateTemplate:function(){var e=this;this.element.css("visibility","hidden"),this.model.dataSource instanceof t.DataManager?this.model.dataSource.executeQuery(this.model.query).done(function(t){e._generateGroup(t.result),e._initialize(),e.element.css("visibility","visible")}):(e._generateGroup(e.model.dataSource),e.element.css("visibility","visible"))},_generateGroup:function(e){var t,i,s,n,l,o=this;for(this._localDataSource=e,t=-1,i=[],s=0;s<e.length;s++)if(this._isNewGroup(e[s].group,i)){for(i[++t]=e[s].group,n=-1,o.itemsSource=[],l=s;l<e.length;l++)e[s].group==e[l].group&&(o.itemsSource[++n]=e[l]);o.element.append(o._generateTagitems())}},_isNewGroup:function(e,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(e==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box"),this._renderToolbarItems(),this._addAttr(this.model.htmlAttributes),this._setOrientation(this.model.orientation),this._renderToolbarSeparator(),this._setHeight(this.model.height),this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0],this.itemsContainer=this.element.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)t.isNullOrUndefined(e(this.items[i]).attr("title"))&&e(this.items[i]).attr("aria-label",this.items[i].id);this._liCount=this.items.length},_generateTagitems:function(){var e,i;for(e=this.itemsSource,this.ultag=t.buildTag("ul"),i=0;i<e.length;i++)this.ultag.append(this._generateLi(e[i]));return this.ultag},_generateLi:function(e){var i,s,n;return i=t.buildTag("li"),e[this.model.fields.id]?i.attr("id",e[this.model.fields.id]):e[this.model.fields.text]&&i.attr("id",e[this.model.fields.text]),e[this.model.fields.tooltipText]&&i.attr("title",e[this.model.fields.tooltipText]),e[this.model.fields.imageUrl]&&""!=e[this.model.fields.imageUrl]&&(s=t.buildTag("img.e-align","",{},{src:e[this.model.fields.imageUrl],alt:e[this.model.fields.text]}),e[this.model.fields.imageAttributes]&&this._setAttributes(e[this.model.fields.imageAttributes],s),i.append(s)),e[this.model.fields.spriteCssClass]&&""!=e[this.model.fields.spriteCssClass]&&(n=t.buildTag("div.e-align "+e[this.model.fields.spriteCssClass]+" e-spriteimg"),i.append(n)),e[this.model.fields.text]&&""!=e[this.model.fields.text]&&i.append(e[this.model.fields.text]),e[this.model.fields.htmlAttributes]&&this._setAttributes(e[this.model.fields.htmlAttributes],i),i},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_renderToolbarSeparator:function(){var t,i;if(this.model.enableSeparator){for(t=0,i=this.itemsContainer.length-1;t<i;t++)e(this.itemsContainer[t]).addClass("e-separator");if(1==this.itemsContainer.length)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==i-1?e(this.itemsContainer[0].children[t]).removeClass("e-separator"):e(this.itemsContainer[0].children[t]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_enableRTL:function(e){e?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl")),this.model.enableRTL=e,this._subControlsSetModel("enableRTL",e),this._renderToolbarSeparator()},_renderTooltip:function(i){var s=e.extend(!0,{},i);s.cssClass=t.isNullOrUndefined(s.cssClass)?"e-toolbarTooltip "+this.model.cssClass:s.cssClass+" e-toolbarTooltip "+this.model.cssClass,s.enableRTL=this.model.enableRTL,s.showRoundedCorner=this.model.showRoundedCorner,s.target="li[data-content], li[title]",s.beforeOpen=this._showTooltip,this._tipToolbar=e(this.target).ejTooltip(s).data("ejTooltip"),this.model.isResponsive&&!t.isNullOrUndefined(this._liTemplte)&&(this._tipRes=e(this._liTemplte).ejTooltip(s).data("ejTooltip"))},_showTooltip:function(t){var i=e(t.event.currentTarget);t.event.target,i.hasClass("e-disable")&&(t.cancel=!0)},_hideTooltip:function(){t.isNullOrUndefined(this._tipToolbar)||(this._tipToolbar.hide(),this._tipToolbar._isHidden=!1),t.isNullOrUndefined(this._tipRes)||(this._tipRes.hide(),this._tipRes._isHidden=!1)},_addOverlay:function(i){for(var s,n=0;n<i.length;n++)e(i[n]).hasClass("e-disable")||(e(i[n]).addClass("e-disable"),s=t.buildTag("div.e-item-overlay"),e(i[n]).append(s))},_removeOverlay:function(t){for(var i=0;i<t.length;i++)e(t[i]).children(".e-item-overlay").remove()},disableItem:function(t){var i=e(t);null==i||i.length<=0||(i.hasClass("e-disable")||(i.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(i)),i.removeClass("e-hover e-active").attr("aria-selected",!1))},enableItem:function(t){var i=e(t);null==i||i.length<=0||(i.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(i))},disableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.disableItem(t)},enableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.enableItem(t)},_enableItemByIndex:function(t){var i,s;if(!this.model.enabled)return!1;if(0!=t.length)for(s=0;s<t.length;s++)e.inArray(t[s],this.model.disabledItemIndices)>-1&&(i=e.inArray(t[s],this.model.disabledItemIndices),this.enableItem(this.items[this.model.disabledItemIndices[i]]),this.model.disabledItemIndices.splice(i,1))},_disableItemByIndex:function(t){var i;if(!this.model.enabled)return!1;for(this._disabledItems=this.model.disabledItemIndices,i=0;i<t.length;i++)e.inArray(t[i],this.model.disabledItemIndices)<0&&this._disabledItems.push(parseInt(t[i]));for(i=0;i<this.items.length;i++)e.inArray(i,this.model.disabledItemIndices)>-1&&this.disableItem(this.items[i]);this.model.disabledItemIndices=this._disabledItems},disable:function(){if("true"==this.element.attr("aria-disabled"))return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(this.items),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.addClass("e-disable"),this.model.enabled=!1,this._subControlsSetModel("enabled",!1)},enable:function(){if(this.model.disabledItemIndices=[],"false"==this.element.attr("aria-disabled"))return!1;this.items.removeClass("e-disable"),this._removeOverlay(this.items),this.element.attr("aria-disabled",!1),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.removeClass("e-disable"),this.model.enabled=!0,this._subControlsSetModel("enabled",!0)},selectItem:function(t){var i=e(t);null==i||i.length<=0||(i.addClass("e-active").attr("aria-selected",!0),this._activeItem=e(this.items).index(i))},deselectItem:function(t){var i=e(t);null==i||i.length<=0||i.removeClass("e-active").attr("aria-selected",!1)},selectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.selectItem(t)},deselectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.deselectItem(t)},removeItem:function(t){var i,s,n;if(this.model.disabledItemIndices=[],s=0,null!=(i=e(t))&&!(i.length<=0))for(i.remove(),this.items=this.itemsContainer.children("li"),n=0;n<this.items.length;n++)e(this.items[n]).hasClass("e-disable")&&(this.model.disabledItemIndices[s++]=n)},removeItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.removeItem(t)},_wireResizing:function(){this.model.isResponsive&&"horizontal"==this.model.orientation?e(window).bind("resize",e.proxy(this._reSizeHandler,this)):this._unWireResizing()},_unWireResizing:function(){e(window).unbind("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler),this._on(this.element,"focus",this._focusElement),this._on(this.element,"blur",this._targetBlur),this._on(this.items,"mouseenter",this._onItemHover),this._on(this.items,"mouseleave",this._onItemLeave),this._on(this.items,"mousedown",this._onItemClick),this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this.items.removeClass("e-hover"),i.addClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemHover",args))},_onItemClick:function(t){if(e(t.currentTarget).hasClass("e-disable")||1!=t.which)return!1;var i=t.currentTarget,s=t.target;this._hideTooltip(),"mousedown"==t.type?(this._focusEnable=!1,e(i).addClass("e-active"),this._focusedItem=this._currentItem=e(i)):"mouseup"==t.type&&(this._removeSelection(),e(i).hasClass("e-disable")||(args={currentTarget:i,text:e(i).attr("data-content"),target:s,status:this.model.enabled,event:t},this._activeItem=this.model.isResponsive&&this._contstatus&&e(i).closest(".e-responsive-toolbar").length>0?this._liTemplte.find(".e-tooltxt").index(i):e(this.items).index(i),this._trigger("click",args)))},_onItemLeave:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this._removeSelection(),i.removeClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemLeave",args))},_onKeyPress:function(i){var s,n,l,o;if(s=i.keyCode?i.keyCode:i.which?i.which:i.charCode,this.model.isResponsive&&this._liTemplte.find(".e-tooltxt").length>0?(this._keyPressed=!0,this._items=this._contstatus?this._liTemplte.find(".e-tooltxt"):this.element.find(".e-tooltxt"),n=this._items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")):(this._keyPressed=!1,n=this.items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")),this._focusedItem?(l=this._focusedItem,this._focusedItem=null):l=n.filter(".e-hover"),"keydown"==i.type)(38==s||39==s)&&this.model.orientation!=t.Orientation.Vertical||(39==s||40==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(n[n.index(l)+1]).length>0?e(n[n.index(l)+1]):n.first()):(37==s||40==s)&&this.model.orientation!=t.Orientation.Vertical||(37==s||38==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(n[n.index(l)-1]).length>0?e(n[n.index(l)-1]):n.last()):33==s||36==s?(i.preventDefault(),o=n.first()):(34==s||35==s)&&(i.preventDefault(),o=n.last()),o&&(this._removeListHover(),o.addClass("e-hover"));else switch(s){case 13:case 32:if(i.preventDefault(),!l[0])break;args={currentTarget:l[0],target:e(l)[0],status:this.model.enabled,event:i},this._trigger("click",args),this._removeListHover();break;case 27:i.preventDefault(),this.element.blur();break;case 9:i.preventDefault(),this._activeItem=e(this.items).filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)").first().index(),this._addListHover()}},_removeListHover:function(){e(this.items).removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.hasClass("e-disable")||e.addClass("e-hover").focus()},_getActiveItem:function(){return this.model.isResponsive&&this._keyPressed?e(this._items[this._activeItem]):e(this.items[this._activeItem])},_targetBlur:function(e){e.preventDefault(),this.element.focusout().removeClass("e-focus"),this._removeListHover(),this._off(this.element,"keyup",this._onKeyPress)._off(this.element,"keydown",this._onKeyPress),this._trigger("focusOut")},_clickEventHandler:function(){this._clicked=!0},_removeSelection:function(){this._currentItem&&"true"!=this._currentItem.attr("aria-selected")&&this._currentItem.removeClass("e-active")},_focusElement:function(){this.element.hasClass("e-focus")||(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._onKeyPress)._on(this.element,"keydown",this._onKeyPress),this._focusEnable)?(this._removeListHover(),this._activeItem=this._clicked?-1:0,(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=e(this.items).filter('li:not([class*="e-disable"])').first().index()),this._addListHover()):this._focusEnable=!0}})}),
/*!
*  filename: ej.menu.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./ej.checkbox.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejMenu","ej.Menu",{element:null,model:null,validTags:["ul"],_setFirst:!1,_rootCss:"e-menu",angular:{terminal:!1},defaults:{height:"",width:"",animationType:"default",orientation:t.Orientation.Horizontal,menuType:"normalmenu",isResponsive:!0,contextMenuTarget:null,htmlAttributes:{},cssClass:"",openOnClick:!1,subMenuDirection:"none",enableCenterAlign:!1,showRootLevelArrows:!0,showSubLevelArrows:!0,enableAnimation:!0,enableSeparator:!0,enabled:!0,fields:{child:null,dataSource:null,query:null,tableName:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",url:"url",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",linkAttribute:"linkAttribute",imageUrl:"imageUrl"},enableRTL:!1,titleText:"Menu",excludeTarget:null,beforeOpen:null,open:null,close:null,mouseover:null,mouseout:null,click:null,keydown:null,create:null,destroy:null},dataTypes:{animationType:"enum",cssClass:"string",titleText:"string",openOnClick:"boolean",enabled:"boolean",enableCenterAlign:"boolean",showArrow:"boolean",showRootLevelArrows:"boolean",showSubLevelArrows:"boolean",enableSeparator:"boolean",isResponsive:"boolean",enableRTL:"boolean",enableAnimation:"boolean",fields:{dataSource:"data",query:"data",child:"data"},excludeTarget:"string",htmlAttributes:"data"},_setModel:function(i){for(var s in i)switch(s){case"menuType":i[s]=this.model.menuType;break;case"fields":this._wireEvents("_off"),this.element.empty().insertBefore(this.wrapper),this.wrapper.remove(),e.extend(this.model.fields,i[s]),this._intializeData(),this.model.enabled||this._wireEvents("_off");break;case"orientation":this._setOrientation(i[s]);break;case"showRootLevelArrows":this._addArrow(i[s],this.model.showSubLevelArrows);break;case"showSubLevelArrows":this._addArrow(this.model.showRootLevelArrows,i[s]);break;case"enableSeparator":this._setSeparator(i[s]);break;case"height":this._setHeight(i[s]);break;case"width":this._setWidth(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"isResponsive":this.model.isResponsive?this._responsiveLayout():(e(this.resWrap).remove(),e(this.wrapper).removeClass("e-menu-responsive"),e(this.element).removeClass("e-menu-responsive"),this.resWrap=null);break;case"htmlAttributes":this._addAttr(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"enableCenterAlign":this._centerAlign(i[s]);break;case"excludeTarget":this.model.excludeTarget=i[s];break;case"enabled":this.model.enabled=i[s],this._controlStatus(i[s]);break;case"animationType":this._setAnimation(i[s]);break;case"enableAnimation":this.model.enableAnimation=i[s];break;case"openOnClick":this._hoverOpen=!i[s],this._hoverClose=!i[s];break;case"subMenuDirection":this._setSubMenuDirection(this.model.subMenuDirection);break;case"titleText":this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e(this.label).text(i[s])}},_destroy:function(){this.model.menuType==t.MenuType.ContextMenu?this._referenceElement.append(this._cloneElement):this._cloneElement.insertBefore(this.wrapper),this._cloneElement.removeClass("e-menu e-js"),this.wrapper.remove()},_init:function(){this._cloneElement=this.element.clone(),this.element.css("visibility","hidden"),this._setValues(),this._intializeData(),this.element.css("visibility","visible")},_setValues:function(){this._mouseOver=!0,this._hoverOpen=!0,this._hoverClose=!0,this._isMenuOpen=!1,this._hideSpeed=100,this._showSpeed=100,this._isSubMenuOpen=!1,this._isContextMenuOpen=!1,this._disabledMenuItems=[],this._hiddenMenuItems=[],this._delayMenuHover=0,this._delaySubMenuHover=0,this._delaySubMenuShow=0,this._preventContextOpen=!0,this._setAnimation(this.model.animationType),this._isFocused=!0},_intializeData:function(){t.isNullOrUndefined(this.model.fields)||null==this.model.fields.dataSource?(this._renderMenu(),this._wireEvents("_on")):(this._generateTemplate(this.model.fields.dataSource),this._renderMenu())},_renderMenu:function(){this._renderControl(),this._addArrow(this.model.showRootLevelArrows,this.model.showSubLevelArrows),this._renderArrow(),this._intializeMenu()},_renderControl:function(){"normalmenu"==this.model.menuType?(this.wrapper=t.buildTag("div"),this.wrapper.addClass(this.model.cssClass+" e-menu-wrap")):this.wrapper=t.buildTag("div.e-menu-wrap"),this.model.isResponsive&&this._responsiveLayout(),this.model.menuType!=t.MenuType.ContextMenu&&(this.wrapper.insertBefore(this.element),this.wrapper.append(this.element),null!=this.checkBox&&this.checkBox.ejCheckBox({size:"medium",change:this._oncheck})),this.element.addClass("e-menu e-widget e-box").attr({role:"menu",tabindex:0}),this._addAttr(this.model.htmlAttributes),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this._setSubMenuDirection(this.model.subMenuDirection),"normalmenu"==this.model.menuType?"horizontal"==this.model.orientation?this.element.addClass("e-horizontal"):this.element.addClass("e-vertical"):this._contextMenu_Template(),this._addClass(),this.model.enableCenterAlign&&this._centerAlign(this.model.enableCenterAlign),this.model.enableSeparator&&this._setSeparator(!0),this.model.enabled||this.disable()},_responsiveLayout:function(){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(this.wrapper.addClass("e-menu-responsive"),this.element.addClass("e-menu-responsive"),this.resWrap=t.buildTag("span.e-menu-res-wrap e-menu-responsive"),this.inResWrap=t.buildTag("span.e-in-wrap e-box e-menu-res-in-wrap"),this.label=t.buildTag("span.e-res-title",this.model.titleText),this.check=t.buildTag("span.e-check-wrap e-icon"),this.checkBox=t.buildTag("input#responsive.e-res-icon","",{opacity:0},{type:"checkbox"}),this.wrapper.append(this.resWrap),this.resWrap.append(this.inResWrap),this.inResWrap.append(this.label).append(this.check),this.check.append(this.checkBox))},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_oncheck:function(e){var t=this.element.parents(".e-menu-wrap").children(".e-menu");e.isChecked?t.removeClass("e-res-hide").addClass("e-res-show"):t.removeClass("e-res-show").addClass("e-res-hide")},_addClass:function(){this.element.find('li:has("> ul")').find("> a,> span").addClass("aschild"),this.element.find(">li").addClass("e-list").attr({role:"menuitem"}),this.element.find("li").find(">a, >span").addClass("e-menulink");var t,s,n=this.element.find(".e-list a.aschild"),l=this.element.find(".e-list span.aschild");for(i=0;i<n.length;i++)(t=e(n[i])).siblings().attr({"aria-hidden":!0}),t.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),t.siblings("ul").children("li").addClass("e-list").attr("role","menuitem");for(i=0;i<l.length;i++)(s=e(l[i])).siblings().attr({"aria-hidden":!0}),s.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),s.siblings("ul").children("li").addClass("e-list").attr("role","menuitem")},_renderArrow:function(){if(this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&0==e(e(this.element).find("span.e-menu-arrow")).length){var i=t.buildTag("span.e-menu-arrow e-menu-left");e(i).append("<span class='e-arrowMenuOuter'></span>").append("<span class='e-arrowMenuInner'></span>"),this.element.find(">li.e-list.e-haschild").append(i)}},_generateTemplate:function(e){var i=this;e instanceof t.DataManager?e.executeQuery(this._columnToSelect(this.model.fields)).done(function(e){i._odataFlag=!0,i._generateItemTemplate(e.result),i._wireEvents("_on")}):(i._odataFlag=!1,this._generateItemTemplate(i.model.fields.dataSource),this._wireEvents("_on"))},_generateItemTemplate:function(e){for(var t,i=0;i<e.length;i++)(null==e[i][this.model.fields.parentId]||0==e[i][this.model.fields.parentId])&&(t=this._menuTemplate(e[i],e,this.model.fields),this.element.append(t))},_menuTemplate:function(i,s,n){var l,o,r,a,d,h,c,u,m,p,g;if((l=e(document.createElement("li"))).attr("class","e-list"),i[n.htmlAttribute]&&this._setAttributes(i[n.htmlAttribute],l),(o=e(document.createElement("a"))).attr("class","e-menulink"),i[n.imageUrl]&&""!=i[n.imageUrl]?((r=e(document.createElement("img"))).attr("src",i[n.imageUrl]),i[n.imageAttribute]&&this._setAttributes(i[n.imageAttribute],r),o.append(r)):i[n.spriteCssClass]&&""!=i[n.spriteCssClass]&&((a=e(document.createElement("span"))).addClass(i[n.spriteCssClass]),o.append(a)),o.append(i[n.text]),i[n.linkAttribute]&&this._setAttributes(i[n.linkAttribute],o),i[n.url]&&o.attr("href",i[n.url]),l.append(o),i[n.id]&&l.prop("id",i[n.id]),t.isNullOrUndefined(n.child)){if(!this._odataFlag&&(u=t.DataManager(n.dataSource).executeLocal(t.Query().where(n.parentId,t.FilterOperators.equal,i[n.id])))&&u.length>0){for(m=t.buildTag("ul"),p=0;p<u.length;p++)g=this._menuTemplate(u[p],n.dataSource,n),m.append(g);l.append(m)}}else if(this._odataFlag=!0,n.child.dataSource instanceof t.DataManager)d=this,h=t.Query(),e(l).attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),(h=this._columnToSelect(n.child)).where(n.child.parentId,t.FilterOperators.equal,i[n.id]),(c=n.child.dataSource.executeQuery(h)).done(function(t){var i,s,o,r=t.result;if(r&&r.length>0){for(i=e(document.createElement("ul")),s=0;s<r.length;s++)o=d._menuTemplate(r[s],n.child.dataSource,n.child),i.append(o);l.append(i),e(l).children("a").addClass("aschild"),e(l).parent().hasClass("e-menu")&&d.model.showRootLevelArrows?e(l).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):d.model.showSubLevelArrows&&e(l).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space")}}),c.then(function(){d._renderArrow()});else if(t.isNullOrUndefined(i.child)||(t.isPlainObject(i.child)?u=t.DataManager(n.child.dataSource).executeLocal(t.Query().where(n.child.parentId,t.FilterOperators.equal,i[n.id])):i.child instanceof Array&&(u=i.child)),u&&u.length>0){for(m=e(document.createElement("ul")),p=0;p<u.length;p++)g=this._menuTemplate(u[p],n.child.dataSource,n.child),m.append(g);l.append(m)}return l},_setAttributes:function(e,t){for(var i in e)"class"==i?t.addClass(e[i]):t.attr(i,e[i])},_addArrow:function(t,i){if(t){var s="horizontal"==this.model.orientation?"e-arrowhead-down":"e-arrowhead-right";this.element.find('>li.e-list:has("> ul")').children("a,span").append(e("<span>").addClass("e-icon "+s)).addClass("e-arrow-space")}else this.element.find('>li.e-list:has("> ul")').children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove();i?this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove()},_intializeMenu:function(){0!=this.model.height&&this._setHeight(this.model.height),0!=this.model.width&&this._setWidth(this.model.width),"contextmenu"==this.model.menuType&&(this.model.openOnClick=!1),this.model.openOnClick&&(this._hoverOpen=!1,this._hoverClose=!1)},_setOrientation:function(e){"horizontal"==e?this.element.removeClass("e-vertical e-horizontal").addClass("e-horizontal"):this.element.removeClass("e-horizontal e-vertical").addClass("e-vertical")},_setHeight:function(e){"horizontal"==this.model.orientation&&"auto"!==e?(e="number"==typeof e?e+"px":e,this.element.find("> li").find(">a:first").css("line-height",e),this.model.showRootLevelArrows&&this.element.find("> li").find(">a:first").find("> span:first").css({"line-height":e,top:"0px"})):this.element.height(e)},_setWidth:function(e){this.element.css("width",e),"horizontal"===this.model.orientation&&this.model.isResponsive&&this.resWrap.css("width",e)},_setRTL:function(e){e?this.element.removeClass("e-rtl").addClass("e-rtl"):this.element.removeClass("e-rtl"),e&&"horizontal"===this.model.orientation?this.wrapper.removeClass("e-menu-rtl").addClass("e-menu-rtl"):this.wrapper.removeClass("e-menu-rtl"),this.model.subMenuDirection=e?"left":"right"},_setSubMenuDirection:function(e){"left"!=e&&"right"!=e&&(this.model.subMenuDirection=this.model.enableRTL?"left":"right")},_setAnimation:function(e){"none"===e?(this._showAnim="none",this._hideAnim="none"):(this._showAnim="slideDown",this._hideAnim="slideUp")},_controlStatus:function(e){1!=e?this.disable():this.enable()},_centerAlign:function(e){"horizontal"==this.model.orientation&&e?this.element.css("text-align","center"):this.element.css("text-align","inherit")},_columnToSelect:function(e){var i,s=[],n=t.Query();if(t.isNullOrUndefined(e.query)){for(i in e)"tableName"!==i&&"child"!==i&&"dataSource"!==i&&e[i]&&s.push(e[i]);s.length>0&&n.select(s),this.model.fields.dataSource.dataSource.url.match(e.tableName+"$")||t.isNullOrUndefined(e.tableName)||n.from(e.tableName)}else n=e.query;return n},_max_zindex:function(){var t,i,s;return"contextmenu"==this.model.menuType?(t=e(this._targetElement).parents()).push(this._targetElement):t=e(this.element).parents(),i=e("body").children(),index=i.index(this.popup),i.splice(index,1),e(i).each(function(e,i){t.push(i)}),!(s=Math.max.apply(s,e.map(t,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||s<1e4?s=1e4:s+=1,s},_recursiveFunction:function(t,i){var s=this,n=!1;e.each(t,function(e,t){return t.Text==i?(s.selectedItem=t,n=!0,!1):(null!=t.ChildItems&&s._recursiveFunction(t.ChildItems,i),!n&&void 0)})},_contextMenu_Template:function(){var t=e(".e-menu-wrap #"+this.element[0].id).get(0);t&&e(t.parentElement).remove(),this.model.orientation="vertical",this.element.addClass(this.model.cssClass+" e-context"),this.element.css("display","none"),this._referenceElement=this.element.parent(),e("body").append(this.element),this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)},_closeMenu:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim)},_onMenuIntent:function(e,t,i){t._delayMenuHover=window.setTimeout(function(){if(1==t._mouseOver&&i){var s=t._showAnim,n=t._hideAnim;t._showSpeed,t._hideSpeed,t._show(e,s,n)}},this._showSpeed)},_onHide:function(e,t,i){t._delaySubMenuHover=window.setTimeout(function(){0==t._mouseOver&&i&&(t._id,t._hideAnim,t._hideSpeed,t._closeAll())},t._hideSpeed)},_subMenuPos:function(t,i){var n,l,o,r,a,d,h,c,u,m=e(t).offset(),p=m.left,g=e("ul:first",t),f=e(t).outerWidth();if(null==m||m==s)return!1;o=g.outerWidth()+1,r=document.documentElement.clientWidth+e(document).scrollLeft(),"normalmenu"==this.model.menuType?e(t.parentNode).is(this.element)?"horizontal"==this.model.orientation?(g.css("top",e(t).outerHeight()+"px"),this.model.enableRTL?(l=p+f-o<0?p+f-o:1,g.css({left:"auto",right:l+"px"})):(n=r<p+o?p+o-r:1,g.css("left",-1*n+"px"))):"left"==i&&p>o||"right"==i&&r<=m.left+f+o?g.css("left",-(o+4)+"px"):g.css("left",e(t).outerWidth()+4+"px"):"left"==i&&p>o||"right"==i&&r<=m.left+f+o?g.css("left",-(o+4)+"px"):(g.css("left",e(t).outerWidth()+4+"px"),c=g.outerHeight(),(a=e(window).height())<c?(d=m.top-e(window).scrollTop(),g.css("top",4-d+"px")):a-m.top<c&&(d=a-m.top-c,g.css("top",d-2+"px"))):((r-=m.left+2*o+4)<0?(h=null==o?"-206.5px":"-"+(o+5)+"px",g.css("left",h)):g.parent("li.e-list").parent("ul").width()&&"right"==i?g.css("left",g.parent("li.e-list").parent("ul").width()+4+"px"):m.left>o&&g.css("left",-(o+4)+"px"),c=g.outerHeight(),m.top+c>e(window).height()?(u=-c+e(t).outerHeight(),c>m.top+e(t).outerHeight()/2?g.css("top",-c/2+"px"):g.css("top",u+"px")):g.css("top","0px"))},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e+" e-menu-wrap")},_setSeparator:function(e){e?this.element.addClass("e-separator"):this.element.removeClass("e-separator")},_contextMenuEvents:function(t){this[t](e(this.model.contextMenuTarget),"mouseup taphold",this._ContextMenuHandler),this[t](this.element,"contextmenu",this._onDefaultPreventer),this[t](e(this.model.contextMenuTarget),"contextmenu",this._onDefaultPreventer),this[t](e(document),"mousedown",this._onContextClose)},_show:function(t,i,s){var n,l=e("> ul",t),o=this._max_zindex();l.attr({"aria-hidden":!1}),this._hideAnimation(e(t).siblings().find(" > ul:visible"),s),e.inArray(this._disabledMenuItems,t)>-1||("none"!=l.css("display")?(n=this.model.openOnClick?e(l):l.children().find("> ul"),this._hideAnimation(n,s)):e("> ul",t).children().find("> ul").hide(),this._subMenuPos(t,this.model.subMenuDirection),l.css({"z-index":o+1}),e(t).children("span.e-menu-arrow").css({"z-index":o+2}),"block"==e("> ul",t).css("display")||e(t).hasClass("e-disable-item")||(this._showAnimation(l,i),l.closest("li").addClass("e-active e-mfocused")),e(t).siblings("li.e-active").length>0&&e(t).siblings("li.e-active").removeClass("e-active e-mfocused"))},_closeAll:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this._hideAnimation(this.element.find("> ul:visible"),this._hideAnim)},_showAnimation:function(e,t){switch(t){case"slideDown":e.slideDown(this.model.enableAnimation?200:0);break;case"none":e.css("display","block")}},_hideAnimation:function(t,i){switch(i){case"slideUp":e(t).attr({"aria-hidden":!0}),t.slideUp(this.model.enableAnimation?100:0);break;case"none":t.css("display","none")}t.closest("li").removeClass("e-active e-mfocused")},_removeValue:function(i,s){for(var n=t.browserInfo(),l="8.0"===n.version&&"msie"===n.name?i[0].outerText:i[0].textContent,o=e(s).length,r=0,a=0==e(s).children("a").length?e(s).children("span"):e(s).children("a");r<=o;){if(e(a[r]).text()===l)return r;r++}},_createSubLevelItem:function(t,i){var s;(s=e(document.createElement("ul"))).append(i),t.append(s),t.attr({role:"menu","aria-haspopup":"true"}),t.addClass("e-haschild"),this.element.find('li:has("> ul")').find("> a,>span").addClass("aschild e-arrow-space"),this._insertArrows(s)},_insertArrows:function(t){this.model.showRootLevelArrows?t.find(">a,>span").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):t.find(">a,>span").removeClass("e-arrow-space").find(">span.e-icon").remove(),this.model.showSubLevelArrows?t.parent("li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):t.parent("li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").find(">span.e-icon").remove()},_createMenuItem:function(t){var i,s,n,l;return(i=e(document.createElement("li"))).attr({class:"e-list",role:"menuitem"}),t.htmlAttribute&&this._setAttributes(t.htmlAttribute,i),t.text&&""!=t.text&&((s=e(document.createElement("a"))).attr({class:"e-menulink"}),t.imageUrl&&""!=t.imageUrl?((n=e(document.createElement("img"))).attr("src",t.imageUrl),t.imageAttribute&&this._setAttributes(t.imageAttribute,n),s.append(n)):t.spriteCssClass&&""!=t.spriteCssClass&&((l=e(document.createElement("span"))).addClass(t.spriteCssClass),s.append(l)),s.append(t.text),t.linkAttribute&&this._setAttributes(t.linkAttribute,s),t.url&&s.attr("href",t.url),i.append(s)),t.id&&i.prop("id",t.id),this.model.enabled||i.addClass("e-disable-item"),i},_insertNode:function(i,s,n){var l=0,o=0,r=0,a=[];for(e(s).is(this.element)?a.push(this.element):"string"==typeof s?a.push(this.element.find(s)):void 0===s?a.push(this.element):a.push(s),o=0;o<a.length;o++)for(r=0;r<a[o].length;r++)for(l=0;l<i.length&&!t.isNullOrUndefined(i[l]);l++)this._addItem(i[l],a[o][r],n)},_addItem:function(t,i,s){var n,l;switch(this._wireEvents("_off"),n=this._createMenuItem(t),i=e("default"===i?"#"+t.parentId:i),s){case"insert":0!=(l=e(i).is(this.element)?i:i.children("ul")).length?l.append(n):this._createSubLevelItem(i,n);break;case"insertBefore":e(i).is(this.element)?i.prepend(n):n.insertBefore(i);break;case"insertAfter":e(i).is(this.element)?i.append(n):n.insertAfter(i)}this._wireEvents("_on")},_removeItem:function(e){0==e.siblings("li").length?(e.closest("ul").siblings("a.aschild").removeClass("aschild e-arrow-space").children("span.e-icon").remove(),e.closest("ul").hasClass("e-menu")?e.remove():e.closest("ul").remove()):e.remove()},_hiddenElement:function(t){t.length>0&&-1==e.inArray(t[0],this._hiddenMenuItems)&&(t.addClass("e-hidden-item"),this._hiddenMenuItems.push(t[0]))},_showElement:function(t){t.length>0&&e.inArray(t[0],this._hiddenMenuItems)>-1&&(t.removeClass("e-hidden-item"),this._hiddenMenuItems.splice(this._hiddenMenuItems.indexOf(t[0]),1))},_getNodeByID:function(t){return"object"!=typeof t&&""!=t&&(t=this.element.find(".e-list"+t)),e(t)},_processItems:function(t,i){for(var s=this._getNodeByID(t),n=0;n<s.length;n++)i?this._showElement(e(s[n])):this._hiddenElement(e(s[n]))},insert:function(e,t){this._insertNode(e,t,"insert")},insertBefore:function(e,t){this._insertNode(e,t,"insertBefore")},insertAfter:function(e,t){this._insertNode(e,t,"insertAfter")},remove:function(t){var i=0,s=0;for(i=0;i<t.length;i++)for(t[i]="string"==typeof t[i]?this.element.find(t[i]):t[i],s=0;s<t[i].length;s++)"LI"===t[i][s].tagName||"UL"===t[i][s].tagName?this._removeItem(e(t[i][s])):t[i][s].remove()},showContextMenu:function(i,s,n,l,o){if(this._closeMenu(),this._eventArgs=l,t.isNullOrUndefined(l)||!this._checkForExclusion(l.target)){if(this._trigger("beforeOpen",{target:n,events:l}))return!1;if(this._preventContextOpen){if(this._targetElement=t.isNullOrUndefined(n)?t.isNullOrUndefined(target)?this.element:target:n,o){var r=this._calculateContextMenuPosition(l);i=r.X,s=r.Y}this.element.css({left:i,top:s}),this.element.css({"z-index":this._max_zindex()+1}),this._showAnimation(this.element,this._showAnim),this._isContextMenuOpen=!0,this.element.focus(),this._trigger("open",{target:n}),this._on(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)}return!1}},_checkForExclusion:function(i){var s,n;if(!t.isNullOrUndefined(this.model.excludeTarget))for(s=this.model.excludeTarget.split(","),n=0;n<s.length;n++)if(e(i).closest(this.model.excludeTarget).is(e.trim(s[n])))return!0},hideContextMenu:function(i){this._closeMenu(),this.element.find(".e-mhover").removeClass("e-mhover"),this.element.find(".e-mfocused").removeClass("e-mfocused"),this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)},disableItem:function(t){var i=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});i.length>0&&!(e.inArray(i.parent()[0],this._disabledMenuItems)>-1)&&(i.parent().addClass("e-disable-item").attr({"aria-disabled":!0}),i.parent().find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i.parent()[0]))},disableItemByID:function(t){if(t&&""!=t){var i=this.element.find("#"+t)?this.element.find("#"+t)[0]:s;!i||e.inArray(i,this._disabledMenuItems)>-1||(e(i).addClass("e-disable-item").attr({"aria-disabled":!0}),e(i).find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i))}},getHiddenItems:function(){return this._hiddenMenuItems},hideItems:function(e){if("object"==typeof e&&e.length!==s)for(var t=0;t<e.length;t++)this._processItems(e[t],!1);else this._processItems(e,!1)},showItems:function(e){if("object"==typeof e&&e.length!==s)for(var t=0;t<e.length;t++)this._processItems(e[t],!0);else this._processItems(e,!0)},enableItem:function(t){var i,s=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});s.length>0&&e.inArray(s.parent()[0],this._disabledMenuItems)>-1&&(s.parent().removeClass("e-disable-item").attr({"aria-disabled":!1}),s.parent().find(">a.aschild span.e-icon").removeClass("e-disable"),i=this._removeValue(s,this._disabledMenuItems),this._disabledMenuItems.splice(i,1))},enableItemByID:function(t){var i,s;if(t&&""!=t&&(i=this.element.find("#"+t)[0])&&e.inArray(i,this._disabledMenuItems)>-1)for(e(i).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(i).find(">a.aschild span.e-icon").removeClass("e-disable"),s=this._disabledMenuItems.length-1;s>=0;s--)this._disabledMenuItems[s].id==t&&this._disabledMenuItems.splice(s,1)},disable:function(){this.model.enabled=!1;var t=this.element.find(">li[class~=e-list]"),i=this;e.each(t,function(t,s){e.inArray(s,i._disabledMenuItems)>-1||(e(s).addClass("e-disable-item").attr({"aria-disabled":!0}),e(s).find(">a.aschild span.e-icon").addClass("e-disable"),i._disabledMenuItems.push(s))})},enable:function(){var t,i=this;this.model.enabled=!0,t=this.element.find("li.e-disable-item"),e.each(t,function(t,s){e(s).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(s).find(">a.aschild span.e-icon").removeClass("e-disable"),i._disabledMenuItems.pop(s)})},show:function(e,t,i,s){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.showContextMenu(e,t,i,s,!1):this.element.css("display","block")},hide:function(e){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.hideContextMenu(e):(this._closeMenu(),this.element.css("display","none"))},_wireEvents:function(t){this[t](this.element.find("li.e-list"),"mouseout",this._mouseOutHandler),this[t](this.element.find("li.e-list"),"mouseover",this._mouseOverHandler),this[t](this.element,"click",this._onClickHandler),this[t](this.element,"keydown",this._onKeyDownHandler),this[t](this.element,"focus",this._OnFocusHandler),this[t](this.element,"blur",this._OnFocusOutHandler),"contextmenu"==this.model.menuType&&null!=e(this.model.contextMenuTarget)[0]&&this._contextMenuEvents(t),"contextmenu"!=this.model.menuType&&(this[t](e(document),"click",this._onDocumentClick),this[t](this.element,"mousedown",this._onMouseDownHandler))},_mouseOverHandler:function(i){var s,n;if(this.element.find(".e-mhover").removeClass("e-mhover"),i.currentTarget=e(i.target).closest("li")[0],e(i.currentTarget).hasClass("e-disable-item")?this._isFocused=!1:e(i.currentTarget).addClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!0,this._isMenuOpen=!0,this._isSubMenuOpen=!e(i.currentTarget.parentNode.parentNode).is(this.element),"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}e(i.currentTarget).hasClass("e-disable-item")||this._onMenuIntent(s,this,this._hoverOpen),e.inArray(s,this._disabledMenuItems)>-1||(n={text:e(s).children("a,span").text(),element:s,event:i,ID:t.isNullOrUndefined(s)?"":e(s)[0].id},this._trigger("mouseover",e.extend({events:n},n)))},_onMouseDownHandler:function(t){e(t.target).hasClass("e-menu")&&(this._isFocused=!1)},_mouseOutHandler:function(i){var s,n;if(e(i.currentTarget).removeClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!1,this._isMenuOpen=!1,"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}this._onHide(s,this,this._hoverClose),e.inArray(s,this._disabledMenuItems)>-1||(n={text:e(s).children("a,span").text(),element:s,event:i,ID:t.isNullOrUndefined(s)?"":e(s)[0].id},this._trigger("mouseout",e.extend({events:n},n)))},_onClickHandler:function(i){var s,n,l,o,r,a="";this._isFocused=!0,n=!1,!e(i.target).closest("li.e-list").hasClass("e-disable-item")&&e(i.target).closest("li.e-list").length>0?(s=e(i.target).closest("li.e-list")[0],e(s).is(this.element.find(">li.e-list"))&&(this._activeElement=s),e(i.target).is("a")&&e(s).find(">a,>span").hasClass("aschild")&&this.model.openOnClick&&(this._isFocused=!1),!this._hoverOpen&&e(s).find(">a,>span").hasClass("aschild")&&(this._show(s,this._showAnim,this._hideAnim),this._hoverOpen=!1,n=!0),e.inArray(s,this._disabledMenuItems)>-1||("contextmenu"==this.model.menuType&&this._isContextMenuOpen&&!e(s).hasClass("e-haschild")&&(this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),n||e(s).find(">a,>span").hasClass("aschild")||(this._closeMenu(),this.model.openOnClick&&(this._hoverOpen=!1)),l=e(s).children("a,span").text(),0!=(o=e(s).closest("ul").parent("li")).length?(parentId=t.isNullOrUndefined(o.attr("id"))?null:o.attr("id"),parentText=o.children("a,span").text()):(parentId=null,parentText=null),a=t.isNullOrUndefined(s)?"":e(s)[0].id,r={text:l,element:s,event:i,selectedItem:this.selectedItem,ID:a,parentId:parentId,parentText:parentText},this._trigger("click",e.extend({events:r},r)),this.selectedItem=null,this.model.openOnClick&&"contextmenu"!=this.model.menuType&&this.element.focus())):e(i.target).is(this.element)&&(this._activeElement=this.element.find(">li:first"))},_onKeyDownHandler:function(i){var s,n,l;if("contextmenu"!=this.model.menuType||this._isContextMenuOpen){var o,r,a,d="",h=this.element.find(".e-mhover"),c=this.element.find(".e-mfocused");if(!e(h).length>0&&e(this._activeElement).length>0&&(h=c=e(this._activeElement)),9==i.keyCode?(this._isFocused=!1,this._OnFocusOutHandler()):(37==i.keyCode||38==i.keyCode||39==i.keyCode||40==i.keyCode)&&i.preventDefault(),40==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-mhover").children("ul").length>0||e(this._activeElement).length>0?("none"===e(h).children("ul").css("display")&&this._show(h[h.length-1],this._showAnim,this._hideAnim),h.removeClass("e-mhover e-mfocused").children("ul:first").find("li:first").addClass("e-mhover"),null==this._activeElement?h.addClass("e-mfocused"):e(this._activeElement).addClass("e-mfocused")):(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e(h[h.length-1]).removeClass("e-mfocused e-mhover"),(r=e(liVisible[liVisible.index(h)+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()).addClass("e-mhover")):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mfocused"),h.length>0?(h.removeClass("e-mhover"),r=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()):r=liVisible.first(),r.addClass("e-mhover"))),39==i.keyCode&&("horizontal"==this.model.orientation&&(this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0)?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()).addClass("e-mhover")):e(h).children("ul").length>0?(h.removeClass("e-mfocused e-mhover"),s=h.children("ul:first").find("li:first"),this._show(h[h.length-1],this._showAnim,this._hideAnim),liVisible=h.addClass("e-mfocused").children("ul:first").children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(s)]).length>0?e(liVisible[liVisible.index(s)]):liVisible.first()).addClass("e-mhover")):h.children("ul").length<=0&&"horizontal"==this.model.orientation&&h.parent().closest(".e-list").parent().hasClass("e-menu")&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(c[c.length-1])+1]).length>0?e(liVisible[liVisible.index(c[c.length-1])+1]):e(liVisible[liVisible.index(c.first())])).addClass("e-mhover"))),38==i.keyCode&&("horizontal"==this.model.orientation?(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mhover"),r=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.length>0?(h.removeClass("e-mfocused e-mhover"),r=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):r=liVisible.last()),r.addClass("e-mhover")),37==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.find("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()).addClass("e-mhover")):(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused e-active"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=h.parent().closest(".e-list").parent(".e-menu").length>0?e(liVisible[liVisible.index(c[c.length-1])-1]).length>0?e(liVisible[liVisible.index(c[c.length-1])-1]):liVisible.last():e(liVisible[liVisible.index(c[c.length-1])]).length>0?e(liVisible[liVisible.index(c[c.length-1])]):liVisible.last()).addClass("e-mhover")):(0==h.parent("ul.e-menu").length||"contextmenu"==this.model.menuType&&0==h.parent("ul.e-context").length)&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(r=e(liVisible[liVisible.index(c[c.length-1])]).length>0?e(liVisible[liVisible.index(c[c.length-1])]):e(liVisible[liVisible.index(c.last())])).addClass("e-mhover"))),13==i.keyCode&&(n=e(h).children("a,span").text(),d=t.isNullOrUndefined(e(h)[0])?"":e(h)[0].id,l={menuId:this.element[0].id,text:n,selectedItem:c,ID:d},"contextmenu"==this.model.menuType?this._isContextMenuOpen&&h.length>0&&!c.hasClass("e-disable-item")&&(this.model.click&&this._trigger("click",e.extend({events:l},l)),this.selectedItem=null,this.hideContextMenu(i)):h.length>0&&!h.hasClass("e-disable-item")&&(e(h).find(">a,>span").hasClass("aschild")&&"none"===e(h).children("ul").css("display")?(this._show(h[0],this._showAnim,this._hideAnim),h.removeClass("e-mhover").children("ul:first").find("li:first").addClass("e-mhover")):(this.element.find(".e-mhover >a,.e-mhover >span ").focus(),this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),t.isNullOrUndefined(e(h).find(">a").attr("href"))&&this._trigger("click",e.extend({events:l},l)))),27==i.keyCode&&("contextmenu"==this.model.menuType?this.hideContextMenu(i):this.element.find("li.e-list").removeClass("e-mhover"),this.element.find('li.e-list:has("> ul")').find("> ul:visible").parents("li.e-list").addClass("e-mhover"),this._closeAll()),!e(i.target).is(this.element)||!i.target.parentNode)return!1;h.length&&(o=h),e.inArray(o,this._disabledMenuItems)>-1||(n=e(o).children("a,span").text(),d=t.isNullOrUndefined(o)?"":e(o)[0].id,(this.element.find("li.e-mfocused.e-mhover").length||13==i.keyCode)&&(a=13==i.keyCode?h:this.element.find("li.e-mfocused.e-mhover")),l={text:n,element:o,targetElement:a,event:i,ID:d},this._trigger("keydown",e.extend({events:l},l))),this._activeElement=null,c=this.element.find(".e-mfocused")}},_OnFocusHandler:function(){"contextmenu"!=this.model.menuType&&!this.element.find(">li:first").hasClass("e-disable-item")&&this._isFocused&&0==this.element.find(".e-mhover").length?this.element.find(">li:first").addClass("e-mhover"):this._isFocused=!0,"contextmenu"!=this.model.menuType&&(this._activeElement=this.element.find(">li:first"))},_OnFocusOutHandler:function(){this._isFocused||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),this._isFocused=!1},_onDocumentClick:function(t){this.model.openOnClick&&(this._hoverOpen=!1),e(t.target).parents("ul.e-menu").is(this.element)||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll(),this._isFocused=!0)},_ContextMenuHandler:function(e){var t,i,s,n,l=!1;"taphold"==e.type?l=!0:e.button?l=2==e.button:e.which&&(l=3==e.which),t=e.target,l?(i=e,"taphold"==e.type&&(i="touchstart"==e.options.type?e.options.touches[0]:e.options),this._showSpeed,this.showContextMenu(null,null,t,i,!0)):this._isContextMenuOpen&&(s=this._hideAnim,n=this._hideSpeed,this.hideContextMenu(e,s,n))},_calculateContextMenuPosition:function(t){locationX=t.clientX+this.element.width()<e(window).width()?t.pageX:t.pageX-this.element.width(),locationY=t.clientY+this.element.height()<e(window).height()?t.pageY:t.clientY>this.element.height()?t.pageY-this.element.height():e(window).height()-this.element.outerHeight();var i="static"!=e("body").css("position")?e("body").offset():{left:0,top:0};return locationX-=i.left,locationY-=i.top,{X:locationX,Y:locationY}},_onDefaultPreventer:function(e){return e.preventDefault(),e.stopPropagation(),!1},_onContextClose:function(t){var i,s,n,l,o=this;this._isContextMenuOpen&&(i=!1,(e(t.target).is(this.element)||e(t.target).parents(".e-context").is(this.element))&&(i=!0),i||(s=this._hideAnim,n=this._hideSpeed,this.hideContextMenu(t,s,n),l=e(t.target).parents(),e.each(l,function(e,t){t.id,o._ContextTargetId})))}}),t.MenuType={NormalMenu:"normalmenu",ContextMenu:"contextmenu"},t.Direction={Left:"left",Right:"right",None:"none"},t.AnimationType={None:"none",Default:"default"}}),
/*!
*  filename: ej.treeview.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./../common/ej.draggable.min","./ej.checkbox.min","./ej.waitingpopup.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejTreeView","ej.TreeView",{_rootCSS:"e-treeview",element:null,model:null,validTags:["ul","div"],_addToPersist:["expandedNodes","checkedNodes","selectedNodes"],_setFirst:!1,_requiresID:!0,defaults:{allowMultiSelection:!1,showCheckbox:!1,enableAnimation:!0,allowDragAndDrop:!1,htmlAttributes:{},allowDropChild:!0,allowDropSibling:!0,allowDragAndDropAcrossControl:!0,allowEditing:!1,allowKeyboardNavigation:!0,items:null,fields:{dataSource:null,query:null,tableName:null,child:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",expanded:"expanded",hasChild:"hasChild",selected:"selected",linkAttribute:"linkAttribute",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",imageUrl:"imageUrl",isChecked:"isChecked"},autoCheckParentNode:!1,loadOnDemand:!1,cssClass:"",template:null,enableRTL:!1,expandOn:"dblclick",enablePersistence:!1,enabled:!0,expandedNodes:[],checkedNodes:[],selectedNode:-1,selectedNodes:[],width:null,height:null,autoCheck:!0,enableMultipleExpand:!0,fullRowSelect:!1,sortSettings:{allowSorting:!1,sortOrder:"ascending"},nodeClick:null,beforeExpand:null,nodeExpand:null,beforeCollapse:null,nodeCollapse:null,beforeSelect:null,nodeSelect:null,nodeUnselect:null,nodeCheck:null,nodeUncheck:null,inlineEditValidation:null,beforeEdit:null,nodeEdit:null,keyPress:null,nodeDragStart:null,nodeDrag:null,nodeDragStop:null,nodeDropped:null,beforeAdd:null,nodeAdd:null,beforeDelete:null,nodeDelete:null,beforeCut:null,nodeCut:null,beforePaste:null,nodePaste:null,beforeLoad:null,loadSuccess:null,loadError:null,ready:null,create:null,destroy:null},dataTypes:{allowMultiSelection:"boolean",cssClass:"string",showCheckbox:"boolean",enableAnimation:"boolean",allowDragAndDrop:"boolean",allowDropChild:"boolean",allowDragAndDropAcrossControl:"boolean",allowEditing:"boolean",allowKeyboardNavigation:"boolean",autoCheckParentNode:"boolean",loadOnDemand:"boolean",enableRTL:"boolean",expandOn:"string",enablePersistence:"boolean",enableMultipleExpand:"boolean",fullRowSelect:"boolean",items:"data",fields:{dataSource:"data",query:"data",child:"data"},expandedNodes:"array",checkedNodes:"array",selectedNode:"number",selectedNodes:"array",htmlAttributes:"data",sortSettings:{allowSorting:"boolean",sortOrder:"enum"}},observables:["fields.dataSource"],dataSource:t.util.valueFunction("fields.dataSource"),_setModel:function(i){var s,n,l,o,r,a,d,h;for(s in i)switch(s){case"allowMultiSelection":this.model.allowMultiSelection=i[s],this.model.allowMultiSelection||(n=e(this._liList[this.model.selectedNodes[0]]),this._unselectAll(),this._isRender=!1,this._nodeSelectionAction(n),this._isRender=!0);break;case"cssClass":this._changeSkin(i[s]);break;case"fields":this._unWireEvents(),(r=(o=!this.element.hasClass("e-js"))?this.element.children("ul"):this.element).empty(),null==this.model.fields||null==i[s]?this.model.fields=i[s]:this._extendFields(this.model.fields,i[s]),this.model.expandedNodes=[],this.model.checkedNodes=[],this.model.selectedNodes=[],this._persistValues(this.model.expandedNodes,"expandedNodes"),this._persistValues(this.model.checkedNodes,"checkedNodes"),this._persistValues(this.model.selectedNodes,"selectedNodes"),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()?this._initialize():this._checkDataBinding(),o&&(l=this.element.children(".e-treeview-ul"),r.append(l.children()),l.remove());break;case"allowDragAndDropAcrossControl":this.model.allowDragAndDropAcrossControl=i[s],this._enableDragDrop();break;case"enabled":this._enabledAction(i[s]);break;case"showCheckbox":i[s]?(this.model.showCheckbox=i[s],this._showCheckBox(),this.model.enabled||this.element.find(".nodecheckbox").ejCheckBox("disable")):(this.element.find(".e-item > div > .e-chkbox-wrap").remove(),this._updateCheckedNodes());break;case"autoCheck":this.model.autoCheck=i[s];break;case"autoCheckParentNode":this.model.autoCheckParentNode=i[s];break;case"expandedNodes":if(h=i[s].length,a=JSON.parse(JSON.stringify(this.model.expandedNodes)),h>0)for(this._expandNodes(i[s]),d=0,h=a.length;d<h;d++)-1==i[s].indexOf(a[d])&&this._collpaseNode(e(this._liList[a[d]]));else 0==h&&this._collapseAll();i[s]=this.model.expandedNodes;break;case"checkedNodes":if(this.model.showCheckbox)if(h=i[s].length,a=JSON.parse(JSON.stringify(this.model.checkedNodes)),h>0)for(this._checkedNodes(i[s]),d=0,h=a.length;d<h;d++)-1==i[s].indexOf(a[d])&&this._nodeUncheck(e(this._liList[a[d]]).find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]);else 0==h&&this._uncheckAll();i[s]=this.model.checkedNodes;break;case"expandOn":this._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:this.model.expandOn,this._expandEventHandler),this._assignTouchExpandOn(i[s]),this._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:i[s],this._expandEventHandler);break;case"allowEditing":this._preventEditable(),i[s]&&this._allowEditable();break;case"allowKeyboardNavigation":this[i[s]?"_on":"_off"](this.element,"keydown",this._KeyPress);break;case"allowDragAndDrop":this.model.allowDragAndDrop=i[s],i[s]?this._addDragableClass():this._preventDraggable();break;case"allowDropChild":this.model.allowDropChild=i[s],i[s]?this._addDragableClass():this._preventDropChild();break;case"allowDropSibling":this.model.allowDropSibling=i[s],i[s]?this._addDragableClass():this._preventDropSibling();break;case"enableRTL":this.model.enableRTL=i[s],(this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element)[this.model.enableRTL?"addClass":"removeClass"]("e-rtl");break;case"height":this.element.is("ul")?this.element.parent().height(i[s]):this.element.height(i[s]);break;case"width":this.element.is("ul")?this.element.parent().width(i[s]):this.element.width(i[s]);break;case"selectedNode":case"selectedNodes":this.model.selectedNodes="selectedNode"==s?[i[s]]:i[s],this.element.find("a.e-text.e-active").removeClass("e-node-focus e-active").closest("li").attr("aria-selected",!1),this._doSelectNodes(this.model.selectedNodes,!1),"selectedNode"!=s&&(i[s]=this.model.selectedNodes);break;case"htmlAttributes":this._addAttr(i[s]);break;case"enableMultipleExpand":i[s]||this.collapseAll(),this.model.enableMultipleExpand=i[s];break;case"sortSettings":e.extend(this.model.sortSettings,i[s]),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||(this.model.expandedNodes=[],this.model.checkedNodes=[],this.model.selectedNodes=[],this._checkDataBinding());break;case"fullRowSelect":this._wholeRowEvents("_off"),this.model.fullRowSelect=i[s],this.model.fullRowSelect?this._addWholeRowWrap():this._removeWholeRowWrap(),this._doWholeRowAction(),this._wholeRowEvents("_on")}},_destroy:function(){this.element.html(""),this._cloneElement.removeClass("e-treeview e-js e-treeview-wrap"),(this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element).replaceWith(this._cloneElement),e("#"+this._id+"_WaitingPopup").remove(),window.localStorage?(window.localStorage.removeItem(this._id+"_childNodes"),window.localStorage.removeItem(this._id+"_persistedValues")):window.cookie&&(document.cookie=this._id+"_childNodes=; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie=this._id+"_persistedValues=; expires=Thu, 01 Jan 1970 00:00:00 UTC")},_init:function(){var e;this._cloneElement=this.element.clone(),this._dataSource=[],this._fragment=[],this._templateType="",this._indexID=0,this._newDataSource=this.dataSource(),this._id=this.element.prop("id"),this._treeList=[],this._isTextbox=!1,this._isDevice=this._checkDevice(),this._assignTouchExpandOn(this.model.expandOn),this.model.enablePersistence&&(this._getCookies("_persistedValues")||(e={selectedNodes:[],expandedNodes:[],checkedNodes:[]},e=this._updatePersistAttr(e),this._setCookies("_persistedValues",JSON.stringify(e)))),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()?(this._initialize(),this._completeRendering()):this._checkDataBinding()},_initialize:function(){this._cutNode=null,this._beforeEditText=null,this._CurrenctSelectedNodes=[],this._isLoaded=!1,this._renderMultiTouchDialog(),this.element.is("ul")?this._createWrapper():(this.element.addClass("e-treeview-wrap e-widget").attr("tabindex",0).children("ul:first").addClass("e-ul e-box"),null!=this.model.width&&this.element.width(this.model.width),null!=this.model.height&&this.element.height(this.model.height),this.model.enableRTL&&this.element.addClass("e-rtl"),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this._addAttr(this.model.htmlAttributes)),this._elementSettings(),this._beforeBaseClass(),null==this.dataSource()&&(this._addBaseClass(),this._controlRender()),this._addWholeRowWrap(),this._finalize()},_completeRendering:function(){0!=this._treeList.length||this._isLoaded||(this._finalizeNode(),this._enabledAction(this.model.enabled),this._triggerEvent("ready",{element:this.element[0]}),this._isLoaded=!0)},_addWholeRowWrap:function(){this.model.fullRowSelect&&(this.element.is("UL")?this.element.parent(".e-treeview-wrap").addClass("e-fullrow-wrap"):this.element.addClass("e-fullrow-wrap"))},_removeWholeRowWrap:function(){this.element.is("UL")?this.element.parent(".e-treeview-wrap").removeClass("e-fullrow-wrap"):this.element.removeClass("e-fullrow-wrap")},_doWholeRowAction:function(){var t,i,s,n;if(this.model.fullRowSelect)for(t=0,i=this._liList.length;t<i;t++)null!=(s=e(this._liList[t]))[0]&&(n=s.find("> .e-text-wrap"),this._renderWholeRow(s,n));else this.element.find(".e-fullrow").remove()},_renderWholeRow:function(t,i){if(t&&this.model.fullRowSelect){var s=document.createElement("div");s.setAttribute("class","e-fullrow"),i?e(s).insertAfter(i):t[0].appendChild(s)}},_extendFields:function(t,i){if(null==t||null==i)t=i;else if(null==t.child||null==i.child)e.extend(t,i);else{this._extendFields(t.child,i.child);var s=t.child;e.extend(t,i),e.extend(t.child,s)}},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_assignTouchExpandOn:function(e){this._touchExpandOn="dblclick"==e?"doubletap":"click"==e?"tap":e},_renderMultiTouchDialog:function(){var i,s,n;this._customPop=t.buildTag("div.e-fe-popup","",{display:"none"}),i=t.buildTag("div.e-content"),s=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSelection&&(n=t.buildTag("span.e-rowselect e-icon"),i.append(n)),this._customPop.append(i),this._customPop.append(s),this.element.append(this._customPop),this._on(i,this._isDevice&&e.isFunction(e.fn.tap)?"touchstart":"mousedown",this._popupClick)},_popupClick:function(){var e=this._customPop.find(".e-rowselect");e.hasClass("e-spanclicked")?this._hidePopup():(this._isPopup=!0,e.addClass("e-spanclicked"))},_hidePopup:function(){null!=this._customPop&&this._customPop.is(":visible")&&(this._customPop.find(".e-rowselect").removeClass("e-spanclicked"),this._customPop.hide(),this._isPopup=!1)},_elementSettings:function(){var e=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;this.element.is("ul")?e.attr("role","tree"):e.attr("aria-activedescendant",this._id+"_active").children("ul:first").attr("role","tree")},_beforeBaseClass:function(){var t=this.element.is("UL")?this.element.parent(".e-treeview-wrap")[0]:this.element[0];this._ulList=e(t.querySelectorAll("ul")),this._liList=e(t.querySelectorAll("li"))},_createWrapper:function(){var e=t.buildTag("div.e-treeview-wrap e-widget "+this.model.cssClass,"","",{tabindex:0,"aria-activedescendant":this._id+"_active"});null!=this.model.width&&e.width(this.model.width),null!=this.model.height&&e.height(this.model.height),this.model.enableRTL&&e.addClass("e-rtl"),e.insertAfter(this.element),e.append(this.element.addClass("e-ul e-box").attr("tabindex",0)),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i._enabledAction(!1):i.element.attr(t,e)})},_changeSkin:function(e){if(this.model.cssClass!=e){var t=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;t.removeClass(this.model.cssClass).addClass(e),t.find(".e-item > div > .e-chkbox-wrap").removeClass(this.model.cssClass).addClass(e),this._waitingPopup&&this._waitingPopup.option("cssClass",e)}},_enabledAction:function(e){this.model.enabled=e,e?(this.element.removeClass("e-disable"),this._wireEvents()):(this.element.addClass("e-disable"),this._unWireEvents())},_checkDataBinding:function(){this.dataSource()instanceof t.DataManager?this._initDataSource():(this._ensureDataSource(this.dataSource()),this._initialize(),this._completeRendering())},_initDataSource:function(){this.element.ejWaitingPopup({cssClass:this.model.cssClass}),this._waitingPopup=this.element.ejWaitingPopup("instance"),this._waitingPopup.maindiv.addClass("e-tree-popup");var e,i=this;this.element.ejWaitingPopup("refresh"),this.element.ejWaitingPopup("show"),e=this._columnToSelect(this.model.fields),this.dataSource().executeQuery(e).done(function(e){i.element.ejWaitingPopup("hide"),i.retriveData=e.xhr&&e.xhr.responseJSON&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],i._typeOfFieldId=i.retriveData[0]?(typeof i.retriveData[0][i.model.fields.id]).toLowerCase():"",i._ensureDataSource(i.retriveData),i._initialize(),(i.model.loadOnDemand||t.isNullOrUndefined(i.model.fields.child))&&i._completeRendering()})},_columnToSelect:function(e){var i,s=[],n=t.Query();if(e.query||t.isNullOrUndefined(e.tableName))n=e.query?e.query:n;else{for(i in e)"tableName"!==i&&"child"!==i&&"dataSource"!==i&&e[i]&&s.push(e[i]);s.length>0&&n.select(s),this.dataSource().dataSource.url.match(e.tableName+"$")||t.isNullOrUndefined(e.tableName)||n.from(e.tableName)}return n},_ensureDataSource:function(e){e=this._getSortAndFilterList(this.model.fields,e),this.currentSelectedData=e,this._renderTemplate(e),this.element.is("ul")?this.element.html(this._fragment.firstChild.children):this.element.html(this._fragment)},_getTemplateType:function(e,t){for(var i=0,s=e.length;i<s;i++){if(e[i].hasOwnProperty(t.parentId)||e[i].hasOwnProperty(t.hasChild))return 1;if(e[i].hasOwnProperty("child"))return 2}return 1},_groupingObjects:function(e,t){for(var i,s={},n=[],l=0,o=e.length;l<o;l++)s[i=JSON.stringify(t(e[l]))]=s[i]||[],s[i].push(e[l]);for(l in s)n.push(s[l]);return n},_renderTemplate:function(e){this._onlineData=!1,this._loadOnDemandNodes=!1;var i=this;this._templateType=this._getTemplateType(e,this.model.fields),this._dataSource=1==this._templateType?this._groupingObjects(e,function(e){return[!t.isNullOrUndefined(e)&&[e[i.model.fields.parentId]].toString()]}):e,this._templateNodeCreation(e,this.model.fields)},_templateNodeCreation:function(i,s){var n,l,o,r;if(this._fragment=document.createDocumentFragment(),n=document.createElement("ul"),this._fragment.appendChild(n),l=this._fragment.firstChild,(this._onlineData||this._loadOnDemandNodes)&&(l.className="e-treeview-ul",l.setAttribute("role","group"),e(l).attr("style","display:none")),null!=this.dataSource()){for(o=0,r=i.length;o<r;o++)i[o]&&(t.isNullOrUndefined(i[o][this.model.fields.parentId])||0==i[o][this.model.fields.parentId]||this._loadOnDemandNodes)&&l.appendChild(this._genTemplate(i[o],s));e(l).find(".e-item:first-child:not(:last-child)").addClass("first"),e(l).find(".e-item:last-child").addClass("last")}},_onlineDataSource:function(t,i,s){this._loadOnDemandNodes=!0,this._templateNodeCreation(t,s);var n=this.element.find(".e-item#"+i);null!=n[0]&&(e(n[0]).append(this._fragment),n.children().find("> div:first").addClass("e-icon e-plus"),this._finalizeLoadOnDemand(n)),this._onlineData=!1},_genTemplate:function(i,s){var n,l,o,r,a,d,h,c,u,m,p,g,f=document.createDocumentFragment();if(l=document.createElement("li"),f.appendChild(l),(n=f.firstChild).id=i[s.id]?i[s.id]:"",n.setAttribute("role","treeitem"),i[s.htmlAttribute]&&this._setAttributes(i[s.htmlAttribute],n),n.className+=" e-item",r=document.createElement("a"),i[s.imageUrl]?((o=document.createElement("img")).className="e-align",o.src=i[s.imageUrl],i[s.imageAttribute]&&this._setAttributes(i[s.imageAttribute],o)):i[s.spriteCssClass]&&((o=document.createElement("span")).className=i[s.spriteCssClass]),this.model.template){if(o&&r.appendChild(o),"function"!=typeof e.fn.render)throw"Error : JsRender dependecy script missing";r.innerHTML+=this._renderEjTemplate(this.model.template,i)}else i[s.text]?e(r).text(i[s.text]):e(r).text("undefined"),o&&r.insertBefore(o,r.lastChild);if(i[s.linkAttribute]&&("object"==typeof i[s.linkAttribute]?this._setAttributes(i[s.linkAttribute],r):r.href=i[s.linkAttribute]),n.appendChild(r),i[s.expanded]&&(n.className+=" expanded"),i[s.selected]&&(n.className+=" selected"),t.isNullOrUndefined(i[s.isChecked])||(n.className+=i[s.isChecked]?" checked":" unchecked"),n.setAttribute("aria-selected",!1),n.setAttribute("aria-expanded",!1),this.dataSource()instanceof t.DataManager)this._updateElement(n,!0),this.model.showCheckbox&&this._checkboxOnTemplate(n.children[0]),this.model.loadOnDemand?(i[s.hasChild]||i.hasOwnProperty("child"))&&(n.children[0].firstChild.className="e-icon e-plus"):!t.isNullOrUndefined(s.child)&&s.child.dataSource instanceof t.DataManager?(d=this,h=s.child.parentId?s.child.parentId:d.model.fields.parentId,c=s.id?s.id:this.model.fields.id,this._treeList.push("false"),this._executeDataQuery(s.child,h,"number"==this._typeOfFieldId?parseInt(i[c]):i[c]).done(function(e){d._treeList.pop(),a=e.xhr&&e.xhr.responseJSON&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],(a=d._getSortAndFilterList(s.child,a))&&a.length>0&&(d._onlineData=!0,d._onlineDataSource(a,a[0][s.child.parentId],s.child)),0==d._treeList.length&&d._completeRendering()})):t.isNullOrUndefined(this.model.fields.child)&&this._childNodeCreation(i,n,s);else if(this.model.loadOnDemand){if(this._updateElement(n,!0),(i[s.hasChild]||i.hasOwnProperty("child"))&&(n.children[0].firstChild.className="e-icon e-plus"),this.model.showCheckbox&&this._checkboxOnTemplate(n.children[0]),i[s.expanded]&&this._childNodeCreation(i,n,s),this.model.enablePersistence&&(u=this._getCookies("_childNodes")))for(p=0,g=(m=JSON.parse(u)).length;p<g;p++)if(m[p].toString()==i[s.id].toString()){this._childNodeCreation(i,n,s);break}}else this._onlineData||(this._updateElement(n,!0),this.model.showCheckbox&&this._checkboxOnTemplate(n.children[0]),this._childNodeCreation(i,n,s));return n},_childNodeCreation:function(i,s,n){var l,o,r,a,d,h;if(l=2==this._templateType?!t.isNullOrUndefined(i.child)&&i.child.length>0&&i.child:this._getChildNodes(this._dataSource,{id:i[n.id]}),!t.isNullOrUndefined(l)&&l.length>0){for(s.children[0].firstChild.className="e-icon e-plus",o=document.createDocumentFragment(),r=document.createElement("ul"),o.appendChild(r),(a=o.firstChild).className="e-treeview-ul",a.setAttribute("role","group"),e(a).attr("style","display:none"),d=0,h=l.length;d<h;d++)l[d]&&a.appendChild(this._genTemplate(l[d],n));s.appendChild(r)}},_checkboxOnTemplate:function(e){""==e.parentElement.id&&(e.parentElement.id=this._id+"_"+this._indexID,this._indexID++);var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("class","nodecheckbox"),t.setAttribute("name",this._id+"_Checkbox_"+e.parentElement.id),t.setAttribute("value",e.parentElement.id),e.insertBefore(t,e.children[1])},_updateElement:function(t,i){var n,l,o,r,a,d,h,c=t.firstChild;c&&("SPAN"==(a=c.nodeName)||"IMG"==a?(r=c,o=t.lastChild):o=t.lastChild,o&&(h=null!=o.lastChild?o.lastChild.nodeValue:"",d=e.trim(o.innerHTML),textElement=e(o).clone()[0],e(o).remove(),textElement.className+=" e-text CanSelect",textElement.innerHTML=d,t.innerHTML=""),(n=document.createElement("div")).setAttribute("class","e-text-wrap"),n.setAttribute("role","presentation"),i&&((l=document.createElement("div")).setAttribute("role","presentation"),n.appendChild(l)),r&&n.appendChild(r),n.appendChild(textElement),e(t).prop("name")==s&&e(t).prop("name",e.trim(h)),t.appendChild(n),this._renderWholeRow(e(t)))},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_addDragableClass:function(){this.model.allowDragAndDrop&&(this._anchors=this._liList.map(function(){return e("a.e-text",this)[0]}),this._anchors.addClass("e-draggable e-droppable"),this._enableDragDrop(),this._on(this.element,"mouseup touchstart pointerdown MSPointerDown",this._anchors,this._focusElement))},_addBaseClass:function(){this._ulList.addClass("e-treeview-ul").attr("role","group"),this._liList.addClass("e-item").attr("role","treeitem"),this.element.is("ul")||this.element.find("ul:first").removeClass("e-treeview-ul").addClass("e-ul")},_controlRender:function(){var i,n,l,o,r,a,d,h,c,u,m,p=this.element;if(null!=p){for(i=p.find(".e-item"),n=0;n<i.length;n++)(d=(l=e(i[n])).children("ul")[0])&&e(l.children("ul")[0]).remove(),(h=l.children("a")[0])?(a=e.trim(e(h).text()),o=e(h).clone(),e(h).remove(),r=l.clone(),e(o).prepend(r.children()),e(o).addClass("e-text CanSelect"),l.html("")):(a=e.trim(this._getText(l)),r=l.clone(),l.html(""),(o=t.buildTag("a.e-text CanSelect","","",{alt:""})).append(r.children()),o[0].innerHTML+=a),c=t.buildTag("div","",{},{role:"presentation"}),u=t.buildTag("div.e-text-wrap","",{},{role:"presentation"}),e(u).append(c).append(o),l.prepend(u),this._renderWholeRow(l),d&&l.append(d),l.prop("name")==s&&l.prop("name",a),this.model.showCheckbox&&this._checkboxOnTemplate(i[n].children[0]);this.model.showCheckbox&&p.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})}(m=p.find(".e-item")).find(">ul").hide(),m.find(".e-text").focus(function(){e(this).blur()}),m.filter(".e-item:last-child").addClass("last"),e(m[0]).addClass("first"),e(m[0]).hasClass("first")&&e(m[0]).hasClass("last")&&e(m[0]).removeClass("first"),e(m.filter(":has(ul)")).each(function(){e(this).attr("aria-expanded",!1).attr("aria-selected",!1);var t=e(this).children("ul:first");e(t).is(":hidden")?e(this).find("> div > div:first").removeClass("e-icon e-minus").addClass("e-icon e-plus"):e(this.childNodes[1]).removeClass("e-icon e-plus").addClass("e-icon e-minus")})},_getText:function(t){return e(t).clone().children().remove().end().text()},_expandNodes:function(i){for(var s=i.length,n=[],l=0;l<s;l++)n=e(this._liList[i[l]]),!this.model.enableMultipleExpand&&n.siblings().find(">div>.e-minus").closest(".e-item").length>0||this.isExpanded(n)||(!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(n):this._createChildNodesWhenExpand(n))},_checkedNodes:function(t){var i,s,n;for(t.length>0&&this._removeField(this._newDataSource,this.model.fields.isChecked),s=0,n=t.length;s<n;s++)null!=(i=e(this._liList[t[s]]))[0]&&this._nodeCheck(i.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])},_finalize:function(){this.model.showCheckbox&&this.element.find(".e-item > div .nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),this.model.allowEditing&&this._allowEditable()},_finalizeNode:function(){var i,s,n,l,o;this._isRender=!1;var r,a,d=this.element,h=this._getCookies("_persistedValues"),c=[],u=[];if(!(this.model.expandedNodes instanceof Array&&this.model.expandedNodes.length>0))for(n=(r=d.find("li.expanded")).length,s=0;s<n;s++)i=e(r[s]),!this.model.enableMultipleExpand&&i.siblings().find(">div>.e-minus").closest(".e-item").length>0||this._expandNode(i);if(h&&(c=JSON.parse(h).expandedNodes,u=[]),c&&c.length>0&&!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource()){for(s=0,n=c.length;s<n;s++)if(null!=(u=this.element.find(".e-item#"+c[s]))[0]){if(!this.model.enableMultipleExpand&&u.siblings().find(">div>.e-minus").closest(".e-item").length>0)continue;!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(u):this._createChildNodesWhenExpand(u)}}else a=JSON.parse(JSON.stringify(this.model.expandedNodes)),this._expandNodes(a);if(this.model.showCheckbox)if(h&&(c=JSON.parse(h).checkedNodes,u=[]),c&&c.length>0&&!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource())for(this._removeField(this._newDataSource,this.model.fields.isChecked),s=0,n=c.length;s<n;s++)null!=(u=this.element.find(".e-item#"+c[s]))[0]&&this._nodeCheck(u.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]);else a=JSON.parse(JSON.stringify(this.model.checkedNodes)),this._checkedNodes(a);this.model.checkedNodes instanceof Array&&this.model.checkedNodes.length>0||this.model.showCheckbox&&this._isCheckedAction(),l=!1,h&&(c=JSON.parse(h).selectedNodes,l=!0),(!h||c&&0==c.length)&&(c=this.model.selectedNodes.length>0?this.model.selectedNodes:-1==this.model.selectedNode?[]:[this.model.selectedNode],l=!1),o={ctrlKey:!0},c&&c.length>0?this._doSelectNodes(c,l):this._isSelectedAction(o),this._isRender=!0,d.find(".e-item.checked, .e-item.expanded, .e-item.selected").removeClass("checked expanded selected")},_doSelectNodes:function(t,i){for(var s,n={ctrlKey:!0},l=0,o=t.length;l<o&&(null!=(s=i?this._getNodeByID(t[l]):e(this._liList[t[l]]))[0]&&this._nodeSelectionAction(s,n),this.model.allowMultiSelection);l++);},_doUnselectNodes:function(e){for(var t,i=0,s=e.length;i<s&&(null!=(t=this._getNodeByID(e[i]))[0]&&this._nodeUnSelectionAction(t),this.model.allowMultiSelection);i++);},_updateSelectedNode:function(){var t,i,n,l=e(this._liList).find(".e-text.e-active").closest(".e-item");if(this.model.selectedNodes=[],this.model.allowMultiSelection||(this.model.selectedNode=null),l[0]==s||l.length<=0)this._persistValues(this.model.selectedNodes,"selectedNodes");else if(this.model.allowMultiSelection){for(t=0,i=l.length;t<i;t++)n=e(this._liList).index(l[t]),this.model.selectedNodes.push(n);this._persistValues(this.model.selectedNodes,"selectedNodes")}else this._isRender=!1,this._nodeSelectionAction(e(l[0])),this._isRender=!0},_setCookies:function(e,i){window.localStorage?window.localStorage.setItem(this._id+e,i):document.cookie&&t.cookie.set(this._id+e,i)},_getCookies:function(e){return window.localStorage?window.localStorage.getItem(this._id+e):window.cookie?t.cookie.get(this._id+e):void 0},_updateCheckedNodes:function(){for(var t=[],i=this.element.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox.checked").closest(".e-item"),s=0;s<i.length;s++)t.push(e(this._liList).index(i[s]));(t.length>0||0==i.length)&&(this.model.checkedNodes=t),0==i.length&&this.model.checkedNodes.push(-1),this._persistValues(this.model.checkedNodes,"checkedNodes")},_updateExpandedNodes:function(){var t,i,s,n=[];for(i=0,s=(t=this.element.find(".e-item > div > .e-minus").closest(".e-item").addClass("e-collapse")).length;i<s;i++)n.push(e(this._liList).index(t[i]));(n.length>0||0==t.length)&&(this.model.expandedNodes=n),0==t.length&&this.model.expandedNodes.push(-1),this._persistValues(this.model.expandedNodes,"expandedNodes")},_isCheckedAction:function(){for(var t,i,s,n=this.element.find(".e-item.checked"),l=0;l<n.length;l++)if(t=e(n[l]).find(".e-item"),i=e(n[l]).find(".e-item.unchecked"),0==t.length||!(t.length>0&&i.length==t.length)||!this.model.autoCheck)for(this._nodeCheck(e(n[l]).find("> div > .e-chkbox-wrap > input.nodecheckbox:first")[0]),s=0;s<i.length;s++)this._nodeUncheck(e(i[s]).find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]);this.element.find(".e-item.checked, .e-item.unchecked").removeClass("checked unchecked")},_isExpandedAction:function(){for(var t,i=this.element.find("li.expanded"),s=i.length,n=0;n<s;n++)t=e(i[n]),!this.model.enableMultipleExpand&&t.siblings().find(" > div > .e-minus").closest(".e-item").length>0||this._expandNode(t);this.element.find(".e-item.expanded").removeClass("expanded")},_isSelectedAction:function(t){for(var i=this.element.find(".e-item.selected"),s=0,n=i.length;s<n&&(null!=i[s]&&this._nodeSelectionAction(e(i[s]),t),this.model.allowMultiSelection);s++);this.element.find(".e-item.selected").removeClass("selected")},_checkedChange:function(t){if(t.isInteraction){var i=this.element.closest(".e-treeview.e-js").data("ejTreeView");action=t.isChecked?"_nodeCheck":"_nodeUncheck",i[action](e(this.element)[0],t)}},_ClickEventHandler:function(i){var s,n,l,o,r,a,d,h=e(i.target),c=h.closest(".e-item").find("> div > div:first");if(this._isPopup=!1,c&&!c.hasClass("e-process")&&!(s=h.closest(".e-item")).hasClass("e-node-disable")){if(n=null!=s[0]?s[0].getAttribute("id"):"",this._triggerEvent("nodeClick",{event:i,currentElement:h[0],id:n,parentId:s.closest("ul").closest(".e-item").attr("id")}),!t.isNullOrUndefined(h)&&h.is("DIV"))if(h.hasClass("e-plus")||h.hasClass("e-minus"))if(h.is("SPAN")&&(h=h.parent("div").find("div:first")),s.children("ul:first"),!(r=this.isChildLoaded(s))&&this.model.loadOnDemand){if(h.removeClass("e-plus").addClass("e-load"),this._checkboxChecked=h.parent().find(".nodecheckbox").hasClass("checked"),o=this._getNodeDetails(s),l={currentElement:s,targetElement:h[0],id:o.id,value:o.text,parentId:o.parentId,isChildLoaded:r,hasParent:!0,async:!0},this._isEventTriggered=!0,this._triggerEvent("beforeExpand",l))return!1;this._loadOnDemand(l,h[0])}else h.hasClass("e-plus")?this._expandNode(s):this._collpaseNode(s);else this.model.fullRowSelect&&(h.hasClass("e-fullrow")||h.hasClass("e-text-wrap"))&&(h=h.closest(".e-item").find("> .e-text-wrap .e-text"));h.is("A")||h.hasClass("input-text")||(h=h.closest(".e-text")),!t.isNullOrUndefined(h)&&h.is("A")&&h.hasClass("CanSelect")&&(i&&"touch"==i.pointerType&&null!=this._customPop&&this.model.allowMultiSelection?(a=e(i.target),this._customPop.is(":visible")||this._customPop.show(),this._customPop.is(":visible")&&!this._customPop.find(".e-rowselect").hasClass("e-spanclicked")?(d=a.offset(),this._customPop.offset({left:d.left,top:d.top-40})):i.ctrlKey=!0):this._hidePopup(),h.hasClass("e-active")?this.model.allowMultiSelection&&this._nodeUnSelectionAction(h.closest(".e-item"),i):this._nodeSelectionAction(h.closest(".e-item"),i))}},_getChildTables:function(e,i,s){if(!t.isNullOrUndefined(e.child))return i==s?e.child:this._getChildTables(e.child,i,s+1)},_loadOnDemand:function(i){var s,n,l,o=this;if(this.dataSource()instanceof t.DataManager){if(n=i.currentElement.parents("ul").length,l=this._getChildTables(o.model.fields,n,1),t.isNullOrUndefined(l)&&t.isNullOrUndefined(this.model.fields.child)&&(l=this.model.fields),!l)return void(e(i.targetElement).hasClass("e-load")&&e(i.targetElement).removeClass(e(i.targetElement).hasClass("e-plus")||e(i.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load"));l.query&&l.query.queries.length>0&&(l.query.queries=[]),this._executeDataQuery(l,l.parentId,"number"==this._typeOfFieldId?parseInt(i.currentElement[0].id):i.currentElement[0].id).done(function(t){s=t.xhr&&t.xhr.responseJSON&&t.xhr.responseJSON.d?t.xhr.responseJSON.d:t.result?t.result:[],(s=o._getSortAndFilterList(l,s)).length>0?(o._onlineData=!0,o._loadChildNodeWhenOnDemand(s,i,l)):e(i.targetElement).hasClass("e-load")&&e(i.targetElement).removeClass(e(i.targetElement).hasClass("e-plus")||e(i.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load")})}else s=this._getChildNodes(this._dataSource,i),!t.isNullOrUndefined(s)&&s.length>0?setTimeout(function(){o._createSubNodesWhenLoadOnDemand(s,i.targetElement,o.model.fields)},400):e(i.targetElement).hasClass("e-load")&&e(i.targetElement).removeClass(e(i.targetElement).hasClass("e-plus")||e(i.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load")},_loadChildNodeWhenOnDemand:function(e,i,s){var n=this;!t.isNullOrUndefined(e)&&e.length>0&&setTimeout(function(){n._createSubNodesWhenLoadOnDemand(e,i.targetElement,s)},100)},_createSubNodesWhenLoadOnDemand:function(t,i,s){this._loadOnDemandNodes=!0,this._templateNodeCreation(t,s),e(this._fragment.firstChild).attr("style","display:none"),this._fragment.firstChild.className="e-treeview-ul",this._fragment.firstChild.setAttribute("role","group"),i.parentNode.parentNode.appendChild(this._fragment);var n=e(i).closest(".e-item");n.attr({"aria-expanded":!1,"aria-expanded":!0}),e(i).removeClass("e-load").addClass("e-plus"),this._expandNode(n),this._finalizeLoadOnDemand(n)},_finalizeLoadOnDemand:function(e){var i,s,n,l;this._beforeBaseClass(),this._isRender=!1,this.model.showCheckbox&&(e.children("ul").find("li > div > input.nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),i=e.children("ul").find(".e-item"),(s=e.children("ul").find(".e-item.unchecked")).length>=0&&s.length!=i.length&&this._checkboxChecked?i.not(".unchecked").addClass("checked"):s.length==i.length&&this.isNodeChecked(e)&&this._nodeUncheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]),this._isLoaded&&(this._isCheckedAction(),this._updateCheckedNodes())),this._isRender=!0,this._addDragableClass(),this._preventEditable(),this.model.allowEditing&&this._allowEditable(),this._isLoaded&&(this._isSelectedAction(),this._updateSelectedNode(),this._allowOnDemand=!0,this._isExpandedAction(),this._updateExpandedNodes(),this._allowOnDemand=!1),!this.model.loadOnDemand||!this.model.enablePersistence||this.dataSource()instanceof t.DataManager||((l=this._getCookies("_childNodes"))&&(n=JSON.parse(l)),t.isNullOrUndefined(n)||-1!=n.indexOf(e[0].id)?n=[e[0].id]:n.push(e[0].id),this._setCookies("_childNodes",JSON.stringify(n)))},_getChildNodes:function(e,i){var s,n,l=[];if(1!=this._templateType){for(s=0,n=e.length;s<n;s++){if(e[s][this.model.fields.id]==i.id)return e[s].child;if(e[s].hasOwnProperty("child")&&(l=this._getChildNodes(e[s].child,i),!t.isNullOrUndefined(l)&&l.length>0))break}return l}for(s=0,n=e.length;s<n;s++)if(!t.isNullOrUndefined(e[s][0])&&!t.isNullOrUndefined(e[s][0][this.model.fields.parentId])&&e[s][0][this.model.fields.parentId]==i.id)return e[s]},_getPath:function(e){for(var t=e.prop("name"),i=e.parents(".e-item:first");null!=i[0]&&i[0].parentNode.id!=this._id;)t=i.prop("name")+"/"+t,i=i.parents(".e-item:first");return this._id+"/"+t},_nodeSelectionAction:function(t,i){var s,n,l,o,r;if(null!=t[0]||0!=t.length){var a=e(t.find("> div > .e-text")[0]),d=!1,h=(this.model.selectedNodes.slice(),this._liList.index(t[0]));if(this._currNode=t,!this._triggerEvent("beforeSelect",{target:t,nodeDetails:this._getNodeDetails(t)})){if(this.model.allowMultiSelection&&i&&(!i||i.ctrlKey)||(this.element.find("a.e-text.e-active").removeClass("e-node-focus e-active"),this.element.find("[aria-selected=true]").attr("aria-selected",!1),this.element.find(".e-li-active").removeClass("e-li-active"),this.model.fullRowSelect&&(this.element.find(".e-li-focus").removeClass("e-li-focus"),this.element.find(".e-node-focus").removeClass("e-node-focus")),this.element.find("#"+this._id+"_active").removeAttr("id"),this.model.selectedNodes=[]),this.model.allowMultiSelection&&i&&i.shiftKey){this._startNode||(this._startNode=this._currNode);var c=this.getVisibleNodes(),u=c.index(this._startNode),m=c.index(t[0]);for(u>m&&(s=u,u=m,m=s),n=u;n<=m;n++)l=e(c.get(n)),o=this._liList.index(l[0]),-1==e.inArray(o,this.model.selectedNodes)&&(this.model.selectedNodes.push(o),(r=l.find("> div > a.e-text")).removeClass("e-node-focus"),l.attr("aria-selected",!0),l.addClass("e-li-active"),r.addClass("e-active"),d=!0)}else this._startNode=t;this.model.allowMultiSelection||(this.model.selectedNode=h),d||(this.element.find("a.e-text.e-node-focus").removeClass("e-node-focus"),t.attr("aria-selected",!0),t.addClass("e-li-active"),a.addClass("e-active"),this.model.allowMultiSelection||a.attr("id",this._id+"_active"),-1==e.inArray(h,this.model.selectedNodes)&&this.model.selectedNodes.push(h)),this.model.enablePersistence&&this._persistValues(this.model.selectedNodes,"selectedNodes"),this._triggerGivenEvent("nodeSelect",t)}}},_nodeUnSelectionAction:function(e,t){this.model.allowMultiSelection&&t&&!t.ctrlKey?this._nodeSelectionAction(e,t):(e.removeClass("e-li-active"),e.attr("aria-selected",!1).find("> div > .e-text").removeClass("e-active").attr("id",""),this._updateUnselectModel(e[0]),this._triggerGivenEvent("nodeUnselect",e))},_updateUnselectModel:function(t){var i,s=this._liList.index(t),n=this.model.selectedNodes;this.model.allowMultiSelection||(this.model.selectedNode=null),(i=e.inArray(s,n))>-1&&this.model.selectedNodes.splice(i,1),this._persistValues(this.model.selectedNodes,"selectedNodes")},_triggerGivenEvent:function(e,t){if(this._isRender){var i={currentElement:t,value:t.find("> div > a.e-text").eq(0).text(),id:t[0].getAttribute("id"),parentId:t.closest("ul").closest(".e-item").attr("id"),selectedNodes:this.model.selectedNodes};this._triggerEvent(e,i)}},_getNodesIndex:function(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(this._liList.index(e[i]));return t},_nodeEnableAction:function(e){var t=this.getParent(e);null!=t[0]&&t.hasClass("e-node-disable")||(this.model.showCheckbox&&e.find("div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("enable").prop("disabled",!1),e.find(".e-text").removeClass("e-node-disable").closest(".e-item").removeClass("e-node-disable").removeProp("disabled"))},_nodeDisableAction:function(e){var t,i,s;for(this._collpaseNode(e),this.model.showCheckbox&&e.find("div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("disable").prop("disabled",!0),t=e.find(".e-text.e-active").closest(".e-item"),e.find(".e-text").addClass("e-node-disable").removeClass("e-active").attr("id","").closest(".e-item").addClass("e-node-disable").prop("disabled",!0),i=0,s=t.length;i<s;i++)this._updateUnselectModel(t[i])},_getNodeDetails:function(e){return null!=e[0]&&e.is("LI")&&e.hasClass("e-item")?{id:e[0].getAttribute("id"),text:e.children("div").find(".e-text:first").text(),parentId:e.closest("ul").closest(".e-item").attr("id")||"",level:e.parents("ul").length,count:e.find(".e-item").length,expanded:this._isNodeExpanded(e),checked:this._isChecked(e),selected:e.find("> div > .e-text").hasClass("e-active"),index:this._liList.index(e)}:{id:"",text:"",parentId:"",level:"",count:"",expanded:"",checked:"",selected:"",index:""}},_denyMultipleExpand:function(t){for(var i=t.siblings().find(">div>.e-minus").closest(".e-item"),s=0,n=i.length;s<n;s++)this._collpaseNode(e(i[s]))},_expandCollapseAction:function(t){var i,s,n,l,o;if(t&&!t.hasClass("e-process")&&(s=t.closest(".e-item"),t.is("SPAN")&&(t=e(t).parent("div").find("div:first")),(i=s.children("ul:first")).find("> .e-item").length>0))if(this.model.enableAnimation&&t.addClass("e-process"),n=this._getNodeDetails(s),o=this.isChildLoaded(s),l={currentElement:s,value:n.text,isChildLoaded:o,id:n.id,parentId:n.parentId,async:!1},!this._isNodeExpanded(s)&&o){if(!this._isEventTriggered&&this._triggerEvent("beforeExpand",l))return!1;this._isEventTriggered=!1,s.attr("aria-expanded",!0),this._addExpandedNodes(this._liList.index(s)),e(t).removeClass("e-icon e-plus").addClass("e-icon e-minus"),s.addClass("e-collapse"),this._doAnimation(i,t,"nodeExpand",l,350)}else{if(s.attr("aria-expanded",!1),!0===this._triggerEvent("beforeCollapse",l))return!1;this._removeExpandedNodes(this._liList.index(l.currentElement)),e(t).removeClass("e-icon e-minus").addClass("e-icon e-plus"),s.removeClass("e-collapse"),this._doAnimation(i,t,"nodeCollapse",l,200)}},_doAnimation:function(e,t,i,s,n){var l=this;this.model.enableAnimation?e.animate({height:"toggle"},n,"linear",function(){l._doAnimateAction(t,i,s)}):(e.css("display",200==n?"none":"block"),this._doAnimateAction(t,i,s))},_doAnimateAction:function(e,t,i){e.removeClass("e-process"),this._triggerEvent(t,i)},_isChecked:function(e){return"true"===e.find("> div > .e-chkbox-wrap:first").attr("aria-checked")},_doRecursiveCheck:function(t,i){var s,n,l,o,r,a;s=(o=this._getChildUl(t))?o.querySelectorAll('.e-chkbox-wrap[aria-checked="true"]').length:0,r=o?o.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[],(n=t.firstChild.querySelector(".nodecheckbox"))&&"INPUT"==n.nodeName.toUpperCase()&&(a=e(n).data("ejCheckBox"),s==r.length||this.model.autoCheckParentNode?(a.setModel({enableTriState:!1,checked:!0}),n.className+=" checked",l=t.firstChild.getElementsByTagName("a")[0].innerHTML,i.push({id:t.id,text:l}),this._addHiddenInputElement(n,l),this._addCheckNodes(this._liList.index(t))):a.setModel({enableTriState:!0,checkState:"indeterminate"}),"LI"==(t=t.parentNode.parentNode).nodeName.toUpperCase()&&this._doRecursiveCheck(t,i))},_nodeCheck:function(t,i){var s,n,l,o,r,a,d,h,c;if(null!=e(t)[0]){if(this._CurrenctSelectedNodes=[],this._checkedArray=[],t.className+=" checked",s=e(t).data("ejCheckBox")){if(s.setModel({enableTriState:!1,checked:!0}),l=(n=t.parentNode.parentNode.parentNode).firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._checkedArray.push({id:n.id,text:l}),this._updateField(this._newDataSource,n.id,this.model.fields.isChecked,!0),this._addHiddenInputElement(t,l),this._addCheckNodes(this._liList.index(n)),this.model.autoCheck){for(h=0,c=(r=(d=this._getChildUl(n))?d.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[]).length;h<c;h++)e(r[h]).ejCheckBox({checked:!0,enableTriState:!1})[0].className+=" checked",l=(a=r[h].parentNode.parentNode.parentNode).firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._checkedArray.push({id:a.id,text:l}),this._addHiddenInputElement(r[h],l),this._addCheckNodes(this._liList.index(a));"LI"==(o=n.parentNode.parentNode).nodeName.toUpperCase()&&this._doRecursiveCheck(o,this._checkedArray)}i&&(i.checknode=this._checkedArray),this._onChecked(e(t),i)}this._persistValues(this.model.checkedNodes,"checkedNodes")}},_addHiddenInputElement:function(e,t){if(null==e.firstChild){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",this._id+"_Checkbox_"+e.value+".Text"),i.setAttribute("value",t);try{e.appendChild(i)}catch(e){}}},_doRecursiveUncheck:function(t,i){var s,n,l,o,r,a;s=(o=this._getChildUl(t))?o.querySelectorAll('.e-chkbox-wrap[aria-checked="true"]').length:0,r=o?o.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[],(n=t.firstChild.querySelector(".nodecheckbox"))&&"INPUT"==n.nodeName.toUpperCase()&&(a=e(n).data("ejCheckBox"),s<=0&&(a.setModel({enableTriState:!1,checked:!1}),e(n).removeClass("checked").removeClass("checked").children().remove(),l=t.firstChild.getElementsByTagName("a")[0].innerHTML,this._removeCheckNodes(this._liList.index(t)),i.push({id:t.id,text:l})),s>1&&this.model.autoCheckParentNode?(a.setModel({checked:!0}),n.className+=" checked",l=t.firstChild.getElementsByTagName("a")[0].innerHTML,this._addHiddenInputElement(t,l)):s>0&&!this.model.autoCheckParentNode&&(r.length>1?a.setModel({enableTriState:!0,checkState:"indeterminate"}):a.setModel({checked:!1}),e(n).removeClass("checked").removeClass("checked").children().remove(),this._removeCheckNodes(this._liList.index(t))),"LI"==(t=t.parentNode.parentNode).nodeName.toUpperCase()&&this._doRecursiveUncheck(t,i))},_nodeUncheck:function(t,i){var s,n,l;if(null!=e(t)[0]){if(this._uncheckedArray=[],currentLi=t.parentNode.parentNode.parentNode,e(currentLi).find("div > .e-chkbox-wrap > .nodecheckbox").removeClass("checked").children().remove(),chkObj=e(t).data("ejCheckBox"),this._removeCheckNodes(this._liList.index(currentLi)),chkObj){if(chkObj.setModel({enableTriState:!1,checked:!1}),textvalue=currentLi.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._uncheckedArray.push({id:currentLi.id,text:textvalue}),this._updateField(this._newDataSource,currentLi.id,this.model.fields.isChecked,!1),this.model.autoCheck){for(childUl=this._getChildUl(currentLi),n=0,l=(s=childUl?childUl.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[]).length;n<l;n++)e(s[n]).ejCheckBox({enableTriState:!1,checked:!1}),liElement=s[n].parentNode.parentNode.parentNode,textvalue=liElement.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._uncheckedArray.push({id:liElement.id,text:textvalue}),this._removeCheckNodes(this._liList.index(liElement));parentLi=currentLi.parentNode.parentNode,"LI"==parentLi.nodeName.toUpperCase()&&this._doRecursiveUncheck(parentLi,this._uncheckedArray)}i&&(i.unchecknode=this._uncheckedArray),this._onUnChecked(e(t),i)}this._persistValues(this.model.checkedNodes,"checkedNodes")}},_executeDataQuery:function(i,s,n){var l,o,r;if(l=t.Query(),l=this._columnToSelect(i),!t.isNullOrUndefined(s)&&""!=s){for(o=e.extend(!0,[],l._params),l._params=[],l.addParams(s,n),r=0;r<o.length;r++)o[r].key!=s&&l.addParams(o[r].key,o[r].value);l.where(s,t.FilterOperators.equal,n)}return i.dataSource.executeQuery(l)},_createChildNodesWhenExpand:function(i,s,n,l,o,r){var a,d,h,c,u,m,p,g;if(i.length>0&&0==i.find("ul .e-item").length){if(a=i.attr("id"),d=i.children("div").find(".e-text:first").text(),c=i.children("div").find("div.e-plus:first"),h={currentElement:i,targetElement:c[0],id:a,value:d,isChildLoaded:!1,hasParent:!0,async:!1},p=this,this._isEventTriggered=!0,this._triggerEvent("beforeExpand",h))return!1;if(this.dataSource()instanceof t.DataManager){if(u=h.currentElement.parents("ul").length,m=this._getChildTables(this.model.fields,u,1),t.isNullOrUndefined(m)&&t.isNullOrUndefined(this.model.fields.child)&&(m=this.model.fields),!m)return void(e(h.targetElement).hasClass("e-load")&&e(h.targetElement).removeClass(e(h.targetElement).hasClass("e-plus")||e(h.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load"));m.query&&m.query.queries.length>0&&(m.query.queries=[]),this._treeList.push("false"),this._executeDataQuery(m,m.parentId,"number"==this._typeOfFieldId?parseInt(h.currentElement[0].id):h.currentElement[0].id).done(function(e){p._treeList.pop(),g=e.xhr&&e.xhr.responseJSON&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],g=p._getSortAndFilterList(m,g),p._appendChild(g,i,m,s,n,l),n&&p._expandByLevel(i.find("> ul"),n-1,l),0==p._treeList.length&&(o&&p._doAfterExpand(i,o,r),p._completeRendering())})}else g=this._getChildNodes(this._dataSource,{id:i[0].id}),this._appendChild(g,i,this.model.fields,s,n,l)}else this._expandNode(i)},_appendChild:function(i,s,n,l,o,r){var a,d,h;if(!t.isNullOrUndefined(i)&&i.length>0){if(this._checkboxChecked=s.find("> div > .e-chkbox-wrap > .nodecheckbox").hasClass("checked"),this._loadOnDemandNodes=!0,0==s.find("ul .e-item").length&&(this._templateNodeCreation(i,n),s.append(this._fragment)),this._finalizeLoadOnDemand(s),this._expandNode(s),l&&!o&&!r)for(d=0,h=(a=s.find(".e-item > div > .e-plus").closest(".e-item")).length;d<h;d++)this._createChildNodesWhenExpand(e(a[d]),!0,null,r)}else l&&s.find("> div > .e-plus").removeClass("e-plus e-icon")},_getSortAndFilterList:function(e,i){var s,n;return!i||!i.length||i.length<1?s=[]:(n=t.Query(),this._addSortingQuery(n,e),s=t.DataManager(i).executeLocal(n)),s},_addSortingQuery:function(e,i){if(this.model.sortSettings.allowSorting){var s=i&&i.text?i.text:"text",n=this.model.sortSettings.sortOrder==t.sortOrder.Descending;e.sortBy(s,n)}},_expandNode:function(e){var t;return null!=e[0]&&e.length>0&&(t=e.find("> div > div:first"),this.model.loadOnDemand&&!this.model.enablePersistence?e.find("> ul > .e-item").length>0&&t.hasClass("e-plus")?(this.model.enableMultipleExpand||this._denyMultipleExpand(e),this._expandCollapseAction(e.find("> div > div.e-plus:first"))):t.hasClass("e-icon")&&!t.hasClass("e-minus")&&this._allowOnDemand&&this._createChildNodesWhenExpand(e):t.hasClass("e-plus")&&e.find("> ul > .e-item").length>0&&(this.model.enableMultipleExpand||this._denyMultipleExpand(e),this._expandCollapseAction(t))),!0},_collpaseNode:function(e){if(null!=e[0]&&e.length>0&&e.find("> ul > .e-item").length>0){var t=e.find("> div > div:first");t.hasClass("e-minus")&&this._expandCollapseAction(t)}},_getElement:function(){return this.element.is("UL")?this.element:this.element.find("> ul")},_getImmediateChild:function(e,t){return t?e.find("> .e-item:not(:hidden)"):e.find("> .e-item")},_expandByLevel:function(e,t,i){t>0&&this._expandByNode(this._getImmediateChild(e,i),t,i)},_expandByNode:function(t,i,s){for(var n=0,l=t.length;n<l;n++)e(t[n]).find("> div > div").hasClass("e-plus")&&(this.model.loadOnDemand?this._createChildNodesWhenExpand(e(t[n]),!0,i,s):this._expandNode(e(t[n]))),this._expandByLevel(e(t[n]).find("> ul"),i-1,s)},_expandAll:function(t){var i,s;if(s=this.element.find(t?".e-item > div > .e-plus:not(:hidden)":".e-item > div > .e-plus").closest(".e-item"),this.model.loadOnDemand)for(i=0,len=s.length;i<len;i++)this._createChildNodesWhenExpand(e(s[i]),!0,null,t);else for(i=0,len=s.length;i<len;i++)this._expandNode(e(s[i]))},_collapseByLevel:function(e,t,i){t>0&&this._collapseByNode(this._getImmediateChild(e,i),t,i)},_collapseByNode:function(t,i,s){for(var n=0,l=t.length;n<l;n++)e(t[n]).find("> div > div").hasClass("e-minus")&&this._collpaseNode(e(t[n])),this._collapseByLevel(e(t[n]).find("> ul"),i-1,s)},_collapseAll:function(t){var i,s;if((s=this.element.find(t?".e-item > div > .e-minus:not(:hidden)":".e-item > div > .e-minus").closest(".e-item")).length>0)for(i=0,len=s.length;i<len;i++)this._collpaseNode(e(s[i]))},_checkAll:function(){var t;for(this._CurrenctSelectedNodes=[],(t=this.element.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox")).addClass("checked"),i=0,len=t.length;i<len;i++)e(t[i]).ejCheckBox("setModel",{checked:!0}),this._addHiddenInputElement(t[i],e(t[i]).parent().siblings(".e-text")[0].lastChild.nodeValue);this.model.checkedNodes=this.getCheckedNodesIndex()},_uncheckAll:function(){var t;for((t=this.element.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox")).removeClass("checked").children().remove(),i=0,len=t.length;i<len;i++)e(t[i]).ejCheckBox("setModel",{checked:!1});this.model.checkedNodes=[],this.model.checkedNodes.push(-1)},_selectAll:function(){var t,i,s,n;for(this._isRender=!1,t={ctrlKey:!0},i=0,s=this._liList.length;i<s&&(null!=(n=e(this._liList[i]))[0]&&this._nodeSelectionAction(n,t),this.model.allowMultiSelection);i++);this._isRender=!0},_unselectAll:function(){this.element.find("a.e-text.e-active").removeClass("e-node-focus e-active").closest("li").find("[aria-selected=true]").attr("aria-selected",!1),this.model.selectedNodes=[],this.model.enablePersistence&&this._persistValues(this.model.selectedNodes,"selectedNodes")},_isNodeExpanded:function(e){if(null!=e[0])return e.children("ul:first").length>0&&e.find("> div > div.e-minus").length>0},_showCheckBox:function(){for(var e=this.element,t=e.find("li"),i=0;i<t.length;i++)this._checkboxOnTemplate(t[i].children[0]);e.find(".e-item > div > .nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),e.find(".e-item.e-node-disable > div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("disable")},_drag:function(){var i,s,n=!1,l=t.browserInfo(),o=null,r=null,a=null;s="msie"==l.name&&"8.0"==l.version,this.element.is("ul")?(this._treeView=this.element.parent(),this.model.allowDragAndDropAcrossControl||(a=this.element.parent())):(this._treeView=this.element,this.model.allowDragAndDropAcrossControl||(a=this.element)),e(this._treeView).find("ul li div a").not(".e-js").ejDraggable({dragArea:a,clone:!0,dragStart:function(n){if(!i||t.isNullOrUndefined(n.target)||e(n.target).hasClass("e-node-disable")||0!=i.element.find(".e-item > div > .e-text.e-editable").length||(n.element.attr("aria-grabbed",!0),e(n.target).is("A")&&!e(n.target).hasClass("e-draggable")))return!1;s&&(document.ondragstart=function(){return!1});var l={target:e(n.target).closest(".e-item"),targetElementData:i._getNodeDetails(e(n.target).closest(".e-item")),dragTarget:n.target,parentElement:e(n.target).closest("ul").closest(".e-item"),parentElementData:i._getNodeDetails(e(n.target).closest("ul").closest(".e-item")),event:n.event};return i._triggerEvent("nodeDragStart",l)?(n.cancel=!0,o&&o.remove(),!1):void 0},drag:function(s){var l,r,a,d,h;return n=!1,e(".e-sibling").remove(),l=s.target,r=i._findTarget(e(l)),e(o).css({"margin-left":"20px","margin-top":s.event.clientY-20<0?"0px":"-20px",display:"table"}),e(o).find("> a.e-text").css({display:"table-cell","white-space":"nowrap",margin:"0 0 1px"}),e(o).find(">.e-dropedStatus").css({display:"table-cell"}),a={draggedElement:e(s.element).closest(".e-item"),draggedElementData:i._getNodeDetails(e(s.element).closest(".e-item")),dragTarget:l,target:r,targetElementData:i._getNodeDetails(r),event:s.event},(0==e(s.element).parent().parent().has(e(l)).length||i.model.allowMultiSelection&&i.model.selectedNodes.length>1)&&(e(l).hasClass("e-droppable")||e(l).parent().hasClass("e-droppable"))&&e(l).hasClass("e-dropchild")&&!e(l).hasClass("e-node-disable")&&(i.model.allowDragAndDropAcrossControl||!i.model.allowDragAndDropAcrossControl&&e(l).parents(".e-treeview").is(i.element))?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"),e(l).addClass("allowDrop")):e(l).hasClass("e-droppable")&&!e(l).hasClass("e-item")&&!e(l).hasClass("e-text")||e(l).is("UL")&&e(l).hasClass("e-ul")&&0==e(l).find(".e-item").length&&e(l).parent(".e-treeview-wrap").length>0?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus")):(e(l).hasClass("e-sibling")||e(l).find("a").hasClass("e-text"))&&(e(l).hasClass("e-sibling")||e(l).parent().parent().hasClass("e-item")||e(l).parent().hasClass("e-item")||e(l).hasClass("e-item")||e(l).hasClass("e-text"))&&("LI"!=l.nodeName.toUpperCase()&&(null===l.parentElement||"LI"!=l.parentElement.nodeName.toUpperCase())||this.model.allowDropSibling)&&(i.model.allowDragAndDropAcrossControl||e(l).parents(".e-treeview").is(i.element))||(document.body.style.cursor="not-allowed",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-minus"),e(l).removeClass("showline-hover"),e(l).removeClass("noline-hover")),"A"!=l.nodeName&&(0==e(s.element).parent().parent().has(e(l)).length||i.model.allowMultiSelection&&i.model.selectedNodes.length>1)&&e(s.element).parent().parent()[0]!=e(l)[0]?("UL"==l.nodeName&&null!=e(l).children()[0]&&(l=e(l).children()[0],n=!0),"LI"!=l.nodeName&&(l=e(l).closest(".e-droppable")[0]||e(l).parent()),"LI"==l.nodeName&&e(l).hasClass("e-droppable")&&e(l).hasClass("e-dropsibling")&&(i.model.allowDragAndDropAcrossControl||!i.model.allowDragAndDropAcrossControl&&e(l).parents(".e-treeview").is(i.element))?(d=t.buildTag("div.e-sibling"),h=e(l).offset().top+e(l).find("a").height()||-1,(n=!(s.event.pageY>h))?d.insertBefore(e(l).find("> div > a").parent()):d.insertAfter(e(l).find("> div > a").parent()),e(l).parents().hasClass("e-rtl")?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-insertInbetween-rtl")):(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-insertInbetween"))):"A"==l.nodeName&&e(l)&&e(l).hasClass("e-droppable")&&e(l).hasClass("e-dropchild")?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"),e(l).addClass("allowDrop")):!e(l).hasClass("e-droppable")||e(l).hasClass("e-item")||e(l).hasClass("e-text")||(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"))):e(".e-sibling").remove(),!i._triggerEvent("nodeDrag",a)&&void 0},dragStop:function(t){var l,r,a,d,h,c;if(s&&(document.ondragstart=function(){return!0}),t.element.dropped||(o&&o.remove(),document.body.style.cursor=""),"e-sibling"==(l=t.target).className&&(l=e(l).closest(".e-item")[0]),e(".e-sibling").remove(),e(l).hasClass("e-node-disable")||(r=n?"Before":"After",trgtEle=i._findTarget(e(l)),r="A"==l.nodeName?"Over":r,a={draggedElementData:i._getNodeDetails(e(t.element).closest(".e-item")),draggedElement:e(t.element).closest(".e-item"),dropTarget:e(l),target:trgtEle,targetElementData:i._getNodeDetails(trgtEle),position:r,event:t.event},i._triggerEvent("nodeDragStop",a)))return!1;if(i.model.allowMultiSelection&&e(t.element).hasClass("e-active"))for(h=0,c=(d=i.element.find(".e-item > div > .e-active")).length;h<c;h++)t.element=d[h],r=i._dropNode(l,t,r,n);else r=i._dropNode(l,t,r,n);if(e(".allowDrop").removeClass("allowDrop"),e(t.element).attr("aria-grabbed",!1),e(l).hasClass("e-dropchild")||o&&o.remove(),trgtEle=i._findTarget(e(l)),a={droppedElementData:i._getNodeDetails(e(t.element).closest(".e-item")),droppedElement:e(t.element).closest(".e-item"),dropTarget:e(l),target:trgtEle,targetElementData:i._getNodeDetails(trgtEle),position:r,event:t.event},i._triggerEvent("nodeDropped",a))return!1;document.body.style.cursor=""},helper:function(s){var n,l;if(!t.isNullOrUndefined(s.element)&&!e(s.element).hasClass("e-node-disable")&&e(s.element).hasClass("e-draggable")&&(i=e(s.element).closest(".e-treeview.e-js").data("ejTreeView")))return(o=t.buildTag("div.e-dragedNode")).addClass(i.model.cssClass+(i.model.enableRTL?" e-rtl":"")),n=i.element.find(".e-item > div > .e-active").length,r=e(s.element).clone().addClass("dragClone"),this.spanEle=t.buildTag("span.e-icon e-plus e-dropedStatus"),o.append(this.spanEle),o.append(r),l=t.buildTag("span.e-drop-count",n),n>1&&i.model.allowMultiSelection&&e(s.element).hasClass("e-active")&&o.append(l),o.appendTo(e("body"))}})},_dropNode:function(t,i,s,n){return"A"==t.nodeName&&e(t).hasClass("e-dropchild")&&e(t).hasClass("e-droppable")||"UL"==t.nodeName&&0==e(t).children().length?(s="Over",e(t).is("UL")&&e(t).hasClass("e-ul")&&0==e(t).find(".e-item").length&&e(t).parent(".e-treeview-wrap").length>0?this._dropAsChildNode(e(t),e(i.element),i.event):0==e(i.element).parent().parent().has(e(t)).length&&(0==e(t).parent().parent().has(e(i.element)).length||this._isDescendant(e(t).parents("li:last").find(">ul>li"),e(i.element).parents("li:first")[0]))&&(this.model.allowDragAndDropAcrossControl||!this.model.allowDragAndDropAcrossControl&&e(t).parents(".e-treeview").is(this.element))&&this._dropAsChildNode(e(t).closest(".e-item"),e(i.element),i.event)):("UL"==t.nodeName&&(t=e(t).children()[0]),"LI"!=t.nodeName&&(t=e(t).closest(".e-droppable")[0]||e(t).parent()),"LI"==t.nodeName&&e(t).hasClass("e-dropsibling")&&e(t).hasClass("e-droppable")?e(i.element).parent().parent().has(e(t)).length<1&&e(i.element).parent().parent()[0]!=e(t)[0]&&(this.model.allowDragAndDropAcrossControl||!this.model.allowDragAndDropAcrossControl&&e(t).parents(".e-treeview").is(this.element))&&this._dropAsSiblingNode(e(t),e(i.element),n,i.event):"A"==t.nodeName&&e(t).hasClass("e-dropchild")&&e(t).hasClass("e-droppable")&&(s="Over",0==e(i.element).parent().parent().has(e(t)).length&&(0==e(t).parent().parent().has(e(i.element)).length||this._isDescendant(e(t).parents("li:last").find(">ul>li"),e(i.element).parents("li:first")[0]))&&this._dropAsChildNode(e(t).closest(".e-item"),e(i.element),i.event))),s},_findTarget:function(e){return e.hasClass("e-text")?e.closest(".e-item"):e.closest("ul").closest(".e-item").length>0?e.closest("ul").closest(".e-item"):this.element.find(e).length>0?e.parents("ul").first():e},_isDescendant:function(t,i){var s=!0;return e(t).each(function(e,t){if(t==i)return s=!1,!1;s=!0}),s},_childDrop:function(){e(this._treeView).find("ul .e-item div .e-text").ejDroppable({accept:e(this._treeView).find("ul .e-item div .e-text").addClass("e-dropchild"),drop:function(t,i){e(i.helper).hide()}})},_siblingDrop:function(){e(this._treeView).find("ul .e-item").addClass("e-dropsibling").ejDroppable({drop:function(t,i){e(i.helper).hide()}})},_dropAsSiblingNode:function(i,s,n){var l,o=s.parent().parent();o=e(o),l=e(s.parents(".e-item")[1]),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateDataSource(s.parents(".e-item:first"),e(i),n,this),n?o.insertBefore(i):o.insertAfter(i),this.model.template||this._autoGenerateNodes(s.parents(".e-item:first")),this._modifyCss(l),this._isRender=!1,this._updateCheckState(o),this._updateCheckState(l),this._isRender=!0,o.find("> div > .e-minus").length>0&&!this.model.enableMultipleExpand&&this._denyMultipleExpand(o),this._updateChanges(e(i))},_dropAsChildNode:function(i,s){var n,l=s.parent().parent();l=e(l),n=e(s.parents(".e-item")[1]),e(i).is("UL")?e(i).append(l):this._appendNode(i,l),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateDataSource(s.parents(".e-item:first"),e(i).find("> div > .e-text").first(),"",this),this.model.template||this._autoGenerateNodes(s.parents(".e-item:first")),this._modifyCss(n),this._isRender=!1,this._updateCheckState(l),this._updateCheckState(n),this._isRender=!0,i.find("> div > .e-icon.e-plus:first").length>0&&this._expandNode(i),this._updateChanges(e(i))},_updateChanges:function(t){if(null!=e(t)[0]){var i=this,s=0;do{i._updateNodes(),s++,i=t.closest(".e-treeview.e-js").data("ejTreeView")}while(i&&this._id!=i._id&&1==s)}},_updatePersistProb:function(){var t,i,s,n,l,o;for(this._removeField(this._newDataSource,this.model.fields.selected),this._removeField(this._newDataSource,this.model.fields.expanded),i=0,s=(t=this.getSelectedNodes()).length;i<s;i++)this._updateField(this._newDataSource,e(t[i]).attr("id"),this.model.fields.selected,!0);for(l=0,o=(n=this.getExpandedNodes()).length;l<o;l++)this._updateField(this._newDataSource,e(n[l]).attr("id"),this.model.fields.expanded,!0)},_orderDataSource:function(){var i,s,n,l,o,r;for(this._beforeBaseClass(),i=[],s=this._newDataSource,this._updatePersistProb(),n=0,l=this._liList.length;n<l;n++)for(o=0,r=s.length;o<r;o++)if(!t.isNullOrUndefined(s[o])&&!t.isNullOrUndefined(s[o][this.model.fields.id])&&s[o][this.model.fields.id].toString()==e(this._liList[n]).attr("id")){0==e(this._liList[n]).find("> ul .e-item").length?delete s[o][this.model.fields.hasChild]:1==this._templateType&&(s[o][this.model.fields.hasChild]=!0),i.push(s[o]);break}return i},_updateDataSource:function(i,s,n,l){var o,r,a,d,h,c,u;null!=e(i)[0]&&null!=e(s)[0]&&(o=l,r=s.closest(".e-treeview.e-js").data("ejTreeView"),!o||!r||t.isNullOrUndefined(r.model.fields)||null==r.dataSource()||r.dataSource()instanceof t.DataManager||(s.is("A")?(a=s.closest(".e-item").attr("id"),d=(h=s.closest(".e-item").find("> ul > .e-item")).length>0?h.length:s.closest(".e-item").index()):(a=s.parents(".e-item:first").attr("id"),c=s.next(".e-item"),u=s.prev(".e-item"),d=c.length>0?d=u.length>0?c.index()-1:n?s.index():c.index():n?s.index():s.index()+1),r&&o._findAndUpdate(i.attr("id"),a,o._newDataSource,d,r)))},_removeObject:function(e,i,s){for(var n=0,l=e.length;n<l;n++)if(!t.isNullOrUndefined(e[n])&&!t.isNullOrUndefined(e[n][s])&&e[n][s].toString()==i){e.splice(n,1);break}},_convertDataSourceTypes:function(e,t){for(var i=0;i<e.child.length;i++)e.child[i][this.model.fields.parentId]=e[this.model.fields.id],t.push(e.child[i]),e.child[i].hasOwnProperty("child")&&e.child[i].child.length>0&&this._convertDataSourceTypes(e.child[i],t);return e.child&&(delete e.child,e[this.model.fields.hasChild]=!0),t},_childObjectCollection:function(e,t,i){for(var s,n=0,l=e.length;n<l;n++)(s=this._getChildNodes(t,{id:e[n][this.model.fields.id]}))&&(i=i.concat(s),i=this._childObjectCollection(s,t,i));return i},_updateCopyData:function(t,i,n){var l=i.model.fields;return temp=n,arr=[],proxy=this,e.each(this.model.fields,function(e){("dataSource"!==e||"query"!==e)&&temp[t][proxy.model.fields[e]]!==s&&(arr[l[e]]=temp[t][proxy.model.fields[e]])}),e.extend(void 0,arr,!1)},_findAndUpdate:function(e,i,s,n,l){var o,r,a,d,h,c,u,m,p,g,f,_;if(1==this._templateType){for(p=0,g=s.length;p<g;p++)if(!t.isNullOrUndefined(s[p])&&!t.isNullOrUndefined(s[p][this.model.fields.id])&&s[p][this.model.fields.id].toString()==e){if(this._id==l._id)t.isNullOrUndefined(i)?delete s[p][this.model.fields.parentId]:s[p][this.model.fields.parentId]=i,o=this.dataSource(),a=this,this._templateType=this._getTemplateType(o,this.model.fields),this._dataSource=1==this._templateType?this._groupingObjects(o,function(e){return[!t.isNullOrUndefined(e)&&[e[a.model.fields.parentId]].toString()]}):o;else if(a=this,_=[],d=this._groupingObjects(s,function(e){return[!t.isNullOrUndefined(e)&&[e[a.model.fields.parentId]].toString()]}),f=s.splice(p,1),(r=this._getChildNodes(d,{id:e}))&&r.length>0&&(r=this._childObjectCollection(r,d,r)),2==l._templateType){if(r&&r.length>0){for(h=0,c=r.length;h<c;h++)this._removeObject(s,e,this.model.fields.parentId),delete r[h][l.model.fields.parentId],delete r[h][l.model.fields.hasChild];f[0].hasOwnProperty("child")||(f[0].child=[]),f[0].child=r}delete f[0][l.model.fields.parentId],delete f[0][l.model.fields.hasChild],i?this._changeObjectPos(i,f,l._newDataSource,n):l._newDataSource.splice(n,0,f[0])}else{if(r&&r.length>0){for(h=0,c=r.length;h<c;h++)this._removeObject(s,r[h].id,this.model.fields.parentId),this._removeObject(s,e,this.model.fields.parentId);this._dataSource=1==this._templateType?this._groupingObjects(s,function(e){return[!t.isNullOrUndefined(e)&&[e[a.model.fields.parentId]].toString()]}):s}if(i?f[0][l.model.fields.parentId]=i:delete f[0][l.model.fields.parentId],l._newDataSource.push(f[0]),u=[],r&&r.length>0){if(!(this.dataSource()instanceof t.DataManager)&&this.model.loadOnDemand){for(l._newDataSource.splice(l._newDataSource.length-1,1),r.push(f[0]),p=0;p<r.length;p++)u.push(this._updateCopyData(p,l,r));r=u}m=l._newDataSource=l._newDataSource.concat(r),l._dataSource=1==l._templateType?l._groupingObjects(m,function(e){return[!t.isNullOrUndefined(e)&&[e[l.model.fields.parentId]].toString()]}):m}}break}}else for(p=0,g=s.length;p<g;p++){if(s[p][this.model.fields.id].toString()==e)return f=s.splice(p,1),this._id==l._id?i?this._changeObjectPos(i,f,this._newDataSource,n):this._newDataSource.splice(n,0,f[0]):1==l._templateType?(_=[],f[0].hasOwnProperty("child")?(l._convertDataSourceTypes(f[0],_),f[0]=f.concat(_)):f[0]=f.concat(),i?f[0][0][l.model.fields.parentId]=i:delete f[0][0][l.model.fields.parentId],l._newDataSource=l._newDataSource.concat(f[0])):i?this._changeObjectPos(i,f,l._newDataSource,n):l._newDataSource.splice(n,0,f[0]),!0;if(s[p].hasOwnProperty("child")&&this._findAndUpdate(e,i,s[p].child,n,l))break}},_changeObjectPos:function(e,t,i,s){for(var n=0,l=i.length;n<l;n++){if(i[n][this.model.fields.id].toString()==e)return i[n].hasOwnProperty("child")?i[n].child.splice(s,0,t[0]):(i[n].child=[],i[n].child.push(t[0])),!0;if(i[n].hasOwnProperty("child")&&this._changeObjectPos(e,t,i[n].child,s))break}},_finalizeEditing:function(t){if(null!=e(t)[0]){var i=t.closest(".e-treeview.e-js").data("ejTreeView");i&&(i._preventEditable(),i.model.allowEditing&&i._allowEditable())}},_updateCheckState:function(e){var t,i;this._isTreeElement(e)&&(t=e.closest(".e-treeview.e-js").data("ejTreeView"))&&t.model.showCheckbox&&(e.children("ul").find(".e-item > div > .e-chkbox-wrap > .checked").closest(".e-item").addClass("checked").length>0?t._isCheckedAction():(i=t.isNodeChecked(e)?"_nodeCheck":"_nodeUncheck",t[i](e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])))},_autoGenerateNodes:function(t){var i,s,n,l;if(null!=e(t)[0])if((i=t.closest(".e-treeview.e-js").data("ejTreeView"))&&i.model.showCheckbox){if(0==t.find(".e-chkbox-wrap").length){for(this._checkboxOnTemplate(t[0].children[0]),n=0,l=(s=t.find(".e-item")).length;n<l;n++)this._checkboxOnTemplate(s[n].children[0]);t.find(".nodecheckbox").ejCheckBox({cssClass:i.model.cssClass,change:i._checkedChange})}}else t.find(".e-chkbox-wrap").remove()},_appendNode:function(i,s){var n,l,o,r;for(this._isTreeElement(i)?(null==i.find("ul")[0]?((n=i.closest(".e-treeview.e-js").data("ejTreeView"))&&!this._isNodeExpanded(i)&&n.model.loadOnDemand&&i.find("> div > div").first().hasClass("e-plus")&&n._createChildNodesWhenExpand(i,null,null,null,s,n),this.dataSource()instanceof t.DataManager&&n.model.loadOnDemand&&i.find("> div > div").first().hasClass("e-plus")||this._doAfterExpand(i,s,n)):e(i.find("ul")[0]).append(s),this.isDisabled(i)||this._expandNode(i)):this.element.is("UL")?this.element.append(s):this.element.children("ul:first").length>0?this.element.children("ul:first").append(s):((l=t.buildTag("ul.e-treeview-ul","",{},{role:"group"})).append(s),this.element.append(l)),o=this.element.find(".e-item.expanded"),r=0;r<o.length;r++)!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(e(o[r])):this._createChildNodesWhenExpand(e(o[r]));o.removeClass("expanded"),this.model.showCheckbox&&this._isCheckedAction()},_doAfterExpand:function(i,s,n){var l,o=t.buildTag("ul.e-treeview-ul","",{},{role:"group",style:"display:none"});e(o).append(e(s)),0==e(i.find("div")[1]).length?((l=document.createElement("div")).setAttribute("role","presentation"),l.className="e-icon e-minus",e(i.find("div")).append(e(l))):e(i.find("div")[1]).hasClass("e-minus")||e(i.find("div")[1]).addClass("e-icon e-plus"),n&&n.model.loadOnDemand&&i.find("ul").length>0?i.children("ul").append(e(s)):i.append(e(o))},_modifyCss:function(t){null!=(t=e(t))[0]&&0==t.find(".e-item").length&&t.removeClass("e-collapse").attr("aria-expanded",!1).find("> div > .e-icon").removeClass("e-icon e-minus").closest(".e-item").find("ul").remove()},_applyFirstLastChildClass:function(){e(this._liList).removeClass("first last").filter(":first-child:not(:last-child)").addClass("first"),e(this._liList).filter(":last-child").addClass("last")},_expandEventHandler:function(t){var i,s,n=e(t.target);n.hasClass("e-icon")||n.closest(".e-item").hasClass("e-node-disable")||"dblclick"===t.type&&this.model.allowEditing||(t.preventDefault(),i=n.is("A")?e(n.siblings("div")):e(n.parent().siblings("div")),this.model.fullRowSelect&&(n.is("div.e-text-wrap")||n.is("div.e-fullrow"))&&(i=n.closest(".e-item").find("> .e-text-wrap > div")),s=n.closest(".e-item"),i.hasClass("e-minus")?this._collpaseNode(s):this.model.loadOnDemand&&0==i.find(".e-item").length?this._ClickEventHandler({target:i[0]}):this._expandNode(s))},_inlineEdit:function(t){t.preventDefault();var i=e(t.target);return i.hasClass("input-text")||i.hasClass("e-node-disable")||(i.is("A")||(i=i.closest(".e-text")),i.is("A")&&!i.hasClass("e-node-disable")&&this._inlineEditAction(i)),!1},_inlineEditAction:function(e){null==this.element.find(".e-item > div > .e-text > #Edit_Input")[0]&&this._createEditTextBox(e)},_createEditTextBox:function(i){var s,n,l={currentElement:i};return!this._triggerEvent("beforeEdit",l)&&(null==(s=this.element.find(".e-item > div > .e-text > #Edit_Input"))[0]&&((n=t.buildTag("Input.input-text#Edit_Input","","",{type:"text",value:e.trim(i.text()).replace(/\n\s+/g," "),name:"inplace_value"})).width(i.outerWidth()+5),n.height(i.outerHeight()),n.addClass("e-tree-input e-textbox"),this._beforeEditText=i.text(),i[0].lastChild.nodeValue="",i.addClass("e-editable").append(n),""==(s=n).val().length||i.outerWidth(),this._mousePositionAtEnd(s),this._currentEditableNode=i,this._on(s,"keypress",this._editTextBoxKeyPress)._on(s,"keydown",this,this._pressEscKey)._on(s,"mousedown pointerdown MSPointerDown",this,this._preventPropagation)._on(s,this.model.expandOn,this,this._preventPropagation)._on(s,"blur",this._focusout)),s)},_preventPropagation:function(e){e.stopImmediatePropagation(),this._isTextbox=!0},_editTextBoxKeyPress:function(e){e.target.size=e.target.value.length+1},_mousePositionAtEnd:function(e){return e.focus&&e.focus(),e.select&&e.select(),!0},_focusElement:function(t){if(!this._isTextbox){if(t&&("touchstart"==t.type||"pointerdown"==t.type||"MSPointerDown"==t.type)){var i=e(t.currentTarget);i.hasClass("e-text")&&this.selectNode(i.closest(".e-item"))}this.element.focus()}},_focusout:function(t){var i,s=e(t.currentTarget);this._isTextbox=!1,i={id:s.closest(".e-item").attr("id"),oldText:this._beforeEditText,newText:s.val()},this._triggerEvent("inlineEditValidation",i)?this._cancelAction(s):this._saveAction(s,t)},_pressEscKey:function(i){var s,n;i.cancelBubble=!0,i.returnValue=!1,null!=(s=e(i.currentTarget))[0]&&(13==i.keyCode&&(i.stopPropagation(),this._focusout(i)),27==i.keyCode&&this._cancelAction(s),(13==i.keyCode||27==i.keyCode)&&"msie"==(n=t.browserInfo()).name&&"8.0"==n.version&&this.element.focus())},_onFocusHandler:function(e){e.preventDefault()},_onKeyDown:function(e,t){e.find("> div > .e-text:first").removeClass("e-node-focus"),t.find("> div > .e-text:first").addClass("e-node-focus"),this.model.fullRowSelect&&(e.removeClass("e-li-focus"),t.addClass("e-li-focus"))},_KeyPress:function(t){var i,s,n,l,o,r,a,d,h,c,u,m,p,g,f,_,v,b=this;if(_=this.element.is("ul")?this.element:this.element.find("> ul"),i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,b.model.allowKeyboardNavigation&&b.element.find("#Edit_Input").length<1&&b.element.find(".e-chkbox-wrap.e-focus").length<1)if(s=e(_.find(".e-item > div > .e-text.e-active").closest(".e-item")[0]),n=_.find(".e-item:visible"),b._focusedNode?(l=b._focusedNode,b._focusedNode=null):l=_.find(".e-text.e-node-focus").closest(".e-item"),113==i&&(t.preventDefault(),(_=l.length>0?l:s).length>0&&b.model.allowEditing&&(t.target=_.find("> div > .e-text:first"),b._inlineEdit(t))),40!=i||t.altKey)if(38!=i||t.altKey){if(39==i&&!this.model.enableRTL&&!t.altKey||37==i&&this.model.enableRTL)if(t.preventDefault(),r=(o=l.length>0?l.find("> div > div").first():s.find("> div > div").first()).closest(".e-item"),o.hasClass("e-plus"))this.model.loadOnDemand&&0==r.find("> ul .e-item").length?this._ClickEventHandler({target:o[0]}):this._expandNode(e(n[n.index(r)]));else{if(r=this._getNextEle(n,r),b._KeyPressEventHandler(r.length>0?r:"",b,i,t))return;(r.length>0&&r[0]==o.closest(".e-item").find("ul > .e-item:first")[0]||r.find("ul > .e-item").first().hasClass("e-node-disable"))&&b._onKeyDown(l,r)}else if(37==i&&!this.model.enableRTL&&!t.altKey||39==i&&this.model.enableRTL)if(t.preventDefault(),a=(d=l.length>0?l.find("> div > div").first():s.find("> div > div").first()).closest(".e-item"),d.hasClass("e-minus"))this._collpaseNode(e(n[n.index(d.closest(".e-item"))]));else{if(a=e(n[n.index(a)]).closest("ul").closest(".e-item"),b._KeyPressEventHandler(a.length>0?a:"",b,i,t))return;a.length>0&&b._onKeyDown(l,a)}else if(36!=i||t.altKey){if(35!=i||t.altKey){if(13==i)t.preventDefault(),(m=(f=l.length>0?l:s).find("> div > .e-text")).removeClass("e-node-focus"),this.model.fullRowSelect&&f.removeClass("e-li-focus"),m.hasClass("e-active")?b.model.allowMultiSelection&&b._nodeUnSelectionAction(f,event):b._nodeSelectionAction(f,t),b._focusedNode=f;else if(32==i)t.preventDefault(),(f=l.length>0?l:s).length>0&&this.model.showCheckbox&&((p=f.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]).checked?this._nodeUncheck(p):this._nodeCheck(p),b._focusedNode=f);else if(46==i)t.preventDefault(),(f=this.model.allowMultiSelection?_.find(".e-item > div > .e-text.e-active").closest(".e-item"):l.length>0?l:s).length>0&&this._removeNode(f,t);else if(t&&1==t.ctrlKey)if(88==i&&this.model.allowDragAndDrop&&this.model.allowDropChild){if(t.preventDefault(),(f=l.length>0?l:s).length>0&&(g=f.parents(".e-item:first"),this._cutNode=e(n[n.index(f)]).detach(),null!=e(this._cutNode)[0])){if(this._triggerEvent("beforeCut",{target:f,nodeDetails:this._getNodeDetails(f),keyCode:i,event:t}))return;this._isRender=!1,this.unselectNode(f),0==g.find("> ul > .e-item").length&&(this.collapseNode(g),this._modifyCss(g)),this._isRender=!0,this._triggerEvent("nodeCut",{parentElement:g,parentDetails:this._getNodeDetails(g),keyCode:i,event:t})}}else if(86==i&&null!=this._cutNode&&this.model.allowDragAndDrop&&this.model.allowDropChild){if(t.preventDefault(),f=l.length>0?l:s,0===(f=e(n[n.index(f)])).length&&(f=this.element),_=this._cutNode.find(" > div > .e-text").first(),e(n).length>0){if(this._triggerEvent("beforePaste",{target:f,nodeDetails:this._getNodeDetails(f),keyCode:i,event:t}))return;this._isRender=!1,this._dropAsChildNode(f,_,t),this._isRender=!0,this._cutNode=null,v=_.closest(".e-item"),this._triggerEvent("nodePaste",{target:v,nodeDetails:this._getNodeDetails(v),keyCode:i,event:t})}}else b.model.allowMultiSelection&&(b._focusedNode=l)}else if(t.preventDefault(),u=l.length>0?l:s,((c=e(n).last()).hasClass("e-node-disable")||c.hasClass("hidden"))&&(c=this._getPrevEle(n,c)),s.length>0&&0==l.length&&s[0]!=c[0]||l.length>0&&l[0]!=c[0]){if(b._KeyPressEventHandler(c,b,i,t))return;b._onKeyDown(u,c)}}else if(t.preventDefault(),u=l.length>0?l:s,((h=e(n).first()).hasClass("e-node-disable")||h.hasClass("hidden"))&&(h=this._getNextEle(n,h)),s.length>0&&0==l.length&&s[0]!=h[0]||l.length>0&&l[0]!=h[0]){if(b._KeyPressEventHandler(h,b,i,t))return;b._onKeyDown(u,h)}}else{if(t.preventDefault(),u=l.length>0?l:s,a=this._getPrevEle(n,u),b._KeyPressEventHandler(a.length>0?a:null,b,i,t))return;a.length>0&&b._onKeyDown(l,a)}else{if(t.preventDefault(),u=l.length>0?l:s,r=this._getNextEle(n,u),b._KeyPressEventHandler(r.length>0?r:null,b,i,t))return;r.length>0&&b._onKeyDown(l,r)}},_getNextEle:function(t,i){var s,n=t.index(i);do{n++,s=e(t[n])}while(s.hasClass("e-node-disable")||s.hasClass("hidden"));return s},_getPrevEle:function(t,i){var s,n=t.index(i);do{n--,s=e(t[n])}while(s.hasClass("e-node-disable")||s.hasClass("hidden"));return s},_removeChildNodes:function(e,i,s){for(var n,l,o=0,r=0;r<i.length;r++)if(!t.isNullOrUndefined(i[r][0][this.model.fields.parentId])&&i[r][0][this.model.fields.parentId].toString()==s){o=i[r].length;break}for(r=0;r<o;r++)for(n=0;n<e.length;n++)if(!t.isNullOrUndefined(e[n][this.model.fields.parentId])&&e[n][this.model.fields.parentId].toString()==s){t.isNullOrUndefined(e[n])||(l=e[n][this.model.fields.id].toString()),e.splice(n,1),this._removeChildNodes(e,i,l);break}},_removeNode:function(i,s){var n,l,o,r,a,d,h,c,u;if(null!=i[0]&&null!=i[0]&&i.length>0){if(c=this,n=e(i[0]).closest("ul").closest(".e-item"),d=e(i[0]),this._triggerEvent("beforeDelete",{target:d,nodeDetails:this._getNodeDetails(d),parentElement:null!=n[0]?n:null,parentDetails:this._getNodeDetails(n),event:s,removedNodes:i}))return;if(this._isRender=!1,!t.isNullOrUndefined(this.dataSource())&&this.dataSource().length>0)for(u=this.dataSource(),r=0,a=i.length;r<a;r++)for(d=e(i[r]),h=0;h<u.length;h++)if(l=d.attr("id"),u[h][this.model.fields.id].toString()==l){o=this._groupingObjects(u,function(e){return[!t.isNullOrUndefined(e)&&[e[c.model.fields.parentId]].toString()]}),u.splice(h,1),this._removeChildNodes(u,o,l);break}if(i.remove(),this._modifyCss(n),this._updateNodes(),this._updateCheckState(n),this._isRender=!0,this._triggerEvent("nodeDelete",{parentElement:null!=n[0]?n:null,parentDetails:this._getNodeDetails(n),event:s,removedNodes:i}))return;c=this,u=this.dataSource(),setTimeout(function(){null==c.dataSource()||c.dataSource()instanceof t.DataManager||(c._dataSource=c._groupingObjects(u,function(e){return[!t.isNullOrUndefined(e)&&[e[c.model.fields.parentId]].toString()]}))},300)}},_updateNodes:function(){this._beforeBaseClass(),this._applyFirstLastChildClass(),this._updateExpandedNodes(),this._updateCheckedNodes(),this._updateSelectedNode()},_updateField:function(e,i,s,n){var l,o,r;if(!(t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||t.isNullOrUndefined(e)||t.isNullOrUndefined(i)||t.isNullOrUndefined(s)))if(1==this._templateType){for(l=0,o=e.length;l<o;l++)if(!t.isNullOrUndefined(e[l])&&!t.isNullOrUndefined(e[l][this.model.fields.id])&&e[l][this.model.fields.id].toString()==i){e[l][s]=n,0==n&&delete e[l][s],r=e[l],e.splice(l,1,r);break}}else for(l=0,o=e.length;l<o;l++){if(e[l][this.model.fields.id].toString()==i){e[l][s]=n,0==n&&delete e[l][s],r=e[l],e.splice(l,1,r);break}e[l].hasOwnProperty("child")&&this._updateField(e[l].child,i,s,n)}},_removeField:function(e,i){if(!(t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||t.isNullOrUndefined(e)))for(var n=0;n<e.length;n++)e[n][i]!=s&&delete e[n][i],e[n].hasOwnProperty("child")&&this._removeField(e[n].child,i)},_KeyPressEventHandler:function(t,i,s,n){var l,o,r,a;return null!=e(t)[0]?(a=this._isNodeExpanded(t),l=this._getNodeDetails(t),r=i._getPath(t),o={keyCode:s,currentElement:t,value:l.text,isExpanded:a,path:r,event:n,id:l.id,parentId:l.parentId}):o={keyCode:s,currentElement:t,value:"",isExpanded:"",path:"",event:n,id:"",parentId:""},this._triggerEvent("keyPress",o)},_documentClick:function(t){var i,s;if("Edit_Input"!=t.target.id&&(i=e("#Edit_Input")[0]),null!=i){var n=e(i).closest(".e-text")[0],l=i.value,o=e(i).closest(".e-item");e(i).remove(),n.lastChild.nodeValue=l,e(n).removeClass("e-editable").removeAttr("style"),this._updateField(this._newDataSource,o.attr("id"),this.model.fields.text,l),this._triggerEvent("nodeEdit",{id:o.attr("id"),oldText:this._beforeEditText,newText:l,target:o,nodeDetails:this._getNodeDetails(o),event:t})}0==this.element.find(t.target).length?(s=this.element.find(".e-item > div > .e-text.e-node-focus"),this._focusedNode=s.closest(".e-item"),s.removeClass("e-node-focus")):e(t.target).hasClass("e-active")&&(this._focusedNode=this.element.find(t.target).closest(".e-item"))},_saveAction:function(t,i){var s=t.val(),n=t.closest(".e-item"),l=t.closest(".e-text")[0];t.remove(),null!=l&&(l.lastChild.nodeValue=s,e(l).removeClass("e-editable"),this._updateField(this._newDataSource,n.attr("id"),this.model.fields.text,s),this._triggerEvent("nodeEdit",{id:n.attr("id"),oldText:this._beforeEditText,newText:s,target:n,nodeDetails:this._getNodeDetails(n),event:i}),this.element.focus(),this._focusedNode=n)},_cancelAction:function(t){var i=t.closest(".e-text")[0];t.remove(),i.lastChild.nodeValue=this._beforeEditText,e(i).removeClass("e-node-hover e-editable"),this.element.focus()},_mouseEnterEvent:function(t){this.element.find(".e-node-hover").removeClass("e-node-hover"),e(t.currentTarget).hasClass("e-text")&&!e(t.currentTarget).hasClass("e-node-disable")&&e(t.currentTarget).addClass("e-node-hover")},_mouseLeaveEvent:function(t){e(t.currentTarget).removeClass("e-node-hover")},_liMouseEnterEvent:function(t){this.element.find(".e-node-hover").removeClass("e-node-hover"),this.element.find(".e-li-hover").removeClass("e-li-hover");var i=e(t.currentTarget).closest(".e-item"),s=i.find("> div .e-text");s.length>0&&!s.hasClass("e-node-disable")&&(s.addClass("e-node-hover"),i.addClass("e-li-hover"))},_liMouseLeaveEvent:function(t){var i=e(t.currentTarget).closest(".e-item");i.find("> div .e-text").removeClass("e-node-hover"),i.removeClass("e-li-hover")},_onFocusOutHandler:function(){this._isPopup||this._hidePopup(),this._isPopup=!1},_createObjectByText:function(t,i){if("string"==typeof t){var s={};return s[this.model.fields.text]=t,null!=e(i)[0]&&(s[this.model.fields.parentId]=i[0].getAttribute("id")),s}},_addNodesWhenObject:function(i,s){var n,l,o,r,a,d,h=JSON.stringify(this._dataSource),c=this.dataSource();if(this._dataSource=[],null!=this.dataSource()&&this.dataSource()instanceof t.DataManager&&(c=[]),null!=s[0]&&s.length>0&&(n=s[0].getAttribute("id")),t.isNullOrUndefined(i.length))this._dataSource.push(i),t.isNullOrUndefined(this.dataSource())||(this._setNodeId(i,this.model.fields),t.isNullOrUndefined(n)||(i[this.model.fields.parentId]=n),c.push(i));else if(this._dataSource=i,!t.isNullOrUndefined(this.dataSource()))for(o=0;o<i.length;o++)this._setNodeId(i[o],this.model.fields),n?i[o][this.model.fields.parentId]=n:delete i[o][this.model.fields.parentId],c.push(i[o]);for(l=this._templateType,this._templateType=2,this._liList||(this._liList=e("li",this.element)),r=document.createDocumentFragment(),a=0,d=this._dataSource.length;a<d;a++)r.appendChild(this._genTemplate(this._dataSource[a],this.model.fields)),this._liList.push(e(r).children()[0]);return this._templateType=l,null==this.dataSource()||this.dataSource()instanceof t.DataManager||(this._dataSource=JSON.parse(h)),r},_setNodeId:function(e,i){var s,n,l,o=i&&i.id?i.id:this.model.fields.id;if((t.isNullOrUndefined(e[o])||""==e[o])&&(e[o]=this._id+"_"+this._indexID,this._indexID++),e.hasOwnProperty("child"))for(n=0,l=(s=e.child).length;n<l;n++)this._setNodeId(s[n],i.child)},_addExpandedNodes:function(t){var i=this.model.expandedNodes;this._removeNullInArray(i),-1==e.inArray(t,i)&&this.model.expandedNodes.push(t),this._persistValues(this.model.expandedNodes,"expandedNodes")},_removeExpandedNodes:function(t){var i=this.model.expandedNodes;e.inArray(t,i)>-1&&(this.model.expandedNodes.splice(e.inArray(t,i),1),0==i.length&&i.push(-1)),this._persistValues(this.model.expandedNodes,"expandedNodes")},_persistValues:function(i,s){var n,l,o,r,a,d,h,c;if(!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource()){for(l=[],a=0,d=(n=i).length;a<d;a++)!t.isNullOrUndefined(n[a])&&n[a]>=0&&(o=this._liList[n[a]],(r=e(o).attr("id"))&&l.push(r));(h=this._getCookies("_persistedValues"))&&((c=JSON.parse(h))[s]=l,c=this._updatePersistAttr(c),this._setCookies("_persistedValues",JSON.stringify(c)))}},_updatePersistAttr:function(i){return t.isNullOrUndefined(this._ignoreOnPersist)?(-1==e.inArray("selectedNodes",this._addToPersist)&&delete i.selectedNodes,-1==e.inArray("expandedNodes",this._addToPersist)&&delete i.expandedNodes,-1==e.inArray("checkedNodes",this._addToPersist)&&delete i.checkedNodes):(e.inArray("selectedNodes",this._ignoreOnPersist)>-1&&delete i.selectedNodes,e.inArray("expandedNodes",this._ignoreOnPersist)>-1&&delete i.expandedNodes,e.inArray("checkedNodes",this._ignoreOnPersist)>-1&&delete i.checkedNodes),i},_onChecked:function(e,i){var s,n,l,o=e.closest(".e-item");nodeDetails=this._getNodeDetails(o),this._CurrenctSelectedNodes.push(nodeDetails.text),s=this._isChecked(o),n=t.isNullOrUndefined(i)||t.isNullOrUndefined(i.event)?"":i.event,l={currentElement:o,id:nodeDetails.id,parentId:nodeDetails.parentId,value:nodeDetails.text,currentNode:this._CurrenctSelectedNodes,currentCheckedNodes:this._checkedArray,isChecked:s,event:n},this._isRender&&this._triggerEvent("nodeCheck",l)},_onUnChecked:function(e,i){var s,n,l,o=e.closest(".e-item");nodeDetails=this._getNodeDetails(o),this._CurrenctSelectedNodes.push(nodeDetails.text),s=this._isChecked(o),n=t.isNullOrUndefined(i)||t.isNullOrUndefined(i.event)?"":i.event,l={currentElement:o,id:nodeDetails.id,parentId:nodeDetails.parentId,value:nodeDetails.text,currentNode:nodeDetails.text,currentUncheckedNodes:this._uncheckedArray,isChecked:s,event:n},this._triggerEvent("nodeUncheck",l)},_addCheckNodes:function(e){var t=this.model.checkedNodes;this._removeNullInArray(t),!t instanceof Array&&(t=[]),-1==t.indexOf(e)&&t.push(e)},_removeCheckNodes:function(e){var t,i=this.model.checkedNodes;!i instanceof Array&&(i=[]),-1!=(t=i.indexOf(e))&&(i.splice(t,1),0==i.length&&i.push(-1))},_removeNullInArray:function(e){var t=e.indexOf(-1);-1!=t&&e.splice(t,1)},_afterInsertingNode:function(e){this._addDragableClass(),this._finalizeEditing(e);var t=e.closest("ul").closest(".e-item");this._modifyCss(t),this._updateCheckState(t),this._isSelectedAction(),t.length>0&&t.hasClass("e-node-disable")&&this._nodeDisableAction(t),this._updateSelectedNode()},_insertBeforeOrAfter:function(i,s,n){if(null!=(s=this._getNodeByID(s))[0]&&s.is("LI")&&s.hasClass("e-item")){if(this._triggerEvent("beforeAdd",{data:i,targetParent:null!=s[0]?s:null,parentDetails:this._getNodeDetails(s)}))return;if(this._isRender=!1,"object"!=typeof i&&(i=this._createObjectByText(i)),"object"!=typeof i)return;i[this.model.parentId]&&delete i[this.model.parentId],outerLi=this._addNodesWhenObject(i,s),temp=document.createElement("ul"),e(temp).append(outerLi),outerLi=e(temp.children),this.model.showCheckbox&&outerLi.children().find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),s.parents(".e-item:first").length>0?s.parents(".e-item:first").append(outerLi):this.element.append(outerLi),this.model.showCheckbox&&this._isCheckedAction(),this._dropAsSiblingNode(s,outerLi.find("> div > .e-text"),n,""),this._afterInsertingNode(outerLi),this._isRender=!0,this._triggerEvent("nodeAdd",{data:i,nodes:outerLi,parentElement:null!=s[0]?s:null,parentDetails:this._getNodeDetails(s)});var l=this,o=this.dataSource();setTimeout(function(){null==l.dataSource()||l.dataSource()instanceof t.DataManager||(l._dataSource=l._groupingObjects(o,function(e){return[!t.isNullOrUndefined(e)&&[e[l.model.fields.parentId]].toString()]}))},300)}},_getNodeByID:function(t){return"object"!=typeof t&&""!=t&&t!=s?this.element.find(this._checkValidId(t.toString())):((t=e(t)).is("A")&&t.hasClass("e-text")&&(t=t.closest(".e-item")),t)},_checkValidId:function(e){return"#"==e[0]?e.replace(/(:|\.|\[|\]|,)/g,"\\$1"):"#"+e.replace(/(:|\.|\[|\]|,)/g,"\\$1")},_isTreeElement:function(t){return null!=e(t)[0]&&t.is("LI")&&t.hasClass("e-item")},_isUrl:function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},_getChildUl:function(e){return this.model.fullRowSelect?e.children[2]:e.children[1]},_sendAjaxOptions:function(e,t){var i,s,n=this;(i=this._getNodeDetails(t)).mapper=this.model.fields,i.model=this.model,s={url:e,data:i,type:"POST",async:!0,crossDomain:!0,dataType:"JSON",contentType:"application/json; charset=utf-8",success:function(e){try{n._ajaxSuccessHandler(e,t)}catch(e){}},error:function(e){try{n._ajaxErrorHandler(e)}catch(e){}}},this._sendAjaxRequest(s)},_sendAjaxRequest:function(t){var i=JSON.parse(JSON.stringify(t));delete i.success,delete i.error,this._triggerEvent("beforeLoad",{ajaxOptions:i})||(delete i.success,delete i.error,e.extend(t,i),e.ajax({type:t.type,url:t.url,dataType:t.dataType,data:t.data,async:t.async,contentType:t.contentType,crossDomain:t.crossDomain,success:t.success,error:t.error}))},_ajaxSuccessHandler:function(e,t){this._isRender=!1,"object"==typeof e&&this.addNode(e,t),this._isRender=!0,this._triggerEvent("loadSuccess",{data:e,targetParent:t,parentDetails:this._getNodeDetails(t)})},_ajaxErrorHandler:function(e){this._triggerEvent("loadError",{error:e})},_wireEvents:function(){this._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click",this._ClickEventHandler)._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:this.model.expandOn,this._expandEventHandler)._on(this.element,"focus",this._onFocusHandler)._on(this.element,"blur",this._onFocusOutHandler),this._wholeRowEvents("_on"),this.model.allowEditing&&this._allowEditable(),this.model.allowDragAndDrop&&this._addDragableClass(),this.model.showCheckbox&&this.element.find(".nodecheckbox").ejCheckBox("enable"),this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._KeyPress)},_unWireEvents:function(){this._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click")._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:this.model.expandOn)._off(this.element,"focus")._off(this.element,"blur"),this._wholeRowEvents("_off"),this._preventEditable(),this._preventDraggable(),this.model.allowKeyboardNavigation&&this._off(this.element,"keydown"),this.model.showCheckbox&&this.element.find(".nodecheckbox").ejCheckBox("disable")},_wholeRowEvents:function(t){this.model.fullRowSelect?(this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchstart)?"touchstart":"mouseenter",".e-text-wrap",this._liMouseEnterEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchend)?"touchend":"mouseleave",".e-text-wrap",this._liMouseLeaveEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchstart)?"touchstart":"mouseenter",".e-fullrow",this._liMouseEnterEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchend)?"touchend":"mouseleave",".e-fullrow",this._liMouseLeaveEvent)):(this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchstart)?"touchstart":"mouseenter",".e-text",this._mouseEnterEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchend)?"touchend":"mouseleave",".e-text",this._mouseLeaveEvent))},_enableDragDrop:function(){this.model.allowDragAndDrop&&(this._drag(),this.model.allowDropChild&&this._childDrop(),this.model.allowDropSibling&&this._siblingDrop())},_allowEditable:function(){this.model.template||(this.element.find(".e-item").addClass("AllowEdit"),this._on(e(document),"click",this._documentClick)._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"doubletap":"dblclick","a.e-text",this._inlineEdit))},_preventEditable:function(){this.element.find(".e-item").removeClass("AllowEdit"),this._off(e(document),"click")._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"doubletap":"dblclick","a.e-text")},_preventDraggable:function(){this.element.find(".e-draggable, .e-droppable").removeClass("e-draggable e-droppable"),this._preventDropSibling(),this._preventDropChild(),this._off(this.element,"mouseup touchstart pointerdown MSPointerDown",this._anchors,this._focusElement)},_preventDropSibling:function(){this.element.find(".e-dropsibling").removeClass("e-dropsibling")},_preventDropChild:function(){this.element.find(".e-item > div > .e-dropchild").removeClass("e-dropchild")},_getNodeData:function(i){var n,l,o,r,a,d;if(!(t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||i==s)){if(this._updatePersistProb(),n=[],2==this._templateType)n=t.DataManager(this._newDataSource).executeLocal(t.Query().where(this.model.fields.id,"equal",i,!1));else{var h=[],c=this._newDataSource,u=t.Query().where(this.model.fields.id,"equal",i,!1),m=t.DataManager(c).executeLocal(u),p=this._getFilterItems(m[0],c);for(l=0,o=p.length;l<o;l++)h.push(new t.Predicate(this.model.fields.id,"equal",p[l],!1));r=t.Query().where(t.Predicate.or(h)),n=t.DataManager(c).executeLocal(r)}for(a=0,d=n.length;a<d;a++)0==e(document.getElementById(n[a][this.model.fields.id])).find("> ul .e-item").length?delete n[a][this.model.fields.hasChild]:1==this._templateType&&(n[a][this.model.fields.hasChild]=!0);return n}},_getFilterItems:function(e,i){var s,n,l,o,r,a,d,h=[];for(h.push(e.id),s=t.Query().where(this.model.fields.parentId,"equal",e.id,!1),l=0,o=(n=t.DataManager(i).executeLocal(s)).length;l<o;l++)for(a=0,d=(r=this._getFilterItems(n[l],i)).length;a<d;a++)h.push(r[a]);return h},refresh:function(){this._unWireEvents(),this.element.html(""),this._init()},expandAll:function(e,t){this.model.enableMultipleExpand&&(e>0?this._expandByLevel(this._getElement(),e,t):this._expandAll(t))},collapseAll:function(e,t){this.model.enableMultipleExpand&&(e>0?this._collapseByLevel(this._getElement(),e,t):this._collapseAll(t))},checkAll:function(){this.model.showCheckbox&&this._checkAll()},unCheckAll:function(){this.model.showCheckbox&&this._uncheckAll()},selectNode:function(e){e&&"object"==typeof e&&e.length>0?(this._unselectAll(),this._doSelectNodes(e,!0)):(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeSelectionAction(e))},unselectNode:function(e){e&&"object"==typeof e&&e.length>0?this._doUnselectNodes(e):(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeUnSelectionAction(e))},selectAll:function(){this.model.allowMultiSelection&&this._selectAll()},unselectAll:function(){this.model.allowMultiSelection&&this._unselectAll()},enableNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeEnableAction(e)},disableNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeDisableAction(e)},addNodes:function(e,t){if(e&&"object"==typeof e&&t==s&&e.length>0)for(var i=0;i<e.length;i++)this.addNode(e[i],t);else this.addNode(e,t)},addNode:function(i,s){var n,l,o,r,a,d,h;t.isNullOrUndefined(i)||(n=null,r=s?this._getNodeByID(s):this.model.allowMultiSelection?this.getSelectedNodes():this.getSelectedNode(),"object"==typeof i&&(t.isNullOrUndefined(i.length)&&!t.isNullOrUndefined(i[this.model.fields.parentId])?o=i[this.model.fields.parentId]:t.isNullOrUndefined(i.length)||1!=i.length||(o=i[0][this.model.fields.parentId]),o&&(r=this._getNodeByID(o))),r=this._isTreeElement(r)?e(r[0]):[],this._triggerEvent("beforeAdd",{data:i,targetParent:null!=r[0]?r:null,parentDetails:this._getNodeDetails(r)}))||(0==r.length||r.hasClass("e-node-disable")||this._expandNode(r),"object"!=typeof i&&(i=this._createObjectByText(i,r)),"object"!=typeof i||t.isNullOrUndefined(i.length)&&0==i.length)||(n=this._addNodesWhenObject(i,r),l=document.createElement("ul"),e(l).append(n),n=e(l.children),this.model.showCheckbox&&n.children().find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),this._appendNode(r,n),null!=r[0]&&((a=e(r[0].childNodes[0].childNodes[0])).hasClass("e-plus")||a.hasClass("e-minus")?a.removeClass("e-load"):a.removeClass("e-icon e-load")),null!=r[0]&&r.find("> div > .e-minus").length>0&&!this.model.enableMultipleExpand&&this._denyMultipleExpand(r),this._updateNodes(),this._afterInsertingNode(n),this._triggerEvent("nodeAdd",{data:i,nodes:n,parentElement:null!=r[0]?r:null,parentDetails:this._getNodeDetails(r)}),d=this,h=this.dataSource(),setTimeout(function(){null==d.dataSource()||d.dataSource()instanceof t.DataManager||(d._dataSource=d._groupingObjects(h,function(e){return[!t.isNullOrUndefined(e)&&[e[d.model.fields.parentId]].toString()]}))},300))},removeNode:function(e){e=e?this._getNodeByID(e):this.model.allowMultiSelection?this.getSelectedNodes():this.getSelectedNode(),this._isTreeElement(e)&&this._removeNode(e)},removeAll:function(){this._liList.remove(),this._updateNodes()},checkNode:function(e){this.model.showCheckbox&&(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeCheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]))},uncheckNode:function(e){this.model.showCheckbox&&(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeUncheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]))},expandNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&(this._allowOnDemand=!0,this._expandNode(e),this._allowOnDemand=!1)},collapseNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._collpaseNode(e)},showNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&e.css("visibility","").removeClass("hidden")},hideNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&e.css("visibility","hidden").addClass("hidden")},show:function(){this.element.css("visibility","").find(".e-item").removeClass("hidden")},hide:function(){this.element.css("visibility","hidden").find(".e-item").addClass("hidden")},hasChildNode:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.find("> ul > .e-item").length>0:void 0},isChildLoaded:function(e){return e=this._getNodeByID(e),!!(this._isTreeElement(e)&&e.find("ul > .e-item").length>0)},isNodeChecked:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._isChecked(e):void 0},isExpanded:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._isNodeExpanded(e):void 0},isVisible:function(e){return e=this._getNodeByID(e),!(!this._isTreeElement(e)||"hidden"==e.css("visibility"))},isExist:function(e){return e=this._getNodeByID(e),!(!this._isTreeElement(e)||-1==this._liList.index(e))},isSelected:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.find("> div > .e-text").hasClass("e-active"):void 0},isDisabled:function(e){return e=this._getNodeByID(e),!(!this._isTreeElement(e)||!e.hasClass("e-node-disable"))},getTreeData:function(e){return e!=s?this._getNodeData(e):t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager?void 0:this._orderDataSource()},getText:function(t){return t=this._getNodeByID(t),this._isTreeElement(t)?e.trim(this.element.find(t).find("> div > .e-text").text()):void 0},getSelectedNode:function(){return this.model.allowMultiSelection?null:this.element.find(".e-item > div > .e-active").closest(".e-item")},getSelectedNodes:function(){return this.element.find(".e-item > div > .e-active").closest(".e-item")},getCheckedNodes:function(){if(this.model.showCheckbox)return this._liList.find('> div > .e-chkbox-wrap[aria-checked="true"]').closest(".e-item")},getExpandedNodes:function(){return this.element.find(".e-item > div > .e-minus").closest(".e-item")},getExpandedNodesIndex:function(){return this._getNodesIndex(this.getExpandedNodes())},getCheckedNodesIndex:function(){return this._getNodesIndex(this.getCheckedNodes())},getSelectedNodeIndex:function(){return this.model.allowMultiSelection?null:this._getNodesIndex(this.getSelectedNode())},getSelectedNodesIndex:function(){return this._getNodesIndex(this.getSelectedNodes())},getVisibleNodes:function(){return this.element.find(".e-item:visible:not(.hidden, .e-node-disable)")},getNodeCount:function(){return this.element.find(".e-item").length},getNode:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._getNodeDetails(e):null},getNodeIndex:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._liList.index(e):void 0},getNodeByIndex:function(t){if("number"==typeof t)return e(this._liList[t])},getParent:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.parents(".e-item:first"):void 0},getChildren:function(e,t){return e=this._getNodeByID(e),this._isTreeElement(e)?t?e.find(".e-item"):e.find("> ul > .e-item"):void 0},updateText:function(i,s){if(i=this._getNodeByID(i),this._isTreeElement(i)&&!t.isNullOrUndefined(s)){var n,l,o=this.element.find(i).children("div").find("> .e-text")[0];if(null!=o){if(l={currentElement:e(o)},this._triggerEvent("beforeEdit",l))return!1;n=o.lastChild.nodeValue}o.lastChild.nodeValue=s,this._updateField(this._newDataSource,i.attr("id"),this.model.fields.text,s),this._triggerEvent("nodeEdit",{id:i.attr("id"),oldText:n,newText:s,target:i,nodeDetails:this._getNodeDetails(i),event:null})}},insertAfter:function(e,t){this._insertBeforeOrAfter(e,t,!1)},insertBefore:function(e,t){this._insertBeforeOrAfter(e,t,!0)},moveNode:function(e,i,s){if(e=this._getNodeByID(e),i=this._getNodeByID(i),this._isTreeElement(e)){if(e.parents(".e-item")[0]==i[0]&&t.isNullOrUndefined(s)||i.find(e).index()==s||null==i[0]&&this._liList.index(e)==s)return;var n=null!=i[0]&&s>=0?i.find("> ul > .e-item").eq(s):this.getNodeByIndex(s);this._isRender=!1,this._isTreeElement(n)?n.parents(".e-item:first")[0]==e.parents(".e-item:first")[0]&&null==n.next(".e-item")[0]?this._dropAsSiblingNode(n,e.find(" > div > .e-text"),!1,""):this._dropAsSiblingNode(n,e.find(" > div > .e-text"),!0,""):this._dropAsChildNode(i,e.find(" > div > .e-text"),""),i.length>0&&i.hasClass("e-node-disable")&&this._nodeDisableAction(i),this._isRender=!0}},loadData:function(e,t){t=this._getNodeByID(t),this._isUrl(e)&&(null==t[0]||this._isTreeElement(t))&&this._sendAjaxOptions(e,t)},ensureVisible:function(t){var i,s,n,l;if(t=this._getNodeByID(t),this._isTreeElement(t)&&!this.isDisabled(t)&&this.isVisible(t)){for(n=0,l=(i=t.parents(".e-item")).length;n<l;n++)this._expandNode(e(i[n]));return s=t.offset(),t.animate({scrollTop:s.top},this.model.enableAnimation?350:0,"linear",function(){t.find("> div > a.e-text")[0].scrollIntoView(!1)}),!0}return!1},_triggerEvent:function(e,t){if(this._isRender)return this._trigger(e,t)}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function s(){var s,n;return!i.settings.submitHandler||(i.submitButton&&(s=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),n=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&s.remove(),void 0!==n&&n)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,i,s;return e(this[0]).is("form")?t=this.validate().form():(s=[],t=!0,i=e(this[0].form).validate(),this.each(function(){t=i.element(this)&&t,s=s.concat(i.errorList)}),i.errorList=s),t},rules:function(t,i){var s,n,l,o,r,a,d=this[0];if(t)switch(s=e.data(d.form,"validator").settings,n=s.rules,l=e.validator.staticRules(d),t){case"add":e.extend(l,e.validator.normalizeRule(i)),delete l.messages,n[d.name]=l,i.messages&&(s.messages[d.name]=e.extend(s.messages[d.name],i.messages));break;case"remove":return i?(a={},e.each(i.split(/\s/),function(t,i){a[i]=l[i],delete l[i],"required"===i&&e(d).removeAttr("aria-required")}),a):(delete n[d.name],l)}return(o=e.validator.normalizeRules(e.extend({},e.validator.classRules(d),e.validator.attributeRules(d),e.validator.dataRules(d),e.validator.staticRules(d)),d)).required&&(r=o.required,delete o.required,o=e.extend({required:r},o),e(d).attr("aria-required","true")),o.remote&&(r=o.remote,delete o.remote,o=e.extend(o,{remote:r})),o}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(s):e(t).addClass(i).removeClass(s)},unhighlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(s):e(t).removeClass(i).addClass(s)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this.form,"validator"),s="on"+t.type.replace(/^validate/,""),n=i.settings;n[s]&&!e(this).is(n.ignore)&&n[s].call(i,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){s[i]=t})}),i=this.settings.rules,e.each(i,function(t,s){i[t]=e.validator.normalizeRule(s)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i=this.clean(t),s=this.validationTargetFor(i),n=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=e(s),(n=!1!==this.check(s))?delete this.invalid[s.name]:this.invalid[s.name]=!0),e(t).attr("aria-invalid",!n),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){for(var i in e.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var t,i=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(t=0;i[t];t++)this.settings.unhighlight.call(this,i[t],this.settings.errorClass,"");else i.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,s=e(t),n=t.type;return"radio"===n||"checkbox"===n?this.findByName(t.name).filter(":checked").val():"number"===n&&void 0!==t.validity?!t.validity.badInput&&s.val():"string"==typeof(i=s.val())?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var i,s,n,l=e(t).rules(),o=e.map(l,function(e,t){return t}).length,r=!1,a=this.elementValue(t);for(s in l){n={method:s,parameters:l[s]};try{if("dependency-mismatch"===(i=e.validator.methods[s].call(this,a,t,n.parameters))&&1===o){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,n),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+n.method+"' method."),e}}if(!r)return this.objectLength(l)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var s=this.defaultMessage(t,i.method),n=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,t):n.test(s)&&(s=e.validator.format(s.replace(n,"{$1}"),i.parameters)),this.errorList.push({message:s,element:t,method:i.method}),this.errorMap[t.name]=s,this.submitted[t.name]=s},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var s,n,l,o=this.errorsFor(t),r=this.idOrName(t),a=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(i)):(s=o=e("<"+this.settings.errorElement+">").attr("id",r+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,e(t)):s.insertAfter(t),o.is("label")?o.attr("for",r):0===o.parents("label[for='"+r+"']").length&&(l=o.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),a?a.match(new RegExp("\\b"+l+"\\b"))||(a+=" "+l):a=l,e(t).attr("aria-describedby",a),(n=this.groups[t.name])&&e.each(this.groups,function(t,i){i===n&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!i&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var i=this.idOrName(t),s=e(t).attr("aria-describedby"),n="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(n=n+", #"+s.replace(/\s+/g,", #")),this.errors().filter(n)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},s=e(t).attr("class");return s&&e.each(s.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(e,t,i,s){/min|max/.test(i)&&(null===t||/number|range|text/.test(t))&&(s=Number(s),isNaN(s)&&(s=void 0)),s||0===s?e[i]=s:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,s,n={},l=e(t),o=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(""===(s=t.getAttribute(i))&&(s=!0),s=!!s):s=l.attr(i),this.normalizeAttributeRule(n,o,i,s);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var i,s,n={},l=e(t),o=t.getAttribute("type");for(i in e.validator.methods)s=l.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(n,o,i,s);return n},staticRules:function(t){var i={},s=e.data(t.form,"validator");return s.settings.rules&&(i=e.validator.normalizeRule(s.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(s,n){if(!1!==n){if(n.param||n.depends){var l=!0;switch(typeof n.depends){case"string":l=!!e(n.depends,i.form).length;break;case"function":l=n.depends.call(i,i)}l?t[s]=void 0===n.param||n.param:delete t[s]}}else delete t[s]}),e.each(t,function(s,n){t[s]=e.isFunction(n)?n(i):n}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,s){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==s?s:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var n=e(i).val();return n&&n.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i,s,n=0,l=0,o=!1;if((e=e.replace(/\D/g,"")).length<13||e.length>19)return!1;for(i=e.length-1;i>=0;i--)s=e.charAt(i),l=parseInt(s,10),o&&(l*=2)>9&&(l-=9),n+=l,o=!o;return n%10==0},minlength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=s},maxlength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=n},rangelength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=s[0]&&n<=s[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,s){var n=e(s);return this.settings.onfocusout&&n.off(".validate-equalTo").on("blur.validate-equalTo",function(){e(i).valid()}),t===n.val()},remote:function(t,i,s){if(this.optional(i))return"dependency-mismatch";var n,l,o=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=o.message,s="string"==typeof s&&{url:s}||s,o.old===t?o.valid:(o.old=t,n=this,this.startRequest(i),(l={})[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:l,context:n.currentForm,success:function(s){var l,r,a,d=!0===s||"true"===s;n.settings.messages[i.name].remote=o.originalMessage,d?(a=n.formSubmitted,n.prepareElement(i),n.formSubmitted=a,n.successList.push(i),delete n.invalid[i.name],n.showErrors()):(l={},r=s||n.defaultMessage(i,"remote"),l[i.name]=o.message=e.isFunction(r)?r(t):r,n.invalid[i.name]=!0,n.showErrors(l)),o.valid=d,n.stopRequest(i,d)}},s)),"pending")}}});var t,i={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,s){var n=e.port;"abort"===e.mode&&(i[n]&&i[n].abort(),i[n]=s)}):(t=e.ajax,e.ajax=function(s){var n=("mode"in s?s:e.ajaxSettings).mode,l=("port"in s?s:e.ajaxSettings).port;return"abort"===n?(i[l]&&i[l].abort(),i[l]=t.apply(this,arguments),i[l]):t.apply(this,arguments)})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t()}(this,function(){"use strict";const e=new Map,t={set(t,i,s){e.has(t)||e.set(t,new Map);const n=e.get(t);n.has(i)||0===n.size?n.set(i,s):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(t,i)=>e.has(t)&&e.get(t).get(i)||null,remove(t,i){if(!e.has(t))return;const s=e.get(t);s.delete(i),0===s.size&&e.delete(t)}},i="transitionend",s=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),n=e=>{e.dispatchEvent(new Event(i))},l=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),o=e=>l(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(s(e)):null,r=e=>{if(!l(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i)return!1;if(null===t)return!1}return t},a=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),d=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?d(e.parentNode):null},h=()=>{},c=e=>{e.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,m=[],p=()=>"rtl"===document.documentElement.dir,g=e=>{var t;t=()=>{const t=u();if(t){const i=e.NAME,s=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=s,e.jQueryInterface)}},"loading"===document.readyState?(m.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of m)e()}),m.push(t)):t()},f=(e,t=[],i=e)=>"function"==typeof e?e(...t):i,_=(e,t,s=!0)=>{if(!s)return void f(e);const l=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const s=Number.parseFloat(t),n=Number.parseFloat(i);return s||n?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0})(t)+5;let o=!1;const r=({target:s})=>{s===t&&(o=!0,t.removeEventListener(i,r),f(e))};t.addEventListener(i,r),setTimeout(()=>{o||n(t)},l)},v=(e,t,i,s)=>{const n=e.length;let l=e.indexOf(t);return-1===l?!i&&s?e[n-1]:e[0]:(l+=i?1:-1,s&&(l=(l+n)%n),e[Math.max(0,Math.min(l,n-1))])},b=/[^.]*(?=\..*)\.|.*/,w=/\..*/,C=/::\d+$/,y={};let S=1;const x={mouseenter:"mouseover",mouseleave:"mouseout"},T=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function k(e,t){return t&&`${t}::${S++}`||e.uidEvent||S++}function D(e){const t=k(e);return e.uidEvent=t,y[t]=y[t]||{},y[t]}function I(e,t,i=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===i)}function O(e,t,i){const s="string"==typeof t,n=s?i:t||i;let l=E(e);return T.has(l)||(l=e),[s,n,l]}function A(e,t,i,s,n){if("string"!=typeof t||!e)return;let[l,o,r]=O(t,i,s);if(t in x){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o=e(o)}const a=D(e),d=a[r]||(a[r]={}),h=I(d,o,l?i:null);if(h)return void(h.oneOff=h.oneOff&&n);const c=k(o,t.replace(b,"")),u=l?function(e,t,i){return function s(n){const l=e.querySelectorAll(t);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(const r of l)if(r===o)return M(n,{delegateTarget:o}),s.oneOff&&N.off(e,n.type,t,i),i.apply(o,[n])}}(e,i,o):function(e,t){return function i(s){return M(s,{delegateTarget:e}),i.oneOff&&N.off(e,s.type,t),t.apply(e,[s])}}(e,o);u.delegationSelector=l?i:null,u.callable=o,u.oneOff=n,u.uidEvent=c,d[c]=u,e.addEventListener(r,u,l)}function L(e,t,i,s,n){const l=I(t[i],s,n);l&&(e.removeEventListener(i,l,Boolean(n)),delete t[i][l.uidEvent])}function R(e,t,i,s){const n=t[i]||{};for(const[l,o]of Object.entries(n))l.includes(s)&&L(e,t,i,o.callable,o.delegationSelector)}function E(e){return e=e.replace(w,""),x[e]||e}const N={on(e,t,i,s){A(e,t,i,s,!1)},one(e,t,i,s){A(e,t,i,s,!0)},off(e,t,i,s){if("string"!=typeof t||!e)return;const[n,l,o]=O(t,i,s),r=o!==t,a=D(e),d=a[o]||{},h=t.startsWith(".");if(void 0===l){if(h)for(const i of Object.keys(a))R(e,a,i,t.slice(1));for(const[i,s]of Object.entries(d)){const n=i.replace(C,"");r&&!t.includes(n)||L(e,a,o,s.callable,s.delegationSelector)}}else{if(!Object.keys(d).length)return;L(e,a,o,l,n?i:null)}},trigger(e,t,i){if("string"!=typeof t||!e)return null;const s=u();let n=null,l=!0,o=!0,r=!1;t!==E(t)&&s&&(n=s.Event(t,i),s(e).trigger(n),l=!n.isPropagationStopped(),o=!n.isImmediatePropagationStopped(),r=n.isDefaultPrevented());const a=M(new Event(t,{bubbles:l,cancelable:!0}),i);return r&&a.preventDefault(),o&&e.dispatchEvent(a),a.defaultPrevented&&n&&n.preventDefault(),a}};function M(e,t={}){for(const[i,s]of Object.entries(t))try{e[i]=s}catch(t){Object.defineProperty(e,i,{configurable:!0,get:()=>s})}return e}function P(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function F(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const j={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${F(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${F(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const s of i){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=P(e.dataset[s])}return t},getDataAttribute:(e,t)=>P(e.getAttribute(`data-bs-${F(t)}`))};class z{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=l(t)?j.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...l(t)?j.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,n]of Object.entries(t)){const t=e[s],o=l(t)?"element":null==(i=t)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${n}".`)}var i}}class $ extends z{constructor(e,i){super(),(e=o(e))&&(this._element=e,this._config=this._getConfig(i),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){_(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(o(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const H=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t?t.split(",").map(e=>s(e)).join(","):null},V={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const i=[];let s=e.parentNode.closest(t);for(;s;)i.push(s),s=s.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!a(e)&&r(e))},getSelectorFromElement(e){const t=H(e);return t&&V.findOne(t)?t:null},getElementFromSelector(e){const t=H(e);return t?V.findOne(t):null},getMultipleElementsFromSelector(e){const t=H(e);return t?V.find(t):[]}},U=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;N.on(document,i,`[data-bs-dismiss="${s}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),a(this))return;const n=V.getElementFromSelector(this)||this.closest(`.${s}`);e.getOrCreateInstance(n)[t]()})},B=".bs.alert",W=`close${B}`,q=`closed${B}`;class G extends ${static get NAME(){return"alert"}close(){if(N.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),N.trigger(this._element,q),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=G.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}U(G,"close"),g(G);const K='[data-bs-toggle="button"]';class Y extends ${static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=Y.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}N.on(document,"click.bs.button.data-api",K,e=>{e.preventDefault();const t=e.target.closest(K);Y.getOrCreateInstance(t).toggle()}),g(Y);const Q=".bs.swipe",J=`touchstart${Q}`,X=`touchmove${Q}`,Z=`touchend${Q}`,ee=`pointerdown${Q}`,te=`pointerup${Q}`,ie={endCallback:null,leftCallback:null,rightCallback:null},se={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ne extends z{constructor(e,t){super(),this._element=e,e&&ne.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ie}static get DefaultType(){return se}static get NAME(){return"swipe"}dispose(){N.off(this._element,Q)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),f(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&f(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,ee,e=>this._start(e)),N.on(this._element,te,e=>this._end(e)),this._element.classList.add("pointer-event")):(N.on(this._element,J,e=>this._start(e)),N.on(this._element,X,e=>this._move(e)),N.on(this._element,Z,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const le=".bs.carousel",oe=".data-api",re="next",ae="prev",de="left",he="right",ce=`slide${le}`,ue=`slid${le}`,me=`keydown${le}`,pe=`mouseenter${le}`,ge=`mouseleave${le}`,fe=`dragstart${le}`,_e=`load${le}${oe}`,ve=`click${le}${oe}`,be="carousel",we="active",Ce=".active",ye=".carousel-item",Se=Ce+ye,xe={ArrowLeft:he,ArrowRight:de},Te={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ke={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class De extends ${constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=V.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===be&&this.cycle()}static get Default(){return Te}static get DefaultType(){return ke}static get NAME(){return"carousel"}next(){this._slide(re)}nextWhenVisible(){!document.hidden&&r(this._element)&&this.next()}prev(){this._slide(ae)}pause(){this._isSliding&&n(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?N.one(this._element,ue,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void N.one(this._element,ue,()=>this.to(e));const i=this._getItemIndex(this._getActive());if(i===e)return;const s=e>i?re:ae;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&N.on(this._element,me,e=>this._keydown(e)),"hover"===this._config.pause&&(N.on(this._element,pe,()=>this.pause()),N.on(this._element,ge,()=>this._maybeEnableCycle())),this._config.touch&&ne.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of V.find(".carousel-item img",this._element))N.on(e,fe,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(de)),rightCallback:()=>this._slide(this._directionToOrder(he)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ne(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=xe[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=V.findOne(Ce,this._indicatorsElement);t.classList.remove(we),t.removeAttribute("aria-current");const i=V.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(we),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),s=e===re,n=t||v(this._getItems(),i,s,this._config.wrap);if(n===i)return;const l=this._getItemIndex(n),o=t=>N.trigger(this._element,t,{relatedTarget:n,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:l});if(o(ce).defaultPrevented)return;if(!i||!n)return;const r=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(l),this._activeElement=n;const a=s?"carousel-item-start":"carousel-item-end",d=s?"carousel-item-next":"carousel-item-prev";n.classList.add(d),c(n),i.classList.add(a),n.classList.add(a),this._queueCallback(()=>{n.classList.remove(a,d),n.classList.add(we),i.classList.remove(we,d,a),this._isSliding=!1,o(ue)},i,this._isAnimated()),r&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return V.findOne(Se,this._element)}_getItems(){return V.find(ye,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return p()?e===de?ae:re:e===de?re:ae}_orderToDirection(e){return p()?e===ae?de:he:e===ae?he:de}static jQueryInterface(e){return this.each(function(){const t=De.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}N.on(document,ve,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=V.getElementFromSelector(this);if(!t||!t.classList.contains(be))return;e.preventDefault();const i=De.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");return s?(i.to(s),void i._maybeEnableCycle()):"next"===j.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())}),N.on(window,_e,()=>{const e=V.find('[data-bs-ride="carousel"]');for(const t of e)De.getOrCreateInstance(t)}),g(De);const Ie=".bs.collapse",Oe=`show${Ie}`,Ae=`shown${Ie}`,Le=`hide${Ie}`,Re=`hidden${Ie}`,Ee=`click${Ie}.data-api`,Ne="show",Me="collapse",Pe="collapsing",Fe=`:scope .${Me} .${Me}`,je='[data-bs-toggle="collapse"]',ze={parent:null,toggle:!0},$e={parent:"(null|element)",toggle:"boolean"};class He extends ${constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=V.find(je);for(const e of i){const t=V.getSelectorFromElement(e),i=V.find(t).filter(e=>e===this._element);null!==t&&i.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ze}static get DefaultType(){return $e}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>He.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if(N.trigger(this._element,Oe).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove(Me),this._element.classList.add(Pe),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Pe),this._element.classList.add(Me,Ne),this._element.style[t]="",N.trigger(this._element,Ae)},this._element,!0),this._element.style[t]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(N.trigger(this._element,Le).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,c(this._element),this._element.classList.add(Pe),this._element.classList.remove(Me,Ne);for(const e of this._triggerArray){const t=V.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Pe),this._element.classList.add(Me),N.trigger(this._element,Re)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ne)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=o(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(je);for(const t of e){const e=V.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=V.find(Fe,this._config.parent);return V.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const i=He.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}})}}N.on(document,Ee,je,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const e of V.getMultipleElementsFromSelector(this))He.getOrCreateInstance(e,{toggle:!1}).toggle()}),g(He);var Ve="top",Ue="bottom",Be="right",We="left",qe="auto",Ge=[Ve,Ue,Be,We],Ke="start",Ye="end",Qe="clippingParents",Je="viewport",Xe="popper",Ze="reference",et=Ge.reduce(function(e,t){return e.concat([t+"-"+Ke,t+"-"+Ye])},[]),tt=[].concat(Ge,[qe]).reduce(function(e,t){return e.concat([t,t+"-"+Ke,t+"-"+Ye])},[]),it="beforeRead",st="read",nt="afterRead",lt="beforeMain",ot="main",rt="afterMain",at="beforeWrite",dt="write",ht="afterWrite",ct=[it,st,nt,lt,ot,rt,at,dt,ht];function ut(e){return e?(e.nodeName||"").toLowerCase():null}function mt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pt(e){return e instanceof mt(e).Element||e instanceof Element}function gt(e){return e instanceof mt(e).HTMLElement||e instanceof HTMLElement}function ft(e){return"undefined"!=typeof ShadowRoot&&(e instanceof mt(e).ShadowRoot||e instanceof ShadowRoot)}const _t={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},n=t.elements[e];gt(n)&&ut(n)&&(Object.assign(n.style,i),Object.keys(s).forEach(function(e){var t=s[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(e){var s=t.elements[e],n=t.attributes[e]||{},l=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce(function(e,t){return e[t]="",e},{});gt(s)&&ut(s)&&(Object.assign(s.style,l),Object.keys(n).forEach(function(e){s.removeAttribute(e)}))})}},requires:["computeStyles"]};function vt(e){return e.split("-")[0]}var bt=Math.max,wt=Math.min,Ct=Math.round;function yt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function St(){return!/^((?!chrome|android).)*safari/i.test(yt())}function xt(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var s=e.getBoundingClientRect(),n=1,l=1;t&&gt(e)&&(n=e.offsetWidth>0&&Ct(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&Ct(s.height)/e.offsetHeight||1);var o=(pt(e)?mt(e):window).visualViewport,r=!St()&&i,a=(s.left+(r&&o?o.offsetLeft:0))/n,d=(s.top+(r&&o?o.offsetTop:0))/l,h=s.width/n,c=s.height/l;return{width:h,height:c,top:d,right:a+h,bottom:d+c,left:a,x:a,y:d}}function Tt(e){var t=xt(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function kt(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&ft(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Dt(e){return mt(e).getComputedStyle(e)}function It(e){return["table","td","th"].indexOf(ut(e))>=0}function Ot(e){return((pt(e)?e.ownerDocument:e.document)||window.document).documentElement}function At(e){return"html"===ut(e)?e:e.assignedSlot||e.parentNode||(ft(e)?e.host:null)||Ot(e)}function Lt(e){return gt(e)&&"fixed"!==Dt(e).position?e.offsetParent:null}function Rt(e){for(var t=mt(e),i=Lt(e);i&&It(i)&&"static"===Dt(i).position;)i=Lt(i);return i&&("html"===ut(i)||"body"===ut(i)&&"static"===Dt(i).position)?t:i||function(e){var t=/firefox/i.test(yt());if(/Trident/i.test(yt())&&gt(e)&&"fixed"===Dt(e).position)return null;var i=At(e);for(ft(i)&&(i=i.host);gt(i)&&["html","body"].indexOf(ut(i))<0;){var s=Dt(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(e)||t}function Et(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Nt(e,t,i){return bt(e,wt(t,i))}function Mt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Pt(e,t){return t.reduce(function(t,i){return t[i]=e,t},{})}const Ft={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,s=e.name,n=e.options,l=i.elements.arrow,o=i.modifiersData.popperOffsets,r=vt(i.placement),a=Et(r),d=[We,Be].indexOf(r)>=0?"height":"width";if(l&&o){var h=function(e,t){return Mt("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Pt(e,Ge))}(n.padding,i),c=Tt(l),u="y"===a?Ve:We,m="y"===a?Ue:Be,p=i.rects.reference[d]+i.rects.reference[a]-o[a]-i.rects.popper[d],g=o[a]-i.rects.reference[a],f=Rt(l),_=f?"y"===a?f.clientHeight||0:f.clientWidth||0:0,v=p/2-g/2,b=h[u],w=_-c[d]-h[m],C=_/2-c[d]/2+v,y=Nt(b,C,w),S=a;i.modifiersData[s]=((t={})[S]=y,t.centerOffset=y-C,t)}},effect:function(e){var t=e.state,i=e.options.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&kt(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jt(e){return e.split("-")[1]}var zt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $t(e){var t,i=e.popper,s=e.popperRect,n=e.placement,l=e.variation,o=e.offsets,r=e.position,a=e.gpuAcceleration,d=e.adaptive,h=e.roundOffsets,c=e.isFixed,u=o.x,m=void 0===u?0:u,p=o.y,g=void 0===p?0:p,f="function"==typeof h?h({x:m,y:g}):{x:m,y:g};m=f.x,g=f.y;var _=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),b=We,w=Ve,C=window;if(d){var y=Rt(i),S="clientHeight",x="clientWidth";y===mt(i)&&"static"!==Dt(y=Ot(i)).position&&"absolute"===r&&(S="scrollHeight",x="scrollWidth"),(n===Ve||(n===We||n===Be)&&l===Ye)&&(w=Ue,g-=(c&&y===C&&C.visualViewport?C.visualViewport.height:y[S])-s.height,g*=a?1:-1),n!==We&&(n!==Ve&&n!==Ue||l!==Ye)||(b=Be,m-=(c&&y===C&&C.visualViewport?C.visualViewport.width:y[x])-s.width,m*=a?1:-1)}var T,k=Object.assign({position:r},d&&zt),D=!0===h?function(e,t){var i=e.x,s=e.y,n=t.devicePixelRatio||1;return{x:Ct(i*n)/n||0,y:Ct(s*n)/n||0}}({x:m,y:g},mt(i)):{x:m,y:g};return m=D.x,g=D.y,a?Object.assign({},k,((T={})[w]=v?"0":"",T[b]=_?"0":"",T.transform=(C.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",T)):Object.assign({},k,((t={})[w]=v?g+"px":"",t[b]=_?m+"px":"",t.transform="",t))}const Ht={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,s=i.gpuAcceleration,n=void 0===s||s,l=i.adaptive,o=void 0===l||l,r=i.roundOffsets,a=void 0===r||r,d={placement:vt(t.placement),variation:jt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,$t(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,$t(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Vt={passive:!0};const Ut={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,s=e.options,n=s.scroll,l=void 0===n||n,o=s.resize,r=void 0===o||o,a=mt(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return l&&d.forEach(function(e){e.addEventListener("scroll",i.update,Vt)}),r&&a.addEventListener("resize",i.update,Vt),function(){l&&d.forEach(function(e){e.removeEventListener("scroll",i.update,Vt)}),r&&a.removeEventListener("resize",i.update,Vt)}},data:{}};var Bt={left:"right",right:"left",bottom:"top",top:"bottom"};function Wt(e){return e.replace(/left|right|bottom|top/g,function(e){return Bt[e]})}var qt={start:"end",end:"start"};function Gt(e){return e.replace(/start|end/g,function(e){return qt[e]})}function Kt(e){var t=mt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Yt(e){return xt(Ot(e)).left+Kt(e).scrollLeft}function Qt(e){var t=Dt(e),i=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+s)}function Jt(e){return["html","body","#document"].indexOf(ut(e))>=0?e.ownerDocument.body:gt(e)&&Qt(e)?e:Jt(At(e))}function Xt(e,t){var i;void 0===t&&(t=[]);var s=Jt(e),n=s===(null==(i=e.ownerDocument)?void 0:i.body),l=mt(s),o=n?[l].concat(l.visualViewport||[],Qt(s)?s:[]):s,r=t.concat(o);return n?r:r.concat(Xt(At(o)))}function Zt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ei(e,t,i){return t===Je?Zt(function(e,t){var i=mt(e),s=Ot(e),n=i.visualViewport,l=s.clientWidth,o=s.clientHeight,r=0,a=0;if(n){l=n.width,o=n.height;var d=St();(d||!d&&"fixed"===t)&&(r=n.offsetLeft,a=n.offsetTop)}return{width:l,height:o,x:r+Yt(e),y:a}}(e,i)):pt(t)?function(e,t){var i=xt(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):Zt(function(e){var t,i=Ot(e),s=Kt(e),n=null==(t=e.ownerDocument)?void 0:t.body,l=bt(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=bt(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),r=-s.scrollLeft+Yt(e),a=-s.scrollTop;return"rtl"===Dt(n||i).direction&&(r+=bt(i.clientWidth,n?n.clientWidth:0)-l),{width:l,height:o,x:r,y:a}}(Ot(e)))}function ti(e){var t,i=e.reference,s=e.element,n=e.placement,l=n?vt(n):null,o=n?jt(n):null,r=i.x+i.width/2-s.width/2,a=i.y+i.height/2-s.height/2;switch(l){case Ve:t={x:r,y:i.y-s.height};break;case Ue:t={x:r,y:i.y+i.height};break;case Be:t={x:i.x+i.width,y:a};break;case We:t={x:i.x-s.width,y:a};break;default:t={x:i.x,y:i.y}}var d=l?Et(l):null;if(null!=d){var h="y"===d?"height":"width";switch(o){case Ke:t[d]=t[d]-(i[h]/2-s[h]/2);break;case Ye:t[d]=t[d]+(i[h]/2-s[h]/2)}}return t}function ii(e,t){void 0===t&&(t={});var i=t,s=i.placement,n=void 0===s?e.placement:s,l=i.strategy,o=void 0===l?e.strategy:l,r=i.boundary,a=void 0===r?Qe:r,d=i.rootBoundary,h=void 0===d?Je:d,c=i.elementContext,u=void 0===c?Xe:c,m=i.altBoundary,p=void 0!==m&&m,g=i.padding,f=void 0===g?0:g,_=Mt("number"!=typeof f?f:Pt(f,Ge)),v=u===Xe?Ze:Xe,b=e.rects.popper,w=e.elements[p?v:u],C=function(e,t,i,s){var n="clippingParents"===t?function(e){var t=Xt(At(e)),i=["absolute","fixed"].indexOf(Dt(e).position)>=0&&gt(e)?Rt(e):e;return pt(i)?t.filter(function(e){return pt(e)&&kt(e,i)&&"body"!==ut(e)}):[]}(e):[].concat(t),l=[].concat(n,[i]),o=l[0],r=l.reduce(function(t,i){var n=ei(e,i,s);return t.top=bt(n.top,t.top),t.right=wt(n.right,t.right),t.bottom=wt(n.bottom,t.bottom),t.left=bt(n.left,t.left),t},ei(e,o,s));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}(pt(w)?w:w.contextElement||Ot(e.elements.popper),a,h,o),y=xt(e.elements.reference),S=ti({reference:y,element:b,strategy:"absolute",placement:n}),x=Zt(Object.assign({},b,S)),T=u===Xe?x:y,k={top:C.top-T.top+_.top,bottom:T.bottom-C.bottom+_.bottom,left:C.left-T.left+_.left,right:T.right-C.right+_.right},D=e.modifiersData.offset;if(u===Xe&&D){var I=D[n];Object.keys(k).forEach(function(e){var t=[Be,Ue].indexOf(e)>=0?1:-1,i=[Ve,Ue].indexOf(e)>=0?"y":"x";k[e]+=I[i]*t})}return k}const si={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var n=i.mainAxis,l=void 0===n||n,o=i.altAxis,r=void 0===o||o,a=i.fallbackPlacements,d=i.padding,h=i.boundary,c=i.rootBoundary,u=i.altBoundary,m=i.flipVariations,p=void 0===m||m,g=i.allowedAutoPlacements,f=t.options.placement,_=vt(f),v=a||(_!==f&&p?function(e){if(vt(e)===qe)return[];var t=Wt(e);return[Gt(e),t,Gt(t)]}(f):[Wt(f)]),b=[f].concat(v).reduce(function(e,i){return e.concat(vt(i)===qe?function(e,t){void 0===t&&(t={});var i=t,s=i.placement,n=i.boundary,l=i.rootBoundary,o=i.padding,r=i.flipVariations,a=i.allowedAutoPlacements,d=void 0===a?tt:a,h=jt(s),c=h?r?et:et.filter(function(e){return jt(e)===h}):Ge,u=c.filter(function(e){return d.indexOf(e)>=0});0===u.length&&(u=c);var m=u.reduce(function(t,i){return t[i]=ii(e,{placement:i,boundary:n,rootBoundary:l,padding:o})[vt(i)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}(t,{placement:i,boundary:h,rootBoundary:c,padding:d,flipVariations:p,allowedAutoPlacements:g}):i)},[]),w=t.rects.reference,C=t.rects.popper,y=new Map,S=!0,x=b[0],T=0;T<b.length;T++){var k=b[T],D=vt(k),I=jt(k)===Ke,O=[Ve,Ue].indexOf(D)>=0,A=O?"width":"height",L=ii(t,{placement:k,boundary:h,rootBoundary:c,altBoundary:u,padding:d}),R=O?I?Be:We:I?Ue:Ve;w[A]>C[A]&&(R=Wt(R));var E=Wt(R),N=[];if(l&&N.push(L[D]<=0),r&&N.push(L[R]<=0,L[E]<=0),N.every(function(e){return e})){x=k,S=!1;break}y.set(k,N)}if(S)for(var M=function(e){var t=b.find(function(t){var i=y.get(t);if(i)return i.slice(0,e).every(function(e){return e})});if(t)return x=t,"break"},P=p?3:1;P>0&&"break"!==M(P);P--);t.placement!==x&&(t.modifiersData[s]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ni(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function li(e){return[Ve,Be,Ue,We].some(function(t){return e[t]>=0})}const oi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,s=t.rects.reference,n=t.rects.popper,l=t.modifiersData.preventOverflow,o=ii(t,{elementContext:"reference"}),r=ii(t,{altBoundary:!0}),a=ni(o,s),d=ni(r,n,l),h=li(a),c=li(d);t.modifiersData[i]={referenceClippingOffsets:a,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":c})}},ri={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,s=e.name,n=i.offset,l=void 0===n?[0,0]:n,o=tt.reduce(function(e,i){return e[i]=function(e,t,i){var s=vt(e),n=[We,Ve].indexOf(s)>=0?-1:1,l="function"==typeof i?i(Object.assign({},t,{placement:e})):i,o=l[0],r=l[1];return o=o||0,r=(r||0)*n,[We,Be].indexOf(s)>=0?{x:r,y:o}:{x:o,y:r}}(i,t.rects,l),e},{}),r=o[t.placement],a=r.x,d=r.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=a,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}},ai={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=ti({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},di={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name,n=i.mainAxis,l=void 0===n||n,o=i.altAxis,r=void 0!==o&&o,a=i.boundary,d=i.rootBoundary,h=i.altBoundary,c=i.padding,u=i.tether,m=void 0===u||u,p=i.tetherOffset,g=void 0===p?0:p,f=ii(t,{boundary:a,rootBoundary:d,padding:c,altBoundary:h}),_=vt(t.placement),v=jt(t.placement),b=!v,w=Et(_),C="x"===w?"y":"x",y=t.modifiersData.popperOffsets,S=t.rects.reference,x=t.rects.popper,T="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,k="number"==typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(y){if(l){var O,A="y"===w?Ve:We,L="y"===w?Ue:Be,R="y"===w?"height":"width",E=y[w],N=E+f[A],M=E-f[L],P=m?-x[R]/2:0,F=v===Ke?S[R]:x[R],j=v===Ke?-x[R]:-S[R],z=t.elements.arrow,$=m&&z?Tt(z):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=H[A],U=H[L],B=Nt(0,S[R],$[R]),W=b?S[R]/2-P-B-V-k.mainAxis:F-B-V-k.mainAxis,q=b?-S[R]/2+P+B+U+k.mainAxis:j+B+U+k.mainAxis,G=t.elements.arrow&&Rt(t.elements.arrow),K=G?"y"===w?G.clientTop||0:G.clientLeft||0:0,Y=null!=(O=null==D?void 0:D[w])?O:0,Q=E+q-Y,J=Nt(m?wt(N,E+W-Y-K):N,E,m?bt(M,Q):M);y[w]=J,I[w]=J-E}if(r){var X,Z="x"===w?Ve:We,ee="x"===w?Ue:Be,te=y[C],ie="y"===C?"height":"width",se=te+f[Z],ne=te-f[ee],le=-1!==[Ve,We].indexOf(_),oe=null!=(X=null==D?void 0:D[C])?X:0,re=le?se:te-S[ie]-x[ie]-oe+k.altAxis,ae=le?te+S[ie]+x[ie]-oe-k.altAxis:ne,de=m&&le?function(e,t,i){var s=Nt(e,t,i);return s>i?i:s}(re,te,ae):Nt(m?re:se,te,m?ae:ne);y[C]=de,I[C]=de-te}t.modifiersData[s]=I}},requiresIfExists:["offset"]};function hi(e,t,i){void 0===i&&(i=!1);var s,n,l=gt(t),o=gt(t)&&function(e){var t=e.getBoundingClientRect(),i=Ct(t.width)/e.offsetWidth||1,s=Ct(t.height)/e.offsetHeight||1;return 1!==i||1!==s}(t),r=Ot(t),a=xt(e,o,i),d={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(l||!l&&!i)&&(("body"!==ut(t)||Qt(r))&&(d=(s=t)!==mt(s)&&gt(s)?{scrollLeft:(n=s).scrollLeft,scrollTop:n.scrollTop}:Kt(s)),gt(t)?((h=xt(t,!0)).x+=t.clientLeft,h.y+=t.clientTop):r&&(h.x=Yt(r))),{x:a.left+d.scrollLeft-h.x,y:a.top+d.scrollTop-h.y,width:a.width,height:a.height}}function ci(e){var t=new Map,i=new Set,s=[];function n(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!i.has(e)){var s=t.get(e);s&&n(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){i.has(e.name)||n(e)}),s}var ui={placement:"bottom",modifiers:[],strategy:"absolute"};function mi(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function pi(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,s=void 0===i?[]:i,n=t.defaultOptions,l=void 0===n?ui:n;return function(e,t,i){void 0===i&&(i=l);var n,o,r={placement:"bottom",orderedModifiers:[],options:Object.assign({},ui,l),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],d=!1,h={state:r,setOptions:function(i){var n="function"==typeof i?i(r.options):i;c(),r.options=Object.assign({},l,r.options,n),r.scrollParents={reference:pt(e)?Xt(e):e.contextElement?Xt(e.contextElement):[],popper:Xt(t)};var o,d,u=function(e){var t=ci(e);return ct.reduce(function(e,i){return e.concat(t.filter(function(e){return e.phase===i}))},[])}((o=[].concat(s,r.options.modifiers),d=o.reduce(function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e},{}),Object.keys(d).map(function(e){return d[e]})));return r.orderedModifiers=u.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.name,i=e.options,s=void 0===i?{}:i,n=e.effect;if("function"==typeof n){var l=n({state:r,name:t,instance:h,options:s});a.push(l||function(){})}}),h.update()},forceUpdate:function(){if(!d){var e=r.elements,t=e.reference,i=e.popper;if(mi(t,i)){r.rects={reference:hi(t,Rt(i),"fixed"===r.options.strategy),popper:Tt(i)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<r.orderedModifiers.length;s++)if(!0!==r.reset){var n=r.orderedModifiers[s],l=n.fn,o=n.options,a=void 0===o?{}:o,c=n.name;"function"==typeof l&&(r=l({state:r,options:a,name:c,instance:h})||r)}else r.reset=!1,s=-1}}},update:(n=function(){return new Promise(function(e){h.forceUpdate(),e(r)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=void 0,e(n())})})),o}),destroy:function(){c(),d=!0}};if(!mi(e,t))return h;function c(){a.forEach(function(e){return e()}),a=[]}return h.setOptions(i).then(function(e){!d&&i.onFirstUpdate&&i.onFirstUpdate(e)}),h}}var gi=pi(),fi=pi({defaultModifiers:[Ut,ai,Ht,_t]}),_i=pi({defaultModifiers:[Ut,ai,Ht,_t,ri,si,di,Ft,oi]});const vi=Object.freeze(Object.defineProperty({__proto__:null,afterMain:rt,afterRead:nt,afterWrite:ht,applyStyles:_t,arrow:Ft,auto:qe,basePlacements:Ge,beforeMain:lt,beforeRead:it,beforeWrite:at,bottom:Ue,clippingParents:Qe,computeStyles:Ht,createPopper:_i,createPopperBase:gi,createPopperLite:fi,detectOverflow:ii,end:Ye,eventListeners:Ut,flip:si,hide:oi,left:We,main:ot,modifierPhases:ct,offset:ri,placements:tt,popper:Xe,popperGenerator:pi,popperOffsets:ai,preventOverflow:di,read:st,reference:Ze,right:Be,start:Ke,top:Ve,variationPlacements:et,viewport:Je,write:dt},Symbol.toStringTag,{value:"Module"})),bi="dropdown",wi=".bs.dropdown",Ci=".data-api",yi="ArrowUp",Si="ArrowDown",xi=`hide${wi}`,Ti=`hidden${wi}`,ki=`show${wi}`,Di=`shown${wi}`,Ii=`click${wi}${Ci}`,Oi=`keydown${wi}${Ci}`,Ai=`keyup${wi}${Ci}`,Li="show",Ri='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ei=`${Ri}.${Li}`,Ni=".dropdown-menu",Mi=p()?"top-end":"top-start",Pi=p()?"top-start":"top-end",Fi=p()?"bottom-end":"bottom-start",ji=p()?"bottom-start":"bottom-end",zi=p()?"left-start":"right-start",$i=p()?"right-start":"left-start",Hi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Vi={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ui extends ${constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=V.next(this._element,Ni)[0]||V.prev(this._element,Ni)[0]||V.findOne(Ni,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hi}static get DefaultType(){return Vi}static get NAME(){return bi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(a(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!N.trigger(this._element,ki,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))N.on(e,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Li),this._element.classList.add(Li),N.trigger(this._element,Di,e)}}hide(){if(a(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!N.trigger(this._element,xi,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))N.off(e,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Li),this._element.classList.remove(Li),this._element.setAttribute("aria-expanded","false"),j.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,Ti,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!l(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${bi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===vi)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:l(this._config.reference)?e=o(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=_i(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Li)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return zi;if(e.classList.contains("dropstart"))return $i;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Pi:Mi:t?ji:Fi}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(j.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...f(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=V.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>r(e));i.length&&v(i,t,e===Si,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=Ui.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=V.find(Ei);for(const i of t){const t=Ui.getInstance(i);if(!t||!1===t._config.autoClose)continue;const s=e.composedPath(),n=s.includes(t._menu);if(s.includes(t._element)||"inside"===t._config.autoClose&&!n||"outside"===t._config.autoClose&&n)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:t._element};"click"===e.type&&(l.clickEvent=e),t._completeHide(l)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,s=[yi,Si].includes(e.key);if(!s&&!i)return;if(t&&!i)return;e.preventDefault();const n=this.matches(Ri)?this:V.prev(this,Ri)[0]||V.next(this,Ri)[0]||V.findOne(Ri,e.delegateTarget.parentNode),l=Ui.getOrCreateInstance(n);if(s)return e.stopPropagation(),l.show(),void l._selectMenuItem(e);l._isShown()&&(e.stopPropagation(),l.hide(),n.focus())}}N.on(document,Oi,Ri,Ui.dataApiKeydownHandler),N.on(document,Oi,Ni,Ui.dataApiKeydownHandler),N.on(document,Ii,Ui.clearMenus),N.on(document,Ai,Ui.clearMenus),N.on(document,Ii,Ri,function(e){e.preventDefault(),Ui.getOrCreateInstance(this).toggle()}),g(Ui);const Bi="backdrop",Wi="show",qi=`mousedown.bs.${Bi}`,Gi={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ki={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Yi extends z{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Gi}static get DefaultType(){return Ki}static get NAME(){return Bi}show(e){if(!this._config.isVisible)return void f(e);this._append();const t=this._getElement();this._config.isAnimated&&c(t),t.classList.add(Wi),this._emulateAnimation(()=>{f(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Wi),this._emulateAnimation(()=>{this.dispose(),f(e)})):f(e)}dispose(){this._isAppended&&(N.off(this._element,qi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=o(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),N.on(e,qi,()=>{f(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){_(e,this._getElement(),this._config.isAnimated)}}const Qi=".bs.focustrap",Ji=`focusin${Qi}`,Xi=`keydown.tab${Qi}`,Zi="backward",es={autofocus:!0,trapElement:null},ts={autofocus:"boolean",trapElement:"element"};class is extends z{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return es}static get DefaultType(){return ts}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,Qi),N.on(document,Ji,e=>this._handleFocusin(e)),N.on(document,Xi,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,Qi))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=V.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===Zi?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?Zi:"forward")}}const ss=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ns=".sticky-top",ls="padding-right",os="margin-right";class rs{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ls,t=>t+e),this._setElementAttributes(ss,ls,t=>t+e),this._setElementAttributes(ns,os,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ls),this._resetElementAttributes(ss,ls),this._resetElementAttributes(ns,os)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const s=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const n=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(n))}px`)})}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&j.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const i=j.getDataAttribute(e,t);null!==i?(j.removeDataAttribute(e,t),e.style.setProperty(t,i)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(l(e))t(e);else for(const i of V.find(e,this._element))t(i)}}const as=".bs.modal",ds=`hide${as}`,hs=`hidePrevented${as}`,cs=`hidden${as}`,us=`show${as}`,ms=`shown${as}`,ps=`resize${as}`,gs=`click.dismiss${as}`,fs=`mousedown.dismiss${as}`,_s=`keydown.dismiss${as}`,vs=`click${as}.data-api`,bs="modal-open",ws="show",Cs="modal-static",ys={backdrop:!0,focus:!0,keyboard:!0},Ss={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class xs extends ${constructor(e,t){super(e,t),this._dialog=V.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rs,this._addEventListeners()}static get Default(){return ys}static get DefaultType(){return Ss}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||N.trigger(this._element,us,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(N.trigger(this._element,ds).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ws),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){N.off(window,as),N.off(this._dialog,as),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Yi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new is({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=V.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),c(this._element),this._element.classList.add(ws),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,ms,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,_s,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),N.on(window,ps,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,fs,e=>{N.one(this._element,gs,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(bs),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,cs)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(N.trigger(this._element,hs).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Cs)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Cs),this._queueCallback(()=>{this._element.classList.remove(Cs),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=p()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=p()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const i=xs.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}})}}N.on(document,vs,'[data-bs-toggle="modal"]',function(e){const t=V.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),N.one(t,us,e=>{e.defaultPrevented||N.one(t,cs,()=>{r(this)&&this.focus()})});const i=V.findOne(".modal.show");i&&xs.getInstance(i).hide(),xs.getOrCreateInstance(t).toggle(this)}),U(xs),g(xs);const Ts=".bs.offcanvas",ks=".data-api",Ds=`load${Ts}${ks}`,Is="show",Os="showing",As="hiding",Ls=".offcanvas.show",Rs=`show${Ts}`,Es=`shown${Ts}`,Ns=`hide${Ts}`,Ms=`hidePrevented${Ts}`,Ps=`hidden${Ts}`,Fs=`resize${Ts}`,js=`click${Ts}${ks}`,zs=`keydown.dismiss${Ts}`,$s={backdrop:!0,keyboard:!0,scroll:!1},Hs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Vs extends ${constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return $s}static get DefaultType(){return Hs}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||N.trigger(this._element,Rs,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new rs).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Os),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Is),this._element.classList.remove(Os),N.trigger(this._element,Es,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(N.trigger(this._element,Ns).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(As),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Is,As),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new rs).reset(),N.trigger(this._element,Ps)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Yi({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():N.trigger(this._element,Ms)}:null})}_initializeFocusTrap(){return new is({trapElement:this._element})}_addEventListeners(){N.on(this._element,zs,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():N.trigger(this._element,Ms))})}static jQueryInterface(e){return this.each(function(){const t=Vs.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}N.on(document,js,'[data-bs-toggle="offcanvas"]',function(e){const t=V.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),a(this))return;N.one(t,Ps,()=>{r(this)&&this.focus()});const i=V.findOne(Ls);i&&i!==t&&Vs.getInstance(i).hide(),Vs.getOrCreateInstance(t).toggle(this)}),N.on(window,Ds,()=>{for(const e of V.find(Ls))Vs.getOrCreateInstance(e).show()}),N.on(window,Fs,()=>{for(const e of V.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Vs.getOrCreateInstance(e).hide()}),U(Vs),g(Vs);const Us={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Bs=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ws=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,qs=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?!Bs.has(i)||Boolean(Ws.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(i))},Gs={allowList:Us,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ks={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ys={entry:"(string|element|function|null)",selector:"(string|element)"};class Qs extends z{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Gs}static get DefaultType(){return Ks}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,i]of Object.entries(this._config.content))this._setContent(e,i,t);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},Ys)}_setContent(e,t,i){const s=V.findOne(i,e);s&&((t=this._resolvePossibleFunction(t))?l(t)?this._putElementInTemplate(o(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,i){if(!e.length)return e;if(i&&"function"==typeof i)return i(e);const s=(new window.DOMParser).parseFromString(e,"text/html"),n=[].concat(...s.body.querySelectorAll("*"));for(const e of n){const i=e.nodeName.toLowerCase();if(!Object.keys(t).includes(i)){e.remove();continue}const s=[].concat(...e.attributes),n=[].concat(t["*"]||[],t[i]||[]);for(const t of s)qs(t,n)||e.removeAttribute(t.nodeName)}return s.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return f(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const Js=new Set(["sanitize","allowList","sanitizeFn"]),Xs="fade",Zs="show",en=".modal",tn="hide.bs.modal",sn="hover",nn="focus",ln={AUTO:"auto",TOP:"top",RIGHT:p()?"left":"right",BOTTOM:"bottom",LEFT:p()?"right":"left"},on={allowList:Us,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},rn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class an extends ${constructor(e,t){if(void 0===vi)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return on}static get DefaultType(){return rn}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(en),tn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=N.trigger(this._element,this.constructor.eventName("show")),t=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),N.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(Zs),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))N.on(e,"mouseover",h);this._queueCallback(()=>{N.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!N.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Zs),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))N.off(e,"mouseover",h);this._activeTrigger.click=!1,this._activeTrigger[nn]=!1,this._activeTrigger[sn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Xs,Zs),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(Xs),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Qs({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Xs)}_isShown(){return this.tip&&this.tip.classList.contains(Zs)}_createPopper(e){const t=f(this._config.placement,[this,e,this._element]),i=ln[t.toUpperCase()];return _i(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return f(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...f(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)N.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{this._initializeOnDelegatedTarget(e).toggle()});else if("manual"!==t){const e=t===sn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=t===sn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");N.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?nn:sn]=!0,t._enter()}),N.on(this._element,i,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?nn:sn]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(en),tn,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=j.getDataAttributes(this._element);for(const e of Object.keys(t))Js.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:o(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=an.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}g(an);const dn={...an.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},hn={...an.DefaultType,content:"(null|string|element|function)"};class cn extends an{static get Default(){return dn}static get DefaultType(){return hn}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=cn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}g(cn);const un=".bs.scrollspy",mn=`activate${un}`,pn=`click${un}`,gn=`load${un}.data-api`,fn="active",_n="[href]",vn=".nav-link",bn=`${vn}, .nav-item > ${vn}, .list-group-item`,wn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Cn={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class yn extends ${constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return wn}static get DefaultType(){return Cn}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=o(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,pn),N.on(this._config.target,pn,_n,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:s,behavior:"smooth"});i.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},s=(this._rootElement||document.documentElement).scrollTop,n=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const l of e){if(!l.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(l));continue}const e=l.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&e){if(i(l),!s)return}else n||e||i(l)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=V.find(_n,this._config.target);for(const t of e){if(!t.hash||a(t))continue;const e=V.findOne(decodeURI(t.hash),this._element);r(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(fn),this._activateParents(e),N.trigger(this._element,mn,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))V.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(fn);else for(const t of V.parents(e,".nav, .list-group"))for(const e of V.prev(t,bn))e.classList.add(fn)}_clearActiveClass(e){e.classList.remove(fn);const t=V.find(`${_n}.${fn}`,e);for(const e of t)e.classList.remove(fn)}static jQueryInterface(e){return this.each(function(){const t=yn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}N.on(window,gn,()=>{for(const e of V.find('[data-bs-spy="scroll"]'))yn.getOrCreateInstance(e)}),g(yn);const Sn=".bs.tab",xn=`hide${Sn}`,Tn=`hidden${Sn}`,kn=`show${Sn}`,Dn=`shown${Sn}`,In=`click${Sn}`,On=`keydown${Sn}`,An=`load${Sn}`,Ln="ArrowLeft",Rn="ArrowRight",En="ArrowUp",Nn="ArrowDown",Mn="Home",Pn="End",Fn="active",jn="fade",zn="show",$n=".dropdown-toggle",Hn=`:not(${$n})`,Vn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Un=`.nav-link${Hn}, .list-group-item${Hn}, [role="tab"]${Hn}, ${Vn}`,Bn=`.${Fn}[data-bs-toggle="tab"], .${Fn}[data-bs-toggle="pill"], .${Fn}[data-bs-toggle="list"]`;class Wn extends ${constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,On,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?N.trigger(t,xn,{relatedTarget:e}):null;N.trigger(e,kn,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Fn),this._activate(V.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),N.trigger(e,Dn,{relatedTarget:t})):e.classList.add(zn)},e,e.classList.contains(jn)))}_deactivate(e,t){e&&(e.classList.remove(Fn),e.blur(),this._deactivate(V.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),N.trigger(e,Tn,{relatedTarget:t})):e.classList.remove(zn)},e,e.classList.contains(jn)))}_keydown(e){if(![Ln,Rn,En,Nn,Mn,Pn].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!a(e));let i;if([Mn,Pn].includes(e.key))i=t[e.key===Mn?0:t.length-1];else{const s=[Rn,Nn].includes(e.key);i=v(t,e.target,s,!0)}i&&(i.focus({preventScroll:!0}),Wn.getOrCreateInstance(i).show())}_getChildren(){return V.find(Un,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=V.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const s=(e,s)=>{const n=V.findOne(e,i);n&&n.classList.toggle(s,t)};s($n,Fn),s(".dropdown-menu",zn),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Fn)}_getInnerElement(e){return e.matches(Un)?e:V.findOne(Un,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=Wn.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}N.on(document,In,Vn,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),a(this)||Wn.getOrCreateInstance(this).show()}),N.on(window,An,()=>{for(const e of V.find(Bn))Wn.getOrCreateInstance(e)}),g(Wn);const qn=".bs.toast",Gn=`mouseover${qn}`,Kn=`mouseout${qn}`,Yn=`focusin${qn}`,Qn=`focusout${qn}`,Jn=`hide${qn}`,Xn=`hidden${qn}`,Zn=`show${qn}`,el=`shown${qn}`,tl="hide",il="show",sl="showing",nl={animation:"boolean",autohide:"boolean",delay:"number"},ll={animation:!0,autohide:!0,delay:5e3};class ol extends ${constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ll}static get DefaultType(){return nl}static get NAME(){return"toast"}show(){N.trigger(this._element,Zn).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(tl),c(this._element),this._element.classList.add(il,sl),this._queueCallback(()=>{this._element.classList.remove(sl),N.trigger(this._element,el),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(N.trigger(this._element,Jn).defaultPrevented||(this._element.classList.add(sl),this._queueCallback(()=>{this._element.classList.add(tl),this._element.classList.remove(sl,il),N.trigger(this._element,Xn)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(il),super.dispose()}isShown(){return this._element.classList.contains(il)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,Gn,e=>this._onInteraction(e,!0)),N.on(this._element,Kn,e=>this._onInteraction(e,!1)),N.on(this._element,Yn,e=>this._onInteraction(e,!0)),N.on(this._element,Qn,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=ol.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}return U(ol),g(ol),{Alert:G,Button:Y,Carousel:De,Collapse:He,Dropdown:Ui,Modal:xs,Offcanvas:Vs,Popover:cn,ScrollSpy:yn,Tab:Wn,Toast:ol,Tooltip:an}}),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(e){"use strict";var t,i,s,n,l=["sanitize","whiteList","sanitizeFn"],o=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,a=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,d=["title","placeholder"];function h(t,i,s){if(s&&"function"==typeof s)return s(t);for(var n=Object.keys(i),l=0,d=t.length;l<d;l++)for(var h=t[l].querySelectorAll("*"),c=0,u=h.length;c<u;c++){var m=h[c],p=m.nodeName.toLowerCase();if(-1===n.indexOf(p))m.parentNode.removeChild(m);else for(var g=[].slice.call(m.attributes),f=[].concat(i["*"]||[],i[p]||[]),_=0,v=g.length;_<v;_++){var b=g[_];!function(t,i){var s=t.nodeName.toLowerCase();if(-1!==e.inArray(s,i))return-1===e.inArray(s,o)||Boolean(t.nodeValue.match(r)||t.nodeValue.match(a));for(var n=e(i).filter(function(e,t){return t instanceof RegExp}),l=0,d=n.length;l<d;l++)if(s.match(n[l]))return 1}(b,f)&&m.removeAttribute(b.nodeName)}}}function c(e){var t,i={};return d.forEach(function(s){(t=e.attr(s))&&(i[s]=t)}),!i.placeholder&&i.title&&(i.placeholder=i.title),i}if(!("classList"in document.createElement("_"))&&"Element"in(p=window)){var u="classList",m="prototype",p=p.Element[m],g=Object,f=function(){var t=e(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(g.defineProperty){var _={get:f,enumerable:!0,configurable:!0};try{g.defineProperty(p,u,_)}catch(m){void 0!==m.number&&-2146823252!==m.number||(_.enumerable=!1,g.defineProperty(p,u,_))}}else g[m].__defineGetter__&&p.__defineGetter__(u,f)}function v(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==n.call(e))throw new TypeError;var i=t.length,s=String(e),l=s.length,o=((e=(e=1<arguments.length?arguments[1]:void 0)?Number(e):0)!=e&&(e=0),Math.min(Math.max(e,0),i));if(i<l+o)return!1;for(var r=-1;++r<l;)if(t.charCodeAt(o+r)!=s.charCodeAt(r))return!1;return!0}function b(){var e=this.selectpicker.main.data,t=(e=this.options.source.data||this.options.source.search?Object.values(this.selectpicker.optionValuesDataMap):e).filter(function(e){return!(!e.selected||this.options.hideDisabled&&e.disabled)},this);if(this.options.source.data&&!this.multiple&&1<t.length){for(var i=0;i<t.length-1;i++)t[i].selected=!1;t=[t[t.length-1]]}return t}function w(e){for(var t,i=[],s=e||b.call(this),n=0,l=s.length;n<l;n++)(t=s[n]).disabled||i.push(void 0===t.value?t.text:t.value);return this.multiple?i:i.length?i[0]:null}(_=document.createElement("_")).classList.add("c1","c2"),_.classList.contains("c2")||(t=DOMTokenList.prototype.add,i=DOMTokenList.prototype.remove,DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,t.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,i.bind(this))}),_.classList.toggle("c3",!1),_.classList.contains("c3")&&(s=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:s.call(this,e)}),_=null,Object.values="function"==typeof Object.values?Object.values:function(e){return Object.keys(e).map(function(t){return e[t]})},String.prototype.startsWith||(n={}.toString,Object.defineProperty?Object.defineProperty(String.prototype,"startsWith",{value:v,configurable:!0,writable:!0}):String.prototype.startsWith=v);var C={useDefault:!1,_set:e.valHooks.select.set},y=(e.valHooks.select.set=function(t,i){return i&&!C.useDefault&&e(t).data("selected",!0),C._set.apply(this,arguments)},null),S=function(){try{return new Event("change"),!0}catch(e){return!1}}();function x(e,t,i,s){for(var n=["display","subtext","tokens"],l=!1,o=0;o<n.length;o++){var r=n[o],a=e[r];if(a&&(a=a.toString(),"display"===r&&(a=a.replace(/<[^>]+>/g,"")),a=(a=s?A(a):a).toUpperCase(),l="function"==typeof i?i(a,t):"contains"===i?0<=a.indexOf(t):a.startsWith(t)))break}return l}function T(e){return parseInt(e,10)||0}e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent&&(S?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t))};var k={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},D=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,I=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function O(e){return k[e]}function A(e){return(e=e.toString())&&e.replace(D,O).replace(I,"")}L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g="(?:"+Object.keys(L).join("|")+")",R=RegExp(g),E=RegExp(g,"g");var L,R,E,N=function(e){return R.test(e=null==e?"":""+e)?e.replace(E,M):e};function M(e){return L[e]}var P={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},F=window.Dropdown||bootstrap.Dropdown;function j(){var t;try{t=e.fn.dropdown.Constructor.VERSION}catch(e){t=F.VERSION}return t}var z={success:!1,major:"3"};try{z.full=(j()||"").split(" ")[0].split("."),z.major=z.full[0],z.success=!0}catch(m){}var $=0,H=".bs.select",V={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},U={MENU:"."+V.MENU,DATA_TOGGLE:'data-toggle="dropdown"'},B={div:document.createElement("div"),span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" "),fragment:document.createDocumentFragment(),option:document.createElement("option")},W=(B.selectedOption=B.option.cloneNode(!1),B.selectedOption.setAttribute("selected",!0),B.noResults=B.li.cloneNode(!1),B.noResults.className="no-results",B.a.setAttribute("role","option"),B.a.className="dropdown-item",B.subtext.className="text-muted",B.text=B.span.cloneNode(!1),B.text.className="text",B.checkMark=B.span.cloneNode(!1),new RegExp("38|40")),q=new RegExp("^9$|27"),G={li:function(e,t,i){var s=B.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?s.appendChild(e):s.innerHTML=e),void 0!==t&&""!==t&&(s.className=t),null!=i&&s.classList.add("optgroup-"+i),s},a:function(e,t,i){var s=B.a.cloneNode(!0);return e&&(11===e.nodeType?s.appendChild(e):s.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&s.classList.add.apply(s.classList,t.split(/\s+/)),i&&s.setAttribute("style",i),s},text:function(e,t){var i,s,n=B.text.cloneNode(!1);if(e.content?n.innerHTML=e.content:(n.textContent=e.text,e.icon&&(i=B.whitespace.cloneNode(!1),(s=(!0===t?B.i:B.span).cloneNode(!1)).className=this.options.iconBase+" "+e.icon,B.fragment.appendChild(s),B.fragment.appendChild(i)),e.subtext&&((s=B.subtext.cloneNode(!1)).textContent=e.subtext,n.appendChild(s))),!0===t)for(;0<n.childNodes.length;)B.fragment.appendChild(n.childNodes[0]);else B.fragment.appendChild(n);return B.fragment},label:function(e){var t,i,s=B.text.cloneNode(!1);return s.innerHTML=e.display,e.icon&&(t=B.whitespace.cloneNode(!1),(i=B.span.cloneNode(!1)).className=this.options.iconBase+" "+e.icon,B.fragment.appendChild(i),B.fragment.appendChild(t)),e.subtext&&((i=B.subtext.cloneNode(!1)).textContent=e.subtext,s.appendChild(i)),B.fragment.appendChild(s),B.fragment}},K={fromOption:function(e,t){var i;switch(t){case"divider":i="true"===e.getAttribute("data-divider");break;case"text":i=e.textContent;break;case"label":i=e.label;break;case"style":i=e.style.cssText;break;case"title":i=e.title;break;default:i=e.getAttribute("data-"+t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()}))}return i},fromDataSource:function(e,t){var i;switch(t){case"text":case"label":i=e.text||e.value||"";break;default:i=e[t]}return i}};function Y(e,t){e.length||(B.noResults.innerHTML=this.options.noneResultsText.replace("{0}",'"'+N(t)+'"'),this.$menuInner[0].firstChild.appendChild(B.noResults))}function Q(e){return!(e.hidden||this.options.hideDisabled&&e.disabled)}function J(t,i){var s=this;C.useDefault||(e.valHooks.select.set=C._set,C.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{data:[],optionQueue:B.fragment.cloneNode(!1),hasMore:!1},search:{data:[],hasMore:!1},current:{},view:{},optionValuesDataMap:{},isSearching:!1,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){s.selectpicker.keydown.keyHistory=""},800)}}}},this.sizeInfo={},"number"==typeof(t=this.options.windowPadding)&&(this.options.windowPadding=[t,t,t,t]),this.val=J.prototype.val,this.render=J.prototype.render,this.refresh=J.prototype.refresh,this.setStyle=J.prototype.setStyle,this.selectAll=J.prototype.selectAll,this.deselectAll=J.prototype.deselectAll,this.destroy=J.prototype.destroy,this.remove=J.prototype.remove,this.show=J.prototype.show,this.hide=J.prototype.hide,this.init()}function X(t){var i,s=arguments,n=t;if([].shift.apply(s),!z.success){try{z.full=(j()||"").split(" ")[0].split(".")}catch(t){J.BootstrapVersion?z.full=J.BootstrapVersion.split(" ")[0].split("."):(z.full=[z.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",t))}z.major=z.full[0],z.success=!0}if("4"<=z.major){var o=[];J.DEFAULTS.style===V.BUTTONCLASS&&o.push({name:"style",className:"BUTTONCLASS"}),J.DEFAULTS.iconBase===V.ICONBASE&&o.push({name:"iconBase",className:"ICONBASE"}),J.DEFAULTS.tickIcon===V.TICKICON&&o.push({name:"tickIcon",className:"TICKICON"}),V.DIVIDER="dropdown-divider",V.SHOW="show",V.BUTTONCLASS="btn-light",V.POPOVERHEADER="popover-header",V.ICONBASE="",V.TICKICON="bs-ok-default";for(var r=0;r<o.length;r++)t=o[r],J.DEFAULTS[t.name]=V[t.className]}"4"<z.major&&(U.DATA_TOGGLE='data-bs-toggle="dropdown"');var a=this.each(function(){var t=e(this);if(t.is("select")){var o=t.data("selectpicker"),r="object"==typeof n&&n;if(r.title&&(r.placeholder=r.title),o){if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(o.options[a]=r[a])}else{var d,h=t.data();for(d in h)Object.prototype.hasOwnProperty.call(h,d)&&-1!==e.inArray(d,l)&&delete h[d];var u=e.extend({},J.DEFAULTS,e.fn.selectpicker.defaults||{},c(t),h,r);u.template=e.extend({},J.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},h.template,r.template),u.source=e.extend({},J.DEFAULTS.source,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.source:{},r.source),t.data("selectpicker",o=new J(this,u))}"string"==typeof n&&(i=o[n]instanceof Function?o[n].apply(o,s):o.options[n])}});return void 0!==i?i:a}J.VERSION="1.14.0-beta3",J.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",source:{pageSize:40},chunkSize:40,doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:V.BUTTONCLASS,size:"auto",title:null,placeholder:null,allowClear:!1,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:V.ICONBASE,tickIcon:V.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!0,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},J.prototype={constructor:J,init:function(){var t=this,i=this.$element.attr("id"),s=this.$element[0],n=s.form;$++,this.selectId="bs-select-"+$,s.classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),s.classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),n&&null===s.form&&(n.id||(n.id="form-"+this.selectId),s.setAttribute("form",n.id)),this.$button=this.$newElement.children("button"),this.options.allowClear&&(this.$clearButton=this.$button.children(".bs-select-clear-selected")),this.$menu=this.$newElement.children(U.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),s.classList.remove("bs-select-hidden"),this.fetchData(function(){t.render(!0),t.buildList(),requestAnimationFrame(function(){t.$element.trigger("loaded"+H)})}),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(V.MENURIGHT),void 0!==i&&this.$button.attr("data-id",i),this.checkDisabled(),this.clickListener(),4<z.major&&(this.dropdown=new F(this.$button[0])),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+H,function(){var e,i;t.isVirtual()&&(i=(e=t.$menuInner[0]).firstChild.cloneNode(!1),e.replaceChild(i,e.firstChild),e.scrollTop=0)}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$element.trigger("hide"+H,e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden"+H,e)},"show.bs.dropdown":function(e){t.$element.trigger("show"+H,e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown"+H,e)}}),s.hasAttribute("required")&&this.$element.on("invalid"+H,function(){t.$button[0].classList.add("bs-invalid"),t.$element.on("shown"+H+".invalid",function(){t.$element.val(t.$element.val()).off("shown"+H+".invalid")}).on("rendered"+H,function(){this.validity.valid&&t.$button[0].classList.remove("bs-invalid"),t.$element.off("rendered"+H)}),t.$button.on("blur"+H,function(){t.$element.trigger("focus").trigger("blur"),t.$button.off("blur"+H)})}),n&&e(n).on("reset"+H,function(){requestAnimationFrame(function(){t.render()})})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.multiple?' aria-multiselectable="true"':"",s="",n=this.autofocus?" autofocus":"";z.major<4&&this.$element.parent().hasClass("input-group")&&(s=" input-group-btn");var l="",o="",r="",a="",d="";return this.options.header&&(l='<div class="'+V.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(o='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+N(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(r='<div class="bs-actionsbox"><div class="btn-group btn-group-sm"><button type="button" class="actions-btn bs-select-all btn '+V.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+V.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(a='<div class="bs-donebutton"><div class="btn-group"><button type="button" class="btn btn-sm '+V.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),this.options.allowClear&&(d='<span class="close bs-select-clear-selected" title="'+this.options.deselectAllText+'"><span>&times;</span>'),t='<div class="dropdown bootstrap-select'+t+s+'"><button type="button" tabindex="-1" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+U.DATA_TOGGLE+n+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner">&nbsp;</div></div> </div>'+d+"</span>"+("4"<=z.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+V.MENU+" "+("4"<=z.major?"":V.SHOW)+'">'+l+o+r+'<div class="inner '+V.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+i+'><ul class="'+V.MENU+" inner "+("4"<=z.major?V.SHOW:"")+'" role="presentation"></ul></div>'+a+"</div></div>",e(t)},setPositionData:function(){this.selectpicker.view.canHighlight=[],this.selectpicker.view.size=0,this.selectpicker.view.firstHighlightIndex=!1;for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),i&&(this.selectpicker.view.size++,t.posinset=this.selectpicker.view.size,!1===this.selectpicker.view.firstHighlightIndex&&(this.selectpicker.view.firstHighlightIndex=e)),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.data.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(t,i,s){var n=this,l=0;function o(e,i){var s,l=n.selectpicker.current.data.length,r=[],a=!0,d=n.isVirtual();n.selectpicker.view.scrollTop=e;for(var c,u=n.options.chunkSize,m=Math.ceil(l/u)||1,p=0;p<m;p++){var g=p===m-1?l:(p+1)*u;if(r[p]=[p*u+(p?1:0),g],!l)break;void 0===s&&e-1<=n.selectpicker.current.data[g-1].position-n.sizeInfo.menuInnerHeight&&(s=p)}if(void 0===s&&(s=0),C=[n.selectpicker.view.position0,n.selectpicker.view.position1],f=Math.max(0,s-1),v=Math.min(m-1,s+1),n.selectpicker.view.position0=!1!==d&&Math.max(0,r[f][0])||0,n.selectpicker.view.position1=!1===d?l:Math.min(l,r[v][1])||0,f=C[0]!==n.selectpicker.view.position0||C[1]!==n.selectpicker.view.position1,void 0!==n.activeElement&&(i&&(n.activeElement!==n.selectedElement&&n.defocusItem(n.activeElement),n.activeElement=void 0),n.activeElement!==n.selectedElement&&n.defocusItem(n.selectedElement)),void 0!==n.prevActiveElement&&n.prevActiveElement!==n.activeElement&&n.prevActiveElement!==n.selectedElement&&n.defocusItem(n.prevActiveElement),i||f||n.selectpicker.current.hasMore){if(v=n.selectpicker.view.visibleElements?n.selectpicker.view.visibleElements.slice():[],n.selectpicker.view.visibleElements=!1===d?n.selectpicker.current.elements:n.selectpicker.current.elements.slice(n.selectpicker.view.position0,n.selectpicker.view.position1),n.setOptionStatus(),(t||!1===d&&i)&&(C=v,c=n.selectpicker.view.visibleElements,a=!(C.length===c.length&&C.every(function(e,t){return e===c[t]}))),(i||!0===d)&&a){var f=n.$menuInner[0],_=document.createDocumentFragment(),v=f.firstChild.cloneNode(!1),b=n.selectpicker.view.visibleElements,w=[];f.replaceChild(v,f.firstChild);p=0;for(var C,y=b.length;p<y;p++){var S,x,T=b[p];n.options.sanitize&&(S=T.lastChild)&&(x=n.selectpicker.current.data[p+n.selectpicker.view.position0])&&x.content&&!x.sanitized&&(w.push(S),x.sanitized=!0),_.appendChild(T)}n.options.sanitize&&w.length&&h(w,n.options.whiteList,n.options.sanitizeFn),!0===d?(C=0===n.selectpicker.view.position0?0:n.selectpicker.current.data[n.selectpicker.view.position0-1].position,a=n.selectpicker.view.position1>l-1?0:n.selectpicker.current.data[l-1].position-n.selectpicker.current.data[n.selectpicker.view.position1-1].position,f.firstChild.style.marginTop=C+"px",f.firstChild.style.marginBottom=a+"px"):(f.firstChild.style.marginTop=0,f.firstChild.style.marginBottom=0),f.firstChild.appendChild(_),!0===d&&n.sizeInfo.hasScrollBar&&(v=f.firstChild.offsetWidth,i&&v<n.sizeInfo.menuInnerInnerWidth&&n.sizeInfo.totalMenuWidth>n.sizeInfo.selectWidth?f.firstChild.style.minWidth=n.sizeInfo.menuInnerInnerWidth+"px":v>n.sizeInfo.menuInnerInnerWidth&&(n.$menu[0].style.minWidth=0,(C=f.firstChild.offsetWidth)>n.sizeInfo.menuInnerInnerWidth&&(n.sizeInfo.menuInnerInnerWidth=C,f.firstChild.style.minWidth=n.sizeInfo.menuInnerInnerWidth+"px"),n.$menu[0].style.minWidth=""))}(!t&&n.options.source.data||t&&n.options.source.search)&&n.selectpicker.current.hasMore&&s===m-1&&0<e&&(a=Math.floor(s*n.options.chunkSize/n.options.source.pageSize)+2,n.fetchData(function(){n.render(),n.buildList(l,t),n.setPositionData(),o(e)},t?"search":"data",a,t?n.selectpicker.search.previousValue:void 0))}n.prevActiveElement=n.activeElement,n.options.liveSearch?t&&i&&(n.selectpicker.view.canHighlight[d=0]||(d=1+n.selectpicker.view.canHighlight.slice(1).indexOf(!0)),v=n.selectpicker.view.visibleElements[d],n.defocusItem(n.selectpicker.view.currentActive),n.activeElement=(n.selectpicker.current.data[d]||{}).element,n.focusItem(v)):n.$menuInner.trigger("focus")}this.selectpicker.isSearching=t,this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),i&&(s?l=this.$menuInner[0].scrollTop:n.multiple||"number"==typeof(s=((i=n.$element[0]).options[i.selectedIndex]||{}).liIndex)&&!1!==n.options.size&&(s=(i=n.selectpicker.main.data[s])&&i.position)&&(l=s-(n.sizeInfo.menuInnerHeight+n.sizeInfo.liHeight)/2)),o(l,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){n.noScroll||o(this.scrollTop,t),n.noScroll=!1}),e(window).off("resize"+H+"."+this.selectId+".createView").on("resize"+H+"."+this.selectId+".createView",function(){n.$newElement.hasClass(V.SHOW)&&o(n.$menuInner[0].scrollTop)})},focusItem:function(e,t,i){var s;e&&(t=t||this.selectpicker.current.data[this.selectpicker.current.elements.indexOf(this.activeElement)],(s=e.firstChild)&&(s.setAttribute("aria-setsize",this.selectpicker.view.size),s.setAttribute("aria-posinset",t.posinset),!0!==i&&(this.focusedParent.setAttribute("aria-activedescendant",s.id),e.classList.add("active"),s.classList.add("active"))))},defocusItem:function(e){e&&(e.classList.remove("active"),e.firstChild&&e.firstChild.classList.remove("active"))},setPlaceholder:function(){var e,t,i,s,n,l,o,r=this,a=!1;return!this.options.placeholder&&!this.options.allowClear||this.multiple||(this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),e=this.$element[0],t=!(a=!0),i=!this.selectpicker.view.titleOption.parentNode,s=e.selectedIndex,n=e.options[s],l=(l=e.querySelector("select > *:not(:disabled)"))?l.index:0,o=(o=window.performance&&window.performance.getEntriesByType("navigation"))&&o.length?"back_forward"!==o[0].type:2!==window.performance.navigation.type,i&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",t=!n||s===l&&!1===n.defaultSelected&&void 0===this.$element.data("selected")),!i&&0===this.selectpicker.view.titleOption.index||e.insertBefore(this.selectpicker.view.titleOption,e.firstChild),t&&o?e.selectedIndex=0:"complete"!==document.readyState&&window.addEventListener("pageshow",function(){r.selectpicker.view.displayedValue!==e.value&&r.render()})),a},fetchData:function(e,t,i,s){i=i||1,t=t||"data";var n,l=this,o=this.options.source[t];o?(this.options.virtualScroll=!0,"function"==typeof o?o.call(this,function(i,s,o){var r=l.selectpicker["search"===t?"search":"main"];r.hasMore=s,r.totalItems=o,n=l.buildData(i,t),e.call(l,n),l.$element.trigger("fetched"+H)},i,s):Array.isArray(o)&&(n=l.buildData(o,t),e.call(l,n))):(n=this.buildData(!1,t),e.call(l,n))},buildData:function(t,i){var s=this,n=!1===t?K.fromOption:K.fromDataSource,l=':not([hidden]):not([data-hidden="true"]):not([style*="display: none"])',o=[],r=this.selectpicker.main.data?this.selectpicker.main.data.length:0,a=0,d=this.setPlaceholder()&&!t?1:0,h=("search"===i&&(r=this.selectpicker.search.data.length),this.options.hideDisabled&&(l+=":not(:disabled)"),t?t.filter(Q,this):this.$element[0].querySelectorAll("select > *"+l));function c(e){var t=o[o.length-1];t&&"divider"===t.type&&(t.optID||e.optID)||((e=e||{}).type="divider",o.push(e))}function u(i,l){var a,d,h;(l=l||{}).divider=n(i,"divider"),!0===l.divider?c({optID:l.optID}):(a=o.length+r,d=(d=n(i,"style"))?N(d):"",h=(i.className||"")+(l.optgroupClass||""),l.optID&&(h="opt "+h),l.optionClass=h.trim(),l.inlineStyle=d,l.text=n(i,"text"),l.title=n(i,"title"),l.content=n(i,"content"),l.tokens=n(i,"tokens"),l.subtext=n(i,"subtext"),l.icon=n(i,"icon"),l.display=l.content||l.text,l.value=void 0===i.value?i.text:i.value,l.type="option",l.index=a,l.option=i.option||i,l.option.liIndex=a,l.selected=!!i.selected,l.disabled=l.disabled||!!i.disabled,!1!==t&&(s.selectpicker.optionValuesDataMap[l.value]?l=e.extend(s.selectpicker.optionValuesDataMap[l.value],l):s.selectpicker.optionValuesDataMap[l.value]=l),o.push(l))}function m(e,i){var s=i[e],r=!(e-1<d)&&i[e-1],h=(i=i[e+1],t?s.children.filter(Q,this):s.querySelectorAll("option"+l));if(h.length){var m,p,g={display:N(n(f,"label")),subtext:n(s,"subtext"),icon:n(s,"icon"),type:"optgroup-label",optgroupClass:" "+(s.className||""),optgroup:s};a++,r&&c({optID:a}),g.optID=a,o.push(g);for(var _=0,v=h.length;_<v;_++){var b=h[_];0===_&&(p=(m=o.length-1)+v),u(b,{headerIndex:m,lastIndex:p,optID:g.optID,optgroupClass:g.optgroupClass,disabled:s.disabled})}i&&c({optID:a})}}for(var p=h.length,g=d;g<p;g++){var f=h[g],_=f.children;_&&_.length?m.call(this,g,h):u.call(this,f,{})}switch(i){case"data":this.selectpicker.main.data||(this.selectpicker.main.data=[]),Array.prototype.push.apply(this.selectpicker.main.data,o),this.selectpicker.current.data=this.selectpicker.main.data;break;case"search":Array.prototype.push.apply(this.selectpicker.search.data,o)}return o},buildList:function(e,t){var i=this,s=(t?this.selectpicker.search:this.selectpicker.main).data,n=[],l=0;!i.options.showTick&&!i.multiple||B.checkMark.parentNode||(B.checkMark.className=this.options.iconBase+" "+i.options.tickIcon+" check-mark",B.a.appendChild(B.checkMark));for(var o=s.length,r=e||0;r<o;r++){var a,d=(c=a=h=d=void 0,n),h=s[r],c=0;switch(h.type){case"divider":a=G.li(!1,V.DIVIDER,h.optID?h.optID+"div":void 0);break;case"option":(a=G.li(G.a(G.text.call(i,h),h.optionClass,h.inlineStyle),"",h.optID)).firstChild&&(a.firstChild.id=i.selectId+"-"+h.index);break;case"optgroup-label":a=G.li(G.label.call(i,h),"dropdown-header"+h.optgroupClass,h.optID)}h.element?h.element.innerHTML=a.innerHTML:h.element=a,d.push(h.element),h.display&&(c+=h.display.length),h.subtext&&(c+=h.subtext.length),h.icon&&(c+=1),l<c&&(l=c,i.selectpicker.view.widestOption=d[d.length-1])}e?t?Array.prototype.push.apply(this.selectpicker.search.elements,n):(Array.prototype.push.apply(this.selectpicker.main.elements,n),this.selectpicker.current.elements=this.selectpicker.main.elements):t?this.selectpicker.search.elements=n:this.selectpicker.main.elements=this.selectpicker.current.elements=n},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(e){var t=this,i=this.$element[0],s=this.setPlaceholder()&&0===i.selectedIndex,n=b.call(this),l=n.length,o=w.call(this,n),r=this.$button[0],a=r.querySelector(".filter-option-inner-inner"),d=document.createTextNode(this.options.multipleSeparator),c=B.fragment.cloneNode(!1),u=!1;if(this.options.source.data&&e&&(n.map(function e(i){i.selected?t.createOption(i,!0):i.children&&i.children.length&&i.children.map(e)}),i.appendChild(this.selectpicker.main.optionQueue),s=s&&0===i.selectedIndex),r.classList.toggle("bs-placeholder",t.multiple?!l:!o&&0!==o),t.multiple||1!==n.length||(t.selectpicker.view.displayedValue=o),"static"===this.options.selectedTextFormat)c=G.text.call(this,{text:this.options.placeholder},!0);else if(!1===(this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&0<l&&(1<(e=this.options.selectedTextFormat.split(">")).length&&l>e[1]||1===e.length&&2<=l))){if(!s){for(var m=0;m<l&&m<50;m++){var p=n[m],g={};p&&(this.multiple&&0<m&&c.appendChild(d.cloneNode(!1)),p.title?g.text=p.title:p.content&&t.options.showContent?(g.content=p.content.toString(),u=!0):(t.options.showIcon&&(g.icon=p.icon),t.options.showSubtext&&!t.multiple&&p.subtext&&(g.subtext=" "+p.subtext),g.text=p.text.trim()),c.appendChild(G.text.call(this,g,!0)))}49<l&&c.appendChild(document.createTextNode("..."))}}else i=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"]):not([style*="display: none"])',o=(this.options.hideDisabled&&(i+=":not(:disabled)"),this.$element[0].querySelectorAll("select > option"+i+", optgroup"+i+" option"+i).length),e="function"==typeof this.options.countSelectedText?this.options.countSelectedText(l,o):this.options.countSelectedText,c=G.text.call(this,{text:e.replace("{0}",l.toString()).replace("{1}",o.toString())},!0);c.childNodes.length||(c=G.text.call(this,{text:this.options.placeholder||this.options.noneSelectedText},!0)),r.title=c.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&u&&h([c],t.options.whiteList,t.options.sanitizeFn),a.innerHTML="",a.appendChild(c),z.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")&&(s=r.querySelector(".filter-expand"),(i=a.cloneNode(!0)).className="filter-expand",s?r.replaceChild(i,s):r.appendChild(i)),this.$element.trigger("rendered"+H)},setStyle:function(e,t){var i=this.$button[0],s=this.$newElement[0],n=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),z.major<4&&(s.classList.add("bs3"),s.parentNode.classList&&s.parentNode.classList.contains("input-group")&&(s.previousElementSibling||s.nextElementSibling)&&(s.previousElementSibling||s.nextElementSibling).classList.contains("input-group-addon")&&s.classList.add("bs3-has-addon")),s=e?e.trim():n,"add"==t?s&&i.classList.add.apply(i.classList,s.split(" ")):"remove"==t?s&&i.classList.remove.apply(i.classList,s.split(" ")):(n&&i.classList.remove.apply(i.classList,n.split(" ")),s&&i.classList.add.apply(i.classList,s.split(" ")))},liHeight:function(t){if(t||!1!==this.options.size&&!Object.keys(this.sizeInfo).length){t=B.div.cloneNode(!1);var i,s=B.div.cloneNode(!1),n=B.div.cloneNode(!1),l=document.createElement("ul"),o=B.li.cloneNode(!1),r=B.li.cloneNode(!1),a=B.a.cloneNode(!1),d=B.span.cloneNode(!1),h=this.options.header&&0<this.$menu.find("."+V.POPOVERHEADER).length?this.$menu.find("."+V.POPOVERHEADER)[0].cloneNode(!0):null,c=this.options.liveSearch?B.div.cloneNode(!1):null,u=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,p=this.$element[0].options[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,d.className="text",a.className="dropdown-item "+(p?p.className:""),t.className=this.$menu[0].parentNode.className+" "+V.SHOW,t.style.width=0,"auto"===this.options.width&&(s.style.minWidth=0),s.className=V.MENU+" "+V.SHOW,n.className="inner "+V.SHOW,l.className=V.MENU+" inner "+("4"<=z.major?V.SHOW:""),o.className=V.DIVIDER,r.className="dropdown-header",d.appendChild(document.createTextNode("​")),this.selectpicker.current.data.length)for(var g=0;g<this.selectpicker.current.data.length;g++){var f=this.selectpicker.current.data[g];if("option"===f.type&&"none"!==e(f.element.firstChild).css("display")){i=f.element;break}}else i=B.li.cloneNode(!1),a.appendChild(d),i.appendChild(a);r.appendChild(d.cloneNode(!0)),this.selectpicker.view.widestOption&&l.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),l.appendChild(i),l.appendChild(o),l.appendChild(r),h&&s.appendChild(h),c&&(p=document.createElement("input"),c.className="bs-searchbox",p.className="form-control",c.appendChild(p),s.appendChild(c)),u&&s.appendChild(u),n.appendChild(l),s.appendChild(n),m&&s.appendChild(m),t.appendChild(s),document.body.appendChild(t),a=i.offsetHeight,d=r?r.offsetHeight:0,p=h?h.offsetHeight:0,l=c?c.offsetHeight:0,r=u?u.offsetHeight:0,h=m?m.offsetHeight:0,c=e(o).outerHeight(!0),u=window.getComputedStyle(s),m=s.offsetWidth,u={vert:(o={vert:T(u.paddingTop)+T(u.paddingBottom)+T(u.borderTopWidth)+T(u.borderBottomWidth),horiz:T(u.paddingLeft)+T(u.paddingRight)+T(u.borderLeftWidth)+T(u.borderRightWidth)}).vert+T(u.marginTop)+T(u.marginBottom)+2,horiz:o.horiz+T(u.marginLeft)+T(u.marginRight)+2},n.style.overflowY="scroll",n=s.offsetWidth-m,document.body.removeChild(t),this.sizeInfo.liHeight=a,this.sizeInfo.dropdownHeaderHeight=d,this.sizeInfo.headerHeight=p,this.sizeInfo.searchHeight=l,this.sizeInfo.actionsHeight=r,this.sizeInfo.doneButtonHeight=h,this.sizeInfo.dividerHeight=c,this.sizeInfo.menuPadding=o,this.sizeInfo.menuExtras=u,this.sizeInfo.menuWidth=m,this.sizeInfo.menuInnerInnerWidth=m-o.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=n,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=e(window),s=this.$newElement.offset(),n=e(this.options.container);this.options.container&&n.length&&!n.is("body")?((t=n.offset()).top+=parseInt(n.css("borderTopWidth")),t.left+=parseInt(n.css("borderLeftWidth"))):t={top:0,left:0},n=this.options.windowPadding;this.sizeInfo.selectOffsetTop=s.top-t.top-i.scrollTop(),this.sizeInfo.selectOffsetBot=i.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-n[2],this.sizeInfo.selectOffsetLeft=s.left-t.left-i.scrollLeft(),this.sizeInfo.selectOffsetRight=i.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-n[1],this.sizeInfo.selectOffsetTop-=n[0],this.sizeInfo.selectOffsetLeft-=n[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,s,n,l,o,r=this.sizeInfo.selectWidth,a=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,h=this.sizeInfo.searchHeight,c=this.sizeInfo.actionsHeight,u=this.sizeInfo.doneButtonHeight,m=this.sizeInfo.dividerHeight,p=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(o=a*this.selectpicker.current.data.length+p.vert,o=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&o+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot,!0===this.selectpicker.isSearching&&(o=this.selectpicker.dropup),this.$newElement.toggleClass(V.DROPUP,o),this.selectpicker.dropup=o),"auto"===this.options.size)o=3<this.selectpicker.current.data.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,s=o+d+h+c+u,l=Math.max(o-p.vert,0),t=(n=i=this.$newElement.hasClass(V.DROPUP)?this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert:i)-d-h-c-u-p.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var f=0;f<this.options.size;f++)"divider"===this.selectpicker.current.data[f].type&&g++;t=(i=a*this.options.size+g*m+p.vert)-p.vert,n=i+d+h+c+u,s=l=""}this.$menu.css({"max-height":n+"px",overflow:"hidden","min-height":s+"px"}),this.$menuInner.css({"max-height":t+"px",overflow:"hidden auto","min-height":l+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(V.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-r),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){var i,s;this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size&&(i=this,s=e(window),this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return i.setMenuSize()}),"auto"===this.options.size?s.off("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize").on("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize",function(){return i.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&s.off("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize")),this.createView(!1,!0,t)},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame(function(){e.$menu.css("min-width","0"),e.$element.on("loaded"+H,function(){e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")})}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){function t(t){var r={},a=l.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;l.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(V.DROPUP,t.hasClass(V.DROPUP)),i=t.offset(),o.is("body")?s={top:0,left:0}:((s=o.offset()).top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),s.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),n=t.hasClass(V.DROPUP)?0:t[0].offsetHeight,(z.major<4||"static"===a)&&(r.top=i.top-s.top+n,r.left=i.left-s.left),r.width=t[0].offsetWidth,l.$bsContainer.css(r)}this.$bsContainer=e('<div class="bs-container" />');var i,s,n,l=this,o=e(this.options.container);this.$button.on("click.bs.dropdown.data-api",function(){l.isDisabled()||(t(l.$newElement),l.$bsContainer.appendTo(l.options.container).toggleClass(V.SHOW,!l.$button.hasClass(V.SHOW)).append(l.$menu))}),e(window).off("resize"+H+"."+this.selectId+" scroll"+H+"."+this.selectId).on("resize"+H+"."+this.selectId+" scroll"+H+"."+this.selectId,function(){l.$newElement.hasClass(V.SHOW)&&t(l.$newElement)}),this.$element.on("hide"+H,function(){l.$menu.data("height",l.$menu.height()),l.$bsContainer.detach()})},createOption:function(e,t){var i,s=e.option||e;s&&1!==s.nodeType&&(i=(t?B.selectedOption:B.option).cloneNode(!0),void 0!==s.value&&(i.value=s.value),i.textContent=s.text,i.selected=!0,void 0!==s.liIndex?i.liIndex=s.liIndex:t||(i.liIndex=e.index),e.option=i,this.selectpicker.main.optionQueue.appendChild(i))},setOptionStatus:function(e){var t=this;if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length){for(var i=0;i<t.selectpicker.view.visibleElements.length;i++){var s=t.selectpicker.current.data[i+t.selectpicker.view.position0];s.option&&(!0!==e&&t.setDisabled(s),t.setSelected(s))}this.options.source.data&&this.$element[0].appendChild(this.selectpicker.main.optionQueue)}},setSelected:function(e,t){t=void 0===t?e.selected:t;var i,s=e.element,n=void 0!==this.activeElement,l=this.activeElement===s||t&&!this.multiple&&!n;s&&(void 0!==t&&(e.selected=t,e.option&&(e.option.selected=t)),t&&this.options.source.data&&this.createOption(e,!1),i=s.firstChild,t&&(this.selectedElement=s),s.classList.toggle("selected",t),l?(this.focusItem(s,e),this.selectpicker.view.currentActive=s,this.activeElement=s):this.defocusItem(s),i&&(i.classList.toggle("selected",t),t?i.setAttribute("aria-selected",!0):this.multiple?i.setAttribute("aria-selected",!1):i.removeAttribute("aria-selected")),l||n||!t||void 0===this.prevActiveElement||(e=this.prevActiveElement,this.defocusItem(e)))},setDisabled:function(e){var t,i=e.disabled;(e=e.element)&&(t=e.firstChild,e.classList.toggle(V.DISABLED,i),t&&("4"<=z.major&&t.classList.toggle(V.DISABLED,i),i?(t.setAttribute("aria-disabled",i),t.setAttribute("tabindex",-1)):(t.removeAttribute("aria-disabled"),t.setAttribute("tabindex",0))))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(V.DISABLED),this.$button.addClass(V.DISABLED).attr("aria-disabled",!0)):this.$button[0].classList.contains(V.DISABLED)&&(this.$newElement[0].classList.remove(V.DISABLED),this.$button.removeClass(V.DISABLED).attr("aria-disabled",!1))},clickListener:function(){var t=this,i=e(document);function s(){(t.options.liveSearch?t.$searchbox:t.$menuInner).trigger("focus")}function n(){t.dropdown&&t.dropdown._popper&&t.dropdown._popper.state?s():requestAnimationFrame(n)}i.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){t.dropdown||"4"!==z.major||(t.dropdown=t.$button.data("bs.dropdown"),t.dropdown._menu=t.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(e){var i,s,n;t.options.allowClear&&(i=e.target,s=t.$clearButton[0],(i=/MSIE|Trident/.test(window.navigator.userAgent)?document.elementFromPoint(e.clientX,e.clientY):i)!==s&&i.parentElement!==s||(e.stopImmediatePropagation(),t.multiple?t.deselectAll():(s=(i=t.$element[0]).value,e=i.selectedIndex,(n=!!(n=i.options[e])&&t.selectpicker.main.data[n.liIndex])&&t.setSelected(n,!1),i.selectedIndex=0,y=[e,!1,s],t.$element.triggerNative("change")),t.$newElement.hasClass(V.SHOW)&&(t.options.liveSearch&&t.$searchbox.trigger("focus"),t.createView(!1)))),t.$newElement.hasClass(V.SHOW)||t.setSize()}),this.$element.on("shown"+H,function(){t.$menuInner[0].scrollTop!==t.selectpicker.view.scrollTop&&(t.$menuInner[0].scrollTop=t.selectpicker.view.scrollTop),3<z.major?requestAnimationFrame(n):s()}),this.$menuInner.on("mouseenter","li a",function(e){var i=this.parentElement,s=t.isVirtual()?t.selectpicker.view.position0:0,n=Array.prototype.indexOf.call(i.parentElement.children,i);n=t.selectpicker.current.data[n+s];t.focusItem(i,n,!0)}),this.$menuInner.on("click","li a",function(i,s){var n=e(this),l=t.$element[0],o=t.isVirtual()?t.selectpicker.view.position0:0,r=t.selectpicker.current.data[n.parent().index()+o],a=(o=r.element,w.call(t)),d=l.selectedIndex,h=!!(h=l.options[d])&&t.selectpicker.main.data[h.liIndex],c=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!n.parent().hasClass(V.DISABLED)){i=r.option,n=e(i);var u=i.selected,m=t.selectpicker.current.data.find(function(e){return e.optID===r.optID&&"optgroup-label"===e.type}),p=m?m.optgroup:void 0,g=(m=p instanceof Element?K.fromOption:K.fromDataSource,p&&p.children),f=parseInt(t.options.maxOptions);m=p&&parseInt(m(p,"maxOptions"))||!1;if((s=o===t.activeElement||s)||(t.prevActiveElement=t.activeElement,t.activeElement=void 0),t.multiple&&1!==f){if(t.setSelected(r,!u),t.focusedParent.focus(),!1!==f||!1!==m){o=f<b.call(t).length;var _=0;if(p&&p.children)for(var v=0;v<p.children.length;v++)p.children[v].selected&&_++;if(s=m<_,f&&o||m&&s)if(f&&1===f)l.selectedIndex=-1,t.setOptionStatus(!0);else if(m&&1===m){for(v=0;v<g.length;v++){var C=g[v];t.setSelected(t.selectpicker.current.data[C.liIndex],!1)}t.setSelected(r,!0)}else{var S=(u="function"==typeof(u="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText)?u(f,m):u)[0].replace("{n}",f),x=u[1].replace("{n}",m),T=e('<div class="notify"></div>');u[2]&&(S=S.replace("{var}",u[2][1<f?0:1]),x=x.replace("{var}",u[2][1<m?0:1])),t.$menu.append(T),f&&o&&(T.append(e("<div>"+S+"</div>")),c=!1,t.$element.trigger("maxReached"+H)),m&&s&&(T.append(e("<div>"+x+"</div>")),c=!1,t.$element.trigger("maxReachedGrp"+H)),setTimeout(function(){t.setSelected(r,!1)},10),T[0].classList.add("fadeOut"),setTimeout(function(){T.remove()},1050)}}}else h&&t.setSelected(h,!1),t.setSelected(r,!0);t.options.source.data&&t.$element[0].appendChild(t.selectpicker.main.optionQueue),!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.trigger("focus"):t.options.liveSearch&&t.$searchbox.trigger("focus"),!c||!t.multiple&&d===l.selectedIndex||(y=[i.index,n.prop("selected"),a],t.$element.triggerNative("change"))}}),this.$menu.on("click","li."+V.DISABLED+" a, ."+V.POPOVERHEADER+", ."+V.POPOVERHEADER+" :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),(t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox:t.$button).trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),(t.options.liveSearch?t.$searchbox:t.$button).trigger("focus")}),this.$menu.on("click","."+V.POPOVERHEADER+" .close",function(){t.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){(t.options.liveSearch?t.$searchbox:t.$button).trigger("focus"),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()}),this.$button.on("focus"+H,function(e){var i=t.$element[0].getAttribute("tabindex");void 0!==i&&e.originalEvent&&e.originalEvent.isTrusted&&(this.setAttribute("tabindex",i),t.$element[0].setAttribute("tabindex",-1),t.selectpicker.view.tabindex=i)}).on("blur"+H,function(e){void 0!==t.selectpicker.view.tabindex&&e.originalEvent&&e.originalEvent.isTrusted&&(t.$element[0].setAttribute("tabindex",t.selectpicker.view.tabindex),this.setAttribute("tabindex",-1),t.selectpicker.view.tabindex=void 0)}),this.$element.on("change"+H,function(){t.render(),t.$element.trigger("changed"+H,y),y=null}).on("focus"+H,function(){t.options.mobile||t.$button[0].focus()})},liveSearchListener:function(){var e=this;this.$button.on("click.bs.dropdown.data-api",function(){e.$searchbox.val()&&(e.$searchbox.val(""),e.selectpicker.search.previousValue=void 0)}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var t=e.$searchbox[0].value;if(e.selectpicker.search.elements=[],e.selectpicker.search.data=[],t)if(e.selectpicker.search.previousValue=t,e.options.source.search)e.fetchData(function(i){e.render(),e.buildList(void 0,!0),e.noScroll=!0,e.$menuInner.scrollTop(0),e.createView(!0),Y.call(e,i,t)},"search",0,t);else{var i=[],s=t.toUpperCase(),n={},l=[],o=e._searchStyle(),r=e.options.liveSearchNormalize;r&&(s=A(s));for(var a=0;a<e.selectpicker.main.data.length;a++){var d=e.selectpicker.main.data[a];n[a]||(n[a]=x(d,s,o,r)),n[a]&&void 0!==d.headerIndex&&-1===l.indexOf(d.headerIndex)&&(0<d.headerIndex&&(n[d.headerIndex-1]=!0,l.push(d.headerIndex-1)),n[d.headerIndex]=!0,l.push(d.headerIndex),n[d.lastIndex+1]=!0),n[a]&&"optgroup-label"!==d.type&&l.push(a)}a=0;for(var h=l.length;a<h;a++){var c=l[a],u=l[a-1];d=e.selectpicker.main.data[c],u=e.selectpicker.main.data[u];("divider"!==d.type||"divider"===d.type&&u&&"divider"!==u.type&&h-1!==a)&&(e.selectpicker.search.data.push(d),i.push(e.selectpicker.main.elements[c]))}e.activeElement=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=i,e.createView(!0),Y.call(e,i,t)}else e.selectpicker.search.previousValue&&(e.$menuInner.scrollTop(0),e.createView(!1))})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){var t=this.$element[0];if(void 0===e)return this.$element.val();var i=b.call(this),s=w.call(this,i);y=[null,null,s],(e=Array.isArray(e)?e:[e]).map(String);for(var n=0;n<i.length;n++){var l=i[n];l&&-1===e.indexOf(String(l.value))&&this.setSelected(l,!1)}return this.selectpicker.main.data.filter(function(t){return-1!==e.indexOf(String(t.value))&&(this.setSelected(t,!0),!0)},this),this.options.source.data&&t.appendChild(this.selectpicker.main.optionQueue),this.$element.trigger("changed"+H,y),this.$newElement.hasClass(V.SHOW)&&(this.multiple?this.setOptionStatus(!0):"number"==typeof(s=(t.options[t.selectedIndex]||{}).liIndex)&&this.setSelected(this.selectpicker.current.data[s],!0)),this.render(),y=null,this.$element},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=0,s=0,n=w.call(this);t.classList.add("bs-select-hidden");for(var l=0,o=this.selectpicker.current.data,r=o.length;l<r;l++){var a=o[l],d=a.option;d&&!a.disabled&&"divider"!==a.type&&(a.selected&&i++,d.selected=e,!0===(a.selected=e)&&s++)}t.classList.remove("bs-select-hidden"),i!==s&&(this.setOptionStatus(),y=[null,null,n],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e,t){var i=void 0===t;(e=e||window.event)&&e.stopPropagation(),!1===i&&(e=this.$newElement[0].classList.contains(V.SHOW),i=!0===t&&!1===e||!1===t&&!0===e),i&&this.$button.trigger("click.bs.dropdown.data-api")},open:function(e){this.toggle(e,!0)},close:function(e){this.toggle(e,!1)},keydown:function(t){var i,s,n,l,o=e(this),r=((h=o.hasClass("dropdown-toggle"))?o.closest(".dropdown"):o.closest(U.MENU)).data("this"),a=r.findLis(),d=!1,h=9===t.which&&!h&&!r.options.selectOnTab,c=W.test(t.which)||h,u=r.$menuInner[0].scrollTop,m=!0===r.isVirtual()?r.selectpicker.view.position0:0;if(!(112<=t.which&&t.which<=123))if(!(i=r.$menu.hasClass(V.SHOW))&&(c||48<=t.which&&t.which<=57||96<=t.which&&t.which<=105||65<=t.which&&t.which<=90)&&(r.$button.trigger("click.bs.dropdown.data-api"),r.options.liveSearch))r.$searchbox.trigger("focus");else{if(27===t.which&&i&&(t.preventDefault(),r.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),c){if(!a.length)return;-1!==(c=(s=r.activeElement)?Array.prototype.indexOf.call(s.parentElement.children,s):-1)&&r.defocusItem(s),38===t.which?(-1!==c&&c--,c+m<0&&(c+=a.length),r.selectpicker.view.canHighlight[c+m]||-1===(c=r.selectpicker.view.canHighlight.slice(0,c+m).lastIndexOf(!0)-m)&&(c=a.length-1)):40!==t.which&&!h||(++c+m>=r.selectpicker.view.canHighlight.length&&(c=r.selectpicker.view.firstHighlightIndex),r.selectpicker.view.canHighlight[c+m]||(c=c+1+r.selectpicker.view.canHighlight.slice(c+m+1).indexOf(!0))),t.preventDefault();var p=m+c;38===t.which?0===m&&c===a.length-1?(r.$menuInner[0].scrollTop=r.$menuInner[0].scrollHeight,p=r.selectpicker.current.elements.length-1):(n=r.selectpicker.current.data[p])&&(d=(l=n.position-n.height)<u):40!==t.which&&!h||(c===r.selectpicker.view.firstHighlightIndex?(r.$menuInner[0].scrollTop=0,p=r.selectpicker.view.firstHighlightIndex):(n=r.selectpicker.current.data[p])&&(d=u<(l=n.position-r.sizeInfo.menuInnerHeight))),s=r.selectpicker.current.elements[p],r.activeElement=(r.selectpicker.current.data[p]||{}).element,r.focusItem(s),r.selectpicker.view.currentActive=s,d&&(r.$menuInner[0].scrollTop=l),(r.options.liveSearch?r.$searchbox:o).trigger("focus")}else if(!o.is("input")&&!q.test(t.which)||32===t.which&&r.selectpicker.keydown.keyHistory){var g,f=[];t.preventDefault(),r.selectpicker.keydown.keyHistory+=P[t.which],r.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(r.selectpicker.keydown.resetKeyHistory.cancel),r.selectpicker.keydown.resetKeyHistory.cancel=r.selectpicker.keydown.resetKeyHistory.start(),g=r.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(g)&&(g=g.charAt(0));for(var _=0;_<r.selectpicker.current.data.length;_++){var v=r.selectpicker.current.data[_];x(v,g,"startsWith",!0)&&r.selectpicker.view.canHighlight[_]&&f.push(v.element)}f.length&&(m=0,a.removeClass("active").find("a").removeClass("active"),1===g.length&&(-1===(m=f.indexOf(r.activeElement))||m===f.length-1?m=0:m++),h=f[m],d=0<u-(n=r.selectpicker.main.data[h]).position?(l=n.position-n.height,!0):(l=n.position-r.sizeInfo.menuInnerHeight,n.position>u+r.sizeInfo.menuInnerHeight),s=r.selectpicker.main.elements[h],r.activeElement=s,r.focusItem(s),s&&s.firstChild.focus(),d&&(r.$menuInner[0].scrollTop=l),o.trigger("focus"))}i&&(32===t.which&&!r.selectpicker.keydown.keyHistory||13===t.which||9===t.which&&r.options.selectOnTab)&&(32!==t.which&&t.preventDefault(),r.options.liveSearch&&32===t.which||(r.$menuInner.find(".active a").trigger("click",!0),o.trigger("focus"),r.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.options.mobile=!0,this.$element[0].classList.add("mobile-device")},refresh:function(){var t=this,i=e.extend({},this.options,c(this.$element),this.$element.data());this.options=i,this.options.source.data?(this.render(),this.buildList()):this.fetchData(function(){t.render(),t.buildList()}),this.checkDisabled(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+H)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),(this.$bsContainer||this.$menu).remove(),this.selectpicker.view.titleOption&&this.selectpicker.view.titleOption.parentNode&&this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption),this.$element.off(H).removeData("selectpicker").removeClass("bs-select-hidden selectpicker mobile-device"),e(window).off(H+"."+this.selectId)}};var Z=e.fn.selectpicker;function ee(){return z.major<5?e.fn.dropdown?(e.fn.dropdown.Constructor._dataApiKeydownHandler||e.fn.dropdown.Constructor.prototype.keydown).apply(this,arguments):void 0:F.dataApiKeydownHandler}e.fn.selectpicker=X,e.fn.selectpicker.Constructor=J,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=Z,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > ["+U.DATA_TOGGLE+"]",ee).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",ee).on("keydown"+H,".bootstrap-select ["+U.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',J.prototype.keydown).on("focusin.modal",".bootstrap-select ["+U.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),document.addEventListener("DOMContentLoaded",function(){e(".selectpicker").each(function(){var t=e(this);X.call(t,t.data())})})}(e)}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EasyMDE=e()}(function(){return function e(t,i,s){function n(o,r){if(!i[o]){if(!t[o]){var a="function"==typeof require&&require;if(!r&&a)return a(o,!0);if(l)return l(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){return n(t[o][1][e]||e)},h,h.exports,e,t,i,s)}return i[o].exports}for(var l="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(e,t,i){"use strict";i.byteLength=function(e){var t=a(e),i=t[0],s=t[1];return 3*(i+s)/4-s},i.toByteArray=function(e){for(var t,i=a(e),s=i[0],o=i[1],r=new l(3*(s+(u=o))/4-u),d=0,h=0<o?s-4:s,c=0;c<h;c+=4)t=n[e.charCodeAt(c)]<<18|n[e.charCodeAt(c+1)]<<12|n[e.charCodeAt(c+2)]<<6|n[e.charCodeAt(c+3)],r[d++]=t>>16&255,r[d++]=t>>8&255,r[d++]=255&t;var u;return 2===o&&(t=n[e.charCodeAt(c)]<<2|n[e.charCodeAt(c+1)]>>4,r[d++]=255&t),1===o&&(t=n[e.charCodeAt(c)]<<10|n[e.charCodeAt(c+1)]<<4|n[e.charCodeAt(c+2)]>>2,r[d++]=t>>8&255,r[d++]=255&t),r},i.fromByteArray=function(e){for(var t,i=e.length,n=i%3,l=[],o=0,r=i-n;o<r;o+=16383)l.push(d(e,o,r<o+16383?r:o+16383));return 1===n?(t=e[i-1],l.push(s[t>>2]+s[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],l.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"=")),l.join("")};for(var s=[],n=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0;r<64;++r)s[r]=o[r],n[o.charCodeAt(r)]=r;function a(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function d(e,t,i){for(var n,l,o=[],r=t;r<i;r+=3)n=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),o.push(s[(l=n)>>18&63]+s[l>>12&63]+s[l>>6&63]+s[63&l]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(e,t,i){},{}],3:[function(e,t,i){"use strict";var s=e("base64-js"),n=e("ieee754");i.Buffer=r,i.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},i.INSPECT_MAX_BYTES=50;var l=2147483647;function o(e){if(l<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,i){if("number"!=typeof e)return a(e,t,i);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}function a(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!r.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|m(e,t),s=o(i),n=s.write(e,t);return n!==i&&(s=s.slice(0,n)),s}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return function(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var s;return(s=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i)).__proto__=r.prototype,s}(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return r.from(s,t,i);var n=function(e){if(r.isBuffer(e)){var t=0|u(e.length),i=o(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||M(e.length)?o(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return r.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return d(e),o(e<0?0:0|u(e))}function c(e){for(var t=e.length<0?0:0|u(e.length),i=o(t),s=0;s<t;s+=1)i[s]=255&e[s];return i}function u(e){if(l<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|e}function m(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,s=2<arguments.length&&!0===arguments[2];if(!s&&0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return R(e).length;default:if(n)return s?-1:L(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,i){var s=e[t];e[t]=e[i],e[i]=s}function g(e,t,i,s,n){if(0===e.length)return-1;if("string"==typeof i?(s=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),M(i=+i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=r.from(t,s)),r.isBuffer(t))return 0===t.length?-1:f(e,t,i,s,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):f(e,[t],i,s,n);throw new TypeError("val must be string, number or Buffer")}function f(e,t,i,s,n){var l,o=1,r=e.length,a=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;r/=o=2,a/=2,i/=2}function d(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var h=-1;for(l=i;l<r;l++)if(d(e,l)===d(t,-1===h?0:l-h)){if(-1===h&&(h=l),l-h+1===a)return h*o}else-1!==h&&(l-=l-h),h=-1}else for(r<i+a&&(i=r-a),l=i;0<=l;l--){for(var c=!0,u=0;u<a;u++)if(d(e,l+u)!==d(t,u)){c=!1;break}if(c)return l}return-1}function _(e,t,i,s){i=Number(i)||0;var n=e.length-i;s?n<(s=Number(s))&&(s=n):s=n;var l=t.length;l/2<s&&(s=l/2);for(var o=0;o<s;++o){var r=parseInt(t.substr(2*o,2),16);if(M(r))return o;e[i+o]=r}return o}function v(e,t,i,s){return E(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,s)}function b(e,t,i){i=Math.min(e.length,i);for(var s=[],n=t;n<i;){var l,o,r,a,d=e[n],h=null,c=239<d?4:223<d?3:191<d?2:1;if(n+c<=i)switch(c){case 1:d<128&&(h=d);break;case 2:128==(192&(l=e[n+1]))&&127<(a=(31&d)<<6|63&l)&&(h=a);break;case 3:l=e[n+1],o=e[n+2],128==(192&l)&&128==(192&o)&&2047<(a=(15&d)<<12|(63&l)<<6|63&o)&&(a<55296||57343<a)&&(h=a);break;case 4:l=e[n+1],o=e[n+2],r=e[n+3],128==(192&l)&&128==(192&o)&&128==(192&r)&&65535<(a=(15&d)<<18|(63&l)<<12|(63&o)<<6|63&r)&&a<1114112&&(h=a)}null===h?(h=65533,c=1):65535<h&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|1023&h),s.push(h),n+=c}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);for(var i="",s=0;s<t;)i+=String.fromCharCode.apply(String,e.slice(s,s+=w));return i}(s)}i.kMaxLength=l,(r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,i){return a(e,t,i)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,t,i){return n=t,l=i,d(s=e),s<=0?o(s):void 0!==n?"string"==typeof l?o(s).fill(n,l):o(s).fill(n):o(s);var s,n,l},r.allocUnsafe=function(e){return h(e)},r.allocUnsafeSlow=function(e){return h(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==r.prototype},r.compare=function(e,t){if(N(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,s=t.length,n=0,l=Math.min(i,s);n<l;++n)if(e[n]!==t[n]){i=e[n],s=t[n];break}return i<s?-1:s<i?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var i;if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;var s=r.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var l=e[i];if(N(l,Uint8Array)&&(l=r.from(l)),!r.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(s,n),n+=l.length}return s},r.byteLength=m,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):function(e,t,i){var n,l,o,r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,i);case"utf8":case"utf-8":return b(this,t,i);case"ascii":return C(this,t,i);case"latin1":case"binary":return y(this,t,i);case"base64":return n=this,o=i,0===(l=t)&&o===n.length?s.fromByteArray(n):s.fromByteArray(n.slice(l,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,i,s,n){if(N(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),t<0||i>e.length||s<0||n>this.length)throw new RangeError("out of range index");if(n<=s&&i<=t)return 0;if(n<=s)return-1;if(i<=t)return 1;if(this===e)return 0;for(var l=(n>>>=0)-(s>>>=0),o=(i>>>=0)-(t>>>=0),a=Math.min(l,o),d=this.slice(s,n),h=e.slice(t,i),c=0;c<a;++c)if(d[c]!==h[c]){l=d[c],o=h[c];break}return l<o?-1:o<l?1:0},r.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},r.prototype.indexOf=function(e,t,i){return g(this,e,t,i,!0)},r.prototype.lastIndexOf=function(e,t,i){return g(this,e,t,i,!1)},r.prototype.write=function(e,t,i,s){if(void 0===t)s="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)s=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}var n=this.length-t;if((void 0===i||n<i)&&(i=n),0<e.length&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var l,o,r,a,d,h,c=!1;;)switch(s){case"hex":return _(this,e,t,i);case"utf8":case"utf-8":return d=t,h=i,E(L(e,this.length-d),this,d,h);case"ascii":case"latin1":case"binary":return v(this,e,t,i);case"base64":return r=t,a=i,E(R(e),this,r,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,o=i,E(function(e,t){for(var i,s,n,l=[],o=0;o<e.length&&!((t-=2)<0);++o)s=(i=e.charCodeAt(o))>>8,n=i%256,l.push(n),l.push(s);return l}(e,this.length-l),this,l,o);default:if(c)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),c=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function C(e,t,i){var s="";i=Math.min(e.length,i);for(var n=t;n<i;++n)s+=String.fromCharCode(127&e[n]);return s}function y(e,t,i){var s="";i=Math.min(e.length,i);for(var n=t;n<i;++n)s+=String.fromCharCode(e[n]);return s}function S(e,t,i){var s,n=e.length;(!t||t<0)&&(t=0),(!i||i<0||n<i)&&(i=n);for(var l="",o=t;o<i;++o)l+=(s=e[o])<16?"0"+s.toString(16):s.toString(16);return l}function x(e,t,i){for(var s=e.slice(t,i),n="",l=0;l<s.length;l+=2)n+=String.fromCharCode(s[l]+256*s[l+1]);return n}function T(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(i<e+t)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,i,s,n,l){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<t||t<l)throw new RangeError('"value" argument is out of bounds');if(i+s>e.length)throw new RangeError("Index out of range")}function D(e,t,i,s,n,l){if(i+s>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function I(e,t,i,s,l){return t=+t,i>>>=0,l||D(e,0,i,4),n.write(e,t,i,s,23,4),i+4}function O(e,t,i,s,l){return t=+t,i>>>=0,l||D(e,0,i,8),n.write(e,t,i,s,52,8),i+8}r.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e);var s=this.subarray(e,t);return s.__proto__=r.prototype,s},r.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var s=this[e],n=1,l=0;++l<t&&(n*=256);)s+=this[e+l]*n;return s},r.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var s=this[e+--t],n=1;0<t&&(n*=256);)s+=this[e+--t]*n;return s},r.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var s=this[e],n=1,l=0;++l<t&&(n*=256);)s+=this[e+l]*n;return(n*=128)<=s&&(s-=Math.pow(2,8*t)),s},r.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var s=t,n=1,l=this[e+--s];0<s&&(n*=256);)l+=this[e+--s]*n;return(n*=128)<=l&&(l-=Math.pow(2,8*t)),l},r.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),n.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),n.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),n.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),n.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,i,s){e=+e,t>>>=0,i>>>=0,s||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=1,l=0;for(this[t]=255&e;++l<i&&(n*=256);)this[t+l]=e/n&255;return t+i},r.prototype.writeUIntBE=function(e,t,i,s){e=+e,t>>>=0,i>>>=0,s||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=i-1,l=1;for(this[t+n]=255&e;0<=--n&&(l*=256);)this[t+n]=e/l&255;return t+i},r.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,i,s){if(e=+e,t>>>=0,!s){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var l=0,o=1,r=0;for(this[t]=255&e;++l<i&&(o*=256);)e<0&&0===r&&0!==this[t+l-1]&&(r=1),this[t+l]=(e/o|0)-r&255;return t+i},r.prototype.writeIntBE=function(e,t,i,s){if(e=+e,t>>>=0,!s){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var l=i-1,o=1,r=0;for(this[t+l]=255&e;0<=--l&&(o*=256);)e<0&&0===r&&0!==this[t+l+1]&&(r=1),this[t+l]=(e/o|0)-r&255;return t+i},r.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,i){return I(this,e,t,!0,i)},r.prototype.writeFloatBE=function(e,t,i){return I(this,e,t,!1,i)},r.prototype.writeDoubleLE=function(e,t,i){return O(this,e,t,!0,i)},r.prototype.writeDoubleBE=function(e,t,i){return O(this,e,t,!1,i)},r.prototype.copy=function(e,t,i,s){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),0<s&&s<i&&(s=i),s===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-i&&(s=e.length-t+i);var n=s-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,s);else if(this===e&&i<t&&t<s)for(var l=n-1;0<=l;--l)e[l+t]=this[l+i];else Uint8Array.prototype.set.call(e,this.subarray(i,s),t);return n},r.prototype.fill=function(e,t,i,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!r.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){var n=e.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(e=n)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var l;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(l=t;l<i;++l)this[l]=e;else{var o=r.isBuffer(e)?e:r.from(e,s),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(l=0;l<i-t;++l)this[l+t]=o[l%a]}return this};var A=/[^+/0-9A-Za-z-_]/g;function L(e,t){var i;t=t||1/0;for(var s=e.length,n=null,l=[],o=0;o<s;++o){if(55295<(i=e.charCodeAt(o))&&i<57344){if(!n){if(56319<i){-1<(t-=3)&&l.push(239,191,189);continue}if(o+1===s){-1<(t-=3)&&l.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(t-=3)&&l.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(t-=3)&&l.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;l.push(i)}else if(i<2048){if((t-=2)<0)break;l.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;l.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;l.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return l}function R(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function E(e,t,i,s){for(var n=0;n<s&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}},{"base64-js":1,ieee754:16}],4:[function(e,t,i){"use strict";var s=e("typo-js");function n(e){"function"==typeof(e=e||{}).codeMirrorInstance&&"function"==typeof e.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),e.codeMirrorInstance.defineMode("spell-checker",function(t){if(!n.aff_loading){n.aff_loading=!0;var i=new XMLHttpRequest;i.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),i.onload=function(){4===i.readyState&&200===i.status&&(n.aff_data=i.responseText,2==++n.num_loaded&&(n.typo=new s("en_US",n.aff_data,n.dic_data,{platform:"any"})))},i.send(null)}if(!n.dic_loading){n.dic_loading=!0;var l=new XMLHttpRequest;l.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),l.onload=function(){4===l.readyState&&200===l.status&&(n.dic_data=l.responseText,2==++n.num_loaded&&(n.typo=new s("en_US",n.aff_data,n.dic_data,{platform:"any"})))},l.send(null)}var o='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',r={token:function(e){var t=e.peek(),i="";if(o.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!o.includes(t);)i+=t,e.next();return n.typo&&!n.typo.check(i)?"spell-error":null}},a=e.codeMirrorInstance.getMode(t,t.backdrop||"text/plain");return e.codeMirrorInstance.overlayMode(a,r,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}n.num_loaded=0,n.aff_loading=!1,n.dic_loading=!1,n.aff_data="",n.dic_data="",t.exports=n},{"typo-js":18}],5:[function(e,t,i){!function(e){"use strict";e.defineOption("fullScreen",!1,function(t,i,s){var n,l;s==e.Init&&(s=!1),!s!=!i&&(i?(l=(n=t).getWrapperElement(),n.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:l.style.width,height:l.style.height},l.style.width="",l.style.height="auto",l.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",n.refresh()):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var i=e.state.fullScreenRestore;t.style.width=i.width,t.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),e.refresh()}(t))})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],6:[function(e,t,i){!function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function i(e){t(e);var i=e.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.style.direction=e.getOption("direction"),i.className="CodeMirror-placeholder";var s=e.getOption("placeholder");"string"==typeof s&&(s=document.createTextNode(s)),i.appendChild(s),e.display.lineSpace.insertBefore(i,e.display.lineSpace.firstChild)}function s(e){l(e)&&i(e)}function n(e){var s=e.getWrapperElement(),n=l(e);s.className=s.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?i(e):t(e)}function l(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(i,l,o){var r=o&&o!=e.Init;if(l&&!r)i.on("blur",s),i.on("change",n),i.on("swapDoc",n),n(i);else if(!l&&r){i.off("blur",s),i.off("change",n),i.off("swapDoc",n),t(i);var a=i.getWrapperElement();a.className=a.className.replace(" CodeMirror-empty","")}l&&!i.hasFocus()&&s(i)})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],7:[function(e,t,i){!function(e){"use strict";var t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,i=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,s=/[*+-]\s/;function n(e,i){var s=i.line,n=0,l=0,o=t.exec(e.getLine(s)),r=o[1];do{var a=s+(n+=1),d=e.getLine(a),h=t.exec(d);if(h){var c=h[1],u=parseInt(o[3],10)+n-l,m=parseInt(h[3],10),p=m;if(r!==c||isNaN(m)){if(r.length>c.length)return;if(r.length<c.length&&1===n)return;l+=1}else u===m&&(p=m+1),m<u&&(p=u+1),e.replaceRange(d.replace(t,c+p+h[4]+h[5]),{line:a,ch:0},{line:a,ch:d.length})}}while(h)}e.commands.newlineAndIndentContinueMarkdownList=function(l){if(l.getOption("disableInput"))return e.Pass;for(var o=l.listSelections(),r=[],a=0;a<o.length;a++){var d=o[a].head,h=l.getStateAfter(d.line),c=!1!==h.list,u=0!==h.quote,m=l.getLine(d.line),p=t.exec(m),g=/^\s*$/.test(m.slice(0,d.ch));if(!o[a].empty()||!c&&!u||!p||g)return void l.execCommand("newlineAndIndent");if(i.test(m))/>\s*$/.test(m)||l.replaceRange("",{line:d.line,ch:0},{line:d.line,ch:d.ch+1}),r[a]="\n";else{var f=p[1],_=p[5],v=!(s.test(p[2])||0<=p[2].indexOf(">")),b=v?parseInt(p[3],10)+1+p[4]:p[2].replace("x"," ");r[a]="\n"+f+b+_,v&&n(l,d)}}l.replaceSelections(r)}}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],8:[function(e,t,i){!function(e){"use strict";e.overlayMode=function(t,i,s){return{startState:function(){return{base:e.startState(t),overlay:e.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(s){return{base:e.copyState(t,s.base),overlay:e.copyState(i,s.overlay),basePos:s.basePos,baseCur:null,overlayPos:s.overlayPos,overlayCur:null}},token:function(e,n){return(e!=n.streamSeen||Math.min(n.basePos,n.overlayPos)<e.start)&&(n.streamSeen=e,n.basePos=n.overlayPos=e.start),e.start==n.basePos&&(n.baseCur=t.token(e,n.base),n.basePos=e.pos),e.start==n.overlayPos&&(e.pos=e.start,n.overlayCur=i.token(e,n.overlay),n.overlayPos=e.pos),e.pos=Math.min(n.basePos,n.overlayPos),null==n.overlayCur?n.baseCur:null!=n.baseCur&&n.overlay.combineTokens||s&&null==n.overlay.combineTokens?n.baseCur+" "+n.overlayCur:n.overlayCur},indent:t.indent&&function(e,i){return t.indent(e.base,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var n,l;return t.blankLine&&(n=t.blankLine(e.base)),i.blankLine&&(l=i.blankLine(e.overlay)),null==l?n:s&&null!=n?n+" "+l:l}}}}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],9:[function(e,t,i){!function(e){"use strict";var t,i,s=e.Pos;function n(e,t){for(var i,s,n=null!=(s=(i=e).flags)?s:(i.ignoreCase?"i":"")+(i.global?"g":"")+(i.multiline?"m":""),l=n,o=0;o<t.length;o++)-1==l.indexOf(t.charAt(o))&&(l+=t.charAt(o));return n==l?e:new RegExp(e.source,l)}function l(e,t,i){t=n(t,"g");for(var l=i.line,o=i.ch,r=e.lastLine();l<=r;l++,o=0){t.lastIndex=o;var a=e.getLine(l),d=t.exec(a);if(d)return{from:s(l,d.index),to:s(l,d.index+d[0].length),match:d}}}function o(e,t){for(var i,s=0;;){t.lastIndex=s;var n=t.exec(e);if(!n)return i;if((s=(i=n).index+(i[0].length||1))==e.length)return i}}function r(e,t,i,s){if(e.length==t.length)return i;for(var n=0,l=i+Math.max(0,e.length-t.length);;){if(n==l)return n;var o=n+l>>1,r=s(e.slice(0,o)).length;if(r==i)return o;i<r?l=o:n=o+1}}function a(e,a,d,h){var c;this.atOccurrence=!1,this.doc=e,d=d?e.clipPos(d):s(0,0),this.pos={from:d,to:d},"object"==typeof h?c=h.caseFold:(c=h,h=null),"string"==typeof a?(null==c&&(c=!1),this.matches=function(n,l){return(n?function(e,n,l,o){if(!n.length)return null;var a=o?t:i,d=a(n).split(/\r|\n\r?/);e:for(var h=l.line,c=l.ch,u=e.firstLine()-1+d.length;u<=h;h--,c=-1){var m=e.getLine(h);-1<c&&(m=m.slice(0,c));var p=a(m);if(1==d.length){var g=p.lastIndexOf(d[0]);if(-1==g)continue e;return{from:s(h,r(m,p,g,a)),to:s(h,r(m,p,g+d[0].length,a))}}var f=d[d.length-1];if(p.slice(0,f.length)==f){var _=1;for(l=h-d.length+1;_<d.length-1;_++)if(a(e.getLine(l+_))!=d[_])continue e;var v=e.getLine(h+1-d.length),b=a(v);if(b.slice(b.length-d[0].length)==d[0])return{from:s(h+1-d.length,r(v,b,v.length-d[0].length,a)),to:s(h,r(m,p,f.length,a))}}}}:function(e,n,l,o){if(!n.length)return null;var a=o?t:i,d=a(n).split(/\r|\n\r?/);e:for(var h=l.line,c=l.ch,u=e.lastLine()+1-d.length;h<=u;h++,c=0){var m=e.getLine(h).slice(c),p=a(m);if(1==d.length){var g=p.indexOf(d[0]);if(-1==g)continue e;return l=r(m,p,g,a)+c,{from:s(h,r(m,p,g,a)+c),to:s(h,r(m,p,g+d[0].length,a)+c)}}var f=p.length-d[0].length;if(p.slice(f)==d[0]){for(var _=1;_<d.length-1;_++)if(a(e.getLine(h+_))!=d[_])continue e;var v=e.getLine(h+d.length-1),b=a(v),w=d[d.length-1];if(b.slice(0,w.length)==w)return{from:s(h,r(m,p,f,a)+c),to:s(h+d.length-1,r(v,b,w.length,a))}}}})(e,a,l,c)}):(a=n(a,"gm"),h&&!1===h.multiline?this.matches=function(t,i){return(t?function(e,t,i){t=n(t,"g");for(var l=i.line,r=i.ch,a=e.firstLine();a<=l;l--,r=-1){var d=e.getLine(l);-1<r&&(d=d.slice(0,r));var h=o(d,t);if(h)return{from:s(l,h.index),to:s(l,h.index+h[0].length),match:h}}}:l)(e,a,i)}:this.matches=function(t,i){return(t?function(e,t,i){t=n(t,"gm");for(var l,r=1,a=i.line,d=e.firstLine();d<=a;){for(var h=0;h<r;h++){var c=e.getLine(a--);l=null==l?c.slice(0,i.ch):c+"\n"+l}r*=2;var u=o(l,t);if(u){var m=l.slice(0,u.index).split("\n"),p=u[0].split("\n"),g=a+m.length,f=m[m.length-1].length;return{from:s(g,f),to:s(g+p.length-1,1==p.length?f+p[0].length:p[p.length-1].length),match:u}}}}:function(e,t,i){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source))return l(e,t,i);t=n(t,"gm");for(var o,r=1,a=i.line,d=e.lastLine();a<=d;){for(var h=0;h<r&&!(d<a);h++){var c=e.getLine(a++);o=null==o?c:o+"\n"+c}r*=2,t.lastIndex=i.ch;var u=t.exec(o);if(u){var m=o.slice(0,u.index).split("\n"),p=u[0].split("\n"),g=i.line+m.length-1,f=m[m.length-1].length;return{from:s(g,f),to:s(g+p.length-1,1==p.length?f+p[0].length:p[p.length-1].length),match:u}}}})(e,a,i)})}i=String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},function(e){return e}),a.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var i=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));i&&0==e.cmpPos(i.from,i.to);)t?i.from.ch?i.from=s(i.from.line,i.from.ch-1):i=i.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(s(i.from.line-1))):i.to.ch<this.doc.getLine(i.to.line).length?i.to=s(i.to.line,i.to.ch+1):i=i.to.line==this.doc.lastLine()?null:this.matches(t,s(i.to.line+1,0));if(i)return this.pos=i,this.atOccurrence=!0,this.pos.match||!0;var n=s(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:n,to:n},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,i){if(this.atOccurrence){var n=e.splitLines(t);this.doc.replaceRange(n,this.pos.from,this.pos.to,i),this.pos.to=s(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,i){return new a(this.doc,e,t,i)}),e.defineDocExtension("getSearchCursor",function(e,t,i){return new a(this,e,t,i)}),e.defineExtension("selectMatches",function(t,i){for(var s=[],n=this.getSearchCursor(t,this.getCursor("from"),i);n.findNext()&&!(0<e.cmpPos(n.to(),this.getCursor("to")));)s.push({anchor:n.from(),head:n.to()});s.length&&this.setSelections(s,0)})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],10:[function(e,t,i){!function(e){"use strict";function t(e){e.state.markedSelection&&e.operation(function(){!function(e){if(!e.somethingSelected())return r(e);if(1<e.listSelections().length)return a(e);var t=e.getCursor("start"),i=e.getCursor("end"),n=e.state.markedSelection;if(!n.length)return o(e,t,i);var d=n[0].find(),h=n[n.length-1].find();if(!d||!h||i.line-t.line<=s||0<=l(t,h.to)||l(i,d.from)<=0)return a(e);for(;0<l(t,d.from);)n.shift().clear(),d=n[0].find();for(l(t,d.from)<0&&(d.to.line-t.line<s?(n.shift().clear(),o(e,t,d.to,0)):o(e,t,d.from,0));l(i,h.to)<0;)n.pop().clear(),h=n[n.length-1].find();0<l(i,h.to)&&(i.line-h.from.line<s?(n.pop().clear(),o(e,h.from,i)):o(e,h.to,i))}(e)})}function i(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation(function(){r(e)})}e.defineOption("styleSelectedText",!1,function(s,n,l){var o=l&&l!=e.Init;n&&!o?(s.state.markedSelection=[],s.state.markedSelectionStyle="string"==typeof n?n:"CodeMirror-selectedtext",a(s),s.on("cursorActivity",t),s.on("change",i)):!n&&o&&(s.off("cursorActivity",t),s.off("change",i),r(s),s.state.markedSelection=s.state.markedSelectionStyle=null)});var s=8,n=e.Pos,l=e.cmpPos;function o(e,t,i,o){if(0!=l(t,i))for(var r=e.state.markedSelection,a=e.state.markedSelectionStyle,d=t.line;;){var h=d==t.line?t:n(d,0),c=d+s,u=c>=i.line,m=u?i:n(c,0),p=e.markText(h,m,{className:a});if(null==o?r.push(p):r.splice(o++,0,p),u)break;d=c}}function r(e){for(var t=e.state.markedSelection,i=0;i<t.length;++i)t[i].clear();t.length=0}function a(e){r(e);for(var t=e.listSelections(),i=0;i<t.length;i++)o(e,t[i].from(),t[i].to())}}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],11:[function(e,t,i){var s;s=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,i=/gecko\/\d/i.test(e),s=/MSIE \d/.test(e),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),l=/Edge\/(\d+)/.exec(e),o=s||n||l,r=o&&(s?document.documentMode||6:+(l||n)[1]),a=!l&&/WebKit\//.test(e),d=a&&/Qt\/\d+\.\d+/.test(e),h=!l&&/Chrome\//.test(e),c=/Opera\//.test(e),u=/Apple Computer/.test(navigator.vendor),m=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!l&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),f=/Android/.test(e),_=g||f||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),v=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),C=c&&e.match(/Version\/(\d*\.\d*)/);C&&(C=Number(C[1])),C&&15<=C&&(a=!(c=!1));var y=v&&(d||c&&(null==C||C<12.11)),S=i||o&&9<=r;function x(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T,k=function(e,t){var i=e.className,s=x(t).exec(i);if(s){var n=i.slice(s.index+s[0].length);e.className=i.slice(0,s.index)+(n?s[1]+n:"")}};function D(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function I(e,t){return D(e).appendChild(t)}function O(e,t,i,s){var n=document.createElement(e);if(i&&(n.className=i),s&&(n.style.cssText=s),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var l=0;l<t.length;++l)n.appendChild(t[l]);return n}function A(e,t,i,s){var n=O(e,t,i,s);return n.setAttribute("role","presentation"),n}function L(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function R(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function E(e,t){var i=e.className;x(t).test(i)||(e.className+=(i?" ":"")+t)}function N(e,t){for(var i=e.split(" "),s=0;s<i.length;s++)i[s]&&!x(i[s]).test(t)&&(t+=" "+i[s]);return t}T=document.createRange?function(e,t,i,s){var n=document.createRange();return n.setEnd(s||e,i),n.setStart(e,t),n}:function(e,t,i){var s=document.body.createTextRange();try{s.moveToElementText(e.parentNode)}catch(e){return s}return s.collapse(!0),s.moveEnd("character",i),s.moveStart("character",t),s};var M=function(e){e.select()};function P(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,i){for(var s in t||(t={}),e)!e.hasOwnProperty(s)||!1===i&&t.hasOwnProperty(s)||(t[s]=e[s]);return t}function j(e,t,i,s,n){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var l=s||0,o=n||0;;){var r=e.indexOf("\t",l);if(r<0||t<=r)return o+(t-l);o+=r-l,o+=i-o%i,l=r+1}}g?M=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(M=function(e){try{e.select()}catch(e){}});var z=function(){this.id=null};function $(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}z.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var H={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},U={origin:"*mouse"},B={origin:"+move"};function W(e,t,i){for(var s=0,n=0;;){var l=e.indexOf("\t",s);-1==l&&(l=e.length);var o=l-s;if(l==e.length||t<=n+o)return s+Math.min(o,t-n);if(n+=l-s,s=l+1,t<=(n+=i-n%i))return s}}var q=[""];function G(e){for(;q.length<=e;)q.push(K(q)+" ");return q[e]}function K(e){return e[e.length-1]}function Y(e,t){for(var i=[],s=0;s<e.length;s++)i[s]=t(e[s],s);return i}function Q(){}function J(e,t){var i;return i=Object.create?Object.create(e):(Q.prototype=e,new Q),t&&F(t,i),i}var X=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||X.test(e))}function ee(e,t){return t?!!(-1<t.source.indexOf("\\w")&&Z(e))||t.test(e):Z(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function se(e){return 768<=e.charCodeAt(0)&&ie.test(e)}function ne(e,t,i){for(;(i<0?0<t:t<e.length)&&se(e.charAt(t));)t+=i;return t}function le(e,t,i){for(var s=i<t?-1:1;;){if(t==i)return t;var n=(t+i)/2,l=s<0?Math.ceil(n):Math.floor(n);if(l==t)return e(l)?t:i;e(l)?i=l:t=l+s}}function oe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var s=0;;++s){var n=i.children[s],l=n.chunkSize();if(t<l){i=n;break}t-=l}return i.lines[t]}function re(e,t,i){var s=[],n=t.line;return e.iter(t.line,i.line+1,function(e){var l=e.text;n==i.line&&(l=l.slice(0,i.ch)),n==t.line&&(l=l.slice(t.ch)),s.push(l),++n}),s}function ae(e,t,i){var s=[];return e.iter(t,i,function(e){s.push(e.text)}),s}function de(e,t){var i=t-e.height;if(i)for(var s=e;s;s=s.parent)s.height+=i}function he(e){if(null==e.parent)return null;for(var t=e.parent,i=$(t.lines,e),s=t.parent;s;s=(t=s).parent)for(var n=0;s.children[n]!=t;++n)i+=s.children[n].chunkSize();return i+t.first}function ce(e,t){var i=e.first;e:do{for(var s=0;s<e.children.length;++s){var n=e.children[s],l=n.height;if(t<l){e=n;continue e}t-=l,i+=n.chunkSize()}return i}while(!e.lines);for(var o=0;o<e.lines.length;++o){var r=e.lines[o].height;if(t<r)break;t-=r}return i+o}function ue(e,t){return t>=e.first&&t<e.first+e.size}function me(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function pe(e,t,i){if(void 0===i&&(i=null),!(this instanceof pe))return new pe(e,t,i);this.line=e,this.ch=t,this.sticky=i}function ge(e,t){return e.line-t.line||e.ch-t.ch}function fe(e,t){return e.sticky==t.sticky&&0==ge(e,t)}function _e(e){return pe(e.line,e.ch)}function ve(e,t){return ge(e,t)<0?t:e}function be(e,t){return ge(e,t)<0?e:t}function we(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ce(e,t){if(t.line<e.first)return pe(e.first,0);var i,s,n,l=e.first+e.size-1;return t.line>l?pe(l,oe(e,l).text.length):(s=oe(e,(i=t).line).text.length,null==(n=i.ch)||s<n?pe(i.line,s):n<0?pe(i.line,0):i)}function ye(e,t){for(var i=[],s=0;s<t.length;s++)i[s]=Ce(e,t[s]);return i}var Se=!1,xe=!1;function Te(e,t,i){this.marker=e,this.from=t,this.to=i}function ke(e,t){if(e)for(var i=0;i<e.length;++i){var s=e[i];if(s.marker==t)return s}}function De(e,t){for(var i,s=0;s<e.length;++s)e[s]!=t&&(i||(i=[])).push(e[s]);return i}function Ie(e,t){if(t.full)return null;var i=ue(e,t.from.line)&&oe(e,t.from.line).markedSpans,s=ue(e,t.to.line)&&oe(e,t.to.line).markedSpans;if(!i&&!s)return null;var n=t.from.ch,l=t.to.ch,o=0==ge(t.from,t.to),r=function(e,t,i){var s;if(e)for(var n=0;n<e.length;++n){var l=e[n],o=l.marker;if(null==l.from||(o.inclusiveLeft?l.from<=t:l.from<t)||l.from==t&&"bookmark"==o.type&&(!i||!l.marker.insertLeft)){var r=null==l.to||(o.inclusiveRight?l.to>=t:l.to>t);(s||(s=[])).push(new Te(o,l.from,r?null:l.to))}}return s}(i,n,o),a=function(e,t,i){var s;if(e)for(var n=0;n<e.length;++n){var l=e[n],o=l.marker;if(null==l.to||(o.inclusiveRight?l.to>=t:l.to>t)||l.from==t&&"bookmark"==o.type&&(!i||l.marker.insertLeft)){var r=null==l.from||(o.inclusiveLeft?l.from<=t:l.from<t);(s||(s=[])).push(new Te(o,r?null:l.from-t,null==l.to?null:l.to-t))}}return s}(s,l,o),d=1==t.text.length,h=K(t.text).length+(d?n:0);if(r)for(var c=0;c<r.length;++c){var u=r[c];if(null==u.to){var m=ke(a,u.marker);m?d&&(u.to=null==m.to?null:m.to+h):u.to=n}}if(a)for(var p=0;p<a.length;++p){var g=a[p];null!=g.to&&(g.to+=h),null==g.from?ke(r,g.marker)||(g.from=h,d&&(r||(r=[])).push(g)):(g.from+=h,d&&(r||(r=[])).push(g))}r&&(r=Oe(r)),a&&a!=r&&(a=Oe(a));var f=[r];if(!d){var _,v=t.text.length-2;if(0<v&&r)for(var b=0;b<r.length;++b)null==r[b].to&&(_||(_=[])).push(new Te(r[b].marker,null,null));for(var w=0;w<v;++w)f.push(_);f.push(a)}return f}function Oe(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ae(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Le(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Re(e){return e.inclusiveLeft?-1:0}function Ee(e){return e.inclusiveRight?1:0}function Ne(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var s=e.find(),n=t.find(),l=ge(s.from,n.from)||Re(e)-Re(t);return l?-l:ge(s.to,n.to)||Ee(e)-Ee(t)||t.id-e.id}function Me(e,t){var i,s=xe&&e.markedSpans;if(s)for(var n=void 0,l=0;l<s.length;++l)(n=s[l]).marker.collapsed&&null==(t?n.from:n.to)&&(!i||Ne(i,n.marker)<0)&&(i=n.marker);return i}function Pe(e){return Me(e,!0)}function Fe(e){return Me(e,!1)}function je(e,t){var i,s=xe&&e.markedSpans;if(s)for(var n=0;n<s.length;++n){var l=s[n];l.marker.collapsed&&(null==l.from||l.from<t)&&(null==l.to||l.to>t)&&(!i||Ne(i,l.marker)<0)&&(i=l.marker)}return i}function ze(e,t,i,s,n){var l=oe(e,t),o=xe&&l.markedSpans;if(o)for(var r=0;r<o.length;++r){var a=o[r];if(a.marker.collapsed){var d=a.marker.find(0),h=ge(d.from,i)||Re(a.marker)-Re(n),c=ge(d.to,s)||Ee(a.marker)-Ee(n);if(!(0<=h&&c<=0||h<=0&&0<=c)&&(h<=0&&(a.marker.inclusiveRight&&n.inclusiveLeft?0<=ge(d.to,i):0<ge(d.to,i))||0<=h&&(a.marker.inclusiveRight&&n.inclusiveLeft?ge(d.from,s)<=0:ge(d.from,s)<0)))return!0}}}function $e(e){for(var t;t=Pe(e);)e=t.find(-1,!0).line;return e}function He(e,t){var i=oe(e,t),s=$e(i);return i==s?t:he(s)}function Ve(e,t){if(t>e.lastLine())return t;var i,s=oe(e,t);if(!Ue(e,s))return t;for(;i=Fe(s);)s=i.find(1,!0).line;return he(s)+1}function Ue(e,t){var i=xe&&t.markedSpans;if(i)for(var s=void 0,n=0;n<i.length;++n)if((s=i[n]).marker.collapsed){if(null==s.from)return!0;if(!s.marker.widgetNode&&0==s.from&&s.marker.inclusiveLeft&&Be(e,t,s))return!0}}function Be(e,t,i){if(null==i.to){var s=i.marker.find(1,!0);return Be(e,s.line,ke(s.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,l=0;l<t.markedSpans.length;++l)if((n=t.markedSpans[l]).marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(null==n.to||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&Be(e,t,n))return!0}function We(e){for(var t=0,i=(e=$e(e)).parent,s=0;s<i.lines.length;++s){var n=i.lines[s];if(n==e)break;t+=n.height}for(var l=i.parent;l;l=(i=l).parent)for(var o=0;o<l.children.length;++o){var r=l.children[o];if(r==i)break;t+=r.height}return t}function qe(e){if(0==e.height)return 0;for(var t,i=e.text.length,s=e;t=Pe(s);){var n=t.find(0,!0);s=n.from.line,i+=n.from.ch-n.to.ch}for(s=e;t=Fe(s);){var l=t.find(0,!0);i-=s.text.length-l.from.ch,i+=(s=l.to.line).text.length-l.to.ch}return i}function Ge(e){var t=e.display,i=e.doc;t.maxLine=oe(i,i.first),t.maxLineLength=qe(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=qe(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}var Ke=null;function Ye(e,t,i){var s;Ke=null;for(var n=0;n<e.length;++n){var l=e[n];if(l.from<t&&l.to>t)return n;l.to==t&&(l.from!=l.to&&"before"==i?s=n:Ke=n),l.from==t&&(l.from!=l.to&&"before"!=i?s=n:Ke=n)}return null!=s?s:Ke}var Qe=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,i=/[LRr]/,s=/[Lb1n]/,n=/[1n]/;function l(e,t,i){this.level=e,this.from=t,this.to=i}return function(o,r){var a="ltr"==r?"L":"R";if(0==o.length||"ltr"==r&&!e.test(o))return!1;for(var d,h=o.length,c=[],u=0;u<h;++u)c.push((d=o.charCodeAt(u))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(d):1424<=d&&d<=1524?"R":1536<=d&&d<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(d-1536):1774<=d&&d<=2220?"r":8192<=d&&d<=8203?"w":8204==d?"b":"L");for(var m=0,p=a;m<h;++m){var g=c[m];"m"==g?c[m]=p:p=g}for(var f=0,_=a;f<h;++f){var v=c[f];"1"==v&&"r"==_?c[f]="n":i.test(v)&&"r"==(_=v)&&(c[f]="R")}for(var b=1,w=c[0];b<h-1;++b){var C=c[b];"+"==C&&"1"==w&&"1"==c[b+1]?c[b]="1":","!=C||w!=c[b+1]||"1"!=w&&"n"!=w||(c[b]=w),w=C}for(var y=0;y<h;++y){var S=c[y];if(","==S)c[y]="N";else if("%"==S){var x=void 0;for(x=y+1;x<h&&"%"==c[x];++x);for(var T=y&&"!"==c[y-1]||x<h&&"1"==c[x]?"1":"N",k=y;k<x;++k)c[k]=T;y=x-1}}for(var D=0,I=a;D<h;++D){var O=c[D];"L"==I&&"1"==O?c[D]="L":i.test(O)&&(I=O)}for(var A=0;A<h;++A)if(t.test(c[A])){var L=void 0;for(L=A+1;L<h&&t.test(c[L]);++L);for(var R="L"==(A?c[A-1]:a),E=R==("L"==(L<h?c[L]:a))?R?"L":"R":a,N=A;N<L;++N)c[N]=E;A=L-1}for(var M,P=[],F=0;F<h;)if(s.test(c[F])){var j=F;for(++F;F<h&&s.test(c[F]);++F);P.push(new l(0,j,F))}else{var z=F,$=P.length;for(++F;F<h&&"L"!=c[F];++F);for(var H=z;H<F;)if(n.test(c[H])){z<H&&P.splice($,0,new l(1,z,H));var V=H;for(++H;H<F&&n.test(c[H]);++H);P.splice($,0,new l(2,V,H)),z=H}else++H;z<F&&P.splice($,0,new l(1,z,F))}return"ltr"==r&&(1==P[0].level&&(M=o.match(/^\s+/))&&(P[0].from=M[0].length,P.unshift(new l(0,0,M[0].length))),1==K(P).level&&(M=o.match(/\s+$/))&&(K(P).to-=M[0].length,P.push(new l(0,h-M[0].length,h)))),"rtl"==r?P.reverse():P}}();function Je(e,t){var i=e.order;return null==i&&(i=e.order=Qe(e.text,t)),i}var Xe=[],Ze=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var s=e._handlers||(e._handlers={});s[t]=(s[t]||Xe).concat(i)}};function et(e,t){return e._handlers&&e._handlers[t]||Xe}function tt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var s=e._handlers,n=s&&s[t];if(n){var l=$(n,i);-1<l&&(s[t]=n.slice(0,l).concat(n.slice(l+1)))}}}function it(e,t){var i=et(e,t);if(i.length)for(var s=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,s)}function st(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,i||t.type,e,t),dt(t)||t.codemirrorIgnore}function nt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),s=0;s<t.length;++s)-1==$(i,t[s])&&i.push(t[s])}function lt(e,t){return 0<et(e,t).length}function ot(e){e.prototype.on=function(e,t){Ze(this,e,t)},e.prototype.off=function(e,t){tt(this,e,t)}}function rt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function at(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function dt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ht(e){rt(e),at(e)}function ct(e){return e.target||e.srcElement}function ut(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),v&&e.ctrlKey&&1==t&&(t=3),t}var mt,pt,gt=function(){if(o&&r<9)return!1;var e=O("div");return"draggable"in e||"dragDrop"in e}();function ft(e){if(null==mt){var t=O("span","​");I(e,O("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mt=t.offsetWidth<=1&&2<t.offsetHeight&&!(o&&r<8))}var i=mt?O("span","​"):O("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function _t(e){if(null!=pt)return pt;var t=I(e,document.createTextNode("AخA")),i=T(t,0,1).getBoundingClientRect(),s=T(t,1,2).getBoundingClientRect();return D(e),!(!i||i.left==i.right)&&(pt=s.right-i.right<3)}var vt,bt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],s=e.length;t<=s;){var n=e.indexOf("\n",t);-1==n&&(n=e.length);var l=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),o=l.indexOf("\r");-1!=o?(i.push(l.slice(0,o)),t+=o+1):(i.push(l),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},wt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ct="oncopy"in(vt=O("div"))||(vt.setAttribute("oncopy","return;"),"function"==typeof vt.oncopy),yt=null,St={},xt={};function Tt(e){if("string"==typeof e&&xt.hasOwnProperty(e))e=xt[e];else if(e&&"string"==typeof e.name&&xt.hasOwnProperty(e.name)){var t=xt[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Tt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Tt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function kt(e,t){t=Tt(t);var i=St[t.name];if(!i)return kt(e,"text/plain");var s=i(e,t);if(Dt.hasOwnProperty(t.name)){var n=Dt[t.name];for(var l in n)n.hasOwnProperty(l)&&(s.hasOwnProperty(l)&&(s["_"+l]=s[l]),s[l]=n[l])}if(s.name=t.name,t.helperType&&(s.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)s[o]=t.modeProps[o];return s}var Dt={};function It(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var s in t){var n=t[s];n instanceof Array&&(n=n.concat([])),i[s]=n}return i}function Ot(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function At(e,t,i){return!e.startState||e.startState(t,i)}var Lt=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Lt.prototype.eol=function(){return this.pos>=this.string.length},Lt.prototype.sol=function(){return this.pos==this.lineStart},Lt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Lt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Lt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Lt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Lt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Lt.prototype.skipToEnd=function(){this.pos=this.string.length},Lt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},Lt.prototype.backUp=function(e){this.pos-=e},Lt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=j(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Lt.prototype.indentation=function(){return j(this.string,null,this.tabSize)-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Lt.prototype.match=function(e,t,i){if("string"!=typeof e){var s=this.string.slice(this.pos).match(e);return s&&0<s.index?null:(s&&!1!==t&&(this.pos+=s[0].length),s)}var n=function(e){return i?e.toLowerCase():e};if(n(this.string.substr(this.pos,e.length))==n(e))return!1!==t&&(this.pos+=e.length),!0},Lt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Lt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Lt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Lt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Rt=function(e,t){this.state=e,this.lookAhead=t},Et=function(e,t,i,s){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=s||0,this.baseTokens=null,this.baseTokenPos=1};function Nt(e,t,i,s){var n=[e.state.modeGen],l={};Ut(e,t.text,e.doc.mode,i,function(e,t){return n.push(e,t)},l,s);for(var o=i.state,r=function(s){i.baseTokens=n;var r=e.state.overlays[s],a=1,d=0;i.state=!0,Ut(e,t.text,r.mode,i,function(e,t){for(var i=a;d<e;){var s=n[a];e<s&&n.splice(a,1,e,n[a+1],s),a+=2,d=Math.min(e,s)}if(t)if(r.opaque)n.splice(i,a-i,e,"overlay "+t),a=i+2;else for(;i<a;i+=2){var l=n[i+1];n[i+1]=(l?l+" ":"")+"overlay "+t}},l),i.state=o,i.baseTokens=null,i.baseTokenPos=1},a=0;a<e.state.overlays.length;++a)r(a);return{styles:n,classes:l.bgClass||l.textClass?l:null}}function Mt(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var s=Pt(e,he(t)),n=t.text.length>e.options.maxHighlightLength&&It(e.doc.mode,s.state),l=Nt(e,t,s);n&&(s.state=n),t.stateAfter=s.save(!n),t.styles=l.styles,l.classes?t.styleClasses=l.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Pt(e,t,i){var s=e.doc,n=e.display;if(!s.mode.startState)return new Et(s,!0,t);var l=function(e,t,i){for(var s,n,l=e.doc,o=i?-1:t-(e.doc.mode.innerMode?1e3:100),r=t;o<r;--r){if(r<=l.first)return l.first;var a=oe(l,r-1),d=a.stateAfter;if(d&&(!i||r+(d instanceof Rt?d.lookAhead:0)<=l.modeFrontier))return r;var h=j(a.text,null,e.options.tabSize);(null==n||h<s)&&(n=r-1,s=h)}return n}(e,t,i),o=l>s.first&&oe(s,l-1).stateAfter,r=o?Et.fromSaved(s,o,l):new Et(s,At(s.mode),l);return s.iter(l,t,function(i){Ft(e,i.text,r);var s=r.line;i.stateAfter=s==t-1||s%5==0||s>=n.viewFrom&&s<n.viewTo?r.save():null,r.nextLine()}),i&&(s.modeFrontier=r.line),r}function Ft(e,t,i,s){var n=e.doc.mode,l=new Lt(t,e.options.tabSize,i);for(l.start=l.pos=s||0,""==t&&jt(n,i.state);!l.eol();)zt(n,l,i.state),l.start=l.pos}function jt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=Ot(e,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function zt(e,t,i,s){for(var n=0;n<10;n++){s&&(s[0]=Ot(e,i).mode);var l=e.token(t,i);if(t.pos>t.start)return l}throw new Error("Mode "+e.name+" failed to advance stream.")}Et.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Et.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Et.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Et.fromSaved=function(e,t,i){return t instanceof Rt?new Et(e,It(e.mode,t.state),i,t.lookAhead):new Et(e,It(e.mode,t),i)},Et.prototype.save=function(e){var t=!1!==e?It(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Rt(t,this.maxLookAhead):t};var $t=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Ht(e,t,i,s){var n,l,o=e.doc,r=o.mode,a=oe(o,(t=Ce(o,t)).line),d=Pt(e,t.line,i),h=new Lt(a.text,e.options.tabSize,d);for(s&&(l=[]);(s||h.pos<t.ch)&&!h.eol();)h.start=h.pos,n=zt(r,h,d.state),s&&l.push(new $t(h,n,It(o.mode,d.state)));return s?l:new $t(h,n,d.state)}function Vt(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var s=i[1]?"bgClass":"textClass";null==t[s]?t[s]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[s])||(t[s]+=" "+i[2])}return e}function Ut(e,t,i,s,n,l,o){var r=i.flattenSpans;null==r&&(r=e.options.flattenSpans);var a,d=0,h=null,c=new Lt(t,e.options.tabSize,s),u=e.options.addModeClass&&[null];for(""==t&&Vt(jt(i,s.state),l);!c.eol();){if(a=c.pos>e.options.maxHighlightLength?(r=!1,o&&Ft(e,t,s,c.pos),c.pos=t.length,null):Vt(zt(i,c,s.state,u),l),u){var m=u[0].name;m&&(a="m-"+(a?m+" "+a:m))}if(!r||h!=a){for(;d<c.start;)n(d=Math.min(c.start,d+5e3),h);h=a}c.start=c.pos}for(;d<c.pos;){var p=Math.min(c.pos,d+5e3);n(p,h),d=p}}var Bt=function(e,t,i){this.text=e,Le(this,t),this.height=i?i(this):1};Bt.prototype.lineNo=function(){return he(this)},ot(Bt);var Wt={},qt={};function Gt(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?qt:Wt;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Kt(e,t){var i=A("span",null,null,a?"padding-right: .1px":null),s={pre:A("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var l=n?t.rest[n-1]:t.line,o=void 0;s.pos=0,s.addToken=Qt,_t(e.display.measure)&&(o=Je(l,e.doc.direction))&&(s.addToken=Jt(s.addToken,o)),s.map=[],Zt(l,s,Mt(e,l,t!=e.display.externalMeasured&&he(l))),l.styleClasses&&(l.styleClasses.bgClass&&(s.bgClass=N(l.styleClasses.bgClass,s.bgClass||"")),l.styleClasses.textClass&&(s.textClass=N(l.styleClasses.textClass,s.textClass||""))),0==s.map.length&&s.map.push(0,0,s.content.appendChild(ft(e.display.measure))),0==n?(t.measure.map=s.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(s.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(a){var r=s.content.lastChild;(/\bcm-tab\b/.test(r.className)||r.querySelector&&r.querySelector(".cm-tab"))&&(s.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,s.pre),s.pre.className&&(s.textClass=N(s.pre.className,s.textClass||"")),s}function Yt(e){var t=O("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,i,s,n,l,a){if(t){var d,h=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var i=t,s="",n=0;n<e.length;n++){var l=e.charAt(n);" "!=l||!i||n!=e.length-1&&32!=e.charCodeAt(n+1)||(l=" "),s+=l,i=" "==l}return s}(t,e.trailingSpace):t,c=e.cm.state.specialChars,u=!1;if(c.test(t)){d=document.createDocumentFragment();for(var m=0;;){c.lastIndex=m;var p=c.exec(t),g=p?p.index-m:t.length-m;if(g){var f=document.createTextNode(h.slice(m,m+g));o&&r<9?d.appendChild(O("span",[f])):d.appendChild(f),e.map.push(e.pos,e.pos+g,f),e.col+=g,e.pos+=g}if(!p)break;m+=g+1;var _=void 0;if("\t"==p[0]){var v=e.cm.options.tabSize,b=v-e.col%v;(_=d.appendChild(O("span",G(b),"cm-tab"))).setAttribute("role","presentation"),_.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?(_=d.appendChild(O("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]):((_=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),o&&r<9?d.appendChild(O("span",[_])):d.appendChild(_)),e.col+=1;e.map.push(e.pos,e.pos+1,_),e.pos++}}else e.col+=t.length,d=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,d),o&&r<9&&(u=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),i||s||n||u||a){var w=i||"";s&&(w+=s),n&&(w+=n);var C=O("span",[d],w,a);return l&&(C.title=l),e.content.appendChild(C)}e.content.appendChild(d)}}function Jt(e,t){return function(i,s,n,l,o,r,a){n=n?n+" cm-force-border":"cm-force-border";for(var d=i.pos,h=d+s.length;;){for(var c=void 0,u=0;u<t.length&&!((c=t[u]).to>d&&c.from<=d);u++);if(c.to>=h)return e(i,s,n,l,o,r,a);e(i,s.slice(0,c.to-d),n,l,null,r,a),l=null,s=s.slice(c.to-d),d=c.to}}}function Xt(e,t,i,s){var n=!s&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!s&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function Zt(e,t,i){var s=e.markedSpans,n=e.text,l=0;if(s)for(var o,r,a,d,h,c,u,m=n.length,p=0,g=1,f="",_=0;;){if(_==p){a=d=h=c=r="",u=null,_=1/0;for(var v=[],b=void 0,w=0;w<s.length;++w){var C=s[w],y=C.marker;"bookmark"==y.type&&C.from==p&&y.widgetNode?v.push(y):C.from<=p&&(null==C.to||C.to>p||y.collapsed&&C.to==p&&C.from==p)?(null!=C.to&&C.to!=p&&_>C.to&&(_=C.to,d=""),y.className&&(a+=" "+y.className),y.css&&(r=(r?r+";":"")+y.css),y.startStyle&&C.from==p&&(h+=" "+y.startStyle),y.endStyle&&C.to==_&&(b||(b=[])).push(y.endStyle,C.to),y.title&&!c&&(c=y.title),y.collapsed&&(!u||Ne(u.marker,y)<0)&&(u=C)):C.from>p&&_>C.from&&(_=C.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==_&&(d+=" "+b[S]);if(!u||u.from==p)for(var x=0;x<v.length;++x)Xt(t,0,v[x]);if(u&&(u.from||0)==p){if(Xt(t,(null==u.to?m+1:u.to)-p,u.marker,null==u.from),null==u.to)return;u.to==p&&(u=!1)}}if(m<=p)break;for(var T=Math.min(m,_);;){if(f){var k=p+f.length;if(!u){var D=T<k?f.slice(0,T-p):f;t.addToken(t,D,o?o+a:a,h,p+D.length==_?d:"",c,r)}if(T<=k){f=f.slice(T-p),p=T;break}p=k,h=""}f=n.slice(l,l=i[g++]),o=Gt(i[g++],t.cm.options)}}else for(var I=1;I<i.length;I+=2)t.addToken(t,n.slice(l,l=i[I]),Gt(i[I+1],t.cm.options))}function ei(e,t,i){this.line=t,this.rest=function(e){for(var t,i;t=Fe(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}(t),this.size=this.rest?he(K(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Ue(e,t)}function ti(e,t,i){for(var s,n=[],l=t;l<i;l=s){var o=new ei(e.doc,oe(e.doc,l),l);s=l+o.size,n.push(o)}return n}var ii=null,si=null;function ni(e,t){var i=et(e,t);if(i.length){var s,n=Array.prototype.slice.call(arguments,2);ii?s=ii.delayedCallbacks:si?s=si:(s=si=[],setTimeout(li,0));for(var l=function(e){s.push(function(){return i[e].apply(null,n)})},o=0;o<i.length;++o)l(o)}}function li(){var e=si;si=null;for(var t=0;t<e.length;++t)e[t]()}function oi(e,t,i,s){for(var n=0;n<t.changes.length;n++){var l=t.changes[n];"text"==l?(o=e,a=(r=t).text.className,d=ai(o,r),r.text==r.node&&(r.node=d.pre),r.text.parentNode.replaceChild(d.pre,r.text),r.text=d.pre,d.bgClass!=r.bgClass||d.textClass!=r.textClass?(r.bgClass=d.bgClass,r.textClass=d.textClass,di(o,r)):a&&(r.text.className=a)):"gutter"==l?hi(e,t,i,s):"class"==l?di(e,t):"widget"==l&&ci(e,t,s)}var o,r,a,d;t.changes=null}function ri(e){return e.node==e.text&&(e.node=O("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&r<8&&(e.node.style.zIndex=2)),e.node}function ai(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Kt(e,t)}function di(e,t){!function(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var s=ri(t);t.background=s.insertBefore(O("div",null,i),s.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?ri(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function hi(e,t,i,s){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=ri(t);t.gutterBackground=O("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?s.fixedPos:-s.gutterTotalWidth)+"px; width: "+s.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var l=t.line.gutterMarkers;if(e.options.lineNumbers||l){var o=ri(t),r=t.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?s.fixedPos:-s.gutterTotalWidth)+"px");if(e.display.input.setUneditable(r),o.insertBefore(r,t.text),t.line.gutterClass&&(r.className+=" "+t.line.gutterClass),!e.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(t.lineNumber=r.appendChild(O("div",me(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+s.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),l)for(var a=0;a<e.options.gutters.length;++a){var d=e.options.gutters[a],h=l.hasOwnProperty(d)&&l[d];h&&r.appendChild(O("div",[h],"CodeMirror-gutter-elt","left: "+s.gutterLeft[d]+"px; width: "+s.gutterWidth[d]+"px"))}}}function ci(e,t,i){t.alignable&&(t.alignable=null);for(var s=t.node.firstChild,n=void 0;s;s=n)n=s.nextSibling,"CodeMirror-linewidget"==s.className&&t.node.removeChild(s);ui(e,t,i)}function ui(e,t,i){if(mi(e,t.line,t,i,!0),t.rest)for(var s=0;s<t.rest.length;s++)mi(e,t.rest[s],t,i,!1)}function mi(e,t,i,s,n){if(t.widgets)for(var l=ri(i),o=0,r=t.widgets;o<r.length;++o){var a=r[o],d=O("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||d.setAttribute("cm-ignore-events","true"),pi(a,d,i,s),e.display.input.setUneditable(d),n&&a.above?l.insertBefore(d,i.gutter||i.text):l.appendChild(d),ni(a,"redraw")}}function pi(e,t,i,s){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=s.wrapperWidth;t.style.left=s.fixedPos+"px",e.coverGutter||(n-=s.gutterTotalWidth,t.style.paddingLeft=s.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-s.gutterTotalWidth+"px"))}function gi(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!L(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),I(t.display.measure,O("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function fi(e,t){for(var i=ct(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function _i(e){return e.lineSpace.offsetTop}function vi(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function bi(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=I(e.measure,O("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,s={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(s.left)||isNaN(s.right)||(e.cachedPaddingH=s),s}function wi(e){return 30-e.display.nativeBarWidth}function Ci(e){return e.display.scroller.clientWidth-wi(e)-e.display.barWidth}function yi(e){return e.display.scroller.clientHeight-wi(e)-e.display.barHeight}function Si(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var s=0;s<e.rest.length;s++)if(e.rest[s]==t)return{map:e.measure.maps[s],cache:e.measure.caches[s]};for(var n=0;n<e.rest.length;n++)if(he(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function xi(e,t,i,s){return Di(e,ki(e,t),i,s)}function Ti(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[is(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function ki(e,t){var i=he(t),s=Ti(e,i);s&&!s.text?s=null:s&&s.changes&&(oi(e,s,i,Ji(e)),e.curOp.forceUpdate=!0),s||(s=function(e,t){var i=he(t=$e(t)),s=e.display.externalMeasured=new ei(e.doc,t,i);s.lineN=i;var n=s.built=Kt(e,s);return s.text=n.pre,I(e.display.lineMeasure,n.pre),s}(e,t));var n=Si(s,t,i);return{line:t,view:s,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Di(e,t,i,s,n){t.before&&(i=-1);var l,a=i+(s||"");return t.cache.hasOwnProperty(a)?l=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,i){var s=e.options.lineWrapping,n=s&&Ci(e);if(!t.measure.heights||s&&t.measure.width!=n){var l=t.measure.heights=[];if(s){t.measure.width=n;for(var o=t.text.firstChild.getClientRects(),r=0;r<o.length-1;r++){var a=o[r],d=o[r+1];2<Math.abs(a.bottom-d.bottom)&&l.push((a.bottom+d.top)/2-i.top)}}l.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),(l=function(e,t,i,s){var n,l=Ai(t.map,i,s),a=l.node,d=l.start,h=l.end,c=l.collapse;if(3==a.nodeType){for(var u=0;u<4;u++){for(;d&&se(t.line.text.charAt(l.coverStart+d));)--d;for(;l.coverStart+h<l.coverEnd&&se(t.line.text.charAt(l.coverStart+h));)++h;if((n=o&&r<9&&0==d&&h==l.coverEnd-l.coverStart?a.parentNode.getBoundingClientRect():Li(T(a,d,h).getClientRects(),s)).left||n.right||0==d)break;h=d,d-=1,c="right"}o&&r<11&&(n=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=yt)return yt;var t=I(e,O("span","x")),i=t.getBoundingClientRect(),s=T(t,0,1).getBoundingClientRect();return yt=1<Math.abs(i.left-s.left)}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,s=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*s,bottom:t.bottom*s}}(e.display.measure,n))}else{var m;0<d&&(c=s="right"),n=e.options.lineWrapping&&1<(m=a.getClientRects()).length?m["right"==s?m.length-1:0]:a.getBoundingClientRect()}if(o&&r<9&&!d&&(!n||!n.left&&!n.right)){var p=a.parentNode.getClientRects()[0];n=p?{left:p.left,right:p.left+Qi(e.display),top:p.top,bottom:p.bottom}:Oi}for(var g=n.top-t.rect.top,f=n.bottom-t.rect.top,_=(g+f)/2,v=t.view.measure.heights,b=0;b<v.length-1&&!(_<v[b]);b++);var w=b?v[b-1]:0,C=v[b],y={left:("right"==c?n.right:n.left)-t.rect.left,right:("left"==c?n.left:n.right)-t.rect.left,top:w,bottom:C};return n.left||n.right||(y.bogus=!0),e.options.singleCursorHeightPerLine||(y.rtop=g,y.rbottom=f),y}(e,t,i,s)).bogus||(t.cache[a]=l)),{left:l.left,right:l.right,top:n?l.rtop:l.top,bottom:n?l.rbottom:l.bottom}}var Ii,Oi={left:0,right:0,top:0,bottom:0};function Ai(e,t,i){for(var s,n,l,o,r,a,d=0;d<e.length;d+=3)if(r=e[d],a=e[d+1],t<r?(n=0,l=1,o="left"):t<a?l=1+(n=t-r):(d==e.length-3||t==a&&e[d+3]>t)&&(n=(l=a-r)-1,a<=t&&(o="right")),null!=n){if(s=e[d+2],r==a&&i==(s.insertLeft?"left":"right")&&(o=i),"left"==i&&0==n)for(;d&&e[d-2]==e[d-3]&&e[d-1].insertLeft;)s=e[2+(d-=3)],o="left";if("right"==i&&n==a-r)for(;d<e.length-3&&e[d+3]==e[d+4]&&!e[d+5].insertLeft;)s=e[(d+=3)+2],o="right";break}return{node:s,start:n,end:l,collapse:o,coverStart:r,coverEnd:a}}function Li(e,t){var i=Oi;if("left"==t)for(var s=0;s<e.length&&(i=e[s]).left==i.right;s++);else for(var n=e.length-1;0<=n&&(i=e[n]).left==i.right;n--);return i}function Ri(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ei(e){e.display.externalMeasure=null,D(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ri(e.display.view[t])}function Ni(e){Ei(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Mi(){return h&&f?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Pi(){return h&&f?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Fi(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=gi(e.widgets[i]));return t}function ji(e,t,i,s,n){if(!n){var l=Fi(t);i.top+=l,i.bottom+=l}if("line"==s)return i;s||(s="local");var o=We(t);if("local"==s?o+=_i(e.display):o-=e.display.viewOffset,"page"==s||"window"==s){var r=e.display.lineSpace.getBoundingClientRect();o+=r.top+("window"==s?0:Pi());var a=r.left+("window"==s?0:Mi());i.left+=a,i.right+=a}return i.top+=o,i.bottom+=o,i}function zi(e,t,i){if("div"==i)return t;var s=t.left,n=t.top;if("page"==i)s-=Mi(),n-=Pi();else if("local"==i||!i){var l=e.display.sizer.getBoundingClientRect();s+=l.left,n+=l.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:s-o.left,top:n-o.top}}function $i(e,t,i,s,n){return s||(s=oe(e.doc,t.line)),ji(e,s,xi(e,s,t.ch,n),i)}function Hi(e,t,i,s,n,l){function o(t,o){var r=Di(e,n,t,o?"right":"left",l);return o?r.left=r.right:r.right=r.left,ji(e,s,r,i)}s=s||oe(e.doc,t.line),n||(n=ki(e,s));var r=Je(s,e.doc.direction),a=t.ch,d=t.sticky;if(a>=s.text.length?(a=s.text.length,d="before"):a<=0&&(a=0,d="after"),!r)return o("before"==d?a-1:a,"before"==d);function h(e,t,i){return o(i?e-1:e,1==r[t].level!=i)}var c=Ye(r,a,d),u=Ke,m=h(a,c,"before"==d);return null!=u&&(m.other=h(a,u,"before"!=d)),m}function Vi(e,t){var i=0;t=Ce(e.doc,t),e.options.lineWrapping||(i=Qi(e.display)*t.ch);var s=oe(e.doc,t.line),n=We(s)+_i(e.display);return{left:i,right:i,top:n,bottom:n+s.height}}function Ui(e,t,i,s,n){var l=pe(e,t,i);return l.xRel=n,s&&(l.outside=!0),l}function Bi(e,t,i){var s=e.doc;if((i+=e.display.viewOffset)<0)return Ui(s.first,0,null,!0,-1);var n=ce(s,i),l=s.first+s.size-1;if(l<n)return Ui(s.first+s.size-1,oe(s,l).text.length,null,!0,1);t<0&&(t=0);for(var o=oe(s,n);;){var r=Ki(e,o,n,t,i),a=je(o,r.ch+(0<r.xRel?1:0));if(!a)return r;var d=a.find(1);if(d.line==n)return d;o=oe(s,n=d.line)}}function Wi(e,t,i,s){s-=Fi(t);var n=t.text.length,l=le(function(t){return Di(e,i,t-1).bottom<=s},n,0);return{begin:l,end:n=le(function(t){return Di(e,i,t).top>s},l,n)}}function qi(e,t,i,s){return i||(i=ki(e,t)),Wi(e,t,i,ji(e,t,Di(e,i,s),"line").top)}function Gi(e,t,i,s){return!(e.bottom<=i)&&(e.top>i||(s?e.left:e.right)>t)}function Ki(e,t,i,s,n){n-=We(t);var l=ki(e,t),o=Fi(t),r=0,a=t.text.length,d=!0,h=Je(t,e.doc.direction);if(h){var c=(e.options.lineWrapping?function(e,t,i,s,n,l,o){var r=Wi(e,t,s,o),a=r.begin,d=r.end;/\s/.test(t.text.charAt(d-1))&&d--;for(var h=null,c=null,u=0;u<n.length;u++){var m=n[u];if(!(m.from>=d||m.to<=a)){var p=Di(e,s,1!=m.level?Math.min(d,m.to)-1:Math.max(a,m.from)).right,g=p<l?l-p+1e9:p-l;(!h||g<c)&&(h=m,c=g)}}return h||(h=n[n.length-1]),h.from<a&&(h={from:a,to:h.to,level:h.level}),h.to>d&&(h={from:h.from,to:d,level:h.level}),h}:function(e,t,i,s,n,l,o){var r=le(function(r){var a=n[r],d=1!=a.level;return Gi(Hi(e,pe(i,d?a.to:a.from,d?"before":"after"),"line",t,s),l,o,!0)},0,n.length-1),a=n[r];if(0<r){var d=1!=a.level,h=Hi(e,pe(i,d?a.from:a.to,d?"after":"before"),"line",t,s);Gi(h,l,o,!0)&&h.top>o&&(a=n[r-1])}return a})(e,t,i,l,h,s,n);r=(d=1!=c.level)?c.from:c.to-1,a=d?c.to:c.from-1}var u,m,p=null,g=null,f=le(function(t){var i=Di(e,l,t);return i.top+=o,i.bottom+=o,!!Gi(i,s,n,!1)&&(i.top<=n&&i.left<=s&&(p=t,g=i),!0)},r,a),_=!1;if(g){var v=s-g.left<g.right-s,b=v==d;f=p+(b?0:1),m=b?"after":"before",u=v?g.left:g.right}else{d||f!=a&&f!=r||f++,m=0==f?"after":f==t.text.length?"before":Di(e,l,f-(d?1:0)).bottom+o<=n==d?"after":"before";var w=Hi(e,pe(i,f,m),"line",t,l);u=w.left,_=n<w.top||n>=w.bottom}return Ui(i,f=ne(t.text,f,1),m,_,s-u)}function Yi(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ii){Ii=O("pre");for(var t=0;t<49;++t)Ii.appendChild(document.createTextNode("x")),Ii.appendChild(O("br"));Ii.appendChild(document.createTextNode("x"))}I(e.measure,Ii);var i=Ii.offsetHeight/50;return 3<i&&(e.cachedTextHeight=i),D(e.measure),i||1}function Qi(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=O("span","xxxxxxxxxx"),i=O("pre",[t]);I(e.measure,i);var s=t.getBoundingClientRect(),n=(s.right-s.left)/10;return 2<n&&(e.cachedCharWidth=n),n||10}function Ji(e){for(var t=e.display,i={},s={},n=t.gutters.clientLeft,l=t.gutters.firstChild,o=0;l;l=l.nextSibling,++o)i[e.options.gutters[o]]=l.offsetLeft+l.clientLeft+n,s[e.options.gutters[o]]=l.clientWidth;return{fixedPos:Xi(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:s,wrapperWidth:t.wrapper.clientWidth}}function Xi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Zi(e){var t=Yi(e.display),i=e.options.lineWrapping,s=i&&Math.max(5,e.display.scroller.clientWidth/Qi(e.display)-3);return function(n){if(Ue(e.doc,n))return 0;var l=0;if(n.widgets)for(var o=0;o<n.widgets.length;o++)n.widgets[o].height&&(l+=n.widgets[o].height);return i?l+(Math.ceil(n.text.length/s)||1)*t:l+t}}function es(e){var t=e.doc,i=Zi(e);t.iter(function(e){var t=i(e);t!=e.height&&de(e,t)})}function ts(e,t,i,s){var n=e.display;if(!i&&"true"==ct(t).getAttribute("cm-not-content"))return null;var l,o,r=n.lineSpace.getBoundingClientRect();try{l=t.clientX-r.left,o=t.clientY-r.top}catch(t){return null}var a,d=Bi(e,l,o);if(s&&1==d.xRel&&(a=oe(e.doc,d.line).text).length==d.ch){var h=j(a,a.length,e.options.tabSize)-a.length;d=pe(d.line,Math.max(0,Math.round((l-bi(e.display).left)/Qi(e.display))-h))}return d}function is(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,s=0;s<i.length;s++)if((t-=i[s].size)<0)return s}function ss(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ns(e,t){void 0===t&&(t=!0);for(var i=e.doc,s={},n=s.cursors=document.createDocumentFragment(),l=s.selection=document.createDocumentFragment(),o=0;o<i.sel.ranges.length;o++)if(t||o!=i.sel.primIndex){var r=i.sel.ranges[o];if(!(r.from().line>=e.display.viewTo||r.to().line<e.display.viewFrom)){var a=r.empty();(a||e.options.showCursorWhenSelecting)&&ls(e,r.head,n),a||rs(e,r,l)}}return s}function ls(e,t,i){var s=Hi(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(O("div"," ","CodeMirror-cursor"));if(n.style.left=s.left+"px",n.style.top=s.top+"px",n.style.height=Math.max(0,s.bottom-s.top)*e.options.cursorHeight+"px",s.other){var l=i.appendChild(O("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));l.style.display="",l.style.left=s.other.left+"px",l.style.top=s.other.top+"px",l.style.height=.85*(s.other.bottom-s.other.top)+"px"}}function os(e,t){return e.top-t.top||e.left-t.left}function rs(e,t,i){var s=e.display,n=e.doc,l=document.createDocumentFragment(),o=bi(e.display),r=o.left,a=Math.max(s.sizerWidth,Ci(e)-s.sizer.offsetLeft)-o.right,d="ltr"==n.direction;function h(e,t,i,s){t<0&&(t=0),t=Math.round(t),s=Math.round(s),l.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==i?a-e:i)+"px;\n                             height: "+(s-t)+"px"))}function c(t,i,s){var l,o,c=oe(n,t),u=c.text.length;function m(i,s){return $i(e,pe(t,i),"div",c,s)}function p(t,i,s){var n=qi(e,c,null,t),l="ltr"==i==("after"==s)?"left":"right";return m("after"==s?n.begin:n.end-(/\s/.test(c.text.charAt(n.end-1))?2:1),l)[l]}var g=Je(c,n.direction);return function(e,t,i,s){if(!e)return s(t,i,"ltr",0);for(var n=!1,l=0;l<e.length;++l){var o=e[l];(o.from<i&&o.to>t||t==i&&o.to==t)&&(s(Math.max(o.from,t),Math.min(o.to,i),1==o.level?"rtl":"ltr",l),n=!0)}n||s(t,i,"ltr")}(g,i||0,null==s?u:s,function(e,t,n,c){var f="ltr"==n,_=m(e,f?"left":"right"),v=m(t-1,f?"right":"left"),b=null==i&&0==e,w=null==s&&t==u,C=0==c,y=!g||c==g.length-1;if(v.top-_.top<=3){var S=(d?w:b)&&y,x=(d?b:w)&&C?r:(f?_:v).left,T=S?a:(f?v:_).right;h(x,_.top,T-x,_.bottom)}else{var k,D,I,O;O=f?(k=d&&b&&C?r:_.left,D=d?a:p(e,n,"before"),I=d?r:p(t,n,"after"),d&&w&&y?a:v.right):(k=d?p(e,n,"before"):r,D=!d&&b&&C?a:_.right,I=!d&&w&&y?r:v.left,d?p(t,n,"after"):a),h(k,_.top,D-k,_.bottom),_.bottom<v.top&&h(r,_.bottom,null,v.top),h(I,v.top,O-I,v.bottom)}(!l||os(_,l)<0)&&(l=_),os(v,l)<0&&(l=v),(!o||os(_,o)<0)&&(o=_),os(v,o)<0&&(o=v)}),{start:l,end:o}}var u=t.from(),m=t.to();if(u.line==m.line)c(u.line,u.ch,m.ch);else{var p=oe(n,u.line),g=oe(n,m.line),f=$e(p)==$e(g),_=c(u.line,u.ch,f?p.text.length+1:null).end,v=c(m.line,f?0:null,m.ch).start;f&&(_.top<v.top-2?(h(_.right,_.top,null,_.bottom),h(r,v.top,v.left,v.bottom)):h(_.right,_.top,v.left-_.right,_.bottom)),_.bottom<v.top&&h(r,_.bottom,null,v.top)}i.appendChild(l)}function as(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ds(e){e.state.focused||(e.display.input.focus(),cs(e))}function hs(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,us(e))},100)}function cs(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,E(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),a&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),as(e))}function us(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,k(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function ms(e){for(var t=e.display,i=t.lineDiv.offsetTop,s=0;s<t.view.length;s++){var n=t.view[s],l=void 0;if(!n.hidden){if(o&&r<8){var a=n.node.offsetTop+n.node.offsetHeight;l=a-i,i=a}else{var d=n.node.getBoundingClientRect();l=d.bottom-d.top}var h=n.line.height-l;if(l<2&&(l=Yi(t)),(.005<h||h<-.005)&&(de(n.line,l),ps(n.line),n.rest))for(var c=0;c<n.rest.length;c++)ps(n.rest[c])}}}function ps(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],s=i.node.parentNode;s&&(i.height=s.offsetHeight)}}function gs(e,t,i){var s=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;s=Math.floor(s-_i(e));var n=i&&null!=i.bottom?i.bottom:s+e.wrapper.clientHeight,l=ce(t,s),o=ce(t,n);if(i&&i.ensure){var r=i.ensure.from.line,a=i.ensure.to.line;r<l?o=ce(t,We(oe(t,l=r))+e.wrapper.clientHeight):Math.min(a,t.lastLine())>=o&&(l=ce(t,We(oe(t,a))-e.wrapper.clientHeight),o=a)}return{from:l,to:Math.max(o,l+1)}}function fs(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var s=Xi(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,l=s+"px",o=0;o<i.length;o++)if(!i[o].hidden){e.options.fixedGutter&&(i[o].gutter&&(i[o].gutter.style.left=l),i[o].gutterBackground&&(i[o].gutterBackground.style.left=l));var r=i[o].alignable;if(r)for(var a=0;a<r.length;a++)r[a].style.left=l}e.options.fixedGutter&&(t.gutters.style.left=s+n+"px")}}function _s(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=me(e.options,t.first+t.size-1),s=e.display;if(i.length==s.lineNumChars)return!1;var n=s.measure.appendChild(O("div",[O("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),l=n.firstChild.offsetWidth,o=n.offsetWidth-l;return s.lineGutter.style.width="",s.lineNumInnerWidth=Math.max(l,s.lineGutter.offsetWidth-o)+1,s.lineNumWidth=s.lineNumInnerWidth+o,s.lineNumChars=s.lineNumInnerWidth?i.length:-1,s.lineGutter.style.width=s.lineNumWidth+"px",en(e),!0}function vs(e,t){var i=e.display,s=Yi(e.display);t.top<0&&(t.top=0);var n=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:i.scroller.scrollTop,l=yi(e),o={};t.bottom-t.top>l&&(t.bottom=t.top+l);var r=e.doc.height+vi(i),a=t.top<s,d=t.bottom>r-s;if(t.top<n)o.scrollTop=a?0:t.top;else if(t.bottom>n+l){var h=Math.min(t.top,(d?r:t.bottom)-l);h!=n&&(o.scrollTop=h)}var c=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:i.scroller.scrollLeft,u=Ci(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),m=t.right-t.left>u;return m&&(t.right=t.left+u),t.left<10?o.scrollLeft=0:t.left<c?o.scrollLeft=Math.max(0,t.left-(m?0:10)):t.right>u+c-3&&(o.scrollLeft=t.right+(m?0:10)-u),o}function bs(e,t){null!=t&&(ys(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function ws(e){ys(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Cs(e,t,i){null==t&&null==i||ys(e),null!=t&&(e.curOp.scrollLeft=t),null!=i&&(e.curOp.scrollTop=i)}function ys(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ss(e,Vi(e,t.from),Vi(e,t.to),t.margin))}function Ss(e,t,i,s){var n=vs(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-s,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+s});Cs(e,n.scrollLeft,n.scrollTop)}function xs(e,t){Math.abs(e.doc.scrollTop-t)<2||(i||Zs(e,{top:t}),Ts(e,t,!0),i&&Zs(e),Ks(e,100))}function Ts(e,t,i){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function ks(e,t,i,s){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!s||(e.doc.scrollLeft=t,fs(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ds(e){var t=e.display,i=t.gutters.offsetWidth,s=Math.round(e.doc.height+vi(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:s,scrollHeight:s+wi(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var Is=function(e,t,i){this.cm=i;var s=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");s.tabIndex=n.tabIndex=-1,e(s),e(n),Ze(s,"scroll",function(){s.clientHeight&&t(s.scrollTop,"vertical")}),Ze(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,o&&r<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Is.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,s=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?s+"px":"0";var n=e.viewHeight-(t?s:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?s+"px":"0",this.horiz.style.left=e.barLeft+"px";var l=e.viewWidth-e.barLeft-(i?s:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+l)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<e.clientHeight&&(0==s&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?s:0,bottom:t?s:0}},Is.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Is.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Is.prototype.zeroWidthHack=function(){var e=v&&!m?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new z,this.disableVert=new z},Is.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto",t.set(1e3,function s(){var n=e.getBoundingClientRect();("vert"==i?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,s)})},Is.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Os=function(){};function As(e,t){t||(t=Ds(e));var i=e.display.barWidth,s=e.display.barHeight;Ls(e,t);for(var n=0;n<4&&i!=e.display.barWidth||s!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&ms(e),Ls(e,Ds(e)),i=e.display.barWidth,s=e.display.barHeight}function Ls(e,t){var i=e.display,s=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=s.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=s.bottom)+"px",i.heightForcer.style.borderBottom=s.bottom+"px solid transparent",s.right&&s.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=s.bottom+"px",i.scrollbarFiller.style.width=s.right+"px"):i.scrollbarFiller.style.display="",s.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=s.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}Os.prototype.update=function(){return{bottom:0,right:0}},Os.prototype.setScrollLeft=function(){},Os.prototype.setScrollTop=function(){},Os.prototype.clear=function(){};var Rs={native:Is,null:Os};function Es(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&k(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Rs[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ze(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){"horizontal"==i?ks(e,t):xs(e,t)},e),e.display.scrollbars.addClass&&E(e.display.wrapper,e.display.scrollbars.addClass)}var Ns=0;function Ms(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ns},t=e.curOp,ii?ii.ops.push(t):t.ownsGroup=ii={ops:[t],delayedCallbacks:[]}}function Ps(e){var t=e.curOp;t&&function(){var e=t.ownsGroup;if(e)try{!function(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var s=0;s<e.ops.length;s++){var n=e.ops[s];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}(e)}finally{ii=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,i=0;i<t.length;i++)void 0,l=void 0,r=(o=(s=t[i]).cm).display,!(l=(n=o).display).scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=wi(n)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=wi(n)+"px",l.scrollbarsClipped=!0),s.updateMaxLine&&Ge(o),s.mustUpdate=s.viewChanged||s.forceUpdate||null!=s.scrollTop||s.scrollToPos&&(s.scrollToPos.from.line<r.viewFrom||s.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&o.options.lineWrapping,s.update=s.mustUpdate&&new Qs(o,s.mustUpdate&&{top:s.scrollTop,ensure:s.scrollToPos},s.forceUpdate);for(var s,n,l,o,r,a,d,h,c,u=0;u<t.length;u++)(a=t[u]).updatedDisplay=a.mustUpdate&&Js(a.cm,a.update);for(var m=0;m<t.length;m++)h=void 0,c=void 0,c=(h=(d=t[m]).cm).display,d.updatedDisplay&&ms(h),d.barMeasure=Ds(h),c.maxLineChanged&&!h.options.lineWrapping&&(d.adjustWidthTo=xi(h,c.maxLine,c.maxLine.text.length).left+3,h.display.sizerWidth=d.adjustWidthTo,d.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+d.adjustWidthTo+wi(h)+h.display.barWidth),d.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+d.adjustWidthTo-Ci(h))),(d.updatedDisplay||d.selectionChanged)&&(d.preparedSelection=c.input.prepareSelection());for(var p=0;p<t.length;p++)Fs(t[p]);for(var g=0;g<t.length;g++)js(t[g])}(e)}(e)}}()}function Fs(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&ks(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==R();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&As(t,e.barMeasure),e.updatedDisplay&&tn(t,e.barMeasure),e.selectionChanged&&as(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&ds(e.cm)}function js(e){var t=e.cm,i=t.display,s=t.doc;e.updatedDisplay&&Xs(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&Ts(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&ks(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!st(e,"scrollCursorIntoView")){var i=e.display,s=i.sizer.getBoundingClientRect(),n=null;if(t.top+s.top<0?n=!0:t.bottom+s.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!p){var l=O("div","​",null,"position: absolute;\n                         top: "+(t.top-i.viewOffset-_i(e.display))+"px;\n                         height: "+(t.bottom-t.top+wi(e)+i.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(l),l.scrollIntoView(n),e.display.lineSpace.removeChild(l)}}}(t,function(e,t,i,s){var n;null==s&&(s=0),e.options.lineWrapping||t!=i||(i="before"==(t=t.ch?pe(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?pe(t.line,t.ch+1,"before"):t);for(var l=0;l<5;l++){var o=!1,r=Hi(e,t),a=i&&i!=t?Hi(e,i):r,d=vs(e,n={left:Math.min(r.left,a.left),top:Math.min(r.top,a.top)-s,right:Math.max(r.left,a.left),bottom:Math.max(r.bottom,a.bottom)+s}),h=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=d.scrollTop&&(xs(e,d.scrollTop),1<Math.abs(e.doc.scrollTop-h)&&(o=!0)),null!=d.scrollLeft&&(ks(e,d.scrollLeft),1<Math.abs(e.doc.scrollLeft-c)&&(o=!0)),!o)break}return n}(t,Ce(s,e.scrollToPos.from),Ce(s,e.scrollToPos.to),e.scrollToPos.margin));var n=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(n)for(var o=0;o<n.length;++o)n[o].lines.length||it(n[o],"hide");if(l)for(var r=0;r<l.length;++r)l[r].lines.length&&it(l[r],"unhide");i.wrapper.offsetHeight&&(s.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function zs(e,t){if(e.curOp)return t();Ms(e);try{return t()}finally{Ps(e)}}function $s(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ms(e);try{return t.apply(e,arguments)}finally{Ps(e)}}}function Hs(e){return function(){if(this.curOp)return e.apply(this,arguments);Ms(this);try{return e.apply(this,arguments)}finally{Ps(this)}}}function Vs(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ms(t);try{return e.apply(this,arguments)}finally{Ps(t)}}}function Us(e,t,i,s){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),s||(s=0);var n=e.display;if(s&&i<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)xe&&He(e.doc,t)<n.viewTo&&Ws(e);else if(i<=n.viewFrom)xe&&Ve(e.doc,i+s)>n.viewFrom?Ws(e):(n.viewFrom+=s,n.viewTo+=s);else if(t<=n.viewFrom&&i>=n.viewTo)Ws(e);else if(t<=n.viewFrom){var l=qs(e,i,i+s,1);l?(n.view=n.view.slice(l.index),n.viewFrom=l.lineN,n.viewTo+=s):Ws(e)}else if(i>=n.viewTo){var o=qs(e,t,t,-1);o?(n.view=n.view.slice(0,o.index),n.viewTo=o.lineN):Ws(e)}else{var r=qs(e,t,t,-1),a=qs(e,i,i+s,1);r&&a?(n.view=n.view.slice(0,r.index).concat(ti(e,r.lineN,a.lineN)).concat(n.view.slice(a.index)),n.viewTo+=s):Ws(e)}var d=n.externalMeasured;d&&(i<d.lineN?d.lineN+=s:t<d.lineN+d.size&&(n.externalMeasured=null))}function Bs(e,t,i){e.curOp.viewChanged=!0;var s=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(s.externalMeasured=null),!(t<s.viewFrom||t>=s.viewTo)){var l=s.view[is(e,t)];if(null!=l.node){var o=l.changes||(l.changes=[]);-1==$(o,i)&&o.push(i)}}}function Ws(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function qs(e,t,i,s){var n,l=is(e,t),o=e.display.view;if(!xe||i==e.doc.first+e.doc.size)return{index:l,lineN:i};for(var r=e.display.viewFrom,a=0;a<l;a++)r+=o[a].size;if(r!=t){if(0<s){if(l==o.length-1)return null;n=r+o[l].size-t,l++}else n=r-t;t+=n,i+=n}for(;He(e.doc,i)!=i;){if(l==(s<0?0:o.length-1))return null;i+=s*o[l-(s<0?1:0)].size,l+=s}return{index:l,lineN:i}}function Gs(e){for(var t=e.display.view,i=0,s=0;s<t.length;s++){var n=t[s];n.hidden||n.node&&!n.changes||++i}return i}function Ks(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,P(Ys,e))}function Ys(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,s=Pt(e,t.highlightFrontier),n=[];t.iter(s.line,Math.min(t.first+t.size,e.display.viewTo+500),function(l){if(s.line>=e.display.viewFrom){var o=l.styles,r=l.text.length>e.options.maxHighlightLength?It(t.mode,s.state):null,a=Nt(e,l,s,!0);r&&(s.state=r),l.styles=a.styles;var d=l.styleClasses,h=a.classes;h?l.styleClasses=h:d&&(l.styleClasses=null);for(var c=!o||o.length!=l.styles.length||d!=h&&(!d||!h||d.bgClass!=h.bgClass||d.textClass!=h.textClass),u=0;!c&&u<o.length;++u)c=o[u]!=l.styles[u];c&&n.push(s.line),l.stateAfter=s.save(),s.nextLine()}else l.text.length<=e.options.maxHighlightLength&&Ft(e,l.text,s),l.stateAfter=s.line%5==0?s.save():null,s.nextLine();if(+new Date>i)return Ks(e,e.options.workDelay),!0}),t.highlightFrontier=s.line,t.modeFrontier=Math.max(t.modeFrontier,s.line),n.length&&zs(e,function(){for(var t=0;t<n.length;t++)Bs(e,n[t],"text")})}}var Qs=function(e,t,i){var s=e.display;this.viewport=t,this.visible=gs(s,e.doc,t),this.editorIsHidden=!s.wrapper.offsetWidth,this.wrapperHeight=s.wrapper.clientHeight,this.wrapperWidth=s.wrapper.clientWidth,this.oldDisplayWidth=Ci(e),this.force=i,this.dims=Ji(e),this.events=[]};function Js(e,t){var i=e.display,s=e.doc;if(t.editorIsHidden)return Ws(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Gs(e))return!1;_s(e)&&(Ws(e),t.dims=Ji(e));var n=s.first+s.size,l=Math.max(t.visible.from-e.options.viewportMargin,s.first),o=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<l&&l-i.viewFrom<20&&(l=Math.max(s.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(n,i.viewTo)),xe&&(l=He(e.doc,l),o=Ve(e.doc,o));var r,d,h,c,u=l!=i.viewFrom||o!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;d=l,h=o,0==(c=(r=e).display).view.length||d>=c.viewTo||h<=c.viewFrom?(c.view=ti(r,d,h),c.viewFrom=d):(c.viewFrom>d?c.view=ti(r,d,c.viewFrom).concat(c.view):c.viewFrom<d&&(c.view=c.view.slice(is(r,d))),c.viewFrom=d,c.viewTo<h?c.view=c.view.concat(ti(r,c.viewTo,h)):c.viewTo>h&&(c.view=c.view.slice(0,is(r,h)))),c.viewTo=h,i.viewOffset=We(oe(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var m=Gs(e);if(!u&&0==m&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var p=function(e){if(e.hasFocus())return null;var t=R();if(!t||!L(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var s=window.getSelection();s.anchorNode&&s.extend&&L(e.display.lineDiv,s.anchorNode)&&(i.anchorNode=s.anchorNode,i.anchorOffset=s.anchorOffset,i.focusNode=s.focusNode,i.focusOffset=s.focusOffset)}return i}(e);return 4<m&&(i.lineDiv.style.display="none"),function(e,t,i){var s,n,l,o,r,d=e.display,h=e.options.lineNumbers,c=d.lineDiv,u=c.firstChild;function m(t){var i=t.nextSibling;return a&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var p=d.view,g=d.viewFrom,f=0;f<p.length;f++){var _=p[f];if(_.hidden);else if(_.node&&_.node.parentNode==c){for(;u!=_.node;)u=m(u);var b=h&&null!=t&&t<=g&&_.lineNumber;_.changes&&(-1<$(_.changes,"gutter")&&(b=!1),oi(e,_,g,i)),b&&(D(_.lineNumber),_.lineNumber.appendChild(document.createTextNode(me(e.options,g)))),u=_.node.nextSibling}else{var w=(l=g,o=i,r=ai(s=e,n=_),n.text=n.node=r.pre,r.bgClass&&(n.bgClass=r.bgClass),r.textClass&&(n.textClass=r.textClass),di(s,n),hi(s,n,l,o),ui(s,n,o),n.node);c.insertBefore(w,u)}g+=_.size}for(;u;)u=m(u)}(e,i.updateLineNumbers,t.dims),4<m&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(e){if(e&&e.activeElt&&e.activeElt!=R()&&(e.activeElt.focus(),e.anchorNode&&L(document.body,e.anchorNode)&&L(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}(p),D(i.cursorDiv),D(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,u&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Ks(e,400)),!(i.updateLineNumbers=null)}function Xs(e,t){for(var i=t.viewport,s=!0;(s&&e.options.lineWrapping&&t.oldDisplayWidth!=Ci(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+vi(e.display)-yi(e),i.top)}),t.visible=gs(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Js(e,t);s=!1){ms(e);var n=Ds(e);ss(e),As(e,n),tn(e,n),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Zs(e,t){var i=new Qs(e,t);if(Js(e,i)){ms(e),Xs(e,i);var s=Ds(e);ss(e),As(e,s),tn(e,s),i.finish()}}function en(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function tn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+wi(e)+"px"}function sn(e){var t=e.display.gutters,i=e.options.gutters;D(t);for(var s=0;s<i.length;++s){var n=i[s],l=t.appendChild(O("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&((e.display.lineGutter=l).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=s?"":"none",en(e)}function nn(e){var t=$(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}Qs.prototype.signal=function(e,t){lt(e,t)&&this.events.push(arguments)},Qs.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var ln=0,on=null;function rn(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}}function an(e,t){var s=rn(t),n=s.x,l=s.y,o=e.display,r=o.scroller,d=r.scrollWidth>r.clientWidth,h=r.scrollHeight>r.clientHeight;if(n&&d||l&&h){if(l&&v&&a)e:for(var u=t.target,m=o.view;u!=r;u=u.parentNode)for(var p=0;p<m.length;p++)if(m[p].node==u){e.display.currentWheelTarget=u;break e}if(n&&!i&&!c&&null!=on)return l&&h&&xs(e,Math.max(0,r.scrollTop+l*on)),ks(e,Math.max(0,r.scrollLeft+n*on)),(!l||l&&h)&&rt(t),void(o.wheelStartX=null);if(l&&null!=on){var g=l*on,f=e.doc.scrollTop,_=f+o.wrapper.clientHeight;g<0?f=Math.max(0,f+g-50):_=Math.min(e.doc.height,_+g+50),Zs(e,{top:f,bottom:_})}ln<20&&(null==o.wheelStartX?(o.wheelStartX=r.scrollLeft,o.wheelStartY=r.scrollTop,o.wheelDX=n,o.wheelDY=l,setTimeout(function(){if(null!=o.wheelStartX){var e=r.scrollLeft-o.wheelStartX,t=r.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(on=(on*ln+i)/(ln+1),++ln)}},200)):(o.wheelDX+=n,o.wheelDY+=l))}}o?on=-.53:i?on=15:h?on=-.7:u&&(on=-1/3);var dn=function(e,t){this.ranges=e,this.primIndex=t};dn.prototype.primary=function(){return this.ranges[this.primIndex]},dn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],s=e.ranges[t];if(!fe(i.anchor,s.anchor)||!fe(i.head,s.head))return!1}return!0},dn.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new hn(_e(this.ranges[t].anchor),_e(this.ranges[t].head));return new dn(e,this.primIndex)},dn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},dn.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var s=this.ranges[i];if(0<=ge(t,s.from())&&ge(e,s.to())<=0)return i}return-1};var hn=function(e,t){this.anchor=e,this.head=t};function cn(e,t,i){var s=e&&e.options.selectionsMayTouch,n=t[i];t.sort(function(e,t){return ge(e.from(),t.from())}),i=$(t,n);for(var l=1;l<t.length;l++){var o=t[l],r=t[l-1],a=ge(r.to(),o.from());if(s&&!o.empty()?0<a:0<=a){var d=be(r.from(),o.from()),h=ve(r.to(),o.to()),c=r.empty()?o.from()==o.head:r.from()==r.head;l<=i&&--i,t.splice(--l,2,new hn(c?h:d,c?d:h))}}return new dn(t,i)}function un(e,t){return new dn([new hn(e,t||e)],0)}function mn(e){return e.text?pe(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function pn(e,t){if(ge(e,t.from)<0)return e;if(ge(e,t.to)<=0)return mn(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,s=e.ch;return e.line==t.to.line&&(s+=mn(t).ch-t.to.ch),pe(i,s)}function gn(e,t){for(var i=[],s=0;s<e.sel.ranges.length;s++){var n=e.sel.ranges[s];i.push(new hn(pn(n.anchor,t),pn(n.head,t)))}return cn(e.cm,i,e.sel.primIndex)}function fn(e,t,i){return e.line==t.line?pe(i.line,e.ch-t.ch+i.ch):pe(i.line+(e.line-t.line),e.ch)}function _n(e){e.doc.mode=kt(e.options,e.doc.modeOption),vn(e)}function vn(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Ks(e,100),e.state.modeGen++,e.curOp&&Us(e)}function bn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function wn(e,t,i,s){function n(e){return i?i[e]:null}function l(e,i,n){!function(e,t,i,s){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ae(e),Le(e,i);var n=s?s(e):1;n!=e.height&&de(e,n)}(e,i,n,s),ni(e,"change",e,t)}function o(e,t){for(var i=[],l=e;l<t;++l)i.push(new Bt(d[l],n(l),s));return i}var r=t.from,a=t.to,d=t.text,h=oe(e,r.line),c=oe(e,a.line),u=K(d),m=n(d.length-1),p=a.line-r.line;if(t.full)e.insert(0,o(0,d.length)),e.remove(d.length,e.size-d.length);else if(bn(e,t)){var g=o(0,d.length-1);l(c,c.text,m),p&&e.remove(r.line,p),g.length&&e.insert(r.line,g)}else if(h==c)if(1==d.length)l(h,h.text.slice(0,r.ch)+u+h.text.slice(a.ch),m);else{var f=o(1,d.length-1);f.push(new Bt(u+h.text.slice(a.ch),m,s)),l(h,h.text.slice(0,r.ch)+d[0],n(0)),e.insert(r.line+1,f)}else if(1==d.length)l(h,h.text.slice(0,r.ch)+d[0]+c.text.slice(a.ch),n(0)),e.remove(r.line+1,p);else{l(h,h.text.slice(0,r.ch)+d[0],n(0)),l(c,u+c.text.slice(a.ch),m);var _=o(1,d.length-1);1<p&&e.remove(r.line+1,p-1),e.insert(r.line+1,_)}ni(e,"change",e,t)}function Cn(e,t,i){!function e(s,n,l){if(s.linked)for(var o=0;o<s.linked.length;++o){var r=s.linked[o];if(r.doc!=n){var a=l&&r.sharedHist;i&&!a||(t(r.doc,a),e(r.doc,s,a))}}}(e,null,!0)}function yn(e,t){if(t.cm)throw new Error("This document is already in use.");es((e.doc=t).cm=e),_n(e),Sn(e),e.options.lineWrapping||Ge(e),e.options.mode=t.modeOption,Us(e)}function Sn(e){("rtl"==e.doc.direction?E:k)(e.display.lineDiv,"CodeMirror-rtl")}function xn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Tn(e,t){var i={from:_e(t.from),to:mn(t),text:re(e,t.from,t.to)};return On(e,i,t.from.line,t.to.line+1),Cn(e,function(e){return On(e,i,t.from.line,t.to.line+1)},!0),i}function kn(e){for(;e.length&&K(e).ranges;)e.pop()}function Dn(e,t,i,s){var n=e.history;n.undone.length=0;var l,o,r,a=+new Date;if((n.lastOp==s||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&n.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(l=(r=n).lastOp==s?(kn(r.done),K(r.done)):r.done.length&&!K(r.done).ranges?K(r.done):1<r.done.length&&!r.done[r.done.length-2].ranges?(r.done.pop(),K(r.done)):void 0))o=K(l.changes),0==ge(t.from,t.to)&&0==ge(t.from,o.to)?o.to=mn(t):l.changes.push(Tn(e,t));else{var d=K(n.done);for(d&&d.ranges||In(e.sel,n.done),l={changes:[Tn(e,t)],generation:n.generation},n.done.push(l);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=a,n.lastOp=n.lastSelOp=s,n.lastOrigin=n.lastSelOrigin=t.origin,o||it(e,"historyAdded")}function In(e,t){var i=K(t);i&&i.ranges&&i.equals(e)||t.push(e)}function On(e,t,i,s){var n=t["spans_"+e.id],l=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,s),function(i){i.markedSpans&&((n||(n=t["spans_"+e.id]={}))[l]=i.markedSpans),++l})}function An(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Ln(e,t){var i=function(t,i){var s=i["spans_"+e.id];if(!s)return null;for(var n=[],l=0;l<i.text.length;++l)n.push(An(s[l]));return n}(0,t),s=Ie(e,t);if(!i)return s;if(!s)return i;for(var n=0;n<i.length;++n){var l=i[n],o=s[n];if(l&&o)e:for(var r=0;r<o.length;++r){for(var a=o[r],d=0;d<l.length;++d)if(l[d].marker==a.marker)continue e;l.push(a)}else o&&(i[n]=o)}return i}function Rn(e,t,i){for(var s=[],n=0;n<e.length;++n){var l=e[n];if(l.ranges)s.push(i?dn.prototype.deepCopy.call(l):l);else{var o=l.changes,r=[];s.push({changes:r});for(var a=0;a<o.length;++a){var d=o[a],h=void 0;if(r.push({from:d.from,to:d.to,text:d.text}),t)for(var c in d)(h=c.match(/^spans_(\d+)$/))&&-1<$(t,Number(h[1]))&&(K(r)[c]=d[c],delete d[c])}}}return s}function En(e,t,i,s){if(s){var n=e.anchor;if(i){var l=ge(t,n)<0;l!=ge(i,n)<0?(n=t,t=i):l!=ge(t,i)<0&&(t=i)}return new hn(n,t)}return new hn(i||t,t)}function Nn(e,t,i,s,n){null==n&&(n=e.cm&&(e.cm.display.shift||e.extend)),zn(e,new dn([En(e.sel.primary(),t,i,n)],0),s)}function Mn(e,t,i){for(var s=[],n=e.cm&&(e.cm.display.shift||e.extend),l=0;l<e.sel.ranges.length;l++)s[l]=En(e.sel.ranges[l],t[l],null,n);zn(e,cn(e.cm,s,e.sel.primIndex),i)}function Pn(e,t,i,s){var n=e.sel.ranges.slice(0);n[t]=i,zn(e,cn(e.cm,n,e.sel.primIndex),s)}function Fn(e,t,i,s){zn(e,un(t,i),s)}function jn(e,t,i){var s=e.history.done,n=K(s);n&&n.ranges?$n(e,s[s.length-1]=t,i):zn(e,t,i)}function zn(e,t,i){var s,n,l,o,r,a,d,h,c,u,m;$n(e,t,i),s=e,n=e.sel,l=e.cm?e.cm.curOp.id:NaN,o=i,u=s.history,m=o&&o.origin,l==u.lastSelOp||m&&u.lastSelOrigin==m&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==m||(r=s,a=m,d=K(u.done),h=n,"*"==(c=a.charAt(0))||"+"==c&&d.ranges.length==h.ranges.length&&d.somethingSelected()==h.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)))?u.done[u.done.length-1]=n:In(n,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=m,u.lastSelOp=l,o&&!1!==o.clearRedo&&kn(u.undone)}function $n(e,t,i){var s,n,l,o;(lt(e,"beforeSelectionChange")||e.cm&&lt(e.cm,"beforeSelectionChange"))&&(s=e,l=i,o={ranges:(n=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new hn(Ce(s,e[t].anchor),Ce(s,e[t].head))},origin:l&&l.origin},it(s,"beforeSelectionChange",s,o),s.cm&&it(s.cm,"beforeSelectionChange",s.cm,o),t=o.ranges!=n.ranges?cn(s.cm,o.ranges,o.ranges.length-1):n),Hn(e,Un(e,t,i&&i.bias||(ge(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!e.cm||ws(e.cm)}function Hn(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,nt(e.cm)),ni(e,"cursorActivity",e))}function Vn(e){Hn(e,Un(e,e.sel,null,!1))}function Un(e,t,i,s){for(var n,l=0;l<t.ranges.length;l++){var o=t.ranges[l],r=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[l],a=Wn(e,o.anchor,r&&r.anchor,i,s),d=Wn(e,o.head,r&&r.head,i,s);(n||a!=o.anchor||d!=o.head)&&(n||(n=t.ranges.slice(0,l)),n[l]=new hn(a,d))}return n?cn(e.cm,n,t.primIndex):t}function Bn(e,t,i,s,n){var l=oe(e,t.line);if(l.markedSpans)for(var o=0;o<l.markedSpans.length;++o){var r=l.markedSpans[o],a=r.marker;if((null==r.from||(a.inclusiveLeft?r.from<=t.ch:r.from<t.ch))&&(null==r.to||(a.inclusiveRight?r.to>=t.ch:r.to>t.ch))){if(n&&(it(a,"beforeCursorEnter"),a.explicitlyCleared)){if(l.markedSpans){--o;continue}break}if(!a.atomic)continue;if(i){var d=a.find(s<0?1:-1),h=void 0;if((s<0?a.inclusiveRight:a.inclusiveLeft)&&(d=qn(e,d,-s,d&&d.line==t.line?l:null)),d&&d.line==t.line&&(h=ge(d,i))&&(s<0?h<0:0<h))return Bn(e,d,t,s,n)}var c=a.find(s<0?-1:1);return(s<0?a.inclusiveLeft:a.inclusiveRight)&&(c=qn(e,c,s,c.line==t.line?l:null)),c?Bn(e,c,t,s,n):null}}return t}function Wn(e,t,i,s,n){var l=s||1;return Bn(e,t,i,l,n)||!n&&Bn(e,t,i,l,!0)||Bn(e,t,i,-l,n)||!n&&Bn(e,t,i,-l,!0)||(e.cantEdit=!0,pe(e.first,0))}function qn(e,t,i,s){return i<0&&0==t.ch?t.line>e.first?Ce(e,pe(t.line-1)):null:0<i&&t.ch==(s||oe(e,t.line)).text.length?t.line<e.first+e.size-1?pe(t.line+1,0):null:new pe(t.line,t.ch+i)}function Gn(e){e.setSelection(pe(e.firstLine(),0),pe(e.lastLine()),V)}function Kn(e,t,i){var s={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return s.canceled=!0}};return i&&(s.update=function(t,i,n,l){t&&(s.from=Ce(e,t)),i&&(s.to=Ce(e,i)),n&&(s.text=n),void 0!==l&&(s.origin=l)}),it(e,"beforeChange",e,s),e.cm&&it(e.cm,"beforeChange",e.cm,s),s.canceled?null:{from:s.from,to:s.to,text:s.text,origin:s.origin}}function Yn(e,t,i){if(e.cm){if(!e.cm.curOp)return $s(e.cm,Yn)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(lt(e,"beforeChange")||e.cm&&lt(e.cm,"beforeChange"))||(t=Kn(e,t,!0))){var s=Se&&!i&&function(e,t,i){var s=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||s&&-1!=$(s,i)||(s||(s=[])).push(i)}}),!s)return null;for(var n=[{from:t,to:i}],l=0;l<s.length;++l)for(var o=s[l],r=o.find(0),a=0;a<n.length;++a){var d=n[a];if(!(ge(d.to,r.from)<0||0<ge(d.from,r.to))){var h=[a,1],c=ge(d.from,r.from),u=ge(d.to,r.to);(c<0||!o.inclusiveLeft&&!c)&&h.push({from:d.from,to:r.from}),(0<u||!o.inclusiveRight&&!u)&&h.push({from:r.to,to:d.to}),n.splice.apply(n,h),a+=h.length-3}}return n}(e,t.from,t.to);if(s)for(var n=s.length-1;0<=n;--n)Qn(e,{from:s[n].from,to:s[n].to,text:n?[""]:t.text,origin:t.origin});else Qn(e,t)}}function Qn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ge(t.from,t.to)){var i=gn(e,t);Dn(e,t,i,e.cm?e.cm.curOp.id:NaN),Zn(e,t,i,Ie(e,t));var s=[];Cn(e,function(e,i){i||-1!=$(s,e.history)||(sl(e.history,t),s.push(e.history)),Zn(e,t,null,Ie(e,t))})}}function Jn(e,t,i){var s=e.cm&&e.cm.state.suppressEdits;if(!s||i){for(var n,l=e.history,o=e.sel,r="undo"==t?l.done:l.undone,a="undo"==t?l.undone:l.done,d=0;d<r.length&&(n=r[d],i?!n.ranges||n.equals(e.sel):n.ranges);d++);if(d!=r.length){for(l.lastOrigin=l.lastSelOrigin=null;;){if(!(n=r.pop()).ranges){if(s)return void r.push(n);break}if(In(n,a),i&&!n.equals(e.sel))return void zn(e,n,{clearRedo:!1});o=n}var h=[];In(o,a),a.push({changes:h,generation:l.generation}),l.generation=n.generation||++l.maxGeneration;for(var c=lt(e,"beforeChange")||e.cm&&lt(e.cm,"beforeChange"),u=function(i){var s=n.changes[i];if(s.origin=t,c&&!Kn(e,s,!1))return r.length=0,{};h.push(Tn(e,s));var l=i?gn(e,s):K(r);Zn(e,s,l,Ln(e,s)),!i&&e.cm&&e.cm.scrollIntoView({from:s.from,to:mn(s)});var o=[];Cn(e,function(e,t){t||-1!=$(o,e.history)||(sl(e.history,s),o.push(e.history)),Zn(e,s,null,Ln(e,s))})},m=n.changes.length-1;0<=m;--m){var p=u(m);if(p)return p.v}}}}function Xn(e,t){if(0!=t&&(e.first+=t,e.sel=new dn(Y(e.sel.ranges,function(e){return new hn(pe(e.anchor.line+t,e.anchor.ch),pe(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Us(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,s=i.viewFrom;s<i.viewTo;s++)Bs(e.cm,s,"gutter")}}function Zn(e,t,i,s){if(e.cm&&!e.cm.curOp)return $s(e.cm,Zn)(e,t,i,s);if(t.to.line<e.first)Xn(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);Xn(e,n),t={from:pe(e.first,0),to:pe(t.to.line+n,t.to.ch),text:[K(t.text)],origin:t.origin}}var l=e.lastLine();t.to.line>l&&(t={from:t.from,to:pe(l,oe(e,l).text.length),text:[t.text[0]],origin:t.origin}),t.removed=re(e,t.from,t.to),i||(i=gn(e,t)),e.cm?function(e,t,i){var s=e.doc,n=e.display,l=t.from,o=t.to,r=!1,a=l.line;e.options.lineWrapping||(a=he($e(oe(s,l.line))),s.iter(a,o.line+1,function(e){if(e==n.maxLine)return r=!0})),-1<s.sel.contains(t.from,t.to)&&nt(e),wn(s,t,i,Zi(e)),e.options.lineWrapping||(s.iter(a,l.line+t.text.length,function(e){var t=qe(e);t>n.maxLineLength&&(n.maxLine=e,n.maxLineLength=t,n.maxLineChanged=!0,r=!1)}),r&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,s=t-1;i<s;s--){var n=oe(e,s).stateAfter;if(n&&(!(n instanceof Rt)||s+n.lookAhead<t)){i=s+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}(s,l.line),Ks(e,400);var d=t.text.length-(o.line-l.line)-1;t.full?Us(e):l.line!=o.line||1!=t.text.length||bn(e.doc,t)?Us(e,l.line,o.line+1,d):Bs(e,l.line,"text");var h=lt(e,"changes"),c=lt(e,"change");if(c||h){var u={from:l,to:o,text:t.text,removed:t.removed,origin:t.origin};c&&ni(e,"change",e,u),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(u)}e.display.selForContextMenu=null}(e.cm,t,s):wn(e,t,s),$n(e,i,V)}}function el(e,t,i,s,n){var l;s||(s=i),ge(s,i)<0&&(i=(l=[s,i])[0],s=l[1]),"string"==typeof t&&(t=e.splitLines(t)),Yn(e,{from:i,to:s,text:t,origin:n})}function tl(e,t,i,s){i<e.line?e.line+=s:t<e.line&&(e.line=t,e.ch=0)}function il(e,t,i,s){for(var n=0;n<e.length;++n){var l=e[n],o=!0;if(l.ranges){l.copied||((l=e[n]=l.deepCopy()).copied=!0);for(var r=0;r<l.ranges.length;r++)tl(l.ranges[r].anchor,t,i,s),tl(l.ranges[r].head,t,i,s)}else{for(var a=0;a<l.changes.length;++a){var d=l.changes[a];if(i<d.from.line)d.from=pe(d.from.line+s,d.from.ch),d.to=pe(d.to.line+s,d.to.ch);else if(t<=d.to.line){o=!1;break}}o||(e.splice(0,n+1),n=0)}}}function sl(e,t){var i=t.from.line,s=t.to.line,n=t.text.length-(s-i)-1;il(e.done,i,s,n),il(e.undone,i,s,n)}function nl(e,t,i,s){var n=t,l=t;return"number"==typeof t?l=oe(e,we(e,t)):n=he(t),null==n?null:(s(l,n)&&e.cm&&Bs(e.cm,n,i),l)}function ll(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function ol(e){this.children=e;for(var t=0,i=0,s=0;s<e.length;++s){var n=e[s];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}hn.prototype.from=function(){return be(this.anchor,this.head)},hn.prototype.to=function(){return ve(this.anchor,this.head)},hn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ll.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i,s=e,n=e+t;s<n;++s){var l=this.lines[s];this.height-=l.height,(i=l).parent=null,Ae(i),ni(l,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var s=0;s<t.length;++s)t[s].parent=this},iterN:function(e,t,i){for(var s=e+t;e<s;++e)if(i(this.lines[e]))return!0}},ol.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var s=this.children[i],n=s.chunkSize();if(e<n){var l=Math.min(t,n-e),o=s.height;if(s.removeInner(e,l),this.height-=o-s.height,n==l&&(this.children.splice(i--,1),s.parent=null),0==(t-=l))break;e=0}else e-=n}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof ll))){var r=[];this.collapse(r),this.children=[new ll(r)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var s=0;s<this.children.length;++s){var n=this.children[s],l=n.chunkSize();if(e<=l){if(n.insertInner(e,t,i),n.lines&&50<n.lines.length){for(var o=n.lines.length%25+25,r=o;r<n.lines.length;){var a=new ll(n.lines.slice(r,r+=25));n.height-=a.height,this.children.splice(++s,0,a),a.parent=this}n.lines=n.lines.slice(0,o),this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new ol(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var i=$(e.parent.children,e);e.parent.children.splice(i+1,0,t)}else{var s=new ol(e.children);(s.parent=e).children=[s,t],e=s}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var s=0;s<this.children.length;++s){var n=this.children[s],l=n.chunkSize();if(e<l){var o=Math.min(t,l-e);if(n.iterN(e,o,i))return!0;if(0==(t-=o))break;e=0}else e-=l}}};var rl=function(e,t,i){if(i)for(var s in i)i.hasOwnProperty(s)&&(this[s]=i[s]);this.doc=e,this.node=t};function al(e,t,i){We(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&bs(e,i)}rl.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,s=he(i);if(null!=s&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var l=gi(this);de(i,Math.max(0,i.height-l)),e&&(zs(e,function(){al(e,i,-l),Bs(e,s,"widget")}),ni(e,"lineWidgetCleared",e,this,s))}},rl.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,s=this.line;this.height=null;var n=gi(this)-t;n&&(Ue(this.doc,s)||de(s,s.height+n),i&&zs(i,function(){i.curOp.forceUpdate=!0,al(i,s,n),ni(i,"lineWidgetChanged",i,e,he(s))}))},ot(rl);var dl=0,hl=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++dl};function cl(e,t,i,s,n){if(s&&s.shared)return function(e,t,i,s,n){(s=F(s)).shared=!1;var l=[cl(e,t,i,s,n)],o=l[0],r=s.widgetNode;return Cn(e,function(e){r&&(s.widgetNode=r.cloneNode(!0)),l.push(cl(e,Ce(e,t),Ce(e,i),s,n));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=K(l)}),new ul(l,o)}(e,t,i,s,n);if(e.cm&&!e.cm.curOp)return $s(e.cm,cl)(e,t,i,s,n);var l=new hl(e,n),o=ge(t,i);if(s&&F(s,l,!1),0<o||0==o&&!1!==l.clearWhenEmpty)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=A("span",[l.replacedWith],"CodeMirror-widget"),s.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),s.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(ze(e,t.line,t,i,l)||t.line!=i.line&&ze(e,i.line,t,i,l))throw new Error("Inserting collapsed marker partially overlapping an existing one");xe=!0}l.addToHistory&&Dn(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var r,a=t.line,d=e.cm;if(e.iter(a,i.line+1,function(e){var s,n;d&&l.collapsed&&!d.options.lineWrapping&&$e(e)==d.display.maxLine&&(r=!0),l.collapsed&&a!=t.line&&de(e,0),s=e,n=new Te(l,a==t.line?t.ch:null,a==i.line?i.ch:null),s.markedSpans=s.markedSpans?s.markedSpans.concat([n]):[n],n.marker.attachLine(s),++a}),l.collapsed&&e.iter(t.line,i.line+1,function(t){Ue(e,t)&&de(t,0)}),l.clearOnEnter&&Ze(l,"beforeCursorEnter",function(){return l.clear()}),l.readOnly&&(Se=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++dl,l.atomic=!0),d){if(r&&(d.curOp.updateMaxLine=!0),l.collapsed)Us(d,t.line,i.line+1);else if(l.className||l.title||l.startStyle||l.endStyle||l.css)for(var h=t.line;h<=i.line;h++)Bs(d,h,"text");l.atomic&&Vn(d.doc),ni(d,"markerAdded",d,l)}return l}hl.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,i=t&&!t.curOp;if(i&&Ms(t),lt(this,"clear")){var s=this.find();s&&ni(this,"clear",s.from,s.to)}for(var n=null,l=null,o=0;o<this.lines.length;++o){var r=e.lines[o],a=ke(r.markedSpans,e);t&&!e.collapsed?Bs(t,he(r),"text"):t&&(null!=a.to&&(l=he(r)),null!=a.from&&(n=he(r))),r.markedSpans=De(r.markedSpans,a),null==a.from&&e.collapsed&&!Ue(e.doc,r)&&t&&de(r,Yi(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var d=0;d<this.lines.length;++d){var h=$e(e.lines[d]),c=qe(h);c>t.display.maxLineLength&&(t.display.maxLine=h,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&Us(t,n,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Vn(t.doc)),t&&ni(t,"markerCleared",t,this,n,l),i&&Ps(t),this.parent&&this.parent.clear()}},hl.prototype.find=function(e,t){var i,s;null==e&&"bookmark"==this.type&&(e=1);for(var n=0;n<this.lines.length;++n){var l=this.lines[n],o=ke(l.markedSpans,this);if(null!=o.from&&(i=pe(t?l:he(l),o.from),-1==e))return i;if(null!=o.to&&(s=pe(t?l:he(l),o.to),1==e))return s}return i&&{from:i,to:s}},hl.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,s=this.doc.cm;t&&s&&zs(s,function(){var n=t.line,l=he(t.line),o=Ti(s,l);if(o&&(Ri(o),s.curOp.selectionChanged=s.curOp.forceUpdate=!0),s.curOp.updateMaxLine=!0,!Ue(i.doc,n)&&null!=i.height){var r=i.height;i.height=null;var a=gi(i)-r;a&&de(n,n.height+a)}ni(s,"markerChanged",s,e)})},hl.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=$(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},hl.prototype.detachLine=function(e){if(this.lines.splice($(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ot(hl);var ul=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function ml(e){return e.findMarks(pe(e.first,0),e.clipPos(pe(e.lastLine())),function(e){return e.parent})}function pl(e){for(var t=function(t){var i=e[t],s=[i.primary.doc];Cn(i.primary.doc,function(e){return s.push(e)});for(var n=0;n<i.markers.length;n++){var l=i.markers[n];-1==$(s,l.doc)&&(l.parent=null,i.markers.splice(n--,1))}},i=0;i<e.length;i++)t(i)}ul.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ni(this,"clear")}},ul.prototype.find=function(e,t){return this.primary.find(e,t)},ot(ul);var gl=0,fl=function(e,t,i,s,n){if(!(this instanceof fl))return new fl(e,t,i,s,n);null==i&&(i=0),ol.call(this,[new ll([new Bt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var l=pe(i,0);this.sel=un(l),this.history=new xn(null),this.id=++gl,this.modeOption=t,this.lineSep=s,this.direction="rtl"==n?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),wn(this,{from:l,to:l,text:e}),zn(this,un(l),V)};fl.prototype=J(ol.prototype,{constructor:fl,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,s=0;s<t.length;++s)i+=t[s].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ae(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Vs(function(e){var t=pe(this.first,0),i=this.first+this.size-1;Yn(this,{from:t,to:pe(i,oe(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Cs(this.cm,0,0),zn(this,un(t),V)}),replaceRange:function(e,t,i,s){el(this,e,t=Ce(this,t),i=i?Ce(this,i):t,s)},getRange:function(e,t,i){var s=re(this,Ce(this,e),Ce(this,t));return!1===i?s:s.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ue(this,e))return oe(this,e)},getLineNumber:function(e){return he(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=oe(this,e)),$e(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ce(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Vs(function(e,t,i){Fn(this,Ce(this,"number"==typeof e?pe(e,t||0):e),null,i)}),setSelection:Vs(function(e,t,i){Fn(this,Ce(this,e),Ce(this,t||e),i)}),extendSelection:Vs(function(e,t,i){Nn(this,Ce(this,e),t&&Ce(this,t),i)}),extendSelections:Vs(function(e,t){Mn(this,ye(this,e),t)}),extendSelectionsBy:Vs(function(e,t){Mn(this,ye(this,Y(this.sel.ranges,e)),t)}),setSelections:Vs(function(e,t,i){if(e.length){for(var s=[],n=0;n<e.length;n++)s[n]=new hn(Ce(this,e[n].anchor),Ce(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),zn(this,cn(this.cm,s,t),i)}}),addSelection:Vs(function(e,t,i){var s=this.sel.ranges.slice(0);s.push(new hn(Ce(this,e),Ce(this,t||e))),zn(this,cn(this.cm,s,s.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,s=0;s<i.length;s++){var n=re(this,i[s].from(),i[s].to());t=t?t.concat(n):n}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,s=0;s<i.length;s++){var n=re(this,i[s].from(),i[s].to());!1!==e&&(n=n.join(e||this.lineSeparator())),t[s]=n}return t},replaceSelection:function(e,t,i){for(var s=[],n=0;n<this.sel.ranges.length;n++)s[n]=e;this.replaceSelections(s,t,i||"+input")},replaceSelections:Vs(function(e,t,i){for(var s=[],n=this.sel,l=0;l<n.ranges.length;l++){var o=n.ranges[l];s[l]={from:o.from(),to:o.to(),text:this.splitLines(e[l]),origin:i}}for(var r=t&&"end"!=t&&function(e,t,i){for(var s=[],n=pe(e.first,0),l=n,o=0;o<t.length;o++){var r=t[o],a=fn(r.from,n,l),d=fn(mn(r),n,l);if(n=r.to,l=d,"around"==i){var h=e.sel.ranges[o],c=ge(h.head,h.anchor)<0;s[o]=new hn(c?d:a,c?a:d)}else s[o]=new hn(a,a)}return new dn(s,e.sel.primIndex)}(this,s,t),a=s.length-1;0<=a;a--)Yn(this,s[a]);r?jn(this,r):this.cm&&ws(this.cm)}),undo:Vs(function(){Jn(this,"undo")}),redo:Vs(function(){Jn(this,"redo")}),undoSelection:Vs(function(){Jn(this,"undo",!0)}),redoSelection:Vs(function(){Jn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,s=0;s<e.done.length;s++)e.done[s].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new xn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Rn(this.history.done),undone:Rn(this.history.undone)}},setHistory:function(e){var t=this.history=new xn(this.history.maxGeneration);t.done=Rn(e.done.slice(0),null,!0),t.undone=Rn(e.undone.slice(0),null,!0)},setGutterMarker:Vs(function(e,t,i){return nl(this,e,"gutter",function(e){var s=e.gutterMarkers||(e.gutterMarkers={});return!(s[t]=i)&&te(s)&&(e.gutterMarkers=null),!0})}),clearGutter:Vs(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&nl(t,i,"gutter",function(){return i.gutterMarkers[e]=null,te(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!ue(this,e))return null;if(!(e=oe(this,t=e)))return null}else if(null==(t=he(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Vs(function(e,t,i){return nl(this,e,"gutter"==t?"gutter":"class",function(e){var s="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[s]){if(x(i).test(e[s]))return!1;e[s]+=" "+i}else e[s]=i;return!0})}),removeLineClass:Vs(function(e,t,i){return nl(this,e,"gutter"==t?"gutter":"class",function(e){var s="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",n=e[s];if(!n)return!1;if(null==i)e[s]=null;else{var l=n.match(x(i));if(!l)return!1;var o=l.index+l[0].length;e[s]=n.slice(0,l.index)+(l.index&&o!=n.length?" ":"")+n.slice(o)||null}return!0})}),addLineWidget:Vs(function(e,t,i){return n=e,l=new rl(s=this,t,i),(o=s.cm)&&l.noHScroll&&(o.display.alignWidgets=!0),nl(s,n,"widget",function(e){var t=e.widgets||(e.widgets=[]);if(null==l.insertAt?t.push(l):t.splice(Math.min(t.length-1,Math.max(0,l.insertAt)),0,l),l.line=e,o&&!Ue(s,e)){var i=We(e)<s.scrollTop;de(e,e.height+gi(l)),i&&bs(o,l.height),o.curOp.forceUpdate=!0}return!0}),o&&ni(o,"lineWidgetAdded",o,l,"number"==typeof n?n:he(n)),l;var s,n,l,o}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return cl(this,Ce(this,e),Ce(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return cl(this,e=Ce(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=oe(this,(e=Ce(this,e)).line).markedSpans;if(i)for(var s=0;s<i.length;++s){var n=i[s];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=Ce(this,e),t=Ce(this,t);var s=[],n=e.line;return this.iter(e.line,t.line+1,function(l){var o=l.markedSpans;if(o)for(var r=0;r<o.length;r++){var a=o[r];null!=a.to&&n==e.line&&e.ch>=a.to||null==a.from&&n!=e.line||null!=a.from&&n==t.line&&a.from>=t.ch||i&&!i(a.marker)||s.push(a.marker.parent||a.marker)}++n}),s},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var s=0;s<i.length;++s)null!=i[s].from&&e.push(i[s].marker)}),e},posFromIndex:function(e){var t,i=this.first,s=this.lineSeparator().length;return this.iter(function(n){var l=n.text.length+s;if(e<l)return t=e,!0;e-=l,++i}),Ce(this,pe(i,t))},indexFromPos:function(e){var t=(e=Ce(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+i}),t},copy:function(e){var t=new fl(ae(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var s=new fl(ae(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(s.history=this.history),(this.linked||(this.linked=[])).push({doc:s,sharedHist:e.sharedHist}),s.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i],n=s.find(),l=e.clipPos(n.from),o=e.clipPos(n.to);if(ge(l,o)){var r=cl(e,l,o,s.primary,s.primary.type);s.markers.push(r),r.parent=s}}}(s,ml(this)),s},unlinkDoc:function(e){if(e instanceof co&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),pl(ml(this));break}if(e.history==this.history){var i=[e.id];Cn(e,function(e){return i.push(e.id)},!0),e.history=new xn(null),e.history.done=Rn(this.history.done,i),e.history.undone=Rn(this.history.undone,i)}},iterLinkedDocs:function(e){Cn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):bt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Vs(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&zs(t=this.cm,function(){Sn(t),Us(t)}))})}),fl.prototype.eachLine=fl.prototype.iter;var _l=0;function vl(e){var t=this;if(bl(t),!st(t,e)&&!fi(t.display,e)){rt(e),o&&(_l=+new Date);var i=ts(t,e,!0),s=e.dataTransfer.files;if(i&&!t.isReadOnly())if(s&&s.length&&window.FileReader&&window.File)for(var n=s.length,l=Array(n),r=0,a=function(e,s){if(!t.options.allowDropFileTypes||-1!=$(t.options.allowDropFileTypes,e.type)){var o=new FileReader;o.onload=$s(t,function(){var e=o.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),l[s]=e,++r==n){var a={from:i=Ce(t.doc,i),to:i,text:t.doc.splitLines(l.join(t.doc.lineSeparator())),origin:"paste"};Yn(t.doc,a),jn(t.doc,un(i,mn(a)))}}),o.readAsText(e)}},d=0;d<n;++d)a(s[d],d);else{if(t.state.draggingText&&-1<t.doc.sel.contains(i))return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var h=e.dataTransfer.getData("Text");if(h){var c;if(t.state.draggingText&&!t.state.draggingText.copy&&(c=t.listSelections()),$n(t.doc,un(i,i)),c)for(var u=0;u<c.length;++u)el(t.doc,"",c[u].anchor,c[u].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(e){}}}}function bl(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function wl(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var s=t[i].CodeMirror;s&&e(s)}}var Cl=!1;function yl(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Sl={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},xl=0;xl<10;xl++)Sl[xl+48]=Sl[xl+96]=String(xl);for(var Tl=65;Tl<=90;Tl++)Sl[Tl]=String.fromCharCode(Tl);for(var kl=1;kl<=12;kl++)Sl[kl+111]=Sl[kl+63235]="F"+kl;var Dl={};function Il(e){var t,i,s,n,l=e.split(/-(?!$)/);e=l[l.length-1];for(var o=0;o<l.length-1;o++){var r=l[o];if(/^(cmd|meta|m)$/i.test(r))n=!0;else if(/^a(lt)?$/i.test(r))t=!0;else if(/^(c|ctrl|control)$/i.test(r))i=!0;else{if(!/^s(hift)?$/i.test(r))throw new Error("Unrecognized modifier name: "+r);s=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),n&&(e="Cmd-"+e),s&&(e="Shift-"+e),e}function Ol(e,t,i,s){var n=(t=El(t)).call?t.call(e,s):t[e];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&i(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ol(e,t.fallthrough,i,s);for(var l=0;l<t.fallthrough.length;l++){var o=Ol(e,t.fallthrough[l],i,s);if(o)return o}}}function Al(e){var t="string"==typeof e?e:Sl[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ll(e,t,i){var s=e;return t.altKey&&"Alt"!=s&&(e="Alt-"+e),(y?t.metaKey:t.ctrlKey)&&"Ctrl"!=s&&(e="Ctrl-"+e),(y?t.ctrlKey:t.metaKey)&&"Cmd"!=s&&(e="Cmd-"+e),!i&&t.shiftKey&&"Shift"!=s&&(e="Shift-"+e),e}function Rl(e,t){if(c&&34==e.keyCode&&e.char)return!1;var i=Sl[e.keyCode];return null!=i&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(i=e.code),Ll(i,e,t))}function El(e){return"string"==typeof e?Dl[e]:e}function Nl(e,t){for(var i=e.doc.sel.ranges,s=[],n=0;n<i.length;n++){for(var l=t(i[n]);s.length&&ge(l.from,K(s).to)<=0;){var o=s.pop();if(ge(o.from,l.from)<0){l.from=o.from;break}}s.push(l)}zs(e,function(){for(var t=s.length-1;0<=t;t--)el(e.doc,"",s[t].from,s[t].to,"+delete");ws(e)})}function Ml(e,t,i){var s=ne(e.text,t+i,i);return s<0||s>e.text.length?null:s}function Pl(e,t,i){var s=Ml(e,t.ch,i);return null==s?null:new pe(t.line,s,i<0?"after":"before")}function Fl(e,t,i,s,n){if(e){var l=Je(i,t.doc.direction);if(l){var o,r=n<0?K(l):l[0],a=n<0==(1==r.level)?"after":"before";if(0<r.level||"rtl"==t.doc.direction){var d=ki(t,i);o=n<0?i.text.length-1:0;var h=Di(t,d,o).top;o=le(function(e){return Di(t,d,e).top==h},n<0==(1==r.level)?r.from:r.to-1,o),"before"==a&&(o=Ml(i,o,1))}else o=n<0?r.to:r.from;return new pe(s,o,a)}}return new pe(s,n<0?i.text.length:0,n<0?"before":"after")}Dl.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Dl.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Dl.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Dl.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Dl.default=v?Dl.macDefault:Dl.pcDefault;var jl={selectAll:Gn,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),V)},killLine:function(e){return Nl(e,function(t){if(t.empty()){var i=oe(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:pe(t.head.line+1,0)}:{from:t.head,to:pe(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Nl(e,function(t){return{from:pe(t.from().line,0),to:Ce(e.doc,pe(t.to().line+1,0))}})},delLineLeft:function(e){return Nl(e,function(e){return{from:pe(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Nl(e,function(t){var i=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:i},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Nl(e,function(t){var i=e.charCoords(t.head,"div").top+5,s=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:s}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(pe(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(pe(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return zl(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return $l(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return i=e,s=t.head.line,(l=function(e){for(var t;t=Fe(e);)e=t.find(1,!0).line;return e}(n=oe(i.doc,s)))!=n&&(s=he(l)),Fl(!0,i,n,s,-1);var i,s,n,l},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},B)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},B)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,s=e.coordsChar({left:0,top:i},"div");return s.ch<e.getLine(s.line).search(/\S/)?$l(e,t.head):s},B)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),s=e.options.tabSize,n=0;n<i.length;n++){var l=i[n].from(),o=j(e.getLine(l.line),l.ch,s);t.push(G(s-o%s))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return zs(e,function(){for(var t=e.listSelections(),i=[],s=0;s<t.length;s++)if(t[s].empty()){var n=t[s].head,l=oe(e.doc,n.line).text;if(l)if(n.ch==l.length&&(n=new pe(n.line,n.ch-1)),0<n.ch)n=new pe(n.line,n.ch+1),e.replaceRange(l.charAt(n.ch-1)+l.charAt(n.ch-2),pe(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var o=oe(e.doc,n.line-1).text;o&&(n=new pe(n.line,1),e.replaceRange(l.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),pe(n.line-1,o.length-1),n,"+transpose"))}i.push(new hn(n,n))}e.setSelections(i)})},newlineAndIndent:function(e){return zs(e,function(){for(var t=e.listSelections(),i=t.length-1;0<=i;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var s=0;s<t.length;s++)e.indentLine(t[s].from().line,null,!0);ws(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function zl(e,t){var i=oe(e.doc,t),s=$e(i);return s!=i&&(t=he(s)),Fl(!0,e,s,t,1)}function $l(e,t){var i=zl(e,t.line),s=oe(e.doc,i.line),n=Je(s,e.doc.direction);if(n&&0!=n[0].level)return i;var l=Math.max(0,s.text.search(/\S/)),o=t.line==i.line&&t.ch<=l&&t.ch;return pe(i.line,o?0:l,i.sticky)}function Hl(e,t,i){if("string"==typeof t&&!(t=jl[t]))return!1;e.display.input.ensurePolled();var s=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=H}finally{e.display.shift=s,e.state.suppressEdits=!1}return n}var Vl=new z;function Ul(e,t,i,s){var n=e.state.keySeq;if(n){if(Al(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Vl.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),Bl(e,n+" "+t,i,s))return!0}return Bl(e,t,i,s)}function Bl(e,t,i,s){var n=function(e,t,i){for(var s=0;s<e.state.keyMaps.length;s++){var n=Ol(t,e.state.keyMaps[s],i,e);if(n)return n}return e.options.extraKeys&&Ol(t,e.options.extraKeys,i,e)||Ol(t,e.options.keyMap,i,e)}(e,t,s);return"multi"==n&&(e.state.keySeq=t),"handled"==n&&ni(e,"keyHandled",e,t,i),"handled"!=n&&"multi"!=n||(rt(i),as(e)),!!n}function Wl(e,t){var i=Rl(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?Ul(e,"Shift-"+i,t,function(t){return Hl(e,t,!0)})||Ul(e,i,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Hl(e,t)}):Ul(e,i,t,function(t){return Hl(e,t)}))}var ql=null;function Gl(e){if(this.curOp.focus=R(),!st(this,e)){o&&r<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var i=Wl(this,e);c&&(ql=i?t:null,!i&&88==t&&!Ct&&(v?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function i(e){18!=e.keyCode&&e.altKey||(k(t,"CodeMirror-crosshair"),tt(document,"keyup",i),tt(document,"mouseover",i))}E(t,"CodeMirror-crosshair"),Ze(document,"keyup",i),Ze(document,"mouseover",i)}(this)}}function Kl(e){16==e.keyCode&&(this.doc.sel.shift=!1),st(this,e)}function Yl(e){if(!(fi(this.display,e)||st(this,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)){var t=e.keyCode,i=e.charCode;if(c&&t==ql)return ql=null,void rt(e);if(!c||e.which&&!(e.which<10)||!Wl(this,e)){var s,n=String.fromCharCode(null==i?t:i);"\b"!=n&&(Ul(s=this,"'"+n+"'",e,function(e){return Hl(s,e,!0)})||this.display.input.onKeyPress(e))}}}var Ql,Jl,Xl=function(e,t,i){this.time=e,this.pos=t,this.button=i};function Zl(e){var t,i,s,n,l=this,d=l.display;if(!(st(l,e)||d.activeTouch&&d.input.supportsTouch()))if(d.input.ensurePolled(),d.shift=e.shiftKey,fi(d,e))a||(d.scroller.draggable=!1,setTimeout(function(){return d.scroller.draggable=!0},100));else if(!io(l,e)){var h,c,u,m=ts(l,e),p=ut(e),g=m?(h=m,c=p,u=+new Date,Jl&&Jl.compare(u,h,c)?(Ql=Jl=null,"triple"):Ql&&Ql.compare(u,h,c)?(Jl=new Xl(u,h,c),Ql=null,"double"):(Ql=new Xl(u,h,c),Jl=null,"single")):"single";window.focus(),1==p&&l.state.selectingText&&l.state.selectingText(e),m&&(i=m,n="Click","double"==g?n="Double"+n:"triple"==g&&(n="Triple"+n),Ul(t=l,Ll(n=(1==p?"Left":2==p?"Middle":"Right")+n,s=e),s,function(e){if("string"==typeof e&&(e=jl[e]),!e)return!1;var s=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),s=e(t,i)!=H}finally{t.state.suppressEdits=!1}return s}))||(1==p?m?function(e,t,i,s){o?setTimeout(P(ds,e),0):e.curOp.focus=R();var n,l,d,h,c,u,m,p,g,f,_=function(e,t,i){var s=e.getOption("configureMouse"),n=s?s(e,t,i):{};if(null==n.unit){var l=b?i.shiftKey&&i.metaKey:i.altKey;n.unit=l?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==n.extend||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey),null==n.addNew&&(n.addNew=v?i.metaKey:i.ctrlKey),null==n.moveOnDrag&&(n.moveOnDrag=!(v?i.altKey:i.ctrlKey)),n}(e,i,s),w=e.doc.sel;e.options.dragDrop&&gt&&!e.isReadOnly()&&"single"==i&&-1<(n=w.contains(t))&&(ge((n=w.ranges[n]).from(),t)<0||0<t.xRel)&&(0<ge(n.to(),t)||t.xRel<0)?(d=s,h=t,c=_,u=(l=e).display,m=!1,p=$s(l,function(e){a&&(u.scroller.draggable=!1),l.state.draggingText=!1,tt(u.wrapper.ownerDocument,"mouseup",p),tt(u.wrapper.ownerDocument,"mousemove",g),tt(u.scroller,"dragstart",f),tt(u.scroller,"drop",p),m||(rt(e),c.addNew||Nn(l.doc,h,null,null,c.extend),a||o&&9==r?setTimeout(function(){u.wrapper.ownerDocument.body.focus(),u.input.focus()},20):u.input.focus())}),g=function(e){m=m||10<=Math.abs(d.clientX-e.clientX)+Math.abs(d.clientY-e.clientY)},f=function(){return m=!0},a&&(u.scroller.draggable=!0),(l.state.draggingText=p).copy=!c.moveOnDrag,u.scroller.dragDrop&&u.scroller.dragDrop(),Ze(u.wrapper.ownerDocument,"mouseup",p),Ze(u.wrapper.ownerDocument,"mousemove",g),Ze(u.scroller,"dragstart",f),Ze(u.scroller,"drop",p),hs(l),setTimeout(function(){return u.input.focus()},20)):function(e,t,i,s){var n=e.display,l=e.doc;rt(t);var o,r,a=l.sel,d=a.ranges;if(s.addNew&&!s.extend?(r=l.sel.contains(i),o=-1<r?d[r]:new hn(i,i)):(o=l.sel.primary(),r=l.sel.primIndex),"rectangle"==s.unit)s.addNew||(o=new hn(i,i)),i=ts(e,t,!0,!0),r=-1;else{var h=eo(e,i,s.unit);o=s.extend?En(o,h.anchor,h.head,s.extend):h}s.addNew?-1==r?(r=d.length,zn(l,cn(e,d.concat([o]),r),{scroll:!1,origin:"*mouse"})):1<d.length&&d[r].empty()&&"char"==s.unit&&!s.extend?(zn(l,cn(e,d.slice(0,r).concat(d.slice(r+1)),0),{scroll:!1,origin:"*mouse"}),a=l.sel):Pn(l,r,o,U):(zn(l,new dn([o],r=0),U),a=l.sel);var c=i,u=n.wrapper.getBoundingClientRect(),m=0;function p(t){e.state.selectingText=!1,m=1/0,rt(t),n.input.focus(),tt(n.wrapper.ownerDocument,"mousemove",g),tt(n.wrapper.ownerDocument,"mouseup",f),l.history.lastSelOrigin=null}var g=$s(e,function(t){0!==t.buttons&&ut(t)?function t(d){var h=++m,p=ts(e,d,!0,"rectangle"==s.unit);if(p)if(0!=ge(p,c)){e.curOp.focus=R(),function(t){if(0!=ge(c,t))if(c=t,"rectangle"==s.unit){for(var n=[],d=e.options.tabSize,h=j(oe(l,i.line).text,i.ch,d),u=j(oe(l,t.line).text,t.ch,d),m=Math.min(h,u),p=Math.max(h,u),g=Math.min(i.line,t.line),f=Math.min(e.lastLine(),Math.max(i.line,t.line));g<=f;g++){var _=oe(l,g).text,v=W(_,m,d);m==p?n.push(new hn(pe(g,v),pe(g,v))):_.length>v&&n.push(new hn(pe(g,v),pe(g,W(_,p,d))))}n.length||n.push(new hn(i,i)),zn(l,cn(e,a.ranges.slice(0,r).concat(n),r),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=o,C=eo(e,t,s.unit),y=w.anchor;y=0<ge(C.anchor,y)?(b=C.head,be(w.from(),C.anchor)):(b=C.anchor,ve(w.to(),C.head));var S=a.ranges.slice(0);S[r]=function(e,t){var i=t.anchor,s=t.head,n=oe(e.doc,i.line);if(0==ge(i,s)&&i.sticky==s.sticky)return t;var l=Je(n);if(!l)return t;var o=Ye(l,i.ch,i.sticky),r=l[o];if(r.from!=i.ch&&r.to!=i.ch)return t;var a,d=o+(r.from==i.ch==(1!=r.level)?0:1);if(0==d||d==l.length)return t;if(s.line!=i.line)a=0<(s.line-i.line)*("ltr"==e.doc.direction?1:-1);else{var h=Ye(l,s.ch,s.sticky),c=h-o||(s.ch-i.ch)*(1==r.level?-1:1);a=h==d-1||h==d?c<0:0<c}var u=l[d+(a?-1:0)],m=a==(1==u.level),p=m?u.from:u.to,g=m?"after":"before";return i.ch==p&&i.sticky==g?t:new hn(new pe(i.line,p,g),s)}(e,new hn(Ce(l,y),b)),zn(l,cn(e,S,r),U)}}(p);var g=gs(n,l);(p.line>=g.to||p.line<g.from)&&setTimeout($s(e,function(){m==h&&t(d)}),150)}else{var f=d.clientY<u.top?-20:d.clientY>u.bottom?20:0;f&&setTimeout($s(e,function(){m==h&&(n.scroller.scrollTop+=f,t(d))}),50)}}(t):p(t)}),f=$s(e,p);e.state.selectingText=f,Ze(n.wrapper.ownerDocument,"mousemove",g),Ze(n.wrapper.ownerDocument,"mouseup",f)}(e,s,t,_)}(l,m,g,e):ct(e)==d.scroller&&rt(e):2==p?(m&&Nn(l.doc,m),setTimeout(function(){return d.input.focus()},20)):3==p&&(S?l.display.input.onContextMenu(e):hs(l)))}}function eo(e,t,i){if("char"==i)return new hn(t,t);if("word"==i)return e.findWordAt(t);if("line"==i)return new hn(pe(t.line,0),Ce(e.doc,pe(t.line+1,0)));var s=i(e,t);return new hn(s.from,s.to)}function to(e,t,i,s){var n,l;if(t.touches)n=t.touches[0].clientX,l=t.touches[0].clientY;else try{n=t.clientX,l=t.clientY}catch(t){return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;s&&rt(t);var o=e.display,r=o.lineDiv.getBoundingClientRect();if(l>r.bottom||!lt(e,i))return dt(t);l-=r.top-o.viewOffset;for(var a=0;a<e.options.gutters.length;++a){var d=o.gutters.childNodes[a];if(d&&d.getBoundingClientRect().right>=n)return it(e,i,e,ce(e.doc,l),e.options.gutters[a],t),dt(t)}}function io(e,t){return to(e,t,"gutterClick",!0)}function so(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ni(e)}Xl.prototype.compare=function(e,t,i){return this.time+400>e&&0==ge(t,this.pos)&&i==this.button};var no={toString:function(){return"CodeMirror.Init"}},lo={},oo={};function ro(e){sn(e),Us(e),fs(e)}function ao(e,t,i){if(!t!=!(i&&i!=no)){var s=e.display.dragFunctions,n=t?Ze:tt;n(e.display.scroller,"dragstart",s.start),n(e.display.scroller,"dragenter",s.enter),n(e.display.scroller,"dragover",s.over),n(e.display.scroller,"dragleave",s.leave),n(e.display.scroller,"drop",s.drop)}}function ho(e){e.options.lineWrapping?(E(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(k(e.display.wrapper,"CodeMirror-wrap"),Ge(e)),es(e),Us(e),Ni(e),setTimeout(function(){return As(e)},100)}function co(e,t){var s=this;if(!(this instanceof co))return new co(e,t);this.options=t=t?F(t):{},F(lo,t,!1),nn(t);var n=t.value;"string"==typeof n?n=new fl(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var l=new co.inputStyles[t.inputStyle](this),d=this.display=new function(e,t,s){var n=this;this.input=s,n.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=O("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=A("div",null,"CodeMirror-code"),n.selectionDiv=O("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=O("div",null,"CodeMirror-cursors"),n.measure=O("div",null,"CodeMirror-measure"),n.lineMeasure=O("div",null,"CodeMirror-measure"),n.lineSpace=A("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var l=A("div",[n.lineSpace],"CodeMirror-lines");n.mover=O("div",[l],null,"position: relative"),n.sizer=O("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=O("div",null,null,"position: absolute; height: 30px; width: 1px;"),n.gutters=O("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=O("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=O("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),o&&r<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),a||i&&_||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,s.init(n)}(e,n,l);for(var h in sn(d.wrapper.CodeMirror=this),so(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Es(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new z,keySeq:null,specialChars:null},t.autofocus&&!_&&d.input.focus(),o&&r<11&&setTimeout(function(){return s.display.input.reset(!0)},20),function(e){var t=e.display;Ze(t.scroller,"mousedown",$s(e,Zl)),Ze(t.scroller,"dblclick",o&&r<11?$s(e,function(t){if(!st(e,t)){var i=ts(e,t);if(i&&!io(e,t)&&!fi(e.display,t)){rt(t);var s=e.findWordAt(i);Nn(e.doc,s.anchor,s.head)}}}):function(t){return st(e,t)||rt(t)}),Ze(t.scroller,"contextmenu",function(t){return s=t,void(fi((i=e).display,s)||(l=s,lt(n=i,"gutterContextMenu")&&to(n,l,"gutterContextMenu",!1))||st(i,s,"contextmenu")||S||i.display.input.onContextMenu(s));var i,s,n,l});var i,s={end:0};function n(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),(s=t.activeTouch).end=+new Date)}function l(e,t){if(null==t.left)return!0;var i=t.left-e.left,s=t.top-e.top;return 400<i*i+s*s}Ze(t.scroller,"touchstart",function(n){if(!st(e,n)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(n)&&!io(e,n)){t.input.ensurePolled(),clearTimeout(i);var l=+new Date;t.activeTouch={start:l,moved:!1,prev:l-s.end<=300?s:null},1==n.touches.length&&(t.activeTouch.left=n.touches[0].pageX,t.activeTouch.top=n.touches[0].pageY)}}),Ze(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Ze(t.scroller,"touchend",function(i){var s=t.activeTouch;if(s&&!fi(t,i)&&null!=s.left&&!s.moved&&new Date-s.start<300){var o,r=e.coordsChar(t.activeTouch,"page");o=!s.prev||l(s,s.prev)?new hn(r,r):!s.prev.prev||l(s,s.prev.prev)?e.findWordAt(r):new hn(pe(r.line,0),Ce(e.doc,pe(r.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),rt(i)}n()}),Ze(t.scroller,"touchcancel",n),Ze(t.scroller,"scroll",function(){t.scroller.clientHeight&&(xs(e,t.scroller.scrollTop),ks(e,t.scroller.scrollLeft,!0),it(e,"scroll",e))}),Ze(t.scroller,"mousewheel",function(t){return an(e,t)}),Ze(t.scroller,"DOMMouseScroll",function(t){return an(e,t)}),Ze(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){st(e,t)||ht(t)},over:function(t){st(e,t)||(function(e){var i=ts(e,t);if(i){var s=document.createDocumentFragment();ls(e,i,s),e.display.dragCursor||(e.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),I(e.display.dragCursor,s)}}(e),ht(t))},start:function(t){return function(e,t){if(o&&(!e.state.draggingText||+new Date-_l<100))ht(t);else if(!st(e,t)&&!fi(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!u)){var i=O("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),c&&i.parentNode.removeChild(i)}}(e,t)},drop:$s(e,vl),leave:function(t){st(e,t)||bl(e)}};var a=t.input.getField();Ze(a,"keyup",function(t){return Kl.call(e,t)}),Ze(a,"keydown",$s(e,Gl)),Ze(a,"keypress",$s(e,Yl)),Ze(a,"focus",function(t){return cs(e,t)}),Ze(a,"blur",function(t){return us(e,t)})}(this),function(){var e;Cl||(Ze(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,wl(yl)},100))}),Ze(window,"blur",function(){return wl(us)}),Cl=!0)}(),Ms(this),this.curOp.forceUpdate=!0,yn(this,n),t.autofocus&&!_||this.hasFocus()?setTimeout(P(cs,this),20):us(this),oo)oo.hasOwnProperty(h)&&oo[h](s,t[h],no);_s(this),t.finishInit&&t.finishInit(this);for(var m=0;m<uo.length;++m)uo[m](s);Ps(this),a&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(d.lineDiv).textRendering&&(d.lineDiv.style.textRendering="auto")}co.defaults=lo,co.optionHandlers=oo;var uo=[];function mo(e,t,i,s){var n,l=e.doc;null==i&&(i="add"),"smart"==i&&(l.mode.indent?n=Pt(e,t).state:i="prev");var o=e.options.tabSize,r=oe(l,t),a=j(r.text,null,o);r.stateAfter&&(r.stateAfter=null);var d,h=r.text.match(/^\s*/)[0];if(s||/\S/.test(r.text)){if("smart"==i&&((d=l.mode.indent(n,r.text.slice(h.length),r.text))==H||150<d)){if(!s)return;i="prev"}}else d=0,i="not";"prev"==i?d=t>l.first?j(oe(l,t-1).text,null,o):0:"add"==i?d=a+e.options.indentUnit:"subtract"==i?d=a-e.options.indentUnit:"number"==typeof i&&(d=a+i),d=Math.max(0,d);var c="",u=0;if(e.options.indentWithTabs)for(var m=Math.floor(d/o);m;--m)u+=o,c+="\t";if(u<d&&(c+=G(d-u)),c!=h)return el(l,c,pe(t,0),pe(t,h.length),"+input"),!(r.stateAfter=null);for(var p=0;p<l.sel.ranges.length;p++){var g=l.sel.ranges[p];if(g.head.line==t&&g.head.ch<h.length){var f=pe(t,h.length);Pn(l,p,new hn(f,f));break}}}co.defineInitHook=function(e){return uo.push(e)};var po=null;function go(e){po=e}function fo(e,t,i,s,n){var l=e.doc;e.display.shift=!1,s||(s=l.sel);var o,r=e.state.pasteIncoming||"paste"==n,a=bt(t),d=null;if(r&&1<s.ranges.length)if(po&&po.text.join("\n")==t){if(s.ranges.length%po.text.length==0){d=[];for(var h=0;h<po.text.length;h++)d.push(l.splitLines(po.text[h]))}}else a.length==s.ranges.length&&e.options.pasteLinesPerSelection&&(d=Y(a,function(e){return[e]}));for(var c=s.ranges.length-1;0<=c;c--){var u=s.ranges[c],m=u.from(),p=u.to();u.empty()&&(i&&0<i?m=pe(m.line,m.ch-i):e.state.overwrite&&!r?p=pe(p.line,Math.min(oe(l,p.line).text.length,p.ch+K(a).length)):r&&po&&po.lineWise&&po.text.join("\n")==t&&(m=p=pe(m.line,0))),o=e.curOp.updateInput;var g={from:m,to:p,text:d?d[c%d.length]:a,origin:n||(r?"paste":e.state.cutIncoming?"cut":"+input")};Yn(e.doc,g),ni(e,"inputRead",e,g)}t&&!r&&vo(e,t),ws(e),e.curOp.updateInput=o,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function _o(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||zs(t,function(){return fo(t,i,0,null,"paste")}),!0}function vo(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,s=i.ranges.length-1;0<=s;s--){var n=i.ranges[s];if(!(100<n.head.ch||s&&i.ranges[s-1].head.line==n.head.line)){var l=e.getModeAt(n.head),o=!1;if(l.electricChars){for(var r=0;r<l.electricChars.length;r++)if(-1<t.indexOf(l.electricChars.charAt(r))){o=mo(e,n.head.line,"smart");break}}else l.electricInput&&l.electricInput.test(oe(e.doc,n.head.line).text.slice(0,n.head.ch))&&(o=mo(e,n.head.line,"smart"));o&&ni(e,"electricInput",e,n.head.line)}}}function bo(e){for(var t=[],i=[],s=0;s<e.doc.sel.ranges.length;s++){var n=e.doc.sel.ranges[s].head.line,l={anchor:pe(n,0),head:pe(n+1,0)};i.push(l),t.push(e.getRange(l.anchor,l.head))}return{text:t,ranges:i}}function wo(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Co(){var e=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=O("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return a?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),wo(e),t}function yo(e,t,i,s,n){var l=t,o=i,r=oe(e,t.line);function a(s){var l,o;if(null==(l=n?function(e,t,i,s){var n=Je(t,e.doc.direction);if(!n)return Pl(t,i,s);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var l=Ye(n,i.ch,i.sticky),o=n[l];if("ltr"==e.doc.direction&&o.level%2==0&&(0<s?o.to>i.ch:o.from<i.ch))return Pl(t,i,s);var r,a=function(e,i){return Ml(t,e instanceof pe?e.ch:e,i)},d=function(i){return e.options.lineWrapping?(r=r||ki(e,t),qi(e,t,r,i)):{begin:0,end:t.text.length}},h=d("before"==i.sticky?a(i,-1):i.ch);if("rtl"==e.doc.direction||1==o.level){var c=1==o.level==s<0,u=a(i,c?1:-1);if(null!=u&&(c?u<=o.to&&u<=h.end:u>=o.from&&u>=h.begin)){var m=c?"before":"after";return new pe(i.line,u,m)}}var p=function(e,t,s){for(var l=function(e,t){return t?new pe(i.line,a(e,1),"before"):new pe(i.line,e,"after")};0<=e&&e<n.length;e+=t){var o=n[e],r=0<t==(1!=o.level),d=r?s.begin:a(s.end,-1);if(o.from<=d&&d<o.to)return l(d,r);if(d=r?o.from:a(o.to,-1),s.begin<=d&&d<s.end)return l(d,r)}},g=p(l+s,s,h);if(g)return g;var f=0<s?h.end:a(h.begin,-1);return null==f||0<s&&f==t.text.length||!(g=p(0<s?0:n.length-1,s,d(f)))?null:g}(e.cm,r,t,i):Pl(r,t,i))){if(s||(o=t.line+i)<e.first||o>=e.first+e.size||(t=new pe(o,t.ch,t.sticky),!(r=oe(e,o))))return!1;t=Fl(n,e.cm,r,t.line,i)}else t=l;return!0}if("char"==s)a();else if("column"==s)a(!0);else if("word"==s||"group"==s)for(var d=null,h="group"==s,c=e.cm&&e.cm.getHelper(t,"wordChars"),u=!0;!(i<0)||a(!u);u=!1){var m=r.text.charAt(t.ch)||"\n",p=ee(m,c)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||u||p||(p="s"),d&&d!=p){i<0&&(i=1,a(),t.sticky="after");break}if(p&&(d=p),0<i&&!a(!u))break}var g=Wn(e,t,l,o,!0);return fe(l,g)&&(g.hitSide=!0),g}function So(e,t,i,s){var n,l,o=e.doc,r=t.left;if("page"==s){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),d=Math.max(a-.5*Yi(e.display),3);n=(0<i?t.bottom:t.top)+i*d}else"line"==s&&(n=0<i?t.bottom+3:t.top-3);for(;(l=Bi(e,r,n)).outside;){if(i<0?n<=0:n>=o.height){l.hitSide=!0;break}n+=5*i}return l}var xo=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new z,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function To(e,t){var i=Ti(e,t.line);if(!i||i.hidden)return null;var s=oe(e.doc,t.line),n=Si(i,s,t.line),l=Je(s,e.doc.direction),o="left";l&&(o=Ye(l,t.ch)%2?"right":"left");var r=Ai(n.map,t.ch,o);return r.offset="right"==r.collapse?r.end:r.start,r}function ko(e,t){return t&&(e.bad=!0),e}function Do(e,t,i){var s;if(t==e.display.lineDiv){if(!(s=e.display.lineDiv.childNodes[i]))return ko(e.clipPos(pe(e.display.viewTo-1)),!0);t=null,i=0}else for(s=t;;s=s.parentNode){if(!s||s==e.display.lineDiv)return null;if(s.parentNode&&s.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var l=e.display.view[n];if(l.node==s)return Io(l,t,i)}}function Io(e,t,i){var s=e.text.firstChild,n=!1;if(!t||!L(s,t))return ko(pe(he(e.line),0),!0);if(t==s&&(n=!0,t=s.childNodes[i],i=0,!t)){var l=e.rest?K(e.rest):e.line;return ko(pe(he(l),l.text.length),n)}var o=3==t.nodeType?t:null,r=t;for(o||1!=t.childNodes.length||3!=t.firstChild.nodeType||(o=t.firstChild,i&&(i=o.nodeValue.length));r.parentNode!=s;)r=r.parentNode;var a=e.measure,d=a.maps;function h(t,i,s){for(var n=-1;n<(d?d.length:0);n++)for(var l=n<0?a.map:d[n],o=0;o<l.length;o+=3){var r=l[o+2];if(r==t||r==i){var h=he(n<0?e.line:e.rest[n]),c=l[o]+s;return(s<0||r!=t)&&(c=l[o+(s?1:0)]),pe(h,c)}}}var c=h(o,r,i);if(c)return ko(c,n);for(var u=r.nextSibling,m=o?o.nodeValue.length-i:0;u;u=u.nextSibling){if(c=h(u,u.firstChild,0))return ko(pe(c.line,c.ch-m),n);m+=u.textContent.length}for(var p=r.previousSibling,g=i;p;p=p.previousSibling){if(c=h(p,p.firstChild,-1))return ko(pe(c.line,c.ch+g),n);g+=p.textContent.length}}xo.prototype.init=function(e){var t=this,i=this,s=i.cm,n=i.div=e.lineDiv;function l(e){if(!st(s,e)){if(s.somethingSelected())go({lineWise:!1,text:s.getSelections()}),"cut"==e.type&&s.replaceSelection("",null,"cut");else{if(!s.options.lineWiseCopyCut)return;var t=bo(s);go({lineWise:!0,text:t.text}),"cut"==e.type&&s.operation(function(){s.setSelections(t.ranges,0,V),s.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var l=po.text.join("\n");if(e.clipboardData.setData("Text",l),e.clipboardData.getData("Text")==l)return void e.preventDefault()}var o=Co(),r=o.firstChild;s.display.lineSpace.insertBefore(o,s.display.lineSpace.firstChild),r.value=po.text.join("\n");var a=document.activeElement;M(r),setTimeout(function(){s.display.lineSpace.removeChild(o),a.focus(),a==n&&i.showPrimarySelection()},50)}}wo(n,s.options.spellcheck),Ze(n,"paste",function(e){st(s,e)||_o(e,s)||r<=11&&setTimeout($s(s,function(){return t.updateFromDOM()}),20)}),Ze(n,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),Ze(n,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),Ze(n,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Ze(n,"touchstart",function(){return i.forceCompositionEnd()}),Ze(n,"input",function(){t.composing||t.readFromDOMSoon()}),Ze(n,"copy",l),Ze(n,"cut",l)},xo.prototype.prepareSelection=function(){var e=ns(this.cm,!1);return e.focus=this.cm.state.focused,e},xo.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},xo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},xo.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,s=t.doc.sel.primary(),n=s.from(),l=s.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||l.line<t.display.viewFrom)e.removeAllRanges();else{var o=Do(t,e.anchorNode,e.anchorOffset),r=Do(t,e.focusNode,e.focusOffset);if(!o||o.bad||!r||r.bad||0!=ge(be(o,r),n)||0!=ge(ve(o,r),l)){var a=t.display.view,d=n.line>=t.display.viewFrom&&To(t,n)||{node:a[0].measure.map[2],offset:0},h=l.line<t.display.viewTo&&To(t,l);if(!h){var c=a[a.length-1].measure,u=c.maps?c.maps[c.maps.length-1]:c.map;h={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}if(d&&h){var m,p=e.rangeCount&&e.getRangeAt(0);try{m=T(d.node,d.offset,h.offset,h.node)}catch(e){}m&&(!i&&t.state.focused?(e.collapse(d.node,d.offset),m.collapsed||(e.removeAllRanges(),e.addRange(m))):(e.removeAllRanges(),e.addRange(m)),p&&null==e.anchorNode?e.addRange(p):i&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},xo.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},xo.prototype.showMultipleSelections=function(e){I(this.cm.display.cursorDiv,e.cursors),I(this.cm.display.selectionDiv,e.selection)},xo.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},xo.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return L(this.div,t)},xo.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},xo.prototype.blur=function(){this.div.blur()},xo.prototype.getField=function(){return this.div},xo.prototype.supportsTouch=function(){return!0},xo.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():zs(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},xo.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},xo.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(f&&h&&this.cm.options.gutters.length&&function(){for(var t=e.anchorNode;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}())return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=Do(t,e.anchorNode,e.anchorOffset),s=Do(t,e.focusNode,e.focusOffset);i&&s&&zs(t,function(){zn(t.doc,un(i,s),V),(i.bad||s.bad)&&(t.curOp.selectionChanged=!0)})}}},xo.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,i,s=this.cm,n=s.display,l=s.doc.sel.primary(),o=l.from(),r=l.to();if(0==o.ch&&o.line>s.firstLine()&&(o=pe(o.line-1,oe(s.doc,o.line-1).length)),r.ch==oe(s.doc,r.line).text.length&&r.line<s.lastLine()&&(r=pe(r.line+1,0)),o.line<n.viewFrom||r.line>n.viewTo-1)return!1;i=o.line==n.viewFrom||0==(e=is(s,o.line))?(t=he(n.view[0].line),n.view[0].node):(t=he(n.view[e].line),n.view[e-1].node.nextSibling);var a,d,h=is(s,r.line);if(d=h==n.view.length-1?(a=n.viewTo-1,n.lineDiv.lastChild):(a=he(n.view[h+1].line)-1,n.view[h+1].node.previousSibling),!i)return!1;for(var c=s.doc.splitLines(function(e,t,i,s,n){var l="",o=!1,r=e.doc.lineSeparator(),a=!1;function d(){o&&(l+=r,a&&(l+=r),o=a=!1)}function h(e){e&&(d(),l+=e)}function c(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(i)return void h(i);var l,u=t.getAttribute("cm-marker");if(u){var m=e.findMarks(pe(s,0),pe(n+1,0),(f=+u,function(e){return e.id==f}));return void(m.length&&(l=m[0].find(0))&&h(re(e.doc,l.from,l.to).join(r)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&d();for(var g=0;g<t.childNodes.length;g++)c(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(a=!0),p&&(o=!0)}else 3==t.nodeType&&h(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var f}for(;c(t),t!=i;)t=t.nextSibling,a=!1;return l}(s,i,d,t,a)),u=re(s.doc,pe(t,0),pe(a,oe(s.doc,a).text.length));1<c.length&&1<u.length;)if(K(c)==K(u))c.pop(),u.pop(),a--;else{if(c[0]!=u[0])break;c.shift(),u.shift(),t++}for(var m=0,p=0,g=c[0],f=u[0],_=Math.min(g.length,f.length);m<_&&g.charCodeAt(m)==f.charCodeAt(m);)++m;for(var v=K(c),b=K(u),w=Math.min(v.length-(1==c.length?m:0),b.length-(1==u.length?m:0));p<w&&v.charCodeAt(v.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==c.length&&1==u.length&&t==o.line)for(;m&&m>o.ch&&v.charCodeAt(v.length-p-1)==b.charCodeAt(b.length-p-1);)m--,p++;c[c.length-1]=v.slice(0,v.length-p).replace(/^\u200b+/,""),c[0]=c[0].slice(m).replace(/\u200b+$/,"");var C=pe(t,m),y=pe(a,u.length?K(u).length-p:0);return 1<c.length||c[0]||ge(C,y)?(el(s.doc,c,C,y,"+input"),!0):void 0},xo.prototype.ensurePolled=function(){this.forceCompositionEnd()},xo.prototype.reset=function(){this.forceCompositionEnd()},xo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},xo.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},xo.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||zs(this.cm,function(){return Us(e.cm)})},xo.prototype.setUneditable=function(e){e.contentEditable="false"},xo.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||$s(this.cm,fo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},xo.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},xo.prototype.onContextMenu=function(){},xo.prototype.resetPosition=function(){},xo.prototype.needsContentAttribute=!0;var Oo,Ao,Lo,Ro=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new z,this.hasSelection=!1,this.composing=null};Ro.prototype.init=function(e){var t=this,i=this,s=this.cm;this.createField(e);var n=this.textarea;function l(e){if(!st(s,e)){if(s.somethingSelected())go({lineWise:!1,text:s.getSelections()});else{if(!s.options.lineWiseCopyCut)return;var t=bo(s);go({lineWise:!0,text:t.text}),"cut"==e.type?s.setSelections(t.ranges,null,V):(i.prevInput="",n.value=t.text.join("\n"),M(n))}"cut"==e.type&&(s.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(n.style.width="0px"),Ze(n,"input",function(){o&&9<=r&&t.hasSelection&&(t.hasSelection=null),i.poll()}),Ze(n,"paste",function(e){st(s,e)||_o(e,s)||(s.state.pasteIncoming=!0,i.fastPoll())}),Ze(n,"cut",l),Ze(n,"copy",l),Ze(e.scroller,"paste",function(t){fi(e,t)||st(s,t)||(s.state.pasteIncoming=!0,i.focus())}),Ze(e.lineSpace,"selectstart",function(t){fi(e,t)||rt(t)}),Ze(n,"compositionstart",function(){var e=s.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:s.markText(e,s.getCursor("to"),{className:"CodeMirror-composing"})}}),Ze(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Ro.prototype.createField=function(e){this.wrapper=Co(),this.textarea=this.wrapper.firstChild},Ro.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,s=ns(e);if(e.options.moveInputWithCursor){var n=Hi(e,i.sel.primary().head,"div"),l=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();s.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+o.top-l.top)),s.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+o.left-l.left))}return s},Ro.prototype.showSelection=function(e){var t=this.cm.display;I(t.cursorDiv,e.cursors),I(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ro.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&M(this.textarea),o&&9<=r&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",o&&9<=r&&(this.hasSelection=null))}},Ro.prototype.getField=function(){return this.textarea},Ro.prototype.supportsTouch=function(){return!1},Ro.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!_||R()!=this.textarea))try{this.textarea.focus()}catch(e){}},Ro.prototype.blur=function(){this.textarea.blur()},Ro.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ro.prototype.receivedFocus=function(){this.slowPoll()},Ro.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ro.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function i(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,i))})},Ro.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,s=this.prevInput;if(this.contextMenuPending||!t.state.focused||wt(i)&&!s&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==s&&!t.somethingSelected())return!1;if(o&&9<=r&&this.hasSelection===n||v&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var l=n.charCodeAt(0);if(8203!=l||s||(s="​"),8666==l)return this.reset(),this.cm.execCommand("undo")}for(var a=0,d=Math.min(s.length,n.length);a<d&&s.charCodeAt(a)==n.charCodeAt(a);)++a;return zs(t,function(){fo(t,n.slice(a),s.length-a,null,e.composing?"*compose":null),1e3<n.length||-1<n.indexOf("\n")?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ro.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ro.prototype.onKeyPress=function(){o&&9<=r&&(this.hasSelection=null),this.fastPoll()},Ro.prototype.onContextMenu=function(e){var t=this,i=t.cm,s=i.display,n=t.textarea,l=ts(i,e),d=s.scroller.scrollTop;if(l&&!c){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(l)&&$s(i,zn)(i.doc,un(l),V);var h=n.style.cssText,u=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var m,p=t.wrapper.getBoundingClientRect();if(n.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",a&&(m=window.scrollY),s.input.focus(),a&&window.scrollTo(null,m),s.input.reset(),i.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=!0,s.selForContextMenu=i.doc.sel,clearTimeout(s.detectingSelectAll),o&&9<=r&&f(),S){ht(e);var g=function(){tt(window,"mouseup",g),setTimeout(_,20)};Ze(window,"mouseup",g)}else setTimeout(_,50)}function f(){if(null!=n.selectionStart){var e=i.somethingSelected(),l="​"+(e?n.value:"");n.value="⇚",n.value=l,t.prevInput=e?"":"​",n.selectionStart=1,n.selectionEnd=l.length,s.selForContextMenu=i.doc.sel}}function _(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=u,n.style.cssText=h,o&&r<9&&s.scrollbars.setScrollTop(s.scroller.scrollTop=d),null!=n.selectionStart){(!o||o&&r<9)&&f();var e=0,l=function(){s.selForContextMenu==i.doc.sel&&0==n.selectionStart&&0<n.selectionEnd&&"​"==t.prevInput?$s(i,Gn)(i):e++<10?s.detectingSelectAll=setTimeout(l,500):(s.selForContextMenu=null,s.input.reset())};s.detectingSelectAll=setTimeout(l,200)}}},Ro.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ro.prototype.setUneditable=function(){},Ro.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function i(i,s,n,l){e.defaults[i]=s,n&&(t[i]=l?function(e,t,i){i!=no&&n(e,t,i)}:n)}e.defineOption=i,e.Init=no,i("value","",function(e,t){return e.setValue(t)},!0),i("mode",null,function(e,t){e.doc.modeOption=t,_n(e)},!0),i("indentUnit",2,_n,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(e){vn(e),Ni(e),Us(e)},!0),i("lineSeparator",null,function(e,t){if(e.doc.lineSep=t){var i=[],s=e.doc.first;e.doc.iter(function(e){for(var n=0;;){var l=e.text.indexOf(t,n);if(-1==l)break;n=l+t.length,i.push(pe(s,l))}s++});for(var n=i.length-1;0<=n;n--)el(e.doc,t,i[n],pe(i[n].line,i[n].ch+t.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=no&&e.refresh()}),i("specialCharPlaceholder",Yt,function(e){return e.refresh()},!0),i("electricChars",!0),i("inputStyle",_?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),i("rtlMoveVisually",!w),i("wholeLineUpdateBefore",!0),i("theme","default",function(e){so(e),ro(e)},!0),i("keyMap","default",function(e,t,i){var s=El(t),n=i!=no&&El(i);n&&n.detach&&n.detach(e,s),s.attach&&s.attach(e,n||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,ho,!0),i("gutters",[],function(e){nn(e.options),ro(e)},!0),i("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Xi(e.display)+"px":"0",e.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(e){return As(e)},!0),i("scrollbarStyle","native",function(e){Es(e),As(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),i("lineNumbers",!1,function(e){nn(e.options),ro(e)},!0),i("firstLineNumber",1,ro,!0),i("lineNumberFormatter",function(e){return e},ro,!0),i("showCursorWhenSelecting",!1,ss,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(e,t){"nocursor"==t&&(us(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),i("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),i("dragDrop",!0,ao),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,ss,!0),i("singleCursorHeightPerLine",!0,ss,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,vn,!0),i("addModeClass",!1,vn,!0),i("pollInterval",100),i("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),i("historyEventDelay",1250),i("viewportMargin",10,function(e){return e.refresh()},!0),i("maxHighlightLength",1e4,vn,!0),i("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),i("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),i("autofocus",null),i("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),i("phrases",null)}(co),Ao=(Oo=co).optionHandlers,Lo=Oo.helpers={},Oo.prototype={constructor:Oo,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,s=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Ao.hasOwnProperty(e)&&$s(this,Ao[e])(this,t,s),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](El(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Hs(function(e,t){var i=e.token?e:Oo.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,i){for(var s=0,n=i(t);s<e.length&&i(e[s])<=n;)s++;e.splice(s,0,t)}(this.state.overlays,{mode:i,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,Us(this)}),removeOverlay:Hs(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var s=t[i].modeSpec;if(s==e||"string"==typeof e&&s.name==e)return t.splice(i,1),this.state.modeGen++,void Us(this)}}),indentLine:Hs(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ue(this.doc,e)&&mo(this,e,t,i)}),indentSelection:Hs(function(e){for(var t=this.doc.sel.ranges,i=-1,s=0;s<t.length;s++){var n=t[s];if(n.empty())n.head.line>i&&(mo(this,n.head.line,e,!0),i=n.head.line,s==this.doc.sel.primIndex&&ws(this));else{var l=n.from(),o=n.to(),r=Math.max(i,l.line);i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var a=r;a<i;++a)mo(this,a,e);var d=this.doc.sel.ranges;0==l.ch&&t.length==d.length&&0<d[s].from().ch&&Pn(this.doc,s,new hn(l,d[s].to()),V)}}}),getTokenAt:function(e,t){return Ht(this,e,t)},getLineTokens:function(e,t){return Ht(this,pe(e),t,!0)},getTokenTypeAt:function(e){e=Ce(this.doc,e);var t,i=Mt(this,oe(this.doc,e.line)),s=0,n=(i.length-1)/2,l=e.ch;if(0==l)t=i[2];else for(;;){var o=s+n>>1;if((o?i[2*o-1]:0)>=l)n=o;else{if(!(i[2*o+1]<l)){t=i[2*o+2];break}s=o+1}}var r=t?t.indexOf("overlay "):-1;return r<0?t:0==r?null:t.slice(0,r-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?Oo.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Lo.hasOwnProperty(t))return i;var s=Lo[t],n=this.getModeAt(e);if("string"==typeof n[t])s[n[t]]&&i.push(s[n[t]]);else if(n[t])for(var l=0;l<n[t].length;l++){var o=s[n[t][l]];o&&i.push(o)}else n.helperType&&s[n.helperType]?i.push(s[n.helperType]):s[n.name]&&i.push(s[n.name]);for(var r=0;r<s._global.length;r++){var a=s._global[r];a.pred(n,this)&&-1==$(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(e,t){var i=this.doc;return Pt(this,(e=we(i,null==e?i.first+i.size-1:e))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary();return Hi(this,null==e?i.head:"object"==typeof e?Ce(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return $i(this,Ce(this.doc,e),t||"page")},coordsChar:function(e,t){return Bi(this,(e=zi(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=zi(this,{top:e,left:0},t||"page").top,ce(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,i){var s,n=!1;if("number"==typeof e){var l=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:l<e&&(e=l,n=!0),s=oe(this.doc,e)}else s=e;return ji(this,s,{top:0,left:0},t||"page",i||n).top+(n?this.doc.height-We(s):0)},defaultTextHeight:function(){return Yi(this.display)},defaultCharWidth:function(){return Qi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,s,n){var l,o=this.display,r=(e=Hi(this,Ce(this.doc,e))).bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==s)r=e.top;else if("above"==s||"near"==s){var d=Math.max(o.wrapper.clientHeight,this.doc.height),h=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==s||e.bottom+t.offsetHeight>d)&&e.top>t.offsetHeight?r=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=d&&(r=e.bottom),a+t.offsetWidth>h&&(a=h-t.offsetWidth)}t.style.top=r+"px",t.style.left=t.style.right="","right"==n?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?a=0:"middle"==n&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),i&&(null!=(l=vs(this,{left:a,top:r,right:a+t.offsetWidth,bottom:r+t.offsetHeight})).scrollTop&&xs(this,l.scrollTop),null!=l.scrollLeft&&ks(this,l.scrollLeft))},triggerOnKeyDown:Hs(Gl),triggerOnKeyPress:Hs(Yl),triggerOnKeyUp:Kl,triggerOnMouseDown:Hs(Zl),execCommand:function(e){if(jl.hasOwnProperty(e))return jl[e].call(null,this)},triggerElectric:Hs(function(e){vo(this,e)}),findPosH:function(e,t,i,s){var n=1;t<0&&(n=-1,t=-t);for(var l=Ce(this.doc,e),o=0;o<t&&!(l=yo(this.doc,l,n,i,s)).hitSide;++o);return l},moveH:Hs(function(e,t){var i=this;this.extendSelectionsBy(function(s){return i.display.shift||i.doc.extend||s.empty()?yo(i.doc,s.head,e,t,i.options.rtlMoveVisually):e<0?s.from():s.to()},B)}),deleteH:Hs(function(e,t){var i=this.doc.sel,s=this.doc;i.somethingSelected()?s.replaceSelection("",null,"+delete"):Nl(this,function(i){var n=yo(s,i.head,e,t,!1);return e<0?{from:n,to:i.head}:{from:i.head,to:n}})}),findPosV:function(e,t,i,s){var n=1,l=s;t<0&&(n=-1,t=-t);for(var o=Ce(this.doc,e),r=0;r<t;++r){var a=Hi(this,o,"div");if(null==l?l=a.left:a.left=l,(o=So(this,a,n,i)).hitSide)break}return o},moveV:Hs(function(e,t){var i=this,s=this.doc,n=[],l=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(o){if(l)return e<0?o.from():o.to();var r=Hi(i,o.head,"div");null!=o.goalColumn&&(r.left=o.goalColumn),n.push(r.left);var a=So(i,r,e,t);return"page"==t&&o==s.sel.primary()&&bs(i,$i(i,a,"div").top-r.top),a},B),n.length)for(var o=0;o<s.sel.ranges.length;o++)s.sel.ranges[o].goalColumn=n[o]}),findWordAt:function(e){var t=oe(this.doc,e.line).text,i=e.ch,s=e.ch;if(t){var n=this.getHelper(e,"wordChars");"before"!=e.sticky&&s!=t.length||!i?++s:--i;for(var l=t.charAt(i),o=ee(l,n)?function(e){return ee(e,n)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};0<i&&o(t.charAt(i-1));)--i;for(;s<t.length&&o(t.charAt(s));)++s}return new hn(pe(e.line,i),pe(e.line,s))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?E(this.display.cursorDiv,"CodeMirror-overwrite"):k(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==R()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Hs(function(e,t){Cs(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-wi(this)-this.display.barHeight,width:e.scrollWidth-wi(this)-this.display.barWidth,clientHeight:yi(this),clientWidth:Ci(this)}},scrollIntoView:Hs(function(e,t){var i;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:pe(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(i=e,ys(this),this.curOp.scrollToPos=i):Ss(this,e.from,e.to,e.margin)}),setSize:Hs(function(e,t){var i=this,s=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=s(e)),null!=t&&(this.display.wrapper.style.height=s(t)),this.options.lineWrapping&&Ei(this);var n=this.display.viewFrom;this.doc.iter(n,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Bs(i,n,"widget");break}++n}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(e){return zs(this,e)},startOperation:function(){return Ms(this)},endOperation:function(){return Ps(this)},refresh:Hs(function(){var e=this.display.cachedTextHeight;Us(this),this.curOp.forceUpdate=!0,Ni(this),Cs(this,this.doc.scrollLeft,this.doc.scrollTop),en(this),(null==e||.5<Math.abs(e-Yi(this.display)))&&es(this),it(this,"refresh",this)}),swapDoc:Hs(function(e){var t=this.doc;return t.cm=null,yn(this,e),Ni(this),this.display.input.reset(),Cs(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ni(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ot(Oo),Oo.registerHelper=function(e,t,i){Lo.hasOwnProperty(e)||(Lo[e]=Oo[e]={_global:[]}),Lo[e][t]=i},Oo.registerGlobalHelper=function(e,t,i,s){Oo.registerHelper(e,t,s),Lo[e]._global.push({pred:i,val:s})};var Eo,No="iter insert remove copy getEditor constructor".split(" ");for(var Mo in fl.prototype)fl.prototype.hasOwnProperty(Mo)&&$(No,Mo)<0&&(co.prototype[Mo]=function(e){return function(){return e.apply(this.doc,arguments)}}(fl.prototype[Mo]));return ot(fl),co.inputStyles={textarea:Ro,contenteditable:xo},co.defineMode=function(e){co.defaults.mode||"null"==e||(co.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),St[e]=t}.apply(this,arguments)},co.defineMIME=function(e,t){xt[e]=t},co.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),co.defineMIME("text/plain","null"),co.defineExtension=function(e,t){co.prototype[e]=t},co.defineDocExtension=function(e,t){fl.prototype[e]=t},co.fromTextArea=function(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var i=R();t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}function s(){e.value=r.getValue()}var n;if(e.form&&(Ze(e.form,"submit",s),!t.leaveSubmitMethodAlone)){var l=e.form;n=l.submit;try{var o=l.submit=function(){s(),l.submit=n,l.submit(),l.submit=o}}catch(t){}}t.finishInit=function(t){t.save=s,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,s(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",s),"function"==typeof e.form.submit&&(e.form.submit=n))}},e.style.display="none";var r=co(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return r},(Eo=co).off=tt,Eo.on=Ze,Eo.wheelEventPixels=function(e){var t=rn(e);return t.x*=on,t.y*=on,t},Eo.Doc=fl,Eo.splitLines=bt,Eo.countColumn=j,Eo.findColumn=W,Eo.isWordChar=Z,Eo.Pass=H,Eo.signal=it,Eo.Line=Bt,Eo.changeEnd=mn,Eo.scrollbarModel=Rs,Eo.Pos=pe,Eo.cmpPos=ge,Eo.modes=St,Eo.mimeModes=xt,Eo.resolveMode=Tt,Eo.getMode=kt,Eo.modeExtensions=Dt,Eo.extendMode=function(e,t){F(t,Dt.hasOwnProperty(e)?Dt[e]:Dt[e]={})},Eo.copyState=It,Eo.startState=At,Eo.innerMode=Ot,Eo.commands=jl,Eo.keyMap=Dl,Eo.keyName=Rl,Eo.isModifierKey=Al,Eo.lookupKey=Ol,Eo.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==s){delete e[i];continue}for(var n=Y(i.split(" "),Il),l=0;l<n.length;l++){var o,r=void 0;o=l==n.length-1?(r=n.join(" "),s):(r=n.slice(0,l+1).join(" "),"...");var a=t[r];if(a){if(a!=o)throw new Error("Inconsistent bindings for "+r)}else t[r]=o}delete e[i]}for(var d in t)e[d]=t[d];return e},Eo.StringStream=Lt,Eo.SharedTextMarker=ul,Eo.TextMarker=hl,Eo.LineWidget=rl,Eo.e_preventDefault=rt,Eo.e_stopPropagation=at,Eo.e_stop=ht,Eo.addClass=E,Eo.contains=L,Eo.rmClass=k,Eo.keyNames=Sl,co.version="5.41.0",co},"object"==typeof i&&void 0!==t?t.exports=s():this.CodeMirror=s()},{}],12:[function(e,t,i){var s;s=function(e){"use strict";var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;e.defineMode("gfm",function(i,s){var n=/(?:\@ (.*?) )/,l=/(?:\@\ (.*?) )/,o=/(^|\s)(@all)(\s|$)/,r=0,a={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,i){if(e.match(n))return"usercontainer";if(e.match(l))return"groupcontainer";if(e.match(o))return"allcontainer";if(i.combineTokens=null,i.codeBlock)return e.match(/^```+/)?i.codeBlock=!1:e.skipToEnd(),null;if(e.sol()&&(i.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),i.codeBlock=!0,null;if("`"===e.peek()){e.next();var a=e.pos;e.eatWhile("`");var d=1+e.pos-a;return i.code?d===r&&(i.code=!1):(r=d,i.code=!0),null}if(i.code)return e.next(),null;if(e.eatSpace())return i.ateSpace=!0,null;if((e.sol()||i.ateSpace)&&(i.ateSpace=!1)!==s.gitHubSpice){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return i.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return i.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(i.combineTokens=!0,"link"):(e.next(),null)},blankLine:function(e){return e.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var h in s)d[h]=s[h];return d.name="markdown",e.overlayMode(e.getMode(i,d),a)},"markdown"),e.defineMIME("text/x-gfm","gfm")},"object"==typeof i&&"object"==typeof t?s(e("../../lib/codemirror"),e("../markdown/markdown"),e("../../addon/mode/overlay")):s(CodeMirror)},{"../../addon/mode/overlay":8,"../../lib/codemirror":11,"../markdown/markdown":13}],13:[function(e,t,i){var s;s=function(e){"use strict";e.defineMode("markdown",function(t,i){var s=e.getMode(t,"text/html"),n="null"==s.name;void 0===i.highlightFormatting&&(i.highlightFormatting=!1),void 0===i.maxBlockquoteDepth&&(i.maxBlockquoteDepth=0),void 0===i.taskLists&&(i.taskLists=!1),void 0===i.strikethrough&&(i.strikethrough=!1),void 0===i.emoji&&(i.emoji=!1),void 0===i.fencedCodeBlockHighlighting&&(i.fencedCodeBlockHighlighting=!0),void 0===i.xml&&(i.xml=!0),void 0===i.tokenTypeOverrides&&(i.tokenTypeOverrides={});var l={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var o in l)l.hasOwnProperty(o)&&i.tokenTypeOverrides[o]&&(l[o]=i.tokenTypeOverrides[o]);var r=/^([*\-_])(?:\s*\1){2,}\s*$/,a=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,d=/^\[(x| )\](?=\s)/i,h=i.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,c=/^ *(?:\={1,}|-{1,})\s*$/,u=/^[^#!\[\]*_\\<>` "'(~:]+/,m=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,p=/^\s*\[[^\]]+?\]:.*$/,g=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function f(e,t,i){return t.f=t.inline=i,i(e,t)}function _(e,t,i){return t.f=t.block=i,i(e,t)}function v(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==w){var i=n;if(!i){var l=e.innerMode(s,t.htmlState);i="xml"==l.mode.name&&null===l.state.tagStart&&!l.state.context&&l.state.tokenize.isInText}i&&(t.f=x,t.block=b,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function b(s,n){var o,u=s.column()===n.indentation,g=!(o=n.prevLine.stream)||!/\S/.test(o.string),_=n.indentedCode,v=n.prevLine.hr,b=!1!==n.list,w=(n.listStack[n.listStack.length-1]||0)+3;n.indentedCode=!1;var S=n.indentation;if(null===n.indentationDiff&&(n.indentationDiff=n.indentation,b)){for(n.em=!1,n.strong=!1,n.code=!1,n.strikethrough=!1,n.list=null;S<n.listStack[n.listStack.length-1];)n.listStack.pop(),n.listStack.length?n.indentation=n.listStack[n.listStack.length-1]:n.list=!1;!1!==n.list&&(n.indentationDiff=S-n.listStack[n.listStack.length-1])}var x=!(g||v||n.prevLine.header||b&&_||n.prevLine.fencedCodeEnd),T=(!1===n.list||v||g)&&n.indentation<=w&&s.match(r),k=null;if(4<=n.indentationDiff&&(_||n.prevLine.fencedCodeEnd||n.prevLine.header||g))return s.skipToEnd(),n.indentedCode=!0,l.code;if(s.eatSpace())return null;if(u&&n.indentation<=w&&(k=s.match(h))&&k[1].length<=6)return n.quote=0,n.header=k[1].length,n.thisLine.header=!0,i.highlightFormatting&&(n.formatting="header"),n.f=n.inline,y(n);if(n.indentation<=w&&s.eat(">"))return n.quote=u?1:n.quote+1,i.highlightFormatting&&(n.formatting="quote"),s.eatSpace(),y(n);if(!T&&!n.setext&&u&&n.indentation<=w&&(k=s.match(a))){var D=k[1]?"ol":"ul";return n.indentation=S+s.current().length,n.list=!0,n.quote=0,n.listStack.push(n.indentation),i.taskLists&&s.match(d,!1)&&(n.taskList=!0),n.f=n.inline,i.highlightFormatting&&(n.formatting=["list","list-"+D]),y(n)}return u&&n.indentation<=w&&(k=s.match(m,!0))?(n.quote=0,n.fencedEndRE=new RegExp(k[1]+"+ *$"),n.localMode=i.fencedCodeBlockHighlighting&&function(i){if(e.findModeByName){var s=e.findModeByName(i);s&&(i=s.mime||s.mimes[0])}var n=e.getMode(t,i);return"null"==n.name?null:n}(k[2]),n.localMode&&(n.localState=e.startState(n.localMode)),n.f=n.block=C,i.highlightFormatting&&(n.formatting="code-block"),n.code=-1,y(n)):n.setext||!(x&&b||n.quote||!1!==n.list||n.code||T||p.test(s.string))&&(k=s.lookAhead(1))&&(k=k.match(c))?(n.setext?(n.header=n.setext,n.setext=0,s.skipToEnd(),i.highlightFormatting&&(n.formatting="header")):(n.header="="==k[0].charAt(0)?1:2,n.setext=n.header),n.thisLine.header=!0,n.f=n.inline,y(n)):T?(s.skipToEnd(),n.hr=!0,n.thisLine.hr=!0,l.hr):"["===s.peek()?f(s,n,I):f(s,n,n.inline)}function w(t,i){var l=s.token(t,i.htmlState);if(!n){var o=e.innerMode(s,i.htmlState);("xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText||i.md_inside&&-1<t.current().indexOf(">"))&&(i.f=x,i.block=b,i.htmlState=null)}return l}function C(e,t){var s,n=t.listStack[t.listStack.length-1]||0,o=t.indentation<n,r=n+3;return t.fencedEndRE&&t.indentation<=r&&(o||e.match(t.fencedEndRE))?(i.highlightFormatting&&(t.formatting="code-block"),o||(s=y(t)),t.localMode=t.localState=null,t.block=b,t.f=x,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,o?_(e,t,t.block):s):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),l.code)}function y(e){var t=[];if(e.formatting){t.push(l.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var s=0;s<e.formatting.length;s++)t.push(l.formatting+"-"+e.formatting[s]),"header"===e.formatting[s]&&t.push(l.formatting+"-"+e.formatting[s]+"-"+e.header),"quote"===e.formatting[s]&&(!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=e.quote?t.push(l.formatting+"-"+e.formatting[s]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(l.linkHref,"url"):(e.strong&&t.push(l.strong),e.em&&t.push(l.em),e.strikethrough&&t.push(l.strikethrough),e.emoji&&t.push(l.emoji),e.linkText&&t.push(l.linkText),e.code&&t.push(l.code),e.image&&t.push(l.image),e.imageAltText&&t.push(l.imageAltText,"link"),e.imageMarker&&t.push(l.imageMarker)),e.header&&t.push(l.header,l.header+"-"+e.header),e.quote&&(t.push(l.quote),!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=e.quote?t.push(l.quote+"-"+e.quote):t.push(l.quote+"-"+i.maxBlockquoteDepth)),!1!==e.list){var n=(e.listStack.length-1)%3;n?1===n?t.push(l.list2):t.push(l.list3):t.push(l.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function S(e,t){if(e.match(u,!0))return y(t)}function x(t,n){var o=n.text(t,n);if(void 0!==o)return o;if(n.list)return n.list=null,y(n);if(n.taskList)return" "===t.match(d,!0)[1]?n.taskOpen=!0:n.taskClosed=!0,i.highlightFormatting&&(n.formatting="task"),n.taskList=!1,y(n);if(n.taskOpen=!1,n.taskClosed=!1,n.header&&t.match(/^#+$/,!0))return i.highlightFormatting&&(n.formatting="header"),y(n);var r=t.next();if(n.linkTitle){n.linkTitle=!1;var a=r;"("===r&&(a=")");var h="^\\s*(?:[^"+(a=(a+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+a;if(t.match(new RegExp(h),!0))return l.linkHref}if("`"===r){var c=n.formatting;i.highlightFormatting&&(n.formatting="code"),t.eatWhile("`");var u=t.current().length;if(0!=n.code||n.quote&&1!=u){if(u!=n.code)return n.formatting=c,y(n);var m=y(n);return n.code=0,m}return n.code=u,y(n)}if(n.code)return y(n);if("\\"===r&&(t.next(),i.highlightFormatting)){var p=y(n),f=l.formatting+"-escape";return p?p+" "+f:f}if("!"===r&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return n.imageMarker=!0,n.image=!0,i.highlightFormatting&&(n.formatting="image"),y(n);if("["===r&&n.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return n.imageMarker=!1,n.imageAltText=!0,i.highlightFormatting&&(n.formatting="image"),y(n);if("]"===r&&n.imageAltText)return i.highlightFormatting&&(n.formatting="image"),p=y(n),n.imageAltText=!1,n.image=!1,n.inline=n.f=k,p;if("["===r&&!n.image)return n.linkText&&t.match(/^.*?\]/)||(n.linkText=!0,i.highlightFormatting&&(n.formatting="link")),y(n);if("]"===r&&n.linkText)return i.highlightFormatting&&(n.formatting="link"),p=y(n),n.linkText=!1,n.inline=n.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?k:x,p;if("<"===r&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return n.f=n.inline=T,i.highlightFormatting&&(n.formatting="link"),(p=y(n))?p+=" ":p="",p+l.linkInline;if("<"===r&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return n.f=n.inline=T,i.highlightFormatting&&(n.formatting="link"),(p=y(n))?p+=" ":p="",p+l.linkEmail;if(i.xml&&"<"===r&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var v=t.string.indexOf(">",t.pos);if(-1!=v){var b=t.string.substring(t.start,v);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(b)&&(n.md_inside=!0)}return t.backUp(1),n.htmlState=e.startState(s),_(t,n,w)}if(i.xml&&"<"===r&&t.match(/^\/\w*?>/))return n.md_inside=!1,"tag";if("*"===r||"_"===r){for(var C=1,S=1==t.pos?" ":t.string.charAt(t.pos-2);C<3&&t.eat(r);)C++;var D=t.peek()||" ",I=!/\s/.test(D)&&(!g.test(D)||/\s/.test(S)||g.test(S)),O=!/\s/.test(S)&&(!g.test(S)||/\s/.test(D)||g.test(D)),A=null,L=null;if(C%2&&(n.em||!I||"*"!==r&&O&&!g.test(S)?n.em!=r||!O||"*"!==r&&I&&!g.test(D)||(A=!1):A=!0),1<C&&(n.strong||!I||"*"!==r&&O&&!g.test(S)?n.strong!=r||!O||"*"!==r&&I&&!g.test(D)||(L=!1):L=!0),null!=L||null!=A)return i.highlightFormatting&&(n.formatting=null==A?"strong":null==L?"em":"strong em"),!0===A&&(n.em=r),!0===L&&(n.strong=r),m=y(n),!1===A&&(n.em=!1),!1===L&&(n.strong=!1),m}else if(" "===r&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return y(n);t.backUp(1)}if(i.strikethrough)if("~"===r&&t.eatWhile(r)){if(n.strikethrough)return i.highlightFormatting&&(n.formatting="strikethrough"),m=y(n),n.strikethrough=!1,m;if(t.match(/^[^\s]/,!1))return n.strikethrough=!0,i.highlightFormatting&&(n.formatting="strikethrough"),y(n)}else if(" "===r&&t.match(/^~~/,!0)){if(" "===t.peek())return y(n);t.backUp(2)}if(i.emoji&&":"===r&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){n.emoji=!0,i.highlightFormatting&&(n.formatting="emoji");var R=y(n);return n.emoji=!1,R}return" "===r&&(t.match(/^ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),y(n)}function T(e,t){if(">"!==e.next())return e.match(/^[^>]+/,!0),l.linkInline;t.f=t.inline=x,i.highlightFormatting&&(t.formatting="link");var s=y(t);return s?s+=" ":s="",s+l.linkInline}function k(e,t){if(e.eatSpace())return null;var s,n=e.next();return"("===n||"["===n?(t.f=t.inline=(s="("===n?")":"]",function(e,t){if(e.next()!==s)return e.match(D[s]),t.linkHref=!0,y(t);t.f=t.inline=x,i.highlightFormatting&&(t.formatting="link-string");var n=y(t);return t.linkHref=!1,n}),i.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,y(t)):"error"}var D={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function I(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=O,e.next(),i.highlightFormatting&&(t.formatting="link"),t.linkText=!0,y(t)):f(e,t,x)}function O(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=A,i.highlightFormatting&&(t.formatting="link");var s=y(t);return t.linkText=!1,s}return e.match(/^([^\]\\]|\\.)+/,!0),l.linkText}function A(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=x,l.linkHref+" url")}var L={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:x,text:S,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(s,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return v(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=w)){var i=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=i,t.indentationDiff=null,0<i)return null}}return t.f(e,t)},innerMode:function(e){return e.block==w?{state:e.htmlState,mode:s}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:L}},indent:function(t,i,n){return t.block==w&&s.indent?s.indent(t.htmlState,i,n):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,i,n):e.Pass},blankLine:v,getType:y,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return L},"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")},"object"==typeof i&&"object"==typeof t?s(e("../../lib/codemirror"),e("../xml/xml"),e("../meta")):s(CodeMirror)},{"../../lib/codemirror":11,"../meta":14,"../xml/xml":15}],14:[function(e,t,i){!function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var i=e.modeInfo[t];i.mimes&&(i.mime=i.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var i=0;i<e.modeInfo.length;i++){var s=e.modeInfo[i];if(s.mime==t)return s;if(s.mimes)for(var n=0;n<s.mimes.length;n++)if(s.mimes[n]==t)return s}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var i=0;i<e.modeInfo.length;i++){var s=e.modeInfo[i];if(s.ext)for(var n=0;n<s.ext.length;n++)if(s.ext[n]==t)return s}},e.findModeByFileName=function(t){for(var i=0;i<e.modeInfo.length;i++){var s=e.modeInfo[i];if(s.file&&s.file.test(t))return s}var n=t.lastIndexOf("."),l=-1<n&&t.substring(n+1,t.length);if(l)return e.findModeByExtension(l)},e.findModeByName=function(t){t=t.toLowerCase();for(var i=0;i<e.modeInfo.length;i++){var s=e.modeInfo[i];if(s.name.toLowerCase()==t)return s;if(s.alias)for(var n=0;n<s.alias.length;n++)if(s.alias[n].toLowerCase()==t)return s}}}("object"==typeof i&&"object"==typeof t?e("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":11}],15:[function(e,t,i){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(s,n){var l,o,r=s.indentUnit,a={},d=n.htmlMode?t:i;for(var h in d)a[h]=d[h];for(var h in n)a[h]=n[h];function c(e,t){function i(i){return(t.tokenize=i)(e,t)}var s=e.next();return"<"==s?e.eat("!")?e.eat("[")?e.match("CDATA[")?i(m("atom","]]>")):null:e.match("--")?i(m("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(function e(t){return function(i,s){for(var n;null!=(n=i.next());){if("<"==n)return s.tokenize=e(t+1),s.tokenize(i,s);if(">"==n){if(1!=t)return s.tokenize=e(t-1),s.tokenize(i,s);s.tokenize=c;break}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=m("meta","?>"),"meta"):(l=e.eat("/")?"closeTag":"openTag",t.tokenize=u,"tag bracket"):"&"!=s?(e.eatWhile(/[^&<]/),null):(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error"}function u(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=c,l=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return l="equals",null;if("<"!=i)return/[\'\"]/.test(i)?(t.tokenize=(s=i,(n=function(e,t){for(;!e.eol();)if(e.next()==s){t.tokenize=u;break}return"string"}).isInAttribute=!0,n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");t.tokenize=c,t.state=f,t.tagName=t.tagStart=null;var s,n,o=t.tokenize(e,t);return o?o+" tag error":"tag error"}function m(e,t){return function(i,s){for(;!i.eol();){if(i.match(t)){s.tokenize=c;break}i.next()}return e}}function p(e){e.context&&(e.context=e.context.prev)}function g(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!a.contextGrabbers.hasOwnProperty(i)||!a.contextGrabbers[i].hasOwnProperty(t))return;p(e)}}function f(e,t,i){return"openTag"==e?(i.tagStart=t.column(),_):"closeTag"==e?v:f}function _(e,t,i){return"word"==e?(i.tagName=t.current(),o="tag",C):a.allowMissingTagName&&"endTag"==e?(o="tag bracket",C(e,t,i)):(o="error",_)}function v(e,t,i){if("word"!=e)return a.allowMissingTagName&&"endTag"==e?(o="tag bracket",b(e,t,i)):(o="error",w);var s=t.current();return i.context&&i.context.tagName!=s&&a.implicitlyClosed.hasOwnProperty(i.context.tagName)&&p(i),i.context&&i.context.tagName==s||!1===a.matchClosing?(o="tag",b):(o="tag error",w)}function b(e,t,i){return"endTag"!=e?(o="error",b):(p(i),f)}function w(e,t,i){return o="error",b(e,0,i)}function C(e,t,i){if("word"==e)return o="attribute",y;if("endTag"!=e&&"selfcloseTag"!=e)return o="error",C;var s=i.tagName,n=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||a.autoSelfClosers.hasOwnProperty(s)?g(i,s):(g(i,s),i.context=new function(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(a.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}(i,s,n==i.indented)),f}function y(e,t,i){return"equals"==e?S:(a.allowMissing||(o="error"),C(e,0,i))}function S(e,t,i){return"string"==e?x:"word"==e&&a.allowUnquoted?(o="string",C):(o="error",C(e,0,i))}function x(e,t,i){return"string"==e?x:C(e,0,i)}return c.isInText=!0,{startState:function(e){var t={tokenize:c,state:f,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;l=null;var i=t.tokenize(e,t);return(i||l)&&"comment"!=i&&(o=null,t.state=t.state(l||i,e,t),o&&(i="error"==o?i+" error":o)),i},indent:function(t,i,s){var n=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+r;if(n&&n.noIndent)return e.Pass;if(t.tokenize!=u&&t.tokenize!=c)return s?s.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==a.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+r*(a.multilineTagIndentFactor||1);if(a.alignCDATA&&/<!\[CDATA\[/.test(i))return 0;var l=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(l&&l[1])for(;n;){if(n.tagName==l[2]){n=n.prev;break}if(!a.implicitlyClosed.hasOwnProperty(n.tagName))break;n=n.prev}else if(l)for(;n;){var o=a.contextGrabbers[n.tagName];if(!o||!o.hasOwnProperty(l[2]))break;n=n.prev}for(;n&&n.prev&&!n.startOfLine;)n=n.prev;return n?n.indent+r:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:a.htmlMode?"html":"xml",helperType:a.htmlMode?"html":"xml",skipAttribute:function(e){e.state==S&&(e.state=C)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],16:[function(e,t,i){i.read=function(e,t,i,s,n){var l,o,r=8*n-s-1,a=(1<<r)-1,d=a>>1,h=-7,c=i?n-1:0,u=i?-1:1,m=e[t+c];for(c+=u,l=m&(1<<-h)-1,m>>=-h,h+=r;0<h;l=256*l+e[t+c],c+=u,h-=8);for(o=l&(1<<-h)-1,l>>=-h,h+=s;0<h;o=256*o+e[t+c],c+=u,h-=8);if(0===l)l=1-d;else{if(l===a)return o?NaN:1/0*(m?-1:1);o+=Math.pow(2,s),l-=d}return(m?-1:1)*o*Math.pow(2,l-s)},i.write=function(e,t,i,s,n,l){var o,r,a,d=8*l-n-1,h=(1<<d)-1,c=h>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,m=s?0:l-1,p=s?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),2<=(t+=1<=o+c?u/a:u*Math.pow(2,1-c))*a&&(o++,a/=2),h<=o+c?(r=0,o=h):1<=o+c?(r=(t*a-1)*Math.pow(2,n),o+=c):(r=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));8<=n;e[i+m]=255&r,m+=p,r/=256,n-=8);for(o=o<<n|r,d+=n;0<d;e[i+m]=255&o,m+=p,o/=256,d-=8);e[i+m-p]|=128*g}},{}],17:[function(e,t,i){(function(e){!function(e){"use strict";var s={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:f,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||w.defaults,this.rules=s.normal,this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.options.tables?this.rules=s.tables:this.rules=s.gfm)}s._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,s._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,s.def=u(s.def).replace("label",s._label).replace("title",s._title).getRegex(),s.bullet=/(?:[*+-]|\d+\.)/,s.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,s.item=u(s.item,"gm").replace(/bull/g,s.bullet).getRegex(),s.list=u(s.list).replace(/bull/g,s.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+s.def.source+")").getRegex(),s._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",s._comment=/<!--(?!-?>)[\s\S]*?-->/,s.html=u(s.html,"i").replace("comment",s._comment).replace("tag",s._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),s.paragraph=u(s.paragraph).replace("hr",s.hr).replace("heading",s.heading).replace("lheading",s.lheading).replace("tag",s._tag).getRegex(),s.blockquote=u(s.blockquote).replace("paragraph",s.paragraph).getRegex(),s.normal=_({},s),s.gfm=_({},s.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),s.gfm.paragraph=u(s.paragraph).replace("(?!","(?!"+s.gfm.fences.source.replace("\\1","\\2")+"|"+s.list.source.replace("\\1","\\3")+"|").getRegex(),s.tables=_({},s.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),s.pedantic=_({},s.normal,{html:u("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",s._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),n.rules=s,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,t){var i,n,l,o,r,a,d,h,c,u,m,p,g,f,_,w;for(e=e.replace(/^ +$/gm,"");e;)if((l=this.rules.newline.exec(e))&&(e=e.substring(l[0].length),1<l[0].length&&this.tokens.push({type:"space"})),l=this.rules.code.exec(e))e=e.substring(l[0].length),l=l[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?l:b(l,"\n")});else if(l=this.rules.fences.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"code",lang:l[2],text:l[3]||""});else if(l=this.rules.heading.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"heading",depth:l[1].length,text:l[2]});else if(t&&(l=this.rules.nptable.exec(e))&&(a={type:"table",header:v(l[1].replace(/^ *| *\| *$/g,"")),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3]?l[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(l[0].length),m=0;m<a.align.length;m++)/^ *-+: *$/.test(a.align[m])?a.align[m]="right":/^ *:-+: *$/.test(a.align[m])?a.align[m]="center":/^ *:-+ *$/.test(a.align[m])?a.align[m]="left":a.align[m]=null;for(m=0;m<a.cells.length;m++)a.cells[m]=v(a.cells[m],a.header.length);this.tokens.push(a)}else if(l=this.rules.hr.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"hr"});else if(l=this.rules.blockquote.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"blockquote_start"}),l=l[0].replace(/^ *> ?/gm,""),this.token(l,t),this.tokens.push({type:"blockquote_end"});else if(l=this.rules.list.exec(e)){for(e=e.substring(l[0].length),d={type:"list_start",ordered:f=1<(o=l[2]).length,start:f?+o:"",loose:!1},this.tokens.push(d),i=!(h=[]),g=(l=l[0].match(this.rules.item)).length,m=0;m<g;m++)u=(a=l[m]).length,~(a=a.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(u-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&m!==g-1&&(o===(r=s.bullet.exec(l[m+1])[0])||1<o.length&&1<r.length||(e=l.slice(m+1).join("\n")+e,m=g-1)),n=i||/\n\n(?!\s*$)/.test(a),m!==g-1&&(i="\n"===a.charAt(a.length-1),n||(n=i)),n&&(d.loose=!0),w=void 0,(_=/^\[[ xX]\] /.test(a))&&(w=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),c={type:"list_item_start",task:_,checked:w,loose:n},h.push(c),this.tokens.push(c),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(d.loose)for(g=h.length,m=0;m<g;m++)h[m].loose=!0;this.tokens.push({type:"list_end"})}else if(l=this.rules.html.exec(e))e=e.substring(l[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===l[1]||"script"===l[1]||"style"===l[1]),text:l[0]});else if(t&&(l=this.rules.def.exec(e)))e=e.substring(l[0].length),l[3]&&(l[3]=l[3].substring(1,l[3].length-1)),p=l[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[p]||(this.tokens.links[p]={href:l[2],title:l[3]});else if(t&&(l=this.rules.table.exec(e))&&(a={type:"table",header:v(l[1].replace(/^ *| *\| *$/g,"")),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3]?l[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(l[0].length),m=0;m<a.align.length;m++)/^ *-+: *$/.test(a.align[m])?a.align[m]="right":/^ *:-+: *$/.test(a.align[m])?a.align[m]="center":/^ *:-+ *$/.test(a.align[m])?a.align[m]="left":a.align[m]=null;for(m=0;m<a.cells.length;m++)a.cells[m]=v(a.cells[m].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(l=this.rules.lheading.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"heading",depth:"="===l[2]?1:2,text:l[1]});else if(t&&(l=this.rules.paragraph.exec(e)))e=e.substring(l[0].length),this.tokens.push({type:"paragraph",text:"\n"===l[1].charAt(l[1].length-1)?l[1].slice(0,-1):l[1]});else if(l=this.rules.text.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"text",text:l[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var l={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:f,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:f,text:/^(`+|[^`])[\s\S]*?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function o(e,t){if(this.options=t||w.defaults,this.links=e,this.rules=l.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=l.pedantic:this.options.gfm&&(this.options.breaks?this.rules=l.breaks:this.rules=l.gfm)}function r(e){this.options=e||w.defaults}function a(){}function d(e){this.tokens=[],this.token=null,this.options=e||w.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function h(e,t){if(t){if(h.escapeTest.test(e))return e.replace(h.escapeReplace,function(e){return h.replacements[e]})}else if(h.escapeTestNoEncode.test(e))return e.replace(h.escapeReplaceNoEncode,function(e){return h.replacements[e]});return e}function c(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function u(e,t){return e=e.source||e,t=t||"",{replace:function(t,i){return i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,i),this},getRegex:function(){return new RegExp(e,t)}}}function m(e,t){return p[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?p[" "+e]=e+"/":p[" "+e]=b(e,"/",!0)),e=p[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}l._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,l._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,l._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,l.autolink=u(l.autolink).replace("scheme",l._scheme).replace("email",l._email).getRegex(),l._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,l.tag=u(l.tag).replace("comment",s._comment).replace("attribute",l._attribute).getRegex(),l._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,l._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f\\]*\)|[^\s\x00-\x1f()\\])*?)/,l._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,l.link=u(l.link).replace("label",l._label).replace("href",l._href).replace("title",l._title).getRegex(),l.reflink=u(l.reflink).replace("label",l._label).getRegex(),l.normal=_({},l),l.pedantic=_({},l.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:u(/^!?\[(label)\]\((.*?)\)/).replace("label",l._label).getRegex(),reflink:u(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",l._label).getRegex()}),l.gfm=_({},l.normal,{escape:u(l.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:u(l.text).replace("]|","~]|").replace("|$","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|$").getRegex()}),l.gfm.url=u(l.gfm.url).replace("email",l.gfm._extended_email).getRegex(),l.breaks=_({},l.gfm,{br:u(l.br).replace("{2,}","*").getRegex(),text:u(l.gfm.text).replace("{2,}","*").getRegex()}),o.rules=l,o.output=function(e,t,i){return new o(t,i).output(e)},o.prototype.output=function(e){for(var t,i,s,n,l,r,a="";e;)if(l=this.rules.escape.exec(e))e=e.substring(l[0].length),a+=l[1];else if(l=this.rules.autolink.exec(e))e=e.substring(l[0].length),s="@"===l[2]?"mailto:"+(i=h(this.mangle(l[1]))):i=h(l[1]),a+=this.renderer.link(s,null,i);else if(this.inLink||!(l=this.rules.url.exec(e))){if(l=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(l[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(l[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(l[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(l[0])&&(this.inRawBlock=!1),e=e.substring(l[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):h(l[0]):l[0];else if(l=this.rules.link.exec(e))e=e.substring(l[0].length),this.inLink=!0,s=l[2],n=this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s))?(s=t[1],t[3]):"":l[3]?l[3].slice(1,-1):"",s=s.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(l,{href:o.escapes(s),title:o.escapes(n)}),this.inLink=!1;else if((l=this.rules.reflink.exec(e))||(l=this.rules.nolink.exec(e))){if(e=e.substring(l[0].length),t=(l[2]||l[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=l[0].charAt(0),e=l[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(l,t),this.inLink=!1}else if(l=this.rules.strong.exec(e))e=e.substring(l[0].length),a+=this.renderer.strong(this.output(l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.em.exec(e))e=e.substring(l[0].length),a+=this.renderer.em(this.output(l[6]||l[5]||l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.code.exec(e))e=e.substring(l[0].length),a+=this.renderer.codespan(h(l[2].trim(),!0));else if(l=this.rules.br.exec(e))e=e.substring(l[0].length),a+=this.renderer.br();else if(l=this.rules.del.exec(e))e=e.substring(l[0].length),a+=this.renderer.del(this.output(l[1]));else if(l=this.rules.text.exec(e))e=e.substring(l[0].length),this.inRawBlock?a+=this.renderer.text(l[0]):a+=this.renderer.text(h(this.smartypants(l[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===l[2])s="mailto:"+(i=h(l[0]));else{for(;r=l[0],l[0]=this.rules._backpedal.exec(l[0])[0],r!==l[0];);i=h(l[0]),s="www."===l[1]?"http://"+i:i}e=e.substring(l[0].length),a+=this.renderer.link(s,null,i)}return a},o.escapes=function(e){return e?e.replace(o.rules._escapes,"$1"):e},o.prototype.outputLink=function(e,t){var i=t.href,s=t.title?h(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(i,s,this.output(e[1])):this.renderer.image(i,s,h(e[1]))},o.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},o.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,i="",s=e.length,n=0;n<s;n++)t=e.charCodeAt(n),.5<Math.random()&&(t="x"+t.toString(16)),i+="&#"+t+";";return i},r.prototype.code=function(e,t,i){if(this.options.highlight){var s=this.options.highlight(e,t);null!=s&&s!==e&&(i=!0,e=s)}return t?'<pre><code class="'+this.options.langPrefix+h(t,!0)+'">'+(i?e:h(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:h(e,!0))+"</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t,i){var s=t?"ol":"ul";return"<"+s+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+s+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,i){if(this.options.sanitize){try{var s=decodeURIComponent(c(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return i}if(0===s.indexOf("javascript:")||0===s.indexOf("vbscript:")||0===s.indexOf("data:"))return i}this.options.baseUrl&&!g.test(e)&&(e=m(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return i}var n='<a href="'+h(e)+'"';return t&&(n+=' title="'+t+'"'),n+">"+i+"</a>"},r.prototype.image=function(e,t,i){this.options.baseUrl&&!g.test(e)&&(e=m(this.options.baseUrl,e));var s='<img src="'+e+'" alt="'+i+'"';return t&&(s+=' title="'+t+'"'),s+(this.options.xhtml?"/>":">")},r.prototype.text=function(e){return e},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(e){return e},a.prototype.link=a.prototype.image=function(e,t,i){return""+i},a.prototype.br=function(){return""},d.parse=function(e,t){return new d(t).parse(e)},d.prototype.parse=function(e){this.inline=new o(e.links,this.options),this.inlineText=new o(e.links,_({},this.options,{renderer:new a})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},d.prototype.next=function(){return this.token=this.tokens.pop()},d.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},d.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},d.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,i,s,n="",l="";for(i="",e=0;e<this.token.header.length;e++)i+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(n+=this.renderer.tablerow(i),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],i="",s=0;s<t.length;s++)i+=this.renderer.tablecell(this.inline.output(t[s]),{header:!1,align:this.token.align[s]});l+=this.renderer.tablerow(i)}return this.renderer.table(n,l);case"blockquote_start":for(l="";"blockquote_end"!==this.next().type;)l+=this.tok();return this.renderer.blockquote(l);case"list_start":l="";for(var o=this.token.ordered,r=this.token.start;"list_end"!==this.next().type;)l+=this.tok();return this.renderer.list(l,o,r);case"list_item_start":l="";var a=this.token.loose;for(this.token.task&&(l+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)l+=a||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(l);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},h.escapeTest=/[&<>"']/,h.escapeReplace=/[&<>"']/g,h.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,h.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var p={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(){}function _(e){for(var t,i,s=1;s<arguments.length;s++)for(i in t=arguments[s])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function v(e,t){var i=e.replace(/\|/g,function(e,t,i){for(var s=!1,n=t;0<=--n&&"\\"===i[n];)s=!s;return s?"|":" |"}).split(/ \|/),s=0;if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function b(e,t,i){if(0===e.length)return"";for(var s=0;s<e.length;){var n=e.charAt(e.length-s-1);if(n!==t||i){if(n===t||!i)break;s++}else s++}return e.substr(0,e.length-s)}function w(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(i||"function"==typeof t){i||(i=t,t=null);var s,l,o=(t=_({},w.defaults,t||{})).highlight,r=0;try{s=n.lex(e,t)}catch(e){return i(e)}l=s.length;var a=function(e){if(e)return t.highlight=o,i(e);var n;try{n=d.parse(s,t)}catch(n){e=n}return t.highlight=o,e?i(e):i(null,n)};if(!o||o.length<3)return a();if(delete t.highlight,!l)return a();for(;r<s.length;r++)!function(e){"code"!==e.type?--l||a():o(e.text,e.lang,function(t,i){return t?a(t):null==i||i===e.text?--l||a():(e.text=i,e.escaped=!0,void(--l||a()))})}(s[r])}else try{return t&&(t=_({},w.defaults,t)),d.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||w.defaults).silent)return"<p>An error occurred:</p><pre>"+h(e.message+"",!0)+"</pre>";throw e}}f.exec=f,w.options=w.setOptions=function(e){return _(w.defaults,e),w},w.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new r,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},w.defaults=w.getDefaults(),w.Parser=d,w.parser=d.parse,w.Renderer=r,w.TextRenderer=a,w.Lexer=n,w.lexer=n.lex,w.InlineLexer=o,w.inlineLexer=o.output,w.parse=w,void 0!==t&&"object"==typeof i?t.exports=w:e.marked=w}(this||("undefined"!=typeof window?window:e))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,i){(function(i,s){var n;!function(){"use strict";(n=function(e,t,i,n){n=n||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=n.flags||{},this.memoized={},this.loaded=!1;var l,o,r,a,d,h=this;function c(e,t){var i=h._readFile(e,null,n.asyncLoad);n.asyncLoad?i.then(function(e){t(e)}):t(i)}function u(e){t=e,i&&p()}function m(e){i=e,t&&p()}function p(){for(h.rules=h._parseAFF(t),h.compoundRuleCodes={},o=0,a=h.compoundRules.length;o<a;o++){var e=h.compoundRules[o];for(r=0,d=e.length;r<d;r++)h.compoundRuleCodes[e[r]]=[]}for(o in"ONLYINCOMPOUND"in h.flags&&(h.compoundRuleCodes[h.flags.ONLYINCOMPOUND]=[]),h.dictionaryTable=h._parseDIC(i),h.compoundRuleCodes)0===h.compoundRuleCodes[o].length&&delete h.compoundRuleCodes[o];for(o=0,a=h.compoundRules.length;o<a;o++){var s=h.compoundRules[o],l="";for(r=0,d=s.length;r<d;r++){var c=s[r];c in h.compoundRuleCodes?l+="("+h.compoundRuleCodes[c].join("|")+")":l+=c}h.compoundRules[o]=new RegExp(l,"i")}h.loaded=!0,n.asyncLoad&&n.loadedCallback&&n.loadedCallback(h)}return e&&(h.dictionary=e,t&&i?p():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(l=n.dictionaryPath?n.dictionaryPath:"typo/dictionaries",t||c(chrome.extension.getURL(l+"/"+e+"/"+e+".aff"),u),i||c(chrome.extension.getURL(l+"/"+e+"/"+e+".dic"),m)):(l=n.dictionaryPath?n.dictionaryPath:void 0!==s?s+"/dictionaries":"./dictionaries",t||c(l+"/"+e+"/"+e+".aff",u),i||c(l+"/"+e+"/"+e+".dic",m))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(t,s,n){if(s=s||"utf8","undefined"!=typeof XMLHttpRequest){var l,o=new XMLHttpRequest;return o.open("GET",t,n),n&&(l=new Promise(function(e,t){o.onload=function(){200===o.status?e(o.responseText):t(o.statusText)},o.onerror=function(){t(o.statusText)}})),o.overrideMimeType&&o.overrideMimeType("text/plain; charset="+s),o.send(null),n?l:o.responseText}if(void 0!==e){var r=e("fs");try{if(r.existsSync(t)){var a=r.statSync(t),d=r.openSync(t,"r"),h=new i(a.size);return r.readSync(d,h,0,h.length,null),h.toString(s,0,h.length)}console.log("Path "+t+" does not exist.")}catch(t){return console.log(t),""}}},_parseAFF:function(e){var t,i,s,n,l,o,r,a={},d=(e=this._removeAffixComments(e)).split("\n");for(n=0,o=d.length;n<o;n++){var h=(t=d[n]).split(/\s+/),c=h[0];if("PFX"==c||"SFX"==c){var u=h[1],m=h[2],p=[];for(r=(l=n+1)+(i=parseInt(h[3],10));l<r;l++){var g=(s=d[l].split(/\s+/))[2],f=s[3].split("/"),_=f[0];"0"===_&&(_="");var v=this.parseRuleCodes(f[1]),b=s[4],w={};w.add=_,0<v.length&&(w.continuationClasses=v),"."!==b&&(w.match="SFX"===c?new RegExp(b+"$"):new RegExp("^"+b)),"0"!=g&&(w.remove="SFX"===c?new RegExp(g+"$"):g),p.push(w)}a[u]={type:c,combineable:"Y"==m,entries:p},n+=i}else if("COMPOUNDRULE"===c){for(r=(l=n+1)+(i=parseInt(h[1],10));l<r;l++)s=(t=d[l]).split(/\s+/),this.compoundRules.push(s[1]);n+=i}else"REP"===c?3===(s=t.split(/\s+/)).length&&this.replacementTable.push([s[1],s[2]]):this.flags[c]=h[1]}return a},_removeAffixComments:function(e){return(e=(e=(e=e.replace(/^\s*#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split("\n"),i={};function s(e,t){i.hasOwnProperty(e)||(i[e]=null),0<t.length&&(null===i[e]&&(i[e]=[]),i[e].push(t))}for(var n=1,l=t.length;n<l;n++){var o=t[n].split("/",2),r=o[0];if(1<o.length){var a=this.parseRuleCodes(o[1]);"NEEDAFFIX"in this.flags&&-1!=a.indexOf(this.flags.NEEDAFFIX)||s(r,a);for(var d=0,h=a.length;d<h;d++){var c=a[d],u=this.rules[c];if(u)for(var m=this._applyRule(r,u),p=0,g=m.length;p<g;p++){var f=m[p];if(s(f,[]),u.combineable)for(var _=d+1;_<h;_++){var v=a[_],b=this.rules[v];if(b&&b.combineable&&u.type!=b.type)for(var w=this._applyRule(f,b),C=0,y=w.length;C<y;C++)s(w[C],[])}}c in this.compoundRuleCodes&&this.compoundRuleCodes[c].push(r)}}else s(r.trim(),[])}return i},_removeDicComments:function(e){return e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"!==this.flags.FLAG)return"num"===this.flags.FLAG?e.split(","):void 0;for(var t=[],i=0,s=e.length;i<s;i+=2)t.push(e.substr(i,2));return t},_applyRule:function(e,t){for(var i=t.entries,s=[],n=0,l=i.length;n<l;n++){var o=i[n];if(!o.match||e.match(o.match)){var r=e;if(o.remove&&(r=r.replace(o.remove,"")),"SFX"===t.type?r+=o.add:r=o.add+r,s.push(r),"continuationClasses"in o)for(var a=0,d=o.continuationClasses.length;a<d;a++){var h=this.rules[o.continuationClasses[a]];h&&(s=s.concat(this._applyRule(r,h)))}}}return s},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var i=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(i,"KEEPCASE"))return!1;if(this.checkExact(i))return!0}var s=t.toLowerCase();if(s!==t){if(this.hasFlag(s,"KEEPCASE"))return!1;if(this.checkExact(s))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,i,s=this.dictionaryTable[e];if(void 0===s){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,i=this.compoundRules.length;t<i;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===s)return!0;if("object"==typeof s)for(t=0,i=s.length;t<i;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",s[t]))return!0}return!1},hasFlag:function(e,t,i){if(!this.loaded)throw"Dictionary not loaded.";return!(!(t in this.flags)||(void 0===i&&(i=Array.prototype.concat.apply([],this.dictionaryTable[e])),!i||-1===i.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,t){if(!this.loaded)throw"Dictionary not loaded.";if(t=t||5,this.memoized.hasOwnProperty(e)){var i=this.memoized[e].limit;if(t<=i||this.memoized[e].suggestions.length<i)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var s=0,n=this.replacementTable.length;s<n;s++){var l=this.replacementTable[s];if(-1!==e.indexOf(l[0])){var o=e.replace(l[0],l[1]);if(this.check(o))return[o]}}var r=this;function a(e){var t,i,s,n,l,o,a=[];for(t=0,n=e.length;t<n;t++){var d=e[t];for(i=0,l=d.length+1;i<l;i++){var h=[d.substring(0,i),d.substring(i)];if(h[1]&&a.push(h[0]+h[1].substring(1)),1<h[1].length&&h[1][1]!==h[1][0]&&a.push(h[0]+h[1][1]+h[1][0]+h[1].substring(2)),h[1])for(s=0,o=r.alphabet.length;s<o;s++)r.alphabet[s]!=h[1].substring(0,1)&&a.push(h[0]+r.alphabet[s]+h[1].substring(1));if(h[1])for(s=0,o=r.alphabet.length;s<o;s++)a.push(h[0]+r.alphabet[s]+h[1])}}return a}return r.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:function(e){var i,s,n=a([e]),l=a(n),o=function(e){for(var t=[],i=0,s=e.length;i<s;i++)r.check(e[i])&&t.push(e[i]);return t}(n.concat(l)),d={};for(i=0,s=o.length;i<s;i++)o[i]in d?d[o[i]]+=1:d[o[i]]=1;var h=[];for(i in d)d.hasOwnProperty(i)&&h.push([i,d[i]]);h.sort(function(e,t){return e[1]<t[1]?-1:1}).reverse();var c=[],u="lowercase";for(e.toUpperCase()===e?u="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(u="capitalized"),i=0,s=Math.min(t,h.length);i<s;i++)"uppercase"===u?h[i][0]=h[i][0].toUpperCase():"capitalized"===u&&(h[i][0]=h[i][0].substr(0,1).toUpperCase()+h[i][0].substr(1)),r.hasFlag(h[i][0],"NOSUGGEST")||c.push(h[i][0]);return c}(e),limit:t},this.memoized[e].suggestions}}}(),void 0!==t&&(t.exports=n)}).call(this,e("buffer").Buffer,"/node_modules/typo-js")},{buffer:3,fs:2}],19:[function(e,t,i){var s=e("codemirror");s.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentMore");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var i=Array(e.options.tabSize+1).join(" ");e.replaceSelection(i)}},s.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentLess");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var i=Array(e.options.tabSize+1).join(" ");e.replaceSelection(i)}}},{codemirror:11}],20:[function(e,t,i){"use strict";var s=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/selection/mark-selection.js"),e("codemirror/addon/search/searchcursor.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js");var n=e("codemirror-spell-checker"),l=e("marked"),o=/Mac/.test(navigator.platform),r=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),a={toggleBold:_,toggleItalic:v,drawLink:A,toggleHeadingSmaller:y,toggleHeadingBigger:S,drawImage:L,toggleBlockquote:C,toggleOrderedList:I,toggleUnorderedList:D,toggleCodeBlock:w,togglePreview:F,toggleStrikethrough:b,toggleHeading1:x,toggleHeading2:T,toggleHeading3:k,cleanBlock:O,drawTable:R,drawHorizontalRule:E,undo:N,redo:M,toggleSideBySide:P,toggleFullScreen:f},d={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},h=function(e){for(var t in a)if(a[t]===e)return t;return null},c=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t};function u(e){return o?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function m(e,t,i){var s,n,l,r,a="uploadImage"===(e=e||{}).name?document.createElement("a"):document.createElement("button");a.className=e.name,t=null==t||t,e.title&&t&&(a.title=(n=i,r=e.title,(s=e.action)&&n[l=h(s)]&&(r+=" ("+u(n[l])+")"),r),o&&(a.title=a.title.replace("Ctrl","⌘"),a.title=a.title.replace("Alt","⌥"))),e.noDisable&&a.classList.add("no-disable"),e.noMobile&&a.classList.add("no-mobile"),a.tabIndex=-1;var d=document.createElement("i");return d.className=e.className,a.appendChild(d),a}function p(e,t){t=t||e.getCursor("start");var i=e.getTokenAt(t);if(!i.type)return{};for(var s,n,l=i.type.split(" "),o={},r=0;r<l.length;r++)"strong"===(s=l[r])?o.bold=!0:"variable-2"===s?(n=e.getLine(t.line),/^\s*\d+\.\s/.test(n)?o["ordered-list"]=!0:o["unordered-list"]=!0):"atom"===s?o.quote=!0:"em"===s?o.italic=!0:"quote"===s?o.quote=!0:"strikethrough"===s?o.strikethrough=!0:"comment"===s?o.code=!0:"link"===s?o.link=!0:"tag"===s?o.image=!0:s.match(/^header(-[1-6])?$/)&&(o[s.replace("header","heading")]=!0);return o}var g="";function f(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(g=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=g;var i=t.getWrapperElement();if(/fullscreen/.test(i.previousSibling.className)?i.previousSibling.className=i.previousSibling.className.replace(/\s*fullscreen\b/,""):i.previousSibling.className+=" fullscreen",e.toolbarElements&&e.toolbarElements.fullscreen){var s=e.toolbarElements.fullscreen;/active/.test(s.className)?s.className=s.className.replace(/\s*active\s*/g,""):s.className+=" active"}var n=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(n.className)&&P(e),e.options.onToggleFullScreen&&e.options.onToggleFullScreen(t.getOption("fullScreen")||!1)}function _(e){H(e,"bold",e.options.blockStyles.bold)}function v(e){H(e,"italic",e.options.blockStyles.italic)}function b(e){H(e,"strikethrough","~~")}function w(e){var t=e.options.blockStyles.code;function i(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function s(e){return e.state.base.base||e.state.base}function n(e,t,n,l,o){n=n||e.getLineHandle(t),l=l||e.getTokenAt({line:t,ch:1}),o=o||!!n.text&&e.getTokenAt({line:t,ch:n.text.length-1});var r=l.type?l.type.split(" "):[];return o&&s(o).indentedCode?"indented":-1!==r.indexOf("comment")&&(s(l).fencedChars||s(o).fencedChars||i(n)?"fenced":"single")}var l,o,r,a,d,h,c,u,m,p,g,f,_=e.codemirror,v=_.getCursor("start"),b=_.getCursor("end"),w=_.getTokenAt({line:v.line,ch:v.ch||1}),C=_.getLineHandle(v.line),y=n(_,v.line,C,w);if("single"===y){var S=C.text.slice(0,v.ch).replace("`",""),x=C.text.slice(v.ch).replace("`","");_.replaceRange(S+x,{line:v.line,ch:0},{line:v.line,ch:99999999999999}),v.ch--,v!==b&&b.ch--,_.setSelection(v,b),_.focus()}else if("fenced"===y)if(v.line!==b.line||v.ch!==b.ch){for(l=v.line;0<=l&&!i(C=_.getLineHandle(l));l--);var T,k,D,I,O=s(_.getTokenAt({line:l,ch:1})).fencedChars;k=i(_.getLineHandle(v.line))?(T="",v.line):i(_.getLineHandle(v.line-1))?(T="",v.line-1):(T=O+"\n",v.line),i(_.getLineHandle(b.line))?(D="",I=b.line,0===b.ch&&(I+=1)):(D=0!==b.ch&&i(_.getLineHandle(b.line+1))?"":O+"\n",I=b.line+1),0===b.ch&&(I-=1),_.operation(function(){_.replaceRange(D,{line:I,ch:0},{line:I+(D?0:1),ch:0}),_.replaceRange(T,{line:k,ch:0},{line:k+(T?0:1),ch:0})}),_.setSelection({line:k+(T?1:0),ch:0},{line:I+(T?1:-1),ch:0}),_.focus()}else{var A=v.line;if(i(_.getLineHandle(v.line))&&(A="fenced"===n(_,v.line+1)?(l=v.line,v.line+1):(o=v.line,v.line-1)),void 0===l)for(l=A;0<=l&&!i(C=_.getLineHandle(l));l--);if(void 0===o)for(r=_.lineCount(),o=A;o<r&&!i(C=_.getLineHandle(o));o++);_.operation(function(){_.replaceRange("",{line:l,ch:0},{line:l+1,ch:0}),_.replaceRange("",{line:o-1,ch:0},{line:o,ch:0})}),_.focus()}else if("indented"===y){if(v.line!==b.line||v.ch!==b.ch)l=v.line,o=b.line,0===b.ch&&o--;else{for(l=v.line;0<=l;l--)if(!(C=_.getLineHandle(l)).text.match(/^\s*$/)&&"indented"!==n(_,l,C)){l+=1;break}for(r=_.lineCount(),o=v.line;o<r;o++)if(!(C=_.getLineHandle(o)).text.match(/^\s*$/)&&"indented"!==n(_,o,C)){o-=1;break}}var L=_.getLineHandle(o+1),R=L&&_.getTokenAt({line:o+1,ch:L.text.length-1});R&&s(R).indentedCode&&_.replaceRange("\n",{line:o+1,ch:0});for(var E=l;E<=o;E++)_.indentLine(E,"subtract");_.focus()}else{var N=v.line===b.line&&v.ch===b.ch&&0===v.ch,M=v.line!==b.line;N||M?(a=_,h=b,c=t,u=(d=v).line+1,m=h.line+1,g=c+"\n",f="\n"+c,(p=d.line!==h.line)&&m++,p&&0===h.ch&&(f=c+"\n",m--),j(a,!1,[g,f]),a.setSelection({line:u,ch:0},{line:m,ch:0})):j(_,!1,["`","`"])}}function C(e){$(e.codemirror,"quote")}function y(e){z(e.codemirror,"smaller")}function S(e){z(e.codemirror,"bigger")}function x(e){z(e.codemirror,void 0,1)}function T(e){z(e.codemirror,void 0,2)}function k(e){z(e.codemirror,void 0,3)}function D(e){$(e.codemirror,"unordered-list")}function I(e){$(e.codemirror,"ordered-list")}function O(e){!function(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,i=e.getCursor("start"),s=e.getCursor("end"),n=i.line;n<=s.line;n++)t=(t=e.getLine(n)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:n,ch:0},{line:n,ch:99999999999999})}(e.codemirror)}function A(e){var t=e.codemirror,i=p(t),s=e.options,n="https://";if(s.promptURLs&&!(n=prompt(s.promptTexts.link)))return!1;j(t,i.link,s.insertTexts.link,n)}function L(e){var t=e.codemirror,i=p(t),s=e.options,n="https://";if(s.promptURLs&&!(n=prompt(s.promptTexts.image)))return!1;j(t,i.image,s.insertTexts.image,n)}function R(e){var t=e.codemirror,i=p(t),s=e.options;j(t,i.table,s.insertTexts.table)}function E(e){var t=e.codemirror,i=p(t),s=e.options;j(t,i.image,s.insertTexts.horizontalRule)}function N(e){var t=e.codemirror;t.undo(),t.focus()}function M(e){var t=e.codemirror;t.redo(),t.focus()}function P(e){var t=e.codemirror,i=t.getWrapperElement(),s=i.nextSibling,n=e.toolbarElements&&e.toolbarElements["side-by-side"],l=!1;/editor-preview-active-side/.test(s.className)?(s.className=s.className.replace(/\s*editor-preview-active-side\s*/g,""),n&&(n.className=n.className.replace(/\s*active\s*/g,"")),i.className=i.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||f(e),s.className+=" editor-preview-active-side"},1),n&&(n.className+=" active"),i.className+=" CodeMirror-sided",l=!0);var o=i.lastChild;if(/editor-preview-active/.test(o.className)){o.className=o.className.replace(/\s*editor-preview-active\s*/g,"");var r=e.toolbarElements.preview,a=i.previousSibling;r.className=r.className.replace(/\s*active\s*/g,""),a.className=a.className.replace(/\s*disabled-for-preview*/g,"")}t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){s.innerHTML=e.options.previewRender(e.value(),s)}),l?(s.innerHTML=e.options.previewRender(e.value(),s),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function F(e){var t=e.codemirror,i=t.getWrapperElement(),s=i.previousSibling,n=!!e.options.toolbar&&e.toolbarElements.preview,l=i.lastChild;l&&/editor-preview/.test(l.className)||((l=document.createElement("div")).className="editor-preview",i.appendChild(l)),/editor-preview-active/.test(l.className)?(l.className=l.className.replace(/\s*editor-preview-active\s*/g,""),n&&(n.className=n.className.replace(/\s*active\s*/g,""),s.className=s.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){l.className+=" editor-preview-active"},1),n&&(n.className+=" active",s.className+=" disabled-for-preview")),l.innerHTML=e.options.previewRender(e.value(),l);var o=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(o.className)&&P(e)}function j(e,t,i,s){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var n,l=i[0],o=i[1],r={},a={};"function"!=typeof Object.assign&&"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");var i=Object(e);if(null===t)return i;for(var s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[l]=n[l])}return i},writable:!0,configurable:!0}),Object.assign(r,e.getCursor("start")),Object.assign(a,e.getCursor("end")),s&&(o=o.replace("#url#",s)),t?(l=(n=e.getLine(r.line)).slice(0,r.ch),o=n.slice(r.ch),e.replaceRange(l+o,{line:r.line,ch:0})):(n=e.getSelection(),e.replaceSelection(l+n+o),r.ch+=l.length,r!==a&&(a.ch+=l.length)),e.setSelection(r,a),e.focus()}}function z(e,t,i){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var s,n,l,o=e.getCursor("start"),r=e.getCursor("end"),a=o.line;a<=r.line;a++)s=a,n=void 0,l=(n=e.getLine(s)).search(/[^#]/),n=void 0!==t?l<=0?"bigger"==t?"###### "+n:"# "+n:6==l&&"smaller"==t?n.substr(7):1==l&&"bigger"==t?n.substr(2):"bigger"==t?n.substr(1):"#"+n:1==i?l<=0?"# "+n:l==i?n.substr(l+1):"# "+n.substr(l+1):2==i?l<=0?"## "+n:l==i?n.substr(l+1):"## "+n.substr(l+1):l<=0?"### "+n:l==i?n.substr(l+1):"### "+n.substr(l+1),e.replaceRange(n,{line:s,ch:0},{line:s,ch:99999999999999});e.focus()}}function $(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var i=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,s=/^\s*/,n=p(e),l=e.getCursor("start"),o=e.getCursor("end"),r={quote:/^(\s*)>\s+/,"unordered-list":i,"ordered-list":i},a=1,d=l.line;d<=o.line;d++)!function(l){var o,d,h,c,u=e.getLine(l);if(n[t])u=u.replace(r[t],"$1");else{var m=i.exec(u),p=(c=a,{quote:">","unordered-list":"*","ordered-list":"%%i."}[t].replace("%%i",c));u=null!==m?(o=t,d=m[2],h=new RegExp({quote:">","unordered-list":"*","ordered-list":"d+."}[o]),d&&h.test(d)&&(p=""),m[1]+p+m[3]+u.replace(s,"").replace(r[t],"$1")):p+" "+u,a+=1}e.replaceRange(u,{line:l,ch:0},{line:l,ch:99999999999999})}(d);e.focus()}}function H(e,t,i,s){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){s=void 0===s?i:s;var n,l=e.codemirror,o=p(l),r=i,a=s,d=l.getCursor("start"),h=l.getCursor("end");o[t]?(r=(n=l.getLine(d.line)).slice(0,d.ch),a=n.slice(d.ch),"bold"==t?(r=r.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),a=a.replace(/(\*\*|__)/,"")):"italic"==t?(r=r.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),a=a.replace(/(\*|_)/,"")):"strikethrough"==t&&(r=r.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),a=a.replace(/(\*\*|~~)/,"")),l.replaceRange(r+a,{line:d.line,ch:0},{line:d.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(d.ch-=2,d!==h&&(h.ch-=2)):"italic"==t&&(d.ch-=1,d!==h&&(h.ch-=1))):(n=l.getSelection(),"bold"==t?n=(n=n.split("**").join("")).split("__").join(""):"italic"==t?n=(n=n.split("*").join("")).split("_").join(""):"strikethrough"==t&&(n=n.split("~~").join("")),l.replaceSelection(r+n+a),d.ch+=i.length,h.ch=d.ch+n.length),l.setSelection(d,h),l.focus()}}function V(e,t){for(var i in t)t.hasOwnProperty(i)&&(t[i]instanceof Array?e[i]=t[i].concat(e[i]instanceof Array?e[i]:[]):null!==t[i]&&"object"==typeof t[i]&&t[i].constructor===Object?e[i]=V(e[i]||{},t[i]):e[i]=t[i]);return e}function U(e){for(var t=1;t<arguments.length;t++)e=V(e,arguments[t]);return e}function B(e){var t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),i=0;if(null===t)return i;for(var s=0;s<t.length;s++)19968<=t[s].charCodeAt(0)?i+=t[s].length:i+=1;return i}var W={bold:{name:"bold",action:_,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:v,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:b,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:y,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:y,className:"fa fa-header fa-heading header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:S,className:"fa fa-header fa-heading header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:x,className:"fa fa-header fa-heading header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:T,className:"fa fa-header fa-heading header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:k,className:"fa fa-header fa-heading header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:w,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:C,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:D,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:I,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:O,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:A,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:L,className:"fa fa-image",title:"Insert Image",default:!0},table:{name:"table",action:R,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:E,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:F,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:P,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:f,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:N,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:M,className:"fa fa-repeat fa-redo",noDisable:!0,title:"Redo"}},q={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},G={link:"URL for the link:",image:"URL of the image:"},K={bold:"**",code:"```",italic:"*"};function Y(e){(e=e||{}).parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var i=document.styleSheets,s=0;s<i.length;s++)i[s].href&&-1<i[s].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")&&(t=!1);if(t){var n=document.createElement("link");n.rel="stylesheet",n.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(n)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===e.toolbar)for(var l in e.toolbar=[],W)W.hasOwnProperty(l)&&(-1!=l.indexOf("separator-")&&e.toolbar.push("|"),(!0===W[l].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(l))&&e.toolbar.push(l));e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=U({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=U({},q,e.insertTexts||{}),e.promptTexts=U({},G,e.promptTexts||{}),e.blockStyles=U({},K,e.blockStyles||{}),e.shortcuts=U({},d,e.shortcuts||{}),e.minHeight=e.minHeight||"300px",null!=e.autosave&&null!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue)}function Q(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}Y.prototype.markdown=function(e){if(l){var t;if(t=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var i=this.options.renderingConfig.hljs||window.hljs;i&&(t.highlight=function(e){return i.highlightAuto(e).value})}return l.setOptions(t),function(e){for(var t;null!==(t=r.exec(e));){var i=t[0];if(-1===i.indexOf("target=")){var s=i.replace(/>$/,' target="_blank">');e=e.replace(i,s)}}return e}(l(e))}},Y.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t,i,l=this.options,o=this,r={};for(var d in l.shortcuts)null!==l.shortcuts[d]&&null!==a[d]&&function(e){r[u(l.shortcuts[e])]=function(){a[e](o)}}(d);if(r.Enter="newlineAndIndentContinueMarkdownList",r.Tab="tabAndIndentMarkdownList",r["Shift-Tab"]="shiftTabAndUnindentMarkdownList",r.Esc=function(e){e.getOption("fullScreen")&&f(o)},document.addEventListener("keydown",function(e){27==(e=e||window.event).keyCode&&o.codemirror.getOption("fullScreen")&&f(o)},!1),!1!==l.spellChecker?(t="spell-checker",(i=l.parsingConfig).name="gfm",i.gitHubSpice=!1,n({codeMirrorInstance:s})):((t=l.parsingConfig).name="gfm",t.gitHubSpice=!1),this.codemirror=s.fromTextArea(e,{mode:t,backdrop:i,theme:null!=l.theme?l.theme:"easymde",tabSize:null!=l.tabSize?l.tabSize:2,indentUnit:null!=l.tabSize?l.tabSize:2,indentWithTabs:!1!==l.indentWithTabs,lineNumbers:!1,autofocus:!0===l.autofocus,extraKeys:r,lineWrapping:!1!==l.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:l.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:null!=l.styleSelectedText?l.styleSelectedText:!c(),configureMouse:function(e,t,i){return{addNew:!1}}}),this.codemirror.getScrollerElement().style.minHeight=l.minHeight,!0===l.forceSync){var h=this.codemirror;h.on("change",function(){h.save()})}!(this.gui={})!==l.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==l.status&&(this.gui.statusbar=this.createStatusbar()),null!=l.autosave&&!0===l.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var m=this.codemirror;setTimeout(function(){m.refresh()}.bind(m),0)}},Y.prototype.autosave=function(){if(Q()){var e=this;if(null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");!0!==this.options.autosave.binded&&(null!=e.element.form&&null!=e.element.form&&e.element.form.addEventListener("submit",function(){clearTimeout(e.autosaveTimeoutId),e.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+e.options.autosave.uniqueId),setTimeout(function(){e.autosave()},e.options.autosave.delay||1e4)}),this.options.autosave.binded=!0),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&null!=t&&""!=t){var i=new Date,s=i.getHours(),n=i.getMinutes(),l="am",o=s;12<=o&&(o=s-12,l="pm"),0==o&&(o=12),n=n<10?"0"+n:n,t.innerHTML="Autosaved: "+o+":"+n+" "+l}this.autosaveTimeoutId=setTimeout(function(){e.autosave()},this.options.autosave.delay||1e4)}else console.log("EasyMDE: localStorage not available, cannot autosave")},Y.prototype.clearAutosavedValue=function(){if(Q()){if(null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},Y.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),i=t.nextSibling;if(i&&/editor-preview-side/.test(i.className)||((i=document.createElement("div")).className="editor-preview-side",t.parentNode.insertBefore(i,t.nextSibling)),!1===this.options.syncSideBySidePreviewScroll)return i;var s=!1,n=!1;return e.on("scroll",function(e){if(s)s=!1;else{n=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,l=parseFloat(e.getScrollInfo().top)/t,o=(i.scrollHeight-i.clientHeight)*l;i.scrollTop=o}}),i.onscroll=function(){if(n)n=!1;else{s=!0;var t=i.scrollHeight-i.clientHeight,l=parseFloat(i.scrollTop)/t,o=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*l;e.scrollTo(0,o)}},i},Y.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)null!=W[e[t]]&&(e[t]=W[e[t]]);var i=document.createElement("div");i.className="editor-toolbar";var s=this,n={};for(s.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==s.options.toolbarGuideIcon)&&!(s.options.hideIcons&&-1!=s.options.hideIcons.indexOf(e[t].name)||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&c())){if("|"===e[t]){for(var l=!1,o=t+1;o<e.length;o++)"|"===e[o]||s.options.hideIcons&&-1!=s.options.hideIcons.indexOf(e[o].name)||(l=!0);if(!l)continue}!function(e){var t,l;t="|"===e?((l=document.createElement("i")).className="separator",l.innerHTML="|",l):m(e,s.options.toolbarTips,s.options.shortcuts),e.action&&("function"==typeof e.action?t.onclick=function(t){t.preventDefault(),e.action(s)}:"string"==typeof e.action&&(t.onclick=function(t){t.preventDefault(),window.open(e.action,"_blank")})),n[e.name||e]=t,i.appendChild(t)}(e[t])}s.toolbarElements=n;var r=this.codemirror;r.on("cursorActivity",function(){var e,t,i=p(r);for(var s in n)t=void 0,t=n[e=s],i[e]?t.className+=" active":"fullscreen"!=e&&"side-by-side"!=e&&(t.className=t.className.replace(/\s*active\s*/g,""))});var a=r.getWrapperElement();return a.parentNode.insertBefore(i,a),i}},Y.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,i=this.codemirror;if(e&&0!==e.length){var s,n,l,o=[];for(s=0;s<e.length;s++)if(l=n=void 0,"object"==typeof e[s])o.push({className:e[s].className,defaultValue:e[s].defaultValue,onUpdate:e[s].onUpdate});else{var r=e[s];"words"===r?(l=function(e){e.innerHTML=B(i.getValue())},n=function(e){e.innerHTML=B(i.getValue())}):"lines"===r?(l=function(e){e.innerHTML=i.lineCount()},n=function(e){e.innerHTML=i.lineCount()}):"cursor"===r?(l=function(e){e.innerHTML="0:0"},n=function(e){var t=i.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===r&&(l=function(e){null!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}),o.push({className:r,defaultValue:l,onUpdate:n})}var a=document.createElement("div");for(a.className="editor-statusbar",s=0;s<o.length;s++){var d=o[s],h=document.createElement("span");h.className=d.className,"function"==typeof d.defaultValue&&d.defaultValue(h),"function"==typeof d.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(h,d)),a.appendChild(h)}var c=this.codemirror.getWrapperElement();return c.parentNode.insertBefore(a,c.nextSibling),a}},Y.prototype.value=function(e){var t=this.codemirror;if(void 0===e)return t.getValue();if(t.getDoc().setValue(e),this.isPreviewActive()){var i=t.getWrapperElement().lastChild;i.innerHTML=this.options.previewRender(e,i)}return this},Y.toggleBold=_,Y.toggleItalic=v,Y.toggleStrikethrough=b,Y.toggleBlockquote=C,Y.toggleHeadingSmaller=y,Y.toggleHeadingBigger=S,Y.toggleHeading1=x,Y.toggleHeading2=T,Y.toggleHeading3=k,Y.toggleCodeBlock=w,Y.toggleUnorderedList=D,Y.toggleOrderedList=I,Y.cleanBlock=O,Y.drawLink=A,Y.drawImage=L,Y.drawTable=R,Y.drawHorizontalRule=E,Y.undo=N,Y.redo=M,Y.togglePreview=F,Y.toggleSideBySide=P,Y.toggleFullScreen=f,Y.prototype.toggleBold=function(){_(this)},Y.prototype.toggleItalic=function(){v(this)},Y.prototype.toggleStrikethrough=function(){b(this)},Y.prototype.toggleBlockquote=function(){C(this)},Y.prototype.toggleHeadingSmaller=function(){y(this)},Y.prototype.toggleHeadingBigger=function(){S(this)},Y.prototype.toggleHeading1=function(){x(this)},Y.prototype.toggleHeading2=function(){T(this)},Y.prototype.toggleHeading3=function(){k(this)},Y.prototype.toggleCodeBlock=function(){w(this)},Y.prototype.toggleUnorderedList=function(){D(this)},Y.prototype.toggleOrderedList=function(){I(this)},Y.prototype.cleanBlock=function(){O(this)},Y.prototype.drawLink=function(){A(this)},Y.prototype.drawImage=function(){L(this)},Y.prototype.drawTable=function(){R(this)},Y.prototype.drawHorizontalRule=function(){E(this)},Y.prototype.undo=function(){N(this)},Y.prototype.redo=function(){M(this)},Y.prototype.togglePreview=function(){F(this)},Y.prototype.toggleSideBySide=function(){P(this)},Y.prototype.toggleFullScreen=function(){f(this)},Y.prototype.isPreviewActive=function(){var e=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(e.className)},Y.prototype.isSideBySideActive=function(){var e=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(e.className)},Y.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},Y.prototype.getState=function(){return p(this.codemirror)},Y.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},t.exports=Y},{"./codemirror/tablist":19,codemirror:11,"codemirror-spell-checker":4,"codemirror/addon/display/fullscreen.js":5,"codemirror/addon/display/placeholder.js":6,"codemirror/addon/edit/continuelist.js":7,"codemirror/addon/mode/overlay.js":8,"codemirror/addon/search/searchcursor.js":9,"codemirror/addon/selection/mark-selection.js":10,"codemirror/mode/gfm/gfm.js":12,"codemirror/mode/markdown/markdown.js":13,"codemirror/mode/xml/xml.js":15,marked:17}]},{},[20])(20)});var isKeyUp=!1,oauthLogoChanged=!1,openidLogoChanged=!1,systemSettingsData=[],oAuthCustomEmailContent="",openIdCustomEmailContent="",oAuthSimpleMdeLoaded=!1,openIdSimpleMdeLoaded=!1,defaultCustomMailcontent="Hi {:DisplayName},\n\nYou have been invited to join the Bold Reports Enterprise Reporting at {:SiteUrl}.\n\nAccess reports by logging in right away.\n\n[Login Now]({:SiteUrl}). \n\nThanks,\n\n{:OrganizationName}",intRegex=/^\d+$/,scriptPattern=/<\s*script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/i;function ActiveDirectoryFormValidate(){$(".success-message").hide();var e={username:$("#username").val().trim(),password:$("#password").val().trim(),ldapurl:$("#ldapurl").val().trim(),portNo:$("#ldap-port-number").val().trim()};$.ajax({type:"POST",url:window.adTestconnectionUrl,data:e,beforeSend:showWaitingPopup($("#server-app-container")),success:function(e){e.status?($("#active-directory-setting .success-message").html("<span style='color:green'>"+e.value+"</span>"),$("#active-directory-setting .error-message").css("display","none"),$("#active-directory-setting .success-message").css("display","block")):($("#active-directory-setting .error-message").html("<span style='color:red'>"+e.value+"</span>"),$("#active-directory-setting .success-message").css("display","none"),$("#active-directory-setting .error-message").css("display","block"),null!=e.permissionDenied&&e.permissionDenied&&($("#active-directory-setting .error-message").css("display","none"),WarningAlert(window.Server.App.LocalizationContent.ADSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3)))},complete:function(){hideWaitingPopup($("#server-app-container"))}})}function AzureADFormValidate(){$(".success-message").hide();var e={tenantName:$("#tenantName").val().trim(),clientId:$("#clientId").val().trim(),clientKey:$("#clientKey").val().trim()};$.ajax({type:"POST",url:window.azureadTestconnectionUrl,data:e,beforeSend:showWaitingPopup($("#server-app-container")),success:function(e){e.status?($("#azure-ad-setting .success-message").html("<span style='color:green'>"+e.value+"</span>"),$("#azure-ad-setting .error-message").css("display","none"),$("#azure-ad-setting .success-message").css("display","block")):($("#azure-ad-setting .error-message").html("<span style='color:red'>"+e.value+"</span>"),$("#azure-ad-setting .success-message").css("display","none"),$("#azure-ad-setting .error-message").css("display","block"),null!=e.permissionDenied&&e.permissionDenied&&($("#azure-ad-setting .error-message").css("display","none"),WarningAlert(window.Server.App.LocalizationContent.AzureADSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3)))},complete:function(){hideWaitingPopup($("#server-app-container"))}})}function RemoveUploadBoxError(){$("#upload-login-image-textbox").removeClass("ValidationErrorImage").val(window.Server.App.LocalizationContent.BrowsePath),$("#upload-login-image-textbox").closest("div").removeClass("has-error"),$("#upload-login-image-textbox").parent().find(".e-box").removeClass("upload-error-border"),$("#upload-main-screen-image-textbox").removeClass("ValidationErrorImage").val(window.Server.App.LocalizationContent.BrowsePath),$("#upload-main-screen-image-textbox").closest("div").removeClass("has-error"),$("#upload-main-screen-image-textbox").parent().find(".e-box").removeClass("upload-error-border"),$("#upload-favicon-image-textbox").removeClass("ValidationErrorImage").val(window.Server.App.LocalizationContent.BrowsePath),$("#upload-favicon-image-textbox").closest("div").removeClass("has-error"),$("#upload-favicon-image-textbox").parent().find(".e-box").removeClass("upload-error-border"),$("#upload-emaillogo-image-textbox").removeClass("ValidationErrorImage").val(window.Server.App.LocalizationContent.BrowsePath),$("#upload-emaillogo-image-textbox").closest("div").removeClass("has-error"),$("#upload-emaillogo-image-textbox").parent().find(".e-box").removeClass("upload-error-border"),$("#upload-footerlogo-image-textbox").removeClass("ValidationErrorImage").val(window.Server.App.LocalizationContent.BrowsePath),$("#upload-footerlogo-image-textbox").closest("div").removeClass("has-error"),$("#upload-footerlogo-image-textbox").parent().find(".e-box").removeClass("upload-error-border")}function parseURL(e){for(var t=parseURL.options,i=t.parser[t.strictMode?"strict":"loose"].exec(e),s={},n=14;n--;)s[t.key[n]]=i[n]||"";return s[t.q.name]={},s[t.key[12]].replace(t.q.parser,function(e,i,n){i&&(s[t.q.name][i]=n)}),s}function SetCookie(){$("#lang_tag").val()!==$("#language").val()&&$.ajax({type:"POST",url:window.setLanguageUrl,data:{langtag:$("#language").val(),returnUrl:$("#return_url").val()+"/administration"},success:function(e){window.location.href=e.Data}})}function addPlacehoder(e){regexIe8.test(userAgent)&&$(e).find("input[type=text][class!='hidden-input'],input[type=password][class!='hidden-input'],textarea[id='txt_welcome_note']").each(function(){""===$(this).val()?$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).show():$($("<div>",{class:"placeholder",text:$(this).attr("placeholder"),style:"display:block"})).insertAfter(this).hide()})}function addFooterSeparator(){1==$("#enablepoweredbysyncfusion").is(":checked")&&1==$("#enablecopyrightinfo").is(":checked")?$("#footer-separator").removeClass("d-none").show():$("#footer-separator").removeClass("d-block").hide()}function authenticationDialogBoxClose(){$("#default-authentication-confirmation-diolog").ejDialog("close")}function updateSetting(e){var t=getAuthSettingsToPost(e),i=getIdentityProviderInfo(e);$.ajax({type:"POST",url:window.updateauthsettingsUrl,data:{AuthSettingsData:JSON.stringify(t),IdentityProviderInfo:JSON.stringify(i)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(t){hideWaitingPopup($("#server-app-container")),t.Status?(SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3),"oauth"===e?oauthLogoChanged=!1:openidLogoChanged=!1):null!=t.permissionDenied&&t.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3)},error:function(){hideWaitingPopup($("#server-app-container"))}})}function getGroupImportSettings(e){var t="oauth"===e?$("#oauth-group-import"):$("#openid-group-import"),i=t.find("select.group-import-provider-type").val(),s=null;switch(i){case"CognitoAWS":s={known_provider_type:i,cognito:{user_pool_id:t.find("input[name='userPoolId']").val().trim(),aws_accesskey_id:t.find("input[name='awsAccesskeyId']").val().trim(),aws_accesskey_secret:t.find("input[name='awsAccesskeySecret']").val().trim(),region:t.find("input[name='cognitoRegion']").val().trim()}};break;case"Auth0":s={known_provider_type:i,auth0:{audience:t.find("input[name='audience']").val().trim(),extension_url:t.find("input[name='extensionUrl']").val().trim()}};break;case"Okta":s={known_provider_type:i,okta:{api_token:t.find("input[name='apiToken']").val().trim()}};break;case"OneLogin":s={known_provider_type:i,one_login:{api_client_id:t.find("input[name='apiClientId']").val().trim(),api_client_secret:t.find("input[name='apiClientSecret']").val().trim(),region:t.find("input[name='oneloginRegion']").val().trim()}};break;default:s={known_provider_type:i}}return s}function getAuthSettingsToPost(e){var t=angular.element("#active-directory-container").scope(),i=$("input[name='"+e+"IsEnabled']").is(":checked");return i?"oauth"===e?{is_enabled:i,auth_provider:$("input[name='oauthAuthenticationProvider']").val().trim(),logo_url:t.oauthLogoUrl,logo_type:t.logoType,is_logo_changed:oauthLogoChanged,o_auth_auth_settings:{provider_name:$("input[name='oauthProviderName']").val().trim(),client_id:$("input[name='oauthClientId']").val().trim(),client_secret:$("input[name='oauthClientSecret']").val().trim(),authorization_end_point:$("input[name='oauthAuthorizationEP']").val().trim(),token_end_point:$("input[name='oauthTokenEP']").val().trim(),token_end_point_method:$("#token-method-type").val(),user_info_end_point:$("input[name='oauthUserInfoEP']").val().trim(),user_info_end_point_method:$("#user-info-method-type").val(),scopes:$("input[name='oauthScopes']").val().trim(),user_info_email:$("input[name='userInfoEmail']").val().trim(),user_info_firstname:$("input[name='userInfoFirstname']").val().trim(),user_info_lastname:$("input[name='userInfoLastname']").val().trim(),logo:$("input[name='oauthLogo']").val().trim(),logout_end_point:$("input[name='oauthLogoutEndpoint']").val().trim(),group_import_settings:getGroupImportSettings("oauth")}}:{is_enabled:i,auth_provider:$("input[name='openidAuthenticationProvider']").val().trim(),logo_url:t.openidLogoUrl,logo_type:t.logoType,is_logo_changed:openidLogoChanged,oidc_auth_settings:{provider_name:$("input[name='openidProviderName']").val().trim(),client_id:$("input[name='openidClientId']").val().trim(),client_secret:$("input[name='openidClientSecret']").val().trim(),identifier:$("input[name='openidIdentifier']").val().trim(),authority:$("input[name='openidAuthority']").val().trim(),logo:$("input[name='openidLogo']").val().trim(),logout_url:$("input[name='openidLogoutUrl']").val().trim(),group_import_settings:getGroupImportSettings("openid")}}:{is_enabled:i,auth_provider:$("input[name='"+e+"AuthenticationProvider']").val().trim()}}function initializeSimpleMdeForCustomMail(e,t){"oauth"==t?(oAuthSimpleMdeLoaded=!0,oauthpostmd=renderMdeFn("#oauth-custom-mail-content"),oauthpostmd.isPreviewActive()&&oauthpostmd.togglePreview()):(openIdSimpleMdeLoaded=!0,openidpostmd=renderMdeFn("#openid-custom-mail-content"),openidpostmd.isPreviewActive()&&openidpostmd.togglePreview()),"oauth"==t?(""==e||null==e?oauthpostmd.value(defaultCustomMailcontent):oauthpostmd.value(e),setTimeout(function(){oauthpostmd.codemirror.refresh()},300)):(""==e||null==e?openidpostmd.value(defaultCustomMailcontent):openidpostmd.value(e),setTimeout(function(){openidpostmd.codemirror.refresh()},300))}function renderMdeFn(e){var t=new EasyMDE({element:$(e)[0],status:!1,spellChecker:!1,autoDownloadFontAwesome:!1,toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"su su-bold",title:window.Server.App.LocalizationContent.Bold},{name:"italic",action:EasyMDE.toggleItalic,className:"su su-italic",title:window.Server.App.LocalizationContent.Italic},{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"su su-header",title:window.Server.App.LocalizationContent.Heading},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"su su-quote",title:window.Server.App.LocalizationContent.Quote},{name:"unordered-list",action:EasyMDE.toggleUnorderedList,className:"su su-list-ul",title:window.Server.App.LocalizationContent.Generic},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"su su-list-ol",title:window.Server.App.LocalizationContent.Number},"|",{name:"link",action:EasyMDE.drawLink,className:"su su-link",title:window.Server.App.LocalizationContent.Link},{name:"preview",action:EasyMDE.togglePreview,className:"su su-preview no-disable",title:window.Server.App.LocalizationContent.Preview},{name:"reset",action:function(e){t.value(defaultCustomMailcontent)},className:"su su-reset no-disable",title:window.Server.App.LocalizationContent.Reset}]});return t}function loadCustomMailContent(e){"oauth"==e?$("#configure-oauth-custom-mail-content").prop("checked")&&(oAuthSimpleMdeLoaded||initializeSimpleMdeForCustomMail(oAuthCustomMailContent,"oauth")):$("#configure-openid-custom-mail-content").prop("checked")&&(openIdSimpleMdeLoaded||initializeSimpleMdeForCustomMail(openIdCustomMailContent,"openId"))}function getIdentityProviderInfo(e){var t;return $("input[name='"+e+"IsEnabled']").is(":checked")&&("oauth"==e?(t=$("#configure-oauth-identity-provider-info").prop("checked")?{IsIdentityProviderInfoOptionEnabled:$("#configure-oauth-identity-provider-info").prop("checked"),IdentityProviderName:$("input[name='oauthIdentityProviderName']").val().trim(),IdentityProviderURL:$("input[name='oauthIdentityProviderUrl']").val().trim()}:{IsIdentityProviderInfoOptionEnabled:$("#configure-oauth-identity-provider-info").prop("checked")},$("#configure-oauth-custom-mail-content").prop("checked")?customMailContent={IsCustomInviteMailOptionEnabled:$("#configure-oauth-custom-mail-content").prop("checked"),Subject:$("input[name='oauthMailSubject']").val().trim(),EmailContent:null!=oauthpostmd?oauthpostmd.value():""}:customMailContent={IsCustomInviteMailOptionEnabled:$("#configure-oauth-custom-mail-content").prop("checked")},t=$.extend(t,customMailContent)):(t=$("#configure-openid-identity-provider-info").prop("checked")?{IsIdentityProviderInfoOptionEnabled:$("#configure-openid-identity-provider-info").prop("checked"),IdentityProviderName:$("input[name='openIdIdentityProviderName']").val().trim(),IdentityProviderURL:$("input[name='openIdIdentityProviderURL']").val().trim()}:{IsIdentityProviderInfoOptionEnabled:$("#configure-openid-identity-provider-info").prop("checked")},$("#configure-openid-custom-mail-content").prop("checked")?customMailContent={IsCustomInviteMailOptionEnabled:$("#configure-openid-custom-mail-content").prop("checked"),Subject:$("input[name='openidMailSubject']").val().trim(),EmailContent:null!=openidpostmd?openidpostmd.value():""}:customMailContent={IsCustomInviteMailOptionEnabled:$("#configure-openid-custom-mail-content").prop("checked")},t=$.extend(t,customMailContent))),t}$(document).on("click",'[data-bs-toggle="tooltip"]',function(){var e=bootstrap.Tooltip.getInstance(this);e&&e.dispose(),new bootstrap.Tooltip(this)}),$(document).ready(function(){var e,t,i;generateProfileAvatar(),addPlacehoder("body");var s=$.now();($("#time_format").is(":checked")?"dd.MM.yyyy"==$("input:radio[name=date_format]:checked").val()?($("#time_format").attr("disabled",!0),$(".time").html(window.Server.App.LocalizationContent.TimeFormatTrue)):($("#time_format").attr("disabled",!1),$(".time").html(window.Server.App.LocalizationContent.TimeFormatTrue)):$(".time").html(window.Server.App.LocalizationContent.TimeFormatFalse),$(".input-group-addon .btn.selectpicker").css("height",window.innerWidth<=1366?"28":"32"),$("#upload-login-image").ejUploadbox({saveUrl:window.fileUploadUrl+"?imageType=loginlogo&&timeStamp="+s,autoUpload:!0,showFileDetails:!1,buttonText:{browse:".  .  ."},extensionsAllow:".PNG,.png,.jpg,.JPG,.jpeg,.JPEG,.svg,.SVG",height:window.innerWidth<=1366?26:30,beforeSend:function(e){setXSRFRequestHeader(e.xhr)},begin:function(){ShowWaitingProgress("#server-app-container","show")},fileSelect:function(t){e=t.files[0].extension.toLowerCase(),t.files[0].name,uploadedFile=t.files[0]},error:function(){".png"!==e&&".jpg"!==e&&".jpeg"!==e&&".svg"!==e&&($("#upload-login-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-login-image-textbox").closest("div").addClass("has-error"))},complete:function(){if(".svg"===e.toLowerCase()){var t=new FileReader;t.onload=function(t){var i=t.target.result;if(scriptPattern.test(i))$("#upload-login-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-login-image-textbox-error").html()?$(".login-screen-logo").find("span.info-text").css("display","none"):$(".login-screen-logo").find("span.info-text").css("display","block"),$("#upload-login-image-textbox").closest("div").addClass("has-error");else{var n=".svg"==e||".png"==e?e:".jpeg";window.SystemSettingsProperties.LoginLogo="login_logo_"+s+n;var l=rootUrl+"/content/images/application/login_logo_"+s+n+"?v="+$.now();$("#display-login-logo").attr("src",l),$("#upload-login-image-textbox-error").addClass("hide"),$("#upload-login-image-textbox").closest("div").removeClass("has-error"),$("#upload-login-image-textbox-error").addClass("hide")?$(".login-screen-logo").find("span.info-text").css("display","block"):$(".login-screen-logo").find("span.info-text").css("display","none")}},t.readAsText(uploadedFile.rawFile),ShowWaitingProgress("#server-app-container","hide")}else{var i=".svg"==e||".png"==e?e:".jpeg";window.SystemSettingsProperties.LoginLogo="login_logo_"+s+i;var n=rootUrl+"/content/images/application/login_logo_"+s+i+"?v="+$.now();$("#display-login-logo").attr("src",n),$("#upload-login-image-textbox-error").addClass("hide"),$("#upload-login-image-textbox").closest("div").removeClass("has-error"),$("#upload-login-image-textbox-error").addClass("hide")?$(".login-screen-logo").find("span.info-text").css("display","block"):$(".login-screen-logo").find("span.info-text").css("display","none"),ShowWaitingProgress("#server-app-container","hide")}}}),$("#upload-Main-screen-image").ejUploadbox({saveUrl:window.fileUploadUrl+"?imageType=mainlogo&&timeStamp="+s,autoUpload:!0,showFileDetails:!1,buttonText:{browse:".  .  ."},extensionsAllow:".PNG,.png,.jpg,.JPG,.jpeg,.JPEG,.svg,.SVG",height:window.innerWidth<=1366?26:30,beforeSend:function(e){setXSRFRequestHeader(e.xhr)},begin:function(){ShowWaitingProgress("#server-app-container","show")},fileSelect:function(e){t=e.files[0].extension.toLowerCase(),e.files[0].name,uploadedFile=e.files[0]},error:function(){".png"!==t&&".jpg"!==t&&".jpeg"!==t&&".svg"!==t&&($("#upload-main-screen-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-main-screen-image-textbox").closest("div").addClass("has-error"))},complete:function(){if(".svg"===t.toLowerCase()){var e=new FileReader;e.onload=function(e){var i=e.target.result;if(scriptPattern.test(i))$("#upload-main-screen-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-main-screen-image-textbox-error").html()?$(".header-logo").find("span.info-text").css("display","none"):$(".header-logo").find("span.info-text").css("display","block"),$("#upload-main-screen-image-textbox").closest("div").addClass("has-error");else{var n=".svg"==t||".png"==t?t:".jpeg";window.SystemSettingsProperties.MainScreenLogo="main_logo_"+s+n;var l=rootUrl+"/content/images/application/main_logo_"+s+n+"?v="+$.now();isMainScrennLogoChanged=!0,$("#mainscreen_logo_img").attr("src",l),$("#upload-main-screen-image-textbox-error").addClass("hide"),$("#upload-main-screen-image-textbox").closest("div").removeClass("has-error"),$("#upload-main-screen-image-textbox-error").addClass("hide")?$(".header-logo").find("span.info-text").css("display","block"):$(".header-logo").find("span.info-text").css("display","none")}},e.readAsText(uploadedFile.rawFile),ShowWaitingProgress("#server-app-container","hide")}else{var i=".svg"==t||".png"==t?t:".jpeg";window.SystemSettingsProperties.MainScreenLogo="main_logo_"+s+i;var n=rootUrl+"/content/images/application/main_logo_"+s+i+"?v="+$.now();isMainScrennLogoChanged=!0,$("#mainscreen_logo_img").attr("src",n),$("#upload-main-screen-image-textbox-error").addClass("hide"),$("#upload-main-screen-image-textbox").closest("div").removeClass("has-error"),$("#upload-main-screen-image-textbox-error").addClass("hide")?$(".header-logo").find("span.info-text").css("display","block"):$(".header-logo").find("span.info-text").css("display","none"),ShowWaitingProgress("#server-app-container","hide")}}}),$("#upload-favicon-image").ejUploadbox({saveUrl:window.fileUploadUrl+"?imageType=favicon&&timeStamp="+s,autoUpload:!0,showFileDetails:!1,buttonText:{browse:".  .  ."},extensionsAllow:".PNG,.png,.jpg,.JPG,.jpeg,.JPEG,.svg,.SVG",height:window.innerWidth<=1366?26:30,beforeSend:function(e){setXSRFRequestHeader(e.xhr)},begin:function(){ShowWaitingProgress("#server-app-container","show")},fileSelect:function(e){i=e.files[0].extension.toLowerCase(),e.files[0].name,uploadedFile=e.files[0]},error:function(e){".png"!==i&&".jpg"!==i&&".jpeg"!==i&&".svg"!==i&&($("#upload-favicon-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("upload-favicon-image-textbox").closest("div").addClass("has-error"))},complete:function(){if(".svg"===i.toLowerCase()){var e=new FileReader;e.onload=function(e){var t=e.target.result;if(scriptPattern.test(t))$("#upload-favicon-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-favicon-image-textbox-error").html()?$(".favicon-logo").find("span.info-text").css("display","none"):$(".favicon-logo").find("span.info-text").css("display","block"),$("#upload-favicon-image-textbox").closest("div").addClass("has-error");else{var n=".svg"==i||".png"==i?i:".jpeg";window.SystemSettingsProperties.FavIcon="favicon_"+s+n;var l=rootUrl+"/content/images/application/favicon_"+s+n+"?v="+$.now();$("#favicon_logo_img").attr("src",l),$("#upload-favicon-image-textbox-error").addClass("hide"),$("#upload-favicon-image-textbox").closest("div").removeClass("has-error"),$("#upload-favicon-image-textbox-error").addClass("hide")?$(".favicon-logo").find("span.info-text").css("display","block"):$(".favicon-logo").find("span.info-text").css("display","none")}},e.readAsText(uploadedFile.rawFile),ShowWaitingProgress("#server-app-container","hide")}else{var t=".svg"==i||".png"==i?i:".jpeg";window.SystemSettingsProperties.FavIcon="favicon_"+s+t;var n=rootUrl+"/content/images/application/favicon_"+s+t+"?v="+$.now();$("#favicon_logo_img").attr("src",n),$("#upload-favicon-image-textbox-error").addClass("hide"),$("#upload-favicon-image-textbox").closest("div").removeClass("has-error"),$("#upload-favicon-image-textbox-error").addClass("hide")?$(".favicon-logo").find("span.info-text").css("display","block"):$(".favicon-logo").find("span.info-text").css("display","none"),ShowWaitingProgress("#server-app-container","hide")}}}),$("#upload-emaillogo-image").ejUploadbox({saveUrl:window.fileUploadUrl+"?imageType=emaillogo&&timeStamp="+s,autoUpload:!0,showFileDetails:!1,buttonText:{browse:".  .  ."},extensionsAllow:".PNG,.png,.jpg,.JPG,.jpeg,.JPEG,.svg,.SVG",height:window.innerWidth<=1366?26:30,beforeSend:function(e){setXSRFRequestHeader(e.xhr)},begin:function(){ShowWaitingProgress("#server-app-container","show")},fileSelect:function(e){emaillogoExtension=e.files[0].extension.toLowerCase(),emaillogoName=e.files[0].name,uploadedFile=e.files[0]},error:function(e){".png"!==emaillogoExtension&&".jpg"!==emaillogoExtension&&".jpeg"!==emaillogoExtension&&".svg"!==emaillogoExtension&&($("#upload-emaillogo-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-emaillogo-image-textbox").closest("div").addClass("has-error"))},complete:function(){if(".svg"===emaillogoExtension.toLowerCase()){var e=new FileReader;e.onload=function(e){var t=e.target.result;if(scriptPattern.test(t))$("#upload-emaillogo-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-emaillogo-image-textbox-error").html()?$(".email-logo").find("span.info-text").css("display","none"):$(".email-logo").find("span.info-text").css("display","block"),$("#upload-emaillogo-image-textbox").closest("div").addClass("has-error");else{var i=".svg"==emaillogoExtension||".png"==emaillogoExtension?emaillogoExtension:".jpeg";window.SystemSettingsProperties.EmailLogo="email_logo_"+s+i;var n=rootUrl+"/content/images/application/email_logo_"+s+i+"?v="+$.now();$("#email_logo_img").attr("src",n),$("#upload-emaillogo-image-textbox-error").addClass("hide"),$("#upload-emaillogo-image-textbox").closest("div").removeClass("has-error"),$("#upload-emaillogo-image-textbox-error").addClass("hide")?$(".email-logo").find("span.info-text").css("display","block"):$(".email-logo").find("span.info-text").css("display","none")}},e.readAsText(uploadedFile.rawFile),ShowWaitingProgress("#server-app-container","hide")}else{var t=".svg"==emaillogoExtension||".png"==emaillogoExtension?emaillogoExtension:".jpeg";window.SystemSettingsProperties.EmailLogo="email_logo_"+s+t;var i=rootUrl+"/content/images/application/email_logo_"+s+t+"?v="+$.now();$("#email_logo_img").attr("src",i),$("#upload-emaillogo-image-textbox-error").addClass("hide"),$("#upload-emaillogo-image-textbox").closest("div").removeClass("has-error"),$("#upload-emaillogo-image-textbox-error").addClass("hide")?$(".email-logo").find("span.info-text").css("display","block"):$(".email-logo").find("span.info-text").css("display","none"),ShowWaitingProgress("#server-app-container","hide")}}}),$("#upload-footerlogo-image").ejUploadbox({saveUrl:window.fileUploadUrl+"?imageType=footerlogo&&timeStamp="+s,autoUpload:!0,showFileDetails:!1,buttonText:{browse:".  .  ."},extensionsAllow:".PNG,.png,.jpg,.JPG,.jpeg,.JPEG,.svg,.SVG",height:window.innerWidth<=1366?26:30,beforeSend:function(e){setXSRFRequestHeader(e.xhr)},begin:function(){ShowWaitingProgress("#server-app-container","show")},fileSelect:function(e){footerlogoExtension=e.files[0].extension.toLowerCase(),footerlogoName=e.files[0].name,uploadedFile=e.files[0]},error:function(e){".png"!==footerlogoExtension&&".jpg"!==footerlogoExtension&&".jpeg"!==footerlogoExtension&&".svg"!==footerlogoExtension&&($("#upload-footerlogo-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-footerlogo-image-textbox").closest("div").addClass("has-error"))},complete:function(){if(".svg"===footerlogoExtension.toLowerCase()){var e=new FileReader;e.onload=function(e){var t=e.target.result;if(scriptPattern.test(t))$("#upload-footerlogo-image-textbox-error").html(window.Server.App.LocalizationContent.InValidFileFormat).removeClass("hide"),$("#upload-footerlogo-image-textbox-error").html()?$(".footer-logo").find("span.info-text").css("display","none"):$(".footer-logo").find("span.info-text").css("display","block"),$("#upload-footerlogo-image-textbox").closest("div").addClass("has-error");else{var i=".svg"==footerlogoExtension||".png"==footerlogoExtension?footerlogoExtension:".jpeg";window.SystemSettingsProperties.FooterLogo="footer_logo_"+s+i;var n=rootUrl+"/content/images/application/footer_logo_"+s+i+"?v="+$.now();$("#powderedby_logo_img").attr("src",n),$("#upload-footerlogo-image-textbox-error").addClass("hide"),$("#upload-footerlogo-image-textbox").closest("div").removeClass("has-error"),$("#upload-footerlogo-image-textbox-error").addClass("hide")?$(".footer-logo").find("span.info-text").css("display","block"):$(".footer-logo").find("span.info-text").css("display","none")}},e.readAsText(uploadedFile.rawFile),ShowWaitingProgress("#server-app-container","hide")}else{var t=".svg"==footerlogoExtension||".png"==footerlogoExtension?footerlogoExtension:".jpeg";window.SystemSettingsProperties.FooterLogo="footer_logo_"+s+t;var i=rootUrl+"/content/images/application/footer_logo_"+s+t+"?v="+$.now();$("#powderedby_logo_img").attr("src",i),$("#upload-footerlogo-image-textbox-error").addClass("hide"),$("#upload-footerlogo-image-textbox").closest("div").removeClass("has-error"),$("#upload-footerlogo-image-textbox-error").addClass("hide")?$(".footer-logo").find("span.info-text").css("display","block"):$(".footer-logo").find("span.info-text").css("display","none"),ShowWaitingProgress("#server-app-container","hide")}}}),$("div.date-format-radio input[type=radio]").each(function(){this.value==window.SystemSettingsProperties.DateFormat&&$("#"+this.id).attr("checked","checked")}),$("#help_text").on("click",function(){$("#ssl-help-message").toggle()}),$("#UpdateSystemSettings,#UpdateSystemSettings-bottom,#UpdateDatabaseSettings-bottom,#update-mail-settings").on("click",function(){var e=$(this).hasClass("update-system-settings")?window.Server.App.LocalizationContent.SiteSetting:$(this).hasClass("update-mail-settings")?window.Server.App.LocalizationContent.EmailSetting:window.Server.App.LocalizationContent.AccountsSettings,t=$("#secure-mail-authentication").is(":checked");if(RemoveUploadBoxError(),(!$(this).hasClass("update-system-settings")||$("#look-and-feel-form").valid())&&(!$(this).hasClass("update-mail-settings")||!isSelfHosted||$("#email-setting-form").valid())){var i=$("#site-base-url").val(),s=new Object;parseInt($("#port-number").val())==window.SystemSettingsProperties.MailSettingsPort&&$("#smtp-address").val()==window.SystemSettingsProperties.MailSettingsHost&&$("#mail-display-name").val()==window.SystemSettingsProperties.MailSettingsSenderName&&$("#mail-user-name").val()==window.SystemSettingsProperties.MailSettingsAddress&&t==window.SystemSettingsProperties.MailSettingsIsSecureAuthentication||(s={Address:$("#mail-user-name").val(),Password:$("#mail_password").val(),Host:$("#smtp-address").val(),SenderName:$("#mail-display-name").val(),Port:parseInt($("#port-number").val()),IsSecureAuthentication:t}),""!==$("#mail-password").val()&&!0;var n=!1,l=!1;if($(this).hasClass("update-system-settings"))updateSystemSettingsUrl=window.updateSiteSettingsUrl,systemSettingsData={SettingsKey:SettingsScopes.SiteSettings,OrganizationName:$("#site-orgname").val(),LoginLogo:window.SystemSettingsProperties.LoginLogo,MainScreenLogo:window.SystemSettingsProperties.MainScreenLogo,FavIcon:window.SystemSettingsProperties.FavIcon,EmailLogo:window.SystemSettingsProperties.EmailLogo,FooterLogo:window.SystemSettingsProperties.FooterLogo,CopyrightInformation:$("#site-copyright").val(),WelcomeNoteText:$("#txt_welcome_note").val(),TimeZone:$("#time-zone").val(),DateFormat:$("input:radio[name=date_format]:checked").val(),Language:$("#language").val(),IsEnablePoweredBySyncfusion:$("#enablepoweredbysyncfusion").is(":checked"),IsEnableCopyrightInfo:$("#enablecopyrightinfo").is(":checked"),TimeFormat:$("#time_format").is(":checked"),IsSecureConnection:"https"===$("#enable-ssl").val(),FontPreference:$("#application-font").val()},isSelfHosted&&($("#site-base-url").attr("data-original-value")!=$("#site-base-url").val()&&(n=!0),$("#enable-ssl").val()==$("#scheme_value").attr("data-value")&&$("#site-base-url").attr("data-original-value")===$("#site-base-url").val()||(l=!0));else if($(this).hasClass("update-mail-settings")){var o=null==$("#mail-account").val()||isNullOrWhitespace($("#mail-account").val())?0:parseInt($("#mail-account").val());s={MailSettingsAddress:$("#mail-user-name").val(),MailSettingsAuthType:0==o?parseInt($("#mail-authentication-type").val()):parseInt($("#oauth-mail-authentication-type").val()),MailSettingsUserName:1===parseInt($("#mail-authentication-type").val())?$("#sender-user-name").val():"",MailSettingsPassword:1===parseInt($("#mail-authentication-type").val())?$("#mail-password").val():"",MailSettingsHost:$("#smtp-address").val(),MailSettingsSenderName:$("#mail-display-name").val(),MailSettingsPort:parseInt($("#port-number").val()),MailSettingsIsSecureAuthentication:t,MachineName:$("#machineName").val(),HostDomain:$("#hostDomain").val(),MailSettingsAccount:o,MailSettingsTenantId:$("#tenant-id").val(),MailSettingsClientId:$("#client-id").val(),MailSettingsClientSecret:$("#client-secret").val()};updateSystemSettingsUrl=window.updateEmailSettingsUrl,systemSettingsData={SettingsKey:SettingsScopes.Email,MailSettings:s}}else updateSystemSettingsUrl=window.updateAccountsSettingsUrl,systemSettingsData={SettingsKey:SettingsScopes.Accounts,ActivationType:$("input:radio[name=activation]:checked").val(),IsEmailRequired:$("#email-required").is(":checked"),UserDefaultGroup:$("#default-group").val()};$.ajax({type:"POST",url:window.updateSystemSettingsUrl,data:{systemSettingsData:JSON.stringify(systemSettingsData)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(t){if(l)window.location.href=n?$("#enable-ssl").val()+"://"+i+"/administration":$("#enable-ssl").val()+"://"+location.host+location.pathname;else{$("#main_screen_logo a img").attr("src",rootUrl+"/content/images/application/"+systemSettingsData.MainScreenLogo);var s=document.createElement("link");if(s.type="image/x-icon",s.rel="shortcut icon",s.href=rootUrl+"/content/images/application/"+systemSettingsData.FavIcon,document.getElementsByTagName("head")[0].appendChild(s),$(this).hasClass("update-system-settings")){var o=document.title.split("-")[0]+" - "+$("#site-orgname").val();document.title=o}}t.status?($("#enablepoweredbysyncfusion").length>0&&($("#enablepoweredbysyncfusion").is(":checked")?$("#poweredbysyncfusion").removeClass("d-none").addClass("d-block"):$("#poweredbysyncfusion").removeClass("d-block").addClass("d-none")),$("#enablecopyrightinfo").length>0&&($("#enablecopyrightinfo").is(":checked")?($("#copyrightinfo").removeClass("d-none").addClass("d-show"),isSelfHosted&&(document.getElementById("copyrightinfo").innerHTML=$("#site-copyright").val(),document.getElementById("site-copyright").value=$("#site-copyright").val())):$("#copyrightinfo").removeClass("d-block").addClass("d-none")),$("#enablepoweredbysyncfusion").length>0&&$("#enablecopyrightinfo").length>0&&($("#enablepoweredbysyncfusion").is(":checked")&&$("#enablecopyrightinfo").is(":checked")?$("#footer-separator").removeClass("d-none").addClass("d-block"):$("#footer-separator").removeClass("d-block").addClass("d-none")),SuccessAlert(e,window.Server.App.LocalizationContent.SettingsSuccessAlert,7e3),SetCookie(),null!=$("#app_font").val()&&$("#app_font").val().toLowerCase()!==$("#application-font").val().toLowerCase()&&location.reload()):(null!=t.permissionDenied&&t.permissionDenied?WarningAlert(e,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(e,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3),$(".error-message, .success-message").css("display","none")),hideWaitingPopup($("#server-app-container"))}})}}),$(".css-radio").on("click",function(){"dd.MM.yyyy"==$("input:radio[name=date_format]:checked").val()?($("#time_format").prop("checked",!0),$("#time_format").attr("disabled",!0),$(".time").html(window.Server.App.LocalizationContent.TimeFormatTrue)):$("#time_format").is(":checked")?($("#time_format").attr("disabled",!1),$("#time_format").prop("checked",!0)):($("#time_format").prop("checked",!1),$("#time_format").attr("disabled",!1),$("#dd_MM_yyyy").attr("disabled",!1))}),$(document).on("click","#time_format",function(){$("#time_format").is(":checked")?$(".time").html(window.Server.App.LocalizationContent.TimeFormatTrue):$(".time").html(window.Server.App.LocalizationContent.TimeFormatFalse)}),$("#update-active-dir-settings").on("click",function(){var e={UserName:$("#username").val().trim(),Password:$("#password").val().trim(),LdapURL:$("#ldapurl").val().trim(),EnableSsl:$("#enable-ldap-ssl").is(":checked"),DistinguishedName:$("#distinguished-name").val(),PortNo:$("#ldap-port-number").val().trim()};$.ajax({type:"POST",url:window.updateAdSettingsUrl,data:{ADSettingsData:JSON.stringify(e)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(e){e.status?(SuccessAlert(window.Server.App.LocalizationContent.ADSettings,window.Server.App.LocalizationContent.SettingsSuccessAlert,7e3),void 0!==e.redirectTo&&""!==e.redirectTo&&(window.location.href=e.redirectTo)):null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.ADSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(window.Server.App.LocalizationContent.ADSettings,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3),$(".error-message, .success-message").css("display","none")},complete:function(){hideWaitingPopup($("#server-app-container"))}})}),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.ItemNameValidator),$.validator.addMethod("isValidName",function(e,t){return IsValidName("name",e)},window.Server.App.LocalizationContent.AvoidSpecialCharactors),$.validator.addMethod("isValidEmail",function(e,t){return IsEmail(e)},window.Server.App.LocalizationContent.IsValidEmail),isSelfHosted&&($.validator.addMethod("isValidUrl",function(e,t){var i=parseURL($("#enable-ssl").val()+"://"+$("#site-base-url").val());return!(0==isValidUrl(e)||parseInt(i.port)>65535)},window.Server.App.LocalizationContent.IsValidUrl),$("#look-and-feel-form").validate({errorElement:"span",onkeyup:function(e,t){9!==t.keyCode&&$(e).valid()},onfocusout:function(e){$(e).valid()},rules:{"site-copyright":{isRequired:!0},"site-base-url":{isRequired:!0,isValidUrl:!0}},highlight:function(e){$(e).closest("div").addClass("has-error")},unhighlight:function(e){$(e).closest("div").removeClass("has-error"),"site-copyright"==e.id?$(e).parent().next().find("span.validation-errors").html(""):$(e).parent().parent().next().next().find("span.validation-errors").html("")},errorPlacement:function(e,t){"site-copyright"==t[0].id?$(t).parent().next().find("span.validation-errors").html(e):$(t).parent().parent().next().next().find("span.validation-errors").html(e)},messages:{"site-copyright":{isRequired:window.Server.App.LocalizationContent.CopyRightvalidator},"site-base-url":{isRequired:window.Server.App.LocalizationContent.Urlvalidator}}})),$("a[data-bs-toggle='tab']").on("click",function(e){if("azure-ad"==$(this).attr("id"))$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-none").addClass("d-block"),$("#UpdateAzureADSettings-bottom").show(),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$("#azure-ad-tab span.validation-message").addClass("ng-hide").parent().removeClass("has-error"),$(".online-help-link").attr("href",userDirectoryAzure),"?tab=azure-ad"!=window.location.search.toString()&&(history.pushState(null,"","?tab=azure-ad"),addUserDirectoryLog("azure"));else if("windows-ad"==$(this).attr("id")){$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#update-active-dir-settings").show(),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$("#windows-ad-tab .error").hide().parent().parent().removeClass("has-error"),$(".online-help-link").attr("href",userDirectoryWindows),"?tab=windows-ad"!=window.location.search.toString()&&(history.pushState(null,"","?tab=windows-ad"),addUserDirectoryLog("windows"))}else if("auth-control"==$(this).attr("id")){$("#update-auth-control").show(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#update-active-dir-settings").hide(),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$("#windows-ad-tab .error").hide().parent().parent().removeClass("has-error"),$(".online-help-link").attr("href",userDirectoryAuthControl),"?tab=auth-control"!=window.location.search.toString()&&(history.pushState(null,"","?tab=auth-control"),addUserDirectoryLog("auth-control"))}else if("oauth-settings"==$(this).attr("id")){$("#update-oauth-settings").show(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#update-active-dir-settings").hide(),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$("#windows-ad-tab .error").hide().parent().parent().removeClass("has-error"),$(".online-help-link").attr("href",userDirectoryOauth),"?tab=oauth-settings"!=window.location.search.toString()&&(history.pushState(null,"","?tab=oauth-settings"),addUserDirectoryLog("oauth"))}else if("openid-settings"==$(this).attr("id")){$("#update-openid-settings").show(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#update-active-dir-settings").hide(),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$("#windows-ad-tab .error").hide().parent().parent().removeClass("has-error"),$(".online-help-link").attr("href",userDirectoryOpenid),"?tab=openid-settings"!=window.location.search.toString()&&(history.pushState(null,"","?tab=openid-settings"),addUserDirectoryLog("openid"))}else if("default-authentication-settings"==$(this).attr("id")){$("#update-defaultauthlogin-settings").show(),$("#update-openid-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#update-active-dir-settings").hide(),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-auth-control").hide(),"?tab=default-authentication-settings"!=window.location.search.toString()&&history.pushState(null,"","?tab=default-authentication-settings")}else if("csp-settings-tab"===$(this).attr("id")){$("#update-csp-settings").show(),$("#cancel-dashboard-settings").show(),$("#update-x-frame-options-settings").hide(),"?tab=csp-settings"!=window.location.search.toString()&&history.pushState(null,"","?tab=csp-settings")}else if("x-frame-options-tab"===$(this).attr("id")){$("#update-csp-settings").hide(),$("#update-x-frame-options-settings").show(),"?tab=x-frame-options"!=window.location.search.toString()&&history.pushState(null,"","?tab=x-frame-options")}else if("network-settings-tab"===$(this).attr("id")){$("#update-csp-settings").hide(),$("#update-x-frame-options-settings").hide(),$("#update-network-settings").show(),"?tab=network-settings"!=window.location.search.toString()&&history.pushState(null,"","?tab=network-settings")}else{if($("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),0==$("#schema-selection").length)$("#connect-database").show(),$("#save-db-settings").hide(),$("#update-active-dir-settings").hide(),$("#change-connection").hide(),$("#UpdateAzureADSettings-bottom").addClass("d-none").removeClass("d-block"),"?tab=database-settings"!=window.location.search.toString()&&(history.pushState(null,"","?tab=database-settings"),addUserDirectoryLog("database"));else $("#change-connection").trigger("click"),$("#connect-database").show(),$("#save-db-settings").hide(),$("#update-active-dir-settings").hide(),$("#change-connection").hide(),$("#UpdateAzureADSettings-bottom").addClass("d-none").removeClass("d-block"),"?tab=database-settings"!=window.location.search.toString()&&(history.pushState(null,"","?tab=database-settings"),addUserDirectoryLog("database"));$(".online-help-link").attr("href",userDirectoryDatabase)}$(".success-message, .error-message").hide()}),$("#active-directory-container").is(":visible"))&&("?tab=azure-ad"==window.location.search.toString()&&($("#azure-ad").tab("show"),$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-none").addClass("d-block"),$("#UpdateAzureADSettings-bottom").show()));$(document).ready(function(){$("#mail-account").trigger("change")}),$("#mail-account").on("change",function(){switch($(".validation-txt-errors").hide(),$(".validation-errors").html(""),$("#test-connection-validation").hide(),$("#test-connection-validation").removeClass("failure").html(""),$(".has-error").removeClass("has-error"),$(".secrets-field input[type='text'], .secrets-field input[type='password']").val(""),$(".secrets-field-pwsd input[type='text'], .secrets-field-pwsd input[type='password']").val(""),$(".mail-pswd-auth-type").prop("disabled",!0),$("#mail-account").val()){case"0":$(".oauth-field").hide(),$(".smtp-field").show(),$("#client-id").val(""),$("#client-secret").val(""),$("#tenant-id").val(""),$("div.placeholder").remove();break;case"1":$(".oauth-field").show(),$(".smtp-field").hide(),$("div.placeholder").remove(),$("#smtp-address").val(""),$("#port-number").val(""),$("#mail-display-name").val(""),$("#sender-user-name").val(""),$("#mail-password").val(""),$("#secure-mail-authentication").prop("checked",!1)}}),$(document).ready(function(){$("#active-directory-container").is(":visible")&&(location.href.match(/azure-ad/)?($("#azure-ad").tab("show"),$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-none").addClass("d-block"),$("#UpdateAzureADSettings-bottom").show(),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$(".online-help-link").attr("href",userDirectoryAzure),addUserDirectoryLog("azure")):location.href.match(/database-settings/)?($("#database-settings").tab("show"),$("#connect-database").show(),$("#save-db-settings").hide(),$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$(".online-help-link").attr("href",userDirectoryDatabase),addUserDirectoryLog("database")):location.href.match(/auth-control/)?($("#auth-control").tab("show"),$("#update-auth-control").show(),$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-openid-settings").hide(),$("#update-oauth-settings").hide(),$("#update-defaultauthlogin-settings").hide(),$(".online-help-link").attr("href",userDirectoryAuthControl),addUserDirectoryLog("auth-control")):location.href.match(/oauth-settings/)?($("#oauth-settings").tab("show"),$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-oauth-settings").show(),$(".online-help-link").attr("href",userDirectoryOauth),addUserDirectoryLog("oauth"),loadCustomMailContent("oauth")):location.href.match(/openid-settings/)?($("#openid-settings").tab("show"),$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-auth-control").hide(),$("#update-defaultauthlogin-settings").hide(),$("#update-openid-settings").show(),$(".online-help-link").attr("href",userDirectoryOpenid),addUserDirectoryLog("openid"),loadCustomMailContent("openid")):location.href.match(/default-authentication-settings/)?($("#default-authentication-settings").tab("show"),$("#update-openid-settings").hide(),$("#update-active-dir-settings").hide(),$("#UpdateAzureADSettings-bottom").removeClass("d-block").addClass("d-none"),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-auth-control").hide()):($("#windows-ad").tab("show"),$("#update-active-dir-settings").show(),isSelfHosted?$("#UpdateAzureADSettings-bottom").addClass("d-none").removeClass("d-block"):$("#UpdateAzureADSettings-bottom").removeClass("d-none"),$("#save-db-settings").hide(),$("#connect-database").hide(),$("#change-connection").hide(),$("#update-oauth-settings").hide(),$("#update-openid-settings").hide(),$("#update-auth-control").hide(),$(".online-help-link").attr("href",userDirectoryWindows),addUserDirectoryLog("azure")))}),$(document).on("click","#test-windows-ad-connection",ActiveDirectoryFormValidate),$(document).on("click","#testAzureConnection",AzureADFormValidate),$(document).on("click","#oauth-callback-link",function(){this.setSelectionRange(0,this.value.length)}),$(document).on("click","#openid-callback-link",function(){this.setSelectionRange(0,this.value.length)}),$(document).on("change","#enablepoweredbysyncfusion",function(){0==$("#enablepoweredbysyncfusion").is(":checked")?$("#poweredbysyncfusion").removeClass("d-block").hide():$("#poweredbysyncfusion").removeClass("d-none").show(),addFooterSeparator()}),$(document).on("change","#enablecopyrightinfo",function(){0==$("#enablecopyrightinfo").is(":checked")?$("#copyrightinfo").removeClass("d-block").hide():$("#copyrightinfo").removeClass("d-none").show(),addFooterSeparator()})}),$("#model-language-dropdown button").on("click",function(){setTimeout(function(){$("#model-language").selectpicker("refresh")},100)}),$(document).on("mouseenter",".tooltip-container",function(){var e=$(this).attr("data-image").toLowerCase();$(".highlight-image[data-image='"+e+"']").find(".form-control, .input-group-addon").addClass("primary-color-class")}),$(document).on("mouseleave",".tooltip-container",function(){var e=$(this).attr("data-image").toLowerCase();$(".highlight-image[data-image='"+e+"']").find(".form-control, .input-group-addon").removeClass("primary-color-class")}),parseURL.options={strictMode:!0,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},$(document).on("click","#UpdateAzureADSettings-bottom",function(){var e={TenantName:$("#tenantName").val().trim(),ClientID:$("#clientId").val().trim(),ClientKey:$("#clientKey").val().trim(),DeleteGroupUsers:$("#delete-group-users").is(":checked")};$.ajax({type:"POST",url:window.updateAzureADSettingsUrl,data:{ADSettingsData:JSON.stringify(e)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(e){e.status?(SuccessAlert(window.Server.App.LocalizationContent.AzureADSettings,window.Server.App.LocalizationContent.SettingsSuccessAlert,7e3),void 0!==e.redirectTo&&""!==e.redirectTo&&(window.location.href=e.redirectTo)):null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.AzureADSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(window.Server.App.LocalizationContent.AzureADSettings,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3),$(".azure-ad-button-area .error-message, .azure-ad-button-area .success-message").css("display","none"),hideWaitingPopup($("#server-app-container"))},error:function(){hideWaitingPopup($("#server-app-container"))}})}),$(document).on("click","#upload-favicon-image-textbox",function(){$("#upload-favicon-image").children().find(".e-uploadinput").trigger("click"),$("#upload-favicon-image").focus()}),$(document).on("click","#upload-emaillogo-image-textbox",function(){$("#upload-emaillogo-image").children().find(".e-uploadinput").trigger("click"),$("#upload-emaillogo-image").focus()}),$(document).on("click","#upload-footerlogo-image-textbox",function(){$("#upload-footerlogo-image").children().find(".e-uploadinput").trigger("click"),$("#upload-footerlogo-image").focus()}),$(document).on("click","#upload-main-screen-image-textbox",function(){$("#upload-Main-screen-image").children().find(".e-uploadinput").trigger("click"),$("#upload-Main-screen-image").focus()}),$(document).on("click","#upload-login-image-textbox",function(){$("#upload-login-image").children().find(".e-uploadinput").trigger("click"),$("#upload-login-image").focus()}),$(document).on("click","#default-authentication-confirmation-dialog-close-link",function(e){e.preventDefault(),authenticationDialogBoxClose()}),$(document).on("click","#default-authentication-confirmation-no",authenticationDialogBoxClose),$(document).ready(function(){var e;($("#default-authentication-confirmation-diolog").ejDialog({showOnInit:!1,allowDraggable:!0,enableResize:!1,width:"600px",enableModal:!0,showHeader:!1,close:"authenticationDialogBoxClose",closeOnEscape:!0}),$(".update-oauth-or-openid-settings").click(function(){$("#default-authentication-confirmation-diolog").ejDialog("close"),updateSetting(this.id),defaultAuthentication=""}),$('[data-id="login-provider-type"]').css("cssText","outline: none !important"),$('[data-id="login-provider-type"]').addClass("disabled"),$("#enable-defaultauthentication").is(":checked"))?"None"!=$("#login-provider-type option:selected").text().trim()&&$('[data-id="login-provider-type"]').removeClass("disabled"):($("#login-provider-type").prop("disabled",!0),$("#none-default").prop("disabled",!0));if($("#enable-defaultauthentication").click(function(){if($('[data-id="login-provider-type"]').css("cssText","outline: none !important"),$("#enable-defaultauthentication").is(":checked")){var e=$("#login-provider-type option:last").text().trim();$(".provider-list button .filter-option-inner-inner").first().text(e),"None"==$(".provider-list button .filter-option-inner-inner").first().text()&&$("#update-defaultauthlogin-settings").attr("disabled",!0),$("#login-provider-type").prop("disabled",!1),$('[data-id="login-provider-type"]').removeClass("disabled").next().find("li").removeClass("disabled"),"None"==$('[data-id="login-provider-type"]').removeClass("disabled").next().find("li:first").text()&&$('[data-id="login-provider-type"]').removeClass("disabled").next().find("li:first").addClass("disabled")}else $("#login-provider-type").prop("disabled",!0),$(".provider-list button .filter-option-inner-inner").first().text("None"),$("#none-default").prop("disabled",!1),$("#update-defaultauthlogin-settings").removeAttr("disabled")}),$("#active-directory-container").length>0&&$("#auth-control").length>0){e="body",regexIe8.test(userAgent)&&$(e).find("input[type=text][class!='hidden-input'],input[type=password][class!='hidden-input'],textarea[id='txt_welcome_note']").each(function(){""===$(this).val()?$($("<div>",{class:"placeholder",text:$(this).attr("placeholder")})).insertAfter(this).show():$($("<div>",{class:"placeholder",text:$(this).attr("placeholder"),style:"display:block"})).insertAfter(this).hide()}),$("[ data-bs-toggle='tooltip']").tooltip(),$("[data-bs-toggle='popover']").popover({container:"body"}),$(document).on("click",function(e){$("[data-bs-toggle='tooltip']").each(function(){bootstrap.Tooltip.getInstance(this)||new bootstrap.Tooltip(this)}),$("[data-bs-toggle='popover']").each(function(){var e=bootstrap.Popover.getInstance(this);e&&e.dispose(),new bootstrap.Popover(this,{container:"#active-directory-container"})}),$(".popover").children().hasClass("popover-content")&&($(".popover-content").attr("id","popover-content"),$(".arrow").attr("id","arrow"));-1===jQuery.inArray(e.target.id,["popover-content","arrow","oauth-provider-name-info","oauth-logo-info","oauth-logoutendpoint-info","oauth-auth-endpoint-info","oauth-token-endpoint-info","oauth-scopes-info","oauth-user-info-endpoint-info","oauth-user-data-info","openid-provider-name-info","openid-logo-info","openid-logouturl-info","openid-authority-info","openid-identifier-info","oauth-callback-info","openid-callback-info","azure-ad-group-user-import-info"])&&$(".popover").css("display","none"),$(".popover").each(function(){$(this).is(e.target)||$(this).has(e.target).length>0||0===$(this).siblings(".popover").length||0!==$(this).siblings(".popover").has(e.target).length||$(this).popover().remove()})}),$(document).on("click","#oauth-callback-link-copy, #openid-callback-link-copy",function(e){if($(this).siblings("input").select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor))$(this).removeClass("su su-copy"),$(this).attr("data-original-title","");else{document.execCommand("copy");var t=bootstrap.Tooltip.getInstance(this);t&&t.dispose(),(t=new bootstrap.Tooltip(this,{title:window.Server.App.LocalizationContent.Copysuccess,trigger:"hover"})).show(),setTimeout(()=>{t.dispose(),t=new bootstrap.Tooltip(this,{title:window.Server.App.LocalizationContent.LinkCopy,trigger:"hover"})},1e3)}});var t=angular.element("#active-directory-container").scope();function i(e){var i="oauthLogoUrl"===e.currentTarget.name||"oauthProviderName"===e.currentTarget.name||"oauthAuthorizationEP"===e.currentTarget.name?t.oauthLogoUrl:t.openidLogoUrl;null!=i&&""!==i||("oauthLogoUrl"===e.currentTarget.name||"oauthProviderName"===e.currentTarget.name||"oauthAuthorizationEP"===e.currentTarget.name?$("#oauth-image-upload-box").siblings(".validation-message").html(window.Server.App.LocalizationContent.SelectAuthProviderLogo):$("#openid-image-upload-box").siblings(".validation-message").html(window.Server.App.LocalizationContent.SelectAuthProviderLogo),t.$apply(function(){"oauthLogoUrl"===e.currentTarget.name||"oauthProviderName"===e.currentTarget.name||"oauthAuthorizationEP"===e.currentTarget.name?t.oauthSettingsForm.isValidOAuthLogoUrl=!1:t.oauthSettingsForm.isValidOpenIdLogoUrl=!1}))}t.$apply(function(){t.oauthSettingsForm.isValidOAuthLogoUrl=""!=t.oauthLogoUrl.$viewValue,t.oauthSettingsForm.isValidOpenIdLogoUrl=""!=t.openidLogoUrl.$viewValue}),t.hideValidationMessage=function(e,i){var s="oauth"===i?$("#update-oauth-settings"):$("#update-openid-settings");e?t.oauthSettingsForm.$invalid&&s.prop("disabled",!0):("oauth"===i?(t.oauthSettingsForm.$setUntouched(),t.oauthSettingsForm.$setPristine(),$("#oauth-image-upload-box").siblings(".validation-message").html("")):(t.openidSettingsForm.$setUntouched(),t.openidSettingsForm.$setPristine(),$("#openid-image-upload-box").siblings(".validation-message").html("")),s.prop("disabled",!1)),$("#token-method-type").selectpicker("destroy"),$("#token-method-type").selectpicker(),$("#user-info-method-type").selectpicker("destroy"),$("#user-info-method-type").selectpicker(),$(".group-import-provider-type").selectpicker("destroy"),$(".group-import-provider-type").selectpicker()},$(document).on("click","#update-auth-control",function(){var e=[];e.push({auth_type:$("#default-control-type").val().trim(),is_enabled:$("#enable-global-default").is(":checked")},{auth_type:$("#oauth-control-type").val().trim(),is_enabled:$("#enable-global-oauth").is(":checked")},{auth_type:$("#openid-control-type").val().trim(),is_enabled:$("#enable-global-openid").is(":checked")}),$.ajax({type:"POST",url:window.updateauthcontrolUrl,data:{AuthControlData:JSON.stringify(e)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(e){hideWaitingPopup($("#server-app-container")),e.Status?SuccessAlert(window.Server.App.LocalizationContent.AuthControl,window.Server.App.LocalizationContent.AuthControlUpdated,7e3):null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.AuthControl,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(window.Server.App.LocalizationContent.AuthControl,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3)},error:function(){hideWaitingPopup($("#server-app-container"))}})}),$(document).on("click",".update-auth-settings",function(){$(".logo-container .validation-message").html("");var e="update-oauth-settings"===this.id?"oauth":"openid",t="update-oauth-settings"===this.id?"oauth 2.0":"openid connect";defaultAuthentication=$("#enable-defaultauthentication").is(":checked")?$("#login-provider-type").find(":selected").text().toLowerCase():"",defaultAuthentication!=t||$("#enable-"+e).is(":checked")?updateSetting(e):($("#default-authentication-confirmation-diolog").ejDialog("open"),$(".update-oauth-or-openid-settings").attr("id",e))}),$(document).on("click",".update-defaultauth-settings",function(){var e=$("#enable-defaultauthentication").is(":checked")?"oauth 2.0"==$("#login-provider-type option:selected").text().trim().toLowerCase()?"CustomOAuth":"CustomOIDC":"DefaultAuthentication";$.ajax({type:"POST",url:defaultauthsettingsUrl,data:{AuthProvider:JSON.stringify(e)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(e){e.Status?(hideWaitingPopup($("#server-app-container")),defaultAuthentication=$("#login-provider-type").find(":selected").text().toLowerCase(),SuccessAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdated,7e3)):(null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3),hideWaitingPopup($("#server-app-container")))},error:function(){hideWaitingPopup($("#server-app-container")),WarningAlert(window.Server.App.LocalizationContent.AuthenticationSettings,window.Server.App.LocalizationContent.AuthSettingsUpdatedError,7e3)}})}),$(document).on("focusout","#oauth-provider-name, #oauth-authorization-endpoint",function(e){i(e)}),$(document).on("focusout","#openid-provider-name, #openid-authority",function(e){i(e)}),$(document).on("click",".image-upload",function(e){i(e)});var s=$("#oauth-image-upload-box"),n=$("#openid-image-upload-box");function l(e){!function(e,i){var l=$('input[name="'+i+'"]').parents(".auth-image-upload-box").siblings(".validation-message");try{var o=["image/jpg","image/jpeg","image/png","image/svg+xml"],r=e.size/1024;if($.inArray(e.type,o)<0)throw window.Server.App.LocalizationContent.AuthImageAllowedFormat;if(r>500)throw window.Server.App.LocalizationContent.AuthImageAllowedSize;if(!e)throw"Invalid file";!function(e,i){let l="openidLogoUrl"===i?n.find(".js-image-preview"):s.find(".js-image-preview"),o=new FileReader;o.onload=function(){t.$apply(function(){var s="url("+o.result+")";l.css("backgroundImage",s),"openidLogoUrl"===i?(t.openidLogoUrl=s,openidLogoChanged=!0):(t.oauthLogoUrl=s,oauthLogoChanged=!0),t.logoType=e.type,"openidLogoUrl"===i?$("#openid-image-upload-box").siblings(".validation-message").html(""):$("#oauth-image-upload-box").siblings(".validation-message").html("")})},o.readAsDataURL(e)}(e,i),l.html(""),t.$apply(function(){"oauthLogoUrl"===i?t.oauthSettingsForm.isValidOAuthLogoUrl=!0:t.oauthSettingsForm.isValidOpenIdLogoUrl=!0})}catch(e){l.html(e),t.$apply(function(){"oauthLogoUrl"===i?t.oauthSettingsForm.isValidOAuthLogoUrl=!1:t.oauthSettingsForm.isValidOpenIdLogoUrl=!1})}}(e.currentTarget.files[0],e.srcElement.name)}s.find(".image-upload")[0].addEventListener("change",l),n.find(".image-upload")[0].addEventListener("change",l),$(document).on("change","select.oauth-group-import, select.openid-group-import",function(){var e=$(this).closest(".group-import");switch(e.find(".cognito-fields, .auth0-fields, .okta-fields, .onelogin-fields").addClass("display-none"),e.find("input[type='text']").val(""),this.value){case"CognitoAWS":e.find(".cognito-fields").removeClass("display-none");break;case"Auth0":e.find(".auth0-fields").removeClass("display-none");break;case"Okta":e.find(".okta-fields").removeClass("display-none");break;case"OneLogin":e.find(".onelogin-fields").removeClass("display-none")}})}}),$(document).on("change","input[name='activation']",function(){$("#email-required-warning").removeClass("d-block").addClass("d-none"),$("#email-not-required").attr("disabled",!1),$("#label-email-not-required").removeClass("disabled-lable-color"),$("#email-account-activation").is(":checked")&&($("#email-required-warning").removeClass("d-none").addClass("d-block"),$("#email-not-required").attr("disabled",!0),$("#label-email-not-required").addClass("disabled-lable-color"),$("#email-required").prop("checked",!0))}),$(document).on("click","#oauth-email-editor .CodeMirror .editor-preview p a, #openid-email-editor .CodeMirror .editor-preview p a",function(e){e.preventDefault()}),$(document).on("click","#configure-openid-identity-provider-info",function(){$("#configure-openid-identity-provider-info").prop("checked")||($("input[name='openIdIdentityProviderName']").val(""),$("input[name='openIdIdentityProviderURL']").val(""))}),$(document).on("click","#configure-oauth-identity-provider-info",function(){$("#configure-oauth-identity-provider-info").prop("checked")||($("input[name='oauthIdentityProviderName']").val(""),$("input[name='oauthIdentityProviderUrl']").val(""))}),$(document).on("click","#configure-openid-custom-mail-content",function(){$("#configure-openid-custom-mail-content").prop("checked")&&initializeSimpleMdeForCustomMail(openIdCustomEmailContent,"openId")}),$(document).on("click","#configure-oauth-custom-mail-content",function(){$("#configure-oauth-custom-mail-content").prop("checked")&&initializeSimpleMdeForCustomMail(oAuthCustomEmailContent,"oauth")}),$(document).on("click","[data-bs-toggle='popover']",function(e){$('[data-bs-toggle="popover"]').not(this).popover("hide"),$(this).popover("toggle"),e.stopPropagation()}),$(document).ready(function(){$("#email-account-activation").is(":checked")&&($("#email-required-warning").removeClass("hide").addClass("show"),$("#email-not-required").attr("disabled",!0),$("#label-email-not-required").addClass("disabled-lable-color"),$("#email-required").prop("checked",!0)),$(document).on("click","#oauth-settings",function(){loadCustomMailContent("oauth")}),$(document).on("click","#openid-settings",function(){loadCustomMailContent("openid")}),$(document).on("change","input[name='activation']",function(){$("#email-required-warning").removeClass("show").addClass("hide"),$("#email-not-required").attr("disabled",!1),$("#label-email-not-required").removeClass("disabled-lable-color"),$("#email-account-activation").is(":checked")&&($("#email-required-warning").removeClass("hide").addClass("show"),$("#email-not-required").attr("disabled",!0),$("#label-email-not-required").addClass("disabled-lable-color"),$("#email-required").prop("checked",!0))})}),$(document).on("mousedown",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("mouseup",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchstart",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("touchend",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")}),$(document).on("mouseleave",".show-hide-password",function(){$(this).siblings("input").attr("type","password")}),window.innerWidth<1041&&$(document).on("click",".show-hide-password",function(){$(this).siblings("input").is(":password")?$(this).siblings("input").attr("type","text"):$(this).siblings("input").attr("type","password")});var tableRelationList=[],createRelationData=[],gridObj,selectedValues=[],selectedObject=[],objectSelected=[],searchedResult=[],selectedIndex=[],selectedJoinColumn,isJoinTableDialogBinded=!1,isExistingJoinTableDialogBinded=!1,isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),treeobj,inputObj,count=0,onFirstChk=!0;window._temp=[];var importDatabaseQuerySchema={};function getFormData(){var e=$("#database-type").val(),t="",i="",s="",n="",l=!1;switch(e.toLowerCase()){case"mssql":t=$("#txt-login").val(),i=$("#txt-password-db").val(),s=$("#txt-dbname").val(),l=$("#secure-sql-connection").is(":checked");break;case"postgresql":t=$("#postgresql-login").val(),i=$("#postgresql-password-db").val(),s=$("#postgresql-dbname").val(),n=$("#postgresql-port").val(),l=$("#secure-postgresql-connection").is(":checked")}var o=1;return"windows"==$("#check-windows").val()&&(o=0),{ServerType:$("#database-type").val(),UserName:t,Password:i,DataBaseName:s,ServerName:"mssql"===e.toLowerCase()?$("#txt-servername").val():"postgresql"===e.toLowerCase()?$("#postgresql-servername").val():"",AuthenticationType:o,DSN:"",DatabasePassword:$("#client-password").val(),Port:n,SslEnabled:l}}function getTableRelation(e){var t;return $("#content-area").ejWaitingPopup("show"),$.ajax({type:"POST",url:getTableRelationUrl,data:{connection:JSON.stringify(getFormData()),schemaInfo:JSON.stringify(importDatabaseQuerySchema),targetField:e},async:!1,success:function(i){$("#content-area").ejWaitingPopup("hide"),i.length>0?1==i.length?t=i[0]:openSelectTableRelationPopup(i,e):openGetRelationPopup(e)}}),t}function openSelectTableRelationPopup(e,t){tableRelationList=e,selectedJoinColumn=t;var i="<tr><th></th><th>"+window.Server.App.LocalizationContent.LeftTable+"</th><th>"+window.Server.App.LocalizationContent.JoinType+"</th><th>"+window.Server.App.LocalizationContent.RightTable+"</th></tr>";if("mssql"==getFormData().ServerType.toLowerCase())for(var s=0;s<e.length;s++)i+=0==s?"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk' checked></td><td>"+e[s].LeftTableSchema+"."+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableSchema+"."+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>":"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk'></td><td>"+e[s].LeftTableSchema+"."+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableSchema+"."+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>";else for(s=0;s<e.length;s++)i+=0==s?"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk' checked></td><td>"+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>":"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk'></td><td>"+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>";$("table.relation-list").html(i),$(".select-relation-chk").ejRadioButton({size:"small"}),$(".select-relation").attr("data-field-name",t),$("#content-area").ejWaitingPopup("hide"),document.getElementById("select-existing-join").style.display="block";var n='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.LocalizationContent.SelectRelation+"</span></span>";if(isExistingJoinTableDialogBinded){(l=document.getElementById("existing-join-table-dialog").ej2_instances)[0].header=n,l[0].show()}else{var l,o=document.createElement("div");o.setAttribute("id","existing-join-table-dialog"),document.getElementById("server-app-container").appendChild(o),(l=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>460?"760px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:n,showCloseIcon:!0,content:document.getElementById("select-existing-join"),buttons:[{buttonModel:{isPrimary:!0,cssClass:"app-btn-primary select-relation",content:window.Server.App.LocalizationContent.ApplyButton}}]})).appendTo(o),isExistingJoinTableDialogBinded=!0}ejs.popups.createSpinner({target:document.getElementById("existing-join-table-dialog")}),ejs.popups.setSpinner({type:"Material"})}function openGetRelationPopup(e){var t=[];selectedJoinColumn=e,t.push(importDatabaseQuerySchema.UserNameTable);var i="";switch(e){case"firstname":i=importDatabaseQuerySchema.FirstNameTable,null!=importDatabaseQuerySchema.EmailTable&&t.push(importDatabaseQuerySchema.EmailTable),null!=importDatabaseQuerySchema.LastNameTable&&t.push(importDatabaseQuerySchema.LastNameTable),null!=importDatabaseQuerySchema.IsActiveTable&&t.push(importDatabaseQuerySchema.IsActiveTable);break;case"email":i=importDatabaseQuerySchema.EmailTable,null!=importDatabaseQuerySchema.FirstNameTable&&t.push(importDatabaseQuerySchema.FirstNameTable),null!=importDatabaseQuerySchema.LastNameTable&&t.push(importDatabaseQuerySchema.LastNameTable),null!=importDatabaseQuerySchema.IsActiveTable&&t.push(importDatabaseQuerySchema.IsActiveTable);break;case"lastname":i=importDatabaseQuerySchema.LastNameTable,null!=importDatabaseQuerySchema.EmailTable&&t.push(importDatabaseQuerySchema.EmailTable),null!=importDatabaseQuerySchema.FirstNameTable&&t.push(importDatabaseQuerySchema.FirstNameTable),null!=importDatabaseQuerySchema.IsActiveTable&&t.push(importDatabaseQuerySchema.IsActiveTable);break;case"isactive":i=importDatabaseQuerySchema.IsActiveTable,null!=importDatabaseQuerySchema.EmailTable&&t.push(importDatabaseQuerySchema.EmailTable),null!=importDatabaseQuerySchema.FirstNameTable&&t.push(importDatabaseQuerySchema.FirstNameTable),null!=importDatabaseQuerySchema.LastNameTable&&t.push(importDatabaseQuerySchema.LastNameTable)}var s=[],n={};$.each(tableSchema,function(e,l){$.each(l.Tables,function(e,o){var r=o;r.Schema=l.Schema,-1!==jQuery.inArray(o.TableName,t)&&s.push(r),o.TableName==i&&(n=o)})}),createRelationData=s;for(var l,o="",r="",a="",d=0;d<s.length;d++)o+="<option value='"+s[d].TableName+"' data-schema='"+s[d].Schema+"'>"+s[d].TableName+"</option>";for(var h=s[0].Columns,c=0;c<h.length;c++)r+="<li>"+h[c].ColumnName+"</li>";l="<option value='"+n.TableName+"' data-schema='"+n.Schema+"'>"+n.TableName+"</option>";for(var u=0;u<n.Columns.length;u++)a+="<li>"+n.Columns[u].ColumnName+"</li>";$("#left-table-selection").html(o),$("#right-table-selection").html(l),$("#left-table-columnlist ul").html(r),$("#right-table-columnlist ul").html(a),$("#get-join-details").find(".selectpicker").selectpicker("destroy"),$("#get-join-details").find(".selectpicker").selectpicker(),$(".apply-relation").attr("data-field-name",e),validateApplyRelationFields(),document.getElementById("get-join-details").style.display="block";var m='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.LocalizationContent.FormRelation+"</span></span>";if(isJoinTableDialogBinded){(p=document.getElementById("join-table-dialog").ej2_instances)[0].header=m,p[0].show()}else{var p,g=document.createElement("div");g.setAttribute("id","join-table-dialog"),document.getElementById("server-app-container").appendChild(g),(p=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>460?"600px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:m,showCloseIcon:!0,created:function(){const e=document.querySelector(".e-dlg-closeicon-btn");e&&e.classList.add("join-details-popup-close")},content:document.getElementById("get-join-details"),buttons:[{buttonModel:{isPrimary:!0,disabled:!0,cssClass:"app-btn-primary apply-relation",content:window.Server.App.LocalizationContent.ApplyButton}},{click:function(){closeJoinsPopup(),p.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.CancelButton}}]})).appendTo(g),isJoinTableDialogBinded=!0}ejs.popups.createSpinner({target:document.getElementById("join-table-dialog")}),ejs.popups.setSpinner({type:"Material"})}function validateApplyRelationFields(){var e=$("#left-table-columnlist.column-list").find("li.selected"),t=$("#right-table-columnlist.column-list").find("li.selected");e.length>0&&t.length>0?$(".apply-relation").attr("disabled",!1):$(".apply-relation").attr("disabled",!0)}function validateApplyConnectionFields(){for(var e=$("#selected-schema-holder").find(".selected-schema-fields"),t=!0,i=0;i<e.length;i++)""==$(e[i]).html().trim()&&(t=!1);t?$(".selection-add-btn").addClass("hide"):$(".selection-add-btn").removeClass("hide");var s=$("#selected-schema-holder").find(".selected-schema-fields.mandatory");if(0==s.length)return $("#apply-connections").attr("disabled",!0),void $("#save-db-settings").prop("disabled",!0);for(i=0;i<s.length;i++)if(""==$(s[i]).html().trim())return $("#apply-connections").attr("disabled",!0),void $("#save-db-settings").prop("disabled",!0);$("#apply-connections").attr("disabled",!1),$("#save-db-settings").show(),$("#save-db-settings").prop("disabled",!1)}function refreshTemplate(e){$("#checkbox-header").change(headCheckboxOnChange)}function fnActionComplete(e){var t=$("#Grid").data("ejGrid");if($("#checkbox-header").prop("enabled",!1),$("#checkbox-header").change(headCheckboxOnChange),t.multiSelectCtrlRequest=!0,t.clearSelection(),"paging"==e.requestType||"sorting"==e.requestType||"refresh"==e.requestType||"filtering"==e.requestType||"searching"==e.requestType){if("filtering"!=e.requestType&&"searching"!=e.requestType||(objectSelected=[]),void 0!==t.model.currentViewData)for(var i=0;i<t.model.currentViewData.length;i++){var s=t.model.currentViewData[i],n=s.Index;if(-1!=jQuery.inArray(JSON.stringify(s),$.map(objectSelected,JSON.stringify))){var l=$($("#Grid .checkbox-row[data-checked-id='"+n+"']").closest("td").parent()).index();$("#Grid .checkbox-row#row-check"+n).prop("checked",!0),t.selectRows(l)}}var o=$.grep(searchedResult,function(e){return!0===e.IsDuplicated});0===searchedResult.length?$("#checkbox-header").prop("enabled",!1):$("#checkbox-header").prop("enabled",!0),null!=t.getRows()&&(searchedResult.length-o.length===objectSelected.length&&objectSelected.length>0?$("#checkbox-header").prop("enabled",!0):$("#checkbox-header").prop("enabled",!1))}enableimportbutton(),$('[data-bs-toggle="tooltip"]').tooltip(),showOrHideGridPager("#Grid")}function fnCreate(e){$("#checkbox-header").change(headCheckboxOnChange)}function setHeaderCheckedStatus(e){var t=$.grep(searchedResult,function(e){return!0===e.IsDuplicated});null!=e.getRows()&&(searchedResult.length-t.length===objectSelected.length&&objectSelected.length>0?$("#checkbox-header").prop("checked",!0):$("#checkbox-header").prop("checked",!1)),enableimportbutton()}function recordClick(e){if(gridObj=$("#Grid").data("ejGrid"),e.row.find(".checkbox-row").is(":checked"))gridObj.multiSelectCtrlRequest=!0,-1==jQuery.inArray(JSON.stringify(e.data),$.map(objectSelected,JSON.stringify))?objectSelected.push(e.data):(gridObj.selectRows(e.row.index()),selectedIndex.splice(t,1));else{gridObj.multiSelectCtrlRequest=!0,gridObj.selectRows(e.row.index());var t=jQuery.inArray(JSON.stringify(e.data),$.map(objectSelected,JSON.stringify));-1!=t&&(objectSelected.splice(t,1),gridObj.selectRows(e.row.index()),selectedIndex.splice(t,1))}setHeaderCheckedStatus(gridObj)}function fnOnUserGridActionBegin(e){var t=createLoader("Grid");this.element.ejWaitingPopup({template:$("#"+t)}),"refresh"!=e.requestType&&($(".grid-error-validation").css("display","none"),$(".empty-validation").css("display","none"),$(".grid-validation").css("display","none"))}function headCheckboxOnChange(e){if(gridObj=$("#Grid").data("ejGrid"),1==$("#checkbox-header").prop("checked")){$(".checkbox-row").prop("checked",!0),gridObj.multiSelectCtrlRequest=!0,gridObj.selectRows(0,$(".checkbox-row").length+$(".checkbox-row-disabled").length);for(var t=0;t<$(".checkbox-row-disabled").length;t++){var i=$(".checkbox-row-disabled"),s=$($(i[t]).closest("td").parent()).index();gridObj.selectRows(s)}objectSelected=[],objectSelected=$.extend(!0,objectSelected,searchedResult),isSafari&&$(".checkbox-header-label").addClass("check")}else $(".checkbox-row").prop("checked",!1),objectSelected=[],gridObj.clearSelection(),selectedIndex=[],isSafari&&$(".checkbox-header-label").removeClass("check");enableimportbutton()}function enableimportbutton(){gridObj=$("#Grid").data("ejGrid"),objectSelected.length>0?$("#import-selected").attr("disabled",!1):$("#import-selected").attr("disabled",!0)}function SaveSelectedUsers(){objectSelected.length>0&&(showWaitingPopup("content-area"),$.ajax({type:"POST",data:{selectedUsers:objectSelected},url:saveSelectedUsersUrl,success:function(e){if(hideWaitingPopup("content-area"),e.Status)if(e.IsUserLimitExceed)$("#limit-user").ejDialog("open"),e.UserLicense.UsersLeft>0?($(".importad-allowed-count").html(e.UserLicense.UsersLeft),$("#limit-import-ad .licensed-user-count").html(e.UserLicense.Users),$("#limit-import-ad").show()):($("#zero-user-acc .licensed-user-count").html(e.UserLicense.Users),$("#zero-user-acc").show());else{var t="";t+="<li class='list-unstyled'>"+e.Data.SuccessUserCount+" "+window.Server.App.LocalizationContent.UsersImportSuccess+"</li>",parseInt(e.Data.FailureUserCount)>0&&(t+="<li class='list-unstyled'>"+e.Data.FailureUserCount+" "+window.Server.App.LocalizationContent.IsDuplicateUser+" <br />("+window.Server.App.LocalizationContent.IsUserEmailExist+").</li>"),messageBox("su-user-1",window.Server.App.LocalizationContent.DatabaseImport,t,"success",function(){$("#change-selected-column").click();var e=$("#Grid").data("ejGrid");e.clearSelection(),objectSelected=[],e.refreshContent();var t=jQuery.Event("keypress",{keyCode:13});$("#search-database-users").trigger(t),parent.onCloseMessageBox()})}else null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseImport,window.Server.App.LocalizationContent.UserManagementWarningAlert,7e3):messageBox("su-user-1",window.Server.App.LocalizationContent.DatabaseImport,window.Server.App.LocalizationContent.InternalServerError,"success",function(){parent.onCloseMessageBox()})}}))}function searchTree(){var e=treeobj.element,t=$("#search-tree").val();if(t.length>0){for(var i=[],s=[],n=e.find("ul>li>div>a"),l=0;l<n.length;l++)-1!=$(n[l]).clone().children().remove().end().text().trim().toLowerCase().indexOf(t)?i.push(n[l]):s.push(n[l]);var o=e.find(i).closest("li").css("display","block");e.find(s).closest("li").css("display","none");for(var r=0;r<o.length;r++){var a=$(o[r]),d=a.parents("ul").closest("li").css("display","block");d.length>0&&(treeobj.expandNode(d),-1==treeobj.model.expandedNodes.indexOf($(treeobj._liList).index(d))&&window._temp.push(d));var h=a.children("ul");h.length>0&&0==h.children("li:visible").length&&(a.children("ul").children("li").css("display","block"),treeobj.expandNode(o[r]),-1==treeobj.model.expandedNodes.indexOf($(treeobj._liList).index(o[r]))&&window._temp.push(o[r]))}}else{e.find("ul>li").css("display","block");for(r=0;r<window._temp.length;r++)treeobj._collpaseNode(window._temp[r]);window._temp=[]}$("#tree-view li:visible").filter("[data-field-type='column']").removeClass("bottom-li"),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li"),$("#scroll-element-database").data("ejScroller").refresh()}function validateEmail(e,t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function closeJoinsPopup(){var e=$(".selected-schema-fields").filter("[data-field='"+selectedJoinColumn+"']");switch($(e).html(""),$(".selected-schema-btn").filter("[data-field='"+selectedJoinColumn+"']").attr("disabled",!1),selectedJoinColumn){case"username":importDatabaseQuerySchema={};break;case"firstname":importDatabaseQuerySchema.FirstNameTable=void 0,importDatabaseQuerySchema.FirstNameColumn=void 0,importDatabaseQuerySchema.FirstNameTableRelation=void 0;break;case"email":importDatabaseQuerySchema.EmailTable=void 0,importDatabaseQuerySchema.EmailColumn=void 0,importDatabaseQuerySchema.EmailTableRelation=void 0;break;case"lastname":importDatabaseQuerySchema.LastNameTable=void 0,importDatabaseQuerySchema.LastNameColumn=void 0,importDatabaseQuerySchema.LastNameTableRelation=void 0;break;case"isactive":importDatabaseQuerySchema.IsActiveTable=void 0,importDatabaseQuerySchema.IsActiveColumn=void 0,importDatabaseQuerySchema.IsActiveTableRelation=void 0}validateApplyConnectionFields()}function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function testMailTrigger(){if($("#email-setting-form").valid()){var e=document.createElement("div");e.setAttribute("id","test-mail-dialog"),document.getElementById("content-area").appendChild(e);var t=null==$("#mail-account").val()||isNullOrWhitespace($("#mail-account").val())?0:parseInt($("#mail-account").val()),i={MailSettings:{MailSettingsAddress:$("#mail-user-name").val(),MailSettingsAuthType:0==t?parseInt($("#mail-authentication-type").val()):parseInt($("#oauth-mail-authentication-type").val()),MailSettingsUserName:1===parseInt($("#mail-authentication-type").val())?$("#sender-user-name").val():"",MailSettingsPassword:1===parseInt($("#mail-authentication-type").val())?$("#mail-password").val():"",MailSettingsHost:$("#smtp-address").val(),MailSettingsSenderName:$("#mail-display-name").val(),MailSettingsPort:null==$("#port-number").val()||isNullOrWhitespace($("#port-number").val())?0:parseInt($("#port-number").val()),MailSettingsIsSecureAuthentication:$("#secure-mail-authentication").is(":checked"),MailSettingsAccount:t,MailSettingsTenantId:$("#tenant-id").val(),MailSettingsClientId:$("#client-id").val(),MailSettingsClientSecret:$("#client-secret").val()}},s=new ejs.popups.Dialog({header:window.Server.App.LocalizationContent.TestEmailHeader,showCloseIcon:!0,content:document.getElementById("test-mail-box"),buttons:[{click:function(e){$("#test-mail-form").valid()&&$.ajax({type:"POST",url:sendTestMail,data:{email:$("#test-mail").val(),mailSettingsData:JSON.stringify(i)},beforeSend:showWaitingPopup($("#server-app-container")),success:function(e){hideWaitingPopup($("#server-app-container")),e.Status?($("#test-mail").val(""),$(".success-box").show(),$("#test-mail-dialog .e-footer-content").find("button").hide(),$("#test-mail-dialog .e-footer-content").find("button").last().show(),$(".test-mail-info, #test-mail-form").hide()):e.permissionDenied?($("#test-mail").parent().addClass("e-error"),$("#test-mail-validate").css("display","block"),$("#test-mail-validate").html(window.Server.App.LocalizationContent.TestEmailErrorMessage+' <a id="mail-error-detail">'+window.Server.App.LocalizationContent.ViewMore+"</a>"),$("#test-main-error-message").val(window.Server.App.LocalizationContent.PermissionWarningAlert+" "+window.Server.App.LocalizationContent.ReloadPage)):($("#test-mail").parent().addClass("e-error"),$("#test-mail-validate").css("display","block"),$("#test-mail-validate").html(window.Server.App.LocalizationContent.TestEmailErrorMessage+' <a id="mail-error-detail">'+window.Server.App.LocalizationContent.ViewMore+"</a>"),$("#test-main-error-message").val(e.Data))}})},buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.SendButton}},{click:function(){s.hide(),$("#test-mail").val("")},buttonModel:{content:window.Server.App.LocalizationContent.CancelButton}},{click:function(){s.hide(),$("#test-mail").val("")},buttonModel:{isPrimary:!0,content:window.Server.App.LocalizationContent.Done}}],beforeOpen:showTestMailBox,width:"400px",isModal:!0});s.appendTo(e)}}function showTestMailBox(){$("#test-mail").val(loginUserEmail),$("#test-mail").parent().removeClass("e-error"),$("#test-mail-validate, .mail-error-description, .success-box").hide(),$("#test-mail-dialog .e-footer-content").find("button").show(),$("#test-mail-dialog .e-footer-content").find("button").last().hide(),$(".test-mail-info, #test-mail-form, #test-mail-box").show()}function onRuleAddDialogClose(){document.getElementById("rules-add-dialog").ej2_instances[0].hide(),$(".form input[type='text']").val(""),$("#dialog-container").find("div").removeClass("e-error")}function onRuleAddDialogOpen(){$("#add-rule").removeAttr("disabled"),$(".dropdown").removeClass("open"),document.getElementById("rules-add-dialog").ej2_instances[0].show(),$(".e-dialog-icon").attr("title","Close"),$(".validation").closest("div").removeClass("has-error"),$(".ruleadd-validation-messages").css("display","none"),$("#dialog-container").find("div").removeClass("e-error")}$(function(){var e=createLoader("content-area");$("#content-area").ejWaitingPopup({template:$("#"+e)}),addPlacehoder(".connection-properties-form"),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.ItemNameValidator),$.validator.addMethod("hasWhiteSpace",function(e,t){return/\s/.test(e)},window.Server.App.LocalizationContent.HasSpace),$.validator.addMethod("isValidUser",function(e,t){return isValidUserName(e)},window.Server.App.LocalizationContent.IsValidUser),$.validator.addMethod("isValidadminPassword",function(e,t){return validateUserpassword(e)},window.Server.App.LocalizationContent.PasswordConditios),$("#sql-content-holder").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{servername:{isRequired:!0},username:{isRequired:!0},password:{required:!0}},highlight:function(e){$(e).closest(".txt-holder").addClass("has-error"),$(e).parent().find(">.validation-txt-errors").show(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0)},unhighlight:function(e){$(e).closest(".txt-holder").removeClass("has-error"),$(e).parent().find(">.validation-txt-errors").hide()},errorPlacement:function(e,t){$(t).parent().find(">.validation-txt-errors").text(e.html())},messages:{servername:{isRequired:window.Server.App.LocalizationContent.ServerNamevalidator},username:{isRequired:window.Server.App.LocalizationContent.UserNameValidator},password:{required:window.Server.App.LocalizationContent.EnterPassword}}}),$("#postgresql-content-holder").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{servername:{isRequired:!0},port:{isRequired:!0},username:{isRequired:!0},password:{required:!0}},highlight:function(e){$(e).closest(".txt-holder").addClass("has-error"),$(e).parent().find(">.validation-txt-errors").show(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0)},unhighlight:function(e){$(e).closest(".txt-holder").removeClass("has-error"),$(e).parent().find(">.validation-txt-errors").hide()},errorPlacement:function(e,t){$(t).parent().find(">.validation-txt-errors").text(e.html())},messages:{servername:{isRequired:window.Server.App.LocalizationContent.ServerNamevalidator},port:{isRequired:window.Server.App.LocalizationContent.PortValidator},username:{isRequired:window.Server.App.LocalizationContent.UserNameValidator},password:{required:window.Server.App.LocalizationContent.EnterPassword}}});var t=!0;$(document).ready(function(){$("#database-type").trigger("change"),t=!1,$(".database-select-loader-icon").hide()}),$("#database-type").on("change",function(){switch($(".validation-txt-errors").hide(),$(".validation-errors").html(""),$("#test-connection-validation").removeClass("failure").html(""),$(".has-error").removeClass("has-error"),$("#database-type").val().toLowerCase()){case"mssql":0==t?($(".txt-holder input[type='text'], .txt-holder input[type='password']").val(""),$("#txt-dbname").val(""),$("#txt-dbname").selectpicker("destroy"),$("#txt-dbname").selectpicker(),$(".content-display").hide(),$(".show-sql-content").show(),$("div.placeholder").remove(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0),$("#secure-sql-connection").attr("checked",!1)):($(".content-display").hide(),$(".show-sql-content").show(),$("div.placeholder").remove());break;case"postgresql":0==t?($(".txt-holder input[type='text'], .txt-holder input[type='password']").val(""),$("#postgresql-dbname").val(""),$("#postgresql-dbname").selectpicker("destroy"),$("#postgresql-dbname").selectpicker(),$(".content-display").hide(),$(".show-postgresql-content").show(),$("div.placeholder").remove(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0),$("#secure-postgresql-connection").attr("checked",!1)):($(".content-display").hide(),$(".show-postgresql-content").show(),$("div.placeholder").remove());break;case"oracle":0==t&&($(".data-base-fields input[type='text'], .data-base-fields input[type='password']").val(""),$("#database-name").val(""))}addPlacehoder(".connection-properties-form")}),$("#check-windows").on("click change",function(){var e="windows"==$("#check-windows").val(),t=$("#database-type").val();e&&"MSSQL"==t?($("#txt-login").val("").attr("disabled",!0),$("#txt-password-db").val("").attr("disabled",!0)):"MSSQL"==t&&($("#txt-login").attr("disabled",!1),$("#txt-password-db").attr("disabled",!1)),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").hide()}),$("#test-connection").on("click",function(){$("#content-area").ejWaitingPopup("show"),$("#test-connection-validation").html(""),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").html("");var e=getFormData(),t=!1;switch(e.ServerType.toLowerCase()){case"mssql":if(t=$("#sql-content-holder").valid(),""==$("#txt-dbname").val())return $("#txt-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#txt-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide");break;case"postgresql":if(t=$("#postgresql-content-holder").valid(),""==$("#postgresql-dbname").val())return $("#postgresql-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#postgresql-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide")}t?($(this).prop("disabled",!0),doAjaxPost("POST",testConnectionUrl,{data:JSON.stringify(e)},function(e){null!=e.Key&&e.Key?SuccessAlert(window.Server.App.LocalizationContent.TestConnection,window.Server.App.LocalizationContent.TestConnectionSuccess,7e3):null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):$("#test-connection-validation").addClass("failure").removeClass("success").html(e.Data),$("#content-area").ejWaitingPopup("hide"),$("#test-connection").prop("disabled",!1)})):$("#content-area").ejWaitingPopup("hide")}),$(document).on("click","button.dropdown-toggle.selectpicker",function(){var e=$("#"+$(this).attr("data-id"));if($(e).hasClass("database-name-select")&&"block"==$(this).siblings(".dropdown-menu").css("display")){$(".database-select-loader-icon").show(),$(e).html(""),$(e).selectpicker("destroy"),$(e).selectpicker(),$("#test-connection-validation").html(""),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").html("");var t=getFormData(),i=!1;switch(t.ServerType.toLowerCase()){case"mssql":i=$("#sql-content-holder").valid();break;case"postgresql":i=$("#postgresql-content-holder").valid()}i?($(e).prop("disabled",!0),$(e).selectpicker("destroy"),$(e).selectpicker(),doAjaxPost("POST",getDatabaseUrl,{data:JSON.stringify(t)},function(t){if(null!=t.Key&&t.Key){for(var i="",s=0;s<t.Data.length;s++)i+="<option value='"+t.Data[s]+"'>"+t.Data[s]+"</option>";$(e).html(i),$(e).selectpicker("destroy"),$(e).selectpicker(),$("#test-connection-validation").addClass("success").removeClass("failure").html("")}else null!=t.permissionDenied&&t.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):$("#test-connection-validation").addClass("failure").removeClass("success").html(t.Data);$(".database-select-loader-icon").hide(),$(e).prop("disabled",!1),$(e).selectpicker("destroy"),$(e).selectpicker();for(var n=0;n<$(".connect-database-padding .btn-group .dropdown-menu .selectpicker li").length;n++){var l=$(".connect-database-padding .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text();$(".connect-database-padding .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",l)}})):($(e).siblings(".bootstrap-select").find("button.selectpicker").click(),$(".database-select-loader-icon").hide())}}),$(".connect-database-padding #txt-dbname,#client-username,#postgresql-dbname").change(function(){$("#test-connection").prop("disabled",!1),$("#connect-database").addClass("connect-database-button").prop("disabled",!1)}),$(document).on("keypress","#search-database-users",function(e){if(13==e.keyCode){var t=$(this).val();showWaitingPopup("Grid"),doAjaxPost("POST",getSearchedResultUrl,{searchValue:t},function(e){if(e.Status){$("#join-query").html(e.Query),$("#import-selected").attr("disabled","disabled");var t=$("#Grid").data("ejGrid");searchedResult=$.grep(e.Data.Value,function(e){return 1!=e.IsDuplicated}),t.clearSelection(),objectSelected=[],t.option("dataSource",e.Data.Value),t.refreshContent(),e.Data.Success?$("#error-value").find("span").html(""):$("#error-value").find("span").html(e.Data.Message),hideWaitingPopup("Grid")}else parent.messageBox("su-user-1",window.Server.App.LocalizationContent.DatabaseImport,window.Server.App.LocalizationContent.DatabaseSearchFailed,"success",function(){$("#Grid_WaitingPopup").css("display","none"),parent.onCloseMessageBox()}),hideWaitingPopup("Grid")})}}),$("#connect-database").on("click",function(){$("#content-area").ejWaitingPopup("show"),addPlacehoder(".tree-view-search-holder"),$("#test-connection-validation").html(""),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").html("");var e=getFormData(),t=!1;switch(e.ServerType.toLowerCase()){case"mssql":if(t=$("#sql-content-holder").valid(),""==$("#txt-dbname").val())return $("#txt-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#txt-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide");break;case"postgresql":if(t=$("#postgresql-content-holder").valid(),""==$("#postgresql-dbname").val())return $("#postgresql-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#postgresql-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide")}t?doAjaxPost("POST",testConnectionUrl,{data:JSON.stringify(e)},function(t){null!=t.Key&&t.Key?doAjaxPost("POST",connectDatabaseUrl,{data:JSON.stringify(e)},function(e){$("#selected-schema-container").show(),$("#apply-connections").attr("disabled",!0).show(),$("#connect-database").hide(),$("#change-connection").show(),$("#save-db-settings").show(),$("#save-db-settings").prop("disabled",!0),$(".connection-properties-form").hide(),null!=$("#tree-view").data("ejTreeView")&&$("#tree-view").data("ejTreeView").destroy(),$("#selected-schema-container").html(e),addPlacehoder(".tree-view-search-holder");var t=window.innerHeight-330-$("#selected-connect-properties").height()>$("#selected-schema-holder").height()?window.innerHeight-330-$("#selected-connect-properties").height():$("#selected-schema-holder").height();$("#schema-selection").css({height:t+"px"}),$("#tree-view").ejTreeView({nodeExpand:function(){$("#scroll-element-database").data("ejScroller").refresh(),$("#tree-view li:visible").filter("[data-field-type='column']").removeClass("bottom-li"),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li")},nodeCollapse:function(){$("#scroll-element-database").data("ejScroller").refresh(),$("#tree-view li:visible").filter("[data-field-type='column']").removeClass("bottom-li"),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li")},expandOn:"click"}),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li"),$("#scroll-element-database").ejScroller({height:t-25,scrollerSize:9,buttonSize:0}),$("#table-list-treeview").css({height:t+"px"}),$("#record-count").ejNumericTextbox({showSpinButton:!1,value:100,maxValue:1e3,minValue:1,width:60,showRoundedCorner:!0,focusOut:function(e){null==e.value&&$("#record-count").data("ejNumericTextbox").option("value",100)}}),treeobj=$("#tree-view").data("ejTreeView"),$(".selectpicker").selectpicker("destroy"),$(".selectpicker").selectpicker(),$("#content-area").ejWaitingPopup("hide")}):null!=t.permissionDenied&&t.permissionDenied?(WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3),$("#content-area").ejWaitingPopup("hide")):($("#content-area").ejWaitingPopup("hide"),$("#test-connection-validation").addClass("failure").removeClass("success").html(t.Data))}):$("#content-area").ejWaitingPopup("hide")}),$(document).on("click","#save-db-settings",function(){$("#content-area").ejWaitingPopup("show"),doAjaxPost("POST",saveDbSettingsUrl,{connection:JSON.stringify(getFormData()),schemaInfo:JSON.stringify(importDatabaseQuerySchema),activeStatus:$("#txt-activestatus").val()},function(e){e.status?(SuccessAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.SettingsSuccessAlert,7e3),void 0!==e.redirectTo&&""!==e.redirectTo&&(window.location.href=e.redirectTo)):null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3),$("#save-db-settings").hide(),$("#save-db-settings").prop("disabled",!0),$("#change-connection").hide(),$("#connect-database").show(),$("#selected-schema-container").html("").hide(),$(".connection-properties-form").show(),objectSelected=[],importDatabaseQuerySchema={},$("#content-area").ejWaitingPopup("hide")})}),$(document).on("click","#apply-connections",function(){$("#content-area").ejWaitingPopup("show"),doAjaxPost("POST",getResultDataUrl,{connection:JSON.stringify(getFormData()),schemaInfo:JSON.stringify(importDatabaseQuerySchema),sortValue:$("#sort-value").val(),recordCount:$("#record-count").val()},function(e){$(".schema-selection").hide(),$("#apply-connections").hide(),$("#import-selected").show(),$("#selected-data-list").html(e),addPlacehoder(".search-user-holder"),gridData=ej.parseJSON(gridData),gridData.Success?$("#error-value").find("span").html(""):$("#error-value").find("span").html(gridData.Message),$("#import-selected").attr("disabled","disabled"),ej.support.stableSort=!1,GridLocalization(),searchedResult=$.grep(gridData.Value,function(e){return 1!=e.IsDuplicated}),$("#Grid").ejGrid({dataSource:gridData.Value,gridLines:ej.Grid.GridLines.None,allowPaging:!0,allowSorting:!0,allowSelection:!0,allowScrolling:!1,allowFiltering:!1,allowSearching:!0,locale:"en-us",filterSettings:{filterType:"menu"},pageSettings:{pageSize:20},selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:["row"]},templateRefresh:"refreshTemplate",actionComplete:"fnActionComplete",create:"fnCreate",recordClick:"recordClick",actionBegin:"fnOnUserGridActionBegin",enableAltRow:!1,rowDataBound:function(){$("input.checkbox-row-disabled").parents("tr").addClass("row-disabled")},dataBound:function(){$("#checkbox-header").change(headCheckboxOnChange),this.model.indexes={}},columns:[{headerTemplateID:"#checkbox-header-template",template:!0,templateID:"#checkbox-row-template",textAlign:ej.TextAlign.Center,width:10,allowFiltering:!1},{field:"UserName",cssClass:"user-name",headerText:window.Server.App.LocalizationContent.UserName,headerTemplateID:"#user-name-header",width:50,type:"string"},{field:"FirstName",cssClass:"first-name",headerText:window.Server.App.LocalizationContent.FirstName,headerTemplateID:"#first-name-header",width:60,type:"string"},{field:"LastName",cssClass:"last-name",headerText:window.Server.App.LocalizationContent.LastName,headerTemplateID:"#last-name-header",width:60,type:"string"},{field:"EmailId",cssClass:"email-id",headerText:window.Server.App.LocalizationContent.EailAddress,headerTemplateID:"#email-id-header",width:80,type:"string"},{field:"",width:10,templateID:"#user-detail-validation",allowFiltering:!1,textAlign:ej.TextAlign.Center}]}),$("#Grid").data("ejGrid").refreshContent(),$('[data-bs-toggle="tooltip"]').tooltip(),$("#content-area").ejWaitingPopup("hide")})}),$(document).on("click","#change-connection",function(){$("#save-db-settings").hide(),$("#save-db-settings").prop("disabled",!0),$("#change-connection").hide(),$("#connect-database").show(),$("#apply-connections").attr("disabled",!0).hide(),$("#selected-schema-container").html("").hide(),$(".connection-properties-form").show(),$("#import-selected").hide(),objectSelected=[],importDatabaseQuerySchema={}}),$(document).on("click","#change-selected-column",function(){$("#selected-data-list").html(""),$(".schema-selection").show(),$("#apply-connections").show(),$("#import-selected").hide(),objectSelected=[]}),$(document).on("change",".schema-tables",function(){for(var e=$(this).attr("data-field-name"),t=$(this).val(),i=tableSchema.filter(function(e){return e.TableName===t}),s=$(".schema-columns").filter("[data-field-name='"+e+"']"),n="",l=0;l<i[0].Columns.length;l++)n+="<option value='"+i[0].Columns[l].ColumnName+"'>"+i[0].Columns[l].ColumnName+"</option>";$(s).html(n),$(s).selectpicker("destroy"),$(s).selectpicker()}),$(document).on("keyup","#client-username",function(){regexIe8.test(userAgent)?""===$(this).val()?($("#rolename").prop("disabled",!0),$("#rolename").val(""),$("#rolename").next(".placeholder").removeClass("hide").addClass("show")):($("#rolename").prop({disabled:!1,readonly:!0}),$("#rolename").focus(this.blur),$("#rolename").val($(this).val().substring(0,25)+"_role"),$("#rolename").next(".placeholder").removeClass("show").addClass("hide")):-1!=userAgent.indexOf("Safari")&&-1==userAgent.indexOf("Chrome")?($("#rolename").val(""===$(this).val()?"":$(this).val().substring(0,25)+"_role"),$("#rolename").css("-webkit-text-fill-color","black")):$("#rolename").val(""===$(this).val()?"":$(this).val().substring(0,25)+"_role")}),$(document).on("click",".selected-schema-btn",function(e){var t=$(this).attr("data-field"),i=$(this).closest("[data-field-type='column']");if(console.log(i),1==i.length&&"column"==$(i).attr("data-field-type")){$(".selected-schema-btn-dialog").hide(),$("#tree-view .selection-add-btn").removeClass("show"),$(".selected-schema-btn").filter("[data-field='"+t+"']").attr("disabled",!0);var s=$(i).attr("data-schema-name"),n=$(i).attr("data-table-name"),l=$(i).attr("data-column-name"),o=$(i).attr("data-type"),r="<div data-table-name='"+n+"'><span>"+l+" ["+n+"]</span><span class='su su-close cancel-schema'></span></div>",a=$(".selected-schema-fields").filter("[data-field='"+t+"']");switch($(a).html(r),t){case"username":importDatabaseQuerySchema.UserNameSchema=s,importDatabaseQuerySchema.UserNameTable=n,importDatabaseQuerySchema.UserNameColumn=l;break;case"firstname":importDatabaseQuerySchema.FirstNameSchema=s,importDatabaseQuerySchema.FirstNameTable=n,importDatabaseQuerySchema.FirstNameColumn=l;break;case"email":importDatabaseQuerySchema.EmailSchema=s,importDatabaseQuerySchema.EmailTable=n,importDatabaseQuerySchema.EmailColumn=l;break;case"lastname":importDatabaseQuerySchema.LastNameSchema=s,importDatabaseQuerySchema.LastNameTable=n,importDatabaseQuerySchema.LastNameColumn=l;break;case"isactive":importDatabaseQuerySchema.IsActiveSchema=s,importDatabaseQuerySchema.IsActiveTable=n,importDatabaseQuerySchema.IsActiveColumn=l,importDatabaseQuerySchema.IsActiveDatabaseType=o}if("username"==t)$(".selected-schema-btn").filter("[data-field!='username']").attr("disabled",!1);else if(n==importDatabaseQuerySchema.UserNameTable||"firstname"==t&&(n==importDatabaseQuerySchema.EmailTable||n==importDatabaseQuerySchema.lastname||n==importDatabaseQuerySchema.IsActiveTable)||"email"==t&&(n==importDatabaseQuerySchema.FirstNameTable||n==importDatabaseQuerySchema.LastNameTable||n==importDatabaseQuerySchema.IsActiveTable)||"lastname"==t&&(n==importDatabaseQuerySchema.EmailTable||n==importDatabaseQuerySchema.FirstNameTable||n==importDatabaseQuerySchema.IsActiveTable)||"isactive"==t&&(n==importDatabaseQuerySchema.EmailTable||n==importDatabaseQuerySchema.FirstNameTable||n==importDatabaseQuerySchema.LastNameTable))var d=void 0;else d=getTableRelation(t);switch(t){case"firstname":importDatabaseQuerySchema.FirstNameTableRelation=d;break;case"email":importDatabaseQuerySchema.EmailTableRelation=d;break;case"lastname":importDatabaseQuerySchema.LastNameTableRelation=d;break;case"isactive":importDatabaseQuerySchema.IsActiveTableRelation=d}}validateApplyConnectionFields()}),$(document).on("click",".cancel-schema",function(e){var t=$(this).parents(".selected-schema-fields").attr("data-field");switch($(".selected-schema-btn").filter("[data-field='"+t+"']").attr("disabled",!1),"username"==t?($(".selected-schema-btn").filter("[data-field!='username']").attr("disabled",!0),$(".selected-schema-fields").html("")):$(this).parents(".selected-schema-fields").html(""),t){case"username":importDatabaseQuerySchema={};break;case"firstname":importDatabaseQuerySchema.FirstNameTable=void 0,importDatabaseQuerySchema.FirstNameColumn=void 0,importDatabaseQuerySchema.FirstNameTableRelation=void 0;break;case"email":importDatabaseQuerySchema.EmailTable=void 0,importDatabaseQuerySchema.EmailColumn=void 0,importDatabaseQuerySchema.EmailTableRelation=void 0;break;case"lastname":importDatabaseQuerySchema.LastNameTable=void 0,importDatabaseQuerySchema.LastNameColumn=void 0,importDatabaseQuerySchema.LastNameTableRelation=void 0;break;case"isactive":importDatabaseQuerySchema.IsActiveTable=void 0,importDatabaseQuerySchema.IsActiveColumn=void 0,importDatabaseQuerySchema.IsActiveTableRelation=void 0}validateApplyConnectionFields()}),$(document).on("click","#tree-view .selection-add-btn",function(e){$("#tree-view .selection-add-btn").removeClass("show"),$(".selected-schema-btn-dialog").hide(),$(this).siblings(".selected-schema-btn-dialog").show(),$(this).addClass("show")}),$(document).on("click",".select-relation",function(e){var t=$(this).attr("data-field-name"),i=tableRelationList[parseInt($("#select-existing-join input[type='radio']:checked").val())];switch(t){case"firstname":importDatabaseQuerySchema.FirstNameTableRelation=i;break;case"email":importDatabaseQuerySchema.EmailTableRelation=i;break;case"lastname":importDatabaseQuerySchema.LastNameTableRelation=i;break;case"isactive":importDatabaseQuerySchema.IsActiveTableRelation=i}tableRelationList=[],document.getElementById("existing-join-table-dialog").ej2_instances[0].hide()}),$(document).on("click",function(e){$(e.target).hasClass("selection-add-btn")||0==$(e.target).parents(".selected-schema-btn-dialog").length&&($(".selected-schema-btn-dialog").hide(),$("#tree-view .selection-add-btn").removeClass("show"))}),$(document).on("click",".column-list li",function(e){$(this).siblings("li").removeClass("selected"),$(this).addClass("selected"),validateApplyRelationFields()}),$(document).on("change","#left-table-selection",function(e){var t=$(this).val(),i=[];$.each(createRelationData,function(e,s){s.TableName==t&&(i=s.Columns)});for(var s="",n=0;n<i.length;n++)s+="<li>"+i[n].ColumnName+"</li>";$("#left-table-columnlist ul").html(s),validateApplyRelationFields()}),$(document).on("click",".apply-relation",function(e){var t=$(this).attr("data-field-name"),i=$("#join-type").val(),s={LeftTableSchema:"inner join"==i?$("#right-table-selection").find("option").filter("[value='"+$("#right-table-selection").val()+"']").attr("data-schema"):$("#left-table-selection").find("option").filter("[value='"+$("#left-table-selection").val()+"']").attr("data-schema"),RightTableSchema:"inner join"==i?$("#left-table-selection").find("option").filter("[value='"+$("#left-table-selection").val()+"']").attr("data-schema"):$("#right-table-selection").find("option").filter("[value='"+$("#right-table-selection").val()+"']").attr("data-schema"),LeftTableName:"inner join"==i?$("#right-table-selection").val():$("#left-table-selection").val(),RightTableName:"inner join"==i?$("#left-table-selection").val():$("#right-table-selection").val(),LeftTableColumnName:"inner join"==i?$("#right-table-columnlist.column-list").find("li.selected").text():$("#left-table-columnlist.column-list").find("li.selected").text(),RightTableColumnName:"inner join"==i?$("#left-table-columnlist.column-list").find("li.selected").text():$("#right-table-columnlist.column-list").find("li.selected").text(),LeftTable:"",LeftTableCondition:"",RightTable:"",RightTableCondition:"",Relationship:i};switch(t){case"firstname":importDatabaseQuerySchema.FirstNameTableRelation=s;break;case"email":importDatabaseQuerySchema.EmailTableRelation=s;break;case"lastname":importDatabaseQuerySchema.LastNameTableRelation=s;break;case"isactive":importDatabaseQuerySchema.IsActiveTableRelation=s}createRelationData=[],document.getElementById("join-table-dialog").ej2_instances[0].hide()}),$(document).on("click","#search-tree-close",function(e){$("#search-tree").val(""),$("#search-tree").siblings("span.close-icon").css("display","none"),$("#search-tree").siblings("span.su-search").css("display","block"),searchTree()}),$(document).on("keyup","#search-tree",function(e){13==e.keyCode&&searchTree()}),$(document).on("click","#import-selected",SaveSelectedUsers),$(document).on("click",".join-details-popup-close",closeJoinsPopup)}),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}}),$(document).ready(function(){$("#test-mail-form").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid(),$("#success-message").html("")},rules:{"test-mail":{required:!0,isValidEmail:!0}},highlight:function(e){$(e).closest("div").addClass("e-error"),$("#test-mail-validate").css("display","block")},unhighlight:function(e){$(e).closest("div").removeClass("e-error"),$("#test-mail-validate").css("display","none"),$(".mail-error-description").hide()},errorPlacement:function(e,t){$(t).parent().find(".validation-message").css("display","block").html(e.html())},messages:{"test-mail":{required:window.Server.App.LocalizationContent.SenderEmailValidator,isValidEmail:window.Server.App.LocalizationContent.IsValidEmail}}})}),$(document).on("click","#mail-error-detail",function(){$(".mail-error-description").show(),$("#copy-test-main-error-message").tooltip({animation:!1})}),$(document).on("click","#copy-test-main-error-message",function(e){$("#test-main-error-message").select(),document.execCommand("copy"),$("#copy-test-main-error-message").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess),$("#copy-test-main-error-message").tooltip("hide").attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess).tooltip("fixTitle").tooltip("show"),setTimeout(function(){$("#copy-test-main-error-message").attr("data-original-title",window.Server.App.LocalizationContent.LinkCopy),$("#copy-test-main-error-message").tooltip()},3e3)}),$(document).on("click","#test-main-error-message",function(e){$("#test-main-error-message").select()}),$(document).on("click","#test-mail-connection",function(){testMailTrigger()}),$(document).ready(function(){addPlacehoder("#rules-add-dialog"),$("#rules-add-dialog").ejWaitingPopup(),new ejs.popups.Dialog({header:"Add Rules",content:document.getElementById("dialog-container"),showCloseIcon:!0,width:"500px",height:"auto",isModal:!0,visible:!1,closeOnEscape:!0,animationSettings:{effect:"Zoom"},close:"onRuleAddDialogClose"}).appendTo("#rules-add-dialog"),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.RuleNameValidation),$.validator.addMethod("hasWhiteSpaceExisits",function(e,t){return!/\s/g.test(e)},window.Server.App.LocalizationContent.RuleHasSpecialCharacter),$.validator.addMethod("isValidRuleName",function(e,t){return/^[a-zA-Z0-9\s]+$/.test(e)&&!/^\s/.test(e)},window.Server.App.LocalizationContent.RuleHasSpecialCharacter),$.validator.addMethod("isIPaddressExists",function(e,t){return!function(e){if(isEditing&&e===existsIpAddress)return!1;if(dataSourceRule)return dataSourceRule.some(function(t){return t.IPAddress===e});return!1}($.trim(e))},window.Server.App.LocalizationContent.IPAddressExists),$.validator.addMethod("isRuleNameExists",function(e,t){return i=$.trim(e),!(isEditing?i!==exisitingRuleName&&dataSourceRule.some(function(e){return e.RuleName.toString()===i.toString()}):dataSourceRule.some(function(e){return e.RuleName.toLowerCase().toString()===i.toLowerCase().toString()}));var i},window.Server.App.LocalizationContent.RuleNameExists),$.validator.addMethod("isValidIPAddress",function(e,t){var i=$('input[name="ipaddress-type"]:checked').val();if("IPv4"===i){if(!/^(25[0-5]|2[0-4][0-9]|[0-1]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[0-1]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[0-1]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[0-1]?[0-9][0-9]?)$/.test(e))return $.validator.messages.isValidIPAddress=window.Server.App.LocalizationContent.InvalidIPV4IPAddress,!1}else{if("IPv6"!==i)return!1;if(!/^(?:(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,7}:|(?:[0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,5}(?::[0-9a-fA-F]{1,4}){1,2}|(?:[0-9a-fA-F]{1,4}:){1,4}(?::[0-9a-fA-F]{1,4}){1,3}|(?:[0-9a-fA-F]{1,4}:){1,3}(?::[0-9a-fA-F]{1,4}){1,4}|(?:[0-9a-fA-F]{1,4}:){1,2}(?::[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:(?::[0-9a-fA-F]{1,4}){1,6}|:(?::[0-9a-fA-F]{1,4}){1,7}|::|(?:[0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])|::(?:ffff(?::0{1,4}){0,1}:){0,1}((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9]))(?:%[0-9a-zA-Z]{1,})?$/.test(e))return $.validator.messages.isValidIPAddress=window.Server.App.LocalizationContent.InvalidIPV6IPAddress,!1}return!0},window.Server.App.LocalizationContent.IPAddressValidation),$("#dialog-container").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{"rule-name":{isRequired:!0,isValidRuleName:!0,isRuleNameExists:!0},"ip-address":{isRequired:!0,isValidIPAddress:!0,isIPaddressExists:!0}},highlight:function(e){$(e).closest("div").addClass("has-error")},unhighlight:function(e){$(e).closest("div").removeClass("has-error"),$(e).closest("div").find("span.ruleadd-validation-messages").html("")},errorPlacement:function(e,t){$(t).closest("div").find("span.ruleadd-validation-messages").html(e.html()).css("display","block")},messages:{"rule-name":{isRequired:window.Server.App.LocalizationContent.RuleNameValidation},"ip-address":{isRequired:window.Server.App.LocalizationContent.IPAddressValidation,hasWhiteSpaceExisits:window.Server.App.LocalizationContent.RuleHasSpecialCharacter}}}),$(document).on("keyup","#dialog-container",function(e){13==e.keyCode&&($("#cancel-rule").is(":focus")?onRuleAddDialogClose():$("#add-rule").is(":focus")?e.preventDefault():$("input#add-rule").trigger("click"))}),$(document).on("click","#create-rule",function(){if($("#dialog-container").valid()){$("#add-rule").removeAttr("disabled"),$(".form input[type='text']").val("");$("#rulesgrid").data("ejGrid");$(".validation").closest("div").removeClass("has-error"),$(".ruleadd-validation-messages").css("display","none")}})}),$(document).on("click","#add-rule-btn",function(){isEditing=!1,$("#rules-add-dialog_title").text("Add Rules"),$("#add-rule").val("Add Rule"),onRuleAddDialogOpen()}),$(document).on("click","#cancel-rule",function(){onRuleAddDialogClose()});
